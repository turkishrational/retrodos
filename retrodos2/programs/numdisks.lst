     1                                  ; Erdogan Tan - Retro DOS 1.0 Diskette Type Check
     2                                  ; 19/02/2018
     3                                  
     4                                  	[org 100h]
     5                                  
     6 00000000 B200                    	mov	dl, 0
     7 00000002 B408                    	mov	ah, 8
     8 00000004 CD13                    	int	13h
     9 00000006 725C                    	jc	short nodisks 
    10 00000008 20DB                    	and	bl, bl
    11 0000000A 7458                    	jz	short nodisks
    12 0000000C 80FB05                  	cmp	bl, 5
    13 0000000F 7753                    	ja	short nodisks	
    14 00000011 881E[4101]              	mov	[disktype], bl
    15 00000015 0016[9A00]              	add	byte [numdisks], dl
    16 00000019 BE[8500]                	mov	si, msgnumdiskettes
    17 0000001C E84D00                  	call	print_msg
    18 0000001F BE[9E00]                	mov	si, diskettemsg
    19 00000022 E84700                  	call	print_msg
    20 00000025 8A1E[4101]              	mov	bl, [disktype]
    21 00000029 D0E3                    	shl	bl, 1
    22 0000002B 81C3[7900]              	add	bx, dtyptab-2
    23 0000002F 8B37                    	mov	si, [bx]
    24 00000031 E83800                  	call	print_msg
    25 00000034 803E[9A00]31            	cmp	byte [numdisks], "1"
    26 00000039 7627                    	jna	short terminate
    27 0000003B C606[A700]32            	mov	byte [disknum], "2"
    28 00000040 BE[9E00]                	mov	si, diskettemsg
    29 00000043 E82600                  	call	print_msg
    30 00000046 B201                    	mov	dl, 1
    31 00000048 B408                    	mov	ah, 8
    32 0000004A CD13                    	int	13h
    33 0000004C 7216                    	jc	short nodisks
    34 0000004E 20DB                    	and	bl, bl
    35 00000050 7412                    	jz	short nodisks
    36 00000052 80FB05                  	cmp	bl, 5
    37 00000055 770D                    	ja	short nodisks
    38 00000057 D0E3                    	shl	bl, 1
    39 00000059 81C3[7900]              	add	bx, dtyptab-2
    40 0000005D 8B37                    	mov	si, [bx]
    41 0000005F E80A00                  	call	print_msg
    42                                  terminate:
    43 00000062 CD20                    	int	20h
    44                                  
    45                                  nodisks:
    46 00000064 BE[AC00]                	mov	si, msgnodisks
    47 00000067 E80200                  	call	print_msg
    48 0000006A CD20                    	int	20h
    49                                  
    50                                  print_msg:
    51 0000006C B40E                    	mov	ah, 0Eh
    52 0000006E BB0700                  	mov	bx, 7
    53                                  printloop:
    54 00000071 AC                      	lodsb
    55 00000072 20C0                    	and	al, al
    56 00000074 7404                    	jz	short return
    57 00000076 CD10                    	int	10h
    58 00000078 EBF7                    	jmp	short printloop
    59                                  return:
    60 0000007A C3                      	retn
    61                                  
    62                                  dtyptab:
    63 0000007B [BC00]                  	dw _01h
    64 0000007D [D600]                  	dw _02h
    65 0000007F [F100]                  	dw _03h
    66 00000081 [0B01]                  	dw _04h
    67 00000083 [2601]                  	dw _05h	
    68                                  
    69                                  msgnumdiskettes:
    70 00000085 4E756D626572206F66-     	db 'Number of Diskettes: '
    71 0000008E 204469736B65747465-
    72 00000097 733A20             
    73                                  numdisks:
    74 0000009A 300D0A00                	db '0',13,10,0	
    75                                  diskettemsg:
    76 0000009E 4469736B6574746520      	db 'Diskette '
    77                                  disknum:
    78 000000A7 31203A2000              	db '1 : ',0
    79                                  
    80                                  msgnodisks:
    81 000000AC 554E4B4E4F574E2044-     	db 'UNKNOWN DISK!',13,10,0
    82 000000B5 49534B210D0A00     
    83                                  
    84                                  _01h:
    85 000000BC 3336304B422C203430-     	db '360KB, 40 Track, 5 1/4"',13,10,0
    86 000000C5 20547261636B2C2035-
    87 000000CE 20312F34220D0A00   
    88                                  _02h:
    89 000000D6 313230304B422C2038-     	db '1200KB, 80 Track, 5 1/4"',13,10,0
    90 000000DF 3020547261636B2C20-
    91 000000E8 3520312F34220D0A00 
    92                                  _03h:
    93 000000F1 3732304B422C203830-     	db '720KB, 80 Track, 3 1/2"',13,10,0
    94 000000FA 20547261636B2C2033-
    95 00000103 20312F32220D0A00   
    96                                  _04h:
    97 0000010B 312E34344D422C2038-     	db '1.44MB, 80 Track, 3 1/2"',13,10,0
    98 00000114 3020547261636B2C20-
    99 0000011D 3320312F32220D0A00 
   100                                  _05h:
   101 00000126 322E38384D422C2038-     	db '2.88MB, 80 Track, 3 1/2"',13,10,0 
   102 0000012F 3020547261636B2C20-
   103 00000138 3320312F32220D0A00 
   104                                  
   105                                  disktype:
   106 00000141 00                      	db 0
