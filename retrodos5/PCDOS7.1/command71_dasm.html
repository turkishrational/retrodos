<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>IDA - C:\pcdos7_1\command71.idb (COMMAND.COM)</title>
</head>
<body bgcolor="white">
<span style="white-space: pre; font-family: Consolas; color: blue; background: white">

<span style="color:maroon">RESGROUP:0100 </span>;
<span style="color:maroon">RESGROUP:0100 </span>; +-------------------------------------------------------------------------+
<span style="color:maroon">RESGROUP:0100 </span>; |   This file has been generated by The Interactive Disassembler (IDA)    |
<span style="color:maroon">RESGROUP:0100 </span>; |           Copyright (c) 2013 Hex-Rays, &lt;support@hex-rays.com&gt;           |
<span style="color:maroon">RESGROUP:0100 </span>; |                      Licensed to: Freeware version                      |
<span style="color:maroon">RESGROUP:0100 </span>; +-------------------------------------------------------------------------+
<span style="color:maroon">RESGROUP:0100 </span>;
<span style="color:maroon">RESGROUP:0100 </span>; Input MD5   : 9C3A8A319D72C3F7B1DD1F821637262A
<span style="color:maroon">RESGROUP:0100
RESGROUP:0100 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:0100 </span>; File Name   : C:\Users\Erdo­an\Desktop\COMMAND.COM
<span style="color:maroon">RESGROUP:0100 </span>; Format      : MS-DOS COM-file
<span style="color:maroon">RESGROUP:0100 </span>; Base Address: 0h Range: 100h-D32Ah Loaded length: D22Ah
<span style="color:maroon">RESGROUP:0100
RESGROUP:0100                 </span>Ideal
<span style="color:maroon">RESGROUP:0100                 </span>p386n
<span style="color:maroon">RESGROUP:0100                 </span>model tiny
<span style="color:maroon">RESGROUP:0100
RESGROUP:0100 </span><span style="color:gray">; ===========================================================================
</span><span style="color:maroon">RESGROUP:0100
RESGROUP:0100 </span><span style="color:gray">; Segment type: Pure code
</span><span style="color:maroon">RESGROUP:0100 </span>segment         RESGROUP byte public &#039;RESGROUP&#039; use16
<span style="color:maroon">RESGROUP:0100                 </span>assume cs:RESGROUP
<span style="color:maroon">RESGROUP:0100                 </span><span style="color:gray">;org 100h
</span><span style="color:maroon">RESGROUP:0100                 </span>assume es:nothing, ss:nothing, ds:RESGROUP, fs:nothing, gs:nothing
<span style="color:maroon">RESGROUP:0100
RESGROUP:0100 </span>start<span style="color:navy">:
</span><span style="color:maroon">RESGROUP:0100                 </span><span style="color:navy">jmp     </span>ConProc
<span style="color:maroon">RESGROUP:0100 </span><span style="color:gray">; ---------------------------------------------------------------------------
RESGROUP:0103 </span>version         <span style="color:navy">db </span><span style="color:#008040">7Ah                  </span>; ((major_version AND 0Fh) SHL 4)
<span style="color:gray">RESGROUP:0103                                         </span>;   OR (minor_version AND 0Fh)
<span style="color:gray">RESGROUP:0104                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:0106                 </span><span style="color:navy">db </span><span style="color:#008040">0Ch </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">), </span><span style="color:#008040">0Dh
</span><span style="color:gray">RESGROUP:0113 </span>a@Ibm12_01_2003 <span style="color:navy">db &#039;@#IBM:12.01.2003.build_1.32#@ COMMAND.COM(USA)&#039;,0
</span><span style="color:gray">RESGROUP:0142                 </span><span style="color:navy">db </span><span style="color:#008040">22h </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">), </span><span style="color:#008040">1Ah</span><span style="color:navy">, </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:0166 </span>Int2f_Entry     <span style="color:navy">dd </span>MsgInt2fHandler      <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:016A </span>Int2e_Entry     <span style="color:navy">dd </span>Int_2e               <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:016E </span>Ctrlc_Entry     <span style="color:navy">dd </span>ContC                <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0172 </span>CritErr_Entry   <span style="color:navy">dd </span>DSKERR               <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0176 </span>Exec_Entry      <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:017A </span>RemCheck_Entry  <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:017E </span>TrnLodCom1_Entry <span style="color:navy">dd </span><span style="color:#008040">0                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0182 </span>LodCom_Entry    <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0186 </span>MsgRetrv_Entry  <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:018A </span>HeadFix_Entry   <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:018E </span>UMBOff_Entry    <span style="color:navy">dd </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:0192 </span>XMMCallAddr     <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0196 </span>ComInHMA        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">RESGROUP:0197 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:0197
RESGROUP:0197 </span>Int2f_Trap<span style="color:navy">:                             </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">RESGROUP:0197                 </span><span style="color:navy">sti
</span><span style="color:maroon">RESGROUP:0198                 </span><span style="color:navy">call    </span>CheckA20
<span style="color:maroon">RESGROUP:019B                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:019C                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:019D                 </span><span style="color:navy">jmp     [cs:</span>Int2f_Entry<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:01A2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:01A2
RESGROUP:01A2 </span>Int2e_Trap<span style="color:navy">:                             </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">RESGROUP:01A2                 </span><span style="color:navy">sti
</span><span style="color:maroon">RESGROUP:01A3                 </span><span style="color:navy">call    </span>CheckA20
<span style="color:maroon">RESGROUP:01A6                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:01A7                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:01A8                 </span><span style="color:navy">jmp     [cs:</span>Int2e_Entry<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:01AD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:01AD
RESGROUP:01AD </span>Ctrlc_Trap<span style="color:navy">:                             </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">RESGROUP:01AD                 </span><span style="color:navy">sti
</span><span style="color:maroon">RESGROUP:01AE                 </span><span style="color:navy">call    </span>CheckA20
<span style="color:maroon">RESGROUP:01B1                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:01B2                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:01B3                 </span><span style="color:navy">jmp     [cs:</span>Ctrlc_Entry<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:01B8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:01B8
RESGROUP:01B8 </span>CritErr_Trap<span style="color:navy">:                           </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">RESGROUP:01B8                 </span><span style="color:navy">sti
</span><span style="color:maroon">RESGROUP:01B9                 </span><span style="color:navy">call    </span>CheckA20
<span style="color:maroon">RESGROUP:01BC                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:01BD                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:01BE                 </span><span style="color:navy">jmp     [cs:</span>CritErr_Entry<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:01C3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:01C3
RESGROUP:01C3 </span>Exec_Trap<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:01C3                 </span><span style="color:navy">call    </span>CheckA20
<span style="color:maroon">RESGROUP:01C6                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:01C7                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:01C8                 </span><span style="color:navy">jmp     [cs:</span>Exec_Entry<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:01CD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:01CD
RESGROUP:01CD </span>RemCheck_Trap<span style="color:navy">:                          </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">RESGROUP:01CD                 </span><span style="color:navy">call    </span>CheckA20
<span style="color:maroon">RESGROUP:01D0                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:01D1                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:01D2                 </span><span style="color:navy">jmp     [cs:</span>RemCheck_Entry<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:01D7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:01D7
RESGROUP:01D7 </span>TrnLodCom1_Trap<span style="color:navy">:                        </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">RESGROUP:01D7                 </span><span style="color:navy">call    </span>CheckA20
<span style="color:maroon">RESGROUP:01DA                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:01DB                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:01DC                 </span><span style="color:navy">jmp     [cs:</span>TrnLodCom1_Entry<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:01E1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:01E1
RESGROUP:01E1 </span>LodCom_Trap<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:01E1                 </span><span style="color:navy">call    </span>CheckA20
<span style="color:maroon">RESGROUP:01E4                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:01E5                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:01E6                 </span><span style="color:navy">jmp     [cs:</span>LodCom_Entry<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:01EB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:01EB
RESGROUP:01EB </span>MsgRetrv_Trap<span style="color:navy">:                          </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">RESGROUP:01EB                 </span><span style="color:navy">call    </span>CheckA20
<span style="color:maroon">RESGROUP:01EE                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:01EF                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:01F0                 </span><span style="color:navy">jmp     [cs:</span>MsgRetrv_Entry<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:01F5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:01F5
RESGROUP:01F5 </span>HeadFix_Trap<span style="color:navy">:                           </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">RESGROUP:01F5                 </span><span style="color:navy">call    </span>CheckA20
<span style="color:maroon">RESGROUP:01F8                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:01F9                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:01FA                 </span><span style="color:navy">jmp     [cs:</span>HeadFix_Entry<span style="color:navy">]
</span><span style="color:black">RESGROUP:01FF
RESGROUP:01FF </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:01FF
RESGROUP:01FF
RESGROUP:01FF </span>proc            CheckA20 near           <span style="color:green">; ...
</span><span style="color:black">RESGROUP:01FF                 </span><span style="color:navy">pushf
</span><span style="color:black">RESGROUP:0200                 </span><span style="color:navy">cmp     [cs:</span>ComInHMA<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:0206                 </span><span style="color:navy">jz      short </span><span style="color:gray">A20_on
</span><span style="color:black">RESGROUP:0208                 </span><span style="color:navy">push    ax              </span>; QueryA20
<span style="color:black">RESGROUP:0209                 </span><span style="color:navy">push    bx
</span><span style="color:black">RESGROUP:020A                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">7
</span><span style="color:black">RESGROUP:020C                 </span><span style="color:navy">call    [cs:</span>XMMCallAddr<span style="color:navy">]
</span><span style="color:black">RESGROUP:0211                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">RESGROUP:0213                 </span><span style="color:navy">jnz     short </span><span style="color:gray">QA20_ON
</span><span style="color:black">RESGROUP:0215                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">5           </span>; EnableA20
<span style="color:black">RESGROUP:0217                 </span><span style="color:navy">call    [cs:</span>XMMCallAddr<span style="color:navy">]
</span><span style="color:black">RESGROUP:021C                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">RESGROUP:021E                 </span><span style="color:navy">jz      short </span><span style="color:gray">XMMerror
</span><span style="color:black">RESGROUP:0220
RESGROUP:0220 </span><span style="color:gray">QA20_ON</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0220                 </span><span style="color:navy">pop     bx
</span><span style="color:black">RESGROUP:0221                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:0222
RESGROUP:0222 </span><span style="color:gray">A20_on</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0222                 </span><span style="color:navy">popf
</span><span style="color:black">RESGROUP:0223                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:0224 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:0224
RESGROUP:0224 </span><span style="color:gray">XMMerror</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0224                 </span><span style="color:navy">jmp     short </span><span style="color:gray">XMMerror
</span><span style="color:black">RESGROUP:0224 </span>endp            CheckA20
<span style="color:black">RESGROUP:0224
RESGROUP:0224 </span><span style="color:gray">; ---------------------------------------------------------------------------
RESGROUP:0226 </span>Carousel_i2f_Hook <span style="color:navy">db </span><span style="color:#008040">0EAh               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0226                                         </span>; far jump opcode
<span style="color:gray">RESGROUP:0227                 </span><span style="color:navy">dw offset </span>Int2f_Trap
<span style="color:gray">RESGROUP:0229 </span>int2fh_segm     <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:black">RESGROUP:022B
RESGROUP:022B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:022B
RESGROUP:022B
RESGROUP:022B </span>proc            UnHideUMBs near         <span style="color:green">; ...
</span><span style="color:black">RESGROUP:022B                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:022C                 </span><span style="color:navy">mov     al, [</span>fInHigh<span style="color:navy">]
</span><span style="color:black">RESGROUP:022F                 </span><span style="color:navy">or      al, al
</span><span style="color:black">RESGROUP:0231                 </span><span style="color:navy">jnz     short </span><span style="color:gray">uhu10
</span><span style="color:black">RESGROUP:0233                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:0234                 </span><span style="color:navy">stc
</span><span style="color:black">RESGROUP:0235                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:0236 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:0236
RESGROUP:0236 </span><span style="color:gray">uhu10</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0236                 </span><span style="color:navy">call    </span>linkumb
<span style="color:black">RESGROUP:0239                 </span><span style="color:navy">call    </span>FreeUMBs
<span style="color:black">RESGROUP:023C                 </span><span style="color:navy">mov     [es:</span>fInHigh<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:0242                 </span><span style="color:navy">call    </span>he_unlink
<span style="color:black">RESGROUP:0245                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:0246                 </span><span style="color:navy">clc
</span><span style="color:black">RESGROUP:0247                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:0247 </span>endp            UnHideUMBs
<span style="color:black">RESGROUP:0247
RESGROUP:0248
RESGROUP:0248 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:0248
RESGROUP:0248
RESGROUP:0248 </span>proc            he_unlink near          <span style="color:green">; ...
</span><span style="color:black">RESGROUP:0248                 </span><span style="color:navy">xor     bh, bh
</span><span style="color:black">RESGROUP:024A                 </span><span style="color:navy">mov     bl, [</span>fm_umb<span style="color:navy">]
</span><span style="color:black">RESGROUP:024E                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5803h       </span>; DOS_UMBLINK_SET
<span style="color:black">RESGROUP:0251                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">RESGROUP:0251                                         </span>; AL = function code: (DOS 5beta) set UMB link state
<span style="color:black">RESGROUP:0253                 </span><span style="color:navy">xor     bh, bh
</span><span style="color:black">RESGROUP:0255                 </span><span style="color:navy">mov     bl, [</span>fm_strat<span style="color:navy">]
</span><span style="color:black">RESGROUP:0259                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5801h       </span>; DOS_STRATEGY_SET
<span style="color:black">RESGROUP:025C                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">RESGROUP:025C                                         </span>; AL = function code: set allocation strategy
<span style="color:black">RESGROUP:025E                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:025E </span>endp            he_unlink
<span style="color:black">RESGROUP:025E
RESGROUP:025F
RESGROUP:025F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:025F
RESGROUP:025F
RESGROUP:025F </span>proc            FreeUMBs near           <span style="color:green">; ...
</span><span style="color:black">RESGROUP:025F                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:0260                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:0261                 </span><span style="color:navy">call    </span>HeadUmb
<span style="color:black">RESGROUP:0264                 </span><span style="color:navy">jb      short </span><span style="color:gray">fusX
</span><span style="color:black">RESGROUP:0266
RESGROUP:0266 </span><span style="color:gray">fus10</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0266                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">RESGROUP:0268                 </span><span style="color:navy">call    </span>isHideMCB
<span style="color:black">RESGROUP:026B                 </span><span style="color:navy">jnz     short </span><span style="color:gray">fus20
</span><span style="color:black">RESGROUP:026D                 </span><span style="color:navy">call    </span>freeMCB
<span style="color:black">RESGROUP:0270
RESGROUP:0270 </span><span style="color:gray">fus20</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0270                 </span><span style="color:navy">mov     al, [es:</span><span style="color:green">0</span><span style="color:navy">]      </span>; [es:arena_signature]
<span style="color:black">RESGROUP:0274                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">5Ah </span><span style="color:gray">; &#039;Z&#039;
</span><span style="color:black">RESGROUP:0276                 </span><span style="color:navy">jz      short </span><span style="color:gray">fusX
</span><span style="color:black">RESGROUP:0278                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">RESGROUP:027A                 </span><span style="color:navy">add     ax, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:arena_size]
<span style="color:black">RESGROUP:027F                 </span><span style="color:navy">inc     ax
</span><span style="color:black">RESGROUP:0280                 </span><span style="color:navy">jmp     short </span><span style="color:gray">fus10
</span><span style="color:black">RESGROUP:0282 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:0282
RESGROUP:0282 </span><span style="color:gray">fusX</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0282                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:0283                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:0284                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:0284 </span>endp            FreeUMBs
<span style="color:black">RESGROUP:0284
RESGROUP:0285
RESGROUP:0285 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:0285
RESGROUP:0285
RESGROUP:0285 </span>proc            isHideMCB near          <span style="color:green">; ...
</span><span style="color:black">RESGROUP:0285                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:0286                 </span><span style="color:navy">cmp     [word ptr es:</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">8 </span>; [es:arena_owner],SystemPSPOwner
<span style="color:black">RESGROUP:028C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ihm_x
</span><span style="color:black">RESGROUP:028E                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">8</span><span style="color:navy">]
</span><span style="color:black">RESGROUP:0292                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">4948h       </span>; &#039;HI&#039;
<span style="color:black">RESGROUP:0295                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ihm_x
</span><span style="color:black">RESGROUP:0297                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">0Ah</span><span style="color:navy">]
</span><span style="color:black">RESGROUP:029B                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">4444h       </span>; &#039;DD&#039;
<span style="color:black">RESGROUP:029E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ihm_x
</span><span style="color:black">RESGROUP:02A0                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">0Ch</span><span style="color:navy">]
</span><span style="color:black">RESGROUP:02A4                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">4E45h       </span>; &#039;EN&#039;
<span style="color:black">RESGROUP:02A7                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ihm_x
</span><span style="color:black">RESGROUP:02A9                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">0Eh</span><span style="color:navy">]
</span><span style="color:black">RESGROUP:02AD                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">2020h       </span>; &#039;  &#039;
<span style="color:black">RESGROUP:02B0
RESGROUP:02B0 </span><span style="color:gray">ihm_x</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:02B0                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:02B1                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:02B1 </span>endp            isHideMCB
<span style="color:black">RESGROUP:02B1
RESGROUP:02B2
RESGROUP:02B2 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:02B2
RESGROUP:02B2
RESGROUP:02B2 </span>proc            freeMCB near            <span style="color:green">; ...
</span><span style="color:black">RESGROUP:02B2                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [es:arena_owner]
<span style="color:black">RESGROUP:02B9                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2020h
</span><span style="color:black">RESGROUP:02BC                 </span><span style="color:navy">mov     [es:</span><span style="color:green">8</span><span style="color:navy">], ax      </span>; [es:arena_name+0]
<span style="color:black">RESGROUP:02C0                 </span><span style="color:navy">mov     [es:</span><span style="color:green">0Ah</span><span style="color:navy">], ax
</span><span style="color:black">RESGROUP:02C4                 </span><span style="color:navy">mov     [es:</span><span style="color:green">0Ch</span><span style="color:navy">], ax
</span><span style="color:black">RESGROUP:02C8                 </span><span style="color:navy">mov     [es:</span><span style="color:green">0Eh</span><span style="color:navy">], ax    </span>; [es:arena_name+6]
<span style="color:black">RESGROUP:02CC                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:02CC </span>endp            freeMCB
<span style="color:black">RESGROUP:02CC
RESGROUP:02CD
RESGROUP:02CD </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:02CD
RESGROUP:02CD
RESGROUP:02CD </span>proc            HeadUmb near            <span style="color:green">; ...
</span><span style="color:black">RESGROUP:02CD                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:02CE                 </span><span style="color:navy">mov     ah, </span><span style="color:green">52h
</span><span style="color:black">RESGROUP:02D0                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ internal - GET LIST OF LISTS
<span style="color:black">RESGROUP:02D0                                         </span>; Return: ES:BX -&gt; DOS list of lists
<span style="color:black">RESGROUP:02D2                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">8Ch</span><span style="color:navy">]    </span>; [es:UMB_HeadIdx]
<span style="color:black">RESGROUP:02D6                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:black">RESGROUP:02D9                 </span><span style="color:navy">jz      short </span><span style="color:gray">xhu_e
</span><span style="color:black">RESGROUP:02DB                 </span><span style="color:navy">clc
</span><span style="color:black">RESGROUP:02DC                 </span><span style="color:navy">jmp     short </span><span style="color:gray">xhu_x
</span><span style="color:black">RESGROUP:02DE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:02DE
RESGROUP:02DE </span><span style="color:gray">xhu_e</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:02DE                 </span><span style="color:navy">stc
</span><span style="color:black">RESGROUP:02DF
RESGROUP:02DF </span><span style="color:gray">xhu_x</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:02DF                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:02E0                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:02E0 </span>endp            HeadUmb
<span style="color:black">RESGROUP:02E0
RESGROUP:02E1
RESGROUP:02E1 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:02E1
RESGROUP:02E1
RESGROUP:02E1 </span>proc            linkumb near            <span style="color:green">; ...
</span><span style="color:black">RESGROUP:02E1                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5802h
</span><span style="color:black">RESGROUP:02E4                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">RESGROUP:02E4                                         </span>; AL = function code: (DOS 5beta) get UMB link state
<span style="color:black">RESGROUP:02E6                 </span><span style="color:navy">or      al, al
</span><span style="color:black">RESGROUP:02E8                 </span><span style="color:navy">jnz     short </span><span style="color:gray">lumbX
</span><span style="color:black">RESGROUP:02EA                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">5803h
</span><span style="color:black">RESGROUP:02ED                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">1
</span><span style="color:black">RESGROUP:02F0                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">RESGROUP:02F0                                         </span>; AL = function code: (DOS 5beta) set UMB link state
<span style="color:black">RESGROUP:02F2
RESGROUP:02F2 </span><span style="color:gray">lumbX</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:02F2                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:02F2 </span>endp            linkumb
<span style="color:black">RESGROUP:02F2
</span><span style="color:maroon">RESGROUP:02F3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:02F3
RESGROUP:02F3 </span>Issue_Exec_Call<span style="color:navy">:                        </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">RESGROUP:02F3                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS -
<span style="color:maroon">RESGROUP:02F5                 </span><span style="color:navy">cli
</span><span style="color:maroon">RESGROUP:02F6                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:02F7                 </span><span style="color:navy">pop     ss
</span><span style="color:maroon">RESGROUP:02F8                 </span>assume ss:RESGROUP
<span style="color:maroon">RESGROUP:02F8                 </span><span style="color:navy">mov     sp, offset </span>RStack ; RStack
<span style="color:maroon">RESGROUP:02FB                 </span><span style="color:navy">sti
</span><span style="color:maroon">RESGROUP:02FC                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:02FD                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:02FE                 </span><span style="color:navy">pushf
</span><span style="color:maroon">RESGROUP:02FF                 </span><span style="color:navy">call    </span>UnHideUMBs
<span style="color:maroon">RESGROUP:0302                 </span><span style="color:navy">popf
</span><span style="color:maroon">RESGROUP:0303                 </span><span style="color:navy">jmp     </span>Exec_Trap
<span style="color:maroon">RESGROUP:0303 </span><span style="color:gray">; ---------------------------------------------------------------------------
RESGROUP:0306 </span>cox_location    <span style="color:navy">db &#039;cox&#039;                </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0309 </span>cox_Y_option    <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:030B </span>BlkDevErrSubst  <span style="color:navy">db </span><span style="color:#008040">2                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:030C </span>BlkDevErrRw     <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:030E </span>BadFatSubst     <span style="color:navy">db </span><span style="color:#008040">1                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:030F                 </span><span style="color:navy">dw offset </span>DrvLet
<span style="color:gray">RESGROUP:0311 </span>DrvLet          <span style="color:navy">db &#039;</span><span style="color:green">A&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0312 </span>CharDevErrSubst <span style="color:navy">db </span><span style="color:#008040">2                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0313 </span>CharDevErrRw    <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0315                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">RESGROUP:0316                 </span><span style="color:navy">dw offset </span>DevName
<span style="color:gray">RESGROUP:0318 </span>NeedVolSubst    <span style="color:navy">db </span><span style="color:#008040">2                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0319                 </span><span style="color:navy">dw offset </span>VolName
<span style="color:gray">RESGROUP:031B                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">RESGROUP:031C                 </span><span style="color:navy">dw offset </span>VolSer<span style="color:navy">+</span><span style="color:green">2
</span><span style="color:gray">RESGROUP:031E                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">RESGROUP:031F                 </span><span style="color:navy">dw offset </span>VolSer
<span style="color:gray">RESGROUP:0321 </span>VolName         <span style="color:navy">db </span><span style="color:#008040">3 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0324 </span>DevName         <span style="color:navy">db </span><span style="color:#008040">8 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:032C                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:032D </span>VolSer          <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0331 </span>CDevAt          <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0332 </span>PutBackSubst    <span style="color:navy">db </span><span style="color:#008040">2                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0333 </span>PutBackComSpec  <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0335                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:0336                 </span><span style="color:navy">dw offset </span>PutBackDrv
<span style="color:gray">RESGROUP:0338 </span>PutBackDrv      <span style="color:navy">db </span><span style="color:#008040">20h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0339 </span>ExecErrSubst    <span style="color:navy">db </span><span style="color:#008040">2                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:033A                 </span><span style="color:navy">dw offset </span>MsgBuffer     ; SafePathBuffer
<span style="color:gray">RESGROUP:033C </span>NeedVol         <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0340 </span>ErrType         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0341 </span>Int_2e_Ret      <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0345 </span>Save_Pdb        <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0347 </span>Parent          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0349 </span>OldTerm         <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:034D </span>ErrCd_24        <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:034F </span>Handle01        <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0351 </span>Loading         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0352 </span>Batch           <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0354 </span>ComSpec         <span style="color:navy">db </span><span style="color:#008040">64 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0394 </span>ComSpec_End     <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0396 </span>Trans           <span style="color:navy">dw offset </span>COMMAND       <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0398 </span>TrnSeg          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:039A </span>TrnMvFlg        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:039B </span>In_Batch        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:039C </span>Batch_Abort     <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:039D </span>ComDrv          <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:039E </span>MemSiz          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03A0 </span>Sum             <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03A2 </span>ExtCom          <span style="color:navy">db </span><span style="color:#008040">1                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03A3 </span>RetCode         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03A5 </span>Crit_Err_Info   <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03A6 </span>EchoFlag        <span style="color:navy">db </span><span style="color:#008040">1                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03A7 </span>Suppress        <span style="color:navy">db </span><span style="color:#008040">1                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03A8 </span>Io_Save         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03AA </span>RestDir         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03AB </span>PermCom         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03AC </span>SemiPermCom     <span style="color:navy">dw </span><span style="color:#008040">0FFFFh               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03AE </span>SingleCom       <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03B0 </span>VerVal          <span style="color:navy">dw </span><span style="color:#008040">0FFFFh               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03B2 </span>fFail           <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03B3 </span>IfFlag          <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03B4 </span>ForFlag         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03B5 </span>ForPtr          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03B7 </span>Nest            <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03B9 </span>Call_Flag       <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03BA </span>Call_Batch_Flag <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03BB </span>Next_Batch      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03BD </span>NullFlag        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03BE </span>FUCase_Addr     <span style="color:navy">db </span><span style="color:#008040">5 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03C3 </span>Dbcs_Vector_Addr <span style="color:navy">dd </span><span style="color:#008040">0                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03C7 </span>Append_State    <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03C9 </span>Append_Flag     <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03CA </span>Re_Out_App      <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:03CB </span>Re_OutStr       <span style="color:navy">db </span><span style="color:#008040">80 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:041B </span>InitFlag        <span style="color:navy">db </span><span style="color:#008040">1                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:041C </span>PipeFlag        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:041D </span>PipeFiles       <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">RESGROUP:041E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:041E
RESGROUP:041E </span>EndInit<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:041E                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:041F                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:0420                 </span><span style="color:navy">mov     dx, [</span>TrnSize<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:0424                 </span><span style="color:navy">mov     ax, [</span>OldEnv<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:0427                 </span><span style="color:navy">mov     bx, [</span>EnvSiz<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:042B                 </span><span style="color:navy">mov     cx, [</span>UsedEnv<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:042F                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">RESGROUP:0430                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">RESGROUP:0431                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">RESGROUP:0432                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:0433                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:0434                 </span>assume es:RESGROUP
<span style="color:maroon">RESGROUP:0434                 </span><span style="color:navy">mov     bx, [</span>ResSize<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:0438                 </span><span style="color:navy">mov     ah, </span><span style="color:green">4Ah         </span>; SETBLOCK
<span style="color:maroon">RESGROUP:043A                 </span><span style="color:navy">cmp     [</span>COMMAND_HIGH<span style="color:navy">], </span><span style="color:#ff8000">2
</span><span style="color:maroon">RESGROUP:043F                 </span><span style="color:navy">jnz     short </span>set_block
<span style="color:maroon">RESGROUP:0441                 </span><span style="color:navy">xor     bx, bx          </span>; low memory first
<span style="color:maroon">RESGROUP:0443                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5801h       </span>; set allocation strategy
<span style="color:maroon">RESGROUP:0446                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:maroon">RESGROUP:0446                                         </span>; AL = function code: set allocation strategy
<span style="color:maroon">RESGROUP:0448                 </span><span style="color:navy">mov     cx, </span>ds:7Eh      <span style="color:olive">; ...
</span><span style="color:maroon">RESGROUP:0448                                         </span>; environment segment
<span style="color:maroon">RESGROUP:044C                 </span><span style="color:navy">jcxz    short </span>skip_dealloc_env_seg
<span style="color:maroon">RESGROUP:044E                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:044F                 </span><span style="color:navy">mov     es, cx
</span><span style="color:maroon">RESGROUP:0451                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:0451                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h
</span><span style="color:maroon">RESGROUP:0453                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FREE MEMORY
<span style="color:maroon">RESGROUP:0453                                         </span>; ES = segment address of area to be freed
<span style="color:maroon">RESGROUP:0455                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:0456
RESGROUP:0456 </span>skip_dealloc_env_seg<span style="color:navy">:                   </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0456                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h         </span>; DEALLOC
<span style="color:maroon">RESGROUP:0458
RESGROUP:0458 </span>set_block<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0458                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FREE MEMORY
<span style="color:maroon">RESGROUP:0458                                         </span>; ES = segment address of area to be freed
<span style="color:maroon">RESGROUP:045A                 </span><span style="color:navy">cmp     [</span>PermCom<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:045F                 </span><span style="color:navy">jnz     short </span>adjust_env
<span style="color:maroon">RESGROUP:0461                 </span><span style="color:navy">cmp     [</span>Batch<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:0466                 </span><span style="color:navy">jz      short </span>adjust_env
<span style="color:maroon">RESGROUP:0468                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">4           </span>; ((BATCHSEGMENT.SIZE)+16+0Fh)/16 ; (33+16+15)/16
<span style="color:maroon">RESGROUP:046B                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h
</span><span style="color:maroon">RESGROUP:046D                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ALLOCATE MEMORY
<span style="color:maroon">RESGROUP:046D                                         </span>; BX = number of 16-byte paragraphs desired
<span style="color:maroon">RESGROUP:046F                 </span><span style="color:navy">jb      short </span>adjust_env
<span style="color:maroon">RESGROUP:0471                 </span><span style="color:navy">mov     es, ax
</span><span style="color:maroon">RESGROUP:0473                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:0473                 </span><span style="color:navy">xor     di, di
</span><span style="color:maroon">RESGROUP:0475                 </span><span style="color:navy">xor     si, si
</span><span style="color:maroon">RESGROUP:0477                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:0478                 </span><span style="color:navy">mov     ds, [</span>Batch<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:047C                 </span><span style="color:navy">mov     cx, </span><span style="color:green">33          </span>; BATCHSEGMENT.SIZE
<span style="color:maroon">RESGROUP:047F                 </span><span style="color:navy">add     cx, </span><span style="color:green">16          </span>; BATCHSEGMENT.SIZE+16
<span style="color:maroon">RESGROUP:0482                 </span><span style="color:navy">cld
</span><span style="color:maroon">RESGROUP:0483                 </span><span style="color:navy">rep movsb               </span><span style="color:olive">; ...
</span><span style="color:maroon">RESGROUP:0485                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:0486                 </span><span style="color:navy">mov     cx, es
</span><span style="color:maroon">RESGROUP:0488                 </span><span style="color:navy">mov     es, [</span>Batch<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:048C                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:048C                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h
</span><span style="color:maroon">RESGROUP:048E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FREE MEMORY
<span style="color:maroon">RESGROUP:048E                                         </span>; ES = segment address of area to be freed
<span style="color:maroon">RESGROUP:0490                 </span><span style="color:navy">mov     [cs:</span>Batch<span style="color:navy">], cx  </span>; (CS: prefix is not needed!?)
<span style="color:maroon">RESGROUP:0495
RESGROUP:0495 </span>adjust_env<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0495                 </span><span style="color:navy">mov     bx, </span><span style="color:green">80h         </span>; first fit, try high then low memory
<span style="color:maroon">RESGROUP:0498                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5801h
</span><span style="color:maroon">RESGROUP:049B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:maroon">RESGROUP:049B                                         </span>; AL = function code: set allocation strategy
<span style="color:maroon">RESGROUP:049D                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">RESGROUP:049E                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">RESGROUP:049F                 </span><span style="color:navy">pop     bp
</span><span style="color:maroon">RESGROUP:04A0                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h
</span><span style="color:maroon">RESGROUP:04A2                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ALLOCATE MEMORY
<span style="color:maroon">RESGROUP:04A2                                         </span>; BX = number of 16-byte paragraphs desired
<span style="color:maroon">RESGROUP:04A4                 </span><span style="color:navy">jb      short </span>nomem_err
<span style="color:maroon">RESGROUP:04A6                 </span><span style="color:navy">mov     [cs:</span>EnvirSeg<span style="color:navy">], ax </span>; (CS: prefix is not needed!?)
<span style="color:maroon">RESGROUP:04AA                 </span><span style="color:navy">mov     [cs:</span><span style="color:green">2Ch</span><span style="color:navy">], ax    </span>; [cs:PDB.ENVIRON]
<span style="color:maroon">RESGROUP:04AE                 </span><span style="color:navy">mov     es, ax
</span><span style="color:maroon">RESGROUP:04B0                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:04B0                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:04B1                 </span><span style="color:navy">mov     ds, bp
</span><span style="color:maroon">RESGROUP:04B3                 </span><span style="color:navy">xor     si, si
</span><span style="color:maroon">RESGROUP:04B5                 </span><span style="color:navy">mov     di, si
</span><span style="color:maroon">RESGROUP:04B7                 </span><span style="color:navy">cld
</span><span style="color:maroon">RESGROUP:04B8                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">RESGROUP:04BA                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:04BB                 </span><span style="color:navy">cmp     [</span>AllocedEnv<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:04C0                 </span><span style="color:navy">jz      short </span>no_free
<span style="color:maroon">RESGROUP:04C2                 </span><span style="color:navy">mov     es, bp
</span><span style="color:maroon">RESGROUP:04C4                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:04C4                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h
</span><span style="color:maroon">RESGROUP:04C6                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FREE MEMORY
<span style="color:maroon">RESGROUP:04C6                                         </span>; ES = segment address of area to be freed
<span style="color:maroon">RESGROUP:04C8
RESGROUP:04C8 </span>no_free<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:04C8                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:maroon">RESGROUP:04CA                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5801h
</span><span style="color:maroon">RESGROUP:04CD                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:maroon">RESGROUP:04CD                                         </span>; AL = function code: set allocation strategy
<span style="color:maroon">RESGROUP:04CF                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:maroon">RESGROUP:04D1                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5803h
</span><span style="color:maroon">RESGROUP:04D4                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:maroon">RESGROUP:04D4                                         </span>; AL = function code: (DOS 5beta) set UMB link state
<span style="color:maroon">RESGROUP:04D6                 </span><span style="color:navy">mov     [cs:</span>TrnMvFlg<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; (CS: prefix is not needed!?)
<span style="color:maroon">RESGROUP:04D6                                         </span>; Indicate that transient has been moved
<span style="color:maroon">RESGROUP:04DC                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:04DD                 </span><span style="color:navy">mov     si, </span><span style="color:#ff8000">2890h       </span>; TRANSTART
<span style="color:maroon">RESGROUP:04E0                 </span><span style="color:navy">xor     di, di
</span><span style="color:maroon">RESGROUP:04E2                 </span><span style="color:navy">mov     cx, </span><span style="color:green">0AA9Ah      </span>; TRANSPACEEND ; TRANSIENT portion size
<span style="color:maroon">RESGROUP:04E5                 </span><span style="color:navy">mov     bx, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">RESGROUP:04E8                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h
</span><span style="color:maroon">RESGROUP:04EA                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ALLOCATE MEMORY
<span style="color:maroon">RESGROUP:04EA                                         </span>; BX = number of 16-byte paragraphs desired
<span style="color:maroon">RESGROUP:04EC                 </span><span style="color:navy">cmp     bx, dx
</span><span style="color:maroon">RESGROUP:04EE                 </span><span style="color:navy">jb      short </span>nomem_err
<span style="color:maroon">RESGROUP:04F0                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h         </span>; ALLOC
<span style="color:maroon">RESGROUP:04F2                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ALLOCATE MEMORY
<span style="color:maroon">RESGROUP:04F2                                         </span>; BX = number of 16-byte paragraphs desired
<span style="color:maroon">RESGROUP:04F4                 </span><span style="color:navy">jb      short </span>nomem_err
<span style="color:maroon">RESGROUP:04F6                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">RESGROUP:04F7                 </span><span style="color:navy">add     ax, bx
</span><span style="color:maroon">RESGROUP:04F9                 </span><span style="color:navy">sub     ax, dx
</span><span style="color:maroon">RESGROUP:04FB                 </span><span style="color:navy">mov     [cs:</span>TrnSeg<span style="color:navy">], ax </span>; (CS: prefix is not needed!?)
<span style="color:maroon">RESGROUP:04FF                 </span><span style="color:navy">mov     es, ax
</span><span style="color:maroon">RESGROUP:0501                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">RESGROUP:0502                 </span><span style="color:navy">add     si, cx
</span><span style="color:maroon">RESGROUP:0504                 </span><span style="color:navy">dec     si
</span><span style="color:maroon">RESGROUP:0505                 </span><span style="color:navy">add     di, cx
</span><span style="color:maroon">RESGROUP:0507                 </span><span style="color:navy">dec     di
</span><span style="color:maroon">RESGROUP:0508                 </span><span style="color:navy">std
</span><span style="color:maroon">RESGROUP:0509                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">RESGROUP:050B                 </span><span style="color:navy">cld
</span><span style="color:maroon">RESGROUP:050C                 </span><span style="color:navy">mov     es, ax
</span><span style="color:maroon">RESGROUP:050E                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h         </span>; DEALLOC
<span style="color:maroon">RESGROUP:0510                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FREE MEMORY
<span style="color:maroon">RESGROUP:0510                                         </span>; ES = segment address of area to be freed
<span style="color:maroon">RESGROUP:0512                 </span><span style="color:navy">mov     [cs:</span>InitFlag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; (CS: prefix is not needed!?)
<span style="color:maroon">RESGROUP:0518                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:0519                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:051A                 </span><span style="color:navy">jmp     </span>LodCom_Trap
<span style="color:maroon">RESGROUP:051D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:051D
RESGROUP:051D </span>nomem_err<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:051D                 </span><span style="color:navy">jmp     </span>Alloc_error
<span style="color:maroon">RESGROUP:051D </span><span style="color:gray">; ---------------------------------------------------------------------------
RESGROUP:0520 </span>COMMAND_HIGH    <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0521 </span>EndCodeInit     <span style="color:navy">db </span><span style="color:#008040">30 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0
RESGROUP:053F </span>InPipePtr       <span style="color:navy">dw offset </span>EndInit       <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:053F                                         </span>; dw Pipe1 ; Pipe1 equ offset EndInit
<span style="color:gray">RESGROUP:0541 </span>OutPipePtr      <span style="color:navy">dw </span><span style="color:#008040">46Dh                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0541                                         </span>; dw Pipe2 ; Pipe1 + 79
<span style="color:gray">RESGROUP:0543 </span>EnvirSeg        <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0545 </span>Com_Ptr         <span style="color:navy">dw </span><span style="color:#008040">80h</span><span style="color:navy">, </span><span style="color:#008040">0               </span><span style="color:gray">; 0 </span><span style="color:olive">; ...
</span><span style="color:gray">RESGROUP:0549 </span>Com_Fcb1        <span style="color:navy">dw </span><span style="color:#008040">5Ch</span><span style="color:navy">, </span><span style="color:#008040">0               </span><span style="color:gray">; 0 </span><span style="color:olive">; ...
</span><span style="color:gray">RESGROUP:054D </span>Com_Fcb2        <span style="color:navy">dw </span><span style="color:#008040">6Ch</span><span style="color:navy">, </span><span style="color:#008040">0               </span><span style="color:gray">; 0 </span><span style="color:olive">; ...
</span><span style="color:gray">RESGROUP:0551 </span>TranVars        <span style="color:navy">dw offset </span>HeadFix_Trap  <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0553 </span>MySeg           <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0555 </span>Ltpa            <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0557 </span>RSwitChar       <span style="color:navy">db &#039;</span><span style="color:green">/&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0558 </span>RDirChar        <span style="color:navy">db &#039;</span><span style="color:green">\&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0559                 </span><span style="color:navy">dw offset </span>Issue_Exec_Call
<span style="color:gray">RESGROUP:055B </span>MySeg1          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:055D                 </span><span style="color:navy">dw offset </span>RemCheck_Trap
<span style="color:gray">RESGROUP:055F </span>MySeg2          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0561 </span>Res_Tpa         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0563 </span>Y_Flag          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0565 </span>OldErrNo        <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0565                                         </span>; TranVarEnd
<span style="color:gray">RESGROUP:0567 </span>MsgBuffer       <span style="color:navy">db </span><span style="color:#008040">16 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0567                                         </span>; db 64+3+13 dup (0)
<span style="color:gray">RESGROUP:0567                                         </span>; path + &#039;d:\&#039; &#039;file.ext&#039; + null
<span style="color:gray">RESGROUP:0577 </span>UmbSize         <span style="color:navy">dw </span><span style="color:#008040">32 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:05B7 </span>Int2fHandler    <span style="color:navy">dw </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:05BB </span>ResMsgEnd       <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:05BD </span>ResSize         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:05BF                 </span><span style="color:navy">db </span><span style="color:#008040">120 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)           </span><span style="color:gray">; 0
RESGROUP:0637 </span>RStack          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0639 </span>fInHigh         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:063A </span>fUmbTiny        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:063B </span>SegLoad         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:063D </span>UmbLoad         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:063E </span>fm_umb          <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:063F </span>fm_strat        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0640 </span>fm_argc         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0641 </span>ABORT_CHAR      <span style="color:navy">db &#039;</span><span style="color:green">A&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0642 </span>RETRY_CHAR      <span style="color:navy">db &#039;</span><span style="color:green">R&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0643 </span>IGNORE_CHAR     <span style="color:navy">db &#039;</span><span style="color:green">I&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0644 </span>FAIL_CHAR       <span style="color:navy">db &#039;</span><span style="color:green">F&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0645 </span>YES_CHAR        <span style="color:navy">db &#039;</span><span style="color:green">Y&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0646 </span>NO_CHAR         <span style="color:navy">db &#039;</span><span style="color:green">N&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0647 </span>REQ_ABORT       <span style="color:navy">db </span><span style="color:#008040">5                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0648                 </span><span style="color:navy">db &#039;Abort&#039;
</span><span style="color:gray">RESGROUP:064D </span>REQ_RETRY       <span style="color:navy">db </span><span style="color:#008040">7                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:064E                 </span><span style="color:navy">db &#039;, Retry&#039;
</span><span style="color:gray">RESGROUP:0655 </span>REQ_IGNORE      <span style="color:navy">db </span><span style="color:#008040">8                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0656                 </span><span style="color:navy">db &#039;, Ignore&#039;
</span><span style="color:gray">RESGROUP:065E </span>REQ_FAIL        <span style="color:navy">db </span><span style="color:#008040">6                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:065F                 </span><span style="color:navy">db &#039;, Fail&#039;
</span><span style="color:gray">RESGROUP:0665 </span>REQ_END         <span style="color:navy">db </span><span style="color:#008040">1                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0666                 </span><span style="color:navy">db &#039;</span><span style="color:green">?&#039;
</span><span style="color:gray">RESGROUP:0667 </span>MREAD           <span style="color:navy">db </span><span style="color:#008040">8                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0668                 </span><span style="color:navy">db &#039;reading&#039;,0
</span><span style="color:gray">RESGROUP:0670 </span>MWRITE          <span style="color:navy">db </span><span style="color:#008040">8                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0671                 </span><span style="color:navy">db &#039;writing&#039;,0
</span><span style="color:gray">RESGROUP:0679 </span>MDRIVE          <span style="color:navy">db </span><span style="color:#008040">14                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:067A                 </span><span style="color:navy">db &#039; %1 drive %2&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:0688 </span>MDEVICE         <span style="color:navy">db </span><span style="color:#008040">15                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0689                 </span><span style="color:navy">db &#039; %1 device %2&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:0698 </span>MVOLSERIAL      <span style="color:navy">db </span><span style="color:#008040">38                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0699                 </span><span style="color:navy">db &#039;Please insert volume %1 serial %2-%3&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:06BF </span>BADFATMSG       <span style="color:navy">db </span><span style="color:#008040">37                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:06C0                 </span><span style="color:navy">db &#039;File allocation table bad, drive %1&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:06E5 </span>COMBAD          <span style="color:navy">db </span><span style="color:#008040">21                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:06E6                 </span><span style="color:navy">db &#039;Invalid COMMAND.COM&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:06FB </span>PUTBACKMSG      <span style="color:navy">db </span><span style="color:#008040">33                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:06FC                 </span><span style="color:navy">db &#039;Insert disk with %1 in drive %2&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:071D </span>PROMPT          <span style="color:navy">db </span><span style="color:#008040">33                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:071E                 </span><span style="color:navy">db &#039;Press any key to continue . . .&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:073F </span>ENDBATMES       <span style="color:navy">db </span><span style="color:#008040">28                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0740                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">RESGROUP:0740                 </span><span style="color:navy">db &#039;Terminate batch job (Y/N)?&#039;
</span><span style="color:gray">RESGROUP:075C </span>EXECEMES        <span style="color:navy">db </span><span style="color:#008040">19                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:075D                 </span><span style="color:navy">db &#039;Cannot execute %1&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:0770 </span>EXEBAD          <span style="color:navy">db </span><span style="color:#008040">19                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0771                 </span><span style="color:navy">db &#039;Error in EXE file&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:0784 </span>TOOBIG          <span style="color:navy">db </span><span style="color:#008040">34                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0785                 </span><span style="color:navy">db &#039;Program too big to fit in memory&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:07A7 </span>NOHANDMES       <span style="color:navy">db </span><span style="color:#008040">22                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:07A8                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">RESGROUP:07A8                 </span><span style="color:navy">db &#039;No free file handles&#039;
</span><span style="color:gray">RESGROUP:07BE </span>ACCDEN          <span style="color:navy">db </span><span style="color:#008040">0Dh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:07BF                 </span><span style="color:navy">db &#039;Access denied&#039;
</span><span style="color:gray">RESGROUP:07CC </span>BMEMMES         <span style="color:navy">db </span><span style="color:#008040">19h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:07CD                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">RESGROUP:07CD                 </span><span style="color:navy">db &#039;Memory allocation error&#039;
</span><span style="color:gray">RESGROUP:07E6 </span>HALTMES         <span style="color:navy">db </span><span style="color:#008040">26h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:07E7                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">RESGROUP:07E7                 </span><span style="color:navy">db &#039;Cannot load COMMAND, system halted&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:080D </span>FRETMES         <span style="color:navy">db </span><span style="color:#008040">21h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:080E                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">RESGROUP:080E                 </span><span style="color:navy">db &#039;Cannot start COMMAND, exiting&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:082F </span>NEWLINE         <span style="color:navy">db </span><span style="color:#008040">2                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0830                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">RESGROUP:0832 </span>MsgPtrLists     <span style="color:navy">dd </span><span style="color:#008040">10D24h               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0836                 </span><span style="color:navy">dw offset </span>PARSMSGPTRS
<span style="color:gray">RESGROUP:0838                 </span><span style="color:navy">dw </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:083A                 </span><span style="color:navy">dw offset </span>EXTMSGPTRS
<span style="color:gray">RESGROUP:083C                 </span><span style="color:navy">dw </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:083E                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:0840                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:0842                 </span><span style="color:navy">dw offset </span>MsgRetrv_Trap
<span style="color:gray">RESGROUP:0844 </span>MySeg3          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0846 </span>CRMSG0          <span style="color:navy">db </span><span style="color:#008040">19                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0847                 </span><span style="color:navy">db &#039;Write protect error&#039;
</span><span style="color:gray">RESGROUP:085A </span>CRMSG1          <span style="color:navy">db </span><span style="color:#008040">12                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:085B                 </span><span style="color:navy">db &#039;Invalid unit&#039;
</span><span style="color:gray">RESGROUP:0867 </span>CRMSG2          <span style="color:navy">db </span><span style="color:#008040">9                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0868                 </span><span style="color:navy">db &#039;Not ready&#039;
</span><span style="color:gray">RESGROUP:0871 </span>CRMSG3          <span style="color:navy">db </span><span style="color:#008040">22                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0872                 </span><span style="color:navy">db &#039;Invalid device request&#039;
</span><span style="color:gray">RESGROUP:0888 </span>CRMSG4          <span style="color:navy">db </span><span style="color:#008040">10                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0889                 </span><span style="color:navy">db &#039;Data error&#039;
</span><span style="color:gray">RESGROUP:0893 </span>CRMSG5          <span style="color:navy">db </span><span style="color:#008040">33                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0894                 </span><span style="color:navy">db &#039;Invalid device request parameters&#039;
</span><span style="color:gray">RESGROUP:08B5 </span>CRMSG6          <span style="color:navy">db </span><span style="color:#008040">10                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:08B6                 </span><span style="color:navy">db &#039;Seek error&#039;
</span><span style="color:gray">RESGROUP:08C0 </span>CRMSG7          <span style="color:navy">db </span><span style="color:#008040">18                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:08C1                 </span><span style="color:navy">db &#039;Invalid media type&#039;
</span><span style="color:gray">RESGROUP:08D3 </span>CRMSG8          <span style="color:navy">db </span><span style="color:#008040">16                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:08D4                 </span><span style="color:navy">db &#039;Sector not found&#039;
</span><span style="color:gray">RESGROUP:08E4 </span>CRMSG9          <span style="color:navy">db </span><span style="color:#008040">26                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:08E5                 </span><span style="color:navy">db &#039;Printer out of paper error&#039;
</span><span style="color:gray">RESGROUP:08FF </span>CRMSG10         <span style="color:navy">db </span><span style="color:#008040">17                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0900                 </span><span style="color:navy">db &#039;Write fault error&#039;
</span><span style="color:gray">RESGROUP:0911 </span>CRMSG11         <span style="color:navy">db </span><span style="color:#008040">16                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0912                 </span><span style="color:navy">db &#039;Read fault error&#039;
</span><span style="color:gray">RESGROUP:0922 </span>CRMSG12         <span style="color:navy">db </span><span style="color:#008040">15                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0923                 </span><span style="color:navy">db &#039;General failure&#039;
</span><span style="color:gray">RESGROUP:0932 </span>CRMSG13         <span style="color:navy">db </span><span style="color:#008040">17                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0933                 </span><span style="color:navy">db &#039;Sharing violation&#039;
</span><span style="color:gray">RESGROUP:0944 </span>CRMSG14         <span style="color:navy">db </span><span style="color:#008040">14                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0945                 </span><span style="color:navy">db &#039;Lock violation&#039;
</span><span style="color:gray">RESGROUP:0953 </span>CRMSG15         <span style="color:navy">db </span><span style="color:#008040">19                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0954                 </span><span style="color:navy">db &#039;Invalid disk change&#039;
</span><span style="color:gray">RESGROUP:0967 </span>CRMSG16         <span style="color:navy">db </span><span style="color:#008040">15                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0968                 </span><span style="color:navy">db &#039;FCB unavailable&#039;
</span><span style="color:gray">RESGROUP:0977 </span>CRMSG17         <span style="color:navy">db </span><span style="color:#008040">25                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0978                 </span><span style="color:navy">db &#039;System resource exhausted&#039;
</span><span style="color:gray">RESGROUP:0991 </span>CRMSG18         <span style="color:navy">db </span><span style="color:#008040">18                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0992                 </span><span style="color:navy">db &#039;Code page mismatch&#039;
</span><span style="color:gray">RESGROUP:09A4 </span>CRMSG19         <span style="color:navy">db </span><span style="color:#008040">12                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:09A5                 </span><span style="color:navy">db &#039;Out of input&#039;
</span><span style="color:gray">RESGROUP:09B1 </span>CRMSG20         <span style="color:navy">db </span><span style="color:#008040">23                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:09B2                 </span><span style="color:navy">db &#039;Insufficient disk space&#039;
</span><span style="color:gray">RESGROUP:09C9 </span>CRITMSGPTRS     <span style="color:navy">dw offset </span>CRMSG0        <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:09CB                 </span><span style="color:navy">dw offset </span>CRMSG1
<span style="color:gray">RESGROUP:09CD                 </span><span style="color:navy">dw offset </span>CRMSG2
<span style="color:gray">RESGROUP:09CF                 </span><span style="color:navy">dw offset </span>CRMSG3
<span style="color:gray">RESGROUP:09D1                 </span><span style="color:navy">dw offset </span>CRMSG4
<span style="color:gray">RESGROUP:09D3                 </span><span style="color:navy">dw offset </span>CRMSG5
<span style="color:gray">RESGROUP:09D5                 </span><span style="color:navy">dw offset </span>CRMSG6
<span style="color:gray">RESGROUP:09D7                 </span><span style="color:navy">dw offset </span>CRMSG7
<span style="color:gray">RESGROUP:09D9                 </span><span style="color:navy">dw offset </span>CRMSG8
<span style="color:gray">RESGROUP:09DB                 </span><span style="color:navy">dw offset </span>CRMSG9
<span style="color:gray">RESGROUP:09DD                 </span><span style="color:navy">dw offset </span>CRMSG10
<span style="color:gray">RESGROUP:09DF                 </span><span style="color:navy">dw offset </span>CRMSG11
<span style="color:gray">RESGROUP:09E1                 </span><span style="color:navy">dw offset </span>CRMSG12
<span style="color:gray">RESGROUP:09E3                 </span><span style="color:navy">dw offset </span>CRMSG13
<span style="color:gray">RESGROUP:09E5                 </span><span style="color:navy">dw offset </span>CRMSG14
<span style="color:gray">RESGROUP:09E7                 </span><span style="color:navy">dw offset </span>CRMSG15
<span style="color:gray">RESGROUP:09E9                 </span><span style="color:navy">dw offset </span>CRMSG16
<span style="color:gray">RESGROUP:09EB                 </span><span style="color:navy">dw offset </span>CRMSG17
<span style="color:gray">RESGROUP:09ED                 </span><span style="color:navy">dw offset </span>CRMSG18
<span style="color:gray">RESGROUP:09EF                 </span><span style="color:navy">dw offset </span>CRMSG19
<span style="color:gray">RESGROUP:09F1                 </span><span style="color:navy">dw offset </span>CRMSG20
<span style="color:gray">RESGROUP:09F3 </span>PAERRMSG0       <span style="color:navy">db </span><span style="color:#008040">19                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:09F4                 </span><span style="color:navy">db &#039;Too many parameters&#039;
</span><span style="color:gray">RESGROUP:0A07 </span>PAERRMSG1       <span style="color:navy">db </span><span style="color:#008040">26                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0A08                 </span><span style="color:navy">db &#039;Required parameter missing&#039;
</span><span style="color:gray">RESGROUP:0A22 </span>PAERRMSG2       <span style="color:navy">db </span><span style="color:#008040">14                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0A23                 </span><span style="color:navy">db &#039;Invalid switch&#039;
</span><span style="color:gray">RESGROUP:0A31 </span>PAERRMSG3       <span style="color:navy">db </span><span style="color:#008040">15                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0A32                 </span><span style="color:navy">db &#039;Invalid keyword&#039;
</span><span style="color:gray">RESGROUP:0A41 </span>PAERRMSG4       <span style="color:navy">db </span><span style="color:#008040">1                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0A42                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">RESGROUP:0A43 </span>PAERRMSG5       <span style="color:navy">db </span><span style="color:#008040">36                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0A44                 </span><span style="color:navy">db &#039;Parameter value not in allowed range&#039;
</span><span style="color:gray">RESGROUP:0A68 </span>PAERRMSG6       <span style="color:navy">db </span><span style="color:#008040">27                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0A69                 </span><span style="color:navy">db &#039;Parameter value not allowed&#039;
</span><span style="color:gray">RESGROUP:0A84 </span>PAERRMSG8       <span style="color:navy">db </span><span style="color:#008040">28                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0A85                 </span><span style="color:navy">db &#039;Parameter format not correct&#039;
</span><span style="color:gray">RESGROUP:0AA1 </span>PAERRMSG9       <span style="color:navy">db </span><span style="color:#008040">17                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0AA2                 </span><span style="color:navy">db &#039;Invalid parameter&#039;
</span><span style="color:gray">RESGROUP:0AB3 </span>PAERRMSG10      <span style="color:navy">db </span><span style="color:#008040">1Dh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0AB4                 </span><span style="color:navy">db &#039;Invalid parameter combination&#039;
</span><span style="color:gray">RESGROUP:0AD1 </span>PARSMSGPTRS     <span style="color:navy">dw offset </span>PAERRMSG0     <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0AD3                 </span><span style="color:navy">dw offset </span>PAERRMSG1
<span style="color:gray">RESGROUP:0AD5                 </span><span style="color:navy">dw offset </span>PAERRMSG2
<span style="color:gray">RESGROUP:0AD7                 </span><span style="color:navy">dw offset </span>PAERRMSG3
<span style="color:gray">RESGROUP:0AD9                 </span><span style="color:navy">dw offset </span>PAERRMSG4
<span style="color:gray">RESGROUP:0ADB                 </span><span style="color:navy">dw offset </span>PAERRMSG5
<span style="color:gray">RESGROUP:0ADD                 </span><span style="color:navy">dw offset </span>PAERRMSG6
<span style="color:gray">RESGROUP:0ADF                 </span><span style="color:navy">dw offset </span>PAERRMSG6     ; PAERRMSG7
<span style="color:gray">RESGROUP:0AE1                 </span><span style="color:navy">dw offset </span>PAERRMSG8
<span style="color:gray">RESGROUP:0AE3                 </span><span style="color:navy">dw offset </span>PAERRMSG9
<span style="color:gray">RESGROUP:0AE5                 </span><span style="color:navy">dw offset </span>PAERRMSG10
<span style="color:gray">RESGROUP:0AE7 </span>INVLFUNCT       <span style="color:navy">db </span><span style="color:#008040">10h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0AE8                 </span><span style="color:navy">db &#039;Invalid function&#039;
</span><span style="color:gray">RESGROUP:0AF8 </span>FNOTFOUND       <span style="color:navy">db </span><span style="color:#008040">0Eh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0AF9                 </span><span style="color:navy">db &#039;File not found&#039;
</span><span style="color:gray">RESGROUP:0B07 </span>PNOTFOUND       <span style="color:navy">db </span><span style="color:#008040">0Eh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0B08                 </span><span style="color:navy">db &#039;Path not found&#039;
</span><span style="color:gray">RESGROUP:0B16 </span>TOOMANYOF       <span style="color:navy">db </span><span style="color:#008040">13h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0B17                 </span><span style="color:navy">db &#039;Too many open files&#039;
</span><span style="color:gray">RESGROUP:0B2A </span>ACCDENIED       <span style="color:navy">db </span><span style="color:#008040">0Dh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0B2B                 </span><span style="color:navy">db &#039;Access denied&#039;
</span><span style="color:gray">RESGROUP:0B38 </span>INVHANDLE       <span style="color:navy">db </span><span style="color:#008040">0Eh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0B39                 </span><span style="color:navy">db &#039;Invalid handle&#039;
</span><span style="color:gray">RESGROUP:0B47 </span>MEMCBDEST       <span style="color:navy">db </span><span style="color:#008040">1Fh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0B48                 </span><span style="color:navy">db &#039;Memory control blocks destroyed&#039;
</span><span style="color:gray">RESGROUP:0B67 </span>INSUFFMEM       <span style="color:navy">db </span><span style="color:#008040">13h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0B68                 </span><span style="color:navy">db &#039;Insufficient memory&#039;
</span><span style="color:gray">RESGROUP:0B7B </span>INVMEMBLA       <span style="color:navy">db </span><span style="color:#008040">1Ch                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0B7C                 </span><span style="color:navy">db &#039;Invalid memory block address&#039;
</span><span style="color:gray">RESGROUP:0B98 </span>INVENVIRO       <span style="color:navy">db </span><span style="color:#008040">13h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0B99                 </span><span style="color:navy">db &#039;Invalid Environment&#039;
</span><span style="color:gray">RESGROUP:0BAC </span>INVFORMAT       <span style="color:navy">db </span><span style="color:#008040">0Eh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0BAD                 </span><span style="color:navy">db &#039;Invalid format&#039;
</span><span style="color:gray">RESGROUP:0BBB </span>INVFNPARM       <span style="color:navy">db </span><span style="color:#008040">1Ah                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0BBC                 </span><span style="color:navy">db &#039;Invalid function parameter&#039;
</span><span style="color:gray">RESGROUP:0BD6 </span>INVLDDATA       <span style="color:navy">db </span><span style="color:#008040">0Ch                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0BD7                 </span><span style="color:navy">db &#039;Invalid data&#039;
</span><span style="color:gray">RESGROUP:0BE3 </span>INVDRVSPC       <span style="color:navy">db </span><span style="color:#008040">1Bh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0BE4                 </span><span style="color:navy">db &#039;Invalid drive specification&#039;
</span><span style="color:gray">RESGROUP:0BFF </span>ATRCURDIR       <span style="color:navy">db </span><span style="color:#008040">23h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0C00                 </span><span style="color:navy">db &#039;Attempt to remove current directory&#039;
</span><span style="color:gray">RESGROUP:0C23 </span>NOTSAMDEV       <span style="color:navy">db </span><span style="color:#008040">0Fh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0C24                 </span><span style="color:navy">db &#039;Not same device&#039;
</span><span style="color:gray">RESGROUP:0C33 </span>NOMOREFIL       <span style="color:navy">db </span><span style="color:#008040">0Dh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0C34                 </span><span style="color:navy">db &#039;No more files&#039;
</span><span style="color:gray">RESGROUP:0C41 </span>FILEXISTS       <span style="color:navy">db </span><span style="color:#008040">0Bh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0C42                 </span><span style="color:navy">db &#039;File exists&#039;
</span><span style="color:gray">RESGROUP:0C4D </span>CANTMKDIR       <span style="color:navy">db </span><span style="color:#008040">1Bh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0C4E                 </span><span style="color:navy">db &#039;Cannot make directory entry&#039;
</span><span style="color:gray">RESGROUP:0C69 </span>FAILINT24       <span style="color:navy">db </span><span style="color:#008040">0Eh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0C6A                 </span><span style="color:navy">db &#039;Fail on INT 24&#039;
</span><span style="color:gray">RESGROUP:0C78 </span>TOOMANYRD       <span style="color:navy">db </span><span style="color:#008040">15h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0C79                 </span><span style="color:navy">db &#039;Too many redirections&#039;
</span><span style="color:gray">RESGROUP:0C8E </span>DUPLREDIR       <span style="color:navy">db </span><span style="color:#008040">15h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0C8F                 </span><span style="color:navy">db &#039;Duplicate redirection&#039;
</span><span style="color:gray">RESGROUP:0CA4 </span>INVPASSWD       <span style="color:navy">db </span><span style="color:#008040">10h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0CA5                 </span><span style="color:navy">db &#039;Invalid password&#039;
</span><span style="color:gray">RESGROUP:0CB5 </span>INVLDPARM       <span style="color:navy">db </span><span style="color:#008040">11h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0CB6                 </span><span style="color:navy">db &#039;Invalid parameter&#039;
</span><span style="color:gray">RESGROUP:0CC7 </span>NETDATFAU       <span style="color:navy">db </span><span style="color:#008040">12h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0CC8                 </span><span style="color:navy">db &#039;Network data fault&#039;
</span><span style="color:gray">RESGROUP:0CDA </span>FNOSUPNET       <span style="color:navy">db </span><span style="color:#008040">21h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0CDB                 </span><span style="color:navy">db &#039;Function not supported by network&#039;
</span><span style="color:gray">RESGROUP:0CFC </span>RSCNOTINS       <span style="color:navy">db </span><span style="color:#008040">27h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0CFD                 </span><span style="color:navy">db &#039;Required system component not installed&#039;
</span><span style="color:gray">RESGROUP:0D24 </span>EXTMSGPTRS      <span style="color:navy">dw offset </span>INVLFUNCT     <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0D26                 </span><span style="color:navy">dw offset </span>FNOTFOUND
<span style="color:gray">RESGROUP:0D28                 </span><span style="color:navy">dw offset </span>PNOTFOUND
<span style="color:gray">RESGROUP:0D2A                 </span><span style="color:navy">dw offset </span>TOOMANYOF
<span style="color:gray">RESGROUP:0D2C                 </span><span style="color:navy">dw offset </span>ACCDENIED
<span style="color:gray">RESGROUP:0D2E                 </span><span style="color:navy">dw offset </span>INVHANDLE
<span style="color:gray">RESGROUP:0D30                 </span><span style="color:navy">dw offset </span>MEMCBDEST
<span style="color:gray">RESGROUP:0D32                 </span><span style="color:navy">dw offset </span>INSUFFMEM
<span style="color:gray">RESGROUP:0D34                 </span><span style="color:navy">dw offset </span>INVMEMBLA
<span style="color:gray">RESGROUP:0D36                 </span><span style="color:navy">dw offset </span>INVENVIRO
<span style="color:gray">RESGROUP:0D38                 </span><span style="color:navy">dw offset </span>INVFORMAT
<span style="color:gray">RESGROUP:0D3A                 </span><span style="color:navy">dw offset </span>INVFNPARM
<span style="color:gray">RESGROUP:0D3C                 </span><span style="color:navy">dw offset </span>INVLDDATA
<span style="color:gray">RESGROUP:0D3E                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:0D40                 </span><span style="color:navy">dw offset </span>INVDRVSPC
<span style="color:gray">RESGROUP:0D42                 </span><span style="color:navy">dw offset </span>ATRCURDIR
<span style="color:gray">RESGROUP:0D44                 </span><span style="color:navy">dw offset </span>NOTSAMDEV
<span style="color:gray">RESGROUP:0D46                 </span><span style="color:navy">dw offset </span>NOMOREFIL
<span style="color:gray">RESGROUP:0D48                 </span><span style="color:navy">dw offset </span>CRMSG0
<span style="color:gray">RESGROUP:0D4A                 </span><span style="color:navy">dw offset </span>CRMSG1
<span style="color:gray">RESGROUP:0D4C                 </span><span style="color:navy">dw offset </span>CRMSG2
<span style="color:gray">RESGROUP:0D4E                 </span><span style="color:navy">dw offset </span>CRMSG3
<span style="color:gray">RESGROUP:0D50                 </span><span style="color:navy">dw offset </span>CRMSG4
<span style="color:gray">RESGROUP:0D52                 </span><span style="color:navy">dw offset </span>CRMSG5
<span style="color:gray">RESGROUP:0D54                 </span><span style="color:navy">dw offset </span>CRMSG6
<span style="color:gray">RESGROUP:0D56                 </span><span style="color:navy">dw offset </span>CRMSG7
<span style="color:gray">RESGROUP:0D58                 </span><span style="color:navy">dw offset </span>CRMSG8
<span style="color:gray">RESGROUP:0D5A                 </span><span style="color:navy">dw offset </span>CRMSG9
<span style="color:gray">RESGROUP:0D5C                 </span><span style="color:navy">dw offset </span>CRMSG10
<span style="color:gray">RESGROUP:0D5E                 </span><span style="color:navy">dw offset </span>CRMSG11
<span style="color:gray">RESGROUP:0D60                 </span><span style="color:navy">dw offset </span>CRMSG12
<span style="color:gray">RESGROUP:0D62                 </span><span style="color:navy">dw offset </span>CRMSG13
<span style="color:gray">RESGROUP:0D64                 </span><span style="color:navy">dw offset </span>CRMSG14
<span style="color:gray">RESGROUP:0D66                 </span><span style="color:navy">dw offset </span>CRMSG15
<span style="color:gray">RESGROUP:0D68                 </span><span style="color:navy">dw offset </span>CRMSG16
<span style="color:gray">RESGROUP:0D6A                 </span><span style="color:navy">dw offset </span>CRMSG17
<span style="color:gray">RESGROUP:0D6C                 </span><span style="color:navy">dw offset </span>CRMSG18
<span style="color:gray">RESGROUP:0D6E                 </span><span style="color:navy">dw offset </span>CRMSG19
<span style="color:gray">RESGROUP:0D70                 </span><span style="color:navy">dw offset </span>CRMSG20
<span style="color:gray">RESGROUP:0D72                 </span><span style="color:navy">dw </span><span style="color:#008040">40 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)
</span><span style="color:gray">RESGROUP:0DC2                 </span><span style="color:navy">dw offset </span>FILEXISTS
<span style="color:gray">RESGROUP:0DC4                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:0DC6                 </span><span style="color:navy">dw offset </span>CANTMKDIR
<span style="color:gray">RESGROUP:0DC8                 </span><span style="color:navy">dw offset </span>FAILINT24
<span style="color:gray">RESGROUP:0DCA                 </span><span style="color:navy">dw offset </span>TOOMANYRD
<span style="color:gray">RESGROUP:0DCC                 </span><span style="color:navy">dw offset </span>DUPLREDIR
<span style="color:gray">RESGROUP:0DCE                 </span><span style="color:navy">dw offset </span>INVPASSWD
<span style="color:gray">RESGROUP:0DD0                 </span><span style="color:navy">dw offset </span>INVLDPARM
<span style="color:gray">RESGROUP:0DD2                 </span><span style="color:navy">dw offset </span>NETDATFAU
<span style="color:gray">RESGROUP:0DD4                 </span><span style="color:navy">dw offset </span>FNOSUPNET
<span style="color:gray">RESGROUP:0DD6                 </span><span style="color:navy">dw offset </span>RSCNOTINS
<span style="color:gray">RESGROUP:0DD8 </span>PATRICIDE       <span style="color:navy">db </span><span style="color:#008040">2Eh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:0DD9                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">RESGROUP:0DD9                 </span><span style="color:navy">db &#039;Top level process aborted, cannot continue&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:0E07                 </span><span style="color:navy">db </span><span style="color:#008040">9 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)
</span><span style="color:maroon">RESGROUP:0E10 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:0E10
RESGROUP:0E10 </span>Exec_Err<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0E10                 </span><span style="color:navy">mov     bx, offset </span>TOOBIG ; RCODE_START
<span style="color:maroon">RESGROUP:0E13                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">8           </span>; ERROR_NOT_ENOUGH_MEMORY
<span style="color:maroon">RESGROUP:0E15                 </span><span style="color:navy">jz      short </span>GotExecEMes
<span style="color:maroon">RESGROUP:0E17                 </span><span style="color:navy">mov     bx, offset </span>EXEBAD
<span style="color:maroon">RESGROUP:0E1A                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Bh
</span><span style="color:maroon">RESGROUP:0E1C                 </span><span style="color:navy">jz      short </span>GotExecEMes
<span style="color:maroon">RESGROUP:0E1E                 </span><span style="color:navy">mov     bx, offset </span>ACCDEN
<span style="color:maroon">RESGROUP:0E21                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">5           </span>; ERROR_ACCESS_DENIED
<span style="color:maroon">RESGROUP:0E23                 </span><span style="color:navy">jz      short </span>GotExecEMes
<span style="color:maroon">RESGROUP:0E25                 </span><span style="color:navy">mov     bx, offset </span>EXECEMES
<span style="color:maroon">RESGROUP:0E28                 </span><span style="color:navy">mov     si, offset </span>ExecErrSubst
<span style="color:maroon">RESGROUP:0E2B
RESGROUP:0E2B </span>GotExecEMes<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0E2B                 </span><span style="color:navy">mov     dx, bx
</span><span style="color:maroon">RESGROUP:0E2D                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:0E30                 </span><span style="color:navy">jmp     short </span>NoExec
<span style="color:maroon">RESGROUP:0E32 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:0E32
RESGROUP:0E32 </span>Ext_Exec<span style="color:navy">:                               </span>; Exec_Ret
<span style="color:maroon">RESGROUP:0E32                 </span><span style="color:navy">jb      short </span>Exec_Err
<span style="color:maroon">RESGROUP:0E34
RESGROUP:0E34 </span>Exec_Wait<span style="color:navy">:
</span><span style="color:maroon">RESGROUP:0E34                 </span><span style="color:navy">mov     ah, </span><span style="color:green">4Dh
</span><span style="color:maroon">RESGROUP:0E36                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET EXIT CODE OF SUBPROGRAM (WAIT)
<span style="color:maroon">RESGROUP:0E38                 </span><span style="color:navy">mov     [</span>RetCode<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:0E3B
RESGROUP:0E3B </span>NoExec<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0E3B                 </span><span style="color:navy">jmp     </span>LodCom
<span style="color:maroon">RESGROUP:0E3E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:0E3E
RESGROUP:0E3E </span>ContC<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0E3E                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:0E3F                 </span><span style="color:navy">test    [</span>InitFlag<span style="color:navy">], </span><span style="color:green">1   </span>; INITINIT ; in initialization?
<span style="color:maroon">RESGROUP:0E44                 </span><span style="color:navy">jz      short </span>NotAtInit ; no
<span style="color:maroon">RESGROUP:0E46                 </span><span style="color:navy">test    [</span>InitFlag<span style="color:navy">], </span><span style="color:green">2   </span>; INITSPECIAL ; doing special stuff?
<span style="color:maroon">RESGROUP:0E4B                 </span><span style="color:navy">jz      short </span>CmdIret   ; no, ignore ^C
<span style="color:maroon">RESGROUP:0E4D                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:0E4E                 </span><span style="color:navy">jmp     </span>init_contc_specialcase
<span style="color:maroon">RESGROUP:0E51 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:0E51
RESGROUP:0E51 </span>CmdIret<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0E51                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:0E52                 </span><span style="color:navy">iret
</span><span style="color:maroon">RESGROUP:0E53 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:0E53
RESGROUP:0E53 </span>NotAtInit<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0E53                 </span><span style="color:navy">test    [</span>InitFlag<span style="color:navy">], </span><span style="color:green">4   </span>; INITCTRLC ; are we already in a ^C?
<span style="color:maroon">RESGROUP:0E58                 </span><span style="color:navy">jz      short </span>NotInit   ; nope too.
<span style="color:maroon">RESGROUP:0E5A                 </span><span style="color:navy">test    ah, ah
</span><span style="color:maroon">RESGROUP:0E5C                 </span><span style="color:navy">jz      short </span>CmdIret
<span style="color:maroon">RESGROUP:0E5E                 </span><span style="color:navy">cmp     ah, </span><span style="color:green">12
</span><span style="color:maroon">RESGROUP:0E61                 </span><span style="color:navy">ja      short </span>CmdIret
<span style="color:maroon">RESGROUP:0E63                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:0E64                 </span><span style="color:navy">add     sp, </span><span style="color:green">6
</span><span style="color:maroon">RESGROUP:0E67                 </span><span style="color:navy">stc
</span><span style="color:maroon">RESGROUP:0E68                 </span><span style="color:navy">retf    </span><span style="color:green">2
</span><span style="color:maroon">RESGROUP:0E6B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:0E6B
RESGROUP:0E6B </span>NotInit<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0E6B                 </span><span style="color:navy">or      [</span>InitFlag<span style="color:navy">], </span><span style="color:green">4   </span>; INITCTRLC
<span style="color:maroon">RESGROUP:0E70                 </span><span style="color:navy">sti
</span><span style="color:maroon">RESGROUP:0E71                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">RESGROUP:0E72                 </span><span style="color:navy">mov     ax, [</span>SingleCom<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:0E75                 </span><span style="color:navy">or      ax, ax
</span><span style="color:maroon">RESGROUP:0E77                 </span><span style="color:navy">jnz     short </span>NoReset
<span style="color:maroon">RESGROUP:0E79                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">RESGROUP:0E7A                 </span><span style="color:navy">mov     ah, </span><span style="color:green">0Dh
</span><span style="color:maroon">RESGROUP:0E7C                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - DISK RESET
<span style="color:maroon">RESGROUP:0E7E                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">RESGROUP:0E7F
RESGROUP:0E7F </span>NoReset<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0E7F                 </span><span style="color:navy">test    [</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:maroon">RESGROUP:0E85                 </span><span style="color:navy">jz      short </span>ContCTerm
<span style="color:maroon">RESGROUP:0E87                 </span><span style="color:navy">or      ax, ax
</span><span style="color:maroon">RESGROUP:0E89                 </span><span style="color:navy">jnz     short </span>ContCTerm
<span style="color:maroon">RESGROUP:0E8B                 </span><span style="color:navy">call    </span>SavHand
<span style="color:maroon">RESGROUP:0E8E                 </span><span style="color:navy">call    </span>AskEnd
<span style="color:maroon">RESGROUP:0E91                 </span><span style="color:navy">jnb     short </span>ContBatch
<span style="color:maroon">RESGROUP:0E93                 </span><span style="color:navy">mov     cl, [</span>EchoFlag<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:0E97                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">RESGROUP:0E98
RESGROUP:0E98 </span>ClearBatch<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0E98                 </span><span style="color:navy">mov     es, [</span>Batch<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:0E9C                 </span><span style="color:navy">mov     di, </span><span style="color:green">20h         </span>; [BATCHSEGMENT.BatFile]
<span style="color:maroon">RESGROUP:0E9F                 </span><span style="color:navy">mov     bx, [es:</span><span style="color:green">5</span><span style="color:navy">]      </span>; [es:BATCHSEGMENT.BatForPtr]
<span style="color:maroon">RESGROUP:0EA4                 </span><span style="color:navy">test    bx, bx
</span><span style="color:maroon">RESGROUP:0EA6                 </span><span style="color:navy">jz      short </span>No_Bat_For
<span style="color:maroon">RESGROUP:0EA8                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:0EA9                 </span><span style="color:navy">mov     es, bx
</span><span style="color:maroon">RESGROUP:0EAB                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h
</span><span style="color:maroon">RESGROUP:0EAD                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FREE MEMORY
<span style="color:maroon">RESGROUP:0EAD                                         </span>; ES = segment address of area to be freed
<span style="color:maroon">RESGROUP:0EAF                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:0EB0
RESGROUP:0EB0 </span>No_Bat_For<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0EB0                 </span><span style="color:navy">mov     cl, [es:</span><span style="color:green">1</span><span style="color:navy">]      </span>; [es:BATCHSEGMENT.BatEchoFlag]
<span style="color:maroon">RESGROUP:0EB5                 </span><span style="color:navy">mov     bx, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:BATCHSEGMENT.BatLast]
<span style="color:maroon">RESGROUP:0EBA                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h
</span><span style="color:maroon">RESGROUP:0EBC                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FREE MEMORY
<span style="color:maroon">RESGROUP:0EBC                                         </span>; ES = segment address of area to be freed
<span style="color:maroon">RESGROUP:0EBE                 </span><span style="color:navy">mov     [</span>Batch<span style="color:navy">], bx
</span><span style="color:maroon">RESGROUP:0EC2                 </span><span style="color:navy">dec     [</span>Nest<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:0EC6                 </span><span style="color:navy">jnz     short </span>ClearBatch
<span style="color:maroon">RESGROUP:0EC8                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">RESGROUP:0EC9                 </span><span style="color:navy">mov     [</span>EchoFlag<span style="color:navy">], cl
</span><span style="color:maroon">RESGROUP:0ECD                 </span><span style="color:navy">mov     [</span>PipeFlag<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:0ED2
RESGROUP:0ED2 </span>ContBatch<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0ED2                 </span><span style="color:navy">call    </span>crlf
<span style="color:maroon">RESGROUP:0ED5                 </span><span style="color:navy">call    </span>RestHand
<span style="color:maroon">RESGROUP:0ED8
RESGROUP:0ED8 </span>ContCTerm<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0ED8                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:maroon">RESGROUP:0EDA                 </span><span style="color:navy">mov     bp, ax
</span><span style="color:maroon">RESGROUP:0EDC                 </span><span style="color:navy">mov     [</span>IfFlag<span style="color:navy">], al
</span><span style="color:maroon">RESGROUP:0EDF                 </span><span style="color:navy">mov     [</span>ForFlag<span style="color:navy">], al
</span><span style="color:maroon">RESGROUP:0EE2                 </span><span style="color:navy">call    </span>ResPipeOff
<span style="color:maroon">RESGROUP:0EE5                 </span><span style="color:navy">cmp     [</span>SingleCom<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:0EE9                 </span><span style="color:navy">jz      short </span>NoSetSing
<span style="color:maroon">RESGROUP:0EEB                 </span><span style="color:navy">mov     [</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:maroon">RESGROUP:0EF1
RESGROUP:0EF1 </span>NoSetSing<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0EF1                 </span><span style="color:navy">and     [</span>InitFlag<span style="color:navy">], </span><span style="color:green">0FBh </span>; ~INITCTRLC
<span style="color:maroon">RESGROUP:0EF6                 </span><span style="color:navy">cmp     [</span>ExtCom<span style="color:navy">], al
</span><span style="color:maroon">RESGROUP:0EFA                 </span><span style="color:navy">jnz     short </span>DoDAb     ; internal ^c
<span style="color:maroon">RESGROUP:0EFC                 </span><span style="color:navy">jmp     </span>LodCom1
<span style="color:maroon">RESGROUP:0EFF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:0EFF
RESGROUP:0EFF </span>DoDAb<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0EFF                 </span><span style="color:navy">stc
</span><span style="color:maroon">RESGROUP:0F00                 </span><span style="color:navy">retf
</span><span style="color:black">RESGROUP:0F01
RESGROUP:0F01 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:0F01
RESGROUP:0F01
RESGROUP:0F01 </span>proc            ResPipeOff near         <span style="color:green">; ...
</span><span style="color:black">RESGROUP:0F01                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:0F02                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">RESGROUP:0F04                 </span><span style="color:navy">xchg    al, [</span>PipeFlag<span style="color:navy">]
</span><span style="color:black">RESGROUP:0F08                 </span><span style="color:navy">or      al, al
</span><span style="color:black">RESGROUP:0F0A                 </span><span style="color:navy">jz      short </span><span style="color:gray">NoPipePop
</span><span style="color:black">RESGROUP:0F0C                 </span><span style="color:navy">shr     [</span>EchoFlag<span style="color:navy">], </span><span style="color:green">1
</span><span style="color:black">RESGROUP:0F10
RESGROUP:0F10 </span><span style="color:gray">NoPipePop</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0F10                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:0F11                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:0F11 </span>endp            ResPipeOff
<span style="color:black">RESGROUP:0F11
RESGROUP:0F12 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:0F12 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR alloc_env
</span><span style="color:black">RESGROUP:0F12
RESGROUP:0F12 </span>BadMemErr<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0F12                 </span><span style="color:navy">mov     dx, offset </span>BMEMMES
<span style="color:black">RESGROUP:0F12 </span><span style="color:gray">; END OF FUNCTION CHUNK FOR alloc_env
</span><span style="color:black">RESGROUP:0F15 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR GetComDsk
</span><span style="color:black">RESGROUP:0F15
RESGROUP:0F15 </span>FatalC<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0F15                 </span><span style="color:navy">call    </span>RPrint
<span style="color:black">RESGROUP:0F18                 </span><span style="color:navy">cmp     [</span>PermCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:0F1D                 </span><span style="color:navy">jz      short </span><span style="color:gray">FatalRet
</span><span style="color:black">RESGROUP:0F1F                 </span><span style="color:navy">cmp     [</span>SingleCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:0F24                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FatalRet
</span><span style="color:black">RESGROUP:0F26                 </span><span style="color:navy">mov     dx, offset </span>HALTMES
<span style="color:black">RESGROUP:0F29                 </span><span style="color:navy">call    </span>RPrint
<span style="color:black">RESGROUP:0F2C                 </span><span style="color:navy">sti
</span><span style="color:black">RESGROUP:0F2D
RESGROUP:0F2D </span><span style="color:gray">Stall</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0F2D                 </span><span style="color:navy">jmp     short </span><span style="color:gray">Stall
</span><span style="color:black">RESGROUP:0F2F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:0F2F
RESGROUP:0F2F </span><span style="color:gray">FatalRet</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0F2F                 </span><span style="color:navy">mov     dx, offset </span>FRETMES
<span style="color:black">RESGROUP:0F32                 </span><span style="color:navy">call    </span>RPrint
<span style="color:black">RESGROUP:0F35
RESGROUP:0F35 </span>FatalRet2<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0F35                 </span><span style="color:navy">cmp     [</span>PermCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:0F3A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">Ret_2e
</span><span style="color:black">RESGROUP:0F3C                 </span><span style="color:navy">mov     ax, [</span>Parent<span style="color:navy">]
</span><span style="color:black">RESGROUP:0F3F                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">16h</span><span style="color:navy">], ax    </span>; [PDB.PARENT_PID]
<span style="color:black">RESGROUP:0F42                 </span><span style="color:navy">mov     ax, [word ptr </span>OldTerm<span style="color:navy">]
</span><span style="color:black">RESGROUP:0F45                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">0Ah</span><span style="color:navy">], ax    </span>; [PDB.EXIT]
<span style="color:black">RESGROUP:0F48                 </span><span style="color:navy">mov     ax, [word ptr </span>OldTerm<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">]
</span><span style="color:black">RESGROUP:0F4B                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">0Ch</span><span style="color:navy">], ax    </span>; [PDB.EXIT+2]
<span style="color:black">RESGROUP:0F4E                 </span><span style="color:navy">mov     ah, </span><span style="color:green">4Ch
</span><span style="color:black">RESGROUP:0F50                 </span><span style="color:navy">mov     al, [byte ptr </span>RetCode<span style="color:navy">]
</span><span style="color:black">RESGROUP:0F53                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - QUIT WITH EXIT CODE (EXIT)
<span style="color:black">RESGROUP:0F53                                         </span>; AL = exit code
<span style="color:black">RESGROUP:0F55 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:0F55
RESGROUP:0F55 </span><span style="color:gray">Ret_2e</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0F55                 </span><span style="color:navy">mov     [</span>SingleCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:0F5B                 </span><span style="color:navy">mov     es, [</span>Res_Tpa<span style="color:navy">]
</span><span style="color:black">RESGROUP:0F5F                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h
</span><span style="color:black">RESGROUP:0F61                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FREE MEMORY
<span style="color:black">RESGROUP:0F61                                         </span>; ES = segment address of area to be freed
<span style="color:black">RESGROUP:0F63                 </span><span style="color:navy">mov     bx, [</span>Save_Pdb<span style="color:navy">]
</span><span style="color:black">RESGROUP:0F67                 </span><span style="color:navy">mov     ah, </span><span style="color:green">50h
</span><span style="color:black">RESGROUP:0F69                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ internal - SET PSP SEGMENT
<span style="color:black">RESGROUP:0F69                                         </span>; BX = segment address of new PSP
<span style="color:black">RESGROUP:0F6B                 </span><span style="color:navy">mov     ax, [</span>RetCode<span style="color:navy">]
</span><span style="color:black">RESGROUP:0F6E                 </span><span style="color:navy">cmp     [</span>ExtCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:0F73                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GotECode
</span><span style="color:black">RESGROUP:0F75                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">RESGROUP:0F77
RESGROUP:0F77 </span><span style="color:gray">GotECode</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:0F77                 </span><span style="color:navy">mov     [</span>ExtCom<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:black">RESGROUP:0F7C                 </span><span style="color:navy">jmp     [</span>Int_2e_Ret<span style="color:navy">]    </span>; jmp far [Int_2e_Ret]
<span style="color:black">RESGROUP:0F7C </span><span style="color:gray">; END OF FUNCTION CHUNK FOR GetComDsk
</span><span style="color:maroon">RESGROUP:0F80 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:0F80
RESGROUP:0F80 </span>Int_2e<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0F80                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:0F81                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">RESGROUP:0F82                 </span><span style="color:navy">pop     [word ptr </span>Int_2e_Ret<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:0F86                 </span><span style="color:navy">pop     [word ptr </span>Int_2e_Ret<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">]
</span><span style="color:maroon">RESGROUP:0F8A                 </span><span style="color:navy">add     sp, </span><span style="color:green">2
</span><span style="color:maroon">RESGROUP:0F8D                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:0F8E                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:0F8F                 </span>assume es:RESGROUP
<span style="color:maroon">RESGROUP:0F8F                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:maroon">RESGROUP:0F91                 </span><span style="color:navy">mov     di, </span><span style="color:green">80h
</span><span style="color:maroon">RESGROUP:0F94                 </span><span style="color:navy">mov     cx, </span><span style="color:green">64
</span><span style="color:maroon">RESGROUP:0F97                 </span><span style="color:navy">rep movsw
</span><span style="color:maroon">RESGROUP:0F99                 </span><span style="color:navy">mov     ah, </span><span style="color:green">51h
</span><span style="color:maroon">RESGROUP:0F9B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ internal - GET PSP SEGMENT
<span style="color:maroon">RESGROUP:0F9B                                         </span>; Return: BX = current PSP segment
<span style="color:maroon">RESGROUP:0F9D                 </span><span style="color:navy">mov     [es:</span>Save_Pdb<span style="color:navy">], bx
</span><span style="color:maroon">RESGROUP:0FA2                 </span><span style="color:navy">mov     ah, </span><span style="color:green">50h
</span><span style="color:maroon">RESGROUP:0FA4                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:0FA5                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:0FA6                 </span><span style="color:navy">mov     bx, ds
</span><span style="color:maroon">RESGROUP:0FA8                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ internal - SET PSP SEGMENT
<span style="color:maroon">RESGROUP:0FA8                                         </span>; BX = segment address of new PSP
<span style="color:maroon">RESGROUP:0FAA                 </span><span style="color:navy">mov     [</span>SingleCom<span style="color:navy">], </span><span style="color:green">81h
</span><span style="color:maroon">RESGROUP:0FB0                 </span><span style="color:navy">mov     [</span>ExtCom<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:0FB5                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:0FB6                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:0FB7
RESGROUP:0FB7 </span>LodCom<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0FB7                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:0FB8                 </span><span style="color:navy">add     sp, </span><span style="color:green">2
</span><span style="color:maroon">RESGROUP:0FBB                 </span><span style="color:navy">cmp     [</span>ExtCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:0FC0                 </span><span style="color:navy">jnz     short </span>LodCom0
<span style="color:maroon">RESGROUP:0FC2                 </span><span style="color:navy">jmp     </span>LodCom1
<span style="color:maroon">RESGROUP:0FC5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:0FC5
RESGROUP:0FC5 </span>LodCom0<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0FC5                 </span><span style="color:navy">mov     bx, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">RESGROUP:0FC8                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h
</span><span style="color:maroon">RESGROUP:0FCA                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ALLOCATE MEMORY
<span style="color:maroon">RESGROUP:0FCA                                         </span>; BX = number of 16-byte paragraphs desired
<span style="color:maroon">RESGROUP:0FCC                 </span><span style="color:navy">call    </span>SetSize
<span style="color:maroon">RESGROUP:0FCF                 </span><span style="color:navy">add     ax, </span><span style="color:green">20h
</span><span style="color:maroon">RESGROUP:0FD2                 </span><span style="color:navy">cmp     bx, ax
</span><span style="color:maroon">RESGROUP:0FD4                 </span><span style="color:navy">jnb     short </span>MemOk
<span style="color:maroon">RESGROUP:0FD6
RESGROUP:0FD6 </span>BadMemErrJ<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0FD6                 </span><span style="color:navy">jmp     </span>BadMemErr
<span style="color:black">RESGROUP:0FD9
RESGROUP:0FD9 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:0FD9
RESGROUP:0FD9
RESGROUP:0FD9 </span>proc            SetSize near            <span style="color:green">; ...
</span><span style="color:black">RESGROUP:0FD9                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0AAA9h      </span>; TRANSPACEEND+15
<span style="color:black">RESGROUP:0FDC                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:black">RESGROUP:0FDE                 </span><span style="color:navy">shr     ax, cl
</span><span style="color:black">RESGROUP:0FE0                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:0FE0 </span>endp            SetSize
<span style="color:black">RESGROUP:0FE0
</span><span style="color:maroon">RESGROUP:0FE1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:0FE1
RESGROUP:0FE1 </span>MemOk<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:0FE1                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h
</span><span style="color:maroon">RESGROUP:0FE3                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ALLOCATE MEMORY
<span style="color:maroon">RESGROUP:0FE3                                         </span>; BX = number of 16-byte paragraphs desired
<span style="color:maroon">RESGROUP:0FE5                 </span><span style="color:navy">jb      short </span>BadMemErrJ
<span style="color:maroon">RESGROUP:0FE7                 </span><span style="color:navy">mov     [</span>ExtCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:0FEC                 </span><span style="color:navy">mov     [</span>Res_Tpa<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:0FEF                 </span><span style="color:navy">and     ax, </span><span style="color:green">0F000h
</span><span style="color:maroon">RESGROUP:0FF2                 </span><span style="color:navy">add     ax, </span><span style="color:#ff8000">1000h
</span><span style="color:maroon">RESGROUP:0FF5                 </span><span style="color:navy">jb      short </span>Bad_Tpa
<span style="color:maroon">RESGROUP:0FF7                 </span><span style="color:navy">mov     dx, [</span>Res_Tpa<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:0FFB                 </span><span style="color:navy">add     dx, bx
</span><span style="color:maroon">RESGROUP:0FFD                 </span><span style="color:navy">cmp     dx, ax
</span><span style="color:maroon">RESGROUP:0FFF                 </span><span style="color:navy">jbe     short </span>Bad_Tpa
<span style="color:maroon">RESGROUP:1001                 </span><span style="color:navy">sub     dx, ax
</span><span style="color:maroon">RESGROUP:1003                 </span><span style="color:navy">cmp     dx, </span><span style="color:#ff8000">1000h
</span><span style="color:maroon">RESGROUP:1007                 </span><span style="color:navy">jnb     short </span>LTpaSet
<span style="color:maroon">RESGROUP:1009
RESGROUP:1009 </span>Bad_Tpa<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1009                 </span><span style="color:navy">mov     ax, [</span>Res_Tpa<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:100C
RESGROUP:100C </span>LTpaSet<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:100C                 </span><span style="color:navy">mov     [</span>Ltpa<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:100F                 </span><span style="color:navy">mov     ax, [</span>Res_Tpa<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1012                 </span><span style="color:navy">add     bx, ax
</span><span style="color:maroon">RESGROUP:1014                 </span><span style="color:navy">mov     [</span>MemSiz<span style="color:navy">], bx
</span><span style="color:maroon">RESGROUP:1018                 </span><span style="color:navy">call    </span>SetSize
<span style="color:maroon">RESGROUP:101B                 </span><span style="color:navy">sub     bx, ax
</span><span style="color:maroon">RESGROUP:101D                 </span><span style="color:navy">cmp     bx, [</span>TrnSeg<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1021                 </span><span style="color:navy">jz      short </span>LodCom1
<span style="color:maroon">RESGROUP:1023                 </span><span style="color:navy">mov     cx, </span><span style="color:green">0AA9Ah
</span><span style="color:maroon">RESGROUP:1026                 </span><span style="color:navy">ja      short </span>mov_down
<span style="color:maroon">RESGROUP:1028                 </span><span style="color:navy">xor     si, si
</span><span style="color:maroon">RESGROUP:102A                 </span><span style="color:navy">mov     di, si
</span><span style="color:maroon">RESGROUP:102C                 </span><span style="color:navy">cld
</span><span style="color:maroon">RESGROUP:102D                 </span><span style="color:navy">jmp     short </span>copy_trans
<span style="color:maroon">RESGROUP:102F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:102F
RESGROUP:102F </span>mov_down<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:102F                 </span><span style="color:navy">mov     si, cx
</span><span style="color:maroon">RESGROUP:1031                 </span><span style="color:navy">dec     si
</span><span style="color:maroon">RESGROUP:1032                 </span><span style="color:navy">mov     di, si
</span><span style="color:maroon">RESGROUP:1034                 </span><span style="color:navy">std
</span><span style="color:maroon">RESGROUP:1035
RESGROUP:1035 </span>copy_trans<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1035                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:1036                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:1037                 </span><span style="color:navy">mov     es, bx
</span><span style="color:maroon">RESGROUP:1039                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:1039                 </span><span style="color:navy">mov     ds, [</span>TrnSeg<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:103D                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">RESGROUP:103F                 </span><span style="color:navy">cld
</span><span style="color:maroon">RESGROUP:1040                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:1041                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1042                 </span><span style="color:navy">mov     [</span>TrnSeg<span style="color:navy">], bx
</span><span style="color:maroon">RESGROUP:1046
RESGROUP:1046 </span>LodCom1<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1046                 </span><span style="color:navy">mov     ax, ds
</span><span style="color:maroon">RESGROUP:1048                 </span><span style="color:navy">mov     ss, ax
</span><span style="color:maroon">RESGROUP:104A                 </span><span style="color:navy">mov     sp, offset </span>RStack ; offset DATARES:RStack
<span style="color:maroon">RESGROUP:104D                 </span><span style="color:navy">call    </span>HeadFix
<span style="color:maroon">RESGROUP:1050                 </span><span style="color:navy">xor     bp, bp
</span><span style="color:maroon">RESGROUP:1052                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">RESGROUP:1055                 </span><span style="color:navy">xchg    ax, [</span>VerVal<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1059                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">RESGROUP:105C                 </span><span style="color:navy">jz      short </span>NoSetVer
<span style="color:maroon">RESGROUP:105E                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2Eh
</span><span style="color:maroon">RESGROUP:1060                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET VERIFY FLAG
<span style="color:maroon">RESGROUP:1060                                         </span>; DL = 00h, AL = 01h VERIFY on / 00h VERIFY off
<span style="color:maroon">RESGROUP:1062
RESGROUP:1062 </span>NoSetVer<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1062                 </span><span style="color:navy">cmp     [</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:maroon">RESGROUP:1067                 </span><span style="color:navy">jnz     short </span>NoSng
<span style="color:maroon">RESGROUP:1069                 </span><span style="color:navy">jmp     </span>FatalRet2
<span style="color:maroon">RESGROUP:106C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:106C
RESGROUP:106C </span>NoSng<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:106C                 </span><span style="color:navy">call    </span>ChkSum
<span style="color:maroon">RESGROUP:106F                 </span><span style="color:navy">cmp     dx, [</span>Sum<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1073                 </span><span style="color:navy">jnz     short </span>Bogus_Com
<span style="color:maroon">RESGROUP:1075                 </span><span style="color:navy">call    </span>chk_transient
<span style="color:maroon">RESGROUP:1078                 </span><span style="color:navy">jz      short </span>HavCom
<span style="color:maroon">RESGROUP:107A
RESGROUP:107A </span>Bogus_Com<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:107A                 </span><span style="color:navy">mov     [</span>Loading<span style="color:navy">], </span><span style="color:#ff8000">1    </span>; flag DskErr routine
<span style="color:maroon">RESGROUP:107F                 </span><span style="color:navy">call    </span>LoadCom
<span style="color:maroon">RESGROUP:1082
RESGROUP:1082 </span>ChkSame<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1082                 </span><span style="color:navy">call    </span>ChkSum
<span style="color:maroon">RESGROUP:1085                 </span><span style="color:navy">cmp     dx, [</span>Sum<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1089                 </span><span style="color:navy">jnz     short </span>Also_Bogus
<span style="color:maroon">RESGROUP:108B                 </span><span style="color:navy">call    </span>chk_transient   ; check transient portion is valid or not
<span style="color:maroon">RESGROUP:108E                 </span><span style="color:navy">jz      short </span>HavCom
<span style="color:maroon">RESGROUP:1090
RESGROUP:1090 </span>Also_Bogus<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1090                 </span><span style="color:navy">call    </span>WrongCom
<span style="color:maroon">RESGROUP:1093                 </span><span style="color:navy">jmp     short </span>ChkSame
<span style="color:maroon">RESGROUP:1095 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1095
RESGROUP:1095 </span>HavCom<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1095                 </span><span style="color:navy">mov     [</span>Loading<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:109A                 </span><span style="color:navy">mov     si, offset </span>TranVars
<span style="color:maroon">RESGROUP:109D                 </span><span style="color:navy">mov     di, offset </span>HEADCALL
<span style="color:maroon">RESGROUP:10A0                 </span><span style="color:navy">mov     es, [</span>TrnSeg<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:10A4                 </span><span style="color:navy">cld
</span><span style="color:maroon">RESGROUP:10A5                 </span><span style="color:navy">mov     cx, offset </span>OldErrNo ; TranVarEnd
<span style="color:maroon">RESGROUP:10A8                 </span><span style="color:navy">sub     cx, si
</span><span style="color:maroon">RESGROUP:10AA                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">RESGROUP:10AC                 </span><span style="color:navy">mov     ax, [</span>MemSiz<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:10AF                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">2</span><span style="color:navy">], ax      </span>; [PDB.BLOCK_LEN]
<span style="color:maroon">RESGROUP:10B2                 </span><span style="color:navy">jmp     [dword ptr </span>Trans<span style="color:navy">] </span>; jmp far [Trans]
<span style="color:maroon">RESGROUP:10B6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:10B6
RESGROUP:10B6 </span>TRemCheck<span style="color:navy">:
</span><span style="color:maroon">RESGROUP:10B6                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:10B7                 </span><span style="color:navy">add     sp, </span><span style="color:green">2
</span><span style="color:maroon">RESGROUP:10BA                 </span><span style="color:navy">call    </span>RemCheck
<span style="color:maroon">RESGROUP:10BD                 </span><span style="color:navy">retf
</span><span style="color:black">RESGROUP:10BE
RESGROUP:10BE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:10BE
RESGROUP:10BE
RESGROUP:10BE </span>proc            RemCheck near           <span style="color:green">; ...
</span><span style="color:black">RESGROUP:10BE                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:10BF                 </span><span style="color:navy">push    bx
</span><span style="color:black">RESGROUP:10C0                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">RESGROUP:10C2                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4408h       </span>; (IOCTL&lt;&lt;8)+8
<span style="color:black">RESGROUP:10C5                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL -
<span style="color:black">RESGROUP:10C7                 </span><span style="color:navy">jnb     short </span><span style="color:gray">rcCont
</span><span style="color:black">RESGROUP:10C9                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">RESGROUP:10CB                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ResRegs
</span><span style="color:black">RESGROUP:10CD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:10CD
RESGROUP:10CD </span><span style="color:gray">rcCont</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:10CD                 </span><span style="color:navy">and     ax, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:10D0                 </span><span style="color:navy">not     ax
</span><span style="color:black">RESGROUP:10D2
RESGROUP:10D2 </span><span style="color:gray">ResRegs</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:10D2                 </span><span style="color:navy">pop     bx
</span><span style="color:black">RESGROUP:10D3                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:10D4                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:10D4 </span>endp            RemCheck
<span style="color:black">RESGROUP:10D4
</span><span style="color:maroon">RESGROUP:10D5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:10D5
RESGROUP:10D5 </span>THeadFix<span style="color:navy">:
</span><span style="color:maroon">RESGROUP:10D5                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:10D6                 </span><span style="color:navy">add     sp, </span><span style="color:green">2
</span><span style="color:maroon">RESGROUP:10D9                 </span><span style="color:navy">call    </span>HeadFix
<span style="color:maroon">RESGROUP:10DC                 </span><span style="color:navy">retf
</span><span style="color:black">RESGROUP:10DD
RESGROUP:10DD </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:10DD
RESGROUP:10DD
RESGROUP:10DD </span>proc            HeadFix near            <span style="color:green">; ...
</span><span style="color:black">RESGROUP:10DD                 </span><span style="color:navy">call    </span>SetVect
<span style="color:black">RESGROUP:10E0                 </span><span style="color:navy">xor     bx, bx          </span>; BX = handle = 0
<span style="color:black">RESGROUP:10E2                 </span><span style="color:navy">mov     cx, [</span>Io_Save<span style="color:navy">]   </span>; CX = original stdin, stdout
<span style="color:black">RESGROUP:10E6                 </span><span style="color:navy">mov     dx, [ds:</span><span style="color:green">18h</span><span style="color:navy">]    </span>; [PDB.JFN_TABLE]
<span style="color:black">RESGROUP:10EA                 </span><span style="color:navy">cmp     cl, dl          </span>; DX = current stdin, stdout
<span style="color:black">RESGROUP:10EC                 </span><span style="color:navy">jz      short </span><span style="color:gray">Chk1
</span><span style="color:black">RESGROUP:10EE                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh         </span>; CLOSE
<span style="color:black">RESGROUP:10F0                 </span><span style="color:navy">call    </span>int21h          ; close stdin
<span style="color:black">RESGROUP:10F3                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">18h</span><span style="color:navy">], cl    </span>; [PDB.JFN_TABLE] ; restore stdin
<span style="color:black">RESGROUP:10F7
RESGROUP:10F7 </span><span style="color:gray">Chk1</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:10F7                 </span><span style="color:navy">inc     bx
</span><span style="color:black">RESGROUP:10F8                 </span><span style="color:navy">cmp     ch, dh
</span><span style="color:black">RESGROUP:10FA                 </span><span style="color:navy">jz      short </span><span style="color:gray">ChkOtherHand
</span><span style="color:black">RESGROUP:10FC                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:black">RESGROUP:10FE                 </span><span style="color:navy">call    </span>int21h          ; close stdout
<span style="color:black">RESGROUP:1101                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">19h</span><span style="color:navy">], ch    </span>; [PDB.JFN_TABLE+1] ; restore stdout
<span style="color:black">RESGROUP:1105
RESGROUP:1105 </span><span style="color:gray">ChkOtherHand</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1105                 </span><span style="color:navy">add     bx, </span><span style="color:#ff8000">4           </span>; skip handles 2,3,4
<span style="color:black">RESGROUP:1108                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">0Fh         </span>; FILPERPROC-5 ; 15
<span style="color:black">RESGROUP:110B
RESGROUP:110B </span><span style="color:gray">CloseLoop</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:110B                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:black">RESGROUP:110D                 </span><span style="color:navy">cmp     [byte ptr bx+</span><span style="color:#ff8000">18h</span><span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; [BX+PDB.JFN_TABLE]
<span style="color:black">RESGROUP:1111                 </span><span style="color:navy">jz      short </span><span style="color:gray">CloseLoopNxt
</span><span style="color:black">RESGROUP:1113                 </span><span style="color:navy">call    </span>int21h
<span style="color:black">RESGROUP:1116
RESGROUP:1116 </span><span style="color:gray">CloseLoopNxt</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1116                 </span><span style="color:navy">inc     bx
</span><span style="color:black">RESGROUP:1117                 </span><span style="color:navy">loop    </span><span style="color:gray">CloseLoop
</span><span style="color:black">RESGROUP:1119                 </span><span style="color:navy">cmp     [</span>Append_Flag<span style="color:navy">], </span><span style="color:#ff8000">0FFh
</span><span style="color:black">RESGROUP:111E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">Append_Fix_End
</span><span style="color:black">RESGROUP:1120                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0B707h      </span>; AppendSetState
<span style="color:black">RESGROUP:1123                 </span><span style="color:navy">mov     bx, [</span>Append_State<span style="color:navy">]
</span><span style="color:black">RESGROUP:1127                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - DOS 4.0 APPEND - SET APPEND FUNCTION STATE
<span style="color:black">RESGROUP:1127                                         </span>; BX = APPEND state bits
<span style="color:black">RESGROUP:1129                 </span><span style="color:navy">mov     [</span>Append_Flag<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:112E
RESGROUP:112E </span><span style="color:gray">Append_Fix_End</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:112E                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:112E </span>endp            HeadFix
<span style="color:black">RESGROUP:112E
RESGROUP:112F
RESGROUP:112F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:112F
RESGROUP:112F
RESGROUP:112F </span>proc            SavHand near            <span style="color:green">; ...
</span><span style="color:black">RESGROUP:112F                 </span><span style="color:navy">push    bx              </span>; save current program&#039;s stdin/out &amp; set to our stderr
<span style="color:black">RESGROUP:1130                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:1131                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:1132                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:1133                 </span><span style="color:navy">mov     ah, </span><span style="color:green">51h         </span>; GET_CURRENT_PDB
<span style="color:black">RESGROUP:1135                 </span><span style="color:navy">call    </span>int21h
<span style="color:black">RESGROUP:1138                 </span><span style="color:navy">mov     ds, bx
</span><span style="color:black">RESGROUP:113A                 </span><span style="color:navy">lds     bx, [ds:</span><span style="color:green">34h</span><span style="color:navy">]    </span>; [PDB.JFN_Pointer]
<span style="color:black">RESGROUP:113E                 </span><span style="color:navy">mov     ax, [bx]
</span><span style="color:black">RESGROUP:1140                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:1141                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:1142                 </span><span style="color:navy">mov     [es:</span>Handle01<span style="color:navy">], ax
</span><span style="color:black">RESGROUP:1146                 </span><span style="color:navy">mov     al, [es:</span><span style="color:green">1Ah</span><span style="color:navy">]    </span>; [es:PDB.JFN_TABLE+2] ; AL = COMMAND stderr
<span style="color:black">RESGROUP:114A                 </span><span style="color:navy">mov     ah, al
</span><span style="color:black">RESGROUP:114C                 </span><span style="color:navy">mov     [bx], ax        </span>; set user&#039;s stdin/out to our stderr
<span style="color:black">RESGROUP:114E                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:114F                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:1150                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:1151                 </span><span style="color:navy">pop     bx
</span><span style="color:black">RESGROUP:1152                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1152 </span>endp            SavHand
<span style="color:black">RESGROUP:1152
</span><span style="color:maroon">RESGROUP:1153 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1153
RESGROUP:1153 </span>GetComDsk2<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1153                 </span><span style="color:navy">call    </span>GetComDsk
<span style="color:maroon">RESGROUP:1156                 </span><span style="color:navy">jmp     </span>LodCom1
<span style="color:black">RESGROUP:1159
RESGROUP:1159 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1159
RESGROUP:1159
RESGROUP:1159 </span>proc            RestHand near           <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1159                 </span><span style="color:navy">push    ds              </span>; restore stdin, stdout to user
<span style="color:black">RESGROUP:115A                 </span><span style="color:navy">push    bx
</span><span style="color:black">RESGROUP:115B                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:115C                 </span><span style="color:navy">mov     ah, </span><span style="color:green">51h         </span>; GET_CURRENT_PDB
<span style="color:black">RESGROUP:115E                 </span><span style="color:navy">call    </span>int21h
<span style="color:black">RESGROUP:1161                 </span><span style="color:navy">mov     ax, [</span>Handle01<span style="color:navy">]
</span><span style="color:black">RESGROUP:1164                 </span><span style="color:navy">mov     ds, bx
</span><span style="color:black">RESGROUP:1166                 </span><span style="color:navy">lds     bx, [ds:</span><span style="color:green">34h</span><span style="color:navy">]    </span>; [PDB.JFN_Pointer]
<span style="color:black">RESGROUP:116A                 </span><span style="color:navy">mov     [bx], ax
</span><span style="color:black">RESGROUP:116C                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:116D                 </span><span style="color:navy">pop     bx
</span><span style="color:black">RESGROUP:116E                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:116F                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:116F </span>endp            RestHand
<span style="color:black">RESGROUP:116F
RESGROUP:1170 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:1170 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR GetComDsk
</span><span style="color:black">RESGROUP:1170
RESGROUP:1170 </span><span style="color:gray">Hopeless</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1170                 </span><span style="color:navy">mov     dx, offset </span>COMBAD
<span style="color:black">RESGROUP:1173                 </span><span style="color:navy">jmp     </span>FatalC
<span style="color:black">RESGROUP:1173 </span><span style="color:gray">; END OF FUNCTION CHUNK FOR GetComDsk
</span><span style="color:black">RESGROUP:1176
RESGROUP:1176 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1176
RESGROUP:1176
RESGROUP:1176 </span>proc            GetComDsk near          <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1176
RESGROUP:1176 </span><span style="color:gray">; FUNCTION CHUNK AT RESGROUP:0F15 SIZE 0000006B BYTES
</span><span style="color:black">RESGROUP:1176 </span><span style="color:gray">; FUNCTION CHUNK AT RESGROUP:1170 SIZE 00000006 BYTES
</span><span style="color:black">RESGROUP:1176
RESGROUP:1176                 </span><span style="color:navy">mov     al, [</span>ComDrv<span style="color:navy">]
</span><span style="color:black">RESGROUP:1179                 </span><span style="color:navy">call    </span>RemCheck
<span style="color:black">RESGROUP:117C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">Hopeless  </span>; non-removable media
<span style="color:black">RESGROUP:117E                 </span><span style="color:navy">cmp     dx, offset </span>COMBAD
<span style="color:black">RESGROUP:1182                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GetComDsk4
</span><span style="color:black">RESGROUP:1184                 </span><span style="color:navy">mov     dx, offset </span>COMBAD
<span style="color:black">RESGROUP:1187                 </span><span style="color:navy">call    </span>RPrint
<span style="color:black">RESGROUP:118A
RESGROUP:118A </span><span style="color:gray">GetComDsk4</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:118A                 </span><span style="color:navy">cmp     [</span>PutBackDrv<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:118F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">Users_Drive
</span><span style="color:black">RESGROUP:1191                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">19h         </span>; GET_DEFAULT_DRIVE
<span style="color:black">RESGROUP:1193                 </span><span style="color:navy">call    </span>int21h
<span style="color:black">RESGROUP:1196                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">41h </span><span style="color:gray">; &#039;A&#039;
</span><span style="color:black">RESGROUP:1198                 </span><span style="color:navy">mov     [</span>PutBackDrv<span style="color:navy">], al
</span><span style="color:black">RESGROUP:119B
RESGROUP:119B </span><span style="color:gray">Users_Drive</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:119B                 </span><span style="color:navy">mov     dx, offset </span>PUTBACKMSG
<span style="color:black">RESGROUP:119E                 </span><span style="color:navy">mov     si, offset </span>PutBackSubst
<span style="color:black">RESGROUP:11A1                 </span><span style="color:navy">call    </span>RPrint
<span style="color:black">RESGROUP:11A4                 </span><span style="color:navy">mov     dx, offset </span>PROMPT
<span style="color:black">RESGROUP:11A7                 </span><span style="color:navy">call    </span>RPrint
<span style="color:black">RESGROUP:11AA                 </span><span style="color:navy">call    </span>GetRawFlushedByte
<span style="color:black">RESGROUP:11AD                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:11AD </span>endp            GetComDsk
<span style="color:black">RESGROUP:11AD
RESGROUP:11AE
RESGROUP:11AE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:11AE
RESGROUP:11AE
RESGROUP:11AE </span>proc            GetRawFlushedByte near  <span style="color:green">; ...
</span><span style="color:black">RESGROUP:11AE                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0C07h       </span>; (STD_CON_INPUT_FLUSH&lt;&lt;8) | RAW_CON_INPUT
<span style="color:black">RESGROUP:11B1                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - CLEAR KEYBOARD BUFFER
<span style="color:black">RESGROUP:11B1                                         </span>; AL must be 01h, 06h, 07h, 08h, or 0Ah.
<span style="color:black">RESGROUP:11B3                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0C00h       </span>; (STD_CON_INPUT_FLUSH&lt;&lt;8) + 0
<span style="color:black">RESGROUP:11B6                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - CLEAR KEYBOARD BUFFER
<span style="color:black">RESGROUP:11B6                                         </span>; AL must be 01h, 06h, 07h, 08h, or 0Ah.
<span style="color:black">RESGROUP:11B8
RESGROUP:11B8 </span>LoadCom_retn<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:11B8                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:11B8 </span>endp            GetRawFlushedByte
<span style="color:black">RESGROUP:11B8
RESGROUP:11B9
RESGROUP:11B9 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:11B9
RESGROUP:11B9
RESGROUP:11B9 </span>proc            LoadCom near            <span style="color:green">; ...
</span><span style="color:black">RESGROUP:11B9                 </span><span style="color:navy">inc     bp
</span><span style="color:black">RESGROUP:11BA                 </span><span style="color:navy">mov     dx, offset </span>ComSpec
<span style="color:black">RESGROUP:11BD                 </span><span style="color:navy">mov     ax, </span><span style="color:green">3D20h
</span><span style="color:black">RESGROUP:11C0                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - OPEN DISK FILE WITH HANDLE
<span style="color:black">RESGROUP:11C0                                         </span>; DS:DX -&gt; ASCIZ filename
<span style="color:black">RESGROUP:11C0                                         </span>; AL = access mode
<span style="color:black">RESGROUP:11C0                                         </span>; 0 - read, 1 - write, 2 - read &amp; write
<span style="color:black">RESGROUP:11C2                 </span><span style="color:navy">jnb     short </span><span style="color:gray">ReadCom
</span><span style="color:black">RESGROUP:11C4                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">4           </span>; ERROR_TOO_MANY_OPEN_FILES
<span style="color:black">RESGROUP:11C6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TryDoOpen
</span><span style="color:black">RESGROUP:11C8                 </span><span style="color:navy">mov     dx, offset </span>NOHANDMES
<span style="color:black">RESGROUP:11CB                 </span><span style="color:navy">jmp     </span>FatalC
<span style="color:black">RESGROUP:11CE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:11CE
RESGROUP:11CE </span><span style="color:gray">TryDoOpen</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:11CE                 </span><span style="color:navy">call    </span>GetComDsk
<span style="color:black">RESGROUP:11D1                 </span><span style="color:navy">jmp     short </span>LoadCom
<span style="color:black">RESGROUP:11D3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:11D3
RESGROUP:11D3 </span><span style="color:gray">ReadCom</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:11D3                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">RESGROUP:11D5                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">2890h       </span>; TRANSTART
<span style="color:black">RESGROUP:11D8                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">RESGROUP:11DA                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4200h
</span><span style="color:black">RESGROUP:11DD                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
<span style="color:black">RESGROUP:11DD                                         </span>; AL = method: offset from beginning of file
<span style="color:black">RESGROUP:11DF                 </span><span style="color:navy">jb      short </span><span style="color:gray">WrongCom1
</span><span style="color:black">RESGROUP:11E1                 </span><span style="color:navy">mov     cx, </span><span style="color:green">0A99Ah
</span><span style="color:black">RESGROUP:11E4                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:11E5                 </span><span style="color:navy">mov     ds, [</span>TrnSeg<span style="color:navy">]
</span><span style="color:black">RESGROUP:11E9                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">100h
</span><span style="color:black">RESGROUP:11EC                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Fh
</span><span style="color:black">RESGROUP:11EE                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - READ FROM FILE WITH HANDLE
<span style="color:black">RESGROUP:11EE                                         </span>; BX = file handle, CX = number of bytes to read
<span style="color:black">RESGROUP:11EE                                         </span>; DS:DX -&gt; buffer
<span style="color:black">RESGROUP:11F0                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:11F1
RESGROUP:11F1 </span><span style="color:gray">WrongCom1</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:11F1                 </span><span style="color:navy">pushf
</span><span style="color:black">RESGROUP:11F2                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:11F3                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:black">RESGROUP:11F5                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:black">RESGROUP:11F5                                         </span>; BX = file handle
<span style="color:black">RESGROUP:11F7                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:11F8                 </span><span style="color:navy">popf
</span><span style="color:black">RESGROUP:11F9                 </span><span style="color:navy">jb      short </span>WrongCom
<span style="color:black">RESGROUP:11FB                 </span><span style="color:navy">cmp     ax, cx
</span><span style="color:black">RESGROUP:11FD                 </span><span style="color:navy">jz      short </span>LoadCom_retn
<span style="color:black">RESGROUP:11FD </span>endp            LoadCom
<span style="color:black">RESGROUP:11FD
RESGROUP:11FF
RESGROUP:11FF </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:11FF
RESGROUP:11FF
RESGROUP:11FF </span>proc            WrongCom near           <span style="color:green">; ...
</span><span style="color:black">RESGROUP:11FF                 </span><span style="color:navy">mov     dx, offset </span>COMBAD
<span style="color:black">RESGROUP:1202                 </span><span style="color:navy">call    </span>GetComDsk
<span style="color:black">RESGROUP:1205                 </span><span style="color:navy">jmp     short </span>LoadCom   ; try again
<span style="color:black">RESGROUP:1205 </span>endp            WrongCom
<span style="color:black">RESGROUP:1205
RESGROUP:1207
RESGROUP:1207 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1207
RESGROUP:1207
RESGROUP:1207 </span>proc            ChkSum near             <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1207                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:1208                 </span><span style="color:navy">mov     ds, [</span>TrnSeg<span style="color:navy">]
</span><span style="color:black">RESGROUP:120C                 </span><span style="color:navy">mov     si, </span><span style="color:#ff8000">100h
</span><span style="color:black">RESGROUP:120F                 </span><span style="color:navy">mov     cx, </span><span style="color:green">9B47h       </span>; TRANDATAEND-100h
<span style="color:black">RESGROUP:1212                 </span><span style="color:navy">cld
</span><span style="color:black">RESGROUP:1213                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:1215                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">RESGROUP:1217                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">0FFh
</span><span style="color:black">RESGROUP:121C                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], dx </span>; 0
<span style="color:black">RESGROUP:1220                 </span><span style="color:navy">mov     [ds:</span>extend_buf_sub<span style="color:navy">], dl
</span><span style="color:black">RESGROUP:1224
RESGROUP:1224 </span><span style="color:gray">Chk</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1224                 </span><span style="color:navy">lodsw
</span><span style="color:black">RESGROUP:1225                 </span><span style="color:navy">add     dx, ax
</span><span style="color:black">RESGROUP:1227                 </span><span style="color:navy">adc     dx, </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:122A                 </span><span style="color:navy">loop    </span><span style="color:gray">Chk
</span><span style="color:black">RESGROUP:122C                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:122D                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:122D </span>endp            ChkSum
<span style="color:black">RESGROUP:122D
RESGROUP:122E
RESGROUP:122E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:122E
RESGROUP:122E
RESGROUP:122E </span>proc            chk_transient near      <span style="color:green">; ...
</span><span style="color:black">RESGROUP:122E                 </span><span style="color:navy">push    ds              </span>; check transient portion is valid or not
<span style="color:black">RESGROUP:122F                 </span><span style="color:navy">mov     ds, [</span>TrnSeg<span style="color:navy">]
</span><span style="color:black">RESGROUP:1233                 </span><span style="color:navy">cmp     [word ptr ds:</span>TCOMMAND<span style="color:navy">], </span><span style="color:green">9090h
</span><span style="color:black">RESGROUP:1239                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:123A                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:123A </span>endp            chk_transient
<span style="color:black">RESGROUP:123A
RESGROUP:123B
RESGROUP:123B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:123B
RESGROUP:123B
RESGROUP:123B </span>proc            SetVect near            <span style="color:green">; ...
</span><span style="color:black">RESGROUP:123B                 </span><span style="color:navy">mov     dx, offset </span>LodCom_Trap
<span style="color:black">RESGROUP:123E                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">0Ah</span><span style="color:navy">], dx    </span>; [PDB.EXIT]
<span style="color:black">RESGROUP:1242                 </span><span style="color:navy">mov     [word ptr ds:</span><span style="color:green">0Ch</span><span style="color:navy">], ds </span>; [PDB.EXIT+2]
<span style="color:black">RESGROUP:1246                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:1247                 </span><span style="color:navy">push    bx
</span><span style="color:black">RESGROUP:1248                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">RESGROUP:124A                 </span><span style="color:navy">mov     es, bx
</span><span style="color:black">RESGROUP:124C                 </span>assume es:RESGROUP
<span style="color:black">RESGROUP:124C                 </span><span style="color:navy">mov     bl, </span><span style="color:green">88h         </span>; INT 22h vector
<span style="color:black">RESGROUP:124E                 </span><span style="color:navy">cli
</span><span style="color:black">RESGROUP:124F                 </span><span style="color:navy">mov     [es:bx], dx
</span><span style="color:black">RESGROUP:1252                 </span><span style="color:navy">mov     [word ptr es:bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], ds
</span><span style="color:black">RESGROUP:1256                 </span><span style="color:navy">mov     dx, offset </span>Ctrlc_Trap
<span style="color:black">RESGROUP:1259                 </span><span style="color:navy">mov     bl, </span><span style="color:green">8Ch         </span>; INT 23h vector
<span style="color:black">RESGROUP:125B                 </span><span style="color:navy">mov     [es:bx], dx
</span><span style="color:black">RESGROUP:125E                 </span><span style="color:navy">mov     [word ptr es:bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], ds
</span><span style="color:black">RESGROUP:1262                 </span><span style="color:navy">mov     dx, offset </span>CritErr_Trap
<span style="color:black">RESGROUP:1265                 </span><span style="color:navy">mov     bl, </span><span style="color:green">90h         </span>; INT 24h vector
<span style="color:black">RESGROUP:1267                 </span><span style="color:navy">mov     [es:bx], dx
</span><span style="color:black">RESGROUP:126A                 </span><span style="color:navy">mov     [word ptr es:bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], ds
</span><span style="color:black">RESGROUP:126E                 </span><span style="color:navy">sti
</span><span style="color:black">RESGROUP:126F                 </span><span style="color:navy">pop     bx
</span><span style="color:black">RESGROUP:1270                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:1271                 </span>assume es:nothing
<span style="color:black">RESGROUP:1271                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1271 </span>endp            SetVect
<span style="color:black">RESGROUP:1271
RESGROUP:1272
RESGROUP:1272 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1272
RESGROUP:1272
RESGROUP:1272 </span>proc            int21h near             <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1272                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:1273                 </span><span style="color:navy">push    bx
</span><span style="color:black">RESGROUP:1274                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">RESGROUP:1276                 </span><span style="color:navy">mov     es, bx          </span>; 0
<span style="color:black">RESGROUP:1278                 </span>assume es:RESGROUP
<span style="color:black">RESGROUP:1278                 </span><span style="color:navy">pop     bx
</span><span style="color:black">RESGROUP:1279                 </span><span style="color:navy">pushf                   </span>; Int 21h simulation (ES=0)
<span style="color:black">RESGROUP:127A                 </span><span style="color:navy">cli
</span><span style="color:black">RESGROUP:127B                 </span><span style="color:navy">call    [dword ptr es:</span><span style="color:green">84h</span><span style="color:navy">] </span>; call far [es:84h]
<span style="color:black">RESGROUP:127B                                         </span>; INT 21h handler
<span style="color:black">RESGROUP:1280                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:1281                 </span>assume es:nothing
<span style="color:black">RESGROUP:1281                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1281 </span>endp            int21h
<span style="color:black">RESGROUP:1281
</span><span style="color:maroon">RESGROUP:1282 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1282                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1283                 </span><span style="color:navy">add     sp, </span><span style="color:green">2
</span><span style="color:maroon">RESGROUP:1286                 </span><span style="color:navy">jmp     </span>LodCom1
<span style="color:black">RESGROUP:1289
RESGROUP:1289 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1289
RESGROUP:1289
RESGROUP:1289 </span>proc            AskEnd near             <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1289                 </span><span style="color:navy">mov     dx, offset </span>ENDBATMES
<span style="color:black">RESGROUP:128C                 </span><span style="color:navy">call    </span>RPrint
<span style="color:black">RESGROUP:128F                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0C01h       </span>; (STD_CON_INPUT_FLUSH&lt;&lt;8) + STD_CON_INPUT
<span style="color:black">RESGROUP:1292                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - CLEAR KEYBOARD BUFFER
<span style="color:black">RESGROUP:1292                                         </span>; AL must be 01h, 06h, 07h, 08h, or 0Ah.
<span style="color:black">RESGROUP:1294                 </span><span style="color:navy">call    </span>CharToUpper
<span style="color:black">RESGROUP:1297                 </span><span style="color:navy">cmp     al, [</span>NO_CHAR<span style="color:navy">]
</span><span style="color:black">RESGROUP:129B                 </span><span style="color:navy">jz      short </span><span style="color:gray">aeRet
</span><span style="color:black">RESGROUP:129D                 </span><span style="color:navy">cmp     al, [</span>YES_CHAR<span style="color:navy">]
</span><span style="color:black">RESGROUP:12A1                 </span><span style="color:navy">jnz     short </span>AskEnd
<span style="color:black">RESGROUP:12A3                 </span><span style="color:navy">stc
</span><span style="color:black">RESGROUP:12A4
RESGROUP:12A4 </span><span style="color:gray">aeRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:12A4                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:12A4 </span>endp            AskEnd
<span style="color:black">RESGROUP:12A4
</span><span style="color:maroon">RESGROUP:12A5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:12A5
RESGROUP:12A5 </span>DSKERR<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:12A5                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:12A6                 </span><span style="color:navy">pop     [</span>RStack<span style="color:navy">]        </span>; pop word [OldDS]
<span style="color:maroon">RESGROUP:12AA                 </span><span style="color:navy">sti
</span><span style="color:maroon">RESGROUP:12AB                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:12AC                 </span><span style="color:navy">push    si
</span><span style="color:maroon">RESGROUP:12AD                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">RESGROUP:12AE                 </span><span style="color:navy">push    di
</span><span style="color:maroon">RESGROUP:12AF                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">RESGROUP:12B0                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">RESGROUP:12B1                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:12B2                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:12B3                 </span>assume es:RESGROUP
<span style="color:maroon">RESGROUP:12B3                 </span><span style="color:navy">mov     ds, bp
</span><span style="color:maroon">RESGROUP:12B5                 </span><span style="color:navy">mov     ax, [si+</span><span style="color:#ff8000">4</span><span style="color:navy">]      </span>; [si+SYSDEV.ATT]
<span style="color:maroon">RESGROUP:12B8                 </span><span style="color:navy">mov     [es:</span>CDevAt<span style="color:navy">], ah
</span><span style="color:maroon">RESGROUP:12BD                 </span><span style="color:navy">mov     di, offset </span>DevName
<span style="color:maroon">RESGROUP:12C0                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">8
</span><span style="color:maroon">RESGROUP:12C3                 </span><span style="color:navy">add     si, </span><span style="color:green">10          </span>; SYSDEV.NAME
<span style="color:maroon">RESGROUP:12C6                 </span><span style="color:navy">cld
</span><span style="color:maroon">RESGROUP:12C7                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">RESGROUP:12C9                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">RESGROUP:12CA                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">RESGROUP:12CB                 </span><span style="color:navy">pop     di
</span><span style="color:maroon">RESGROUP:12CC                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:12CD                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:12CE                 </span><span style="color:navy">call    </span>SavHand
<span style="color:maroon">RESGROUP:12D1                 </span><span style="color:navy">push    dx
</span><span style="color:maroon">RESGROUP:12D2                 </span><span style="color:navy">call    </span>crlf
<span style="color:maroon">RESGROUP:12D5                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">RESGROUP:12D6                 </span><span style="color:navy">mov     [</span>Crit_Err_Info<span style="color:navy">], ah
</span><span style="color:maroon">RESGROUP:12DA                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">41h </span><span style="color:gray">; &#039;A&#039;
</span><span style="color:maroon">RESGROUP:12DC                 </span><span style="color:navy">mov     [</span>DrvLet<span style="color:navy">], al
</span><span style="color:maroon">RESGROUP:12DF                 </span><span style="color:navy">test    ah, </span><span style="color:green">80h
</span><span style="color:maroon">RESGROUP:12E2                 </span><span style="color:navy">jz      short </span>NoHardE
<span style="color:maroon">RESGROUP:12E4                 </span><span style="color:navy">test    [</span>CDevAt<span style="color:navy">], </span><span style="color:green">80h
</span><span style="color:maroon">RESGROUP:12E9                 </span><span style="color:navy">jnz     short </span>NoHardE
<span style="color:maroon">RESGROUP:12EB                 </span><span style="color:navy">jmp     </span>FatErr
<span style="color:maroon">RESGROUP:12EE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:12EE
RESGROUP:12EE </span>NoHardE<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:12EE                 </span><span style="color:navy">mov     si, offset </span>MREAD
<span style="color:maroon">RESGROUP:12F1                 </span><span style="color:navy">test    ah, </span><span style="color:green">1
</span><span style="color:maroon">RESGROUP:12F4                 </span><span style="color:navy">jz      short </span>SavMes
<span style="color:maroon">RESGROUP:12F6                 </span><span style="color:navy">mov     si, offset </span>MWRITE
<span style="color:maroon">RESGROUP:12F9
RESGROUP:12F9 </span>SavMes<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:12F9                 </span><span style="color:navy">mov     [</span>OldErrNo<span style="color:navy">], di
</span><span style="color:maroon">RESGROUP:12FD                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:12FE                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">RESGROUP:12FF                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">RESGROUP:1300                 </span><span style="color:navy">mov     ah, </span><span style="color:green">59h
</span><span style="color:maroon">RESGROUP:1302                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET EXTENDED ERROR CODE
<span style="color:maroon">RESGROUP:1302                                         </span>; BX = version code (0000h for DOS 3.x)
<span style="color:maroon">RESGROUP:1304                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">RESGROUP:1305                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">RESGROUP:1306                 </span><span style="color:navy">mov     [word ptr </span>NeedVol<span style="color:navy">], di
</span><span style="color:maroon">RESGROUP:130A                 </span><span style="color:navy">mov     [word ptr </span>NeedVol<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], es
</span><span style="color:maroon">RESGROUP:130E                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:130F                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:130F                 </span><span style="color:navy">mov     di, ax
</span><span style="color:maroon">RESGROUP:1311                 </span><span style="color:navy">sub     di, </span><span style="color:#ff8000">13h         </span>; ERROR_WRITE_PROTECT
<span style="color:maroon">RESGROUP:1314                 </span><span style="color:navy">jnb     short </span>HavCod
<span style="color:maroon">RESGROUP:1316                 </span><span style="color:navy">mov     di, </span><span style="color:#ff8000">0Ch         </span>; ERROR_GEN_FAILURE - ERROR_WRITE_PROTECT
<span style="color:maroon">RESGROUP:1319
RESGROUP:1319 </span>HavCod<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1319                 </span><span style="color:navy">mov     [</span>ErrType<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:131E                 </span><span style="color:navy">cmp     di, </span><span style="color:#ff8000">10h         </span>; ERROR_FCB_UNAVAILABLE - ERROR_WRITE_PROTECT
<span style="color:maroon">RESGROUP:1321                 </span><span style="color:navy">jz      short </span>SetStyle
<span style="color:maroon">RESGROUP:1323                 </span><span style="color:navy">cmp     di, </span><span style="color:#ff8000">11h         </span>; ERROR_SHARING_BUFFER_EXCEEDED - ERROR_WRITE_PROTECT
<span style="color:maroon">RESGROUP:1326                 </span><span style="color:navy">jnz     short </span>GotStyle
<span style="color:maroon">RESGROUP:1328
RESGROUP:1328 </span>SetStyle<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1328                 </span><span style="color:navy">mov     [</span>ErrType<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:132D
RESGROUP:132D </span>GotStyle<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:132D                 </span><span style="color:navy">mov     [</span>ErrCd_24<span style="color:navy">], di
</span><span style="color:maroon">RESGROUP:1331                 </span><span style="color:navy">cmp     di, </span><span style="color:#ff8000">14h         </span>; ERROR_HANDLE_DISK_FULL - ERROR_WRITE_PROTECT
<span style="color:maroon">RESGROUP:1334                 </span><span style="color:navy">jbe     short </span>NormalError
<span style="color:maroon">RESGROUP:1336                 </span><span style="color:navy">mov     di, ax
</span><span style="color:maroon">RESGROUP:1338                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">500h        </span>; is the redir there?
<span style="color:maroon">RESGROUP:133B                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; Multiplex - DOS 3+ CRITICAL ERROR HANDLER - INSTALLATION CHECK
<span style="color:maroon">RESGROUP:133B                                         </span>; Return: AL = 00h not installed, OK to install
<span style="color:maroon">RESGROUP:133B                                         </span>; 01h not installed, can&#039;t install
<span style="color:maroon">RESGROUP:133B                                         </span>; FFh installed
<span style="color:maroon">RESGROUP:133D                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:maroon">RESGROUP:133F                 </span><span style="color:navy">jnz     short </span>NoHandler ; no, go to NoHandler
<span style="color:maroon">RESGROUP:1341                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">RESGROUP:1342                 </span><span style="color:navy">mov     bx, di          </span>; get ErrType and ptr to error msg
<span style="color:maroon">RESGROUP:1344                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">501h
</span><span style="color:maroon">RESGROUP:1347                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; Multiplex - DOS 3+ CRITICAL ERROR HANDLER -
<span style="color:maroon">RESGROUP:1349                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">RESGROUP:134A                 </span><span style="color:navy">jb      short </span>NoHandler
<span style="color:maroon">RESGROUP:134C                 </span><span style="color:navy">mov     [</span>ErrType<span style="color:navy">], al
</span><span style="color:maroon">RESGROUP:134F                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:1350                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:1351                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1352                 </span><span style="color:navy">mov     dx, di
</span><span style="color:maroon">RESGROUP:1354                 </span><span style="color:navy">mov     cx, </span><span style="color:green">0FFFFh      </span>; find end of msg
<span style="color:maroon">RESGROUP:1357                 </span><span style="color:navy">xor     al, al
</span><span style="color:maroon">RESGROUP:1359                 </span><span style="color:navy">cld
</span><span style="color:maroon">RESGROUP:135A                 </span><span style="color:navy">repne scasb
</span><span style="color:maroon">RESGROUP:135C                 </span><span style="color:navy">mov     [byte ptr di-</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">24h </span><span style="color:gray">; &#039;$&#039;
</span><span style="color:maroon">RESGROUP:1360                 </span><span style="color:navy">mov     ah, </span><span style="color:green">9           </span>; STD_CON_STRING_OUTPUT ; print the message
<span style="color:maroon">RESGROUP:1362                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - PRINT STRING
<span style="color:maroon">RESGROUP:1362                                         </span>; DS:DX -&gt; string terminated by &quot;$&quot;
<span style="color:maroon">RESGROUP:1364                 </span><span style="color:navy">mov     [byte ptr di-</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; restore terminal byte
<span style="color:maroon">RESGROUP:1368                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1369                 </span><span style="color:navy">jmp     short </span>CheckErrType
<span style="color:maroon">RESGROUP:136B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:136B
RESGROUP:136B </span>NoHandler<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:136B                 </span><span style="color:navy">mov     [</span>ErrType<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1370                 </span><span style="color:navy">mov     di, [</span>OldErrNo<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1374                 </span><span style="color:navy">mov     [</span>ErrCd_24<span style="color:navy">], di
</span><span style="color:maroon">RESGROUP:1378
RESGROUP:1378 </span>NormalError<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1378                 </span><span style="color:navy">add     di, </span><span style="color:#ff8000">13h         </span>; ERROR_WRITE_PROTECT
<span style="color:maroon">RESGROUP:137B                 </span><span style="color:navy">xchg    di, dx
</span><span style="color:maroon">RESGROUP:137D                 </span><span style="color:navy">call    </span>RPrintCrit
<span style="color:maroon">RESGROUP:1380
RESGROUP:1380 </span>CheckErrType<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1380                 </span><span style="color:navy">cmp     [</span>ErrType<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1385                 </span><span style="color:navy">jz      short </span>ContOld
<span style="color:maroon">RESGROUP:1387                 </span><span style="color:navy">call    </span>crlf
<span style="color:maroon">RESGROUP:138A                 </span><span style="color:navy">jmp     short </span>Ask
<span style="color:maroon">RESGROUP:138C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:138C
RESGROUP:138C </span>ContOld<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:138C                 </span><span style="color:navy">inc     si
</span><span style="color:maroon">RESGROUP:138D                 </span><span style="color:navy">test    [</span>CDevAt<span style="color:navy">], </span><span style="color:green">80h   </span>; DEVTYP&gt;&gt;8
<span style="color:maroon">RESGROUP:1392                 </span><span style="color:navy">jz      short </span>BlkErr
<span style="color:maroon">RESGROUP:1394                 </span><span style="color:navy">mov     dx, offset </span>MDEVICE
<span style="color:maroon">RESGROUP:1397                 </span><span style="color:navy">mov     [</span>CharDevErrRw<span style="color:navy">], si
</span><span style="color:maroon">RESGROUP:139B                 </span><span style="color:navy">mov     si, offset </span>CharDevErrSubst
<span style="color:maroon">RESGROUP:139E                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:13A1                 </span><span style="color:navy">jmp     short </span>Ask
<span style="color:maroon">RESGROUP:13A3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:13A3
RESGROUP:13A3 </span>BlkErr<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:13A3                 </span><span style="color:navy">mov     dx, offset </span>MDRIVE
<span style="color:maroon">RESGROUP:13A6                 </span><span style="color:navy">mov     [</span>BlkDevErrRw<span style="color:navy">], si
</span><span style="color:maroon">RESGROUP:13AA                 </span><span style="color:navy">mov     si, offset </span>BlkDevErrSubst
<span style="color:maroon">RESGROUP:13AD                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:13B0                 </span><span style="color:navy">cmp     [</span>Loading<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:13B5                 </span><span style="color:navy">jz      short </span>Ask
<span style="color:maroon">RESGROUP:13B7                 </span><span style="color:navy">call    </span>RestHand
<span style="color:maroon">RESGROUP:13BA                 </span><span style="color:navy">jmp     </span>GetComDsk2
<span style="color:maroon">RESGROUP:13BD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:13BD
RESGROUP:13BD </span>Ask<span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:13BD                 </span><span style="color:navy">cmp     [</span>ErrCd_24<span style="color:navy">], </span><span style="color:#ff8000">0Fh
</span><span style="color:maroon">RESGROUP:13C2                 </span><span style="color:navy">jnz     short </span>Not15
<span style="color:maroon">RESGROUP:13C4                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">RESGROUP:13C5                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:13C6                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:13C7                 </span>assume es:RESGROUP
<span style="color:maroon">RESGROUP:13C7                 </span><span style="color:navy">lds     si, [</span>NeedVol<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:13CB                 </span><span style="color:navy">push    di
</span><span style="color:maroon">RESGROUP:13CC                 </span><span style="color:navy">mov     di, offset </span>VolName
<span style="color:maroon">RESGROUP:13CF                 </span><span style="color:navy">mov     cx, </span><span style="color:green">16
</span><span style="color:maroon">RESGROUP:13D2                 </span><span style="color:navy">cld
</span><span style="color:maroon">RESGROUP:13D3                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">RESGROUP:13D5                 </span><span style="color:navy">pop     di
</span><span style="color:maroon">RESGROUP:13D6                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:13D7                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:13D8                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">RESGROUP:13D9                 </span><span style="color:navy">mov     dx, offset </span>MVOLSERIAL
<span style="color:maroon">RESGROUP:13DC                 </span><span style="color:navy">mov     si, offset </span>NeedVolSubst
<span style="color:maroon">RESGROUP:13DF                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:13E2
RESGROUP:13E2 </span>Not15<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:13E2                 </span><span style="color:navy">mov     dx, offset </span>REQ_ABORT
<span style="color:maroon">RESGROUP:13E5                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:13E8                 </span><span style="color:navy">test    [</span>Crit_Err_Info<span style="color:navy">], </span><span style="color:green">10h </span>; RETRY_ALLOWED
<span style="color:maroon">RESGROUP:13ED                 </span><span style="color:navy">jz      short </span>Try_Ignore
<span style="color:maroon">RESGROUP:13EF                 </span><span style="color:navy">mov     dx, offset </span>REQ_RETRY
<span style="color:maroon">RESGROUP:13F2                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:13F5
RESGROUP:13F5 </span>Try_Ignore<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:13F5                 </span><span style="color:navy">test    [</span>Crit_Err_Info<span style="color:navy">], </span><span style="color:green">20h </span>; IGNORE_ALLOWED
<span style="color:maroon">RESGROUP:13FA                 </span><span style="color:navy">jz      short </span>Try_Fail
<span style="color:maroon">RESGROUP:13FC                 </span><span style="color:navy">mov     dx, offset </span>REQ_IGNORE
<span style="color:maroon">RESGROUP:13FF                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:1402
RESGROUP:1402 </span>Try_Fail<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1402                 </span><span style="color:navy">test    [</span>Crit_Err_Info<span style="color:navy">], </span><span style="color:green">8 </span>; FAIL_ALLOWED
<span style="color:maroon">RESGROUP:1407                 </span><span style="color:navy">jz      short </span>Term_Question
<span style="color:maroon">RESGROUP:1409                 </span><span style="color:navy">mov     dx, offset </span>REQ_FAIL
<span style="color:maroon">RESGROUP:140C                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:140F
RESGROUP:140F </span>Term_Question<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:140F                 </span><span style="color:navy">mov     dx, offset </span>REQ_END
<span style="color:maroon">RESGROUP:1412                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:1415                 </span><span style="color:navy">test    [</span>fFail<span style="color:navy">], </span><span style="color:green">0FFh   </span>; -1
<span style="color:maroon">RESGROUP:141A                 </span><span style="color:navy">jz      short </span>DoPrompt
<span style="color:maroon">RESGROUP:141C                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">3
</span><span style="color:maroon">RESGROUP:141E                 </span><span style="color:navy">jmp     </span>EExit
<span style="color:maroon">RESGROUP:1421 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1421
RESGROUP:1421 </span>DoPrompt<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1421                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0C01h       </span>; (STD_CON_INPUT_FLUSH&lt;&lt;8) + STD_CON_INPUT
<span style="color:maroon">RESGROUP:1424                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - CLEAR KEYBOARD BUFFER
<span style="color:maroon">RESGROUP:1424                                         </span>; AL must be 01h, 06h, 07h, 08h, or 0Ah.
<span style="color:maroon">RESGROUP:1426                 </span><span style="color:navy">call    </span>ITestKanj
<span style="color:maroon">RESGROUP:1429                 </span><span style="color:navy">jz      short </span>NotKanj
<span style="color:maroon">RESGROUP:142B                 </span><span style="color:navy">mov     ax, </span><span style="color:green">100h
</span><span style="color:maroon">RESGROUP:142E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - KEYBOARD INPUT
<span style="color:maroon">RESGROUP:142E                                         </span>; Return: AL = character read
<span style="color:maroon">RESGROUP:1430                 </span><span style="color:navy">call    </span>crlf
<span style="color:maroon">RESGROUP:1433                 </span><span style="color:navy">jmp     short </span>Ask
<span style="color:maroon">RESGROUP:1435 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1435
RESGROUP:1435 </span>NotKanj<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1435                 </span><span style="color:navy">call    </span>crlf
<span style="color:maroon">RESGROUP:1438                 </span><span style="color:navy">call    </span>CharToUpper
<span style="color:maroon">RESGROUP:143B                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:143D                 </span><span style="color:navy">test    [</span>Crit_Err_Info<span style="color:navy">], </span><span style="color:green">20h </span>; IGNORE_ALLOWED
<span style="color:maroon">RESGROUP:1442                 </span><span style="color:navy">jz      short </span>User_Retry
<span style="color:maroon">RESGROUP:1444                 </span><span style="color:navy">cmp     al, [</span>IGNORE_CHAR<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1448                 </span><span style="color:navy">jz      short </span>EExitJ
<span style="color:maroon">RESGROUP:144A
RESGROUP:144A </span>User_Retry<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:144A                 </span><span style="color:navy">inc     ah
</span><span style="color:maroon">RESGROUP:144C                 </span><span style="color:navy">test    [</span>Crit_Err_Info<span style="color:navy">], </span><span style="color:green">10h </span>; RETRY_ALLOWED
<span style="color:maroon">RESGROUP:1451                 </span><span style="color:navy">jz      short </span>User_Abort
<span style="color:maroon">RESGROUP:1453                 </span><span style="color:navy">cmp     al, [</span>RETRY_CHAR<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1457                 </span><span style="color:navy">jz      short </span>EExitJ
<span style="color:maroon">RESGROUP:1459
RESGROUP:1459 </span>User_Abort<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1459                 </span><span style="color:navy">inc     ah
</span><span style="color:maroon">RESGROUP:145B                 </span><span style="color:navy">cmp     al, [</span>ABORT_CHAR<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:145F                 </span><span style="color:navy">jz      short </span>Abort_Process
<span style="color:maroon">RESGROUP:1461                 </span><span style="color:navy">inc     ah
</span><span style="color:maroon">RESGROUP:1463                 </span><span style="color:navy">test    [</span>Crit_Err_Info<span style="color:navy">], </span><span style="color:green">8 </span>; FAIL_ALLOWED
<span style="color:maroon">RESGROUP:1468                 </span><span style="color:navy">jz      short </span>AskJ
<span style="color:maroon">RESGROUP:146A                 </span><span style="color:navy">cmp     al, [</span>FAIL_CHAR<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:146E                 </span><span style="color:navy">jz      short </span>EExitJ
<span style="color:maroon">RESGROUP:1470
RESGROUP:1470 </span>AskJ<span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1470                 </span><span style="color:navy">jmp     </span>Ask
<span style="color:maroon">RESGROUP:1473 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1473
RESGROUP:1473 </span>EExitJ<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1473                 </span><span style="color:navy">jmp     short </span>EExit
<span style="color:maroon">RESGROUP:1475 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1475
RESGROUP:1475 </span>Abort_Process<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1475                 </span><span style="color:navy">test    [</span>InitFlag<span style="color:navy">], </span><span style="color:green">1   </span>; INITINIT
<span style="color:maroon">RESGROUP:147A                 </span><span style="color:navy">jz      short </span>AbortCont
<span style="color:maroon">RESGROUP:147C                 </span><span style="color:navy">cmp     [</span>PermCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1481                 </span><span style="color:navy">jz      short </span>JustExit
<span style="color:maroon">RESGROUP:1483                 </span><span style="color:navy">mov     dx, offset </span>PATRICIDE
<span style="color:maroon">RESGROUP:1486                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:1489
RESGROUP:1489 </span>DeadInTheWater<span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1489                 </span><span style="color:navy">jmp     short </span>DeadInTheWater
<span style="color:maroon">RESGROUP:148B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:148B
RESGROUP:148B </span>JustExit<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:148B                 </span><span style="color:navy">mov     ax, [</span>Parent<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:148E                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">16h</span><span style="color:navy">], ax    </span>; [PDB.PARENT_PID]
<span style="color:maroon">RESGROUP:1491                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4CFFh       </span>; (EXIT&lt;&lt;8) | 255
<span style="color:maroon">RESGROUP:1494                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - QUIT WITH EXIT CODE (EXIT)
<span style="color:maroon">RESGROUP:1494                                         </span>; AL = exit code
<span style="color:maroon">RESGROUP:1496 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1496
RESGROUP:1496 </span>AbortCont<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1496                 </span><span style="color:navy">test    [</span>In_Batch<span style="color:navy">], </span><span style="color:green">0FFh </span>; -1
<span style="color:maroon">RESGROUP:149B                 </span><span style="color:navy">jz      short </span>Not_Batch_Abort
<span style="color:maroon">RESGROUP:149D                 </span><span style="color:navy">mov     [</span>Batch_Abort<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:14A2
RESGROUP:14A2 </span>Not_Batch_Abort<span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:14A2                 </span><span style="color:navy">mov     dl, [</span>PipeFlag<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:14A6                 </span><span style="color:navy">call    </span>ResPipeOff
<span style="color:maroon">RESGROUP:14A9                 </span><span style="color:navy">or      dl, dl
</span><span style="color:maroon">RESGROUP:14AB                 </span><span style="color:navy">jz      short </span>CheckForA
<span style="color:maroon">RESGROUP:14AD                 </span><span style="color:navy">cmp     [</span>SingleCom<span style="color:navy">], </span><span style="color:#ff8000">0  </span>; word
<span style="color:maroon">RESGROUP:14B2                 </span><span style="color:navy">jz      short </span>CheckForA
<span style="color:maroon">RESGROUP:14B4                 </span><span style="color:navy">mov     [</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:maroon">RESGROUP:14BA
RESGROUP:14BA </span>CheckForA<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:14BA                 </span><span style="color:navy">cmp     [</span>ErrCd_24<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; word ; write protect?
<span style="color:maroon">RESGROUP:14BF                 </span><span style="color:navy">jz      short </span>abortfor
<span style="color:maroon">RESGROUP:14C1                 </span><span style="color:navy">cmp     [</span>ErrCd_24<span style="color:navy">], </span><span style="color:#ff8000">2   </span>; drive not ready?
<span style="color:maroon">RESGROUP:14C6                 </span><span style="color:navy">jnz     short </span>EExit     ; don&#039;t abort the FOR
<span style="color:maroon">RESGROUP:14C8
RESGROUP:14C8 </span>abortfor<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:14C8                 </span><span style="color:navy">mov     [</span>ForFlag<span style="color:navy">], </span><span style="color:#ff8000">0    </span>; abort a FOR in progress
<span style="color:maroon">RESGROUP:14CD                 </span><span style="color:navy">cmp     [</span>SingleCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:14D2                 </span><span style="color:navy">jz      short </span>EExit
<span style="color:maroon">RESGROUP:14D4                 </span><span style="color:navy">mov     [</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:maroon">RESGROUP:14DA
RESGROUP:14DA </span>EExit<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:14DA                 </span><span style="color:navy">mov     al, ah
</span><span style="color:maroon">RESGROUP:14DC                 </span><span style="color:navy">mov     dx, di
</span><span style="color:maroon">RESGROUP:14DE
RESGROUP:14DE </span>RestHd<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:14DE                 </span><span style="color:navy">call    </span>RestHand
<span style="color:maroon">RESGROUP:14E1                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">RESGROUP:14E2                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">RESGROUP:14E3                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:14E4                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:14E4                 </span><span style="color:navy">mov     ds, [</span>RStack<span style="color:navy">]    </span>; mov ds,[OldDS]
<span style="color:maroon">RESGROUP:14E8                 </span><span style="color:navy">iret
</span><span style="color:maroon">RESGROUP:14E9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:14E9
RESGROUP:14E9 </span>FatErr<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:14E9                 </span><span style="color:navy">mov     dx, offset </span>BADFATMSG
<span style="color:maroon">RESGROUP:14EC                 </span><span style="color:navy">mov     si, offset </span>BadFatSubst
<span style="color:maroon">RESGROUP:14EF                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:14F2                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">2           </span>; abort
<span style="color:maroon">RESGROUP:14F4                 </span><span style="color:navy">jmp     short </span>RestHd
<span style="color:black">RESGROUP:14F6
RESGROUP:14F6 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:14F6
RESGROUP:14F6
RESGROUP:14F6 </span>proc            crlf near               <span style="color:green">; ...
</span><span style="color:black">RESGROUP:14F6                 </span><span style="color:navy">mov     dx, offset </span>NEWLINE
<span style="color:black">RESGROUP:14F6 </span>endp            crlf
<span style="color:black">RESGROUP:14F6
RESGROUP:14F9
RESGROUP:14F9 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:14F9
RESGROUP:14F9
RESGROUP:14F9 </span>proc            RPrint near             <span style="color:green">; ...
</span><span style="color:black">RESGROUP:14F9                 </span><span style="color:navy">push    si
</span><span style="color:black">RESGROUP:14FA                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:14FB                 </span><span style="color:navy">push    bx
</span><span style="color:black">RESGROUP:14FC                 </span><span style="color:navy">push    cx
</span><span style="color:black">RESGROUP:14FD                 </span><span style="color:navy">push    dx
</span><span style="color:black">RESGROUP:14FE                 </span><span style="color:navy">mov     bx, si
</span><span style="color:black">RESGROUP:1500                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">RESGROUP:1502                 </span><span style="color:navy">lodsb
</span><span style="color:black">RESGROUP:1503                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">RESGROUP:1505                 </span><span style="color:navy">mov     cl, al
</span><span style="color:black">RESGROUP:1507                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">rpRet
</span><span style="color:black">RESGROUP:1509                 </span><span style="color:navy">call    </span>RDispMsg
<span style="color:black">RESGROUP:150C
RESGROUP:150C </span><span style="color:gray">rpRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:150C                 </span><span style="color:navy">pop     dx
</span><span style="color:black">RESGROUP:150D                 </span><span style="color:navy">pop     cx
</span><span style="color:black">RESGROUP:150E                 </span><span style="color:navy">pop     bx
</span><span style="color:black">RESGROUP:150F                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:1510                 </span><span style="color:navy">pop     si
</span><span style="color:black">RESGROUP:1511                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1511 </span>endp            RPrint
<span style="color:black">RESGROUP:1511
RESGROUP:1512
RESGROUP:1512 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1512
RESGROUP:1512
RESGROUP:1512 </span>proc            RPrintCrit near         <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1512                 </span><span style="color:navy">push    dx
</span><span style="color:black">RESGROUP:1513                 </span><span style="color:navy">xchg    bx, dx
</span><span style="color:black">RESGROUP:1515                 </span><span style="color:navy">sub     bx, </span><span style="color:green">19
</span><span style="color:black">RESGROUP:1518                 </span><span style="color:navy">shl     bx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:151A                 </span><span style="color:navy">mov     bx, [</span>CRITMSGPTRS<span style="color:navy">+bx]
</span><span style="color:black">RESGROUP:151E                 </span><span style="color:navy">xchg    bx, dx
</span><span style="color:black">RESGROUP:1520                 </span><span style="color:navy">call    </span>RPrint
<span style="color:black">RESGROUP:1523                 </span><span style="color:navy">pop     dx
</span><span style="color:black">RESGROUP:1524                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1524 </span>endp            RPrintCrit
<span style="color:black">RESGROUP:1524
RESGROUP:1525
RESGROUP:1525 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1525
RESGROUP:1525
RESGROUP:1525 </span>proc            RDispMsg near           <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1525                 </span><span style="color:navy">lodsb
</span><span style="color:black">RESGROUP:1526                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">%&#039;         </span>; 25h
<span style="color:black">RESGROUP:1528                 </span><span style="color:navy">jnz     short </span><span style="color:gray">rdOutChar </span>; not a substitution
<span style="color:black">RESGROUP:152A                 </span><span style="color:navy">mov     dl, [si]
</span><span style="color:black">RESGROUP:152C                 </span><span style="color:navy">sub     dl, &#039;</span><span style="color:green">1&#039;
</span><span style="color:black">RESGROUP:152F                 </span><span style="color:navy">cmp     dl, </span><span style="color:#ff8000">9
</span><span style="color:black">RESGROUP:1532                 </span><span style="color:navy">jnb     short </span><span style="color:gray">rdOutChar </span>; not a substitution
<span style="color:black">RESGROUP:1534                 </span><span style="color:navy">call    </span>SubstMsg
<span style="color:black">RESGROUP:1537                 </span><span style="color:navy">inc     si
</span><span style="color:black">RESGROUP:1538                 </span><span style="color:navy">dec     cx
</span><span style="color:black">RESGROUP:1539                 </span><span style="color:navy">jmp     short </span><span style="color:gray">rdCharDone
</span><span style="color:black">RESGROUP:153B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:153B
RESGROUP:153B </span><span style="color:gray">rdOutChar</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:153B                 </span><span style="color:navy">mov     dl, al
</span><span style="color:black">RESGROUP:153D                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2
</span><span style="color:black">RESGROUP:153F                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - DISPLAY OUTPUT
<span style="color:black">RESGROUP:153F                                         </span>; DL = character to send to standard output
<span style="color:black">RESGROUP:1541
RESGROUP:1541 </span><span style="color:gray">rdCharDone</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1541                 </span><span style="color:navy">loop    </span>RDispMsg
<span style="color:black">RESGROUP:1543                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1543 </span>endp            RDispMsg
<span style="color:black">RESGROUP:1543
RESGROUP:1544
RESGROUP:1544 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1544
RESGROUP:1544
RESGROUP:1544 </span>proc            SubstMsg near           <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1544                 </span><span style="color:navy">push    bx
</span><span style="color:black">RESGROUP:1545                 </span><span style="color:navy">push    cx
</span><span style="color:black">RESGROUP:1546                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3
</span><span style="color:black">RESGROUP:1548                 </span><span style="color:navy">mul     dl
</span><span style="color:black">RESGROUP:154A                 </span><span style="color:navy">add     bx, ax
</span><span style="color:black">RESGROUP:154C                 </span><span style="color:navy">mov     al, [bx]        </span>; [bx].SubstType
<span style="color:black">RESGROUP:154E                 </span><span style="color:navy">mov     bx, [bx+</span><span style="color:#ff8000">1</span><span style="color:navy">]      </span>; [bx].SubstPtr
<span style="color:black">RESGROUP:1551                 </span><span style="color:navy">dec     al
</span><span style="color:black">RESGROUP:1553                 </span><span style="color:navy">jz      short </span><span style="color:gray">smChar
</span><span style="color:black">RESGROUP:1555                 </span><span style="color:navy">dec     al
</span><span style="color:black">RESGROUP:1557                 </span><span style="color:navy">jz      short </span><span style="color:gray">smStr
</span><span style="color:black">RESGROUP:1559                 </span><span style="color:navy">mov     ax, [bx]
</span><span style="color:black">RESGROUP:155B                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">4
</span><span style="color:black">RESGROUP:155E
RESGROUP:155E </span><span style="color:gray">smDigit</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:155E                 </span><span style="color:navy">rol     ax, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:1560                 </span><span style="color:navy">rol     ax, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:1562                 </span><span style="color:navy">rol     ax, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:1564                 </span><span style="color:navy">rol     ax, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:1566                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:1567                 </span><span style="color:navy">and     al, </span><span style="color:green">0Fh
</span><span style="color:black">RESGROUP:1569                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">30h </span><span style="color:gray">; &#039;0&#039;
</span><span style="color:black">RESGROUP:156B                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">39h </span><span style="color:gray">; &#039;9&#039;
</span><span style="color:black">RESGROUP:156D                 </span><span style="color:navy">jbe     short </span><span style="color:gray">smDigit09
</span><span style="color:black">RESGROUP:156F                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">7           </span>; (&#039;A&#039; - &#039;0&#039;) - 10
<span style="color:black">RESGROUP:1571
RESGROUP:1571 </span><span style="color:gray">smDigit09</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1571                 </span><span style="color:navy">mov     dl, al
</span><span style="color:black">RESGROUP:1573                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2
</span><span style="color:black">RESGROUP:1575                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - DISPLAY OUTPUT
<span style="color:black">RESGROUP:1575                                         </span>; DL = character to send to standard output
<span style="color:black">RESGROUP:1577                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:1578                 </span><span style="color:navy">loop    </span><span style="color:gray">smDigit
</span><span style="color:black">RESGROUP:157A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">smRet
</span><span style="color:black">RESGROUP:157C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:157C
RESGROUP:157C </span><span style="color:gray">smChar</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:157C                 </span><span style="color:navy">mov     dl, [bx]
</span><span style="color:black">RESGROUP:157E                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2
</span><span style="color:black">RESGROUP:1580                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - DISPLAY OUTPUT
<span style="color:black">RESGROUP:1580                                         </span>; DL = character to send to standard output
<span style="color:black">RESGROUP:1582                 </span><span style="color:navy">jmp     short </span><span style="color:gray">smRet
</span><span style="color:black">RESGROUP:1584 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:1584
RESGROUP:1584 </span><span style="color:gray">smStr</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1584                 </span><span style="color:navy">mov     dl, [bx]
</span><span style="color:black">RESGROUP:1586                 </span><span style="color:navy">or      dl, dl
</span><span style="color:black">RESGROUP:1588                 </span><span style="color:navy">jz      short </span><span style="color:gray">smRet
</span><span style="color:black">RESGROUP:158A                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2
</span><span style="color:black">RESGROUP:158C                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - DISPLAY OUTPUT
<span style="color:black">RESGROUP:158C                                         </span>; DL = character to send to standard output
<span style="color:black">RESGROUP:158E                 </span><span style="color:navy">inc     bx
</span><span style="color:black">RESGROUP:158F                 </span><span style="color:navy">jmp     short </span><span style="color:gray">smStr
</span><span style="color:black">RESGROUP:1591 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:1591
RESGROUP:1591 </span><span style="color:gray">smRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1591                 </span><span style="color:navy">pop     cx
</span><span style="color:black">RESGROUP:1592                 </span><span style="color:navy">pop     bx
</span><span style="color:black">RESGROUP:1593                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1593 </span>endp            SubstMsg
<span style="color:black">RESGROUP:1593
RESGROUP:1594
RESGROUP:1594 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1594
RESGROUP:1594
RESGROUP:1594 </span>proc            CharToUpper near        <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1594                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:1595                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1213h
</span><span style="color:black">RESGROUP:1598                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; Multiplex - DOS 3+ internal - UPPERCASE CHARACTER
<span style="color:black">RESGROUP:1598                                         </span>; STACK: WORD character to convert to uppercase
<span style="color:black">RESGROUP:1598                                         </span>; Return: AL = uppercase character
<span style="color:black">RESGROUP:1598                                         </span>; STACK unchanged
<span style="color:black">RESGROUP:159A                 </span><span style="color:navy">inc     sp
</span><span style="color:black">RESGROUP:159B                 </span><span style="color:navy">inc     sp
</span><span style="color:black">RESGROUP:159C                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:159C </span>endp            CharToUpper
<span style="color:black">RESGROUP:159C
RESGROUP:159D
RESGROUP:159D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:159D
RESGROUP:159D
RESGROUP:159D </span>proc            ITestKanj near          <span style="color:green">; ...
</span><span style="color:black">RESGROUP:159D                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:159E                 </span><span style="color:navy">push    si
</span><span style="color:black">RESGROUP:159F                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:15A0                 </span><span style="color:navy">lds     si, [</span>Dbcs_Vector_Addr<span style="color:navy">]
</span><span style="color:black">RESGROUP:15A4
RESGROUP:15A4 </span><span style="color:gray">ktLop</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:15A4                 </span><span style="color:navy">cmp     [word ptr si], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:15A7                 </span><span style="color:navy">jz      short </span><span style="color:gray">NotLead
</span><span style="color:black">RESGROUP:15A9                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:15AA                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:15AB                 </span><span style="color:navy">cmp     al, [si]
</span><span style="color:black">RESGROUP:15AD                 </span><span style="color:navy">jb      short </span><span style="color:gray">NotLead
</span><span style="color:black">RESGROUP:15AF                 </span><span style="color:navy">inc     si
</span><span style="color:black">RESGROUP:15B0                 </span><span style="color:navy">cmp     al, [si]
</span><span style="color:black">RESGROUP:15B2                 </span><span style="color:navy">jbe     short </span><span style="color:gray">IsLead
</span><span style="color:black">RESGROUP:15B4                 </span><span style="color:navy">inc     si
</span><span style="color:black">RESGROUP:15B5                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ktLop
</span><span style="color:black">RESGROUP:15B7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:15B7
RESGROUP:15B7 </span><span style="color:gray">NotLead</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:15B7                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">RESGROUP:15B9                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ktRet
</span><span style="color:black">RESGROUP:15BB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:15BB
RESGROUP:15BB </span><span style="color:gray">IsLead</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:15BB                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">RESGROUP:15BD                 </span><span style="color:navy">inc     ax
</span><span style="color:black">RESGROUP:15BE
RESGROUP:15BE </span><span style="color:gray">ktRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:15BE                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:15BF                 </span><span style="color:navy">pop     si
</span><span style="color:black">RESGROUP:15C0                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:15C1                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:15C1 </span>endp            ITestKanj
<span style="color:black">RESGROUP:15C1
</span><span style="color:maroon">RESGROUP:15C2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:15C2
RESGROUP:15C2 </span>MsgInt2fHandler<span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:15C2                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:15C3                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">122Eh       </span>; (MULTDOS&lt;&lt;8)|MESSAGE_2F
<span style="color:maroon">RESGROUP:15C6                 </span><span style="color:navy">jz      short </span>miOurs
<span style="color:maroon">RESGROUP:15C8                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">5500h       </span>; GET_COMMAND_STATE
<span style="color:maroon">RESGROUP:15CB                 </span><span style="color:navy">jz      short </span>fcOurs
<span style="color:maroon">RESGROUP:15CD                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">RESGROUP:15CE                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">RESGROUP:15CF                 </span><span style="color:navy">push    bp
</span><span style="color:maroon">RESGROUP:15D0                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">RESGROUP:15D1                 </span><span style="color:navy">mov     bp, sp
</span><span style="color:maroon">RESGROUP:15D3                 </span><span style="color:navy">mov     ax, [bp+</span><span style="color:#ff8000">8</span><span style="color:navy">]
</span><span style="color:maroon">RESGROUP:15D6                 </span><span style="color:navy">mov     [bp+</span><span style="color:#ff8000">4</span><span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:15D9                 </span><span style="color:navy">mov     ax, [</span>Int2fHandler<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">]
</span><span style="color:maroon">RESGROUP:15DC                 </span><span style="color:navy">mov     [bp+</span><span style="color:#ff8000">8</span><span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:15DF                 </span><span style="color:navy">mov     ax, [</span>Int2fHandler<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:15E2                 </span><span style="color:navy">mov     [bp+</span><span style="color:#ff8000">6</span><span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:15E5                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">RESGROUP:15E6                 </span><span style="color:navy">pop     bp
</span><span style="color:maroon">RESGROUP:15E7                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:15E8                 </span><span style="color:navy">retf
</span><span style="color:maroon">RESGROUP:15E9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:15E9
RESGROUP:15E9 </span>fcOurs<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:15E9                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">RESGROUP:15EA                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:15EB                 </span><span style="color:navy">mov     si, offset </span>Int2f_Entry
<span style="color:maroon">RESGROUP:15EE                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:maroon">RESGROUP:15F0                 </span><span style="color:navy">jmp     short </span>miRet
<span style="color:maroon">RESGROUP:15F2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:15F2
RESGROUP:15F2 </span>miOurs<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:15F2                 </span><span style="color:navy">test    dl, </span><span style="color:green">1
</span><span style="color:maroon">RESGROUP:15F5                 </span><span style="color:navy">jnz     short </span>miRet
<span style="color:maroon">RESGROUP:15F7                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">RESGROUP:15F8                 </span><span style="color:navy">mov     bx, dx
</span><span style="color:maroon">RESGROUP:15FA                 </span><span style="color:navy">xor     bh, bh
</span><span style="color:maroon">RESGROUP:15FC                 </span><span style="color:navy">shl     bx, </span><span style="color:green">1
</span><span style="color:maroon">RESGROUP:15FE                 </span><span style="color:navy">les     di, [</span>MsgPtrLists<span style="color:navy">+bx]
</span><span style="color:maroon">RESGROUP:1602                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">RESGROUP:1603
RESGROUP:1603 </span>miRet<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1603                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1604                 </span><span style="color:navy">iret
</span><span style="color:maroon">RESGROUP:1605 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1605
RESGROUP:1605 </span>MsgRetriever<span style="color:navy">:
</span><span style="color:maroon">RESGROUP:1605                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1606                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">RESGROUP:1607                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">RESGROUP:1608                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">RESGROUP:1609                 </span><span style="color:navy">push    dx
</span><span style="color:maroon">RESGROUP:160A                 </span><span style="color:navy">push    si
</span><span style="color:maroon">RESGROUP:160B                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:160C                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:160D                 </span>assume es:RESGROUP
<span style="color:maroon">RESGROUP:160D                 </span><span style="color:navy">mov     bx, </span><span style="color:green">11          </span>; NUMPARSMSGS
<span style="color:maroon">RESGROUP:1610                 </span><span style="color:navy">cmp     di, offset </span>PARSMSGPTRS ; DATARES:ParsMsgPtrs
<span style="color:maroon">RESGROUP:1614                 </span><span style="color:navy">jz      short </span>chkmsgnum
<span style="color:maroon">RESGROUP:1616                 </span><span style="color:navy">mov     bx, </span><span style="color:green">90          </span>; NUMEXTMSGS
<span style="color:maroon">RESGROUP:1619
RESGROUP:1619 </span>chkmsgnum<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1619                 </span><span style="color:navy">cmp     bx, ax
</span><span style="color:maroon">RESGROUP:161B                 </span><span style="color:navy">jb      short </span>mrRet
<span style="color:maroon">RESGROUP:161D                 </span><span style="color:navy">dec     ax
</span><span style="color:maroon">RESGROUP:161E                 </span><span style="color:navy">shl     ax, </span><span style="color:green">1
</span><span style="color:maroon">RESGROUP:1620                 </span><span style="color:navy">add     di, ax
</span><span style="color:maroon">RESGROUP:1622                 </span><span style="color:navy">cmp     di, [</span>ResMsgEnd<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1626                 </span><span style="color:navy">jb      short </span>mrInMem
<span style="color:maroon">RESGROUP:1628                 </span><span style="color:navy">mov     si, offset </span>ComSpec ; DATARES:ComSpec
<span style="color:maroon">RESGROUP:162B                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:162E                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">2000h       </span>; INT_24_ERROR
<span style="color:maroon">RESGROUP:1631                 </span><span style="color:navy">mov     ax, </span><span style="color:green">6C00h       </span>; ExtOpen shl 8
<span style="color:maroon">RESGROUP:1634                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 4.0 - EXTENDED OPEN/CREATE
<span style="color:maroon">RESGROUP:1634                                         </span>; BL = open mode as in AL for normal open (INT 21h/AH=3Dh)
<span style="color:maroon">RESGROUP:1634                                         </span>; BH = flags, CX = create attribute, DL = action if file exists/does not exists
<span style="color:maroon">RESGROUP:1634                                         </span>; DH = 00h (reserved), DS:SI -&gt; ASCIZ file name
<span style="color:maroon">RESGROUP:1636                 </span><span style="color:navy">jb      short </span>mrRet
<span style="color:maroon">RESGROUP:1638                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:maroon">RESGROUP:163A                 </span><span style="color:navy">mov     dx, di
</span><span style="color:maroon">RESGROUP:163C                 </span><span style="color:navy">xor     si, si
</span><span style="color:maroon">RESGROUP:163E
RESGROUP:163E </span>mrRead<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:163E                 </span><span style="color:navy">sub     dx, </span><span style="color:#ff8000">100h
</span><span style="color:maroon">RESGROUP:1642                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:maroon">RESGROUP:1644                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4200h
</span><span style="color:maroon">RESGROUP:1647                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
<span style="color:maroon">RESGROUP:1647                                         </span>; AL = method: offset from beginning of file
<span style="color:maroon">RESGROUP:1649                 </span><span style="color:navy">jb      short </span>mrCloseFile
<span style="color:maroon">RESGROUP:164B                 </span><span style="color:navy">mov     dx, offset </span>MsgBuffer
<span style="color:maroon">RESGROUP:164E                 </span><span style="color:navy">mov     cx, </span><span style="color:green">64
</span><span style="color:maroon">RESGROUP:1651                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Fh         </span>; READ
<span style="color:maroon">RESGROUP:1653                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - READ FROM FILE WITH HANDLE
<span style="color:maroon">RESGROUP:1653                                         </span>; BX = file handle, CX = number of bytes to read
<span style="color:maroon">RESGROUP:1653                                         </span>; DS:DX -&gt; buffer
<span style="color:maroon">RESGROUP:1655                 </span><span style="color:navy">jb      short </span>mrCloseFile
<span style="color:maroon">RESGROUP:1657                 </span><span style="color:navy">or      si, si
</span><span style="color:maroon">RESGROUP:1659                 </span><span style="color:navy">jnz     short </span>mrCloseFile
<span style="color:maroon">RESGROUP:165B                 </span><span style="color:navy">inc     si
</span><span style="color:maroon">RESGROUP:165C                 </span><span style="color:navy">mov     dx, [word ptr </span>MsgBuffer<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1660                 </span><span style="color:navy">or      dx, dx
</span><span style="color:maroon">RESGROUP:1662                 </span><span style="color:navy">jnz     short </span>mrRead
<span style="color:maroon">RESGROUP:1664                 </span><span style="color:navy">stc
</span><span style="color:maroon">RESGROUP:1665
RESGROUP:1665 </span>mrCloseFile<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1665                 </span><span style="color:navy">pushf
</span><span style="color:maroon">RESGROUP:1666                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh         </span>; CLOSE
<span style="color:maroon">RESGROUP:1668                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:maroon">RESGROUP:1668                                         </span>; BX = file handle
<span style="color:maroon">RESGROUP:166A                 </span><span style="color:navy">popf
</span><span style="color:maroon">RESGROUP:166B                 </span><span style="color:navy">mov     di, dx
</span><span style="color:maroon">RESGROUP:166D                 </span><span style="color:navy">jmp     short </span>mrRet
<span style="color:maroon">RESGROUP:166F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:166F
RESGROUP:166F </span>mrInMem<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:166F                 </span><span style="color:navy">mov     di, [es:di]
</span><span style="color:maroon">RESGROUP:1672                 </span><span style="color:navy">or      di, di
</span><span style="color:maroon">RESGROUP:1674                 </span><span style="color:navy">jnz     short </span>mrRet
<span style="color:maroon">RESGROUP:1676                 </span><span style="color:navy">stc
</span><span style="color:maroon">RESGROUP:1677
RESGROUP:1677 </span>mrRet<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1677                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">RESGROUP:1678                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">RESGROUP:1679                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">RESGROUP:167A                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">RESGROUP:167B                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">RESGROUP:167C                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:167D                 </span><span style="color:navy">retf
</span><span style="color:black">RESGROUP:167E
RESGROUP:167E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:167E
RESGROUP:167E
RESGROUP:167E </span>proc            Lh_OffUnlink far
<span style="color:black">RESGROUP:167E                 </span><span style="color:navy">mov     ch, al
</span><span style="color:black">RESGROUP:1680                 </span><span style="color:navy">mov     cl, al
</span><span style="color:black">RESGROUP:1682                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5800h       </span>; (ALLOCOPER&lt;&lt;8)
<span style="color:black">RESGROUP:1685                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">RESGROUP:1685                                         </span>; AL = function code: get allocation strategy
<span style="color:black">RESGROUP:1687                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">RESGROUP:1689                 </span><span style="color:navy">ror     cl, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:168B                 </span><span style="color:navy">and     cl, </span><span style="color:green">80h
</span><span style="color:black">RESGROUP:168E                 </span><span style="color:navy">and     bl, </span><span style="color:green">7Fh
</span><span style="color:black">RESGROUP:1691                 </span><span style="color:navy">or      bl, cl
</span><span style="color:black">RESGROUP:1693                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5801h       </span>; (ALLOCOPER&lt;&lt;8)|1
<span style="color:black">RESGROUP:1696                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">RESGROUP:1696                                         </span>; AL = function code: set allocation strategy
<span style="color:black">RESGROUP:1698                 </span><span style="color:navy">mov     bl, ch
</span><span style="color:black">RESGROUP:169A                 </span><span style="color:navy">shr     bl, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:169C                 </span><span style="color:navy">xor     bh, bh
</span><span style="color:black">RESGROUP:169E                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5803h       </span>; (ALLOCOPER&lt;&lt;8)|3
<span style="color:black">RESGROUP:16A1                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">RESGROUP:16A1                                         </span>; AL = function code: (DOS 5beta) set UMB link state
<span style="color:black">RESGROUP:16A3                 </span><span style="color:navy">retf
</span><span style="color:black">RESGROUP:16A3 </span>endp            Lh_OffUnlink
<span style="color:black">RESGROUP:16A3
RESGROUP:16A3 </span><span style="color:gray">; ---------------------------------------------------------------------------
RESGROUP:16A4 </span>CODERES_ends    <span style="color:navy">db </span><span style="color:#008040">12 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span>; times (((EndCode+15)&gt;&gt;4)&lt;&lt;4)-EndCode db 0
<span style="color:maroon">RESGROUP:16B0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:16B0
RESGROUP:16B0 </span>ConProc<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:16B0                 </span><span style="color:navy">mov     sp, offset </span>RStack ; 637h
<span style="color:maroon">RESGROUP:16B3                 </span><span style="color:navy">mov     ah, </span><span style="color:green">50h
</span><span style="color:maroon">RESGROUP:16B5                 </span><span style="color:navy">mov     bx, es
</span><span style="color:maroon">RESGROUP:16B7                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ internal - SET PSP SEGMENT
<span style="color:maroon">RESGROUP:16B7                                         </span>; BX = segment address of new PSP
<span style="color:maroon">RESGROUP:16B9                 </span><span style="color:navy">mov     ax, </span><span style="color:green">3000h
</span><span style="color:maroon">RESGROUP:16BC                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - GET DOS VERSION
<span style="color:maroon">RESGROUP:16BC                                         </span>; Return: AL = major version number (00h for DOS 1.x)
<span style="color:maroon">RESGROUP:16BE                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0A07h       </span>; EXPECTED_VERSION
<span style="color:maroon">RESGROUP:16C1                 </span><span style="color:navy">jz      short </span>okdos
<span style="color:maroon">RESGROUP:16C3                 </span><span style="color:navy">mov     dx, offset </span>BADVERMSG
<span style="color:maroon">RESGROUP:16C6                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:16C9                 </span><span style="color:navy">mov     ax, es
</span><span style="color:maroon">RESGROUP:16CB                 </span><span style="color:navy">cmp     [es:</span><span style="color:green">16h</span><span style="color:navy">], ax    </span>; PDB_Parent_Pid
<span style="color:maroon">RESGROUP:16D0
RESGROUP:16D0 </span>Here<span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:16D0                 </span><span style="color:navy">jz      short </span>Here
<span style="color:maroon">RESGROUP:16D2                 </span><span style="color:navy">int     </span><span style="color:green">20h             </span>; DOS - PROGRAM TERMINATION
<span style="color:maroon">RESGROUP:16D2                                         </span>; returns to DOS--identical to INT 21/AH=00h
<span style="color:maroon">RESGROUP:16D4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:16D4
RESGROUP:16D4 </span>okdos<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:16D4                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">289Fh       </span>; TranStart+15
<span style="color:maroon">RESGROUP:16D7                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:maroon">RESGROUP:16D9                 </span><span style="color:navy">shr     dx, cl
</span><span style="color:maroon">RESGROUP:16DB                 </span><span style="color:navy">mov     ax, cs
</span><span style="color:maroon">RESGROUP:16DD                 </span><span style="color:navy">add     ax, dx
</span><span style="color:maroon">RESGROUP:16DF                 </span><span style="color:navy">mov     [</span>InitEnd<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:16E2                 </span><span style="color:navy">call    </span>CheckHelp
<span style="color:maroon">RESGROUP:16E5                 </span><span style="color:navy">call    </span>patch_segs
<span style="color:maroon">RESGROUP:16E8                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0B700h      </span>; APPENDINSTALL
<span style="color:maroon">RESGROUP:16EB                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - APPEND - INSTALLATION CHECK
<span style="color:maroon">RESGROUP:16EB                                         </span>; Return: AL = 00h not installed
<span style="color:maroon">RESGROUP:16EB                                         </span>; AL = FFh if installed
<span style="color:maroon">RESGROUP:16ED                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:16EF                 </span><span style="color:navy">jz      short </span>set_msg_addr
<span style="color:maroon">RESGROUP:16F1                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0B702h      </span>; APPENDDOS
<span style="color:maroon">RESGROUP:16F4                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - APPEND - VERSION CHECK
<span style="color:maroon">RESGROUP:16F4                                         </span>; Return: AX = FFFFh if not DOS 4.0 APPEND
<span style="color:maroon">RESGROUP:16F4                                         </span>; AL = major version number
<span style="color:maroon">RESGROUP:16F4                                         </span>; AH = minor version number, otherwise
<span style="color:maroon">RESGROUP:16F6                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">RESGROUP:16F9                 </span><span style="color:navy">jnz     short </span>set_msg_addr
<span style="color:maroon">RESGROUP:16FB                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0B706h      </span>; APPENDGETSTATE
<span style="color:maroon">RESGROUP:16FE                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - DOS 4.0 APPEND - GET APPEND FUNCTION STATE
<span style="color:maroon">RESGROUP:16FE                                         </span>; Return: BX = APPEND state
<span style="color:maroon">RESGROUP:1700                 </span><span style="color:navy">mov     [</span>Append_State<span style="color:navy">], bx
</span><span style="color:maroon">RESGROUP:1704                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:maroon">RESGROUP:1706                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0B707h      </span>; APPENDSETSTATE
<span style="color:maroon">RESGROUP:1709                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - DOS 4.0 APPEND - SET APPEND FUNCTION STATE
<span style="color:maroon">RESGROUP:1709                                         </span>; BX = APPEND state bits
<span style="color:maroon">RESGROUP:170B
RESGROUP:170B </span>set_msg_addr<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:170B                 </span><span style="color:navy">mov     di, offset </span>PAERRMSG0 ; DataresEnd
<span style="color:maroon">RESGROUP:170E                 </span><span style="color:navy">mov     [</span>ResMsgEnd<span style="color:navy">], di
</span><span style="color:maroon">RESGROUP:1712                 </span><span style="color:navy">call    </span>get_XMMAddr
<span style="color:maroon">RESGROUP:1715                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">5500h       </span>; GET_COMMAND_STATE
<span style="color:maroon">RESGROUP:1718                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; Return:
<span style="color:maroon">RESGROUP:1718                                         </span>; AX = 0000h if an instance of COMMAND.COM is already running
<span style="color:maroon">RESGROUP:1718                                         </span>; DS:SI -&gt; entry point table
<span style="color:maroon">RESGROUP:171A                 </span><span style="color:navy">or      ax, ax
</span><span style="color:maroon">RESGROUP:171C                 </span><span style="color:navy">jnz     short </span>first_com
<span style="color:maroon">RESGROUP:171E                 </span><span style="color:navy">mov     [word ptr es:</span>ResJmpTable<span style="color:navy">], si
</span><span style="color:maroon">RESGROUP:1723                 </span><span style="color:navy">mov     [word ptr es:</span>ResJmpTable<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], ds
</span><span style="color:maroon">RESGROUP:1728                 </span><span style="color:navy">jmp     short </span>init_cntry
<span style="color:maroon">RESGROUP:172A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:172A
RESGROUP:172A </span>first_com<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:172A                 </span><span style="color:navy">mov     [es:</span>FirstCom<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:1730
RESGROUP:1730 </span>init_cntry<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1730                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:1731                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1732                 </span><span style="color:navy">mov     ah, </span><span style="color:green">65h         </span>; GETEXTCNTRY
<span style="color:maroon">RESGROUP:1734                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">4
</span><span style="color:maroon">RESGROUP:1736                 </span><span style="color:navy">mov     dx, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">RESGROUP:1739                 </span><span style="color:navy">mov     bx, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">RESGROUP:173C                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">5
</span><span style="color:maroon">RESGROUP:173F                 </span><span style="color:navy">mov     di, offset </span>FUCase_Addr
<span style="color:maroon">RESGROUP:1742                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ internal - CREATE PSP
<span style="color:maroon">RESGROUP:1742                                         </span>; DX = segment number at which to set up PSP
<span style="color:maroon">RESGROUP:1742                                         </span>; SI = (DOS 3+) value to place in memory size field at DX:[0002h]
<span style="color:maroon">RESGROUP:1744                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:1745                 </span><span style="color:navy">mov     ax, </span><span style="color:green">6300h       </span>; (ECS_CALL shl 8) or GETLEADBTBL
<span style="color:maroon">RESGROUP:1748                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3.2+ only - GET DOUBLE BYTE CHARACTER SET LEAD TABLE
<span style="color:maroon">RESGROUP:174A                 </span><span style="color:navy">mov     bx, ds
</span><span style="color:maroon">RESGROUP:174C                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:174D                 </span><span style="color:navy">mov     [word ptr </span>Dbcs_Vector_Addr<span style="color:navy">], si
</span><span style="color:maroon">RESGROUP:1751                 </span><span style="color:navy">mov     [word ptr </span>Dbcs_Vector_Addr<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], bx
</span><span style="color:maroon">RESGROUP:1755                 </span><span style="color:navy">mov     ax, [ds:</span><span style="color:green">16h</span><span style="color:navy">]    </span>; [PDB.PARENT_PID]
<span style="color:maroon">RESGROUP:1758                 </span><span style="color:navy">mov     [</span>Parent<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:175B                 </span><span style="color:navy">mov     ax, [ds:</span><span style="color:green">0Ah</span><span style="color:navy">]    </span>; [PDB.EXIT]
<span style="color:maroon">RESGROUP:175E                 </span><span style="color:navy">mov     [word ptr </span>OldTerm<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1761                 </span><span style="color:navy">mov     ax, [ds:</span><span style="color:green">0Ch</span><span style="color:navy">]    </span>; [PDB.EXIT+2]
<span style="color:maroon">RESGROUP:1764                 </span><span style="color:navy">mov     [word ptr </span>OldTerm<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1767                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">16B3h       </span>; ResGroup:EndCode + 15
<span style="color:maroon">RESGROUP:176A                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:maroon">RESGROUP:176C                 </span><span style="color:navy">shr     ax, cl
</span><span style="color:maroon">RESGROUP:176E                 </span><span style="color:navy">mov     cx, cs
</span><span style="color:maroon">RESGROUP:1770                 </span><span style="color:navy">add     ax, cx
</span><span style="color:maroon">RESGROUP:1772                 </span><span style="color:navy">mov     [</span>Res_Tpa<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1775                 </span><span style="color:navy">and     ax, </span><span style="color:green">0F000h
</span><span style="color:maroon">RESGROUP:1778                 </span><span style="color:navy">add     ax, </span><span style="color:#ff8000">1000h
</span><span style="color:maroon">RESGROUP:177B                 </span><span style="color:navy">jnb     short </span>TpaSet
<span style="color:maroon">RESGROUP:177D                 </span><span style="color:navy">mov     ax, [</span>Res_Tpa<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1780
RESGROUP:1780 </span>TpaSet<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1780                 </span><span style="color:navy">mov     [</span>Ltpa<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1783                 </span><span style="color:navy">mov     ax, [ds:</span><span style="color:green">2</span><span style="color:navy">]      </span>; [PDB.BLOCK_LEN]
<span style="color:maroon">RESGROUP:1786                 </span><span style="color:navy">mov     [</span>MySeg1<span style="color:navy">], ds
</span><span style="color:maroon">RESGROUP:178A                 </span><span style="color:navy">mov     [</span>MySeg2<span style="color:navy">], ds
</span><span style="color:maroon">RESGROUP:178E                 </span><span style="color:navy">mov     [</span>MySeg<span style="color:navy">], ds
</span><span style="color:maroon">RESGROUP:1792                 </span><span style="color:navy">mov     [</span>MySeg3<span style="color:navy">], ds
</span><span style="color:maroon">RESGROUP:1796                 </span><span style="color:navy">mov     [</span>MemSiz<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1799                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">RESGROUP:179A                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">2890h       </span>; RESGROUP:TranStart
<span style="color:maroon">RESGROUP:179D                 </span><span style="color:navy">add     bx, </span><span style="color:green">0AA9Ah      </span>; TRANGROUP:TranSpaceEnd
<span style="color:maroon">RESGROUP:17A1                 </span><span style="color:navy">add     bx, </span><span style="color:#ff8000">0Fh
</span><span style="color:maroon">RESGROUP:17A4                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:maroon">RESGROUP:17A6                 </span><span style="color:navy">shr     bx, cl          </span>; (TRANSTART+TRANSPACEEND+15)&gt;&gt;4
<span style="color:maroon">RESGROUP:17A8                 </span><span style="color:navy">mov     ah, </span><span style="color:green">4Ah         </span>; SETBLOCK
<span style="color:maroon">RESGROUP:17AA                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ADJUST MEMORY BLOCK SIZE (SETBLOCK)
<span style="color:maroon">RESGROUP:17AA                                         </span>; ES = segment address of block to change
<span style="color:maroon">RESGROUP:17AA                                         </span>; BX = new size in paragraphs
<span style="color:maroon">RESGROUP:17AC                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">RESGROUP:17AD                 </span><span style="color:navy">mov     [</span>EnvMax<span style="color:navy">], </span><span style="color:green">95    </span>; ((ENVIRONSIZ+15)/16) + ((EnvMaximum-ZERO+15)/16) - 1
<span style="color:maroon">RESGROUP:17AD                                         </span>; ZERO equ ConProc
<span style="color:maroon">RESGROUP:17AD                                         </span>; ((166+15+)/16)+(1BF5h-16B0h+15)/16)-1 = 95
<span style="color:maroon">RESGROUP:17B3                 </span><span style="color:navy">mov     [</span>EnvSiz<span style="color:navy">], </span><span style="color:green">16
</span><span style="color:maroon">RESGROUP:17B9                 </span><span style="color:navy">mov     dx, </span><span style="color:green">0AAA9h      </span>; (TRANSPACEEND+15)
<span style="color:maroon">RESGROUP:17BC                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:maroon">RESGROUP:17BE                 </span><span style="color:navy">shr     dx, cl          </span>; (TRANSPACEEND+15)&gt;&gt;4
<span style="color:maroon">RESGROUP:17C0                 </span><span style="color:navy">mov     [</span>TrnSize<span style="color:navy">], dx
</span><span style="color:maroon">RESGROUP:17C4                 </span><span style="color:navy">sub     ax, dx
</span><span style="color:maroon">RESGROUP:17C6                 </span><span style="color:navy">mov     [</span>TrnSeg<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:17C9                 </span><span style="color:navy">mov     ax, [ds:</span><span style="color:green">2Ch</span><span style="color:navy">]    </span>; [PDB.ENVIRON]
<span style="color:maroon">RESGROUP:17CC                 </span><span style="color:navy">mov     [</span>EnvirSeg<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:17CF                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">7Eh</span><span style="color:navy">], ax    </span>; environment segment
<span style="color:maroon">RESGROUP:17D2                 </span><span style="color:navy">or      ax, ax
</span><span style="color:maroon">RESGROUP:17D4                 </span><span style="color:navy">jz      short </span>buildenv
<span style="color:maroon">RESGROUP:17D6                 </span><span style="color:navy">cmp     [</span>FirstCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:17DB                 </span><span style="color:navy">jz      short </span>environpassed
<span style="color:maroon">RESGROUP:17DD
RESGROUP:17DD </span>buildenv<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:17DD                 </span><span style="color:navy">call    </span>alloc_env
<span style="color:maroon">RESGROUP:17E0
RESGROUP:17E0 </span>environpassed<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:17E0                 </span><span style="color:navy">mov     es, ax
</span><span style="color:maroon">RESGROUP:17E2                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:17E2                 </span><span style="color:navy">mov     ah, </span><span style="color:green">19h
</span><span style="color:maroon">RESGROUP:17E4                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - GET DEFAULT DISK NUMBER
<span style="color:maroon">RESGROUP:17E6                 </span><span style="color:navy">inc     al
</span><span style="color:maroon">RESGROUP:17E8                 </span><span style="color:navy">mov     [</span>ComDrv<span style="color:navy">], al
</span><span style="color:maroon">RESGROUP:17EB                 </span><span style="color:navy">mov     al, [ds:</span><span style="color:green">5Ch</span><span style="color:navy">]    </span>; [FCB]
<span style="color:maroon">RESGROUP:17EE                 </span><span style="color:navy">or      al, al
</span><span style="color:maroon">RESGROUP:17F0                 </span><span style="color:navy">jz      short </span>nocomdrv
<span style="color:maroon">RESGROUP:17F2                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:maroon">RESGROUP:17F4                 </span><span style="color:navy">mov     [</span>ComDrv<span style="color:navy">], al
</span><span style="color:maroon">RESGROUP:17F7                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;
</span><span style="color:maroon">RESGROUP:17F9                 </span><span style="color:navy">std
</span><span style="color:maroon">RESGROUP:17FA                 </span><span style="color:navy">cmp     [</span>AllocedEnv<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:17FF                 </span><span style="color:navy">jz      short </span>notwidenv
<span style="color:maroon">RESGROUP:1801                 </span><span style="color:navy">mov     di, [</span>ComspOffset<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1805                 </span><span style="color:navy">cmp     [byte ptr es:di+</span><span style="color:#ff8000">1</span><span style="color:navy">], </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:maroon">RESGROUP:180A                 </span><span style="color:navy">jz      short </span>notwidenv
<span style="color:maroon">RESGROUP:180C                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:180D                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:180E                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:180F                 </span><span style="color:navy">lea     si, [di+</span><span style="color:green">143</span><span style="color:navy">]    </span>; [di+MAX_COMSPEC-3]
<span style="color:maroon">RESGROUP:1813                 </span><span style="color:navy">lea     di, [di+</span><span style="color:green">145</span><span style="color:navy">]    </span>; [di+MAX_COMSPEC-1]
<span style="color:maroon">RESGROUP:1817                 </span><span style="color:navy">mov     cx, </span><span style="color:green">144         </span>; MAX_COMSPEC-2
<span style="color:maroon">RESGROUP:181A                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">RESGROUP:181C                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:181D                 </span><span style="color:navy">mov     [es:di-</span><span style="color:green">1</span><span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1821
RESGROUP:1821 </span>notwidenv<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1821                 </span><span style="color:navy">cld
</span><span style="color:maroon">RESGROUP:1822                 </span><span style="color:navy">mov     [word ptr </span>AUTOBAT<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1825
RESGROUP:1825 </span>nocomdrv<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1825                 </span><span style="color:navy">call    </span>SetVect
<span style="color:maroon">RESGROUP:1828                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:1829                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:182A                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:182B                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:182C                 </span><span style="color:navy">mov     si, </span><span style="color:green">80h
</span><span style="color:maroon">RESGROUP:182F                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">RESGROUP:1830                 </span><span style="color:navy">mov     di, si
</span><span style="color:maroon">RESGROUP:1832                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:maroon">RESGROUP:1834                 </span><span style="color:navy">add     di, ax
</span><span style="color:maroon">RESGROUP:1836                 </span><span style="color:navy">mov     [byte ptr di], </span><span style="color:#ff8000">0Dh
</span><span style="color:maroon">RESGROUP:1839                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:maroon">RESGROUP:183B                 </span><span style="color:navy">mov     [</span>num_positionals<span style="color:navy">], cx
</span><span style="color:maroon">RESGROUP:183F
RESGROUP:183F </span>Parse_command_line<span style="color:navy">:                     </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:183F                 </span><span style="color:navy">mov     di, offset </span>PARSE_COMMAND
<span style="color:maroon">RESGROUP:1842                 </span><span style="color:navy">mov     cx, [</span>num_positionals<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1846                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">RESGROUP:1848                 </span><span style="color:navy">mov     [</span>old_parse_ptr<span style="color:navy">], si
</span><span style="color:maroon">RESGROUP:184C                 </span><span style="color:navy">call    [dword ptr </span>Init_Parse<span style="color:navy">] </span>; call far [Init_Parse]
<span style="color:maroon">RESGROUP:1850                 </span><span style="color:navy">mov     [</span>num_positionals<span style="color:navy">], cx
</span><span style="color:maroon">RESGROUP:1854                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">RESGROUP:1857                 </span><span style="color:navy">jnz     short </span>t1
<span style="color:maroon">RESGROUP:1859                 </span><span style="color:navy">jmp     </span>ArgsDone
<span style="color:maroon">RESGROUP:185C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:185C
RESGROUP:185C </span>t1<span style="color:navy">:                                     </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:185C                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:185F                 </span><span style="color:navy">jz      short </span>parse_cont
<span style="color:maroon">RESGROUP:1861
RESGROUP:1861 </span>parse_line_error<span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1861                 </span><span style="color:navy">push    si
</span><span style="color:maroon">RESGROUP:1862                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">RESGROUP:1863                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">3           </span>; BadSwt_Ptr
<span style="color:maroon">RESGROUP:1866                 </span><span style="color:navy">jnz     short </span>parse_line_error_disp
<span style="color:maroon">RESGROUP:1868                 </span><span style="color:navy">mov     di, si
</span><span style="color:maroon">RESGROUP:186A                 </span><span style="color:navy">mov     si, [</span>old_parse_ptr<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:186E
RESGROUP:186E </span>init_chk_delim<span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:186E                 </span><span style="color:navy">cmp     si, di
</span><span style="color:maroon">RESGROUP:1870                 </span><span style="color:navy">jz      short </span>parse_line_error_disp
<span style="color:maroon">RESGROUP:1872                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">RESGROUP:1873                 </span><span style="color:navy">cmp     al, [</span>space_chr<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1877                 </span><span style="color:navy">jz      short </span>init_chk_delim
<span style="color:maroon">RESGROUP:1879                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">9
</span><span style="color:maroon">RESGROUP:187B                 </span><span style="color:navy">jz      short </span>init_chk_delim
<span style="color:maroon">RESGROUP:187D                 </span><span style="color:navy">cmp     al, [</span>RSwitChar<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1881                 </span><span style="color:navy">jnz     short </span>parse_line_error_disp
<span style="color:maroon">RESGROUP:1883                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">RESGROUP:1884                 </span><span style="color:navy">call    </span>ITestKanj
<span style="color:maroon">RESGROUP:1887                 </span><span style="color:navy">jnz     short </span>parse_line_error_disp
<span style="color:maroon">RESGROUP:1889                 </span><span style="color:navy">call    </span>iupconv
<span style="color:maroon">RESGROUP:188C                 </span><span style="color:navy">cmp     al, [</span>scswitch<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1890                 </span><span style="color:navy">jnz     short </span>check_k_too
<span style="color:maroon">RESGROUP:1892                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">RESGROUP:1893                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">RESGROUP:1894                 </span><span style="color:navy">jmp     </span>SetSSwitch
<span style="color:maroon">RESGROUP:1897 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1897
RESGROUP:1897 </span>check_k_too<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1897                 </span><span style="color:navy">cmp     al, [</span>skswitch<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:189B                 </span><span style="color:navy">jnz     short </span>parse_line_error_disp
<span style="color:maroon">RESGROUP:189D                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">RESGROUP:189E                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">RESGROUP:189F                 </span><span style="color:navy">jmp     </span>SetKSwitch
<span style="color:maroon">RESGROUP:18A2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:18A2
RESGROUP:18A2 </span>parse_line_error_disp<span style="color:navy">:                  </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:18A2                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">RESGROUP:18A3                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">RESGROUP:18A4                 </span><span style="color:navy">mov     dx, ax
</span><span style="color:maroon">RESGROUP:18A6                 </span><span style="color:navy">call    </span>RPrintParse
<span style="color:maroon">RESGROUP:18A9                 </span><span style="color:navy">call    </span>crlf
<span style="color:maroon">RESGROUP:18AC                 </span><span style="color:navy">jmp     short </span>Parse_command_line
<span style="color:maroon">RESGROUP:18AE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:18AE
RESGROUP:18AE </span>parse_cont<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:18AE                 </span><span style="color:navy">cmp     [</span>COMND1_SYN<span style="color:navy">], offset </span>COMMAND_F_SYN <span style="color:gray">; &quot;/F&quot;
</span><span style="color:maroon">RESGROUP:18B4                 </span><span style="color:navy">jz      short </span>SetFSwitch
<span style="color:maroon">RESGROUP:18B6                 </span><span style="color:navy">cmp     [</span>COMND1_SYN<span style="color:navy">], offset </span>COMMAND_P_SYN <span style="color:gray">; &quot;/P&quot;
</span><span style="color:maroon">RESGROUP:18BC                 </span><span style="color:navy">jz      short </span>SetPSwitch
<span style="color:maroon">RESGROUP:18BE                 </span><span style="color:navy">cmp     [</span>COMND1_SYN<span style="color:navy">], offset </span>COMMAND_D_SYN <span style="color:gray">; &quot;/D&quot;
</span><span style="color:maroon">RESGROUP:18C4                 </span><span style="color:navy">jnz     short </span>parse_cont_1
<span style="color:maroon">RESGROUP:18C6                 </span><span style="color:navy">jmp     </span>SetDSwitch
<span style="color:maroon">RESGROUP:18C9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:18C9
RESGROUP:18C9 </span>parse_cont_1<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:18C9                 </span><span style="color:navy">cmp     [</span>COMND1_SYN<span style="color:navy">], offset </span>COMMAND_C_SYN <span style="color:gray">; &quot;/C&quot;
</span><span style="color:maroon">RESGROUP:18CF                 </span><span style="color:navy">jnz     short </span>parse_cont_2
<span style="color:maroon">RESGROUP:18D1                 </span><span style="color:navy">jmp     </span>SetSSwitch
<span style="color:maroon">RESGROUP:18D4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:18D4
RESGROUP:18D4 </span>parse_cont_2<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:18D4                 </span><span style="color:navy">cmp     [</span>COMND1_SYN<span style="color:navy">], offset </span>COMMAND_K_SYN <span style="color:gray">; &quot;/K&quot;
</span><span style="color:maroon">RESGROUP:18DA                 </span><span style="color:navy">jnz     short </span>parse_cont_3
<span style="color:maroon">RESGROUP:18DC                 </span><span style="color:navy">jmp     </span>SetKSwitch
<span style="color:maroon">RESGROUP:18DF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:18DF
RESGROUP:18DF </span>parse_cont_3<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:18DF                 </span><span style="color:navy">cmp     [</span>COMND1_SYN<span style="color:navy">], offset </span>COMMAND_E_SYN <span style="color:gray">; &quot;/E&quot;
</span><span style="color:maroon">RESGROUP:18E5                 </span><span style="color:navy">jnz     short </span>parse_cont_4
<span style="color:maroon">RESGROUP:18E7                 </span><span style="color:navy">jmp     </span>SetESwitch
<span style="color:maroon">RESGROUP:18EA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:18EA
RESGROUP:18EA </span>parse_cont_4<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:18EA                 </span><span style="color:navy">cmp     [</span>COMND1_SYN<span style="color:navy">], offset </span>COMMAND_Y_SYN <span style="color:gray">; &quot;/Y&quot;
</span><span style="color:maroon">RESGROUP:18F0                 </span><span style="color:navy">jnz     short </span>parse_cont_5
<span style="color:maroon">RESGROUP:18F2                 </span><span style="color:navy">jmp     </span>SetYSwitch
<span style="color:maroon">RESGROUP:18F5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:18F5
RESGROUP:18F5 </span>parse_cont_5<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:18F5                 </span><span style="color:navy">cmp     [</span>COMND1_SYN<span style="color:navy">], offset </span>COMMAND_M_SYN <span style="color:gray">; &quot;/MSG&quot;
</span><span style="color:maroon">RESGROUP:18FB                 </span><span style="color:navy">jz      short </span>SetMSwitchJ
<span style="color:maroon">RESGROUP:18FD                 </span><span style="color:navy">cmp     [</span>COMND1_SYN<span style="color:navy">], offset </span>COMMAND_H_SYN <span style="color:gray">; &quot;/H&quot;
</span><span style="color:maroon">RESGROUP:1903                 </span><span style="color:navy">jz      short </span>SetHSwitch
<span style="color:maroon">RESGROUP:1905                 </span><span style="color:navy">cmp     [</span>COMND1_SYN<span style="color:navy">], offset </span>COMMAND_O_SYN <span style="color:gray">; &quot;/O&quot;
</span><span style="color:maroon">RESGROUP:190B                 </span><span style="color:navy">jz      short </span>SetOSwitch
<span style="color:maroon">RESGROUP:190D                 </span><span style="color:navy">jmp     </span>ChkOtherArgs
<span style="color:maroon">RESGROUP:1910 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1910
RESGROUP:1910 </span>SetMSwitchJ<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1910                 </span><span style="color:navy">jmp     </span>SetMSwitch
<span style="color:maroon">RESGROUP:1913 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1913
RESGROUP:1913 </span>SetHSwitch<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1913                 </span><span style="color:navy">jmp     </span>load_to_hma_umb
<span style="color:maroon">RESGROUP:1916 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1916
RESGROUP:1916 </span>SetOSwitch<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1916                 </span><span style="color:navy">jmp     </span>disable_overwrite_msg
<span style="color:maroon">RESGROUP:1919 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1919
RESGROUP:1919 </span>SetFSwitch<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1919                 </span><span style="color:navy">cmp     [</span>fFail<span style="color:navy">], </span><span style="color:#ff8000">0FFh   </span>; -1
<span style="color:maroon">RESGROUP:191E                 </span><span style="color:navy">jnz     short </span>failok
<span style="color:maroon">RESGROUP:1920                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1           </span>; MoreArgs_Ptr
<span style="color:maroon">RESGROUP:1923                 </span><span style="color:navy">jmp     </span>parse_line_error
<span style="color:maroon">RESGROUP:1926 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1926
RESGROUP:1926 </span>failok<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1926                 </span><span style="color:navy">mov     [</span>fFail<span style="color:navy">], </span><span style="color:#ff8000">0FFh
</span><span style="color:maroon">RESGROUP:192B                 </span><span style="color:navy">jmp     </span>Parse_command_line
<span style="color:maroon">RESGROUP:192E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:192E
RESGROUP:192E </span>SetPSwitch<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:192E                 </span><span style="color:navy">cmp     [</span>PermCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1933                 </span><span style="color:navy">jz      short </span>permcomok
<span style="color:maroon">RESGROUP:1935                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1           </span>; MoreArgs_Ptr
<span style="color:maroon">RESGROUP:1938                 </span><span style="color:navy">jmp     </span>parse_line_error
<span style="color:maroon">RESGROUP:193B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:193B
RESGROUP:193B </span>permcomok<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:193B                 </span><span style="color:navy">inc     [</span>PermCom<span style="color:navy">]       </span>; byte
<span style="color:maroon">RESGROUP:193F                 </span><span style="color:navy">mov     [word ptr </span>OldTerm<span style="color:navy">], offset </span>LodCom_Trap
<span style="color:maroon">RESGROUP:1945                 </span><span style="color:navy">mov     [word ptr </span>OldTerm<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], ds
</span><span style="color:maroon">RESGROUP:1949                 </span><span style="color:navy">cmp     [</span>PRDATTM<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; -1
<span style="color:maroon">RESGROUP:194E                 </span><span style="color:navy">jnz     short </span>Parse_command_line_jmp
<span style="color:maroon">RESGROUP:1950                 </span><span style="color:navy">mov     [</span>PRDATTM<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1955
RESGROUP:1955 </span>Parse_command_line_jmp<span style="color:navy">:                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1955                 </span><span style="color:navy">jmp     </span>Parse_command_line
<span style="color:maroon">RESGROUP:1958 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1958
RESGROUP:1958 </span>SetDSwitch<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1958                 </span><span style="color:navy">cmp     [</span>dswitch<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:195D                 </span><span style="color:navy">jz      short </span>setdateok
<span style="color:maroon">RESGROUP:195F                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:1962                 </span><span style="color:navy">jmp     </span>parse_line_error
<span style="color:maroon">RESGROUP:1965 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1965
RESGROUP:1965 </span>setdateok<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1965                 </span><span style="color:navy">inc     [</span>dswitch<span style="color:navy">]       </span>; byte
<span style="color:maroon">RESGROUP:1969                 </span><span style="color:navy">mov     [</span>PRDATTM<span style="color:navy">], </span><span style="color:#ff8000">1    </span>; byte
<span style="color:maroon">RESGROUP:196E                 </span><span style="color:navy">jmp     </span>Parse_command_line
<span style="color:maroon">RESGROUP:1971 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1971
RESGROUP:1971 </span>SetKSwitch<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1971                 </span><span style="color:navy">mov     [</span>SemiPermCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1977                 </span><span style="color:navy">jmp     short </span>SetSorKSwitch
<span style="color:maroon">RESGROUP:1979 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1979
RESGROUP:1979 </span>SetSSwitch<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1979                 </span><span style="color:navy">mov     [</span>PermCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:197E
RESGROUP:197E </span>SetSorKSwitch<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:197E                 </span><span style="color:navy">mov     [</span>SingleCom<span style="color:navy">], si
</span><span style="color:maroon">RESGROUP:1982                 </span><span style="color:navy">mov     [</span>PRDATTM<span style="color:navy">], </span><span style="color:#ff8000">1    </span>; byte
<span style="color:maroon">RESGROUP:1987                 </span><span style="color:navy">jmp     </span>ArgsDone
<span style="color:maroon">RESGROUP:198A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:198A
RESGROUP:198A </span>SetESwitch<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:198A                 </span><span style="color:navy">cmp     [</span>eswitch<span style="color:navy">], </span><span style="color:#ff8000">0    </span>; byte
<span style="color:maroon">RESGROUP:198F                 </span><span style="color:navy">jz      short </span>eswitchok
<span style="color:maroon">RESGROUP:1991                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:1994                 </span><span style="color:navy">jmp     </span>parse_line_error
<span style="color:maroon">RESGROUP:1997 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1997
RESGROUP:1997 </span>eswitchok<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1997                 </span><span style="color:navy">inc     [</span>eswitch<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:199B                 </span><span style="color:navy">mov     di, offset </span>COMND1_ADDR
<span style="color:maroon">RESGROUP:199E                 </span><span style="color:navy">mov     bx, [di]
</span><span style="color:maroon">RESGROUP:19A0                 </span><span style="color:navy">add     bx, </span><span style="color:#ff8000">0Fh
</span><span style="color:maroon">RESGROUP:19A3                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:maroon">RESGROUP:19A5                 </span><span style="color:navy">shr     bx, cl
</span><span style="color:maroon">RESGROUP:19A7                 </span><span style="color:navy">mov     [</span>EnvSiz<span style="color:navy">], bx
</span><span style="color:maroon">RESGROUP:19AB                 </span><span style="color:navy">jmp     </span>Parse_command_line
<span style="color:maroon">RESGROUP:19AE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:19AE
RESGROUP:19AE </span>SetMSwitch<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:19AE                 </span><span style="color:navy">cmp     [</span>ext_msg<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:19B3                 </span><span style="color:navy">jnz     short </span>setMswitchok
<span style="color:maroon">RESGROUP:19B5                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1           </span>; MoreArgs_Ptr
<span style="color:maroon">RESGROUP:19B8                 </span><span style="color:navy">jmp     </span>parse_line_error
<span style="color:maroon">RESGROUP:19BB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:19BB
RESGROUP:19BB </span>setMswitchok<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:19BB                 </span><span style="color:navy">mov     [</span>ext_msg<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:19C0                 </span><span style="color:navy">jmp     </span>Parse_command_line
<span style="color:maroon">RESGROUP:19C3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:19C3
RESGROUP:19C3 </span>SetYSwitch<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:19C3                 </span><span style="color:navy">or      [byte ptr </span>Y_Flag<span style="color:navy">], </span><span style="color:green">10h
</span><span style="color:maroon">RESGROUP:19C8                 </span><span style="color:navy">jmp     </span>Parse_command_line
<span style="color:maroon">RESGROUP:19CB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:19CB
RESGROUP:19CB </span>load_to_hma_umb<span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:19CB                 </span><span style="color:navy">cmp     [</span>COMMAND_HIGH<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:19D0                 </span><span style="color:navy">jz      short </span>set_command_high_flag
<span style="color:maroon">RESGROUP:19D2                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1           </span>; too many parameters
<span style="color:maroon">RESGROUP:19D5                 </span><span style="color:navy">jmp     </span>parse_line_error
<span style="color:maroon">RESGROUP:19D8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:19D8
RESGROUP:19D8 </span>set_command_high_flag<span style="color:navy">:                  </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:19D8                 </span><span style="color:navy">inc     [</span>COMMAND_HIGH<span style="color:navy">]  </span>; byte
<span style="color:maroon">RESGROUP:19DC                 </span><span style="color:navy">jmp     </span>Parse_command_line
<span style="color:maroon">RESGROUP:19DF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:19DF
RESGROUP:19DF </span>disable_overwrite_msg<span style="color:navy">:                  </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:19DF                 </span><span style="color:navy">cmp     [byte ptr </span>cox_location<span style="color:navy">], &#039;</span><span style="color:green">c&#039; </span><span style="color:gray">; &quot;cox&quot;
</span><span style="color:maroon">RESGROUP:19E4                 </span><span style="color:navy">jz      short </span>change_cox_to_VCB
<span style="color:maroon">RESGROUP:19E6                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:19E9                 </span><span style="color:navy">jmp     </span>parse_line_error
<span style="color:maroon">RESGROUP:19EC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:19EC
RESGROUP:19EC </span>change_cox_to_VCB<span style="color:navy">:                      </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:19EC                 </span><span style="color:navy">mov     [byte ptr </span>cox_location<span style="color:navy">], </span><span style="color:green">56h </span>; &#039;V&#039;  ; &quot;VCB&quot;
<span style="color:maroon">RESGROUP:19F1                 </span><span style="color:navy">mov     [word ptr </span>cox_location<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:green">4243h </span>; &#039;CB&#039;
<span style="color:maroon">RESGROUP:19F7                 </span><span style="color:navy">jmp     </span>Parse_command_line
<span style="color:maroon">RESGROUP:19FA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:19FA
RESGROUP:19FA </span>ChkOtherArgs<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:19FA                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:19FB                 </span><span style="color:navy">push    si
</span><span style="color:maroon">RESGROUP:19FC                 </span><span style="color:navy">lds     si, [</span>COMND1_ADDR<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1A00                 </span><span style="color:navy">mov     dx, si
</span><span style="color:maroon">RESGROUP:1A02                 </span><span style="color:navy">mov     ax, </span><span style="color:green">3D02h       </span>; (OPEN shl 8) or 2
<span style="color:maroon">RESGROUP:1A05                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - OPEN DISK FILE WITH HANDLE
<span style="color:maroon">RESGROUP:1A05                                         </span>; DS:DX -&gt; ASCIZ filename
<span style="color:maroon">RESGROUP:1A05                                         </span>; AL = access mode
<span style="color:maroon">RESGROUP:1A05                                         </span>; 2 - read &amp; write
<span style="color:maroon">RESGROUP:1A07                 </span><span style="color:navy">jb      short </span>ChkSrchSpec
<span style="color:maroon">RESGROUP:1A09                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:maroon">RESGROUP:1A0B                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4400h       </span>; IOCTL shl 8
<span style="color:maroon">RESGROUP:1A0E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL - GET DEVICE INFORMATION
<span style="color:maroon">RESGROUP:1A0E                                         </span>; BX = file or device handle
<span style="color:maroon">RESGROUP:1A10                 </span><span style="color:navy">test    dl, </span><span style="color:green">80h
</span><span style="color:maroon">RESGROUP:1A13                 </span><span style="color:navy">jnz     short </span>IsaDevice
<span style="color:maroon">RESGROUP:1A15
RESGROUP:1A15 </span>BadSetCon<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1A15                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh         </span>; CLOSE
<span style="color:maroon">RESGROUP:1A17                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:maroon">RESGROUP:1A17                                         </span>; BX = file handle
<span style="color:maroon">RESGROUP:1A19                 </span><span style="color:navy">jmp     short </span>ChkSrchSpec
<span style="color:maroon">RESGROUP:1A1B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1A1B
RESGROUP:1A1B </span>IsaDevice<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1A1B                 </span><span style="color:navy">xor     dh, dh
</span><span style="color:maroon">RESGROUP:1A1D                 </span><span style="color:navy">or      dl, </span><span style="color:green">3
</span><span style="color:maroon">RESGROUP:1A20                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4401h       </span>; (IOCTL shl 8) or 1
<span style="color:maroon">RESGROUP:1A23                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL - SET DEVICE INFORMATION
<span style="color:maroon">RESGROUP:1A23                                         </span>; BX = device handle, DH = 0
<span style="color:maroon">RESGROUP:1A23                                         </span>; DL = device information to set (bits 0-7 from function 0)
<span style="color:maroon">RESGROUP:1A25                 </span><span style="color:navy">jb      short </span>BadSetCon
<span style="color:maroon">RESGROUP:1A27                 </span><span style="color:navy">mov     dx, bx
</span><span style="color:maroon">RESGROUP:1A29                 </span><span style="color:navy">cmp     [es:</span>DevFlag<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:1A2F                 </span><span style="color:navy">jz      short </span>DevErr
<span style="color:maroon">RESGROUP:1A31                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">RESGROUP:1A32                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">3
</span><span style="color:maroon">RESGROUP:1A35                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:maroon">RESGROUP:1A37
RESGROUP:1A37 </span>rcclloop<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1A37                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:maroon">RESGROUP:1A39                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:maroon">RESGROUP:1A39                                         </span>; BX = file handle
<span style="color:maroon">RESGROUP:1A3B                 </span><span style="color:navy">inc     bx
</span><span style="color:maroon">RESGROUP:1A3C                 </span><span style="color:navy">loop    </span>rcclloop
<span style="color:maroon">RESGROUP:1A3E                 </span><span style="color:navy">mov     bx, dx
</span><span style="color:maroon">RESGROUP:1A40                 </span><span style="color:navy">mov     ah, </span><span style="color:green">45h         </span>; XDUP
<span style="color:maroon">RESGROUP:1A42                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CREATE DUPLICATE HANDLE (DUP)
<span style="color:maroon">RESGROUP:1A42                                         </span>; BX = file handle to duplicate
<span style="color:maroon">RESGROUP:1A44                 </span><span style="color:navy">mov     ah, </span><span style="color:green">45h
</span><span style="color:maroon">RESGROUP:1A46                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CREATE DUPLICATE HANDLE (DUP)
<span style="color:maroon">RESGROUP:1A46                                         </span>; BX = file handle to duplicate
<span style="color:maroon">RESGROUP:1A48                 </span><span style="color:navy">mov     ah, </span><span style="color:green">45h
</span><span style="color:maroon">RESGROUP:1A4A                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CREATE DUPLICATE HANDLE (DUP)
<span style="color:maroon">RESGROUP:1A4A                                         </span>; BX = file handle to duplicate
<span style="color:maroon">RESGROUP:1A4C                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:maroon">RESGROUP:1A4E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:maroon">RESGROUP:1A4E                                         </span>; BX = file handle
<span style="color:maroon">RESGROUP:1A50                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">RESGROUP:1A51                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">RESGROUP:1A52                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1A53                 </span><span style="color:navy">inc     [es:</span>DevFlag<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1A58                 </span><span style="color:navy">jmp     </span>Parse_command_line
<span style="color:maroon">RESGROUP:1A5B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1A5B
RESGROUP:1A5B </span>DevErr<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1A5B                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">RESGROUP:1A5C                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1A5D                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:1A60                 </span><span style="color:navy">call    </span>RPrintParse
<span style="color:maroon">RESGROUP:1A63                 </span><span style="color:navy">call    </span>crlf
<span style="color:maroon">RESGROUP:1A66                 </span><span style="color:navy">jmp     </span>Parse_command_line
<span style="color:maroon">RESGROUP:1A69 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1A69
RESGROUP:1A69 </span>ChkSrchSpec<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1A69                 </span><span style="color:navy">cmp     [es:</span>PathFlag<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:1A6F                 </span><span style="color:navy">jz      short </span>DevErr
<span style="color:maroon">RESGROUP:1A71                 </span><span style="color:navy">inc     [es:</span>PathFlag<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1A76                 </span><span style="color:navy">call    </span>alloc_env
<span style="color:maroon">RESGROUP:1A79                 </span><span style="color:navy">mov     es, ax
</span><span style="color:maroon">RESGROUP:1A7B                 </span><span style="color:navy">push    si
</span><span style="color:maroon">RESGROUP:1A7C                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:maroon">RESGROUP:1A7E
RESGROUP:1A7E </span>countloop<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1A7E                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">RESGROUP:1A7F                 </span><span style="color:navy">inc     cx
</span><span style="color:maroon">RESGROUP:1A80                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0           </span>; END_OF_LINE_OUT
<span style="color:maroon">RESGROUP:1A82                 </span><span style="color:navy">jnz     short </span>countloop
<span style="color:maroon">RESGROUP:1A84                 </span><span style="color:navy">mov     al, [ss:</span>space_chr<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1A88                 </span><span style="color:navy">dec     si
</span><span style="color:maroon">RESGROUP:1A89                 </span><span style="color:navy">mov     [si], al
</span><span style="color:maroon">RESGROUP:1A8B                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">RESGROUP:1A8C                 </span><span style="color:navy">mov     cx, </span><span style="color:green">8000h       </span>; ENVBIG
<span style="color:maroon">RESGROUP:1A8F                 </span><span style="color:navy">mov     di, [ss:</span>ComspOffset<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1A94                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1A96                 </span><span style="color:navy">repne scasb
</span><span style="color:maroon">RESGROUP:1A98                 </span><span style="color:navy">mov     si, di
</span><span style="color:maroon">RESGROUP:1A9A
RESGROUP:1A9A </span>comp_endenv<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1A9A                 </span><span style="color:navy">scasb
</span><span style="color:maroon">RESGROUP:1A9B                 </span><span style="color:navy">jz      short </span>got_endenv
<span style="color:maroon">RESGROUP:1A9D                 </span><span style="color:navy">repne scasb
</span><span style="color:maroon">RESGROUP:1A9F                 </span><span style="color:navy">jmp     short </span>comp_endenv
<span style="color:maroon">RESGROUP:1AA1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1AA1
RESGROUP:1AA1 </span>got_endenv<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1AA1                 </span><span style="color:navy">mov     cx, di
</span><span style="color:maroon">RESGROUP:1AA3                 </span><span style="color:navy">sub     cx, si
</span><span style="color:maroon">RESGROUP:1AA5                 </span><span style="color:navy">mov     di, [ss:</span>ComspOffset<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1AAA                 </span><span style="color:navy">sub     di, </span><span style="color:#ff8000">8           </span>; ComspStrLen
<span style="color:maroon">RESGROUP:1AAE                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:1AAF                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:1AB0                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1AB1                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">RESGROUP:1AB3                 </span><span style="color:navy">dec     di
</span><span style="color:maroon">RESGROUP:1AB4                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:1AB5                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1AB6                 </span><span style="color:navy">mov     si, offset </span>ComspString <span style="color:gray">; &quot;COMSPEC=\\COMMAND.COM&quot;
</span><span style="color:maroon">RESGROUP:1AB9                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">8           </span>; ComspStrLen
<span style="color:maroon">RESGROUP:1ABC                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">RESGROUP:1ABE                 </span><span style="color:navy">mov     [</span>ComspOffset<span style="color:navy">], di
</span><span style="color:maroon">RESGROUP:1AC2                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1AC3                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">RESGROUP:1AC4                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">RESGROUP:1AC5
RESGROUP:1AC5 </span>ComtrLoop<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1AC5                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">RESGROUP:1AC6                 </span><span style="color:navy">dec     cx
</span><span style="color:maroon">RESGROUP:1AC7                 </span><span style="color:navy">cmp     al, [ss:</span>space_chr<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1ACC                 </span><span style="color:navy">jz      short </span>SetComsr
<span style="color:maroon">RESGROUP:1ACE                 </span><span style="color:navy">stosb
</span><span style="color:maroon">RESGROUP:1ACF                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:maroon">RESGROUP:1AD1                 </span><span style="color:navy">jcxz    short </span>SetComsr
<span style="color:maroon">RESGROUP:1AD3                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:1AD4                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:1AD5                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1AD6                 </span><span style="color:navy">call    </span>ITestKanj
<span style="color:maroon">RESGROUP:1AD9                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1ADA                 </span><span style="color:navy">jz      short </span>ComtrLoop
<span style="color:maroon">RESGROUP:1ADC                 </span><span style="color:navy">dec     cx
</span><span style="color:maroon">RESGROUP:1ADD                 </span><span style="color:navy">movsb
</span><span style="color:maroon">RESGROUP:1ADE                 </span><span style="color:navy">inc     ah
</span><span style="color:maroon">RESGROUP:1AE0                 </span><span style="color:navy">jcxz    short </span>SetComsr
<span style="color:maroon">RESGROUP:1AE2                 </span><span style="color:navy">jmp     short </span>ComtrLoop
<span style="color:maroon">RESGROUP:1AE4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1AE4
RESGROUP:1AE4 </span>SetComsr<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1AE4                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">RESGROUP:1AE5                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:1AE6                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1AE7                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:1AE8                 </span><span style="color:navy">mov     si, offset </span>COMSPECT <span style="color:gray">; &quot;\\COMMAND.COM&quot;
</span><span style="color:maroon">RESGROUP:1AEB                 </span><span style="color:navy">mov     cx, </span><span style="color:green">14
</span><span style="color:maroon">RESGROUP:1AEE                 </span><span style="color:navy">mov     al, [es:di-</span><span style="color:green">1</span><span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1AF2                 </span><span style="color:navy">or      ah, ah
</span><span style="color:maroon">RESGROUP:1AF4                 </span><span style="color:navy">jnz     short </span>iNotRoot
<span style="color:maroon">RESGROUP:1AF6                 </span><span style="color:navy">cmp     al, [</span>RDirChar<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1AFA                 </span><span style="color:navy">jnz     short </span>iNotRoot
<span style="color:maroon">RESGROUP:1AFC                 </span><span style="color:navy">inc     si
</span><span style="color:maroon">RESGROUP:1AFD                 </span><span style="color:navy">dec     cx
</span><span style="color:maroon">RESGROUP:1AFE
RESGROUP:1AFE </span>iNotRoot<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1AFE                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">RESGROUP:1B00                 </span><span style="color:navy">mov     dx, [</span>ComspOffset<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1B04                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:1B05                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1B06                 </span><span style="color:navy">mov     ax, </span><span style="color:green">3D00h
</span><span style="color:maroon">RESGROUP:1B09                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - OPEN DISK FILE WITH HANDLE
<span style="color:maroon">RESGROUP:1B09                                         </span>; DS:DX -&gt; ASCIZ filename
<span style="color:maroon">RESGROUP:1B09                                         </span>; AL = access mode
<span style="color:maroon">RESGROUP:1B09                                         </span>; 0 - read
<span style="color:maroon">RESGROUP:1B0B                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1B0C                 </span><span style="color:navy">jb      short </span>SetComsrBad
<span style="color:maroon">RESGROUP:1B0E                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:maroon">RESGROUP:1B10                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:maroon">RESGROUP:1B12                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:maroon">RESGROUP:1B12                                         </span>; BX = file handle
<span style="color:maroon">RESGROUP:1B14
RESGROUP:1B14 </span>SetComsrRet<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1B14                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">RESGROUP:1B15                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">RESGROUP:1B16                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1B17                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:1B18                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:1B19                 </span>assume es:RESGROUP
<span style="color:maroon">RESGROUP:1B19                 </span><span style="color:navy">jmp     </span>Parse_command_line
<span style="color:maroon">RESGROUP:1B1C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1B1C
RESGROUP:1B1C </span>SetComsrBad<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1B1C                 </span><span style="color:navy">mov     dx, offset </span>BADCOMLKMES
<span style="color:maroon">RESGROUP:1B1F                 </span><span style="color:navy">call    </span><span style="background:blue"><span style="color:maroon">5A6Ch</span></span>           ; TRIAGEERROR equ TRANSTART+TriageError
<span style="color:maroon">RESGROUP:1B1F                                         </span>; call TRIAGEERROR ; TRANSTART+31DCh
<span style="color:maroon">RESGROUP:1B22                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">65
</span><span style="color:maroon">RESGROUP:1B25                 </span><span style="color:navy">jnz     short </span>doprt
<span style="color:maroon">RESGROUP:1B27                 </span><span style="color:navy">mov     dx, offset </span>BADCOMACCMSG
<span style="color:maroon">RESGROUP:1B2A
RESGROUP:1B2A </span>doprt<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1B2A                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:1B2D                 </span><span style="color:navy">mov     si, offset </span>COMSPECT <span style="color:gray">; &quot;\\COMMAND.COM&quot;
</span><span style="color:maroon">RESGROUP:1B30                 </span><span style="color:navy">mov     di, [</span>ComspOffset<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1B34                 </span><span style="color:navy">mov     cx, </span><span style="color:green">14
</span><span style="color:maroon">RESGROUP:1B37                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">RESGROUP:1B39                 </span><span style="color:navy">jmp     short </span>SetComsrRet
<span style="color:maroon">RESGROUP:1B3B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1B3B
RESGROUP:1B3B </span>ArgsDone<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1B3B                 </span><span style="color:navy">mov     es, [</span>EnvirSeg<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1B3F                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:1B3F                 </span><span style="color:navy">cmp     [</span>PermCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1B44                 </span><span style="color:navy">jz      short </span>ComReturns
<span style="color:maroon">RESGROUP:1B46                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:1B47                 </span><span style="color:navy">mov     ah, </span><span style="color:green">50h         </span>; SET_CURRENT_PDB
<span style="color:maroon">RESGROUP:1B49                 </span><span style="color:navy">mov     bx, ds
</span><span style="color:maroon">RESGROUP:1B4B                 </span><span style="color:navy">mov     es, bx
</span><span style="color:maroon">RESGROUP:1B4D                 </span>assume es:RESGROUP
<span style="color:maroon">RESGROUP:1B4D                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ internal - SET PSP SEGMENT
<span style="color:maroon">RESGROUP:1B4D                                         </span>; BX = segment address of new PSP
<span style="color:maroon">RESGROUP:1B4F                 </span><span style="color:navy">mov     di, </span><span style="color:#ff8000">0Ah         </span>; PDB.EXIT
<span style="color:maroon">RESGROUP:1B52                 </span><span style="color:navy">mov     ax, offset </span>LodCom_Trap
<span style="color:maroon">RESGROUP:1B55                 </span><span style="color:navy">stosw
</span><span style="color:maroon">RESGROUP:1B56                 </span><span style="color:navy">mov     ax, ds
</span><span style="color:maroon">RESGROUP:1B58                 </span><span style="color:navy">stosw
</span><span style="color:maroon">RESGROUP:1B59                 </span><span style="color:navy">mov     ax, offset </span>Ctrlc_Trap
<span style="color:maroon">RESGROUP:1B5C                 </span><span style="color:navy">stosw
</span><span style="color:maroon">RESGROUP:1B5D                 </span><span style="color:navy">mov     ax, ds
</span><span style="color:maroon">RESGROUP:1B5F                 </span><span style="color:navy">stosw
</span><span style="color:maroon">RESGROUP:1B60                 </span><span style="color:navy">mov     ax, offset </span>CritErr_Trap
<span style="color:maroon">RESGROUP:1B63                 </span><span style="color:navy">stosw
</span><span style="color:maroon">RESGROUP:1B64                 </span><span style="color:navy">mov     ax, ds
</span><span style="color:maroon">RESGROUP:1B66                 </span><span style="color:navy">stosw
</span><span style="color:maroon">RESGROUP:1B67                 </span><span style="color:navy">mov     [word ptr ds:</span><span style="color:green">16h</span><span style="color:navy">], ds </span>; [PDB.PARENT_PID]
<span style="color:maroon">RESGROUP:1B6B                 </span><span style="color:navy">mov     dx, offset </span>Int2e_Trap
<span style="color:maroon">RESGROUP:1B6E                 </span><span style="color:navy">mov     ax, </span><span style="color:green">252Eh       </span>; (SET_INTERRUPT_VECTOR SHL 8) OR 2Eh
<span style="color:maroon">RESGROUP:1B71                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET INTERRUPT VECTOR
<span style="color:maroon">RESGROUP:1B71                                         </span>; AL = interrupt number
<span style="color:maroon">RESGROUP:1B71                                         </span>; DS:DX = new vector to be used for specified interrupt
<span style="color:maroon">RESGROUP:1B73                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:1B74                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:1B74
RESGROUP:1B74 </span>ComReturns<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1B74                 </span><span style="color:navy">mov     ax, [ds:</span><span style="color:green">16h</span><span style="color:navy">]    </span>; [PDB.PARENT_PID]
<span style="color:maroon">RESGROUP:1B77                 </span><span style="color:navy">mov     [</span>Parent<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1B7A                 </span><span style="color:navy">mov     [word ptr ds:</span><span style="color:green">16h</span><span style="color:navy">], ds </span>; [PDB.PARENT_PID]
<span style="color:maroon">RESGROUP:1B7E                 </span><span style="color:navy">mov     ax, [ds:</span><span style="color:green">18h</span><span style="color:navy">]    </span>; [PDB.JFN_TABLE]
<span style="color:maroon">RESGROUP:1B81                 </span><span style="color:navy">mov     [</span>Io_Save<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1B84                 </span><span style="color:navy">mov     [</span>Com_Ptr<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], ds
</span><span style="color:maroon">RESGROUP:1B88                 </span><span style="color:navy">mov     [</span>Com_Fcb1<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], ds
</span><span style="color:maroon">RESGROUP:1B8C                 </span><span style="color:navy">mov     [</span>Com_Fcb2<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], ds
</span><span style="color:maroon">RESGROUP:1B90                 </span><span style="color:navy">mov     di, offset </span>ComSpec
<span style="color:maroon">RESGROUP:1B93                 </span><span style="color:navy">mov     si, [</span>ComspOffset<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1B97                 </span><span style="color:navy">cmp     [</span>AllocedEnv<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1B9C                 </span><span style="color:navy">mov     ax, ds
</span><span style="color:maroon">RESGROUP:1B9E                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:1B9F                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1BA0                 </span><span style="color:navy">mov     es, ax
</span><span style="color:maroon">RESGROUP:1BA2                 </span>assume es:RESGROUP
<span style="color:maroon">RESGROUP:1BA2                 </span><span style="color:navy">jnz     short </span>CopyComsp
<span style="color:maroon">RESGROUP:1BA4                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:1BA5                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1BA6                 </span><span style="color:navy">mov     si, offset </span>ComspString <span style="color:gray">; &quot;COMSPEC=\\COMMAND.COM&quot;
</span><span style="color:maroon">RESGROUP:1BA9                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:1BAA                 </span><span style="color:navy">push    di
</span><span style="color:maroon">RESGROUP:1BAB                 </span><span style="color:navy">call    </span>IfindE
<span style="color:maroon">RESGROUP:1BAE                 </span><span style="color:navy">mov     si, di
</span><span style="color:maroon">RESGROUP:1BB0                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:1BB1                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1BB2                 </span><span style="color:navy">pop     di
</span><span style="color:maroon">RESGROUP:1BB3                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:1BB4                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:1BB4                 </span><span style="color:navy">jnb     short </span>CopyComsp
<span style="color:maroon">RESGROUP:1BB6                 </span><span style="color:navy">mov     si, offset </span>ComspString <span style="color:gray">; &quot;COMSPEC=\\COMMAND.COM&quot;
</span><span style="color:maroon">RESGROUP:1BB9                 </span><span style="color:navy">add     si, </span><span style="color:#ff8000">8           </span>; ComspString+ComspStrLen
<span style="color:maroon">RESGROUP:1BBD                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:1BBE                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1BBF
RESGROUP:1BBF </span>CopyComsp<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1BBF                 </span><span style="color:navy">mov     [es:</span>PutBackComSpec<span style="color:navy">], di
</span><span style="color:maroon">RESGROUP:1BC4                 </span><span style="color:navy">cmp     [byte ptr si+</span><span style="color:#ff8000">1</span><span style="color:navy">], &#039;</span><span style="color:green">:&#039;
</span><span style="color:maroon">RESGROUP:1BC8                 </span><span style="color:navy">jnz     short </span>CopyComspLoop
<span style="color:maroon">RESGROUP:1BCA                 </span><span style="color:navy">add     [es:</span>PutBackComSpec<span style="color:navy">], </span><span style="color:#ff8000">2
</span><span style="color:maroon">RESGROUP:1BD0
RESGROUP:1BD0 </span>CopyComspLoop<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1BD0                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">RESGROUP:1BD1                 </span><span style="color:navy">stosb
</span><span style="color:maroon">RESGROUP:1BD2                 </span><span style="color:navy">or      al, al
</span><span style="color:maroon">RESGROUP:1BD4                 </span><span style="color:navy">jnz     short </span>CopyComspLoop
<span style="color:maroon">RESGROUP:1BD6                 </span><span style="color:navy">mov     [es:</span>ComSpec_End<span style="color:navy">], di
</span><span style="color:maroon">RESGROUP:1BDB                 </span><span style="color:navy">dec     [es:</span>ComSpec_End<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1BE0                 </span><span style="color:navy">mov     ah, [es:</span>ComDrv<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1BE5                 </span><span style="color:navy">add     ah, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;   </span>; &#039;A&#039;-1
<span style="color:maroon">RESGROUP:1BE8                 </span><span style="color:navy">mov     [es:</span>PutBackDrv<span style="color:navy">], ah
</span><span style="color:maroon">RESGROUP:1BED                 </span><span style="color:navy">call    </span>setup_for_messages
<span style="color:maroon">RESGROUP:1BF0                 </span><span style="color:navy">call    </span>Setup_res_end
<span style="color:maroon">RESGROUP:1BF3                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:1BF4                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1BF5
RESGROUP:1BF5 </span>EnvMaximum<span style="color:navy">:                             </span>;
<span style="color:maroon">RESGROUP:1BF5                 </span><span style="color:navy">mov     si, </span><span style="color:#ff8000">2890h       </span>; TRANSTART
<span style="color:maroon">RESGROUP:1BF8                 </span><span style="color:navy">add     si, </span><span style="color:#ff8000">100h        </span>; TRANSTART+100h
<span style="color:maroon">RESGROUP:1BFC                 </span><span style="color:navy">mov     cx, </span><span style="color:green">9B47h       </span>; TRANDATAEND-100h
<span style="color:maroon">RESGROUP:1BFF                 </span><span style="color:navy">cld
</span><span style="color:maroon">RESGROUP:1C00                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:maroon">RESGROUP:1C02                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">RESGROUP:1C04
RESGROUP:1C04 </span>Ichksum<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1C04                 </span><span style="color:navy">lodsw
</span><span style="color:maroon">RESGROUP:1C05                 </span><span style="color:navy">add     dx, ax
</span><span style="color:maroon">RESGROUP:1C07                 </span><span style="color:navy">adc     dx, </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1C0A                 </span><span style="color:navy">loop    </span>Ichksum
<span style="color:maroon">RESGROUP:1C0C                 </span><span style="color:navy">mov     [</span>Sum<span style="color:navy">], dx
</span><span style="color:maroon">RESGROUP:1C10                 </span><span style="color:navy">cmp     [</span>PRDATTM<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1C15                 </span><span style="color:navy">jnz     short </span>NoBatchSeg
<span style="color:maroon">RESGROUP:1C17                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">4           </span>; ((BATCHSEGMENT.SIZE)+16+15)/16
<span style="color:maroon">RESGROUP:1C1A                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h
</span><span style="color:maroon">RESGROUP:1C1C                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ALLOCATE MEMORY
<span style="color:maroon">RESGROUP:1C1C                                         </span>; BX = number of 16-byte paragraphs desired
<span style="color:maroon">RESGROUP:1C1E                 </span><span style="color:navy">jb      short </span>NoBatchSeg
<span style="color:maroon">RESGROUP:1C20                 </span><span style="color:navy">mov     [</span>Batch<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1C23
RESGROUP:1C23 </span>NoBatchSeg<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1C23                 </span><span style="color:navy">mov     bx, [</span>EnvirSeg<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1C27                 </span><span style="color:navy">mov     [</span>OldEnv<span style="color:navy">], bx
</span><span style="color:maroon">RESGROUP:1C2B                 </span><span style="color:navy">mov     [</span>UsedEnv<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1C31                 </span><span style="color:navy">mov     ds, bx
</span><span style="color:maroon">RESGROUP:1C33                 </span><span style="color:navy">xor     si, si
</span><span style="color:maroon">RESGROUP:1C35                 </span><span style="color:navy">mov     di, si
</span><span style="color:maroon">RESGROUP:1C37                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">0FFFh       </span>; 4096-1
<span style="color:maroon">RESGROUP:1C3A                 </span><span style="color:navy">mov     [ss:</span>EnvMax<span style="color:navy">], bx
</span><span style="color:maroon">RESGROUP:1C3F                 </span><span style="color:navy">shl     bx, </span><span style="color:green">1
</span><span style="color:maroon">RESGROUP:1C41                 </span><span style="color:navy">shl     bx, </span><span style="color:green">1
</span><span style="color:maroon">RESGROUP:1C43                 </span><span style="color:navy">shl     bx, </span><span style="color:green">1
</span><span style="color:maroon">RESGROUP:1C45                 </span><span style="color:navy">shl     bx, </span><span style="color:green">1
</span><span style="color:maroon">RESGROUP:1C47                 </span><span style="color:navy">mov     [ss:</span>EnvMax<span style="color:navy">], bx
</span><span style="color:maroon">RESGROUP:1C4C                 </span><span style="color:navy">dec     bx
</span><span style="color:maroon">RESGROUP:1C4D                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">RESGROUP:1C4F
RESGROUP:1C4F </span>NxtStr<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1C4F                 </span><span style="color:navy">call    </span>GetStrLen
<span style="color:maroon">RESGROUP:1C52                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:1C53                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:1C54                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1C55                 </span><span style="color:navy">add     [</span>UsedEnv<span style="color:navy">], cx
</span><span style="color:maroon">RESGROUP:1C59                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1C5A                 </span><span style="color:navy">cmp     cx, </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:1C5D                 </span><span style="color:navy">jz      short </span>EnvExit
<span style="color:maroon">RESGROUP:1C5F                 </span><span style="color:navy">sub     bx, cx
</span><span style="color:maroon">RESGROUP:1C61                 </span><span style="color:navy">jnb     short </span>OkCpyStr
<span style="color:maroon">RESGROUP:1C63                 </span><span style="color:navy">inc     dx
</span><span style="color:maroon">RESGROUP:1C64                 </span><span style="color:navy">jmp     short </span>EnvExit
<span style="color:maroon">RESGROUP:1C66 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1C66
RESGROUP:1C66 </span>OkCpyStr<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1C66                 </span><span style="color:navy">jmp     short </span>NxtStr
<span style="color:maroon">RESGROUP:1C68 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1C68
RESGROUP:1C68 </span>EnvExit<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1C68                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:1C69                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1C6A                 </span><span style="color:navy">or      dx, dx
</span><span style="color:maroon">RESGROUP:1C6C                 </span><span style="color:navy">jz      short </span>EnvNoErr
<span style="color:maroon">RESGROUP:1C6E                 </span><span style="color:navy">mov     dx, offset </span>OUTENVMSG
<span style="color:maroon">RESGROUP:1C71                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:1C74
RESGROUP:1C74 </span>EnvNoErr<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1C74                 </span><span style="color:navy">mov     ax, [</span>EnvSiz<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1C77                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:maroon">RESGROUP:1C79                 </span><span style="color:navy">shl     ax, cl
</span><span style="color:maroon">RESGROUP:1C7B                 </span><span style="color:navy">cmp     ax, [</span>UsedEnv<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1C7F                 </span><span style="color:navy">ja      short </span>st_envsize
<span style="color:maroon">RESGROUP:1C81                 </span><span style="color:navy">mov     ax, [</span>UsedEnv<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1C84                 </span><span style="color:navy">add     ax, </span><span style="color:#ff8000">0Fh
</span><span style="color:maroon">RESGROUP:1C87
RESGROUP:1C87 </span>st_envsize<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1C87                 </span><span style="color:navy">shr     ax, cl
</span><span style="color:maroon">RESGROUP:1C89                 </span><span style="color:navy">mov     [</span>EnvSiz<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1C8C                 </span><span style="color:navy">cmp     [</span>Batch<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1C91                 </span><span style="color:navy">jnz     short </span>DoDate
<span style="color:maroon">RESGROUP:1C93                 </span><span style="color:navy">jmp     </span>NoDttm
<span style="color:maroon">RESGROUP:1C96 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1C96
RESGROUP:1C96 </span>DoDate<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1C96                 </span><span style="color:navy">mov     ax, [</span>Batch<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1C99                 </span><span style="color:navy">mov     [</span>EchoFlag<span style="color:navy">], </span><span style="color:#ff8000">3
</span><span style="color:maroon">RESGROUP:1C9E                 </span><span style="color:navy">mov     [</span>Nest<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:1CA4                 </span><span style="color:navy">mov     es, ax
</span><span style="color:maroon">RESGROUP:1CA6                 </span><span style="color:navy">xor     di, di
</span><span style="color:maroon">RESGROUP:1CA8                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1CAA                 </span><span style="color:navy">stosb
</span><span style="color:maroon">RESGROUP:1CAB                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:1CAD                 </span><span style="color:navy">stosb
</span><span style="color:maroon">RESGROUP:1CAE                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:maroon">RESGROUP:1CB0                 </span><span style="color:navy">stosb
</span><span style="color:maroon">RESGROUP:1CB1                 </span><span style="color:navy">stosw
</span><span style="color:maroon">RESGROUP:1CB2                 </span><span style="color:navy">stosw
</span><span style="color:maroon">RESGROUP:1CB3                 </span><span style="color:navy">stosb
</span><span style="color:maroon">RESGROUP:1CB4                 </span><span style="color:navy">stosw
</span><span style="color:maroon">RESGROUP:1CB5                 </span><span style="color:navy">stosw
</span><span style="color:maroon">RESGROUP:1CB6                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">RESGROUP:1CB9                 </span><span style="color:navy">mov     cx, </span><span style="color:green">10
</span><span style="color:maroon">RESGROUP:1CBC                 </span><span style="color:navy">rep stosw
</span><span style="color:maroon">RESGROUP:1CBE                 </span><span style="color:navy">cmp     [</span>AUTOBAT<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">RESGROUP:1CC3                 </span><span style="color:navy">jnz     short </span>NoAutSet
<span style="color:maroon">RESGROUP:1CC5                 </span><span style="color:navy">mov     ah, </span><span style="color:green">19h
</span><span style="color:maroon">RESGROUP:1CC7                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - GET DEFAULT DISK NUMBER
<span style="color:maroon">RESGROUP:1CC9                 </span><span style="color:navy">add     al, [</span>ucasea<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1CCD                 </span><span style="color:navy">mov     [</span>AUTOBAT<span style="color:navy">], al
</span><span style="color:maroon">RESGROUP:1CD0
RESGROUP:1CD0 </span>NoAutSet<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1CD0                 </span><span style="color:navy">mov     si, offset </span>AUTOBAT
<span style="color:maroon">RESGROUP:1CD3                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">8
</span><span style="color:maroon">RESGROUP:1CD6                 </span><span style="color:navy">rep movsw
</span><span style="color:maroon">RESGROUP:1CD8                 </span><span style="color:navy">movsb
</span><span style="color:maroon">RESGROUP:1CD9                 </span><span style="color:navy">mov     dx, offset </span>AUTOBAT
<span style="color:maroon">RESGROUP:1CDC                 </span><span style="color:navy">mov     ax, </span><span style="color:green">3D00h
</span><span style="color:maroon">RESGROUP:1CDF                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - OPEN DISK FILE WITH HANDLE
<span style="color:maroon">RESGROUP:1CDF                                         </span>; DS:DX -&gt; ASCIZ filename
<span style="color:maroon">RESGROUP:1CDF                                         </span>; AL = access mode
<span style="color:maroon">RESGROUP:1CDF                                         </span>; 0 - read
<span style="color:maroon">RESGROUP:1CE1                 </span><span style="color:navy">jb      short </span>noabat
<span style="color:maroon">RESGROUP:1CE3                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:maroon">RESGROUP:1CE5                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:maroon">RESGROUP:1CE7                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:maroon">RESGROUP:1CE7                                         </span>; BX = file handle
<span style="color:maroon">RESGROUP:1CE9                 </span><span style="color:navy">jmp     short </span>Drv0
<span style="color:maroon">RESGROUP:1CEB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1CEB
RESGROUP:1CEB </span>noabat<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1CEB                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">RESGROUP:1CEC                 </span><span style="color:navy">call    </span>Setup_Seg
<span style="color:maroon">RESGROUP:1CEF                 </span><span style="color:navy">mov     [</span>triage_add_seg<span style="color:navy">], ax </span>; [triage_add+2]
<span style="color:maroon">RESGROUP:1CF2                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">RESGROUP:1CF3                 </span><span style="color:navy">call    [dword ptr </span>triage_add<span style="color:navy">] </span>; call far [triage_add]
<span style="color:maroon">RESGROUP:1CF3                                         </span>; get extended error
<span style="color:maroon">RESGROUP:1CF7                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">65
</span><span style="color:maroon">RESGROUP:1CFA                 </span><span style="color:navy">jz      short </span>AccDenErr
<span style="color:maroon">RESGROUP:1CFC                 </span><span style="color:navy">jmp     short </span>OpenErr
<span style="color:maroon">RESGROUP:1CFE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1CFE
RESGROUP:1CFE </span>AccDenErr<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1CFE                 </span><span style="color:navy">mov     dx, offset </span>ACCDEN
<span style="color:maroon">RESGROUP:1D01                 </span><span style="color:navy">call    </span>RPrint
<span style="color:maroon">RESGROUP:1D04
RESGROUP:1D04 </span>OpenErr<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1D04                 </span><span style="color:navy">mov     es, [</span>Batch<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1D08                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h
</span><span style="color:maroon">RESGROUP:1D0A                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FREE MEMORY
<span style="color:maroon">RESGROUP:1D0A                                         </span>; ES = segment address of area to be freed
<span style="color:maroon">RESGROUP:1D0C                 </span><span style="color:navy">mov     [</span>Batch<span style="color:navy">], </span><span style="color:#ff8000">0      </span>; byte
<span style="color:maroon">RESGROUP:1D12                 </span><span style="color:navy">mov     [</span>EchoFlag<span style="color:navy">], </span><span style="color:#ff8000">1   </span>; byte
<span style="color:maroon">RESGROUP:1D17                 </span><span style="color:navy">mov     [</span>Nest<span style="color:navy">], </span><span style="color:#ff8000">0       </span>; word
<span style="color:maroon">RESGROUP:1D1D                 </span><span style="color:navy">mov     ax, offset </span>DATINIT
<span style="color:maroon">RESGROUP:1D20                 </span><span style="color:navy">mov     [</span>INITADD<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1D23                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2890h       </span>; TRANSTART
<span style="color:maroon">RESGROUP:1D26                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4           </span>; TRANSTART&gt;&gt;4
<span style="color:maroon">RESGROUP:1D28                 </span><span style="color:navy">shr     ax, cl
</span><span style="color:maroon">RESGROUP:1D2A                 </span><span style="color:navy">mov     cx, cs
</span><span style="color:maroon">RESGROUP:1D2C                 </span><span style="color:navy">add     ax, cx
</span><span style="color:maroon">RESGROUP:1D2E                 </span><span style="color:navy">mov     [</span>INITADD<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1D31                 </span><span style="color:navy">call    [dword ptr </span>INITADD<span style="color:navy">] </span>; call far [INITADD]
<span style="color:maroon">RESGROUP:1D35
RESGROUP:1D35 </span>NoDttm<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1D35                 </span><span style="color:navy">cmp     [</span>SingleCom<span style="color:navy">], </span><span style="color:#ff8000">0  </span>; if IBMVER
<span style="color:maroon">RESGROUP:1D3A                 </span><span style="color:navy">jnz     short </span>Drv0
<span style="color:maroon">RESGROUP:1D3C                 </span><span style="color:navy">mov     dx, offset </span>COPYRIGHTMSG
<span style="color:maroon">RESGROUP:1D3F                 </span><span style="color:navy">call    </span>RPrint          ;
<span style="color:maroon">RESGROUP:1D3F                                         </span>; endif
<span style="color:maroon">RESGROUP:1D42
RESGROUP:1D42 </span>Drv0<span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1D42                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:1D43                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">RESGROUP:1D44                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1D45                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0B707h
</span><span style="color:maroon">RESGROUP:1D48                 </span><span style="color:navy">mov     bx, [</span>Append_State<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1D4C                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - DOS 4.0 APPEND - SET APPEND FUNCTION STATE
<span style="color:maroon">RESGROUP:1D4C                                         </span>; BX = APPEND state bits
<span style="color:maroon">RESGROUP:1D4E                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1D4F                 </span><span style="color:navy">cmp     [</span>FirstCom<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:1D54                 </span><span style="color:navy">jz      short </span>move_code
<span style="color:maroon">RESGROUP:1D56                 </span><span style="color:navy">push    es
</span><span style="color:maroon">RESGROUP:1D57                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:1D58                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:1D59                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:1D5A                 </span>assume es:RESGROUP
<span style="color:maroon">RESGROUP:1D5A                 </span><span style="color:navy">mov     di, offset </span>Int2f_Entry
<span style="color:maroon">RESGROUP:1D5D                 </span><span style="color:navy">lds     si, [es:</span>ResJmpTable<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1D62                 </span><span style="color:navy">mov     cx, </span><span style="color:green">11
</span><span style="color:maroon">RESGROUP:1D65                 </span><span style="color:navy">shl     cx, </span><span style="color:green">1
</span><span style="color:maroon">RESGROUP:1D67                 </span><span style="color:navy">shl     cx, </span><span style="color:green">1
</span><span style="color:maroon">RESGROUP:1D69                 </span><span style="color:navy">cld
</span><span style="color:maroon">RESGROUP:1D6A                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">RESGROUP:1D6C                 </span><span style="color:navy">mov     al, [byte ptr </span>cox_location<span style="color:navy">] </span><span style="color:gray">; &quot;cox&quot;
</span><span style="color:maroon">RESGROUP:1D6F                 </span><span style="color:navy">mov     [byte ptr es:</span>cox_location<span style="color:navy">], al </span><span style="color:gray">; &quot;cox&quot;
</span><span style="color:maroon">RESGROUP:1D73                 </span><span style="color:navy">mov     ax, [word ptr </span>cox_location<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1D76                 </span><span style="color:navy">mov     [word ptr es:</span>cox_location<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1D7A                 </span><span style="color:navy">cmp     [word ptr es:di-</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:green">0F000h
</span><span style="color:maroon">RESGROUP:1D80                 </span><span style="color:navy">jb      short </span>res_low
<span style="color:maroon">RESGROUP:1D82                 </span><span style="color:navy">mov     [es:</span>ComInHMA<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:1D88
RESGROUP:1D88 </span>res_low<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1D88                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1D89                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">RESGROUP:1D8A                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:1D8A                 </span><span style="color:navy">jmp     short </span>finish_init
<span style="color:maroon">RESGROUP:1D8C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1D8C
RESGROUP:1D8C </span>move_code<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1D8C                 </span><span style="color:navy">call    </span>Move_res_code
<span style="color:maroon">RESGROUP:1D8F
RESGROUP:1D8F </span>finish_init<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1D8F                 </span><span style="color:navy">cmp     [</span>PermCom<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">RESGROUP:1D94                 </span><span style="color:navy">jnz     short </span>finish_init_@
<span style="color:maroon">RESGROUP:1D96                 </span><span style="color:navy">cmp     [</span>COMMAND_HIGH<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; COMMAND.COM will be moved to HMA/UMB flag (=1)
<span style="color:maroon">RESGROUP:1D9B                 </span><span style="color:navy">jnz     short </span>finish_init_@
<span style="color:maroon">RESGROUP:1D9D                 </span><span style="color:navy">mov     bx, </span><span style="color:green">40h         </span>; high memory first fit
<span style="color:maroon">RESGROUP:1DA0                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5801h       </span>; set allocation strategy
<span style="color:maroon">RESGROUP:1DA3                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:maroon">RESGROUP:1DA3                                         </span>; AL = function code: set allocation strategy
<span style="color:maroon">RESGROUP:1DA5                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">1           </span>; add UMBs to DOS memory chain
<span style="color:maroon">RESGROUP:1DA8                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5803h       </span>; set UMB link state
<span style="color:maroon">RESGROUP:1DAB                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:maroon">RESGROUP:1DAB                                         </span>; AL = function code: (DOS 5beta) set UMB link state
<span style="color:maroon">RESGROUP:1DAD                 </span><span style="color:navy">jb      short </span>finish_init_@
<span style="color:maroon">RESGROUP:1DAF                 </span><span style="color:navy">mov     bx, [</span>ResSize<span style="color:navy">]
</span><span style="color:maroon">RESGROUP:1DB3                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h
</span><span style="color:maroon">RESGROUP:1DB5                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ALLOCATE MEMORY
<span style="color:maroon">RESGROUP:1DB5                                         </span>; BX = number of 16-byte paragraphs desired
<span style="color:maroon">RESGROUP:1DB7                 </span><span style="color:navy">jnb     short </span>patch_segments_hma
<span style="color:maroon">RESGROUP:1DB9
RESGROUP:1DB9 </span>finish_init_@<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1DB9                 </span><span style="color:navy">jmp     </span>EndInit
<span style="color:maroon">RESGROUP:1DBC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1DBC
RESGROUP:1DBC </span>patch_segments_hma<span style="color:navy">:                     </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1DBC                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">0Ch</span><span style="color:navy">], ax    </span>; [PDB.EXIT+2]
<span style="color:maroon">RESGROUP:1DBF                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">10h</span><span style="color:navy">], ax    </span>; [PDB.CTRL_C+2]
<span style="color:maroon">RESGROUP:1DC2                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">14h</span><span style="color:navy">], ax    </span>; [PDB.FATAL_ABORT+2]
<span style="color:maroon">RESGROUP:1DC5                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">16h</span><span style="color:navy">], ax    </span>; [PDB.PARENT_PID]
<span style="color:maroon">RESGROUP:1DC8                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">36h</span><span style="color:navy">], ax    </span>; [PDB.JFN_Pointer+2]
<span style="color:maroon">RESGROUP:1DCB                 </span><span style="color:navy">mov     [</span>Parent<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1DCE                 </span><span style="color:navy">mov     [word ptr </span>OldTerm<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1DD1                 </span><span style="color:navy">mov     [</span>Com_Ptr<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1DD4                 </span><span style="color:navy">mov     [</span>Com_Fcb1<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1DD7                 </span><span style="color:navy">mov     [</span>Com_Fcb2<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1DDA                 </span><span style="color:navy">mov     [</span>MySeg<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1DDD                 </span><span style="color:navy">mov     [</span>MySeg1<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1DE0                 </span><span style="color:navy">mov     [</span>MySeg2<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1DE3                 </span><span style="color:navy">mov     [</span>MySeg3<span style="color:navy">], ax
</span><span style="color:maroon">RESGROUP:1DE6                 </span><span style="color:navy">mov     [</span>int2fh_segm<span style="color:navy">], ax </span>; [Carousel_i2f_Hook+3]
<span style="color:maroon">RESGROUP:1DE9                 </span><span style="color:navy">mov     di, (offset </span>Int2f_Entry<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:maroon">RESGROUP:1DEC                 </span><span style="color:navy">cmp     [word ptr di], </span><span style="color:green">0FFFFh
</span><span style="color:maroon">RESGROUP:1DEF                 </span><span style="color:navy">jz      short </span>already_hma
<span style="color:maroon">RESGROUP:1DF1                 </span><span style="color:navy">mov     cl, </span><span style="color:green">11          </span>; NUM_RELOC_ENTRIES
<span style="color:maroon">RESGROUP:1DF3
RESGROUP:1DF3 </span>patch_entry_seg<span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1DF3                 </span><span style="color:navy">mov     [di], ax
</span><span style="color:maroon">RESGROUP:1DF5                 </span><span style="color:navy">add     di, </span><span style="color:#ff8000">4
</span><span style="color:maroon">RESGROUP:1DF8                 </span><span style="color:navy">loop    </span>patch_entry_seg
<span style="color:maroon">RESGROUP:1DFA
RESGROUP:1DFA </span>already_hma<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1DFA                 </span><span style="color:navy">mov     es, ax
</span><span style="color:maroon">RESGROUP:1DFC                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:1DFC                 </span><span style="color:navy">xor     si, si
</span><span style="color:maroon">RESGROUP:1DFE                 </span><span style="color:navy">xor     di, di
</span><span style="color:maroon">RESGROUP:1E00                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">3           </span>; BX = resident part size in paragraphs
<span style="color:maroon">RESGROUP:1E00                                         </span>; after shifting: resident part size in words
<span style="color:maroon">RESGROUP:1E02                 </span><span style="color:navy">shl     bx, cl          </span>; move resident part of COMMAND.COM to HMA (UMB)
<span style="color:maroon">RESGROUP:1E04                 </span><span style="color:navy">mov     cx, bx          </span>; number of words
<span style="color:maroon">RESGROUP:1E06                 </span><span style="color:navy">rep movsw
</span><span style="color:maroon">RESGROUP:1E08                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">RESGROUP:1E09                 </span><span style="color:navy">mov     ds, cx          </span>; 0
<span style="color:maroon">RESGROUP:1E0B                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">0BAh</span><span style="color:navy">], ax   </span>; INT 2Eh segment
<span style="color:maroon">RESGROUP:1E0E                 </span><span style="color:navy">inc     ax
</span><span style="color:maroon">RESGROUP:1E0F                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">0BEh</span><span style="color:navy">], ax   </span>; INT 2Fh segment
<span style="color:maroon">RESGROUP:1E12                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">RESGROUP:1E13                 </span><span style="color:navy">mov     bx, es
</span><span style="color:maroon">RESGROUP:1E15                 </span><span style="color:navy">mov     ah, </span><span style="color:green">50h
</span><span style="color:maroon">RESGROUP:1E17                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ internal - SET PSP SEGMENT
<span style="color:maroon">RESGROUP:1E17                                         </span>; BX = segment address of new PSP
<span style="color:maroon">RESGROUP:1E19                 </span><span style="color:navy">dec     bx
</span><span style="color:maroon">RESGROUP:1E1A                 </span><span style="color:navy">mov     es, bx          </span>; memory arena header (segment)
<span style="color:maroon">RESGROUP:1E1C                 </span>assume es:nothing
<span style="color:maroon">RESGROUP:1E1C                 </span><span style="color:navy">inc     bx              </span>; PSP (program) address/segment
<span style="color:maroon">RESGROUP:1E1D                 </span><span style="color:navy">mov     [es:</span><span style="color:green">1</span><span style="color:navy">], bx      </span>; [ARENA.owner]
<span style="color:maroon">RESGROUP:1E22                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">8</span><span style="color:navy">], </span><span style="color:#ff8000">4F43h </span>; &#039;CO&#039; ; [es:arena_name]
<span style="color:maroon">RESGROUP:1E29                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">0Ah</span><span style="color:navy">], </span><span style="color:#ff8000">4D4Dh </span>; &#039;MM&#039;
<span style="color:maroon">RESGROUP:1E30                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">0Ch</span><span style="color:navy">], </span><span style="color:#ff8000">4E41h </span>; &#039;AN&#039;
<span style="color:maroon">RESGROUP:1E37                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">0Eh</span><span style="color:navy">], </span><span style="color:#ff8000">44h </span><span style="color:gray">; &#039;D&#039; </span>; &#039;D&#039;
<span style="color:maroon">RESGROUP:1E3E                 </span><span style="color:navy">inc     [</span>COMMAND_HIGH<span style="color:navy">]  </span>; = 2
<span style="color:maroon">RESGROUP:1E3E                                         </span>; Resident portion of COMMAND.COM is
<span style="color:maroon">RESGROUP:1E3E                                         </span>; in HMA/UMB flag (=2)
<span style="color:maroon">RESGROUP:1E42                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">RESGROUP:1E43                 </span><span style="color:navy">mov     ax, offset </span>EndInit
<span style="color:maroon">RESGROUP:1E46                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">RESGROUP:1E47                 </span><span style="color:navy">retf
</span><span style="color:black">RESGROUP:1E48
RESGROUP:1E48 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1E48
RESGROUP:1E48
RESGROUP:1E48 </span>proc            GetStrLen near          <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1E48                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">RESGROUP:1E4A
RESGROUP:1E4A </span><span style="color:gray">NxtChar</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1E4A                 </span><span style="color:navy">lodsb
</span><span style="color:black">RESGROUP:1E4B                 </span><span style="color:navy">inc     cx
</span><span style="color:black">RESGROUP:1E4C                 </span><span style="color:navy">or      al, al
</span><span style="color:black">RESGROUP:1E4E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NxtChar
</span><span style="color:black">RESGROUP:1E50                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1E50 </span>endp            GetStrLen
<span style="color:black">RESGROUP:1E50
RESGROUP:1E51
RESGROUP:1E51 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1E51
RESGROUP:1E51
RESGROUP:1E51 </span>proc            Setup_Seg near          <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1E51                 </span><span style="color:navy">mov     ax, [</span>TrnSeg<span style="color:navy">]
</span><span style="color:black">RESGROUP:1E54                 </span><span style="color:navy">cmp     [</span>TrnMvFlg<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:black">RESGROUP:1E59                 </span><span style="color:navy">jz      short </span><span style="color:gray">setup_end
</span><span style="color:black">RESGROUP:1E5B                 </span><span style="color:navy">push    bx
</span><span style="color:black">RESGROUP:1E5C                 </span><span style="color:navy">mov     bx, cs
</span><span style="color:black">RESGROUP:1E5E                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2890h       </span>; TRANSTART
<span style="color:black">RESGROUP:1E61                 </span><span style="color:navy">shr     ax, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:1E63                 </span><span style="color:navy">shr     ax, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:1E65                 </span><span style="color:navy">shr     ax, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:1E67                 </span><span style="color:navy">shr     ax, </span><span style="color:green">1           </span>; TRANSTART&gt;&gt;4
<span style="color:black">RESGROUP:1E69                 </span><span style="color:navy">add     ax, bx
</span><span style="color:black">RESGROUP:1E6B                 </span><span style="color:navy">pop     bx
</span><span style="color:black">RESGROUP:1E6C
RESGROUP:1E6C </span><span style="color:gray">setup_end</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1E6C                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1E6C </span>endp            Setup_Seg
<span style="color:black">RESGROUP:1E6C
RESGROUP:1E6D
RESGROUP:1E6D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1E6D
RESGROUP:1E6D
RESGROUP:1E6D </span>proc            RPrintParse near        <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1E6D                 </span><span style="color:navy">push    dx
</span><span style="color:black">RESGROUP:1E6E                 </span><span style="color:navy">xchg    bx, dx
</span><span style="color:black">RESGROUP:1E70                 </span><span style="color:navy">dec     bx
</span><span style="color:black">RESGROUP:1E71                 </span><span style="color:navy">shl     bx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:1E73                 </span><span style="color:navy">mov     bx, [</span>PARSMSGPTRS<span style="color:navy">+bx]
</span><span style="color:black">RESGROUP:1E77                 </span><span style="color:navy">xchg    bx, dx
</span><span style="color:black">RESGROUP:1E79                 </span><span style="color:navy">call    </span>RPrint
<span style="color:black">RESGROUP:1E7C                 </span><span style="color:navy">pop     dx
</span><span style="color:black">RESGROUP:1E7D                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1E7D </span>endp            RPrintParse
<span style="color:black">RESGROUP:1E7D
RESGROUP:1E7E
RESGROUP:1E7E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1E7E
RESGROUP:1E7E
RESGROUP:1E7E </span>proc            IfindE near             <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1E7E                 </span><span style="color:navy">call    </span>ifind
<span style="color:black">RESGROUP:1E81                 </span><span style="color:navy">jb      short </span>ifind2
<span style="color:black">RESGROUP:1E83                 </span><span style="color:navy">jmp     short </span>Iscasb1
<span style="color:black">RESGROUP:1E83 </span>endp            IfindE
<span style="color:black">RESGROUP:1E83
RESGROUP:1E85
RESGROUP:1E85 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1E85
RESGROUP:1E85
RESGROUP:1E85 </span>proc            ifind near              <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1E85                 </span><span style="color:navy">cld
</span><span style="color:black">RESGROUP:1E86                 </span><span style="color:navy">call    </span>Icount0
<span style="color:black">RESGROUP:1E89                 </span><span style="color:navy">mov     es, [</span>EnvirSeg<span style="color:navy">]
</span><span style="color:black">RESGROUP:1E8D                 </span>assume es:nothing
<span style="color:black">RESGROUP:1E8D                 </span><span style="color:navy">xor     di, di
</span><span style="color:black">RESGROUP:1E8F
RESGROUP:1E8F </span><span style="color:gray">ifind1</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1E8F                 </span><span style="color:navy">push    cx
</span><span style="color:black">RESGROUP:1E90                 </span><span style="color:navy">push    si
</span><span style="color:black">RESGROUP:1E91                 </span><span style="color:navy">push    di
</span><span style="color:black">RESGROUP:1E92
RESGROUP:1E92 </span><span style="color:gray">ifind11</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1E92                 </span><span style="color:navy">lodsb
</span><span style="color:black">RESGROUP:1E93                 </span><span style="color:navy">call    </span>ITestKanj       ; ifdef DBCS
<span style="color:black">RESGROUP:1E96                 </span><span style="color:navy">jz      short </span><span style="color:gray">_NotKanj4
</span><span style="color:black">RESGROUP:1E98                 </span><span style="color:navy">dec     si
</span><span style="color:black">RESGROUP:1E99                 </span><span style="color:navy">lodsw
</span><span style="color:black">RESGROUP:1E9A                 </span><span style="color:navy">inc     di
</span><span style="color:black">RESGROUP:1E9B                 </span><span style="color:navy">inc     di
</span><span style="color:black">RESGROUP:1E9C                 </span><span style="color:navy">cmp     ax, [es:di-</span><span style="color:green">2</span><span style="color:navy">]
</span><span style="color:black">RESGROUP:1EA0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ifind12
</span><span style="color:black">RESGROUP:1EA2                 </span><span style="color:navy">dec     cx
</span><span style="color:black">RESGROUP:1EA3                 </span><span style="color:navy">loop    </span><span style="color:gray">ifind11
</span><span style="color:black">RESGROUP:1EA5                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ifind12   </span>; endif
<span style="color:black">RESGROUP:1EA7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:1EA7
RESGROUP:1EA7 </span><span style="color:gray">_NotKanj4</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1EA7                 </span><span style="color:navy">call    </span>iupconv
<span style="color:black">RESGROUP:1EAA                 </span><span style="color:navy">inc     di
</span><span style="color:black">RESGROUP:1EAB                 </span><span style="color:navy">cmp     al, [es:di-</span><span style="color:green">1</span><span style="color:navy">]
</span><span style="color:black">RESGROUP:1EAF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ifind12
</span><span style="color:black">RESGROUP:1EB1                 </span><span style="color:navy">loop    </span><span style="color:gray">ifind11
</span><span style="color:black">RESGROUP:1EB3
RESGROUP:1EB3 </span><span style="color:gray">ifind12</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1EB3                 </span><span style="color:navy">pop     di
</span><span style="color:black">RESGROUP:1EB4                 </span><span style="color:navy">pop     si
</span><span style="color:black">RESGROUP:1EB5                 </span><span style="color:navy">pop     cx
</span><span style="color:black">RESGROUP:1EB6                 </span><span style="color:navy">jz      short </span>ifind2
<span style="color:black">RESGROUP:1EB8                 </span><span style="color:navy">push    cx
</span><span style="color:black">RESGROUP:1EB9                 </span><span style="color:navy">call    </span>Iscasb2
<span style="color:black">RESGROUP:1EBC                 </span><span style="color:navy">pop     cx
</span><span style="color:black">RESGROUP:1EBD                 </span><span style="color:navy">cmp     [byte ptr es:di], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:1EC1                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ifind1
</span><span style="color:black">RESGROUP:1EC3                 </span><span style="color:navy">stc
</span><span style="color:black">RESGROUP:1EC4
RESGROUP:1EC4 </span>ifind2<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1EC4                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1EC4 </span>endp            ifind
<span style="color:black">RESGROUP:1EC4
RESGROUP:1EC5
RESGROUP:1EC5 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1EC5
RESGROUP:1EC5
RESGROUP:1EC5 </span>proc            Icount0 near            <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1EC5                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:1EC6                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:1EC7                 </span>assume es:RESGROUP
<span style="color:black">RESGROUP:1EC7                 </span><span style="color:navy">mov     di, si
</span><span style="color:black">RESGROUP:1EC9                 </span><span style="color:navy">push    di
</span><span style="color:black">RESGROUP:1ECA                 </span><span style="color:navy">call    </span>Iscasb1
<span style="color:black">RESGROUP:1ECD                 </span><span style="color:navy">jmp     short </span><span style="color:gray">Icountx
</span><span style="color:black">RESGROUP:1ECF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:1ECF                 </span><span style="color:navy">push    di
</span><span style="color:black">RESGROUP:1ED0                 </span><span style="color:navy">call    </span>Iscasb2
<span style="color:black">RESGROUP:1ED3
RESGROUP:1ED3 </span><span style="color:gray">Icountx</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1ED3                 </span><span style="color:navy">pop     cx
</span><span style="color:black">RESGROUP:1ED4                 </span><span style="color:navy">sub     di, cx
</span><span style="color:black">RESGROUP:1ED6                 </span><span style="color:navy">xchg    di, cx
</span><span style="color:black">RESGROUP:1ED8                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1ED8 </span>endp            Icount0
<span style="color:black">RESGROUP:1ED8
RESGROUP:1ED9
RESGROUP:1ED9 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1ED9
RESGROUP:1ED9
RESGROUP:1ED9 </span>proc            Iscasb1 near            <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1ED9                 </span><span style="color:navy">mov     al, [</span>equalsign<span style="color:navy">]
</span><span style="color:black">RESGROUP:1EDC                 </span><span style="color:navy">jmp     short </span>Iscasbx
<span style="color:black">RESGROUP:1EDC </span>endp            Iscasb1
<span style="color:black">RESGROUP:1EDC
RESGROUP:1EDE
RESGROUP:1EDE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1EDE
RESGROUP:1EDE
RESGROUP:1EDE </span>proc            Iscasb2 near            <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1EDE                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">RESGROUP:1EE0
RESGROUP:1EE0 </span>Iscasbx<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1EE0                 </span><span style="color:navy">mov     cx, </span><span style="color:green">256
</span><span style="color:black">RESGROUP:1EE3                 </span><span style="color:navy">repne scasb
</span><span style="color:black">RESGROUP:1EE5                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1EE5 </span>endp            Iscasb2
<span style="color:black">RESGROUP:1EE5
RESGROUP:1EE6
RESGROUP:1EE6 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1EE6
RESGROUP:1EE6
RESGROUP:1EE6 </span>proc            iupconv near            <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1EE6                 </span><span style="color:navy">cmp     al, </span><span style="color:green">80h
</span><span style="color:black">RESGROUP:1EE8                 </span><span style="color:navy">jb      short </span><span style="color:gray">other_fucase
</span><span style="color:black">RESGROUP:1EEA                 </span><span style="color:navy">sub     al, </span><span style="color:green">80h
</span><span style="color:black">RESGROUP:1EEC                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:1EED                 </span><span style="color:navy">push    bx
</span><span style="color:black">RESGROUP:1EEE                 </span><span style="color:navy">lds     bx, [dword ptr </span>FUCase_Addr<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">] </span>; lds bx,[FUCase_Addr+1]
<span style="color:black">RESGROUP:1EF2                 </span><span style="color:navy">add     bx, </span><span style="color:#ff8000">2
</span><span style="color:black">RESGROUP:1EF5                 </span><span style="color:navy">xlat
</span><span style="color:black">RESGROUP:1EF6                 </span><span style="color:navy">pop     bx
</span><span style="color:black">RESGROUP:1EF7                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:1EF8                 </span><span style="color:navy">jmp     short </span><span style="color:gray">iupconv_end
</span><span style="color:black">RESGROUP:1EFA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:1EFA
RESGROUP:1EFA </span><span style="color:gray">other_fucase</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1EFA                 </span><span style="color:navy">cmp     al, [</span>lcasea<span style="color:navy">]
</span><span style="color:black">RESGROUP:1EFE                 </span><span style="color:navy">jb      short </span><span style="color:gray">iupconv_end
</span><span style="color:black">RESGROUP:1F00                 </span><span style="color:navy">cmp     al, [</span>lcasez<span style="color:navy">]
</span><span style="color:black">RESGROUP:1F04                 </span><span style="color:navy">ja      short </span><span style="color:gray">iupconv_end
</span><span style="color:black">RESGROUP:1F06                 </span><span style="color:navy">sub     al, </span><span style="color:green">20h
</span><span style="color:black">RESGROUP:1F08
RESGROUP:1F08 </span><span style="color:gray">iupconv_end</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1F08                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1F08 </span>endp            iupconv
<span style="color:black">RESGROUP:1F08
</span><span style="color:maroon">RESGROUP:1F09 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">RESGROUP:1F09
RESGROUP:1F09 </span>init_contc_specialcase<span style="color:navy">:                 </span><span style="color:green">; ...
</span><span style="color:maroon">RESGROUP:1F09                 </span><span style="color:navy">add     sp, </span><span style="color:green">6
</span><span style="color:maroon">RESGROUP:1F0C                 </span><span style="color:navy">push    si
</span><span style="color:maroon">RESGROUP:1F0D                 </span><span style="color:navy">mov     si, dx
</span><span style="color:maroon">RESGROUP:1F0F                 </span><span style="color:navy">mov     [word ptr si+</span><span style="color:#ff8000">1</span><span style="color:navy">], </span><span style="color:#ff8000">0D00h
</span><span style="color:maroon">RESGROUP:1F14                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">RESGROUP:1F15                 </span><span style="color:navy">iret
</span><span style="color:black">RESGROUP:1F16
RESGROUP:1F16 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1F16
RESGROUP:1F16
RESGROUP:1F16 </span>proc            setup_for_messages near <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1F16                 </span><span style="color:navy">push    bx
</span><span style="color:black">RESGROUP:1F17                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:1F18                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:1F19                 </span><span style="color:navy">push    ax
</span><span style="color:black">RESGROUP:1F1A                 </span><span style="color:navy">push    dx
</span><span style="color:black">RESGROUP:1F1B                 </span><span style="color:navy">push    di
</span><span style="color:black">RESGROUP:1F1C                 </span><span style="color:navy">mov     ax, cs
</span><span style="color:black">RESGROUP:1F1E                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:black">RESGROUP:1F20                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">RESGROUP:1F22                 </span><span style="color:navy">cmp     [</span>PermCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:1F27                 </span><span style="color:navy">jz      short </span><span style="color:gray">no_permcom
</span><span style="color:black">RESGROUP:1F29                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:1F2A                 </span><span style="color:navy">mov     ax, </span><span style="color:green">352Fh       </span>; (GET_INTERRUPT_VECTOR shl 8) or 2Fh
<span style="color:black">RESGROUP:1F2D                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET INTERRUPT VECTOR
<span style="color:black">RESGROUP:1F2D                                         </span>; AL = interrupt number
<span style="color:black">RESGROUP:1F2D                                         </span>; Return: ES:BX = value of interrupt vector
<span style="color:black">RESGROUP:1F2F                 </span><span style="color:navy">mov     [</span>Int2fHandler<span style="color:navy">], bx
</span><span style="color:black">RESGROUP:1F33                 </span><span style="color:navy">mov     [</span>Int2fHandler<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], es
</span><span style="color:black">RESGROUP:1F37                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:1F38                 </span>assume es:nothing
<span style="color:black">RESGROUP:1F38                 </span><span style="color:navy">cmp     [</span>FirstCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:1F3D                 </span><span style="color:navy">jz      short </span><span style="color:gray">no_msg_hook
</span><span style="color:black">RESGROUP:1F3F                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:1F40                 </span><span style="color:navy">mov     dx, offset </span>Carousel_i2f_Hook
<span style="color:black">RESGROUP:1F43                 </span><span style="color:navy">sub     dx, </span><span style="color:#ff8000">10h
</span><span style="color:black">RESGROUP:1F46                 </span><span style="color:navy">mov     ax, ds
</span><span style="color:black">RESGROUP:1F48                 </span><span style="color:navy">inc     ax
</span><span style="color:black">RESGROUP:1F49                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:black">RESGROUP:1F4B                 </span>assume ds:nothing
<span style="color:black">RESGROUP:1F4B                 </span><span style="color:navy">mov     ax, </span><span style="color:green">252Fh       </span>; (SET_INTERRUPT_VECTOR shl 8) or 2Fh
<span style="color:black">RESGROUP:1F4E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET INTERRUPT VECTOR
<span style="color:black">RESGROUP:1F4E                                         </span>; AL = interrupt number
<span style="color:black">RESGROUP:1F4E                                         </span>; DS:DX = new vector to be used for specified interrupt
<span style="color:black">RESGROUP:1F50                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:1F51                 </span>assume ds:RESGROUP
<span style="color:black">RESGROUP:1F51                 </span><span style="color:navy">mov     [</span>int2fh_segm<span style="color:navy">], ds </span>; [Carousel_i2f_Hook+3]
<span style="color:black">RESGROUP:1F55
RESGROUP:1F55 </span><span style="color:gray">no_msg_hook</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1F55                 </span><span style="color:navy">cmp     [</span>ext_msg<span style="color:navy">], </span><span style="color:#ff8000">1    </span>; SET_EXTENDED_MSG
<span style="color:black">RESGROUP:1F5A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">permcom_end
</span><span style="color:black">RESGROUP:1F5C                 </span><span style="color:navy">mov     di, offset </span>PATRICIDE ; ExtMsgEnd (at 0DD8h)
<span style="color:black">RESGROUP:1F5F                 </span><span style="color:navy">mov     [</span>ResMsgEnd<span style="color:navy">], di
</span><span style="color:black">RESGROUP:1F63                 </span><span style="color:navy">jmp     short </span><span style="color:gray">permcom_end
</span><span style="color:black">RESGROUP:1F65 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:1F65
RESGROUP:1F65 </span><span style="color:gray">no_permcom</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1F65                 </span><span style="color:navy">cmp     [</span>ext_msg<span style="color:navy">], </span><span style="color:#ff8000">1    </span>; SET_EXTENDED_MSG
<span style="color:black">RESGROUP:1F6A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">permcom_end
</span><span style="color:black">RESGROUP:1F6C                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">2           </span>; LessArgs_Ptr
<span style="color:black">RESGROUP:1F6F                 </span><span style="color:navy">call    </span>RPrintParse
<span style="color:black">RESGROUP:1F72
RESGROUP:1F72 </span><span style="color:gray">permcom_end</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1F72                 </span><span style="color:navy">pop     di
</span><span style="color:black">RESGROUP:1F73                 </span><span style="color:navy">pop     dx
</span><span style="color:black">RESGROUP:1F74                 </span><span style="color:navy">pop     ax
</span><span style="color:black">RESGROUP:1F75                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:1F76                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:1F77                 </span><span style="color:navy">pop     bx
</span><span style="color:black">RESGROUP:1F78                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1F78 </span>endp            setup_for_messages
<span style="color:black">RESGROUP:1F78
RESGROUP:1F79
RESGROUP:1F79 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1F79
RESGROUP:1F79
RESGROUP:1F79 </span>proc            CheckHelp near          <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1F79                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:black">RESGROUP:1F7C                 </span><span style="color:navy">mov     di, offset </span>PARSE_COMMAND
<span style="color:black">RESGROUP:1F7F                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">RESGROUP:1F81                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">RESGROUP:1F83
RESGROUP:1F83 </span><span style="color:gray">chParse</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1F83                 </span><span style="color:navy">call    [dword ptr </span>Init_Parse<span style="color:navy">] </span>; call far [Init_Parse] ; call system parser
<span style="color:black">RESGROUP:1F87                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:black">RESGROUP:1F8A                 </span><span style="color:navy">jz      short </span><span style="color:gray">chRet
</span><span style="color:black">RESGROUP:1F8C                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:1F8F                 </span><span style="color:navy">jz      short </span><span style="color:gray">chWhich
</span><span style="color:black">RESGROUP:1F91                 </span><span style="color:navy">jmp     short </span><span style="color:gray">chParse
</span><span style="color:black">RESGROUP:1F93 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:1F93
RESGROUP:1F93 </span><span style="color:gray">chWhich</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1F93                 </span><span style="color:navy">cmp     [</span>COMND1_SYN<span style="color:navy">], offset </span>COMMAND_?_SYN <span style="color:gray">; &quot;/?&quot;
</span><span style="color:black">RESGROUP:1F99                 </span><span style="color:navy">jz      short </span><span style="color:gray">chHelp
</span><span style="color:black">RESGROUP:1F9B                 </span><span style="color:navy">cmp     [</span>COMND1_SYN<span style="color:navy">], offset </span>COMMAND_C_SYN <span style="color:gray">; &quot;/C&quot;
</span><span style="color:black">RESGROUP:1FA1                 </span><span style="color:navy">jz      short </span><span style="color:gray">chRet
</span><span style="color:black">RESGROUP:1FA3                 </span><span style="color:navy">cmp     [</span>COMND1_SYN<span style="color:navy">], offset </span>COMMAND_K_SYN <span style="color:gray">; &quot;/K&quot;
</span><span style="color:black">RESGROUP:1FA9                 </span><span style="color:navy">jz      short </span><span style="color:gray">chRet
</span><span style="color:black">RESGROUP:1FAB                 </span><span style="color:navy">jmp     short </span><span style="color:gray">chParse
</span><span style="color:black">RESGROUP:1FAD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:1FAD
RESGROUP:1FAD </span><span style="color:gray">chHelp</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1FAD                 </span><span style="color:navy">mov     si, offset </span>HelpMsgs
<span style="color:black">RESGROUP:1FB0
RESGROUP:1FB0 </span><span style="color:gray">chHelpNext</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1FB0                 </span><span style="color:navy">lodsw
</span><span style="color:black">RESGROUP:1FB1                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">RESGROUP:1FB3                 </span><span style="color:navy">jz      short </span><span style="color:gray">chHelpDone
</span><span style="color:black">RESGROUP:1FB5                 </span><span style="color:navy">mov     dx, ax
</span><span style="color:black">RESGROUP:1FB7                 </span><span style="color:navy">call    </span>RPrint
<span style="color:black">RESGROUP:1FBA                 </span><span style="color:navy">jmp     short </span><span style="color:gray">chHelpNext
</span><span style="color:black">RESGROUP:1FBC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:1FBC
RESGROUP:1FBC </span><span style="color:gray">chHelpDone</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1FBC                 </span><span style="color:navy">int     </span><span style="color:green">20h             </span>; DOS - PROGRAM TERMINATION
<span style="color:black">RESGROUP:1FBC                                         </span>; returns to DOS--identical to INT 21/AH=00h
<span style="color:black">RESGROUP:1FBE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:1FBE
RESGROUP:1FBE </span><span style="color:gray">chRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1FBE                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:1FBE </span>endp            CheckHelp
<span style="color:black">RESGROUP:1FBE
RESGROUP:1FBF
RESGROUP:1FBF </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:1FBF
RESGROUP:1FBF
RESGROUP:1FBF </span>proc            Setup_res_end near      <span style="color:green">; ...
</span><span style="color:black">RESGROUP:1FBF                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:1FC0                 </span><span style="color:navy">mov     ax, cs
</span><span style="color:black">RESGROUP:1FC2                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:black">RESGROUP:1FC4                 </span><span style="color:navy">mov     cx, [</span>ResMsgEnd<span style="color:navy">]
</span><span style="color:black">RESGROUP:1FC8                 </span><span style="color:navy">cmp     cx, offset </span>PATRICIDE ; ExtMsgEnd
<span style="color:black">RESGROUP:1FCC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">calc_res
</span><span style="color:black">RESGROUP:1FCE                 </span><span style="color:navy">add     cx, </span><span style="color:#ff8000">0Fh
</span><span style="color:black">RESGROUP:1FD1                 </span><span style="color:navy">and     cx, </span><span style="color:green">0FFF0h
</span><span style="color:black">RESGROUP:1FD4
RESGROUP:1FD4 </span><span style="color:gray">calc_res</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1FD4                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">RESGROUP:1FD6                 </span><span style="color:navy">cmp     [</span>FirstCom<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:black">RESGROUP:1FDB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">not_first
</span><span style="color:black">RESGROUP:1FDD                 </span><span style="color:navy">push    bx
</span><span style="color:black">RESGROUP:1FDE                 </span><span style="color:navy">push    cx
</span><span style="color:black">RESGROUP:1FDF                 </span><span style="color:navy">mov     ax, </span><span style="color:green">3306h       </span>; (Set_CTRL_C_Trapping shl 8)
<span style="color:black">RESGROUP:1FE2                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 5+ Get TRUE Version Number
<span style="color:black">RESGROUP:1FE2                                         </span>; (BL major, BH minor, DL revision, DH flags)
<span style="color:black">RESGROUP:1FE4                 </span><span style="color:navy">pop     cx
</span><span style="color:black">RESGROUP:1FE5                 </span><span style="color:navy">cmp     bl, </span><span style="color:#ff8000">5
</span><span style="color:black">RESGROUP:1FE8                 </span><span style="color:navy">jb      short </span><span style="color:gray">oldver
</span><span style="color:black">RESGROUP:1FEA                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">RESGROUP:1FEC                 </span><span style="color:navy">and     dh, </span><span style="color:green">10h
</span><span style="color:black">RESGROUP:1FEF                 </span><span style="color:navy">pop     bx
</span><span style="color:black">RESGROUP:1FF0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">not_first
</span><span style="color:black">RESGROUP:1FF2                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">894h        </span>; EndCode-RCODE_START
<span style="color:black">RESGROUP:1FF5
RESGROUP:1FF5 </span><span style="color:gray">not_first</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:1FF5                 </span><span style="color:navy">add     cx, ax
</span><span style="color:black">RESGROUP:1FF7                 </span><span style="color:navy">add     cx, </span><span style="color:#ff8000">0Fh
</span><span style="color:black">RESGROUP:1FFA                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:1FFC                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:1FFE                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:2000                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:2002                 </span><span style="color:navy">mov     [</span>ResSize<span style="color:navy">], cx
</span><span style="color:black">RESGROUP:2006                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:2007                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:2008 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:2008
RESGROUP:2008 </span><span style="color:gray">oldver</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:2008                 </span><span style="color:navy">pop     bx
</span><span style="color:black">RESGROUP:2009                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">894h
</span><span style="color:black">RESGROUP:200C                 </span><span style="color:navy">jmp     short </span><span style="color:gray">not_first
</span><span style="color:black">RESGROUP:200C </span>endp            Setup_res_end
<span style="color:black">RESGROUP:200C
RESGROUP:200E
RESGROUP:200E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:200E
RESGROUP:200E
RESGROUP:200E </span>proc            Move_res_code near      <span style="color:green">; ...
</span><span style="color:black">RESGROUP:200E                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:200F                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:2010                 </span><span style="color:navy">mov     ax, cs
</span><span style="color:black">RESGROUP:2012                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:black">RESGROUP:2014                 </span><span style="color:navy">mov     ax, </span><span style="color:green">3306h
</span><span style="color:black">RESGROUP:2017                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 5+ Get TRUE Version Number (BL major, BH minor, DL revision, DH flags)
<span style="color:black">RESGROUP:2019                 </span><span style="color:navy">and     dh, </span><span style="color:green">10h
</span><span style="color:black">RESGROUP:201C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">move_high
</span><span style="color:black">RESGROUP:201E
RESGROUP:201E </span><span style="color:gray">load_low</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:201E                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:201F                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:2020                 </span>assume es:RESGROUP
<span style="color:black">RESGROUP:2020                 </span><span style="color:navy">mov     di, [</span>ResMsgEnd<span style="color:navy">]
</span><span style="color:black">RESGROUP:2024                 </span><span style="color:navy">mov     bx, offset </span>PATRICIDE ; ExtMsgEnd ; (this bx is not used after here!)
<span style="color:black">RESGROUP:2024                                         </span>; Erdogan Tan - 18/07/2024
<span style="color:black">RESGROUP:2027                 </span><span style="color:navy">jmp     short </span><span style="color:gray">setup_move
</span><span style="color:black">RESGROUP:2029 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:2029
RESGROUP:2029 </span><span style="color:gray">move_high</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:2029                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">894h        </span>; EndCode-RCODE_START
<span style="color:black">RESGROUP:202C                 </span><span style="color:navy">mov     di, </span><span style="color:green">0FFFFh
</span><span style="color:black">RESGROUP:202F                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4A02h       </span>; GET_HMA_ADDR
<span style="color:black">RESGROUP:2032                 </span><span style="color:navy">int     </span><span style="color:green">2Fh
</span><span style="color:black">RESGROUP:2034                 </span><span style="color:navy">cmp     di, </span><span style="color:green">0FFFFh
</span><span style="color:black">RESGROUP:2037                 </span><span style="color:navy">mov     [</span>ComInHMA<span style="color:navy">], </span><span style="color:#ff8000">1   </span>; byte
<span style="color:black">RESGROUP:203C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">setup_move
</span><span style="color:black">RESGROUP:203E                 </span><span style="color:navy">mov     [</span>ComInHMA<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:2043                 </span><span style="color:navy">mov     cx, [</span>ResMsgEnd<span style="color:navy">]
</span><span style="color:black">RESGROUP:2047                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">894h        </span>; EndCode-RCODE_START
<span style="color:black">RESGROUP:204A                 </span><span style="color:navy">add     cx, ax
</span><span style="color:black">RESGROUP:204C                 </span><span style="color:navy">add     cx, </span><span style="color:#ff8000">0Fh
</span><span style="color:black">RESGROUP:204F                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:2051                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:2053                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:2055                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:2057                 </span><span style="color:navy">mov     [</span>ResSize<span style="color:navy">], cx
</span><span style="color:black">RESGROUP:205B                 </span><span style="color:navy">jmp     short </span><span style="color:gray">load_low
</span><span style="color:black">RESGROUP:205D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:205D
RESGROUP:205D </span><span style="color:gray">setup_move</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:205D                 </span><span style="color:navy">mov     si, offset </span>Exec_Err ; RCODE_START
<span style="color:black">RESGROUP:2060                 </span><span style="color:navy">mov     cx, </span><span style="color:green">894h        </span>; EndCode-RCODE_START
<span style="color:black">RESGROUP:2063                 </span><span style="color:navy">cld
</span><span style="color:black">RESGROUP:2064                 </span><span style="color:navy">push    di
</span><span style="color:black">RESGROUP:2065                 </span><span style="color:navy">rep movsb
</span><span style="color:black">RESGROUP:2067                 </span><span style="color:navy">pop     di
</span><span style="color:black">RESGROUP:2068                 </span><span style="color:navy">call    </span>patch_stub
<span style="color:black">RESGROUP:206B                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:206C                 </span>assume es:nothing
<span style="color:black">RESGROUP:206C                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:206D                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:206D </span>endp            Move_res_code
<span style="color:black">RESGROUP:206D
RESGROUP:206E
RESGROUP:206E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:206E
RESGROUP:206E
RESGROUP:206E </span>proc            alloc_env near          <span style="color:green">; ...
</span><span style="color:black">RESGROUP:206E
RESGROUP:206E </span><span style="color:gray">; FUNCTION CHUNK AT RESGROUP:0F12 SIZE 00000003 BYTES
</span><span style="color:black">RESGROUP:206E
RESGROUP:206E                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:206F                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:2070                 </span><span style="color:navy">push    si
</span><span style="color:black">RESGROUP:2071                 </span><span style="color:navy">push    di
</span><span style="color:black">RESGROUP:2072                 </span><span style="color:navy">push    ss
</span><span style="color:black">RESGROUP:2073                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:2074                 </span><span style="color:navy">mov     ax, [</span>EnvirSeg<span style="color:navy">]
</span><span style="color:black">RESGROUP:2077                 </span><span style="color:navy">cmp     [</span>AllocedEnv<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:207C                 </span><span style="color:navy">jz      short </span><span style="color:gray">alloc_cont
</span><span style="color:black">RESGROUP:207E                 </span><span style="color:navy">jmp     </span><span style="color:gray">alloc_done
</span><span style="color:black">RESGROUP:2081 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:2081
RESGROUP:2081 </span><span style="color:gray">alloc_cont</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:2081                 </span><span style="color:navy">sub     di, di
</span><span style="color:black">RESGROUP:2083                 </span><span style="color:navy">mov     bx, </span><span style="color:green">166         </span>; ENVIRONSIZ
<span style="color:black">RESGROUP:2086                 </span><span style="color:navy">cmp     [</span>FirstCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:208B                 </span><span style="color:navy">jz      short </span><span style="color:gray">alloc_seg
</span><span style="color:black">RESGROUP:208D                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">RESGROUP:208F                 </span><span style="color:navy">jz      short </span><span style="color:gray">alloc_new
</span><span style="color:black">RESGROUP:2091                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">RESGROUP:2093                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:2095                 </span><span style="color:navy">sub     di, di
</span><span style="color:black">RESGROUP:2097
RESGROUP:2097 </span><span style="color:gray">comp_path</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:2097                 </span><span style="color:navy">scasb
</span><span style="color:black">RESGROUP:2098                 </span><span style="color:navy">jz      short </span><span style="color:gray">find_comspec
</span><span style="color:black">RESGROUP:209A                 </span><span style="color:navy">dec     di
</span><span style="color:black">RESGROUP:209B                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">5           </span>; PathStrLen
<span style="color:black">RESGROUP:209E                 </span><span style="color:navy">mov     si, offset </span>PathString <span style="color:gray">; &quot;PATH=&quot;
</span><span style="color:black">RESGROUP:20A1                 </span><span style="color:navy">repe cmpsb
</span><span style="color:black">RESGROUP:20A3                 </span><span style="color:navy">jz      short </span><span style="color:gray">got_path
</span><span style="color:black">RESGROUP:20A5                 </span><span style="color:navy">mov     cx, </span><span style="color:green">256
</span><span style="color:black">RESGROUP:20A8                 </span><span style="color:navy">repne scasb
</span><span style="color:black">RESGROUP:20AA                 </span><span style="color:navy">jmp     short </span><span style="color:gray">comp_path
</span><span style="color:black">RESGROUP:20AC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:20AC
RESGROUP:20AC </span><span style="color:gray">got_path</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:20AC                 </span><span style="color:navy">mov     [byte ptr </span>PathString<span style="color:navy">], </span><span style="color:#ff8000">0 </span><span style="color:gray">; &quot;PATH=&quot;
</span><span style="color:black">RESGROUP:20B1
RESGROUP:20B1 </span><span style="color:gray">find_comspec</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:20B1                 </span><span style="color:navy">sub     di, di
</span><span style="color:black">RESGROUP:20B3
RESGROUP:20B3 </span><span style="color:gray">comp_comspec</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:20B3                 </span><span style="color:navy">scasb
</span><span style="color:black">RESGROUP:20B4                 </span><span style="color:navy">jz      short </span><span style="color:gray">got_envend
</span><span style="color:black">RESGROUP:20B6                 </span><span style="color:navy">dec     di
</span><span style="color:black">RESGROUP:20B7                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">8           </span>; ComspStrLen
<span style="color:black">RESGROUP:20BA                 </span><span style="color:navy">mov     si, offset </span>ComspString <span style="color:gray">; &quot;COMSPEC=\\COMMAND.COM&quot;
</span><span style="color:black">RESGROUP:20BD                 </span><span style="color:navy">repe cmpsb
</span><span style="color:black">RESGROUP:20BF                 </span><span style="color:navy">jz      short </span><span style="color:gray">got_comspec
</span><span style="color:black">RESGROUP:20C1                 </span><span style="color:navy">mov     cx, </span><span style="color:green">256
</span><span style="color:black">RESGROUP:20C4                 </span><span style="color:navy">repne scasb
</span><span style="color:black">RESGROUP:20C6                 </span><span style="color:navy">jmp     short </span><span style="color:gray">comp_comspec
</span><span style="color:black">RESGROUP:20C8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:20C8
RESGROUP:20C8 </span><span style="color:gray">got_comspec</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:20C8                 </span><span style="color:navy">mov     [</span>ComspOffset<span style="color:navy">], di
</span><span style="color:black">RESGROUP:20CC                 </span><span style="color:navy">sub     di, di
</span><span style="color:black">RESGROUP:20CE                 </span><span style="color:navy">mov     cx, </span><span style="color:green">32768       </span>; ENVBIG
<span style="color:black">RESGROUP:20D1
RESGROUP:20D1 </span><span style="color:gray">comp_envend</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:20D1                 </span><span style="color:navy">dec     cx
</span><span style="color:black">RESGROUP:20D2                 </span><span style="color:navy">scasb
</span><span style="color:black">RESGROUP:20D3                 </span><span style="color:navy">jz      short </span><span style="color:gray">got_envend
</span><span style="color:black">RESGROUP:20D5                 </span><span style="color:navy">repne scasb
</span><span style="color:black">RESGROUP:20D7                 </span><span style="color:navy">jmp     short </span><span style="color:gray">comp_envend
</span><span style="color:black">RESGROUP:20D9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:20D9
RESGROUP:20D9 </span><span style="color:gray">got_envend</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:20D9                 </span><span style="color:navy">dec     di
</span><span style="color:black">RESGROUP:20DA                 </span><span style="color:navy">lea     bx, [di+</span><span style="color:green">166</span><span style="color:navy">]    </span>; [DI+ENVIRONSIZ]
<span style="color:black">RESGROUP:20DE                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:20DF                 </span><span style="color:navy">mov     ds, [word ptr ds:</span><span style="color:green">16h</span><span style="color:navy">] </span>; [PDB.PARENT_PID]
<span style="color:black">RESGROUP:20E3                 </span><span style="color:navy">cmp     [word ptr ds:</span><span style="color:green">16h</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [PDB.PARENT_PID]
<span style="color:black">RESGROUP:20E8                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:20E9                 </span><span style="color:navy">jnz     short </span><span style="color:gray">alloc_seg
</span><span style="color:black">RESGROUP:20EB
RESGROUP:20EB </span><span style="color:gray">alloc_new</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:20EB                 </span><span style="color:navy">inc     [</span>AllocedEnv<span style="color:navy">]    </span>; byte
<span style="color:black">RESGROUP:20EF
RESGROUP:20EF </span><span style="color:gray">alloc_seg</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:20EF                 </span><span style="color:navy">mov     cx, bx
</span><span style="color:black">RESGROUP:20F1                 </span><span style="color:navy">add     bx, </span><span style="color:#ff8000">0Fh
</span><span style="color:black">RESGROUP:20F4                 </span><span style="color:navy">shr     bx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:20F6                 </span><span style="color:navy">shr     bx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:20F8                 </span><span style="color:navy">shr     bx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:20FA                 </span><span style="color:navy">shr     bx, </span><span style="color:green">1
</span><span style="color:black">RESGROUP:20FC                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h
</span><span style="color:black">RESGROUP:20FE                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ALLOCATE MEMORY
<span style="color:black">RESGROUP:20FE                                         </span>; BX = number of 16-byte paragraphs desired
<span style="color:black">RESGROUP:2100                 </span><span style="color:navy">jnb     short </span><span style="color:gray">init_ok
</span><span style="color:black">RESGROUP:2102                 </span><span style="color:navy">jmp     </span><span style="color:gray">init_nomem
</span><span style="color:black">RESGROUP:2105 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:2105
RESGROUP:2105 </span><span style="color:gray">init_ok</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:2105                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">RESGROUP:2107                 </span>assume es:nothing
<span style="color:black">RESGROUP:2107                 </span><span style="color:navy">or      di, di
</span><span style="color:black">RESGROUP:2109                 </span><span style="color:navy">jz      short </span><span style="color:gray">copy_path
</span><span style="color:black">RESGROUP:210B                 </span><span style="color:navy">push    cx
</span><span style="color:black">RESGROUP:210C                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:210D                 </span><span style="color:navy">mov     ds, [</span>EnvirSeg<span style="color:navy">]
</span><span style="color:black">RESGROUP:2111                 </span><span style="color:navy">sub     si, si
</span><span style="color:black">RESGROUP:2113                 </span><span style="color:navy">mov     cx, di
</span><span style="color:black">RESGROUP:2115                 </span><span style="color:navy">sub     di, di
</span><span style="color:black">RESGROUP:2117                 </span><span style="color:navy">rep movsb
</span><span style="color:black">RESGROUP:2119                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:211A                 </span><span style="color:navy">pop     cx
</span><span style="color:black">RESGROUP:211B                 </span><span style="color:navy">sub     cx, di
</span><span style="color:black">RESGROUP:211D
RESGROUP:211D </span><span style="color:gray">copy_path</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:211D                 </span><span style="color:navy">push    di
</span><span style="color:black">RESGROUP:211E                 </span><span style="color:navy">sub     ax, ax
</span><span style="color:black">RESGROUP:2120                 </span><span style="color:navy">rep stosb
</span><span style="color:black">RESGROUP:2122                 </span><span style="color:navy">pop     di
</span><span style="color:black">RESGROUP:2123                 </span><span style="color:navy">mov     si, offset </span>PathString <span style="color:gray">; &quot;PATH=&quot;
</span><span style="color:black">RESGROUP:2126                 </span><span style="color:navy">cmp     [si], al
</span><span style="color:black">RESGROUP:2128                 </span><span style="color:navy">jz      short </span><span style="color:gray">init_comspec
</span><span style="color:black">RESGROUP:212A                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">6           </span>; db &quot;PATH=&quot;,0
<span style="color:black">RESGROUP:212D                 </span><span style="color:navy">rep movsb
</span><span style="color:black">RESGROUP:212F                 </span><span style="color:navy">cmp     [</span>AllocedEnv<span style="color:navy">], al
</span><span style="color:black">RESGROUP:2133                 </span><span style="color:navy">jz      short </span><span style="color:gray">init_comspec
</span><span style="color:black">RESGROUP:2135                 </span><span style="color:navy">mov     ah, </span><span style="color:green">19h         </span>; GET_DEFAULT_DRIVE
<span style="color:black">RESGROUP:2137                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - GET DEFAULT DISK NUMBER
<span style="color:black">RESGROUP:2139                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">41h </span><span style="color:gray">; &#039;A&#039;
</span><span style="color:black">RESGROUP:213B                 </span><span style="color:navy">mov     [byte ptr </span>DefPathString<span style="color:navy">], al </span><span style="color:gray">; &quot;C:\\DOS&quot;
</span><span style="color:black">RESGROUP:213E                 </span><span style="color:navy">mov     [byte ptr </span>DefPath2String<span style="color:navy">], al </span><span style="color:gray">; &quot;C:\\MSDOS&quot;
</span><span style="color:black">RESGROUP:2141                 </span><span style="color:navy">mov     dl, </span><span style="color:#ff8000">0
</span><span style="color:black">RESGROUP:2143                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:2144                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:2145                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:2146                 </span>assume ds:nothing
<span style="color:black">RESGROUP:2146                 </span><span style="color:navy">mov     [byte ptr di], &#039;</span><span style="color:green">\&#039;
</span><span style="color:black">RESGROUP:2149                 </span><span style="color:navy">lea     si, [di+</span><span style="color:#ff8000">1</span><span style="color:navy">]
</span><span style="color:black">RESGROUP:214C                 </span><span style="color:navy">mov     ah, </span><span style="color:green">47h         </span>; Current_Dir
<span style="color:black">RESGROUP:214E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET CURRENT DIRECTORY
<span style="color:black">RESGROUP:214E                                         </span>; DL = drive (0=default, 1=A, etc.)
<span style="color:black">RESGROUP:214E                                         </span>; DS:SI points to 64-byte buffer area
<span style="color:black">RESGROUP:2150                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:2151                 </span>assume ds:RESGROUP
<span style="color:black">RESGROUP:2151                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">7           </span>; DefPathStrLen+1
<span style="color:black">RESGROUP:2154                 </span><span style="color:navy">mov     dx, offset </span>DefPathString <span style="color:gray">; &quot;C:\\DOS&quot;
</span><span style="color:black">RESGROUP:2157                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">RESGROUP:2159                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Bh
</span><span style="color:black">RESGROUP:215B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CHANGE THE CURRENT DIRECTORY (CHDIR)
<span style="color:black">RESGROUP:215B                                         </span>; DS:DX -&gt; ASCIZ directory name (may include drive)
<span style="color:black">RESGROUP:215D                 </span><span style="color:navy">jnb     short </span><span style="color:gray">init_setpath
</span><span style="color:black">RESGROUP:215F                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">9           </span>; DefPath2StrLen+1
<span style="color:black">RESGROUP:2162                 </span><span style="color:navy">mov     dx, offset </span>DefPath2String <span style="color:gray">; &quot;C:\\MSDOS&quot;
</span><span style="color:black">RESGROUP:2165                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">RESGROUP:2167                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Bh
</span><span style="color:black">RESGROUP:2169                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CHANGE THE CURRENT DIRECTORY (CHDIR)
<span style="color:black">RESGROUP:2169                                         </span>; DS:DX -&gt; ASCIZ directory name (may include drive)
<span style="color:black">RESGROUP:216B                 </span><span style="color:navy">jb      short </span><span style="color:gray">init_comspec
</span><span style="color:black">RESGROUP:216D
RESGROUP:216D </span><span style="color:gray">init_setpath</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:216D                 </span><span style="color:navy">mov     dx, di
</span><span style="color:black">RESGROUP:216F                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:2170                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:2171                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:2172                 </span>assume ds:nothing
<span style="color:black">RESGROUP:2172                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Bh         </span>; CHDir
<span style="color:black">RESGROUP:2174                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CHANGE THE CURRENT DIRECTORY (CHDIR)
<span style="color:black">RESGROUP:2174                                         </span>; DS:DX -&gt; ASCIZ directory name (may include drive)
<span style="color:black">RESGROUP:2176                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:2177                 </span>assume ds:RESGROUP
<span style="color:black">RESGROUP:2177                 </span><span style="color:navy">dec     di
</span><span style="color:black">RESGROUP:2178                 </span><span style="color:navy">rep movsb
</span><span style="color:black">RESGROUP:217A
RESGROUP:217A </span><span style="color:gray">init_comspec</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:217A                 </span><span style="color:navy">push    di
</span><span style="color:black">RESGROUP:217B                 </span><span style="color:navy">sub     ax, ax
</span><span style="color:black">RESGROUP:217D                 </span><span style="color:navy">mov     cx, </span><span style="color:green">64
</span><span style="color:black">RESGROUP:2180                 </span><span style="color:navy">rep stosb
</span><span style="color:black">RESGROUP:2182                 </span><span style="color:navy">pop     di
</span><span style="color:black">RESGROUP:2183                 </span><span style="color:navy">cmp     [</span>ComspOffset<span style="color:navy">], ax
</span><span style="color:black">RESGROUP:2187                 </span><span style="color:navy">jnz     short </span><span style="color:gray">init_done
</span><span style="color:black">RESGROUP:2189                 </span><span style="color:navy">lea     ax, [di+</span><span style="color:#ff8000">8</span><span style="color:navy">]      </span>; [di+ComspStrLen]
<span style="color:black">RESGROUP:218D                 </span><span style="color:navy">mov     [</span>ComspOffset<span style="color:navy">], ax
</span><span style="color:black">RESGROUP:2190                 </span><span style="color:navy">mov     si, offset </span>ComspString <span style="color:gray">; &quot;COMSPEC=\\COMMAND.COM&quot;
</span><span style="color:black">RESGROUP:2193                 </span><span style="color:navy">mov     cx, </span><span style="color:green">21          </span>; ComspStrLen2+1 ; db &quot;COMSPEC=\COMMAND.COM&quot;,0
<span style="color:black">RESGROUP:2196                 </span><span style="color:navy">rep movsb
</span><span style="color:black">RESGROUP:2198
RESGROUP:2198 </span><span style="color:gray">init_done</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:2198                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">RESGROUP:219A                 </span><span style="color:navy">mov     [</span>EnvirSeg<span style="color:navy">], ax
</span><span style="color:black">RESGROUP:219D                 </span><span style="color:navy">inc     [</span>AllocedEnv<span style="color:navy">]    </span>; byte
<span style="color:black">RESGROUP:21A1
RESGROUP:21A1 </span><span style="color:gray">alloc_done</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:21A1                 </span><span style="color:navy">pop     di
</span><span style="color:black">RESGROUP:21A2                 </span><span style="color:navy">pop     si
</span><span style="color:black">RESGROUP:21A3                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:21A4                 </span>assume es:nothing
<span style="color:black">RESGROUP:21A4                 </span><span style="color:navy">pop     ds
</span><span style="color:black">RESGROUP:21A5                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:21A6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">RESGROUP:21A6
RESGROUP:21A6 </span><span style="color:gray">init_nomem</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:21A6                 </span><span style="color:navy">call    $+</span><span style="color:green">3             </span>; call Alloc_error
<span style="color:black">RESGROUP:21A9
RESGROUP:21A9 </span>Alloc_error<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:21A9                 </span><span style="color:navy">jmp     </span>BadMemErr
<span style="color:black">RESGROUP:21A9 </span>endp            alloc_env
<span style="color:black">RESGROUP:21A9
RESGROUP:21AC
RESGROUP:21AC </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:21AC
RESGROUP:21AC
RESGROUP:21AC </span>proc            patch_stub near         <span style="color:green">; ...
</span><span style="color:black">RESGROUP:21AC                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:21AD                 </span><span style="color:navy">mov     bx, es
</span><span style="color:black">RESGROUP:21AF                 </span><span style="color:navy">mov     dx, di
</span><span style="color:black">RESGROUP:21B1                 </span><span style="color:navy">mov     di, offset </span>Int2f_Entry
<span style="color:black">RESGROUP:21B4                 </span><span style="color:navy">mov     si, offset </span>Reloc_Table
<span style="color:black">RESGROUP:21B7                 </span><span style="color:navy">push    ds
</span><span style="color:black">RESGROUP:21B8                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:21B9                 </span>assume es:RESGROUP
<span style="color:black">RESGROUP:21B9                 </span><span style="color:navy">mov     cx, </span><span style="color:green">11
</span><span style="color:black">RESGROUP:21BC
RESGROUP:21BC </span><span style="color:gray">patchlp</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:21BC                 </span><span style="color:navy">lodsw
</span><span style="color:black">RESGROUP:21BD                 </span><span style="color:navy">add     ax, dx
</span><span style="color:black">RESGROUP:21BF                 </span><span style="color:navy">stosw
</span><span style="color:black">RESGROUP:21C0                 </span><span style="color:navy">mov     ax, bx
</span><span style="color:black">RESGROUP:21C2                 </span><span style="color:navy">stosw
</span><span style="color:black">RESGROUP:21C3                 </span><span style="color:navy">loop    </span><span style="color:gray">patchlp
</span><span style="color:black">RESGROUP:21C5                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:21C6                 </span>assume es:nothing
<span style="color:black">RESGROUP:21C6                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:21C6 </span>endp            patch_stub
<span style="color:black">RESGROUP:21C6
RESGROUP:21C7
RESGROUP:21C7 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:21C7
RESGROUP:21C7
RESGROUP:21C7 </span>proc            patch_segs near         <span style="color:green">; ...
</span><span style="color:black">RESGROUP:21C7                 </span><span style="color:navy">mov     di, offset </span>Int2f_Entry
<span style="color:black">RESGROUP:21CA                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">4           </span>; we have to patch 4 handlers
<span style="color:black">RESGROUP:21CD                 </span><span style="color:navy">add     di, </span><span style="color:#ff8000">2
</span><span style="color:black">RESGROUP:21D0                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">RESGROUP:21D2
RESGROUP:21D2 </span><span style="color:gray">pseglp</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:21D2                 </span><span style="color:navy">stosw
</span><span style="color:black">RESGROUP:21D3                 </span><span style="color:navy">add     di, </span><span style="color:#ff8000">2
</span><span style="color:black">RESGROUP:21D6                 </span><span style="color:navy">loop    </span><span style="color:gray">pseglp
</span><span style="color:black">RESGROUP:21D8                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:21D8 </span>endp            patch_segs
<span style="color:black">RESGROUP:21D8
RESGROUP:21D9
RESGROUP:21D9 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">RESGROUP:21D9
RESGROUP:21D9
RESGROUP:21D9 </span>proc            get_XMMAddr near        <span style="color:green">; ...
</span><span style="color:black">RESGROUP:21D9                 </span><span style="color:navy">push    es
</span><span style="color:black">RESGROUP:21DA                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4300h       </span>; XMM_MULTIPLEX SHL 8 + XMM_INSTALL_CHECK
<span style="color:black">RESGROUP:21DD                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - XMS - INSTALLATION CHECK
<span style="color:black">RESGROUP:21DD                                         </span>; Return: AL = 80h XMS driver installed
<span style="color:black">RESGROUP:21DD                                         </span>; AL &lt;&gt; 80h no driver
<span style="color:black">RESGROUP:21DF                 </span><span style="color:navy">cmp     al, </span><span style="color:green">80h         </span>; Q: installed
<span style="color:black">RESGROUP:21E1                 </span><span style="color:navy">jnz     short </span><span style="color:gray">cXMMexit  </span>; N: set error, quit
<span style="color:black">RESGROUP:21E3                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4310h       </span>; XMM_MULTIPLEX SHL 8 + XMM_FUNCTION_ADDR
<span style="color:black">RESGROUP:21E6                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - XMS - GET DRIVER ADDRESS
<span style="color:black">RESGROUP:21E6                                         </span>; Return: ES:BX -&gt; driver entry point
<span style="color:black">RESGROUP:21E8                 </span><span style="color:navy">mov     [word ptr </span>XMMCallAddr<span style="color:navy">], bx
</span><span style="color:black">RESGROUP:21EC                 </span><span style="color:navy">mov     [word ptr </span>XMMCallAddr<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], es
</span><span style="color:black">RESGROUP:21F0
RESGROUP:21F0 </span><span style="color:gray">cXMMexit</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">RESGROUP:21F0                 </span><span style="color:navy">pop     es
</span><span style="color:black">RESGROUP:21F1                 </span><span style="color:navy">retn
</span><span style="color:black">RESGROUP:21F1 </span>endp            get_XMMAddr
<span style="color:black">RESGROUP:21F1
RESGROUP:21F1 </span><span style="color:gray">; ---------------------------------------------------------------------------
RESGROUP:21F2                 </span><span style="color:navy">db </span><span style="color:#008040">14 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span>; align 16
<span style="color:gray">RESGROUP:2200 </span>ICONDEV         <span style="color:navy">db &#039;/DEV&#039;
</span><span style="color:gray">RESGROUP:2204                 </span><span style="color:navy">db &#039;/CON&#039;,0,0,0,0,0,0,0
</span><span style="color:gray">RESGROUP:220F </span>COMSPECT        <span style="color:navy">db &#039;\COMMAND.COM&#039;,0     </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:221C                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:221D </span>AUTOBAT         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:221E                 </span><span style="color:navy">db &#039;</span><span style="color:green">:&#039;
</span><span style="color:gray">RESGROUP:221F                 </span><span style="color:navy">db &#039;\AUTOEXEC.BAT&#039;,0
</span><span style="color:gray">RESGROUP:222D                 </span><span style="color:navy">db </span><span style="color:#008040">0Dh
</span><span style="color:gray">RESGROUP:222E </span>PRDATTM         <span style="color:navy">db </span><span style="color:#008040">0FFh                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:222F </span>INITADD         <span style="color:navy">dw </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2233 </span>print_add       <span style="color:navy">dw offset </span>Printf_Init
<span style="color:gray">RESGROUP:2235                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:2237 </span>triage_add      <span style="color:navy">dw offset </span>Triage_Init   <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2239 </span>triage_add_seg  <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:223B </span>AllocedEnv      <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:223C </span>PathString      <span style="color:navy">db &#039;PATH=&#039;,0            </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2242 </span>DefPathString   <span style="color:navy">db &#039;C:\DOS&#039;,0           </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2249 </span>DefPath2String  <span style="color:navy">db &#039;C:\MSDOS&#039;,0         </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2252 </span>ComspOffset     <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2254 </span>ComspString     <span style="color:navy">db &#039;COMSPEC=\COMMAND.COM&#039;,0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2269 </span>equalsign       <span style="color:navy">db &#039;</span><span style="color:green">=&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:226A </span>lcasea          <span style="color:navy">db &#039;</span><span style="color:green">a&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:226B </span>lcasez          <span style="color:navy">db &#039;</span><span style="color:green">z&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:226C </span>space_chr       <span style="color:navy">db </span><span style="color:#008040">20h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:226D </span>scswitch        <span style="color:navy">db &#039;</span><span style="color:green">C&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:226E </span>skswitch        <span style="color:navy">db &#039;</span><span style="color:green">K&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:226F </span>ucasea          <span style="color:navy">db &#039;</span><span style="color:green">A&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2270 </span>EnvSiz          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2272 </span>EnvMax          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2274 </span>OldEnv          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2276 </span>UsedEnv         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2278 </span>PARS_MSG_OFF    <span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:227A </span>PARS_MSG_SEG    <span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:227C </span>Init_Parse      <span style="color:navy">dw offset </span>append_parse  <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:227C                                         </span>; init_p
<span style="color:gray">RESGROUP:227E </span>InitEnd         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2280 </span>TrnSize         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2282 </span>resetenv        <span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:2283 </span>ext_msg         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2284 </span>eswitch         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2285 </span>dswitch         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2286 </span>parsemes_ptr    <span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:2288 </span>PARSE_COMMAND   <span style="color:navy">dw offset </span>COMMAND_PARMS <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:228A                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:228B </span>COMMAND_PARMS   <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:228C                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">RESGROUP:228D                 </span><span style="color:navy">dw offset </span>COMMAND_FILE
<span style="color:gray">RESGROUP:228F                 </span><span style="color:navy">dw offset </span>COMMAND_FILE
<span style="color:gray">RESGROUP:2291                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">RESGROUP:2292                 </span><span style="color:navy">dw offset </span>COMMAND_SWITCH1
<span style="color:gray">RESGROUP:2294                 </span><span style="color:navy">dw offset </span>COMMAND_SWITCH2
<span style="color:gray">RESGROUP:2296                 </span><span style="color:navy">dw offset </span>COMMAND_SWITCH3
<span style="color:gray">RESGROUP:2298                 </span><span style="color:navy">dw offset </span>COMMAND_SWITCH4
<span style="color:gray">RESGROUP:229A                 </span><span style="color:navy">dw offset </span>COMMAND_SWITCH5
<span style="color:gray">RESGROUP:229C                 </span><span style="color:navy">dw offset </span>COMMAND_SWITCH6
<span style="color:gray">RESGROUP:229E                 </span><span style="color:navy">dw offset </span>COMMAND_SWITCH7
<span style="color:gray">RESGROUP:22A0                 </span><span style="color:navy">dw offset </span>COMMAND_SWITCH8
<span style="color:gray">RESGROUP:22A2                 </span><span style="color:navy">dw offset </span>COMMAND_SWITCH9
<span style="color:gray">RESGROUP:22A4                 </span><span style="color:navy">dw offset </span>COMMAND_SWITCH10
<span style="color:gray">RESGROUP:22A6                 </span><span style="color:navy">dw offset </span>COMMAND_SWITCH11
<span style="color:gray">RESGROUP:22A8                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:22A9 </span>COMMAND_FILE    <span style="color:navy">dw </span><span style="color:#008040">201h                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:22AB                 </span><span style="color:navy">dw </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:22AD                 </span><span style="color:navy">dw offset </span>COMND1_OUTPUT
<span style="color:gray">RESGROUP:22AF                 </span><span style="color:navy">dw offset </span>NO_VAL
<span style="color:gray">RESGROUP:22B1                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:22B2 </span>COMMAND_SWITCH1 <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:22B4                 </span><span style="color:navy">dw </span><span style="color:#008040">2
</span><span style="color:gray">RESGROUP:22B6                 </span><span style="color:navy">dw offset </span>COMND1_OUTPUT
<span style="color:gray">RESGROUP:22B8                 </span><span style="color:navy">dw offset </span>NO_VAL
<span style="color:gray">RESGROUP:22BA                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:22BB </span>COMMAND_P_SYN   <span style="color:navy">db &#039;/P&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:22BE </span>COMMAND_SWITCH2 <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:22C0                 </span><span style="color:navy">dw </span><span style="color:#008040">2
</span><span style="color:gray">RESGROUP:22C2                 </span><span style="color:navy">dw offset </span>COMND1_OUTPUT
<span style="color:gray">RESGROUP:22C4                 </span><span style="color:navy">dw offset </span>NO_VAL
<span style="color:gray">RESGROUP:22C6                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:22C7 </span>COMMAND_F_SYN   <span style="color:navy">db &#039;/F&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:22CA </span>COMMAND_SWITCH3 <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:22CC                 </span><span style="color:navy">dw </span><span style="color:#008040">2
</span><span style="color:gray">RESGROUP:22CE                 </span><span style="color:navy">dw offset </span>COMND1_OUTPUT
<span style="color:gray">RESGROUP:22D0                 </span><span style="color:navy">dw offset </span>NO_VAL
<span style="color:gray">RESGROUP:22D2                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:22D3 </span>COMMAND_D_SYN   <span style="color:navy">db &#039;/D&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:22D6 </span>COMMAND_SWITCH4 <span style="color:navy">dw </span><span style="color:#008040">8000h                </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:22D8                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:22DA                 </span><span style="color:navy">dw offset </span>COMND1_OUTPUT
<span style="color:gray">RESGROUP:22DC                 </span><span style="color:navy">dw offset </span>COMMAND_E_VAL
<span style="color:gray">RESGROUP:22DE                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:22DF </span>COMMAND_E_SYN   <span style="color:navy">db &#039;/E&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:22E2 </span>COMMAND_E_VAL   <span style="color:navy">db </span><span style="color:#008040">1                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:22E3                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:22E4                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:22E5                 </span><span style="color:navy">dd </span><span style="color:#008040">160
</span><span style="color:gray">RESGROUP:22E9                 </span><span style="color:navy">dd </span><span style="color:#008040">32768
</span><span style="color:gray">RESGROUP:22ED                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:22EE                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:22EF </span>COMMAND_SWITCH5 <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:22F1                 </span><span style="color:navy">dw </span><span style="color:#008040">2
</span><span style="color:gray">RESGROUP:22F3                 </span><span style="color:navy">dw offset </span>COMND1_OUTPUT
<span style="color:gray">RESGROUP:22F5                 </span><span style="color:navy">dw offset </span>NO_VAL
<span style="color:gray">RESGROUP:22F7                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:22F8 </span>COMMAND_C_SYN   <span style="color:navy">db &#039;/C&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:22FB </span>COMMAND_SWITCH6 <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:22FD                 </span><span style="color:navy">dw </span><span style="color:#008040">2
</span><span style="color:gray">RESGROUP:22FF                 </span><span style="color:navy">dw offset </span>COMND1_OUTPUT
<span style="color:gray">RESGROUP:2301                 </span><span style="color:navy">dw offset </span>NO_VAL
<span style="color:gray">RESGROUP:2303                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:2304 </span>COMMAND_M_SYN   <span style="color:navy">db &#039;/MSG&#039;,0             </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2309 </span>COMMAND_SWITCH7 <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:230B                 </span><span style="color:navy">dw </span><span style="color:#008040">2
</span><span style="color:gray">RESGROUP:230D                 </span><span style="color:navy">dw offset </span>COMND1_OUTPUT
<span style="color:gray">RESGROUP:230F                 </span><span style="color:navy">dw offset </span>NO_VAL
<span style="color:gray">RESGROUP:2311                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:2312 </span>COMMAND_?_SYN   <span style="color:navy">db &#039;/?&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2315 </span>COMMAND_SWITCH8 <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2317                 </span><span style="color:navy">dw </span><span style="color:#008040">2
</span><span style="color:gray">RESGROUP:2319                 </span><span style="color:navy">dw offset </span>COMND1_OUTPUT
<span style="color:gray">RESGROUP:231B                 </span><span style="color:navy">dw offset </span>NO_VAL
<span style="color:gray">RESGROUP:231D                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:231E </span>COMMAND_K_SYN   <span style="color:navy">db &#039;/K&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2321 </span>COMMAND_SWITCH9 <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2323                 </span><span style="color:navy">dw </span><span style="color:#008040">2
</span><span style="color:gray">RESGROUP:2325                 </span><span style="color:navy">dw offset </span>COMND1_OUTPUT
<span style="color:gray">RESGROUP:2327                 </span><span style="color:navy">dw offset </span>NO_VAL
<span style="color:gray">RESGROUP:2329                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:232A </span>COMMAND_Y_SYN   <span style="color:navy">db &#039;/Y&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:232D </span>COMMAND_SWITCH10 <span style="color:navy">dw </span><span style="color:#008040">0                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:232F                 </span><span style="color:navy">dw </span><span style="color:#008040">2
</span><span style="color:gray">RESGROUP:2331                 </span><span style="color:navy">dw offset </span>COMND1_OUTPUT
<span style="color:gray">RESGROUP:2333                 </span><span style="color:navy">dw offset </span>NO_VAL
<span style="color:gray">RESGROUP:2335                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:2336 </span>COMMAND_H_SYN   <span style="color:navy">db &#039;/H&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2339 </span>COMMAND_SWITCH11 <span style="color:navy">dw </span><span style="color:#008040">0                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:233B                 </span><span style="color:navy">dw </span><span style="color:#008040">2
</span><span style="color:gray">RESGROUP:233D                 </span><span style="color:navy">dw offset </span>COMND1_OUTPUT
<span style="color:gray">RESGROUP:233F                 </span><span style="color:navy">dw offset </span>NO_VAL
<span style="color:gray">RESGROUP:2341                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">RESGROUP:2342 </span>COMMAND_O_SYN   <span style="color:navy">db &#039;/O&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2345 </span>COMND1_OUTPUT   <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2345                                         </span>; COMND1_TYPE
<span style="color:gray">RESGROUP:2346 </span>COMND1_CODE     <span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:2347 </span>COMND1_SYN      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2349 </span>COMND1_ADDR     <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:234D </span>NO_VAL          <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:234E </span>num_positionals <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2350 </span>old_parse_ptr   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2352 </span>BADVERMSG       <span style="color:navy">db </span><span style="color:#008040">23                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2353                 </span><span style="color:navy">db &#039;Incorrect DOS version&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:236A </span>OUTENVMSG       <span style="color:navy">db </span><span style="color:#008040">26                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:236B                 </span><span style="color:navy">db &#039;Out of environment space&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:2385 </span>COPYRIGHTMSG    <span style="color:navy">db </span><span style="color:#008040">100                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2386                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">RESGROUP:2386                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">RESGROUP:2386                 </span><span style="color:navy">db &#039;PC DOS Version 7.10&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:2386                 </span><span style="color:navy">db &#039;             (C)Copyright International Business Machines Corp 19&#039;
</span><span style="color:gray">RESGROUP:2386                 </span><span style="color:navy">db &#039;81-2002.&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:23EA </span>BADCOMLKMES     <span style="color:navy">db </span><span style="color:#008040">40                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:23EB                 </span><span style="color:navy">db &#039;Specified COMMAND search directory bad&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:2413 </span>BADCOMACCMSG    <span style="color:navy">db </span><span style="color:#008040">55                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2414                 </span><span style="color:navy">db &#039;Specified COMMAND search directory bad, access denied&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:244B </span>HELPMSG1        <span style="color:navy">db </span><span style="color:#008040">38h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:244C                 </span><span style="color:navy">db &#039;Starts a new copy of the PC DOS Command Interpreter.&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:244C                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">RESGROUP:2484 </span>HELPMSG2        <span style="color:navy">db </span><span style="color:#008040">38h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2485                 </span><span style="color:navy">db &#039;COMMAND [[drive:]path] [device] [/E:nnnnn] [/P [/MSG]]&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:24BD </span>HELPMSG3        <span style="color:navy">db </span><span style="color:#008040">34h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:24BE                 </span><span style="color:navy">db &#039;        [/H] [/O] [/Y [/C command | /K command]]&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:24BE                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">RESGROUP:24F2 </span>HELPMSG4        <span style="color:navy">db </span><span style="color:#008040">48h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:24F3                 </span><span style="color:navy">db &#039;  [drive:]path    Specifies the directory containing COMMAND.COM &#039;
</span><span style="color:gray">RESGROUP:24F3                 </span><span style="color:navy">db &#039;file.&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:253B </span>HELPMSG5        <span style="color:navy">db </span><span style="color:#008040">4Dh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:253C                 </span><span style="color:navy">db &#039;  device          Specifies the device to use for command input a&#039;
</span><span style="color:gray">RESGROUP:253C                 </span><span style="color:navy">db &#039;nd output.&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:2589 </span>HELPMSG6        <span style="color:navy">db </span><span style="color:#008040">45h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:258A                 </span><span style="color:navy">db &#039;  /E:nnnnn        Sets the initial environment size to nnnnn byte&#039;
</span><span style="color:gray">RESGROUP:258A                 </span><span style="color:navy">db &#039;s.&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:25CF </span>HELPMSG7        <span style="color:navy">db </span><span style="color:#008040">4Dh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:25D0                 </span><span style="color:navy">db &#039;  /P              Makes the new Command Interpreter permanent (ca&#039;
</span><span style="color:gray">RESGROUP:25D0                 </span><span style="color:navy">db &#039;n&#039;,27h,&#039;t exit).&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:261D </span>HELPMSG8        <span style="color:navy">db </span><span style="color:#008040">46h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:261E                 </span><span style="color:navy">db &#039;  /MSG            Stores all error messages in memory (requires /&#039;
</span><span style="color:gray">RESGROUP:261E                 </span><span style="color:navy">db &#039;P).&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:2664 </span>HELPMSG9        <span style="color:navy">db </span><span style="color:#008040">4Ah                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2665                 </span><span style="color:navy">db &#039;  /H              Loads the Command Interpreter into a UMB if ava&#039;
</span><span style="color:gray">RESGROUP:2665                 </span><span style="color:navy">db &#039;ilable.&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:26AF </span>HELPMSG10       <span style="color:navy">db </span><span style="color:#008040">4Eh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:26B0                 </span><span style="color:navy">db &#039;  /O              Disables overwrite prompt on COPY,XCOPY,and MOV&#039;
</span><span style="color:gray">RESGROUP:26B0                 </span><span style="color:navy">db &#039;E commands.&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:26FE </span>HELPMSG11       <span style="color:navy">db </span><span style="color:#008040">4Ah                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:26FF                 </span><span style="color:navy">db &#039;  /Y              Steps through the batch program specified by /C&#039;
</span><span style="color:gray">RESGROUP:26FF                 </span><span style="color:navy">db &#039; or /K.&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:2749 </span>HELPMSG12       <span style="color:navy">db </span><span style="color:#008040">3Fh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:274A                 </span><span style="color:navy">db &#039;  /C command      Executes the specified command and returns.&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:2789 </span>HELPMSG13       <span style="color:navy">db </span><span style="color:#008040">4Bh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:278A                 </span><span style="color:navy">db &#039;  /K command      Executes the specified command and continues ru&#039;
</span><span style="color:gray">RESGROUP:278A                 </span><span style="color:navy">db &#039;nning.&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:278A                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">RESGROUP:27D5 </span>HELPMSG14       <span style="color:navy">db </span><span style="color:#008040">4Ch                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:27D6                 </span><span style="color:navy">db &#039;The /P and /MSG switches may be used only when COMMAND is started&#039;
</span><span style="color:gray">RESGROUP:27D6                 </span><span style="color:navy">db &#039; by using&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:2822 </span>HELPMSG15       <span style="color:navy">db </span><span style="color:#008040">2Bh                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2823                 </span><span style="color:navy">db &#039;the SHELL command in the CONFIG.SYS file.&#039;,0Dh,0Ah
</span><span style="color:gray">RESGROUP:284E </span>HelpMsgs        <span style="color:navy">dw offset </span>HELPMSG1      <span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2850                 </span><span style="color:navy">dw offset </span>HELPMSG2
<span style="color:gray">RESGROUP:2852                 </span><span style="color:navy">dw offset </span>HELPMSG3
<span style="color:gray">RESGROUP:2854                 </span><span style="color:navy">dw offset </span>HELPMSG4
<span style="color:gray">RESGROUP:2856                 </span><span style="color:navy">dw offset </span>HELPMSG5
<span style="color:gray">RESGROUP:2858                 </span><span style="color:navy">dw offset </span>HELPMSG6
<span style="color:gray">RESGROUP:285A                 </span><span style="color:navy">dw offset </span>HELPMSG7
<span style="color:gray">RESGROUP:285C                 </span><span style="color:navy">dw offset </span>HELPMSG8
<span style="color:gray">RESGROUP:285E                 </span><span style="color:navy">dw offset </span>HELPMSG9
<span style="color:gray">RESGROUP:2860                 </span><span style="color:navy">dw offset </span>HELPMSG10
<span style="color:gray">RESGROUP:2862                 </span><span style="color:navy">dw offset </span>HELPMSG11
<span style="color:gray">RESGROUP:2864                 </span><span style="color:navy">dw offset </span>HELPMSG12
<span style="color:gray">RESGROUP:2866                 </span><span style="color:navy">dw offset </span>HELPMSG13
<span style="color:gray">RESGROUP:2868                 </span><span style="color:navy">dw offset </span>HELPMSG14
<span style="color:gray">RESGROUP:286A                 </span><span style="color:navy">dw offset </span>HELPMSG15
<span style="color:gray">RESGROUP:286C                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">RESGROUP:286E </span>Reloc_Table     <span style="color:navy">dw </span><span style="color:#008040">7B2h                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:286E                                         </span>; MsgInt2fHandler - RCODE_START (15C2h-0E10h)
<span style="color:gray">RESGROUP:2870                 </span><span style="color:navy">dw </span><span style="color:#008040">170h                 </span>; Int_2e - RCODE_START
<span style="color:gray">RESGROUP:2872                 </span><span style="color:navy">dw </span><span style="color:#008040">2Eh                  </span>; ContC - RCODE_START
<span style="color:gray">RESGROUP:2874                 </span><span style="color:navy">dw </span><span style="color:#008040">495h                 </span>; DSKERR - RCODE_START
<span style="color:gray">RESGROUP:2876                 </span><span style="color:navy">dw </span><span style="color:#008040">22h                  </span>; Exec_Ret - RCODE_START
<span style="color:gray">RESGROUP:2878                 </span><span style="color:navy">dw </span><span style="color:#008040">2A6h                 </span>; TRemCheck - RCODE_START
<span style="color:gray">RESGROUP:287A                 </span><span style="color:navy">dw </span><span style="color:#008040">472h                 </span>; TrnLodCom1 - RCODE_START
<span style="color:gray">RESGROUP:287C                 </span><span style="color:navy">dw </span><span style="color:#008040">1A7h                 </span>; LodCom - RCODE_START
<span style="color:gray">RESGROUP:287E                 </span><span style="color:navy">dw </span><span style="color:#008040">7F5h                 </span>; MsgRetriever - RCODE_START
<span style="color:gray">RESGROUP:2880                 </span><span style="color:navy">dw </span><span style="color:#008040">2C5h                 </span>; THeadFix - RCODE_START
<span style="color:gray">RESGROUP:2882                 </span><span style="color:navy">dw </span><span style="color:#008040">86Eh                 </span>; Lh_OffUnlink - RCODE_START
<span style="color:gray">RESGROUP:2884 </span>ResJmpTable     <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2888 </span>FirstCom        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:2889 </span>DevFlag         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:288A </span>PathFlag        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">RESGROUP:288B                 </span><span style="color:navy">db </span><span style="color:#008040">5 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)
</span><span style="color:gray">RESGROUP:288B </span>ends            RESGROUP
<span style="color:gray">RESGROUP:288B
TRANGROUP:0000 ; ===========================================================================
TRANGROUP:0000
TRANGROUP:0000 ; Segment type: Regular
TRANGROUP:0000 </span>segment         TRANGROUP byte public &#039;TRANGROUP&#039; use16
<span style="color:gray">TRANGROUP:0000                 </span>assume cs:TRANGROUP
<span style="color:gray">TRANGROUP:0000                 </span>assume es:nothing, ss:nothing, ds:nothing, fs:nothing, gs:nothing
<span style="color:gray">TRANGROUP:0000 </span>TRANSIENTSTART  <span style="color:navy">db </span><span style="color:#008040">256 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)           </span><span style="color:gray">; 0
</span><span style="color:black">TRANGROUP:0100 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0100 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR PROMPTBAT
</span><span style="color:black">TRANGROUP:0100
TRANGROUP:0100 </span><span style="color:gray">SETDRV</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0100                 </span><span style="color:navy">mov     ah, </span><span style="color:green">0Eh
</span><span style="color:black">TRANGROUP:0102                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SELECT DISK
<span style="color:black">TRANGROUP:0102                                         </span>; DL = new default drive number (0 = A, 1 = B, etc.)
<span style="color:black">TRANGROUP:0102                                         </span>; Return: AL = number of logical drives
<span style="color:black">TRANGROUP:0104
TRANGROUP:0104 </span>TCOMMAND<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0104                 </span><span style="color:navy">nop
</span><span style="color:black">TRANGROUP:0105                 </span><span style="color:navy">nop
</span><span style="color:black">TRANGROUP:0106                 </span><span style="color:navy">mov     ds, [cs:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:010B                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:010B                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:010E                 </span><span style="color:navy">xchg    ax, [</span>VerVal<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0112                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:0115                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOSETVER2
</span><span style="color:black">TRANGROUP:0117                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2Eh
</span><span style="color:black">TRANGROUP:0119                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET VERIFY FLAG
<span style="color:black">TRANGROUP:0119                                         </span>; DL = 00h, AL = 01h VERIFY on / 00h VERIFY off
<span style="color:black">TRANGROUP:011B
TRANGROUP:011B </span><span style="color:gray">NOSETVER2</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:011B                 </span><span style="color:navy">call    [dword ptr cs:</span>HEADCALL<span style="color:navy">] </span>; call far [cs:HEADCALL]
<span style="color:black">TRANGROUP:0120                 </span><span style="color:navy">xor     bp, bp
</span><span style="color:black">TRANGROUP:0122                 </span><span style="color:navy">cmp     [</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:black">TRANGROUP:0127                 </span><span style="color:navy">jnz     short </span>COMMAND
<span style="color:black">TRANGROUP:0129
TRANGROUP:0129 </span><span style="color:gray">_$EXITPREP</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0129                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:012A                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:012B                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:012B                 </span><span style="color:navy">jmp     </span>_$EXIT
<span style="color:black">TRANGROUP:012E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:012E
TRANGROUP:012E </span>COMMAND<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:012E                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:012F                 </span><span style="color:navy">mov     ax, cs
</span><span style="color:black">TRANGROUP:0131                 </span><span style="color:navy">cli
</span><span style="color:black">TRANGROUP:0132                 </span><span style="color:navy">mov     ss, ax
</span><span style="color:black">TRANGROUP:0134                 </span>assume ss:TRANGROUP
<span style="color:black">TRANGROUP:0134                 </span><span style="color:navy">mov     sp, offset </span>STACK ; 0AA2Dh
<span style="color:black">TRANGROUP:0137                 </span><span style="color:navy">sti
</span><span style="color:black">TRANGROUP:0138                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:013A                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:013A                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:black">TRANGROUP:013C                 </span><span style="color:navy">call    </span>TSYSLOADMSG
<span style="color:black">TRANGROUP:013F                 </span><span style="color:navy">mov     [</span>append_exec<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0144                 </span><span style="color:navy">mov     ds, [</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0148                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:0148                 </span><span style="color:navy">mov     [ss:</span>UCOMBUF<span style="color:navy">], </span><span style="color:green">128
</span><span style="color:black">TRANGROUP:014E                 </span><span style="color:navy">mov     [ss:</span>COMBUF<span style="color:navy">], </span><span style="color:green">128
</span><span style="color:black">TRANGROUP:0154                 </span><span style="color:navy">or      bp, bp
</span><span style="color:black">TRANGROUP:0156                 </span><span style="color:navy">jz      short </span><span style="color:gray">TESTRDIR
</span><span style="color:black">TRANGROUP:0158                 </span><span style="color:navy">mov     [word ptr ss:</span>UCOMBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">0D01h </span>; Reset buffer
<span style="color:black">TRANGROUP:015F                 </span><span style="color:navy">jmp     short </span><span style="color:gray">NOSETBUF
</span><span style="color:black">TRANGROUP:0161 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0161
TRANGROUP:0161 </span><span style="color:gray">TESTRDIR</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0161                 </span><span style="color:navy">cmp     [</span>RestDir<span style="color:navy">], </span><span style="color:#ff8000">0    </span>; byte
<span style="color:black">TRANGROUP:0166                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOSETBUF
</span><span style="color:black">TRANGROUP:0168                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:0169                 </span><span style="color:navy">mov     [</span>RestDir<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:016E                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:016F                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0170                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:0170                 </span><span style="color:navy">mov     dx, offset </span>USERDIR1
<span style="color:black">TRANGROUP:0173                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Bh
</span><span style="color:black">TRANGROUP:0175                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CHANGE THE CURRENT DIRECTORY (CHDIR)
<span style="color:black">TRANGROUP:0175                                         </span>; DS:DX -&gt; ASCIZ directory name (may include drive)
<span style="color:black">TRANGROUP:0177                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0178                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:0178
TRANGROUP:0178 </span><span style="color:gray">NOSETBUF</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0178                 </span><span style="color:navy">cmp     [ds:</span>PipeFiles<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:017D                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOPCLOSE
</span><span style="color:black">TRANGROUP:017F                 </span><span style="color:navy">cmp     [ds:</span>PipeFlag<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0184                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOPCLOSE
</span><span style="color:black">TRANGROUP:0186                 </span><span style="color:navy">call    </span>PIPEDEL
<span style="color:black">TRANGROUP:0189
TRANGROUP:0189 </span><span style="color:gray">NOPCLOSE</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0189                 </span><span style="color:navy">mov     [ds:</span>ExtCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:018E                 </span><span style="color:navy">mov     ax, cs
</span><span style="color:black">TRANGROUP:0190                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:black">TRANGROUP:0192                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:0192                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:0193                 </span><span style="color:navy">mov     dx, offset </span>STACK ; INTERNATVARS
<span style="color:black">TRANGROUP:0196                 </span><span style="color:navy">mov     ax, </span><span style="color:green">3800h
</span><span style="color:black">TRANGROUP:0199                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET COUNTRY-DEPENDENT INFORMATION
<span style="color:black">TRANGROUP:0199                                         </span>; get current-country info
<span style="color:black">TRANGROUP:0199                                         </span>; DS:DX -&gt; buffer for returned info
<span style="color:black">TRANGROUP:019B                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:019C                 </span><span style="color:navy">sub     ax, [</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:01A0                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:01A1                 </span><span style="color:navy">mov     bx, </span><span style="color:green">16
</span><span style="color:black">TRANGROUP:01A4                 </span><span style="color:navy">mul     bx
</span><span style="color:black">TRANGROUP:01A6                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:01A7                 </span><span style="color:navy">or      dx, dx
</span><span style="color:black">TRANGROUP:01A9                 </span><span style="color:navy">jz      short </span><span style="color:gray">SAVSIZ
</span><span style="color:black">TRANGROUP:01AB                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FFFFh      </span>; -1
<span style="color:black">TRANGROUP:01AE
TRANGROUP:01AE </span><span style="color:gray">SAVSIZ</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:01AE                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">512
</span><span style="color:black">TRANGROUP:01B1                 </span><span style="color:navy">jbe     short </span><span style="color:gray">GOTSIZE
</span><span style="color:black">TRANGROUP:01B3                 </span><span style="color:navy">and     ax, </span><span style="color:green">0FE00h      </span>; ~1FFh
<span style="color:black">TRANGROUP:01B6
TRANGROUP:01B6 </span><span style="color:gray">GOTSIZE</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:01B6                 </span><span style="color:navy">mov     [</span>BYTCNT<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:01B9                 </span><span style="color:navy">mov     ds, [</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:01BD                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:01BD                 </span><span style="color:navy">test    [</span>EchoFlag<span style="color:navy">], </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:01C2                 </span><span style="color:navy">jz      short </span><span style="color:gray">GETCOM
</span><span style="color:black">TRANGROUP:01C4                 </span><span style="color:navy">call    </span>SINGLETEST
<span style="color:black">TRANGROUP:01C7                 </span><span style="color:navy">jb      short </span><span style="color:gray">GETCOM
</span><span style="color:black">TRANGROUP:01C9                 </span><span style="color:navy">test    [</span>PipeFlag<span style="color:navy">], </span><span style="color:green">0FFh
</span><span style="color:black">TRANGROUP:01CE                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GETCOM
</span><span style="color:black">TRANGROUP:01D0                 </span><span style="color:navy">test    [</span>ForFlag<span style="color:navy">], </span><span style="color:green">0FFh
</span><span style="color:black">TRANGROUP:01D5                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GETCOM
</span><span style="color:black">TRANGROUP:01D7                 </span><span style="color:navy">test    [</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:01DD                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GETCOM
</span><span style="color:black">TRANGROUP:01DF                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:01E2
TRANGROUP:01E2 </span><span style="color:gray">GETCOM</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:01E2                 </span><span style="color:navy">cmp     [</span>SingleCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:01E7                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GETCOM2
</span><span style="color:black">TRANGROUP:01E9                 </span><span style="color:navy">test    [</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:01EF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GETCOM2
</span><span style="color:black">TRANGROUP:01F1                 </span><span style="color:navy">and     [byte ptr </span>Y_Flag<span style="color:navy">], </span><span style="color:green">0EFh </span>; Y/N question overwrite flag ; ~10h
<span style="color:black">TRANGROUP:01F6
TRANGROUP:01F6 </span><span style="color:gray">GETCOM2</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:01F6                 </span><span style="color:navy">mov     [</span>Call_Flag<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:01FB                 </span><span style="color:navy">mov     [</span>Call_Batch_Flag<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0200                 </span><span style="color:navy">mov     ah, </span><span style="color:green">19h
</span><span style="color:black">TRANGROUP:0202                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - GET DEFAULT DISK NUMBER
<span style="color:black">TRANGROUP:0204                 </span><span style="color:navy">mov     [ss:</span>CURDRV<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:0208                 </span><span style="color:navy">test    [</span>PipeFlag<span style="color:navy">], </span><span style="color:green">0FFh </span>; -1
<span style="color:black">TRANGROUP:020D                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOPIPE
</span><span style="color:black">TRANGROUP:020F                 </span><span style="color:navy">jmp     </span><span style="color:gray">PIPEPROC
</span><span style="color:black">TRANGROUP:0212 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0212
TRANGROUP:0212 </span><span style="color:gray">NOPIPE</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0212                 </span><span style="color:navy">test    [</span>EchoFlag<span style="color:navy">], </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:0217                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOPDRV
</span><span style="color:black">TRANGROUP:0219                 </span><span style="color:navy">call    </span>SINGLETEST
<span style="color:black">TRANGROUP:021C                 </span><span style="color:navy">jb      short </span><span style="color:gray">NOPDRV
</span><span style="color:black">TRANGROUP:021E                 </span><span style="color:navy">test    [</span>ForFlag<span style="color:navy">], </span><span style="color:green">0FFh
</span><span style="color:black">TRANGROUP:0223                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOPDRV
</span><span style="color:black">TRANGROUP:0225                 </span><span style="color:navy">test    [</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:022B                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TESTFORBAT
</span><span style="color:black">TRANGROUP:022D                 </span><span style="color:navy">call    </span>PRINT_PROMPT
<span style="color:black">TRANGROUP:0230
TRANGROUP:0230 </span><span style="color:gray">NOPDRV</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0230                 </span><span style="color:navy">test    [</span>ForFlag<span style="color:navy">], </span><span style="color:green">0FFh
</span><span style="color:black">TRANGROUP:0235                 </span><span style="color:navy">jz      short </span><span style="color:gray">TESTFORBAT
</span><span style="color:black">TRANGROUP:0237                 </span><span style="color:navy">jmp     </span><span style="color:gray">FORPROC         </span>; Continue the FOR
<span style="color:black">TRANGROUP:023A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:023A
TRANGROUP:023A </span><span style="color:gray">TESTFORBAT</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:023A                 </span><span style="color:navy">mov     [ss:</span>RE_INSTR<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0240                 </span><span style="color:navy">mov     [</span>Re_OutStr<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0245                 </span><span style="color:navy">mov     [</span>Re_Out_App<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:024A                 </span><span style="color:navy">mov     [</span>IfFlag<span style="color:navy">], </span><span style="color:#ff8000">0     </span>; no more ifs...
<span style="color:black">TRANGROUP:024F                 </span><span style="color:navy">test    [</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:0255                 </span><span style="color:navy">jz      short </span><span style="color:gray">ISNOBAT
</span><span style="color:black">TRANGROUP:0257                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:0258                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:0259                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1902h
</span><span style="color:black">TRANGROUP:025C                 </span><span style="color:navy">mov     es, [</span>Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0260                 </span>assume es:nothing
<span style="color:black">TRANGROUP:0260                 </span><span style="color:navy">mov     di, </span><span style="color:green">20h         </span>; BATCHSEGMENT.BatFile
<span style="color:black">TRANGROUP:0263                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:0264                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0265                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:0265                 </span><span style="color:navy">mov     dx, offset </span>COMBUF
<span style="color:black">TRANGROUP:0268                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - DOS 4.x only SHELLB.COM - COMMAND.COM INTERFACE
<span style="color:black">TRANGROUP:0268                                         </span>; ES:DI -&gt; ASCIZ full filename of current batch file, with at least the
<span style="color:black">TRANGROUP:0268                                         </span>; final filename element uppercased
<span style="color:black">TRANGROUP:0268                                         </span>; DS:DX -&gt; buffer for results
<span style="color:black">TRANGROUP:026A                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh        </span>; shell_action
<span style="color:black">TRANGROUP:026C                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:026D                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:026D                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:026E                 </span><span style="color:navy">jz      short </span><span style="color:gray">JDOCOM1
</span><span style="color:black">TRANGROUP:0270                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:0271                 </span><span style="color:navy">call    </span>READBAT
<span style="color:black">TRANGROUP:0274                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0275                 </span><span style="color:navy">mov     [ds:</span>NullFlag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; reset no command flag
<span style="color:black">TRANGROUP:027A                 </span><span style="color:navy">test    [ds:</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:0280                 </span><span style="color:navy">jnz     short </span><span style="color:gray">JDOCOM1   </span>; if batch still in progress continue
<span style="color:black">TRANGROUP:0282                 </span><span style="color:navy">mov     bx, [ds:</span>Next_Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0286                 </span><span style="color:navy">cmp     bx, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0289                 </span><span style="color:navy">jz      short </span><span style="color:gray">JDOCOM1
</span><span style="color:black">TRANGROUP:028B                 </span><span style="color:navy">mov     [ds:</span>Batch<span style="color:navy">], bx  </span>; get segment of next batch file
<span style="color:black">TRANGROUP:028F                 </span><span style="color:navy">mov     [ds:</span>Next_Batch<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; reset next batch
<span style="color:black">TRANGROUP:0295
TRANGROUP:0295 </span><span style="color:gray">JDOCOM1</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0295                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:0296                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0297                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:0297                 </span><span style="color:navy">jmp     short </span>DOCOM0
<span style="color:black">TRANGROUP:0299 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0299
TRANGROUP:0299 </span><span style="color:gray">ISNOBAT</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0299                 </span><span style="color:navy">cmp     [ds:</span>SingleCom<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:029E                 </span><span style="color:navy">jz      short </span><span style="color:gray">REGCOM
</span><span style="color:black">TRANGROUP:02A0                 </span><span style="color:navy">mov     si, [ds:</span>SemiPermCom<span style="color:navy">]
</span><span style="color:black">TRANGROUP:02A4                 </span><span style="color:navy">xchg    si, [ds:</span>SingleCom<span style="color:navy">]
</span><span style="color:black">TRANGROUP:02A8                 </span><span style="color:navy">mov     di, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:02AB                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:02AD
TRANGROUP:02AD </span><span style="color:gray">SINGLELOOP</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:02AD                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:02AE                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:02AF                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:02B0                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:02B2                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SINGLELOOP
</span><span style="color:black">TRANGROUP:02B4                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:02B5                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:02B6                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:02B7                 </span><span style="color:navy">mov     [</span>COMBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">], cl
</span><span style="color:black">TRANGROUP:02BB                 </span><span style="color:navy">jmp     short </span>DOCOM0
<span style="color:black">TRANGROUP:02BD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:02BD
TRANGROUP:02BD </span><span style="color:gray">REGCOM</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:02BD                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5D09h
</span><span style="color:black">TRANGROUP:02C0                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3.1+ internal - FLUSH REDIRECTED PRINTER OUTPUT
<span style="color:black">TRANGROUP:02C2                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">5D08h
</span><span style="color:black">TRANGROUP:02C5                 </span><span style="color:navy">mov     dl, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:02C7                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3.1+ internal - SET REDIRECTED PRINTER MODE
<span style="color:black">TRANGROUP:02C7                                         </span>; DL = 00h redirected output is combined
<span style="color:black">TRANGROUP:02C7                                         </span>;      01h redirected output placed in separate jobs
<span style="color:black">TRANGROUP:02C7                                         </span>; start new print job now
<span style="color:black">TRANGROUP:02C9                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:02CA                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:02CB                 </span><span style="color:navy">mov     dx, offset </span>UCOMBUF
<span style="color:black">TRANGROUP:02CE                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4810h       </span>; DOSKey Read Line function
<span style="color:black">TRANGROUP:02D1                 </span><span style="color:navy">int     </span><span style="color:green">2Fh
</span><span style="color:black">TRANGROUP:02D3                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">TRANGROUP:02D5                 </span><span style="color:navy">jz      short </span><span style="color:gray">GOTCOM    </span>; DOSKey gave us a command line
<span style="color:black">TRANGROUP:02D7                 </span><span style="color:navy">mov     ah, </span><span style="color:green">0Ah
</span><span style="color:black">TRANGROUP:02D9                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - BUFFERED KEYBOARD INPUT
<span style="color:black">TRANGROUP:02D9                                         </span>; DS:DX -&gt; buffer
<span style="color:black">TRANGROUP:02DB
TRANGROUP:02DB </span><span style="color:gray">GOTCOM</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:02DB                 </span><span style="color:navy">mov     cl, [</span>UCOMBUF<span style="color:navy">]
</span><span style="color:black">TRANGROUP:02DF                 </span><span style="color:navy">xor     ch, ch
</span><span style="color:black">TRANGROUP:02E1                 </span><span style="color:navy">add     cx, </span><span style="color:#ff8000">3
</span><span style="color:black">TRANGROUP:02E4                 </span><span style="color:navy">mov     si, offset </span>UCOMBUF
<span style="color:black">TRANGROUP:02E7                 </span><span style="color:navy">mov     di, offset </span>COMBUF
<span style="color:black">TRANGROUP:02EA                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:02EC                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:02EF                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:02F1                 </span><span style="color:navy">jmp     short </span><span style="color:gray">DOCOM2
</span><span style="color:black">TRANGROUP:02F3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:02F3
TRANGROUP:02F3 </span><span style="color:gray">DOCOM</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:02F3                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:02F6
TRANGROUP:02F6 </span>DOCOM0<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:02F6                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:02F9
TRANGROUP:02F9 </span><span style="color:gray">DOCOM2</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:02F9                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:02FA                 </span><span style="color:navy">mov     ds, [</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:02FE                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:02FE                 </span><span style="color:navy">mov     [</span>cox_Y_option<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:0301                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0302                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:0302                 </span><span style="color:navy">mov     si, offset </span>COMBUF
<span style="color:black">TRANGROUP:0305                 </span><span style="color:navy">mov     cl, [si+</span><span style="color:#ff8000">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:0308                 </span><span style="color:navy">xor     ch, ch
</span><span style="color:black">TRANGROUP:030A                 </span><span style="color:navy">add     si, </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:030D                 </span><span style="color:navy">call    </span>get_cox_y_n_opt
<span style="color:black">TRANGROUP:0310                 </span><span style="color:navy">jnb     short </span><span style="color:gray">DOCOM1
</span><span style="color:black">TRANGROUP:0312                 </span><span style="color:navy">jmp     </span>NULLCOM
<span style="color:black">TRANGROUP:0315 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0315
TRANGROUP:0315 </span><span style="color:gray">DOCOM1</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0315                 </span><span style="color:navy">call    </span>PRESCAN
<span style="color:black">TRANGROUP:0318                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOPIPEPROC
</span><span style="color:black">TRANGROUP:031A                 </span><span style="color:navy">jmp     </span><span style="color:gray">PIPEPROCSTRT
</span><span style="color:black">TRANGROUP:031D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:031D
TRANGROUP:031D </span><span style="color:gray">NULLCOMJ</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:031D                 </span><span style="color:navy">jmp     </span>NULLCOM
<span style="color:black">TRANGROUP:0320 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0320
TRANGROUP:0320 </span><span style="color:gray">NOPIPEPROC</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0320                 </span><span style="color:navy">call    </span>PARSELINE
<span style="color:black">TRANGROUP:0323                 </span><span style="color:navy">jnb     short </span>OKPARSE
<span style="color:black">TRANGROUP:0325
TRANGROUP:0325 </span><span style="color:gray">BADPARSE</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0325                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:0326                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0327                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:0327                 </span><span style="color:navy">mov     dx, offset </span>BADNAM_PTR
<span style="color:black">TRANGROUP:032A                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:032D                 </span><span style="color:navy">jmp     </span>TCOMMAND
<span style="color:black">TRANGROUP:0330 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0330
TRANGROUP:0330 </span>OKPARSE<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0330                 </span><span style="color:navy">test    [</span>ARGV0_ARG_FLAGS<span style="color:navy">], </span><span style="color:green">2 </span>; byte [ARG+ARGV_ELE.argflags]
<span style="color:black">TRANGROUP:0335                 </span><span style="color:navy">jnz     short </span><span style="color:gray">BADPARSE
</span><span style="color:black">TRANGROUP:0337                 </span><span style="color:navy">cmp     [</span>ARG_ARGVCNT<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; word [ARG+ARG_UNIT.argvcnt]
<span style="color:black">TRANGROUP:033C                 </span><span style="color:navy">jz      short </span><span style="color:gray">NULLCOMJ
</span><span style="color:black">TRANGROUP:033E                 </span><span style="color:navy">cmp     [</span>ARGV0_ARGLEN<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; word [ARG+ARGV_ELE.arglen]
<span style="color:black">TRANGROUP:0343                 </span><span style="color:navy">jz      short </span><span style="color:gray">NULLCOMJ
</span><span style="color:black">TRANGROUP:0345                 </span><span style="color:navy">mov     si, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:0348                 </span><span style="color:navy">mov     di, offset </span>IDLEN
<span style="color:black">TRANGROUP:034B                 </span><span style="color:navy">mov     ax, </span><span style="color:green">2901h       </span>; (Parse_File_Descriptor&lt;&lt;8)|01h
<span style="color:black">TRANGROUP:034E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - PARSE FILENAME
<span style="color:black">TRANGROUP:034E                                         </span>; DS:SI -&gt; string to parse
<span style="color:black">TRANGROUP:034E                                         </span>; ES:DI -&gt; buffer to fill with unopened FCB
<span style="color:black">TRANGROUP:034E                                         </span>; AL = bit mask to control parsing
<span style="color:black">TRANGROUP:0350                 </span><span style="color:navy">mov     bx, [</span>ARG_ARGV<span style="color:navy">]  </span>; [ARG+ARG_UNIT.argv]
<span style="color:black">TRANGROUP:0354                 </span><span style="color:navy">cmp     [byte ptr bx+</span><span style="color:#ff8000">1</span><span style="color:navy">], &#039;</span><span style="color:green">:&#039;
</span><span style="color:black">TRANGROUP:0358                 </span><span style="color:navy">jnz     short </span><span style="color:gray">DRVGD
</span><span style="color:black">TRANGROUP:035A                 </span><span style="color:navy">mov     dl, [bx]        </span>; [bx+ARGV_ELE.argpointer]
<span style="color:black">TRANGROUP:035C                 </span><span style="color:navy">and     dl, </span><span style="color:green">0DFh        </span>; ~20h ; uppercase
<span style="color:black">TRANGROUP:035F                 </span><span style="color:navy">sub     dl, </span><span style="color:#ff8000">41h </span><span style="color:gray">; &#039;A&#039;   </span>; CAPITAL_A
<span style="color:black">TRANGROUP:0362                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh        </span>; -1
<span style="color:black">TRANGROUP:0364                 </span><span style="color:navy">jz      short </span><span style="color:gray">DRVBADJ
</span><span style="color:black">TRANGROUP:0366                 </span><span style="color:navy">mov     di, [</span>ARGV0_ARGSTARTEL<span style="color:navy">] </span>; [ARG+ARGV_ELE.argstartel]
<span style="color:black">TRANGROUP:036A                 </span><span style="color:navy">cmp     [byte ptr di], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:036D                 </span><span style="color:navy">jnz     short </span><span style="color:gray">DRVGD
</span><span style="color:black">TRANGROUP:036F                 </span><span style="color:navy">jmp     </span><span style="color:gray">SETDRV
</span><span style="color:black">TRANGROUP:0372 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0372
TRANGROUP:0372 </span><span style="color:gray">DRVBADJ</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0372                 </span><span style="color:navy">jmp     </span>DRVBAD
<span style="color:black">TRANGROUP:0375 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0375
TRANGROUP:0375 </span><span style="color:gray">DRVGD</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0375                 </span><span style="color:navy">mov     al, [di]
</span><span style="color:black">TRANGROUP:0377                 </span><span style="color:navy">mov     [</span>SPECDRV<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:037A                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:037C                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:037F                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:0380                 </span><span style="color:navy">repne scasb             </span>; Count number of letters in command name
<span style="color:black">TRANGROUP:0382                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">8
</span><span style="color:black">TRANGROUP:0384                 </span><span style="color:navy">sub     al, cl
</span><span style="color:black">TRANGROUP:0386                 </span><span style="color:navy">mov     [</span>IDLEN<span style="color:navy">], al     </span>; IDLEN is truly the length
<span style="color:black">TRANGROUP:0389                 </span><span style="color:navy">mov     di, </span><span style="color:green">81h
</span><span style="color:black">TRANGROUP:038C                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:038D                 </span><span style="color:navy">mov     si, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:0390                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:0393                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:0394
TRANGROUP:0394 </span>DO_SKIPCOM<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0394                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:0395                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:0398                 </span><span style="color:navy">jz      short </span><span style="color:gray">DO_SKIPPED
</span><span style="color:black">TRANGROUP:039A                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:039C                 </span><span style="color:navy">jz      short </span><span style="color:gray">DO_SKIPPED
</span><span style="color:black">TRANGROUP:039E                 </span><span style="color:navy">cmp     al, [</span>SWITCHAR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:03A2                 </span><span style="color:navy">jnz     short </span>DO_SKIPCOM
<span style="color:black">TRANGROUP:03A4
TRANGROUP:03A4 </span><span style="color:gray">DO_SKIPPED</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:03A4                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:03A5                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:03A7
TRANGROUP:03A7 </span>COMTAIL<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:03A7                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:03A8                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:03A9                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:03A9 </span><span style="color:gray">; END OF FUNCTION CHUNK FOR PROMPTBAT
</span><span style="color:maroon">TRANGROUP:03AB                 </span><span style="color:navy">loopne  </span>COMTAIL
<span style="color:maroon">TRANGROUP:03AD                 </span><span style="color:navy">dec     di
</span><span style="color:maroon">TRANGROUP:03AE                 </span><span style="color:navy">mov     bp, di
</span><span style="color:maroon">TRANGROUP:03B0                 </span><span style="color:navy">not     cl
</span><span style="color:maroon">TRANGROUP:03B2                 </span><span style="color:navy">mov     </span>ds:80h<span style="color:navy">, cl
</span><span style="color:maroon">TRANGROUP:03B6                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:03B7                 </span><span style="color:navy">mov     di, [</span>ARGV0_ARGSW_WORD<span style="color:navy">] </span>; [ARG+ARGV_ELE.argsw_word]
<span style="color:maroon">TRANGROUP:03BB                 </span><span style="color:navy">mov     [</span>COMSW<span style="color:navy">], di
</span><span style="color:maroon">TRANGROUP:03BF                 </span><span style="color:navy">mov     si, [</span>ARGV1_ARGPOINTER<span style="color:navy">] </span>; [ARG+ARGV_ELE.SIZE+ARGV_ELE.argpointer]
<span style="color:maroon">TRANGROUP:03C3                 </span><span style="color:navy">or      si, si
</span><span style="color:maroon">TRANGROUP:03C5                 </span><span style="color:navy">jnz     short </span>DOPARSE
<span style="color:maroon">TRANGROUP:03C7                 </span><span style="color:navy">mov     si, bp
</span><span style="color:maroon">TRANGROUP:03C9
TRANGROUP:03C9 </span>DOPARSE<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:03C9                 </span><span style="color:navy">mov     di, </span><span style="color:green">5Ch         </span>; FCB
<span style="color:maroon">TRANGROUP:03CC                 </span><span style="color:navy">mov     ax, </span><span style="color:green">2901h
</span><span style="color:maroon">TRANGROUP:03CF                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - PARSE FILENAME
<span style="color:maroon">TRANGROUP:03CF                                         </span>; DS:SI -&gt; string to parse
<span style="color:maroon">TRANGROUP:03CF                                         </span>; ES:DI -&gt; buffer to fill with unopened FCB
<span style="color:maroon">TRANGROUP:03CF                                         </span>; AL = bit mask to control parsing
<span style="color:maroon">TRANGROUP:03D1                 </span><span style="color:navy">mov     [</span>PARM1<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:03D4                 </span><span style="color:navy">mov     di, [</span>ARGV1_ARGSW_WORD<span style="color:navy">] </span>; [ARG+ARGV_ELE.SIZE+ARGV_ELE.argsw_word]
<span style="color:maroon">TRANGROUP:03D8                 </span><span style="color:navy">mov     [</span>ARG1S<span style="color:navy">], di
</span><span style="color:maroon">TRANGROUP:03DC                 </span><span style="color:navy">mov     si, [</span>ARGV2_ARGPOINTER<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:03E0                 </span><span style="color:navy">or      si, si
</span><span style="color:maroon">TRANGROUP:03E2                 </span><span style="color:navy">jnz     short </span>DOPARSE2
<span style="color:maroon">TRANGROUP:03E4                 </span><span style="color:navy">mov     si, bp
</span><span style="color:maroon">TRANGROUP:03E6
TRANGROUP:03E6 </span>DOPARSE2<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:03E6                 </span><span style="color:navy">mov     di, </span><span style="color:green">6Ch         </span>; FCB+10h
<span style="color:maroon">TRANGROUP:03E9                 </span><span style="color:navy">mov     ax, </span><span style="color:green">2901h
</span><span style="color:maroon">TRANGROUP:03EC                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - PARSE FILENAME
<span style="color:maroon">TRANGROUP:03EC                                         </span>; DS:SI -&gt; string to parse
<span style="color:maroon">TRANGROUP:03EC                                         </span>; ES:DI -&gt; buffer to fill with unopened FCB
<span style="color:maroon">TRANGROUP:03EC                                         </span>; AL = bit mask to control parsing
<span style="color:maroon">TRANGROUP:03EE                 </span><span style="color:navy">mov     [</span>PARM2<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:03F1                 </span><span style="color:navy">mov     di, [</span>ARGV2_ARGSW_WORD<span style="color:navy">] </span>; [ARG+(2*ARGV_ELE.SIZE)+ARGV_ELE.argsw_word]
<span style="color:maroon">TRANGROUP:03F5                 </span><span style="color:navy">mov     [</span>DestSwitch<span style="color:navy">], di
</span><span style="color:maroon">TRANGROUP:03F9                 </span><span style="color:navy">mov     di, [</span>ARGV0_ARGSW_WORD<span style="color:navy">] </span>; [ARG+ARGV_ELE.argsw_word]
<span style="color:maroon">TRANGROUP:03FD                 </span><span style="color:navy">not     di
</span><span style="color:maroon">TRANGROUP:03FF                 </span><span style="color:navy">and     di, [</span>ARG_ARGSWINFO<span style="color:navy">] </span>; [ARG+ARG_UNIT.argswinfo]
<span style="color:maroon">TRANGROUP:0403                 </span><span style="color:navy">mov     [</span>ARGTS<span style="color:navy">], di
</span><span style="color:maroon">TRANGROUP:0407                 </span><span style="color:navy">mov     al, [</span>IDLEN<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:040A                 </span><span style="color:navy">mov     dl, [</span>SPECDRV<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:040E                 </span><span style="color:navy">or      dl, dl
</span><span style="color:maroon">TRANGROUP:0410                 </span><span style="color:navy">jnz     short </span>EXTERNALJ1
<span style="color:maroon">TRANGROUP:0412                 </span><span style="color:navy">dec     al
</span><span style="color:maroon">TRANGROUP:0414                 </span><span style="color:navy">jmp     </span>FNDCOM
<span style="color:maroon">TRANGROUP:0417 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0417
TRANGROUP:0417 </span>EXTERNALJ1<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0417                 </span><span style="color:navy">jmp     </span>EXTERNAL
<span style="color:black">TRANGROUP:041A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:041A </span><span style="color:gray">; START OF FUNCTION CHUNK FOR PROMPTBAT
</span><span style="color:black">TRANGROUP:041A
TRANGROUP:041A </span>NULLCOM<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:041A                 </span><span style="color:navy">mov     ds, [</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:041E                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:041E                 </span><span style="color:navy">test    [</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:black">TRANGROUP:0424                 </span><span style="color:navy">jz      short </span>NOSETFLAG
<span style="color:black">TRANGROUP:0426                 </span><span style="color:navy">mov     [</span>NullFlag<span style="color:navy">], </span><span style="color:#ff8000">1   </span>; only set flag if in batch
<span style="color:black">TRANGROUP:042B
TRANGROUP:042B </span>NOSETFLAG<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:042B                 </span><span style="color:navy">cmp     [</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:0430                 </span><span style="color:navy">jz      short </span>EXITJ
<span style="color:black">TRANGROUP:0432                 </span><span style="color:navy">jmp     </span><span style="color:gray">GETCOM
</span><span style="color:black">TRANGROUP:0435 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0435
TRANGROUP:0435 </span>EXITJ<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0435                 </span><span style="color:navy">jmp     </span><span style="color:gray">_$EXITPREP
</span><span style="color:black">TRANGROUP:0435 </span><span style="color:gray">; END OF FUNCTION CHUNK FOR PROMPTBAT
</span><span style="color:black">TRANGROUP:0438
TRANGROUP:0438 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:0438
TRANGROUP:0438
TRANGROUP:0438 </span>proc            get_cox_y_n_opt near    <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0438                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">ccydp4
</span><span style="color:black">TRANGROUP:043A                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:043D                 </span><span style="color:navy">jz      short </span><span style="color:gray">ccydp4
</span><span style="color:black">TRANGROUP:043F                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">0Ah
</span><span style="color:black">TRANGROUP:0442                 </span><span style="color:navy">jz      short </span><span style="color:gray">ccydp4
</span><span style="color:black">TRANGROUP:0444                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:0445                 </span><span style="color:navy">mov     es, [word ptr ds:</span><span style="color:green">0A084h</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:0449                 </span>assume es:nothing
<span style="color:black">TRANGROUP:0449                 </span><span style="color:navy">mov     al, [byte ptr es:</span>Y_Flag<span style="color:navy">]
</span><span style="color:black">TRANGROUP:044D                 </span><span style="color:navy">test    al, </span><span style="color:green">10h         </span>;  bit 1 = 1 -&gt; Y/N answer is needed
<span style="color:black">TRANGROUP:044F                 </span><span style="color:navy">jz      short </span><span style="color:gray">ccydp3
</span><span style="color:black">TRANGROUP:0451                 </span><span style="color:navy">cmp     [es:</span>Call_Batch_Flag<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; (in) Batch file ?
<span style="color:black">TRANGROUP:0457                 </span><span style="color:navy">jz      short </span><span style="color:gray">ccydp3    </span>; yes, don&#039;t check for ESCAPE
<span style="color:black">TRANGROUP:0459                 </span><span style="color:navy">test    al, </span><span style="color:green">40h         </span>; ESCAPE status
<span style="color:black">TRANGROUP:045B                 </span><span style="color:navy">jz      short </span><span style="color:gray">ccydp5    </span>; (bit 4 is zero if Y/N is escaped)
<span style="color:black">TRANGROUP:045D
TRANGROUP:045D </span><span style="color:gray">ccydp1</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:045D                 </span><span style="color:navy">test    [es:</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:0464                 </span><span style="color:navy">jz      short </span><span style="color:gray">ccydp2
</span><span style="color:black">TRANGROUP:0466                 </span><span style="color:navy">mov     es, [es:</span>Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:046B                 </span>assume es:nothing
<span style="color:black">TRANGROUP:046B                 </span><span style="color:navy">mov     [byte ptr es:</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:#ff8000">1 </span>; [es:BATCHSEGMENT.BatchEOF]
<span style="color:black">TRANGROUP:0471
TRANGROUP:0471 </span><span style="color:gray">ccydp2</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0471                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:0472                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:0473                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0474 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0474
TRANGROUP:0474 </span><span style="color:gray">ccydp3</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0474                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:0475
TRANGROUP:0475 </span><span style="color:gray">ccydp4</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0475                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:0476                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0477 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0477
TRANGROUP:0477 </span><span style="color:gray">ccydp5</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0477                 </span><span style="color:navy">mov     dx, si
</span><span style="color:black">TRANGROUP:0479                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:047C                 </span><span style="color:navy">mov     ah, </span><span style="color:green">40h
</span><span style="color:black">TRANGROUP:047E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - WRITE TO FILE WITH HANDLE
<span style="color:black">TRANGROUP:047E                                         </span>; BX = file handle, CX = number of bytes to write, DS:DX -&gt; buffer
<span style="color:black">TRANGROUP:0480                 </span><span style="color:navy">mov     dx, offset </span>cox_Y_quest_ptr ; msg number pointer of &#039; [Y/N]?&#039;
<span style="color:black">TRANGROUP:0480                                         </span>; (is 1082)
<span style="color:black">TRANGROUP:0483                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:0486                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:0487                 </span><span style="color:navy">mov     ax, </span><span style="color:green">1083        </span>; cox_Y_answer number (overwrite Y/N answer letter)
<span style="color:black">TRANGROUP:048A                 </span><span style="color:navy">mov     dh, </span><span style="color:#ff8000">0FFh        </span>; utility_msg_class
<span style="color:black">TRANGROUP:048C                 </span><span style="color:navy">call    </span>TSYSGETMSG
<span style="color:black">TRANGROUP:048F                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">4E59h       </span>; &#039;YN&#039; Yes/No (CL=Y)
<span style="color:black">TRANGROUP:048F                                         </span>; (NASM syntax: &#039;YN&#039;, MASM syntax: &#039;NY&#039;)
<span style="color:black">TRANGROUP:0492                 </span><span style="color:navy">jb      short </span><span style="color:gray">ccydp6
</span><span style="color:black">TRANGROUP:0494                 </span><span style="color:navy">mov     cx, [si]
</span><span style="color:black">TRANGROUP:0496
TRANGROUP:0496 </span><span style="color:gray">ccydp6</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0496                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0497                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:0497
TRANGROUP:0497 </span><span style="color:gray">ccydp7</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0497                 </span><span style="color:navy">mov     ah, </span><span style="color:green">8
</span><span style="color:black">TRANGROUP:0499                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - KEYBOARD INPUT, NO ECHO
<span style="color:black">TRANGROUP:0499                                         </span>; Return: AL = character
<span style="color:black">TRANGROUP:049B                 </span><span style="color:navy">test    al, al
</span><span style="color:black">TRANGROUP:049D                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ccydp8
</span><span style="color:black">TRANGROUP:049F                 </span><span style="color:navy">mov     ah, </span><span style="color:green">8
</span><span style="color:black">TRANGROUP:04A1                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - KEYBOARD INPUT, NO ECHO
<span style="color:black">TRANGROUP:04A1                                         </span>; Return: AL = character
<span style="color:black">TRANGROUP:04A3                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">?&#039;
</span><span style="color:black">TRANGROUP:04A5                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ccydp7
</span><span style="color:black">TRANGROUP:04A7                 </span><span style="color:navy">or      [byte ptr es:</span>Y_Flag<span style="color:navy">], </span><span style="color:green">40h </span>; bit 4, question flag
<span style="color:black">TRANGROUP:04AD                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ccydp1
</span><span style="color:black">TRANGROUP:04AF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:04AF
TRANGROUP:04AF </span><span style="color:gray">ccydp8</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:04AF                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">1Bh         </span>; ESCAPE ?
<span style="color:black">TRANGROUP:04B1                 </span><span style="color:navy">jnz     short </span>ccydp9
<span style="color:black">TRANGROUP:04B3                 </span><span style="color:navy">and     [byte ptr es:</span>Y_Flag<span style="color:navy">], </span><span style="color:green">0EFh </span>; (ESCAPE) Clear bit 4 ; ~10h
<span style="color:black">TRANGROUP:04B9                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ccydp12
</span><span style="color:black">TRANGROUP:04BB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:04BB
TRANGROUP:04BB </span>ccydp9<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:04BB                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">41h </span><span style="color:gray">; &#039;A&#039;
</span><span style="color:black">TRANGROUP:04BD                 </span><span style="color:navy">jb      short </span><span style="color:gray">ccydp13
</span><span style="color:black">TRANGROUP:04BF                 </span><span style="color:navy">and     al, </span><span style="color:green">0DFh
</span><span style="color:black">TRANGROUP:04C1
TRANGROUP:04C1 </span><span style="color:gray">ccydp13</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:04C1                 </span><span style="color:navy">cmp     al, ch
</span><span style="color:black">TRANGROUP:04C3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ccydp10
</span><span style="color:black">TRANGROUP:04C5                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:04C6                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ccydp11   </span>; cf = 1 -&gt; overwrite NO answer
<span style="color:black">TRANGROUP:04C8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:04C8
TRANGROUP:04C8 </span><span style="color:gray">ccydp10</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:04C8                 </span><span style="color:navy">cmp     al, cl
</span><span style="color:black">TRANGROUP:04CA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ccydp7
</span><span style="color:black">TRANGROUP:04CC
TRANGROUP:04CC </span><span style="color:gray">ccydp11</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:04CC                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:04CD                 </span><span style="color:navy">mov     dl, al
</span><span style="color:black">TRANGROUP:04CF                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2
</span><span style="color:black">TRANGROUP:04D1                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - DISPLAY OUTPUT
<span style="color:black">TRANGROUP:04D1                                         </span>; DL = character to send to standard output
<span style="color:black">TRANGROUP:04D3                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:04D4
TRANGROUP:04D4 </span><span style="color:gray">ccydp12</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:04D4                 </span><span style="color:navy">pushf                   </span>; cf = 0 -&gt; overwrite YES answer
<span style="color:black">TRANGROUP:04D5                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:04D8                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:04D9                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:04DA                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:04DA </span>endp            get_cox_y_n_opt
<span style="color:black">TRANGROUP:04DA
TRANGROUP:04DB
TRANGROUP:04DB </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:04DB
TRANGROUP:04DB
TRANGROUP:04DB </span>proc            ROM_SCAN near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:04DB                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:04DC                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:04DD                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:04DE                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:04DF                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:04E0                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:04E1                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0F000h
</span><span style="color:black">TRANGROUP:04E4                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:04E6                 </span>assume es:nothing
<span style="color:black">TRANGROUP:04E6                 </span><span style="color:navy">cmp     [byte ptr es:</span><span style="color:green">0FFFEh</span><span style="color:navy">], </span><span style="color:green">0FDh </span>; check for PC Jr signature in rom
<span style="color:black">TRANGROUP:04EC                 </span><span style="color:navy">jz      short </span><span style="color:gray">SCAN_IT
</span><span style="color:black">TRANGROUP:04EE
TRANGROUP:04EE </span><span style="color:gray">NO_ROM</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:04EE                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:04EF
TRANGROUP:04EF </span><span style="color:gray">ROM_RET</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:04EF                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:04F0                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:04F1                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:04F2                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:04F3                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:04F4                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:04F5                 </span>assume es:nothing
<span style="color:black">TRANGROUP:04F5                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:04F6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:04F6
TRANGROUP:04F6 </span><span style="color:gray">SCAN_IT</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:04F6                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0C000h
</span><span style="color:black">TRANGROUP:04F9
TRANGROUP:04F9 </span><span style="color:gray">SCAN_ONE</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:04F9                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:04FB                 </span>assume es:nothing
<span style="color:black">TRANGROUP:04FB                 </span><span style="color:navy">xor     di, di
</span><span style="color:black">TRANGROUP:04FD                 </span><span style="color:navy">cmp     [word ptr es:di], </span><span style="color:green">0AA55h
</span><span style="color:black">TRANGROUP:0502                 </span><span style="color:navy">jz      short </span><span style="color:gray">SCAN_LIST
</span><span style="color:black">TRANGROUP:0504                 </span><span style="color:navy">add     ax, </span><span style="color:green">80h
</span><span style="color:black">TRANGROUP:0507
TRANGROUP:0507 </span><span style="color:gray">SCAN_END</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0507                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0F000h
</span><span style="color:black">TRANGROUP:050A                 </span><span style="color:navy">jb      short </span><span style="color:gray">SCAN_ONE
</span><span style="color:black">TRANGROUP:050C                 </span><span style="color:navy">jmp     short </span><span style="color:gray">NO_ROM
</span><span style="color:black">TRANGROUP:050E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:050E
TRANGROUP:050E </span><span style="color:gray">SCAN_LIST</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:050E                 </span><span style="color:navy">mov     bl, [es:di+</span><span style="color:#ff8000">2</span><span style="color:navy">]   </span>; [es:di+ROM_HEADER.rom_length]
<span style="color:black">TRANGROUP:0512                 </span><span style="color:navy">xor     bh, bh
</span><span style="color:black">TRANGROUP:0514                 </span><span style="color:navy">shl     bx, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:0516                 </span><span style="color:navy">shl     bx, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:0518                 </span><span style="color:navy">add     bx, </span><span style="color:green">7Fh
</span><span style="color:black">TRANGROUP:051B                 </span><span style="color:navy">and     bx, </span><span style="color:green">0FF80h      </span>; round to 2k
<span style="color:black">TRANGROUP:051E                 </span><span style="color:navy">mov     di, </span><span style="color:#ff8000">6           </span>; ROM_HEADER.name_list
<span style="color:black">TRANGROUP:0521
TRANGROUP:0521 </span><span style="color:gray">SCAN_NAME</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0521                 </span><span style="color:navy">mov     cl, [es:di]     </span>; length of name
<span style="color:black">TRANGROUP:0524                 </span><span style="color:navy">inc     di              </span>; point to name
<span style="color:black">TRANGROUP:0525                 </span><span style="color:navy">xor     ch, ch
</span><span style="color:black">TRANGROUP:0527                 </span><span style="color:navy">or      cx, cx
</span><span style="color:black">TRANGROUP:0529                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SCAN_TEST
</span><span style="color:black">TRANGROUP:052B                 </span><span style="color:navy">add     ax, bx
</span><span style="color:black">TRANGROUP:052D                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SCAN_END
</span><span style="color:black">TRANGROUP:052F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:052F
TRANGROUP:052F </span><span style="color:gray">SCAN_TEST</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:052F                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">TRANGROUP:0531                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:0532                 </span><span style="color:navy">repe cmpsb              </span>; compare name
<span style="color:black">TRANGROUP:0534                 </span><span style="color:navy">jz      short </span>SCAN_FOUND ; success!
<span style="color:black">TRANGROUP:0536
TRANGROUP:0536 </span><span style="color:gray">SCAN_NEXT</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0536                 </span><span style="color:navy">add     di, cx
</span><span style="color:black">TRANGROUP:0538                 </span><span style="color:navy">add     di, </span><span style="color:#ff8000">3
</span><span style="color:black">TRANGROUP:053B                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SCAN_NAME
</span><span style="color:black">TRANGROUP:053D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:053D
TRANGROUP:053D </span>SCAN_FOUND<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:053D                 </span><span style="color:navy">cmp     [byte ptr si], &#039;</span><span style="color:green">?&#039;
</span><span style="color:black">TRANGROUP:0540                 </span><span style="color:navy">jz      short </span><span style="color:gray">SCAN_SAVE
</span><span style="color:black">TRANGROUP:0542                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:0545                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SCAN_NEXT
</span><span style="color:black">TRANGROUP:0547
TRANGROUP:0547 </span><span style="color:gray">SCAN_SAVE</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0547                 </span><span style="color:navy">mov     [cs:</span>ROM_CS<span style="color:navy">], es
</span><span style="color:black">TRANGROUP:054C                 </span><span style="color:navy">mov     [cs:</span>ROM_IP<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:0551                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:0552                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ROM_RET
</span><span style="color:black">TRANGROUP:0552 </span>endp            ROM_SCAN
<span style="color:black">TRANGROUP:0552
TRANGROUP:0554 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0554 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR LoadHigh
</span><span style="color:black">TRANGROUP:0554
TRANGROUP:0554 </span>ROM_EXEC<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0554                 </span><span style="color:navy">mov     bx, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:0557                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h
</span><span style="color:black">TRANGROUP:0559                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ALLOCATE MEMORY
<span style="color:black">TRANGROUP:0559                                         </span>; BX = number of 16-byte paragraphs desired
<span style="color:black">TRANGROUP:055B                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h
</span><span style="color:black">TRANGROUP:055D                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ALLOCATE MEMORY
<span style="color:black">TRANGROUP:055D                                         </span>; BX = number of 16-byte paragraphs desired
<span style="color:black">TRANGROUP:055F                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:0560                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:0561                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2522h       </span>; (SET_INTERRUPT_VECTOR&lt;&lt;8)+INT_TERMINATE
<span style="color:black">TRANGROUP:0564                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:0565                 </span><span style="color:navy">mov     ds, [cs:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:056A                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">0E34h
</span><span style="color:black">TRANGROUP:056D                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET INTERRUPT VECTOR
<span style="color:black">TRANGROUP:056D                                         </span>; AL = interrupt number
<span style="color:black">TRANGROUP:056D                                         </span>; DS:DX = new vector to be used for specified interrupt
<span style="color:black">TRANGROUP:056F                 </span><span style="color:navy">mov     dx, ds
</span><span style="color:black">TRANGROUP:0571                 </span><span style="color:navy">mov     es, dx
</span><span style="color:black">TRANGROUP:0573                 </span>assume es:nothing
<span style="color:black">TRANGROUP:0573                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0574                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:0575                 </span><span style="color:navy">mov     ah, </span><span style="color:green">55h
</span><span style="color:black">TRANGROUP:0577                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ internal - CREATE PSP
<span style="color:black">TRANGROUP:0577                                         </span>; DX = segment number at which to set up PSP
<span style="color:black">TRANGROUP:0577                                         </span>; SI = (DOS 3+) value to place in memory size field at DX:[0002h]
<span style="color:black">TRANGROUP:0579                 </span><span style="color:navy">mov     ds, dx
</span><span style="color:black">TRANGROUP:057B                 </span><span style="color:navy">mov     dx, </span><span style="color:green">80h
</span><span style="color:black">TRANGROUP:057E                 </span><span style="color:navy">mov     ah, </span><span style="color:green">1Ah
</span><span style="color:black">TRANGROUP:0580                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET DISK TRANSFER AREA ADDRESS
<span style="color:black">TRANGROUP:0580                                         </span>; DS:DX -&gt; disk transfer buffer
<span style="color:black">TRANGROUP:0582                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">543h</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:0586                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">2Ch</span><span style="color:navy">], ax    </span>; [PDB.ENVIRON]
<span style="color:black">TRANGROUP:0589                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:058A                 </span><span style="color:navy">mov     dx, ds
</span><span style="color:black">TRANGROUP:058C                 </span><span style="color:navy">add     dx, bx
</span><span style="color:black">TRANGROUP:058E                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">2</span><span style="color:navy">], dx      </span>; [PDB.BLOCK_LEN]
<span style="color:black">TRANGROUP:0592                 </span><span style="color:navy">mov     dx, ds
</span><span style="color:black">TRANGROUP:0594                 </span><span style="color:navy">dec     dx
</span><span style="color:black">TRANGROUP:0595                 </span><span style="color:navy">mov     ds, dx
</span><span style="color:black">TRANGROUP:0597                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:0597                 </span><span style="color:navy">inc     dx
</span><span style="color:black">TRANGROUP:0598                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">1</span><span style="color:navy">], dx      </span>; [ARENA.owner]
<span style="color:black">TRANGROUP:059C                 </span><span style="color:navy">mov     ds, dx
</span><span style="color:black">TRANGROUP:059E                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:059E                 </span><span style="color:navy">cmp     bx, </span><span style="color:#ff8000">1000h
</span><span style="color:black">TRANGROUP:05A2                 </span><span style="color:navy">jb      short </span>GOT_STACK
<span style="color:black">TRANGROUP:05A4                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:05A6
TRANGROUP:05A6 </span>GOT_STACK<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:05A6                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:black">TRANGROUP:05A8                 </span><span style="color:navy">shl     bx, cl
</span><span style="color:black">TRANGROUP:05AA                 </span><span style="color:navy">mov     dx, ds
</span><span style="color:black">TRANGROUP:05AC                 </span><span style="color:navy">mov     ss, dx
</span><span style="color:black">TRANGROUP:05AE                 </span>assume ss:nothing
<span style="color:black">TRANGROUP:05AE                 </span><span style="color:navy">mov     sp, bx
</span><span style="color:black">TRANGROUP:05B0                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:05B2                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:05B3                 </span><span style="color:navy">not     ax
</span><span style="color:black">TRANGROUP:05B5                 </span><span style="color:navy">push    [cs:</span>ROM_CS<span style="color:navy">]
</span><span style="color:black">TRANGROUP:05BA                 </span><span style="color:navy">push    [cs:</span>ROM_IP<span style="color:navy">]
</span><span style="color:black">TRANGROUP:05BF                 </span><span style="color:navy">mov     es, dx
</span><span style="color:black">TRANGROUP:05C1                 </span><span style="color:navy">retf
</span><span style="color:black">TRANGROUP:05C1 </span><span style="color:gray">; END OF FUNCTION CHUNK FOR LoadHigh
</span><span style="color:black">TRANGROUP:05C2
TRANGROUP:05C2 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:05C2
TRANGROUP:05C2
TRANGROUP:05C2 </span>proc            int_21h_indirect near   <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:05C2                 </span><span style="color:navy">push    ds              </span>; (*)
<span style="color:black">TRANGROUP:05C3                 </span><span style="color:navy">pushf                   </span>; (**)
<span style="color:black">TRANGROUP:05C4                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:05C5                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:05C7                 </span><span style="color:navy">mov     ds, bx          </span>; 0
<span style="color:black">TRANGROUP:05C9                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:05C9                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:05CA                 </span><span style="color:navy">push    cs              </span>; simulate INT 21h
<span style="color:black">TRANGROUP:05CA                                         </span>; stack: ip, cs, flags (**)
<span style="color:black">TRANGROUP:05CB                 </span><span style="color:navy">call    near ptr </span>INT21h_fcall ; call INT21h_fcall
<span style="color:black">TRANGROUP:05CE                 </span><span style="color:navy">retn    </span><span style="color:green">2               </span>; discard ds (*) on top of stack
<span style="color:black">TRANGROUP:05CE </span>endp            int_21h_indirect
<span style="color:black">TRANGROUP:05CE
TRANGROUP:05D1
TRANGROUP:05D1 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:05D1
TRANGROUP:05D1
TRANGROUP:05D1 </span>proc            INT21h_fcall far        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:05D1                 </span><span style="color:navy">push    [word ptr ds:</span><span style="color:green">86h</span><span style="color:navy">] </span>; INT 21h segment
<span style="color:black">TRANGROUP:05D5                 </span><span style="color:navy">push    [word ptr ds:</span><span style="color:green">84h</span><span style="color:navy">] </span>; INT 21h offset
<span style="color:black">TRANGROUP:05D9                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:05DA                 </span><span style="color:navy">mov     bp, sp
</span><span style="color:black">TRANGROUP:05DC                 </span><span style="color:navy">mov     ds, [word ptr bp+</span><span style="color:green">12</span><span style="color:navy">] </span>; DS (*) in stack
<span style="color:black">TRANGROUP:05DF                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:05DF                 </span><span style="color:navy">push    [word ptr bp+</span><span style="color:green">14</span><span style="color:navy">] </span>; return addr of the caller of INT21h_fcall
<span style="color:black">TRANGROUP:05E2                 </span><span style="color:navy">pop     [word ptr bp+</span><span style="color:green">12</span><span style="color:navy">] </span>; return address from INT 21h
<span style="color:black">TRANGROUP:05E5                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:05E6                 </span><span style="color:navy">cli
</span><span style="color:black">TRANGROUP:05E7                 </span><span style="color:navy">retf
</span><span style="color:black">TRANGROUP:05E7 </span>endp            INT21h_fcall
<span style="color:black">TRANGROUP:05E7
TRANGROUP:05E8
TRANGROUP:05E8 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:05E8
TRANGROUP:05E8
TRANGROUP:05E8 </span>proc            int_2Fh_indirect near   <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:05E8                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:05E9                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:05EA                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:05EC                 </span><span style="color:navy">mov     ds, bx
</span><span style="color:black">TRANGROUP:05EE                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:05EE                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:05EF                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:05F0                 </span><span style="color:navy">cli
</span><span style="color:black">TRANGROUP:05F1                 </span><span style="color:navy">call    [dword ptr ds:</span><span style="color:green">0BCh</span><span style="color:navy">] </span>; call far [4*2Fh] ; INT 2Fh handler
<span style="color:black">TRANGROUP:05F5                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:05F6                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:05F6                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:05F6 </span>endp            int_2Fh_indirect
<span style="color:black">TRANGROUP:05F6
TRANGROUP:05F7
TRANGROUP:05F7 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:05F7
TRANGROUP:05F7
TRANGROUP:05F7 </span>proc            PROMPTBAT near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:05F7
TRANGROUP:05F7 </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:0100 SIZE 000002AB BYTES
</span><span style="color:black">TRANGROUP:05F7 </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:041A SIZE 0000001E BYTES
</span><span style="color:black">TRANGROUP:05F7 </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:0EE9 SIZE 0000015C BYTES
</span><span style="color:black">TRANGROUP:05F7 </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:2600 SIZE 00000048 BYTES
</span><span style="color:black">TRANGROUP:05F7 </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:2C7B SIZE 00000006 BYTES
</span><span style="color:black">TRANGROUP:05F7 </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:3271 SIZE 00000173 BYTES
</span><span style="color:black">TRANGROUP:05F7
TRANGROUP:05F7                 </span><span style="color:navy">call    </span>BATOPEN
<span style="color:black">TRANGROUP:05FA                 </span><span style="color:navy">jb      short </span><span style="color:gray">PROMPTBAT1
</span><span style="color:black">TRANGROUP:05FC                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:05FD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:05FD
TRANGROUP:05FD </span><span style="color:gray">PROMPTBAT1</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:05FD                 </span><span style="color:navy">cmp     dx, </span><span style="color:#ff8000">2           </span>; ERROR_FILE_NOT_FOUND
<span style="color:black">TRANGROUP:0600                 </span><span style="color:navy">jz      short </span><span style="color:gray">BAT_REMCHECK
</span><span style="color:black">TRANGROUP:0602                 </span><span style="color:navy">cmp     dx, </span><span style="color:#ff8000">3           </span>; ERROR_PATH_NOT_FOUND
<span style="color:black">TRANGROUP:0605                 </span><span style="color:navy">jz      short </span><span style="color:gray">BAT_REMCHECK
</span><span style="color:black">TRANGROUP:0607                 </span><span style="color:navy">call    </span>output_batch_name
<span style="color:black">TRANGROUP:060A                 </span><span style="color:navy">jmp     short </span>BATDIE
<span style="color:black">TRANGROUP:060C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:060C
TRANGROUP:060C </span><span style="color:gray">BAT_REMCHECK</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:060C                 </span><span style="color:navy">call    [cs:</span>RCH_ADDR<span style="color:navy">]   </span>; call far [cs:RCH_ADDR]
<span style="color:black">TRANGROUP:0611                 </span><span style="color:navy">jz      short </span><span style="color:gray">ASKFORBAT
</span><span style="color:black">TRANGROUP:0613                 </span><span style="color:navy">call    </span>FOROFF
<span style="color:black">TRANGROUP:0616                 </span><span style="color:navy">call    </span>PipeOff
<span style="color:black">TRANGROUP:0619                 </span><span style="color:navy">mov     [ds:</span>IfFlag<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:061C                 </span><span style="color:navy">mov     dx, offset </span>BADBAT_PTR
<span style="color:black">TRANGROUP:061F
TRANGROUP:061F </span>BATDIE<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:061F                 </span><span style="color:navy">call    </span>BATCHOFF
<span style="color:black">TRANGROUP:0622                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:0623                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0624                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:0624                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:0627                 </span><span style="color:navy">jmp     </span>TCOMMAND
<span style="color:black">TRANGROUP:062A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:062A
TRANGROUP:062A </span><span style="color:gray">ASKFORBAT</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:062A                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:062B                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:062C                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:062D                 </span><span style="color:navy">mov     dx, offset </span>NEEDBAT_PTR
<span style="color:black">TRANGROUP:0630                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:0633                 </span><span style="color:navy">mov     dx, offset </span>PAUSEMES_PTR
<span style="color:black">TRANGROUP:0636                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:0639
TRANGROUP:0639 </span><span style="color:navy">loc_2EC9:                               </span>; get a keystroke and flush queue
<span style="color:black">TRANGROUP:0639                 </span><span style="color:navy">call    </span>GETKEYSTROKE
<span style="color:black">TRANGROUP:063C                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:063D                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:063D
TRANGROUP:063D </span><span style="color:navy">loc_2ECD:
</span><span style="color:black">TRANGROUP:063D                 </span><span style="color:navy">jmp     short </span>PROMPTBAT
<span style="color:black">TRANGROUP:063D </span>endp            PROMPTBAT
<span style="color:black">TRANGROUP:063D
TRANGROUP:063F
TRANGROUP:063F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:063F
TRANGROUP:063F
TRANGROUP:063F </span>proc            output_batch_name near  <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:063F                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:0640
TRANGROUP:0640 </span><span style="color:navy">loc_2ED0:
</span><span style="color:black">TRANGROUP:0640                 </span><span style="color:navy">mov     ds, [ds:</span>Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0644                 </span><span style="color:navy">mov     si, </span><span style="color:green">20h         </span>; BATCHSEGMENT.BatFile
<span style="color:black">TRANGROUP:0647                 </span><span style="color:navy">call    </span>dstrlen
<span style="color:black">TRANGROUP:064A                 </span><span style="color:navy">mov     di, offset </span>BWDBUF
<span style="color:black">TRANGROUP:064D                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:064F                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:0650                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0651                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:0651                 </span><span style="color:navy">mov     [</span>extend_buf_ptr<span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:0655                 </span><span style="color:navy">mov     [</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; ext_msg_class
<span style="color:black">TRANGROUP:065A                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:black">TRANGROUP:065D                 </span><span style="color:navy">mov     [</span>string_ptr_2<span style="color:navy">], offset </span>BWDBUF
<span style="color:black">TRANGROUP:0663                 </span><span style="color:navy">mov     [</span>extend_buf_sub<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; one_subst
<span style="color:black">TRANGROUP:0668                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0669                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:0669                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0669 </span>endp            output_batch_name
<span style="color:black">TRANGROUP:0669
TRANGROUP:066A
TRANGROUP:066A </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:066A
TRANGROUP:066A
TRANGROUP:066A </span>proc            GETKEYSTROKE near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:066A                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:066B                 </span><span style="color:navy">mov     ax, </span><span style="color:green">6302h       </span>; (ECS_call SHL 8) OR GetInterimMode
<span style="color:black">TRANGROUP:066E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3.2+ only - GET KOREAN (HONGEUL) INPUT MODE
<span style="color:black">TRANGROUP:0670                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:0671                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">6301h       </span>; (ECS_call SHL 8) OR SetInterimMode
<span style="color:black">TRANGROUP:0674                 </span><span style="color:navy">mov     dl, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:0676                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3.2+ only - SET KOREAN (HONGEUL) INPUT MODE
<span style="color:black">TRANGROUP:0676                                         </span>; DL = new mode
<span style="color:black">TRANGROUP:0676                                         </span>; 00h return only full characters on DOS keyboard input functions
<span style="color:black">TRANGROUP:0676                                         </span>; 01h return partially-formed characters also
<span style="color:black">TRANGROUP:0678                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0C08h       </span>; (STD_CON_INPUT_FLUSH SHL 8) OR STD_CON_INPUT_no_echo
<span style="color:black">TRANGROUP:067B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - CLEAR KEYBOARD BUFFER
<span style="color:black">TRANGROUP:067B                                         </span>; AL must be 01h, 06h, 07h, 08h, or 0Ah.
<span style="color:black">TRANGROUP:067D                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0C00h       </span>; (STD_CON_INPUT_FLUSH SHL 8) + 0
<span style="color:black">TRANGROUP:0680                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - CLEAR KEYBOARD BUFFER
<span style="color:black">TRANGROUP:0680                                         </span>; AL must be 01h, 06h, 07h, 08h, or 0Ah.
<span style="color:black">TRANGROUP:0682                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">6301h       </span>; (ECS_call SHL 8) OR SetInterimMode
<span style="color:black">TRANGROUP:0685                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:0686                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3.2+ only - SET KOREAN (HONGEUL) INPUT MODE
<span style="color:black">TRANGROUP:0686                                         </span>; DL = new mode
<span style="color:black">TRANGROUP:0686                                         </span>; 00h return only full characters on DOS keyboard input functions
<span style="color:black">TRANGROUP:0686                                         </span>; 01h return partially-formed characters also
<span style="color:black">TRANGROUP:0688                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:0689                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0689 </span>endp            GETKEYSTROKE
<span style="color:black">TRANGROUP:0689
TRANGROUP:068A
TRANGROUP:068A </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:068A
TRANGROUP:068A
TRANGROUP:068A </span>proc            READBAT near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:068A                 </span><span style="color:navy">mov     [ds:</span>Suppress<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; YES_ECHO
<span style="color:black">TRANGROUP:068F                 </span><span style="color:navy">test    [ds:</span>Batch_Abort<span style="color:navy">], </span><span style="color:green">0FFh
</span><span style="color:black">TRANGROUP:0694                 </span><span style="color:navy">jnz     short </span>TRYING_TO_ABORT
<span style="color:black">TRANGROUP:0696                 </span><span style="color:navy">mov     [ds:</span>In_Batch<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; set flag to indicate batch job
<span style="color:black">TRANGROUP:069B                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:069C                 </span><span style="color:navy">mov     ds, [ds:</span>Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:06A0                 </span><span style="color:navy">cmp     [byte ptr ds:</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [BATCHSEGMENT.BatchEOF]
<span style="color:black">TRANGROUP:06A5                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:06A6                 </span><span style="color:navy">jz      short </span><span style="color:gray">CONTBAT
</span><span style="color:black">TRANGROUP:06A8                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:black">TRANGROUP:06AB                 </span><span style="color:navy">mov     [es:</span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], al
</span><span style="color:black">TRANGROUP:06AF                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:06B2                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:06B3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:06B3
TRANGROUP:06B3 </span><span style="color:gray">CONTBAT</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:06B3                 </span><span style="color:navy">call    </span>PROMPTBAT
<span style="color:black">TRANGROUP:06B6
TRANGROUP:06B6 </span>TRYING_TO_ABORT<span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:06B6                 </span><span style="color:navy">mov     di, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:06B9
TRANGROUP:06B9 </span><span style="color:gray">TESTNOP</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:06B9                 </span><span style="color:navy">mov     ax, ds
</span><span style="color:black">TRANGROUP:06BB                 </span><span style="color:navy">mov     ds, [ds:</span>Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:06BF                 </span><span style="color:navy">push    [word ptr ds:</span><span style="color:green">8</span><span style="color:navy">] </span>; [BATCHSEGMENT.BatSeek]
<span style="color:black">TRANGROUP:06C3                 </span><span style="color:navy">push    [word ptr ds:</span><span style="color:green">0Ah</span><span style="color:navy">] </span>; [BATCHSEGMENT.BatSeek+2]
<span style="color:black">TRANGROUP:06C7                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:black">TRANGROUP:06C9                 </span><span style="color:navy">call    </span>SKIPDELIM
<span style="color:black">TRANGROUP:06CC                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:black">TRANGROUP:06CE                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:06CF                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:06D0                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOPLINE
</span><span style="color:black">TRANGROUP:06D2                 </span><span style="color:navy">test    [ds:</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:06D8                 </span><span style="color:navy">jz      short </span><span style="color:gray">RDBAT
</span><span style="color:black">TRANGROUP:06DA                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;   </span>; No_Echo_Char
<span style="color:black">TRANGROUP:06DC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SET_BAT_POS
</span><span style="color:black">TRANGROUP:06DE                 </span><span style="color:navy">mov     [ds:</span>Suppress<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; NO_ECHO
<span style="color:black">TRANGROUP:06E3                 </span><span style="color:navy">jmp     short </span><span style="color:gray">RDBAT
</span><span style="color:black">TRANGROUP:06E5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:06E5
TRANGROUP:06E5 </span><span style="color:gray">SET_BAT_POS</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:06E5                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:06E6                 </span><span style="color:navy">mov     ds, [ds:</span>Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:06EA                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">8</span><span style="color:navy">], dx      </span>; [BATCHSEGMENT.BatSeek]
<span style="color:black">TRANGROUP:06EE                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">0Ah</span><span style="color:navy">], cx    </span>; [BATCHSEGMENT.BatSeek+2]
<span style="color:black">TRANGROUP:06F2                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:06F3                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4200h       </span>; (LSEEK*256) ; seek back
<span style="color:black">TRANGROUP:06F6                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:06F9                 </span><span style="color:navy">mov     [es:</span>BATBUFPOS<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:black">TRANGROUP:0700                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:0702                 </span><span style="color:navy">jmp     short </span><span style="color:gray">RDBAT
</span><span style="color:black">TRANGROUP:0704 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0704
TRANGROUP:0704 </span><span style="color:gray">NOPLINE</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0704                 </span><span style="color:navy">call    </span>SKIPTOEOL
<span style="color:black">TRANGROUP:0707                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:black">TRANGROUP:070A                 </span><span style="color:navy">test    [ds:</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:0710                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TESTNOP
</span><span style="color:black">TRANGROUP:0712
TRANGROUP:0712 </span><span style="color:gray">READBAT_RETN</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0712                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0713 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0713
TRANGROUP:0713 </span><span style="color:gray">RDBAT</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0713                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:black">TRANGROUP:0716                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:0717                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:071A                 </span><span style="color:navy">jz      short </span><span style="color:gray">RDBAT1
</span><span style="color:black">TRANGROUP:071C                 </span><span style="color:navy">cmp     cx, </span><span style="color:green">127         </span>; COMBUFLEN-1
<span style="color:black">TRANGROUP:071F                 </span><span style="color:navy">jnb     short </span><span style="color:gray">TOOLONG
</span><span style="color:black">TRANGROUP:0721                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:0722                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:black">TRANGROUP:0725                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:0726                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SAVBATBYT
</span><span style="color:black">TRANGROUP:0728 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0728
TRANGROUP:0728 </span><span style="color:gray">RDBAT1</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0728                 </span><span style="color:navy">cmp     cx, </span><span style="color:green">128         </span>; COMBUFLEN
<span style="color:black">TRANGROUP:072C                 </span><span style="color:navy">jnb     short </span><span style="color:gray">TOOLONG
</span><span style="color:black">TRANGROUP:072E                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">25h </span><span style="color:gray">; &#039;%&#039;
</span><span style="color:black">TRANGROUP:0730                 </span><span style="color:navy">jz      short </span><span style="color:gray">NEEDPARM
</span><span style="color:black">TRANGROUP:0732
TRANGROUP:0732 </span><span style="color:gray">SAVBATBYT</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0732                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:0733                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:0735                 </span><span style="color:navy">jnz     short </span><span style="color:gray">RDBAT
</span><span style="color:black">TRANGROUP:0737
TRANGROUP:0737 </span><span style="color:gray">FOUND_EOL</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0737                 </span><span style="color:navy">sub     di, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">3</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:073B                 </span><span style="color:navy">mov     ax, di
</span><span style="color:black">TRANGROUP:073D                 </span><span style="color:navy">mov     [es:</span>COMBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">], al </span>; Set length of line
<span style="color:black">TRANGROUP:0741                 </span><span style="color:navy">call    </span>GETBATBYT       ; Eat linefeed
<span style="color:black">TRANGROUP:0744                 </span><span style="color:navy">call    </span>BATCLOSE
<span style="color:black">TRANGROUP:0747                 </span><span style="color:navy">cmp     [ds:</span>Suppress<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; NO_ECHO
<span style="color:black">TRANGROUP:074C                 </span><span style="color:navy">jz      short </span><span style="color:gray">RESET
</span><span style="color:black">TRANGROUP:074E                 </span><span style="color:navy">test    [ds:</span>EchoFlag<span style="color:navy">], </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:0753                 </span><span style="color:navy">jnz     short </span>TRY_NEXTFLAG
<span style="color:black">TRANGROUP:0755
TRANGROUP:0755 </span><span style="color:gray">RESET</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0755                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:0756                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0757                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:0757                 </span><span style="color:navy">jz      short </span><span style="color:gray">READBAT_RETN
</span><span style="color:black">TRANGROUP:0759
TRANGROUP:0759 </span>TRY_NEXTFLAG<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0759                 </span><span style="color:navy">cmp     [ds:</span>NullFlag<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; nullcommand
<span style="color:black">TRANGROUP:075E                 </span><span style="color:navy">jz      short </span><span style="color:gray">NO_CRLF_PRINT
</span><span style="color:black">TRANGROUP:0760                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:0763
TRANGROUP:0763 </span><span style="color:gray">NO_CRLF_PRINT</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0763                 </span><span style="color:navy">call    </span>PRINT_PROMPT
<span style="color:black">TRANGROUP:0766                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:0767                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0768                 </span><span style="color:navy">mov     dx, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:076B                 </span><span style="color:navy">call    </span>CRPRINT
<span style="color:black">TRANGROUP:076E                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:0771                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0772 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0772
TRANGROUP:0772 </span><span style="color:gray">TOOLONG</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0772                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:0774                 </span><span style="color:navy">jz      short </span><span style="color:gray">LTLCONT
</span><span style="color:black">TRANGROUP:0776                 </span><span style="color:navy">call    </span>SKIPTOEOL
<span style="color:black">TRANGROUP:0779
TRANGROUP:0779 </span><span style="color:gray">LTLCONT</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0779                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:077A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">FOUND_EOL
</span><span style="color:black">TRANGROUP:077C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:077C
TRANGROUP:077C </span><span style="color:gray">NEEDPARM</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:077C                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:black">TRANGROUP:077F                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">25h </span><span style="color:gray">; &#039;%&#039;
</span><span style="color:black">TRANGROUP:0781                 </span><span style="color:navy">jz      short </span><span style="color:gray">SAVBATBYT
</span><span style="color:black">TRANGROUP:0783                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:0785                 </span><span style="color:navy">jz      short </span><span style="color:gray">SAVBATBYT
</span><span style="color:black">TRANGROUP:0787                 </span><span style="color:navy">sub     al, </span><span style="color:#ff8000">30h </span><span style="color:gray">; &#039;0&#039;
</span><span style="color:black">TRANGROUP:0789                 </span><span style="color:navy">jb      short </span><span style="color:gray">NEEDENV
</span><span style="color:black">TRANGROUP:078B                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:078D                 </span><span style="color:navy">ja      short </span><span style="color:gray">NEEDENV
</span><span style="color:black">TRANGROUP:078F                 </span><span style="color:navy">cbw
</span><span style="color:black">TRANGROUP:0790                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:0792                 </span><span style="color:navy">shl     bx, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:0794                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:0795                 </span><span style="color:navy">mov     es, [ds:</span>Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0799                 </span><span style="color:navy">mov     si, [es:bx+</span><span style="color:#ff8000">0Ch</span><span style="color:navy">] </span>; [es:bx+BATCHSEGMENT.BatParm]
<span style="color:black">TRANGROUP:079D                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:079E                 </span><span style="color:navy">cmp     si, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:07A1                 </span><span style="color:navy">jnz     short </span><span style="color:gray">YES_THERE_IS
</span><span style="color:black">TRANGROUP:07A3                 </span><span style="color:navy">jmp     </span><span style="color:gray">RDBAT
</span><span style="color:black">TRANGROUP:07A6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:07A6
TRANGROUP:07A6 </span><span style="color:gray">YES_THERE_IS</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:07A6                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:07A7                 </span><span style="color:navy">mov     ds, [ds:</span>Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:07AB                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:07AB                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:07AC
TRANGROUP:07AC </span><span style="color:gray">COPYPARM</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:07AC                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:07AD                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:07AF                 </span><span style="color:navy">jz      short </span><span style="color:gray">ENDPARAM
</span><span style="color:black">TRANGROUP:07B1                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:07B2                 </span><span style="color:navy">cmp     cx, </span><span style="color:green">128         </span>; COMBUFLEN
<span style="color:black">TRANGROUP:07B6                 </span><span style="color:navy">jnb     short </span><span style="color:gray">LINETOOL
</span><span style="color:black">TRANGROUP:07B8                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:07B9                 </span><span style="color:navy">jmp     short </span><span style="color:gray">COPYPARM
</span><span style="color:black">TRANGROUP:07BB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:07BB
TRANGROUP:07BB </span><span style="color:gray">LINETOOL</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:07BB                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:07BD                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:07BE                 </span><span style="color:navy">jmp     short </span><span style="color:gray">TOOLONG
</span><span style="color:black">TRANGROUP:07C0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:07C0
TRANGROUP:07C0 </span><span style="color:gray">ENDPARAM</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:07C0                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:07C1                 </span><span style="color:navy">jmp     </span><span style="color:gray">RDBAT
</span><span style="color:black">TRANGROUP:07C4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:07C4
TRANGROUP:07C4 </span><span style="color:gray">NEEDENV</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:07C4                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:07C5                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:07C6                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:07C7                 </span><span style="color:navy">mov     di, offset </span>ID
<span style="color:black">TRANGROUP:07CA                 </span><span style="color:navy">add     al, &#039;</span><span style="color:green">0&#039;
</span><span style="color:black">TRANGROUP:07CC                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:07CD
TRANGROUP:07CD </span><span style="color:gray">GETENV1</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:07CD                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:black">TRANGROUP:07D0                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:07D1                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:07D3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GETENV15
</span><span style="color:black">TRANGROUP:07D5                 </span><span style="color:navy">mov     [byte ptr es:di-</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:07DA                 </span><span style="color:navy">mov     si, offset </span>ID
<span style="color:black">TRANGROUP:07DD                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:07DE                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:07DF                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:07E0                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:07E0                 </span><span style="color:navy">call    </span>STRCPY
<span style="color:black">TRANGROUP:07E3                 </span><span style="color:navy">jb      short </span><span style="color:gray">LINETOOL
</span><span style="color:black">TRANGROUP:07E5                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:07E6                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:07E6                 </span><span style="color:navy">jmp     </span><span style="color:gray">SAVBATBYT
</span><span style="color:black">TRANGROUP:07E9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:07E9
TRANGROUP:07E9 </span><span style="color:gray">GETENV15</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:07E9                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">25h </span><span style="color:gray">; &#039;%&#039;
</span><span style="color:black">TRANGROUP:07EB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GETENV1
</span><span style="color:black">TRANGROUP:07ED                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Dh </span><span style="color:gray">; &#039;=&#039;
</span><span style="color:black">TRANGROUP:07EF                 </span><span style="color:navy">mov     [es:di-</span><span style="color:green">1</span><span style="color:navy">], al
</span><span style="color:black">TRANGROUP:07F3                 </span><span style="color:navy">mov     si, offset </span>ID
<span style="color:black">TRANGROUP:07F6                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:07F7                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:07F8                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:07F8                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:07F9                 </span><span style="color:navy">call    </span>find_name_in_environment
<span style="color:black">TRANGROUP:07FC                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:07FD                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:07FE                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:07FF                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:07FF                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:0800                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:0801                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:0801                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:0803                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:0804                 </span><span style="color:navy">jb      short </span><span style="color:gray">GETENV6
</span><span style="color:black">TRANGROUP:0806                 </span><span style="color:navy">call    </span>STRCPY
<span style="color:black">TRANGROUP:0809
TRANGROUP:0809 </span><span style="color:gray">GETENV6</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0809                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:080A                 </span><span style="color:navy">jmp     </span><span style="color:gray">RDBAT
</span><span style="color:black">TRANGROUP:080A </span>endp            READBAT
<span style="color:black">TRANGROUP:080A
TRANGROUP:080D
TRANGROUP:080D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:080D
TRANGROUP:080D
TRANGROUP:080D </span>proc            SKIPTOEOL near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:080D                 </span><span style="color:navy">test    [ds:</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; read from batch file until end of line
<span style="color:black">TRANGROUP:0813                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SKIPTOEOL1
</span><span style="color:black">TRANGROUP:0815                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0816 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0816
TRANGROUP:0816 </span><span style="color:gray">SKIPTOEOL1</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0816                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:black">TRANGROUP:0819                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:081B                 </span><span style="color:navy">jnz     short </span>SKIPTOEOL
<span style="color:black">TRANGROUP:081D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:081D </span>endp            SKIPTOEOL
<span style="color:black">TRANGROUP:081D
TRANGROUP:081E
TRANGROUP:081E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:081E
TRANGROUP:081E
TRANGROUP:081E </span>proc            FREE_TPA near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:081E                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:081F                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0823                 </span>assume es:nothing
<span style="color:black">TRANGROUP:0823                 </span><span style="color:navy">mov     es, [es:</span>Res_Tpa<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0828                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h         </span>; DEALLOC
<span style="color:black">TRANGROUP:082A                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:082D                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:082E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:082E </span>endp            FREE_TPA
<span style="color:black">TRANGROUP:082E
TRANGROUP:082F
TRANGROUP:082F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:082F
TRANGROUP:082F
TRANGROUP:082F </span>proc            ALLOC_TPA near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:082F                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:0830                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0834                 </span>assume es:RESGROUP
<span style="color:black">TRANGROUP:0834                 </span><span style="color:navy">mov     bx, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:0837                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h         </span>; ALLOC
<span style="color:black">TRANGROUP:0839                 </span><span style="color:navy">call    </span>int_21h_indirect ; indirect call to INT 21h handler
<span style="color:black">TRANGROUP:0839                                         </span>; (by simulating INT 21h interrupt)
<span style="color:black">TRANGROUP:083C                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:083D                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h
</span><span style="color:black">TRANGROUP:083F                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:0842                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:0843                 </span><span style="color:navy">mov     [es:</span>Res_Tpa<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:0847                 </span><span style="color:navy">mov     [ds:</span>TRAN_TPA<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:084A                 </span><span style="color:navy">mov     dx, ax
</span><span style="color:black">TRANGROUP:084C                 </span><span style="color:navy">and     ax, </span><span style="color:green">0FFFh
</span><span style="color:black">TRANGROUP:084F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">CALC_TPA
</span><span style="color:black">TRANGROUP:0851                 </span><span style="color:navy">mov     ax, dx
</span><span style="color:black">TRANGROUP:0853                 </span><span style="color:navy">and     ax, </span><span style="color:green">0F000h
</span><span style="color:black">TRANGROUP:0856                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOROUND
</span><span style="color:black">TRANGROUP:0858
TRANGROUP:0858 </span><span style="color:gray">CALC_TPA</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0858                 </span><span style="color:navy">mov     ax, dx
</span><span style="color:black">TRANGROUP:085A                 </span><span style="color:navy">and     ax, </span><span style="color:green">0F000h
</span><span style="color:black">TRANGROUP:085D                 </span><span style="color:navy">add     ax, </span><span style="color:#ff8000">1000h
</span><span style="color:black">TRANGROUP:0860                 </span><span style="color:navy">jb      short </span><span style="color:gray">NOROUND
</span><span style="color:black">TRANGROUP:0862                 </span><span style="color:navy">mov     dx, [es:</span>Res_Tpa<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0867                 </span><span style="color:navy">add     dx, bx
</span><span style="color:black">TRANGROUP:0869                 </span><span style="color:navy">cmp     dx, ax
</span><span style="color:black">TRANGROUP:086B                 </span><span style="color:navy">jb      short </span><span style="color:gray">NOROUND
</span><span style="color:black">TRANGROUP:086D                 </span><span style="color:navy">mov     bx, cs
</span><span style="color:black">TRANGROUP:086F                 </span><span style="color:navy">cmp     bx, ax
</span><span style="color:black">TRANGROUP:0871                 </span><span style="color:navy">jb      short </span><span style="color:gray">NOROUND
</span><span style="color:black">TRANGROUP:0873                 </span><span style="color:navy">sub     bx, ax
</span><span style="color:black">TRANGROUP:0875                 </span><span style="color:navy">cmp     bx, </span><span style="color:#ff8000">1000h
</span><span style="color:black">TRANGROUP:0879                 </span><span style="color:navy">jnb     short </span><span style="color:gray">ROUNDDONE
</span><span style="color:black">TRANGROUP:087B
TRANGROUP:087B </span><span style="color:gray">NOROUND</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:087B                 </span><span style="color:navy">mov     ax, [es:</span>Res_Tpa<span style="color:navy">]
</span><span style="color:black">TRANGROUP:087F
TRANGROUP:087F </span><span style="color:gray">ROUNDDONE</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:087F                 </span><span style="color:navy">mov     [es:</span>Ltpa<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:0883                 </span><span style="color:navy">mov     [ds:</span>TPA<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:0886                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:0888                 </span><span style="color:navy">mov     ax, cs
</span><span style="color:black">TRANGROUP:088A                 </span><span style="color:navy">sub     ax, bx
</span><span style="color:black">TRANGROUP:088C                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:088D                 </span><span style="color:navy">mov     bx, </span><span style="color:green">16
</span><span style="color:black">TRANGROUP:0890                 </span><span style="color:navy">mul     bx
</span><span style="color:black">TRANGROUP:0892                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:0893                 </span><span style="color:navy">or      dx, dx
</span><span style="color:black">TRANGROUP:0895                 </span><span style="color:navy">jz      short </span><span style="color:gray">SAVSIZ2
</span><span style="color:black">TRANGROUP:0897                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FFFFh      </span>; -1
<span style="color:black">TRANGROUP:089A
TRANGROUP:089A </span><span style="color:gray">SAVSIZ2</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:089A                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">512
</span><span style="color:black">TRANGROUP:089D                 </span><span style="color:navy">jbe     short </span><span style="color:gray">GOTSIZE2
</span><span style="color:black">TRANGROUP:089F                 </span><span style="color:navy">and     ax, </span><span style="color:green">0FE00h      </span>; ~1FFh ; NOT 511
<span style="color:black">TRANGROUP:08A2
TRANGROUP:08A2 </span><span style="color:gray">GOTSIZE2</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:08A2                 </span><span style="color:navy">mov     [ds:</span>BYTCNT<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:08A5                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:08A6                 </span>assume es:nothing
<span style="color:black">TRANGROUP:08A6                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:08A6 </span>endp            ALLOC_TPA
<span style="color:black">TRANGROUP:08A6
</span><span style="color:maroon">TRANGROUP:08A7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:08A7
TRANGROUP:08A7 </span>BATCOM<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:08A7                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:08AB                 </span>assume es:RESGROUP
<span style="color:maroon">TRANGROUP:08AB                 </span><span style="color:navy">cmp     [es:</span>Call_Batch_Flag<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; call_in_progress
<span style="color:maroon">TRANGROUP:08B1                 </span><span style="color:navy">jz      short </span>skip_ioset
<span style="color:maroon">TRANGROUP:08B3                 </span><span style="color:navy">call    </span>IOSET
<span style="color:maroon">TRANGROUP:08B6
TRANGROUP:08B6 </span>skip_ioset<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:08B6                 </span><span style="color:navy">call    </span>FREE_TPA
<span style="color:maroon">TRANGROUP:08B9                 </span><span style="color:navy">cmp     [es:</span>Call_Batch_Flag<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:08BF                 </span><span style="color:navy">jz      short </span>GETECHO
<span style="color:maroon">TRANGROUP:08C1                 </span><span style="color:navy">call    </span>FOROFF
<span style="color:maroon">TRANGROUP:08C4
TRANGROUP:08C4 </span>GETECHO<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:08C4                 </span><span style="color:navy">call    </span>PipeOff
<span style="color:maroon">TRANGROUP:08C7                 </span><span style="color:navy">mov     al, [es:</span>EchoFlag<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:08CB                 </span><span style="color:navy">and     al, </span><span style="color:green">1
</span><span style="color:maroon">TRANGROUP:08CD                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">TRANGROUP:08CE                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:maroon">TRANGROUP:08D0                 </span><span style="color:navy">test    [es:</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:maroon">TRANGROUP:08D7                 </span><span style="color:navy">jz      short </span>LEAVEBAT
<span style="color:maroon">TRANGROUP:08D9                 </span><span style="color:navy">mov     ax, [es:</span>Batch<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:08DD                 </span><span style="color:navy">cmp     [es:</span>Call_Batch_Flag<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; call_in_progress
<span style="color:maroon">TRANGROUP:08E3                 </span><span style="color:navy">jz      short </span>LEAVEBAT
<span style="color:maroon">TRANGROUP:08E5                 </span><span style="color:navy">push    es
</span><span style="color:maroon">TRANGROUP:08E6                 </span><span style="color:navy">mov     es, ax
</span><span style="color:maroon">TRANGROUP:08E8                 </span>assume es:nothing
<span style="color:maroon">TRANGROUP:08E8                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:BATCHSEGMENT.BatLast]
<span style="color:maroon">TRANGROUP:08EC                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:08ED
TRANGROUP:08ED </span>LEAVEBAT<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:08ED                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">TRANGROUP:08EE                 </span><span style="color:navy">cmp     [es:</span>Call_Batch_Flag<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:08F4                 </span><span style="color:navy">jz      short </span>STARTBAT
<span style="color:maroon">TRANGROUP:08F6                 </span><span style="color:navy">call    </span>BATCHOFF
<span style="color:maroon">TRANGROUP:08F9
TRANGROUP:08F9 </span>STARTBAT<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:08F9                 </span><span style="color:navy">mov     [es:</span>Call_Batch_Flag<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:08FF                 </span><span style="color:navy">mov     si, offset </span>EXECPATH
<span style="color:maroon">TRANGROUP:0902                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0B711h      </span>; AppendTruename
<span style="color:maroon">TRANGROUP:0905                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - DOS 4.0 APPEND - SET RETURN FOUND NAME STATE
<span style="color:maroon">TRANGROUP:0907                 </span><span style="color:navy">mov     ah, </span><span style="color:green">4Eh         </span>; Find_First
<span style="color:maroon">TRANGROUP:0909                 </span><span style="color:navy">mov     dx, si
</span><span style="color:maroon">TRANGROUP:090B                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">13h         </span>; search_attr
<span style="color:maroon">TRANGROUP:090E                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:maroon">TRANGROUP:0911                 </span><span style="color:navy">call    </span>dstrlen
<span style="color:maroon">TRANGROUP:0914                 </span><span style="color:navy">mov     bx, cx
</span><span style="color:maroon">TRANGROUP:0916                 </span><span style="color:navy">add     bx, </span><span style="color:green">191         </span>; 15+BATCHSEGMENT.SIZE+COMBUFLEN+15
<span style="color:maroon">TRANGROUP:091A                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">TRANGROUP:091B                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:maroon">TRANGROUP:091D                 </span><span style="color:navy">shr     bx, cl
</span><span style="color:maroon">TRANGROUP:091F                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">TRANGROUP:0920                 </span><span style="color:navy">mov     ah, </span><span style="color:green">48h         </span>; ALLOC
<span style="color:maroon">TRANGROUP:0922                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:maroon">TRANGROUP:0925                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">TRANGROUP:0926                 </span><span style="color:navy">jb      short </span>MEM_ERROR
<span style="color:maroon">TRANGROUP:0928                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">TRANGROUP:0929                 </span><span style="color:navy">add     ax, bx
</span><span style="color:maroon">TRANGROUP:092B                 </span><span style="color:navy">add     ax, </span><span style="color:green">20h
</span><span style="color:maroon">TRANGROUP:092E                 </span><span style="color:navy">mov     bx, cs
</span><span style="color:maroon">TRANGROUP:0930                 </span><span style="color:navy">mov     dx, </span><span style="color:green">0AA9Ah      </span>; TRANSPACEEND
<span style="color:maroon">TRANGROUP:0933                 </span><span style="color:navy">add     dx, </span><span style="color:#ff8000">0Fh         </span>; TRANSPACEEND+15
<span style="color:maroon">TRANGROUP:0936                 </span><span style="color:navy">shr     dx, cl
</span><span style="color:maroon">TRANGROUP:0938                 </span><span style="color:navy">add     dx, bx
</span><span style="color:maroon">TRANGROUP:093A                 </span><span style="color:navy">cmp     ax, bx
</span><span style="color:maroon">TRANGROUP:093C                 </span><span style="color:navy">jb      short </span>ENOUGH_MEM
<span style="color:maroon">TRANGROUP:093E                 </span><span style="color:navy">cmp     ax, dx
</span><span style="color:maroon">TRANGROUP:0940                 </span><span style="color:navy">ja      short </span>ENOUGH_MEM
<span style="color:maroon">TRANGROUP:0942                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:0943                 </span><span style="color:navy">push    es
</span><span style="color:maroon">TRANGROUP:0944                 </span><span style="color:navy">mov     es, ax
</span><span style="color:maroon">TRANGROUP:0946                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4900h       </span>; DEALLOC*256
<span style="color:maroon">TRANGROUP:0946                                         </span>; deallocate the batch segment
<span style="color:maroon">TRANGROUP:0949                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:maroon">TRANGROUP:094C                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:094D
TRANGROUP:094D </span>MEM_ERROR<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:094D                 </span><span style="color:navy">jmp     </span>NO_MEMORY
<span style="color:maroon">TRANGROUP:0950 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0950
TRANGROUP:0950 </span>ENOUGH_MEM<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0950                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:0951                 </span><span style="color:navy">mov     [es:</span>Batch<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:0955                 </span><span style="color:navy">call    </span>ALLOC_TPA
<span style="color:maroon">TRANGROUP:0958                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">TRANGROUP:0959                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:095A                 </span><span style="color:navy">inc     [es:</span>Nest<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:095F                 </span><span style="color:navy">push    es
</span><span style="color:maroon">TRANGROUP:0960                 </span><span style="color:navy">mov     es, [es:</span>Batch<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:0965                 </span><span style="color:navy">mov     [byte ptr es:</span><span style="color:green">0</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [es:BATCHSEGMENT.BatType],BATCHTYPE
<span style="color:maroon">TRANGROUP:096B                 </span><span style="color:navy">mov     [es:</span><span style="color:green">3</span><span style="color:navy">], ax      </span>; [es:BATCHSEGMENT.BatLast]
<span style="color:maroon">TRANGROUP:096F                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:0970                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:0974                 </span>assume ds:RESGROUP
<span style="color:maroon">TRANGROUP:0974                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:maroon">TRANGROUP:0976                 </span><span style="color:navy">mov     bl, [</span>ForFlag<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:097A                 </span><span style="color:navy">mov     [es:</span><span style="color:green">7</span><span style="color:navy">], bl      </span>; [es:BATCHSEGMENT.BatForFlag]
<span style="color:maroon">TRANGROUP:097F                 </span><span style="color:navy">test    bl, </span><span style="color:green">0FFh
</span><span style="color:maroon">TRANGROUP:0982                 </span><span style="color:navy">jz      short </span>FOR_NOT_ON
<span style="color:maroon">TRANGROUP:0984                 </span><span style="color:navy">mov     ax, [</span>ForPtr<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:0987                 </span><span style="color:navy">mov     [</span>ForFlag<span style="color:navy">], </span><span style="color:#ff8000">0    </span>; byte
<span style="color:maroon">TRANGROUP:098C
TRANGROUP:098C </span>FOR_NOT_ON<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:098C                 </span><span style="color:navy">mov     [es:</span><span style="color:green">5</span><span style="color:navy">], ax      </span>; [es:BATCHSEGMENT.BatForPtr]
<span style="color:maroon">TRANGROUP:0990                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:maroon">TRANGROUP:0992                 </span><span style="color:navy">mov     [</span>ForPtr<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:0995                 </span><span style="color:navy">mov     bl, [</span>EchoFlag<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:0999                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:099A                 </span>assume ds:nothing
<span style="color:maroon">TRANGROUP:099A                 </span><span style="color:navy">mov     [es:</span><span style="color:green">1</span><span style="color:navy">], bl      </span>; [es:BATCHSEGMENT.BatEchoFlag]
<span style="color:maroon">TRANGROUP:099F                 </span><span style="color:navy">mov     [byte ptr es:</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [es:BATCHSEGMENT.BatchEOF]
<span style="color:maroon">TRANGROUP:09A5                 </span><span style="color:navy">mov     [es:</span><span style="color:green">8</span><span style="color:navy">], ax      </span>; [es:BATCHSEGMENT.BatSeek]
<span style="color:maroon">TRANGROUP:09A9                 </span><span style="color:navy">mov     [es:</span><span style="color:green">0Ah</span><span style="color:navy">], ax    </span>; [es:BATCHSEGMENT.BatSeek+2]
<span style="color:maroon">TRANGROUP:09AD                 </span><span style="color:navy">dec     ax
</span><span style="color:maroon">TRANGROUP:09AE                 </span><span style="color:navy">mov     di, </span><span style="color:green">12          </span>; BATCHSEGMENT.BatParm
<span style="color:maroon">TRANGROUP:09B1                 </span><span style="color:navy">mov     bx, di
</span><span style="color:maroon">TRANGROUP:09B3                 </span><span style="color:navy">mov     cx, </span><span style="color:green">10
</span><span style="color:maroon">TRANGROUP:09B6                 </span><span style="color:navy">rep stosw
</span><span style="color:maroon">TRANGROUP:09B8                 </span><span style="color:navy">mov     cx, dx
</span><span style="color:maroon">TRANGROUP:09BA                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">TRANGROUP:09BC                 </span><span style="color:navy">mov     si, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:maroon">TRANGROUP:09BF                 </span><span style="color:navy">mov     cx, </span><span style="color:green">10
</span><span style="color:maroon">TRANGROUP:09C2
TRANGROUP:09C2 </span>EACHPARM<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:09C2                 </span><span style="color:navy">call    </span>scanoff
<span style="color:maroon">TRANGROUP:09C5                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:maroon">TRANGROUP:09C7                 </span><span style="color:navy">jz      short </span>HAVPARM
<span style="color:maroon">TRANGROUP:09C9                 </span><span style="color:navy">jcxz    short </span>MOVPARM
<span style="color:maroon">TRANGROUP:09CB                 </span><span style="color:navy">mov     [es:bx], di
</span><span style="color:maroon">TRANGROUP:09CE                 </span><span style="color:navy">add     bx, </span><span style="color:#ff8000">2
</span><span style="color:maroon">TRANGROUP:09D1
TRANGROUP:09D1 </span>MOVPARM<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:09D1                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:09D2                 </span><span style="color:navy">call    </span>DELIM
<span style="color:maroon">TRANGROUP:09D5                 </span><span style="color:navy">jz      short </span>ENDPARM
<span style="color:maroon">TRANGROUP:09D7                 </span><span style="color:navy">stosb
</span><span style="color:maroon">TRANGROUP:09D8                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:maroon">TRANGROUP:09DA                 </span><span style="color:navy">jz      short </span>HAVPARM
<span style="color:maroon">TRANGROUP:09DC                 </span><span style="color:navy">jmp     short </span>MOVPARM
<span style="color:maroon">TRANGROUP:09DE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:09DE
TRANGROUP:09DE </span>ENDPARM<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:09DE                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:maroon">TRANGROUP:09E0                 </span><span style="color:navy">stosb
</span><span style="color:maroon">TRANGROUP:09E1                 </span><span style="color:navy">jcxz    short </span>EACHPARM
<span style="color:maroon">TRANGROUP:09E3                 </span><span style="color:navy">dec     cx
</span><span style="color:maroon">TRANGROUP:09E4                 </span><span style="color:navy">jmp     short </span>EACHPARM
<span style="color:maroon">TRANGROUP:09E6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:09E6
TRANGROUP:09E6 </span>HAVPARM<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:09E6                 </span><span style="color:navy">xor     al, al
</span><span style="color:maroon">TRANGROUP:09E8                 </span><span style="color:navy">stosb
</span><span style="color:maroon">TRANGROUP:09E9                 </span><span style="color:navy">lea     bx, [di+</span><span style="color:green">15</span><span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:09EC                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:maroon">TRANGROUP:09EE                 </span><span style="color:navy">shr     bx, cl
</span><span style="color:maroon">TRANGROUP:09F0                 </span><span style="color:navy">mov     ah, </span><span style="color:green">4Ah         </span>; SETBLOCK
<span style="color:maroon">TRANGROUP:09F2                 </span><span style="color:navy">call    </span>int_21h_indirect ; ADJUST MEMORY BLOCK SIZE (SETBLOCK)
<span style="color:maroon">TRANGROUP:09F2                                         </span>; ES = segment address of block to change
<span style="color:maroon">TRANGROUP:09F2                                         </span>; BX = new size in paragraphs
<span style="color:maroon">TRANGROUP:09F5                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:09F6                 </span><span style="color:navy">push    es
</span><span style="color:maroon">TRANGROUP:09F7                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:09F8                 </span><span style="color:navy">cmp     [ds:</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:maroon">TRANGROUP:09FD                 </span><span style="color:navy">jnz     short </span>NOBATSING
<span style="color:maroon">TRANGROUP:09FF                 </span><span style="color:navy">mov     [ds:</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFF0h </span>; Flag single command BATCH job
<span style="color:maroon">TRANGROUP:0A05
TRANGROUP:0A05 </span>NOBATSING<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0A05                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:0A06                 </span><span style="color:navy">mov     [ds:</span>EchoFlag<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:0A09                 </span><span style="color:navy">jmp     </span>TCOMMAND
<span style="color:maroon">TRANGROUP:0A0C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0A0C
TRANGROUP:0A0C </span>NO_MEMORY<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0A0C                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">TRANGROUP:0A0D                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:0A0E                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:0A0F                 </span><span style="color:navy">call    </span>ALLOC_TPA
<span style="color:maroon">TRANGROUP:0A12                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; ext_msg_class
<span style="color:maroon">TRANGROUP:0A17                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:maroon">TRANGROUP:0A1A                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], </span><span style="color:#ff8000">8 </span>; ERROR_NOT_ENOUGH_MEMORY
<span style="color:maroon">TRANGROUP:0A20                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:0A23
TRANGROUP:0A23 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:0A23
TRANGROUP:0A23
TRANGROUP:0A23 </span>proc            BATCHOFF near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0A23                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:0A24                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:0A25                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:0A26                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:0A27                 </span><span style="color:navy">mov     es, [cs:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0A2C                 </span>assume es:RESGROUP
<span style="color:black">TRANGROUP:0A2C                 </span><span style="color:navy">mov     ds, [cs:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0A31                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:0A31                 </span><span style="color:navy">mov     ax, [</span>Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0A34                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">TRANGROUP:0A36                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOTFREE
</span><span style="color:black">TRANGROUP:0A38                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:0A39                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:0A3B                 </span>assume es:nothing
<span style="color:black">TRANGROUP:0A3B                 </span><span style="color:navy">test    [</span>EchoFlag<span style="color:navy">], </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:0A40                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ECHO_LAST_LINE
</span><span style="color:black">TRANGROUP:0A42                 </span><span style="color:navy">mov     [</span>Suppress<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; NO_ECHO
<span style="color:black">TRANGROUP:0A47
TRANGROUP:0A47 </span><span style="color:gray">ECHO_LAST_LINE</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0A47                 </span><span style="color:navy">mov     bl, [es:</span><span style="color:green">1</span><span style="color:navy">]      </span>; [es:BATCHSEGMENT.BatEchoFlag]
<span style="color:black">TRANGROUP:0A4C                 </span><span style="color:navy">mov     [</span>EchoFlag<span style="color:navy">], bl
</span><span style="color:black">TRANGROUP:0A50                 </span><span style="color:navy">mov     bx, [es:</span><span style="color:green">5</span><span style="color:navy">]      </span>; [es:BATCHSEGMENT.BatForPtr]
<span style="color:black">TRANGROUP:0A55                 </span><span style="color:navy">mov     [</span>ForPtr<span style="color:navy">], bx
</span><span style="color:black">TRANGROUP:0A59                 </span><span style="color:navy">mov     bl, [es:</span><span style="color:green">7</span><span style="color:navy">]      </span>; [es:BATCHSEGMENT.BatForFlag]
<span style="color:black">TRANGROUP:0A5E                 </span><span style="color:navy">mov     [</span>ForFlag<span style="color:navy">], bl
</span><span style="color:black">TRANGROUP:0A62                 </span><span style="color:navy">mov     bx, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:BATCHSEGMENT.BatLast]
<span style="color:black">TRANGROUP:0A67                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h         </span>; DEALLOC
<span style="color:black">TRANGROUP:0A69                 </span><span style="color:navy">call    </span>int_21h_indirect ; FREE MEMORY
<span style="color:black">TRANGROUP:0A69                                         </span>; ES = segment address of area to be freed
<span style="color:black">TRANGROUP:0A6C                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:0A6D                 </span><span style="color:navy">mov     [</span>Next_Batch<span style="color:navy">], bx
</span><span style="color:black">TRANGROUP:0A71                 </span><span style="color:navy">dec     [es:</span>Nest<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0A76                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:0A78                 </span><span style="color:navy">mov     [</span>Batch<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:0A7B
TRANGROUP:0A7B </span><span style="color:gray">NOTFREE</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0A7B                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:0A7C                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0A7D                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:0A7D                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:0A7E                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:0A7F                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0A7F </span>endp            BATCHOFF
<span style="color:black">TRANGROUP:0A7F
TRANGROUP:0A80
TRANGROUP:0A80 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:0A80
TRANGROUP:0A80
TRANGROUP:0A80 </span>proc            STRCPY near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0A80                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:0A81
TRANGROUP:0A81 </span><span style="color:gray">ccycle</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0A81                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:0A82                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:0A83                 </span><span style="color:navy">cmp     cx, </span><span style="color:green">128         </span>; COMBUFLEN
<span style="color:black">TRANGROUP:0A87                 </span><span style="color:navy">jb      short </span><span style="color:gray">ccopy
</span><span style="color:black">TRANGROUP:0A89                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:0A8A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ccend
</span><span style="color:black">TRANGROUP:0A8C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0A8C
TRANGROUP:0A8C </span><span style="color:gray">ccopy</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0A8C                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:0A8D                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:0A8F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ccycle
</span><span style="color:black">TRANGROUP:0A91
TRANGROUP:0A91 </span><span style="color:gray">ccend</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0A91                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:0A92                 </span><span style="color:navy">dec     di
</span><span style="color:black">TRANGROUP:0A93                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:0A94                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0A94 </span>endp            STRCPY
<span style="color:black">TRANGROUP:0A94
TRANGROUP:0A95
TRANGROUP:0A95 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:0A95
TRANGROUP:0A95
TRANGROUP:0A95 </span>proc            GETBATBYT near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0A95                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:0A96                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:0A97                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:0A98                 </span><span style="color:navy">test    [ds:</span>Batch_Abort<span style="color:navy">], </span><span style="color:green">0FFh
</span><span style="color:black">TRANGROUP:0A9D                 </span><span style="color:navy">jz      short </span><span style="color:gray">getbatbyt1
</span><span style="color:black">TRANGROUP:0A9F                 </span><span style="color:navy">jmp     </span><span style="color:gray">BATEOF
</span><span style="color:black">TRANGROUP:0AA2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0AA2
TRANGROUP:0AA2 </span><span style="color:gray">getbatbyt1</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0AA2                 </span><span style="color:navy">test    [ds:</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:0AA8                 </span><span style="color:navy">jnz     short </span><span style="color:gray">getbatbyt2
</span><span style="color:black">TRANGROUP:0AAA                 </span><span style="color:navy">jmp     </span><span style="color:gray">BATEOF
</span><span style="color:black">TRANGROUP:0AAD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0AAD
TRANGROUP:0AAD </span><span style="color:gray">getbatbyt2</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0AAD                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:0AAE                 </span><span style="color:navy">mov     es, [ds:</span>Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0AB2                 </span><span style="color:navy">cmp     [byte ptr es:</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [es:BATCHSEGMENT.BatchEOF]
<span style="color:black">TRANGROUP:0AB8                 </span><span style="color:navy">jz      short </span><span style="color:gray">not_eof
</span><span style="color:black">TRANGROUP:0ABA                 </span><span style="color:navy">jmp     </span><span style="color:gray">At_EOF
</span><span style="color:black">TRANGROUP:0ABD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0ABD
TRANGROUP:0ABD </span><span style="color:gray">not_eof</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0ABD                 </span><span style="color:navy">add     [word ptr es:</span><span style="color:green">8</span><span style="color:navy">], </span><span style="color:#ff8000">1 </span>; [es:BATCHSEGMENT.BatSeek]
<span style="color:black">TRANGROUP:0AC3                 </span><span style="color:navy">adc     [word ptr es:</span><span style="color:green">0Ah</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [es:BATCHSEGMENT.BatSeek+2]
<span style="color:black">TRANGROUP:0AC9                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:0ACA                 </span><span style="color:navy">mov     ax, cs
</span><span style="color:black">TRANGROUP:0ACC                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:black">TRANGROUP:0ACE                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:0ACE                 </span><span style="color:navy">mov     bx, [</span>BATBUFPOS<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0AD2                 </span><span style="color:navy">cmp     bx, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:0AD5                 </span><span style="color:navy">jnz     short </span><span style="color:gray">UNBUF
</span><span style="color:black">TRANGROUP:0AD7                 </span><span style="color:navy">mov     dx, offset </span>BATBUF
<span style="color:black">TRANGROUP:0ADA                 </span><span style="color:navy">mov     cx, [</span>BATBUFLEN<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0ADE                 </span><span style="color:navy">mov     bx, [</span>BATHAND<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0AE2                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Fh         </span>; READ
<span style="color:black">TRANGROUP:0AE4                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:0AE7                 </span><span style="color:navy">jnb     short </span><span style="color:gray">bat_read_ok
</span><span style="color:black">TRANGROUP:0AE9                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:0AEC                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:0AED                 </span><span style="color:navy">mov     ds, [</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0AF1                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:0AF1                 </span><span style="color:navy">mov     dx, ax
</span><span style="color:black">TRANGROUP:0AF3                 </span><span style="color:navy">call    </span>output_batch_name
<span style="color:black">TRANGROUP:0AF6                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0AF7                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:0AF7                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:0AFA                 </span><span style="color:navy">mov     [ds:</span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:#ff8000">0Dh </span>; END_OF_LINE_IN
<span style="color:black">TRANGROUP:0AFF                 </span><span style="color:navy">mov     [ds:</span>COMBUF<span style="color:navy">+</span><span style="color:green">3</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; END_OF_LINE_OUT
<span style="color:black">TRANGROUP:0B04                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0B08                 </span><span style="color:navy">jmp     short </span><span style="color:gray">BATEOF
</span><span style="color:black">TRANGROUP:0B0A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0B0A
TRANGROUP:0B0A </span><span style="color:gray">bat_read_ok</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0B0A                 </span><span style="color:navy">mov     cx, ax
</span><span style="color:black">TRANGROUP:0B0C                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">BATEOFDS
</span><span style="color:black">TRANGROUP:0B0E                 </span><span style="color:navy">mov     [ds:</span>BATBUFEND<span style="color:navy">], cx
</span><span style="color:black">TRANGROUP:0B12                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:0B14                 </span><span style="color:navy">mov     [ds:</span>BATBUFPOS<span style="color:navy">], bx
</span><span style="color:black">TRANGROUP:0B18
TRANGROUP:0B18 </span><span style="color:gray">UNBUF</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0B18                 </span><span style="color:navy">mov     al, [ds:</span>BATBUF<span style="color:navy">+bx]
</span><span style="color:black">TRANGROUP:0B1C                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:0B1D                 </span><span style="color:navy">cmp     bx, [ds:</span>BATBUFEND<span style="color:navy">] </span>; beyond end of buffer?
<span style="color:black">TRANGROUP:0B21                 </span><span style="color:navy">jb      short </span><span style="color:gray">SETBUFPOS
</span><span style="color:black">TRANGROUP:0B23                 </span><span style="color:navy">mov     bx, </span><span style="color:green">0FFFFh      </span>; -1
<span style="color:black">TRANGROUP:0B26
TRANGROUP:0B26 </span><span style="color:gray">SETBUFPOS</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0B26                 </span><span style="color:navy">mov     [ds:</span>BATBUFPOS<span style="color:navy">], bx
</span><span style="color:black">TRANGROUP:0B2A                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">1Ah         </span>; ^Z for termination
<span style="color:black">TRANGROUP:0B2C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GETBYTEDONE
</span><span style="color:black">TRANGROUP:0B2E
TRANGROUP:0B2E </span><span style="color:gray">BATEOFDS</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0B2E                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:0B2F                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0B33                 </span><span style="color:navy">mov     es, [es:</span>Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0B38                 </span><span style="color:navy">cmp     [byte ptr es:</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [es:BATCHSEGMENT.BatchEOF]
<span style="color:black">TRANGROUP:0B3E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">crpresent
</span><span style="color:black">TRANGROUP:0B40                 </span><span style="color:navy">inc     [byte ptr es:</span><span style="color:green">2</span><span style="color:navy">] </span>; [es:BATCHSEGMENT.BatchEOF]
<span style="color:black">TRANGROUP:0B45                 </span><span style="color:navy">mov     bx, [ds:</span><span style="color:green">0AA78h</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:0B49                 </span><span style="color:navy">cmp     [byte ptr ds:(</span>BATBUFPOS<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">)+bx], </span><span style="color:#ff8000">0Ah </span>; [bx+BATBUF-1],0Ah
<span style="color:black">TRANGROUP:0B49                                         </span>; was a LF present?
<span style="color:black">TRANGROUP:0B4E                 </span><span style="color:navy">jz      short </span><span style="color:gray">crpresent </span>; yes, no need to fake it
<span style="color:black">TRANGROUP:0B50                 </span><span style="color:navy">add     [byte ptr es:</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:#ff8000">3 </span>; add byte [es:BATCHSEGMENT.BatchEOF],3
<span style="color:black">TRANGROUP:0B50                                         </span>; BatchEOF == 4 to fake CR-LF
<span style="color:black">TRANGROUP:0B56
TRANGROUP:0B56 </span><span style="color:gray">crpresent</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0B56                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0B5A
TRANGROUP:0B5A </span><span style="color:gray">At_EOF</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0B5A                 </span><span style="color:navy">shr     [byte ptr es:</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:green">1 </span>; [es:BATCHSEGMENT.BatchEOF]
<span style="color:black">TRANGROUP:0B5F                 </span><span style="color:navy">jz      short </span><span style="color:gray">turn_off  </span>; zero,turn batch off
<span style="color:black">TRANGROUP:0B61                 </span><span style="color:navy">cmp     [byte ptr es:</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:#ff8000">1 </span>; [es:BATCHSEGMENT.BatchEOF]
<span style="color:black">TRANGROUP:0B61                                         </span>; BatchEOF was 2, return LF
<span style="color:black">TRANGROUP:0B67                 </span><span style="color:navy">jz      short </span><span style="color:gray">ret_lf
</span><span style="color:black">TRANGROUP:0B69                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0Dh         </span>; return fake CR
<span style="color:black">TRANGROUP:0B6B                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:0B6C                 </span><span style="color:navy">jmp     short </span><span style="color:gray">GETBYTEDONE
</span><span style="color:black">TRANGROUP:0B6E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0B6E
TRANGROUP:0B6E </span><span style="color:gray">ret_lf</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0B6E                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0Ah         </span>; return fake LF
<span style="color:black">TRANGROUP:0B70                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:0B71                 </span><span style="color:navy">jmp     short </span><span style="color:gray">GETBYTEDONE
</span><span style="color:black">TRANGROUP:0B73 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0B73
TRANGROUP:0B73 </span><span style="color:gray">turn_off</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0B73                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:0B74
TRANGROUP:0B74 </span><span style="color:gray">BATEOF</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0B74                 </span><span style="color:navy">call    </span>BATCHOFF
<span style="color:black">TRANGROUP:0B77                 </span><span style="color:navy">call    </span>BATCLOSE
<span style="color:black">TRANGROUP:0B7A                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0Dh         </span>; If end-of-file, then end of line
<span style="color:black">TRANGROUP:0B7C                 </span><span style="color:navy">test    [ds:</span>Batch_Abort<span style="color:navy">], </span><span style="color:green">0FFh
</span><span style="color:black">TRANGROUP:0B81                 </span><span style="color:navy">mov     [ds:</span>Batch_Abort<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0B86                 </span><span style="color:navy">jz      short </span><span style="color:gray">CONT_GET_BYT
</span><span style="color:black">TRANGROUP:0B88                 </span><span style="color:navy">mov     di, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:0B8B                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:0B8D                 </span><span style="color:navy">jmp     short </span><span style="color:gray">GETBYTEDONE
</span><span style="color:black">TRANGROUP:0B8F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0B8F
TRANGROUP:0B8F </span><span style="color:gray">CONT_GET_BYT</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0B8F                 </span><span style="color:navy">cmp     [ds:</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFF0h
</span><span style="color:black">TRANGROUP:0B94                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GETBYTEDONE
</span><span style="color:black">TRANGROUP:0B96                 </span><span style="color:navy">cmp     [ds:</span>Nest<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0B9B                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GETBYTEDONE
</span><span style="color:black">TRANGROUP:0B9D                 </span><span style="color:navy">mov     [ds:</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:0BA3
TRANGROUP:0BA3 </span><span style="color:gray">GETBYTEDONE</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0BA3                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0BA4                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:0BA5                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:0BA6                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0BA6 </span>endp            GETBATBYT
<span style="color:black">TRANGROUP:0BA6
TRANGROUP:0BA7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0BA7 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR _$IF
</span><span style="color:black">TRANGROUP:0BA7
TRANGROUP:0BA7 </span>IFERRORP<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0BA7                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:0BA8
TRANGROUP:0BA8 </span>IFERROR<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0BA8                 </span><span style="color:navy">mov     dx, offset </span>SYNTMES_PTR
<span style="color:black">TRANGROUP:0BAB                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:0BAB </span><span style="color:gray">; END OF FUNCTION CHUNK FOR _$IF
</span><span style="color:black">TRANGROUP:0BAE
TRANGROUP:0BAE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:0BAE
TRANGROUP:0BAE
TRANGROUP:0BAE </span>proc            _$IF near               <span style="color:#8080ff">; ...
</span><span style="color:black">TRANGROUP:0BAE
TRANGROUP:0BAE </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:0BA7 SIZE 00000007 BYTES
</span><span style="color:black">TRANGROUP:0BAE
TRANGROUP:0BAE                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:0BAF                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0BB3                 </span><span style="color:navy">cmp     [ds:</span>PipeFiles<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0BB8                 </span><span style="color:navy">jz      short </span><span style="color:gray">IFNoPipe
</span><span style="color:black">TRANGROUP:0BBA                 </span><span style="color:navy">call    </span>PIPEDEL
<span style="color:black">TRANGROUP:0BBD
TRANGROUP:0BBD </span><span style="color:gray">IFNoPipe</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0BBD                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0BBE                 </span><span style="color:navy">mov     [ds:</span>IFNOTFLAG<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0BC3                 </span><span style="color:navy">mov     [ds:</span>IF_NOT_COUNT<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0BC9                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:black">TRANGROUP:0BCC
TRANGROUP:0BCC </span><span style="color:gray">IFREENT</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0BCC                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:0BCF                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:0BD1                 </span><span style="color:navy">jz      short </span>IFERROR
<span style="color:black">TRANGROUP:0BD3                 </span><span style="color:navy">mov     bp, si
</span><span style="color:black">TRANGROUP:0BD5                 </span><span style="color:navy">mov     di, offset </span>IFTAB <span style="color:gray">; &quot;\x03NOT&quot;
</span><span style="color:black">TRANGROUP:0BD8                 </span><span style="color:navy">mov     ch, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0BDA
TRANGROUP:0BDA </span><span style="color:gray">IFINDCOM</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0BDA                 </span><span style="color:navy">mov     si, bp
</span><span style="color:black">TRANGROUP:0BDC                 </span><span style="color:navy">mov     cl, [di]
</span><span style="color:black">TRANGROUP:0BDE                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:0BDF                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">IFSTRING
</span><span style="color:black">TRANGROUP:0BE1                 </span><span style="color:navy">jmp     short </span><span style="color:gray">FIRSTCOMP
</span><span style="color:black">TRANGROUP:0BE3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0BE3
TRANGROUP:0BE3 </span><span style="color:gray">IFCOMP</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0BE3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">IF_DIF
</span><span style="color:black">TRANGROUP:0BE5
TRANGROUP:0BE5 </span><span style="color:gray">FIRSTCOMP</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0BE5                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:0BE6                 </span><span style="color:navy">mov     ah, [es:di]
</span><span style="color:black">TRANGROUP:0BE9                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:0BEA                 </span><span style="color:navy">cmp     al, ah
</span><span style="color:black">TRANGROUP:0BEC                 </span><span style="color:navy">jz      short </span><span style="color:gray">IFLP
</span><span style="color:black">TRANGROUP:0BEE                 </span><span style="color:navy">or      ah, </span><span style="color:green">20h
</span><span style="color:black">TRANGROUP:0BF1                 </span><span style="color:navy">cmp     al, ah
</span><span style="color:black">TRANGROUP:0BF3
TRANGROUP:0BF3 </span><span style="color:gray">IFLP</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0BF3                 </span><span style="color:navy">loop    </span><span style="color:gray">IFCOMP
</span><span style="color:black">TRANGROUP:0BF5
TRANGROUP:0BF5 </span><span style="color:gray">IF_DIF</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0BF5                 </span><span style="color:navy">lahf
</span><span style="color:black">TRANGROUP:0BF6                 </span><span style="color:navy">add     di, cx
</span><span style="color:black">TRANGROUP:0BF8                 </span><span style="color:navy">mov     bx, [di]
</span><span style="color:black">TRANGROUP:0BFA                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:0BFB                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:0BFC                 </span><span style="color:navy">sahf
</span><span style="color:black">TRANGROUP:0BFD                 </span><span style="color:navy">jnz     short </span><span style="color:gray">IFINDCOM
</span><span style="color:black">TRANGROUP:0BFF                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:0C00                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:0C02
TRANGROUP:0C02 </span><span style="color:gray">IFERRJ</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C02                 </span><span style="color:navy">jz      short </span>IFERROR
<span style="color:black">TRANGROUP:0C04                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:0C07                 </span><span style="color:navy">jnz     short </span><span style="color:gray">IFINDCOM
</span><span style="color:black">TRANGROUP:0C09                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:0C0C                 </span><span style="color:navy">jmp     bx
</span><span style="color:black">TRANGROUP:0C0E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0C0E
TRANGROUP:0C0E </span>IFNOT<span style="color:navy">:                                  </span><span style="color:#8080ff">; ...
</span><span style="color:black">TRANGROUP:0C0E                 </span><span style="color:navy">not     [ds:</span>IFNOTFLAG<span style="color:navy">]  </span>; byte
<span style="color:black">TRANGROUP:0C12                 </span><span style="color:navy">inc     [ds:</span>IF_NOT_COUNT<span style="color:navy">] </span>; word
<span style="color:black">TRANGROUP:0C16                 </span><span style="color:navy">jmp     short </span><span style="color:gray">IFREENT
</span><span style="color:black">TRANGROUP:0C18 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0C18
TRANGROUP:0C18 </span><span style="color:gray">IFSTRING</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C18                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:0C19                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:0C1B
TRANGROUP:0C1B </span><span style="color:gray">FIRST_STRING</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C1B                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:0C1C                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:0C1E                 </span><span style="color:navy">jz      short </span>IFERRORP
<span style="color:black">TRANGROUP:0C20                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:0C23                 </span><span style="color:navy">jz      short </span><span style="color:gray">EQUAL_CHECK
</span><span style="color:black">TRANGROUP:0C25                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:0C26                 </span><span style="color:navy">jmp     short </span><span style="color:gray">FIRST_STRING
</span><span style="color:black">TRANGROUP:0C28 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0C28
TRANGROUP:0C28 </span><span style="color:gray">EQUAL_CHECK</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C28                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Dh </span><span style="color:gray">; &#039;=&#039;
</span><span style="color:black">TRANGROUP:0C2A                 </span><span style="color:navy">jz      short </span><span style="color:gray">EQUAL_CHECK2
</span><span style="color:black">TRANGROUP:0C2C                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:0C2E                 </span><span style="color:navy">jz      short </span><span style="color:gray">IFERRPJ
</span><span style="color:black">TRANGROUP:0C30                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:0C31                 </span><span style="color:navy">jmp     short </span><span style="color:gray">EQUAL_CHECK
</span><span style="color:black">TRANGROUP:0C33 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0C33
TRANGROUP:0C33 </span><span style="color:gray">EQUAL_CHECK2</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C33                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:0C34                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Dh </span><span style="color:gray">; &#039;=&#039;
</span><span style="color:black">TRANGROUP:0C36                 </span><span style="color:navy">jnz     short </span><span style="color:gray">IFERRPJ
</span><span style="color:black">TRANGROUP:0C38                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:0C3B                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:0C3D                 </span><span style="color:navy">jz      short </span><span style="color:gray">IFERRPJ
</span><span style="color:black">TRANGROUP:0C3F                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:0C40                 </span><span style="color:navy">repe cmpsb
</span><span style="color:black">TRANGROUP:0C42                 </span><span style="color:navy">jz      short </span><span style="color:gray">MATCH
</span><span style="color:black">TRANGROUP:0C44                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:0C45                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:0C48                 </span><span style="color:navy">jz      short </span><span style="color:gray">IFERRJ
</span><span style="color:black">TRANGROUP:0C4A
TRANGROUP:0C4A </span><span style="color:gray">SKIPSTRINGEND</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C4A                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:0C4B
TRANGROUP:0C4B </span><span style="color:gray">NOTMATCH</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C4B                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:0C4D
TRANGROUP:0C4D </span>IFERRORJ2<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C4D                 </span><span style="color:navy">jz      short </span><span style="color:gray">IFERRJ
</span><span style="color:black">TRANGROUP:0C4F                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:0C52                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SKIPSTRINGEND
</span><span style="color:black">TRANGROUP:0C54                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0FFh        </span>; -1
<span style="color:black">TRANGROUP:0C56                 </span><span style="color:navy">jmp     short </span>IFRET
<span style="color:black">TRANGROUP:0C58 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0C58
TRANGROUP:0C58 </span><span style="color:gray">IFERRPJ</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C58                 </span><span style="color:navy">jmp     </span>IFERRORP
<span style="color:black">TRANGROUP:0C5B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0C5B
TRANGROUP:0C5B </span><span style="color:gray">MATCH</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C5B                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:0C5C                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:0C5F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOTMATCH
</span><span style="color:black">TRANGROUP:0C61                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:0C63                 </span><span style="color:navy">jmp     short </span>IFRET
<span style="color:black">TRANGROUP:0C65 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0C65
TRANGROUP:0C65 </span>IFEXISTS<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C65                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:0C66                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:0C69                 </span><span style="color:navy">jnz     short </span>IFEXISTS
<span style="color:black">TRANGROUP:0C6B                 </span><span style="color:navy">mov     dx, offset </span>BWDBUF ; DIRBUF
<span style="color:black">TRANGROUP:0C6E                 </span><span style="color:navy">mov     ax, </span><span style="color:green">1A00h
</span><span style="color:black">TRANGROUP:0C71                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET DISK TRANSFER AREA ADDRESS
<span style="color:black">TRANGROUP:0C71                                         </span>; DS:DX -&gt; disk transfer buffer
<span style="color:black">TRANGROUP:0C73                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:0C76                 </span><span style="color:navy">add     bx, [ds:</span>IF_NOT_COUNT<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0C7A                 </span><span style="color:navy">mov     ax, offset </span>ARG_ARGV ; ARG+ARG_UNIT.argv ; ARG
<span style="color:black">TRANGROUP:0C7D                 </span><span style="color:navy">call    </span>argv_calc
<span style="color:black">TRANGROUP:0C80                 </span><span style="color:navy">mov     dx, [bx]
</span><span style="color:black">TRANGROUP:0C82                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">6           </span>; IFEXIST_ATTR
<span style="color:black">TRANGROUP:0C85                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4E00h
</span><span style="color:black">TRANGROUP:0C88                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FIND FIRST ASCIZ (FINDFIRST)
<span style="color:black">TRANGROUP:0C88                                         </span>; CX = search attributes
<span style="color:black">TRANGROUP:0C88                                         </span>; DS:DX -&gt; ASCIZ filespec
<span style="color:black">TRANGROUP:0C88                                         </span>; (drive, path, and wildcards allowed)
<span style="color:black">TRANGROUP:0C8A                 </span><span style="color:navy">jb      short </span><span style="color:gray">IF_EX_C
</span><span style="color:black">TRANGROUP:0C8C                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:0C8E                 </span><span style="color:navy">jmp     short </span>IFRET
<span style="color:black">TRANGROUP:0C90 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0C90
TRANGROUP:0C90 </span><span style="color:gray">IF_EX_C</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C90                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:0C92
TRANGROUP:0C92 </span>IFRET<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C92                 </span><span style="color:navy">test    [ds:</span>IFNOTFLAG<span style="color:navy">], </span><span style="color:green">0FFh
</span><span style="color:black">TRANGROUP:0C97                 </span><span style="color:navy">jz      short </span><span style="color:gray">REALTEST
</span><span style="color:black">TRANGROUP:0C99                 </span><span style="color:navy">not     al
</span><span style="color:black">TRANGROUP:0C9B
TRANGROUP:0C9B </span><span style="color:gray">REALTEST</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0C9B                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:0C9D                 </span><span style="color:navy">jz      short </span><span style="color:gray">IFTRUE
</span><span style="color:black">TRANGROUP:0C9F                 </span><span style="color:navy">jmp     </span>TCOMMAND
<span style="color:black">TRANGROUP:0CA2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0CA2
TRANGROUP:0CA2 </span><span style="color:gray">IFTRUE</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0CA2                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:0CA5                 </span><span style="color:navy">mov     cx, si
</span><span style="color:black">TRANGROUP:0CA7                 </span><span style="color:navy">sub     cx, </span><span style="color:green">81h
</span><span style="color:black">TRANGROUP:0CAB                 </span><span style="color:navy">sub     [ds:</span><span style="color:green">80h</span><span style="color:navy">], cl
</span><span style="color:black">TRANGROUP:0CAF                 </span><span style="color:navy">mov     cl, [ds:</span><span style="color:green">80h</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:0CB3                 </span><span style="color:navy">mov     [ds:</span>COMBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">], cl
</span><span style="color:black">TRANGROUP:0CB7                 </span><span style="color:navy">mov     di, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:0CBA                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:0CBB                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:0CBD                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:0CBF                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:0CC0                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:0CC1                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0CC5                 </span><span style="color:navy">mov     [ds:</span>IfFlag<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; -1
<span style="color:black">TRANGROUP:0CCA                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0CCB                 </span><span style="color:navy">jmp     </span>DOCOM0
<span style="color:black">TRANGROUP:0CCB </span>endp            _$IF
<span style="color:black">TRANGROUP:0CCB
</span><span style="color:maroon">TRANGROUP:0CCE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0CCE
TRANGROUP:0CCE </span>IFERRORJ3<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0CCE                 </span><span style="color:navy">jmp     </span>IFERRORJ2
<span style="color:maroon">TRANGROUP:0CD1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0CD1
TRANGROUP:0CD1 </span>IFERLEV<span style="color:navy">:                                </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:0CD1                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:green">0F2h
</span><span style="color:maroon">TRANGROUP:0CD4                 </span><span style="color:navy">jnz     short </span>IFERLEV_@
<span style="color:maroon">TRANGROUP:0CD6                 </span><span style="color:navy">inc     si
</span><span style="color:maroon">TRANGROUP:0CD7
TRANGROUP:0CD7 </span>IFERLEV_@<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0CD7                 </span><span style="color:navy">mov     bh, </span><span style="color:green">10
</span><span style="color:maroon">TRANGROUP:0CD9                 </span><span style="color:navy">xor     bl, bl
</span><span style="color:maroon">TRANGROUP:0CDB
TRANGROUP:0CDB </span>GETNUMLP<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0CDB                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:0CDC                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:maroon">TRANGROUP:0CDE                 </span><span style="color:navy">jz      short </span>IFERRORJ3
<span style="color:maroon">TRANGROUP:0CE0                 </span><span style="color:navy">call    </span>DELIM
<span style="color:maroon">TRANGROUP:0CE3                 </span><span style="color:navy">jz      short </span>GOTNUM
<span style="color:maroon">TRANGROUP:0CE5                 </span><span style="color:navy">sub     al, </span><span style="color:#ff8000">30h </span><span style="color:gray">; &#039;0&#039;
</span><span style="color:maroon">TRANGROUP:0CE7                 </span><span style="color:navy">xchg    al, bl
</span><span style="color:maroon">TRANGROUP:0CE9                 </span><span style="color:navy">mul     bh
</span><span style="color:maroon">TRANGROUP:0CEB                 </span><span style="color:navy">add     al, bl
</span><span style="color:maroon">TRANGROUP:0CED                 </span><span style="color:navy">xchg    al, bl
</span><span style="color:maroon">TRANGROUP:0CEF                 </span><span style="color:navy">jmp     short </span>GETNUMLP
<span style="color:maroon">TRANGROUP:0CF1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0CF1
TRANGROUP:0CF1 </span>GOTNUM<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0CF1                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:0CF2                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:0CF6                 </span><span style="color:navy">mov     ah, [byte ptr ds:</span>RetCode<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:0CFA                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:0CFB                 </span><span style="color:navy">xor     al, al
</span><span style="color:maroon">TRANGROUP:0CFD                 </span><span style="color:navy">cmp     ah, bl
</span><span style="color:maroon">TRANGROUP:0CFF                 </span><span style="color:navy">jnb     short </span>IFRET
<span style="color:maroon">TRANGROUP:0D01                 </span><span style="color:navy">dec     al
</span><span style="color:maroon">TRANGROUP:0D03                 </span><span style="color:navy">jmp     short </span>IFRET
<span style="color:maroon">TRANGROUP:0D05 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0D05
TRANGROUP:0D05 </span>_SHIFT<span style="color:navy">:                                 </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:0D05                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:0D09                 </span><span style="color:navy">mov     ax, [ds:</span>Batch<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:0D0C                 </span><span style="color:navy">or      ax, ax
</span><span style="color:maroon">TRANGROUP:0D0E                 </span><span style="color:navy">jnz     short </span>SHIFT1
<span style="color:maroon">TRANGROUP:0D10
TRANGROUP:0D10 </span>SHIFT_RETN<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0D10                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:0D11 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0D11
TRANGROUP:0D11 </span>SHIFT1<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0D11                 </span><span style="color:navy">mov     es, ax
</span><span style="color:maroon">TRANGROUP:0D13                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:maroon">TRANGROUP:0D15                 </span><span style="color:navy">mov     di, </span><span style="color:#ff8000">0Ch         </span>; BATCHSEGMENT.BatParm
<span style="color:maroon">TRANGROUP:0D18                 </span><span style="color:navy">lea     si, [di+</span><span style="color:#ff8000">2</span><span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:0D1B                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">9
</span><span style="color:maroon">TRANGROUP:0D1E                 </span><span style="color:navy">rep movsw
</span><span style="color:maroon">TRANGROUP:0D20                 </span><span style="color:navy">cmp     [word ptr di], </span><span style="color:green">0FFFFh
</span><span style="color:maroon">TRANGROUP:0D23                 </span><span style="color:navy">jz      short </span>SHIFT_RETN
<span style="color:maroon">TRANGROUP:0D25                 </span><span style="color:navy">mov     si, [di]
</span><span style="color:maroon">TRANGROUP:0D27                 </span><span style="color:navy">mov     [word ptr di], </span><span style="color:green">0FFFFh
</span><span style="color:maroon">TRANGROUP:0D2B
TRANGROUP:0D2B </span>SKIPCRLP<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0D2B                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:0D2C                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:maroon">TRANGROUP:0D2E                 </span><span style="color:navy">jnz     short </span>SKIPCRLP
<span style="color:maroon">TRANGROUP:0D30                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:0D33                 </span><span style="color:navy">jz      short </span>SHIFT_RETN
<span style="color:maroon">TRANGROUP:0D35                 </span><span style="color:navy">mov     [di], si
</span><span style="color:maroon">TRANGROUP:0D37                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0D38
TRANGROUP:0D38 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:0D38
TRANGROUP:0D38
TRANGROUP:0D38 </span>proc            SKIPDELIM near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0D38                 </span><span style="color:navy">test    [ds:</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:0D3E                 </span><span style="color:navy">jz      short </span><span style="color:gray">SKIPERR
</span><span style="color:black">TRANGROUP:0D40                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:black">TRANGROUP:0D43                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:0D46                 </span><span style="color:navy">jz      short </span>SKIPDELIM
<span style="color:black">TRANGROUP:0D48                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:0D49                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0D4A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0D4A
TRANGROUP:0D4A </span><span style="color:gray">SKIPERR</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0D4A                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:0D4B
TRANGROUP:0D4B </span>GOTO_RETN<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0D4B                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0D4B </span>endp            SKIPDELIM
<span style="color:black">TRANGROUP:0D4B
</span><span style="color:maroon">TRANGROUP:0D4C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0D4C
TRANGROUP:0D4C </span>_$CALL<span style="color:navy">:                                 </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:0D4C                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:0D4D                 </span><span style="color:navy">push    di
</span><span style="color:maroon">TRANGROUP:0D4E                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">TRANGROUP:0D4F                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">TRANGROUP:0D50                 </span><span style="color:navy">mov     si, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:maroon">TRANGROUP:0D53                 </span><span style="color:navy">call    </span>scanoff
<span style="color:maroon">TRANGROUP:0D56                 </span><span style="color:navy">add     si, </span><span style="color:#ff8000">4
</span><span style="color:maroon">TRANGROUP:0D59                 </span><span style="color:navy">mov     di, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:maroon">TRANGROUP:0D5C                 </span><span style="color:navy">mov     cx, </span><span style="color:green">124         </span>; COMBUFLEN-length_call
<span style="color:maroon">TRANGROUP:0D5F                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">TRANGROUP:0D61                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">TRANGROUP:0D62                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:0D63                 </span><span style="color:navy">pop     di
</span><span style="color:maroon">TRANGROUP:0D64                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:0D65                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:0D66                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:0D6A                 </span><span style="color:navy">mov     [ds:</span>Call_Flag<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; call_in_progress
<span style="color:maroon">TRANGROUP:0D6F                 </span><span style="color:navy">mov     [ds:</span>Call_Batch_Flag<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; call_in_progress
<span style="color:maroon">TRANGROUP:0D74                 </span><span style="color:navy">cmp     [ds:</span>PipeFiles<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:0D79                 </span><span style="color:navy">jz      short </span>_NOPIPE
<span style="color:maroon">TRANGROUP:0D7B                 </span><span style="color:navy">call    </span>PIPEDEL
<span style="color:maroon">TRANGROUP:0D7E
TRANGROUP:0D7E </span>_NOPIPE<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0D7E                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:0D7F                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:0D80 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0D80
TRANGROUP:0D80 </span>_GOTO<span style="color:navy">:                                  </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:0D80                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:0D84                 </span><span style="color:navy">test    [ds:</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:maroon">TRANGROUP:0D8A                 </span><span style="color:navy">jz      short </span>GOTO_RETN
<span style="color:maroon">TRANGROUP:0D8C                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">TRANGROUP:0D8E                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:0D8F                 </span><span style="color:navy">mov     ds, [ds:</span>Batch<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:0D93                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">8</span><span style="color:navy">], dx      </span>; [BATCHSEGMENT.BatSeek]
<span style="color:maroon">TRANGROUP:0D97                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">0Ah</span><span style="color:navy">], dx    </span>; [BATCHSEGMENT.BatSeek+2]
<span style="color:maroon">TRANGROUP:0D9B                 </span><span style="color:navy">mov     [byte ptr ds:</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [BATCHSEGMENT.BatchEOF]
<span style="color:maroon">TRANGROUP:0DA0                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:0DA1                 </span><span style="color:navy">call    </span>PROMPTBAT
<span style="color:maroon">TRANGROUP:0DA4                 </span><span style="color:navy">mov     di, </span><span style="color:green">5Dh         </span>; FCB+1
<span style="color:maroon">TRANGROUP:0DA7                 </span><span style="color:navy">mov     cx, </span><span style="color:green">11
</span><span style="color:maroon">TRANGROUP:0DAA                 </span><span style="color:navy">mov     al, </span><span style="color:green">20h         </span>; space
<span style="color:maroon">TRANGROUP:0DAC                 </span><span style="color:navy">repne scasb
</span><span style="color:maroon">TRANGROUP:0DAE                 </span><span style="color:navy">jnz     short </span>NOINC
<span style="color:maroon">TRANGROUP:0DB0                 </span><span style="color:navy">inc     cx
</span><span style="color:maroon">TRANGROUP:0DB1
TRANGROUP:0DB1 </span>NOINC<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0DB1                 </span><span style="color:navy">sub     cx, </span><span style="color:green">11
</span><span style="color:maroon">TRANGROUP:0DB4                 </span><span style="color:navy">neg     cx
</span><span style="color:maroon">TRANGROUP:0DB6                 </span><span style="color:navy">mov     [word ptr es:</span>BWDBUF<span style="color:navy">], cx </span>; word [es:GOTOLEN]
<span style="color:maroon">TRANGROUP:0DBB                 </span><span style="color:navy">call    </span>SKIPDELIM
<span style="color:maroon">TRANGROUP:0DBE                 </span><span style="color:navy">jb      short </span>BADGOTO
<span style="color:maroon">TRANGROUP:0DC0                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">:&#039;
</span><span style="color:maroon">TRANGROUP:0DC2                 </span><span style="color:navy">jz      short </span>CHKLABEL
<span style="color:maroon">TRANGROUP:0DC4
TRANGROUP:0DC4 </span>LABLKLP<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0DC4                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:maroon">TRANGROUP:0DC7                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Ah
</span><span style="color:maroon">TRANGROUP:0DC9                 </span><span style="color:navy">jnz     short </span>LABLKTST
<span style="color:maroon">TRANGROUP:0DCB                 </span><span style="color:navy">call    </span>SKIPDELIM
<span style="color:maroon">TRANGROUP:0DCE                 </span><span style="color:navy">jb      short </span>BADGOTO
<span style="color:maroon">TRANGROUP:0DD0                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:maroon">TRANGROUP:0DD2                 </span><span style="color:navy">jz      short </span>CHKLABEL
<span style="color:maroon">TRANGROUP:0DD4
TRANGROUP:0DD4 </span>LABLKTST<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0DD4                 </span><span style="color:navy">test    [ds:</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:maroon">TRANGROUP:0DDA                 </span><span style="color:navy">jnz     short </span>LABLKLP
<span style="color:maroon">TRANGROUP:0DDC
TRANGROUP:0DDC </span>BADGOTO<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0DDC                 </span><span style="color:navy">call    </span>BATCLOSE
<span style="color:maroon">TRANGROUP:0DDF                 </span><span style="color:navy">call    </span>free_batch
<span style="color:maroon">TRANGROUP:0DE2                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">TRANGROUP:0DE3                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:0DE4                 </span>assume ds:TRANGROUP
<span style="color:maroon">TRANGROUP:0DE4                 </span><span style="color:navy">mov     dx, offset </span>BADLAB_PTR
<span style="color:maroon">TRANGROUP:0DE7                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:0DEA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0DEA
TRANGROUP:0DEA </span>CHKLABEL<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0DEA                 </span><span style="color:navy">call    </span>SKIPDELIM
<span style="color:maroon">TRANGROUP:0DED                 </span><span style="color:navy">jb      short </span>BADGOTO
<span style="color:maroon">TRANGROUP:0DEF                 </span><span style="color:navy">mov     di, </span><span style="color:green">5Dh         </span>; FCB+1
<span style="color:maroon">TRANGROUP:0DF2                 </span><span style="color:navy">mov     cx, [word ptr es:</span>BWDBUF<span style="color:navy">] </span>; [es:GOTOLEN]
<span style="color:maroon">TRANGROUP:0DF7                 </span><span style="color:navy">jmp     short </span>GOTBYTE
<span style="color:maroon">TRANGROUP:0DF9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0DF9
TRANGROUP:0DF9 </span>NEXTCHRLP<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0DF9                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">TRANGROUP:0DFA                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:maroon">TRANGROUP:0DFD                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">TRANGROUP:0DFE
TRANGROUP:0DFE </span>GOTBYTE<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0DFE                 </span><span style="color:navy">call    </span>testkanj
<span style="color:maroon">TRANGROUP:0E01                 </span><span style="color:navy">jz      short </span>NOTKANJ1
<span style="color:maroon">TRANGROUP:0E03                 </span><span style="color:navy">cmp     al, [es:di]
</span><span style="color:maroon">TRANGROUP:0E06                 </span><span style="color:navy">jnz     short </span>LABLKTST
<span style="color:maroon">TRANGROUP:0E08                 </span><span style="color:navy">inc     di
</span><span style="color:maroon">TRANGROUP:0E09                 </span><span style="color:navy">dec     cx
</span><span style="color:maroon">TRANGROUP:0E0A                 </span><span style="color:navy">jcxz    short </span>LABLKTST
<span style="color:maroon">TRANGROUP:0E0C                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">TRANGROUP:0E0D                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:maroon">TRANGROUP:0E10                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">TRANGROUP:0E11                 </span><span style="color:navy">cmp     al, [es:di]
</span><span style="color:maroon">TRANGROUP:0E14                 </span><span style="color:navy">jmp     short </span>KNEXTLABCHR
<span style="color:maroon">TRANGROUP:0E16 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0E16
TRANGROUP:0E16 </span>NOTKANJ1<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0E16                 </span><span style="color:navy">or      al, </span><span style="color:green">20h
</span><span style="color:maroon">TRANGROUP:0E18                 </span><span style="color:navy">cmp     al, [es:di]
</span><span style="color:maroon">TRANGROUP:0E1B                 </span><span style="color:navy">jnz     short </span>TRYUPPER
<span style="color:maroon">TRANGROUP:0E1D                 </span><span style="color:navy">jmp     short </span>NEXTLABCHR
<span style="color:maroon">TRANGROUP:0E1F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:0E1F
TRANGROUP:0E1F </span>TRYUPPER<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0E1F                 </span><span style="color:navy">sub     al, </span><span style="color:green">20h
</span><span style="color:maroon">TRANGROUP:0E21                 </span><span style="color:navy">cmp     al, [es:di]
</span><span style="color:maroon">TRANGROUP:0E24
TRANGROUP:0E24 </span>KNEXTLABCHR<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0E24                 </span><span style="color:navy">jnz     short </span>LABLKTST
<span style="color:maroon">TRANGROUP:0E26
TRANGROUP:0E26 </span>NEXTLABCHR<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0E26                 </span><span style="color:navy">inc     di
</span><span style="color:maroon">TRANGROUP:0E27                 </span><span style="color:navy">loop    </span>NEXTCHRLP
<span style="color:maroon">TRANGROUP:0E29                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:maroon">TRANGROUP:0E2C                 </span><span style="color:navy">cmp     [word ptr es:</span>BWDBUF<span style="color:navy">], </span><span style="color:#ff8000">8 </span>; [es:GOTOLEN]
<span style="color:maroon">TRANGROUP:0E32                 </span><span style="color:navy">jge     short </span>GOTOCONT
<span style="color:maroon">TRANGROUP:0E34                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:maroon">TRANGROUP:0E36                 </span><span style="color:navy">ja      short </span>LABLKTST
<span style="color:maroon">TRANGROUP:0E38
TRANGROUP:0E38 </span>GOTOCONT<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0E38                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:maroon">TRANGROUP:0E3A                 </span><span style="color:navy">jz      short </span>SKIPLFEED
<span style="color:maroon">TRANGROUP:0E3C
TRANGROUP:0E3C </span>TONEXTBATLIN<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0E3C                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:maroon">TRANGROUP:0E3F                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:maroon">TRANGROUP:0E41                 </span><span style="color:navy">jnz     short </span>TONEXTBATLIN
<span style="color:maroon">TRANGROUP:0E43
TRANGROUP:0E43 </span>SKIPLFEED<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:0E43                 </span><span style="color:navy">call    </span>GETBATBYT
<span style="color:maroon">TRANGROUP:0E46                 </span><span style="color:navy">push    es
</span><span style="color:maroon">TRANGROUP:0E47                 </span><span style="color:navy">mov     es, [ds:</span>Batch<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:0E4B                 </span><span style="color:navy">mov     [byte ptr es:</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [es:BATCHSEGMENT.BatchEOF]
<span style="color:maroon">TRANGROUP:0E51                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:0E52                 </span><span style="color:navy">call    </span>BATCLOSE
<span style="color:maroon">TRANGROUP:0E55                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0E56
TRANGROUP:0E56 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:0E56
TRANGROUP:0E56
TRANGROUP:0E56 </span>proc            BATCLOSE near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0E56                 </span><span style="color:navy">mov     bx, [cs:</span>BATHAND<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0E5B                 </span><span style="color:navy">cmp     bx, </span><span style="color:#ff8000">5
</span><span style="color:black">TRANGROUP:0E5E                 </span><span style="color:navy">jb      short </span><span style="color:gray">CLOSERETURN
</span><span style="color:black">TRANGROUP:0E60                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh         </span>; CLOSE
<span style="color:black">TRANGROUP:0E62                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:0E65
TRANGROUP:0E65 </span><span style="color:gray">CLOSERETURN</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0E65                 </span><span style="color:navy">mov     [ds:</span>In_Batch<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0E6A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0E6A </span>endp            BATCLOSE
<span style="color:black">TRANGROUP:0E6A
TRANGROUP:0E6B
TRANGROUP:0E6B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:0E6B
TRANGROUP:0E6B
TRANGROUP:0E6B </span>proc            BATOPEN near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0E6B                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:0E6C                 </span><span style="color:navy">mov     ds, [ds:</span>Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0E70                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:0E70                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;   </span>; BATCHSEGMENT.BatFile
<span style="color:black">TRANGROUP:0E73                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3D20h
</span><span style="color:black">TRANGROUP:0E76                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:0E79                 </span><span style="color:navy">jb      short </span><span style="color:gray">SETERRDL
</span><span style="color:black">TRANGROUP:0E7B                 </span><span style="color:navy">mov     dx, [ds:</span><span style="color:green">8</span><span style="color:navy">]      </span>; [BATCHSEGMENT.BatSeek]
<span style="color:black">TRANGROUP:0E7F                 </span><span style="color:navy">mov     cx, [ds:</span><span style="color:green">0Ah</span><span style="color:navy">]    </span>; [BATCHSEGMENT.BatSeek+2]
<span style="color:black">TRANGROUP:0E83                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0E84                 </span><span style="color:navy">mov     [es:</span>BATHAND<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:0E88                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:0E8A                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4200h       </span>; (LSEEK&lt;&lt;8)
<span style="color:black">TRANGROUP:0E8D                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:0E90                 </span><span style="color:navy">mov     [es:</span>BATBUFPOS<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:0E97                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0E98 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0E98
TRANGROUP:0E98 </span><span style="color:gray">SETERRDL</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0E98                 </span><span style="color:navy">mov     bx, dx
</span><span style="color:black">TRANGROUP:0E9A                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:0E9D                 </span><span style="color:navy">mov     dx, ax
</span><span style="color:black">TRANGROUP:0E9F                 </span><span style="color:navy">mov     al, [bx]
</span><span style="color:black">TRANGROUP:0EA1                 </span><span style="color:navy">sub     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;   </span>; A = 1, B = 2 ..
<span style="color:black">TRANGROUP:0EA3                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0EA4                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:0EA5                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0EA5 </span>endp            BATOPEN
<span style="color:black">TRANGROUP:0EA5
TRANGROUP:0EA6
TRANGROUP:0EA6 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:0EA6
TRANGROUP:0EA6
TRANGROUP:0EA6 </span>proc            free_batch near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0EA6                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:0EA7                 </span><span style="color:navy">mov     bx, [ds:</span>Next_Batch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0EAB                 </span><span style="color:navy">or      bx, bx
</span><span style="color:black">TRANGROUP:0EAD                 </span><span style="color:navy">jz      short </span><span style="color:gray">fb_ret
</span><span style="color:black">TRANGROUP:0EAF
TRANGROUP:0EAF </span><span style="color:gray">_ClearBatch</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0EAF                 </span><span style="color:navy">mov     es, bx
</span><span style="color:black">TRANGROUP:0EB1                 </span><span style="color:navy">mov     bx, [es:</span><span style="color:green">5</span><span style="color:navy">]      </span>; [es:BATCHSEGMENT.BatForPtr]
<span style="color:black">TRANGROUP:0EB6                 </span><span style="color:navy">cmp     bx, </span><span style="color:#ff8000">0           </span>; is a FOR in progress ?
<span style="color:black">TRANGROUP:0EB9                 </span><span style="color:navy">jz      short </span><span style="color:gray">no_bat_for </span>; no - don&#039;t deallocate
<span style="color:black">TRANGROUP:0EBB                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:0EBC                 </span><span style="color:navy">mov     es, bx
</span><span style="color:black">TRANGROUP:0EBE                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h         </span>; DEALLOC
<span style="color:black">TRANGROUP:0EC0                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:0EC3                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:0EC4
TRANGROUP:0EC4 </span><span style="color:gray">no_bat_for</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0EC4                 </span><span style="color:navy">mov     cl, [es:</span><span style="color:green">1</span><span style="color:navy">]      </span>; [es:BATCHSEGMENT.BatEchoFlag]
<span style="color:black">TRANGROUP:0EC9                 </span><span style="color:navy">mov     bx, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:BATCHSEGMENT.BatLast]
<span style="color:black">TRANGROUP:0ECE                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h         </span>; DEALLOC
<span style="color:black">TRANGROUP:0ED0                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:0ED3                 </span><span style="color:navy">mov     [ds:</span>Batch<span style="color:navy">], bx
</span><span style="color:black">TRANGROUP:0ED7                 </span><span style="color:navy">dec     [ds:</span>Nest<span style="color:navy">]       </span>; word
<span style="color:black">TRANGROUP:0EDB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">_ClearBatch
</span><span style="color:black">TRANGROUP:0EDD                 </span><span style="color:navy">mov     [ds:</span>EchoFlag<span style="color:navy">], cl
</span><span style="color:black">TRANGROUP:0EE1                 </span><span style="color:navy">mov     [ds:</span>Batch<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0EE7
TRANGROUP:0EE7 </span><span style="color:gray">fb_ret</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0EE7                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:0EE8                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:0EE8 </span>endp            free_batch
<span style="color:black">TRANGROUP:0EE8
TRANGROUP:0EE9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0EE9 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR PROMPTBAT
</span><span style="color:black">TRANGROUP:0EE9
TRANGROUP:0EE9 </span>FORTERM<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0EE9                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:0EEA                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:0EEB                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:0EEB                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:0EEC                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:0EED                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:0EED                 </span><span style="color:navy">call    </span>FOROFF
<span style="color:black">TRANGROUP:0EF0                 </span><span style="color:navy">mov     ds, [es:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0EF5                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:0EF5                 </span><span style="color:navy">cmp     [</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FF00h
</span><span style="color:black">TRANGROUP:0EFB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">BAT_CRLF
</span><span style="color:black">TRANGROUP:0EFD                 </span><span style="color:navy">cmp     [</span>Nest<span style="color:navy">], </span><span style="color:#ff8000">0       </span>; word
<span style="color:black">TRANGROUP:0F02                 </span><span style="color:navy">jnz     short </span><span style="color:gray">BAT_CRLF
</span><span style="color:black">TRANGROUP:0F04                 </span><span style="color:navy">mov     [</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:black">TRANGROUP:0F0A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">NOFORP2
</span><span style="color:black">TRANGROUP:0F0C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0F0C
TRANGROUP:0F0C </span><span style="color:gray">BAT_CRLF</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0F0C                 </span><span style="color:navy">test    [</span>EchoFlag<span style="color:navy">], </span><span style="color:green">1   </span>; byte
<span style="color:black">TRANGROUP:0F11                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOFORP2
</span><span style="color:black">TRANGROUP:0F13                 </span><span style="color:navy">test    [</span>Batch<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:black">TRANGROUP:0F19                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOFORP2
</span><span style="color:black">TRANGROUP:0F1B                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:0F1E
TRANGROUP:0F1E </span><span style="color:gray">NOFORP2</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0F1E                 </span><span style="color:navy">jmp     </span>TCOMMAND
<span style="color:black">TRANGROUP:0F21 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0F21
TRANGROUP:0F21 </span><span style="color:gray">_$FOR_EXIT</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0F21                 </span><span style="color:navy">jmp     short </span>FORTERM
<span style="color:black">TRANGROUP:0F23 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0F23
TRANGROUP:0F23 </span><span style="color:gray">FORPROC</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0F23                 </span><span style="color:navy">mov     ax, [</span>ForPtr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:0F26                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:black">TRANGROUP:0F28                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:0F28                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:0F2A                 </span>assume es:nothing
<span style="color:black">TRANGROUP:0F2A                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">4CBh        </span>; offset FOR_INFO.FORDMA
<span style="color:black">TRANGROUP:0F2D                 </span><span style="color:navy">mov     ax, </span><span style="color:green">1A00h
</span><span style="color:black">TRANGROUP:0F30                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET DISK TRANSFER AREA ADDRESS
<span style="color:black">TRANGROUP:0F30                                         </span>; DS:DX -&gt; disk transfer buffer
<span style="color:black">TRANGROUP:0F32
TRANGROUP:0F32 </span><span style="color:gray">FOR_BEGIN</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0F32                 </span><span style="color:navy">cmp     [word ptr ds:</span><span style="color:green">445h</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [FOR_INFO.FOR_EXPAND]
<span style="color:black">TRANGROUP:0F37                 </span><span style="color:navy">jz      short </span><span style="color:gray">FOR_BEGIN1
</span><span style="color:black">TRANGROUP:0F39                 </span><span style="color:navy">inc     [word ptr ds:</span><span style="color:green">447h</span><span style="color:navy">] </span>; [FOR_INFO.FOR_MINARG]
<span style="color:black">TRANGROUP:0F3D
TRANGROUP:0F3D </span><span style="color:gray">FOR_BEGIN1</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0F3D                 </span><span style="color:navy">mov     bx, [ds:</span><span style="color:green">447h</span><span style="color:navy">]   </span>; [FOR_INFO.FOR_MINARG]
<span style="color:black">TRANGROUP:0F41                 </span><span style="color:navy">cmp     bx, [ds:</span><span style="color:green">449h</span><span style="color:navy">]   </span>; [FOR_INFO.FOR_MAXARG]
<span style="color:black">TRANGROUP:0F45                 </span><span style="color:navy">jg      short </span><span style="color:gray">_$FOR_EXIT
</span><span style="color:black">TRANGROUP:0F47                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0F4A                 </span><span style="color:navy">call    </span>argv_calc
<span style="color:black">TRANGROUP:0F4D                 </span><span style="color:navy">mov     cx, [bx+</span><span style="color:#ff8000">3</span><span style="color:navy">]      </span>; [bx+ARGV_ELE.argstartel]
<span style="color:black">TRANGROUP:0F50                 </span><span style="color:navy">mov     dx, [bx]
</span><span style="color:black">TRANGROUP:0F52                 </span><span style="color:navy">test    [byte ptr bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:green">4 </span>; [bx+ARGV_ELE.argflags],4 ; path_sep
<span style="color:black">TRANGROUP:0F56                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FORSUB
</span><span style="color:black">TRANGROUP:0F58                 </span><span style="color:navy">mov     si, [bx]        </span>; [bx+ARGV_ELE.argpointer]
<span style="color:black">TRANGROUP:0F5A                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">28h </span><span style="color:gray">; &#039;(&#039;
</span><span style="color:black">TRANGROUP:0F5C                 </span><span style="color:navy">cmp     [si-</span><span style="color:green">1</span><span style="color:navy">], al
</span><span style="color:black">TRANGROUP:0F5F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FORSUB
</span><span style="color:black">TRANGROUP:0F61                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:0F62                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:black">TRANGROUP:0F64                 </span><span style="color:navy">cmp     [si+</span><span style="color:#ff8000">1</span><span style="color:navy">], al
</span><span style="color:black">TRANGROUP:0F67                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FORSUB
</span><span style="color:black">TRANGROUP:0F69                 </span><span style="color:navy">add     cx, </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:0F6C
TRANGROUP:0F6C </span><span style="color:gray">FORSUB</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0F6C                 </span><span style="color:navy">sub     cx, dx
</span><span style="color:black">TRANGROUP:0F6E                 </span><span style="color:navy">cmp     [word ptr ds:</span><span style="color:green">445h</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [FOR_INFO.FOR_EXPAND]
<span style="color:black">TRANGROUP:0F73                 </span><span style="color:navy">jz      short </span><span style="color:gray">FOR_FIND_NEXT
</span><span style="color:black">TRANGROUP:0F75                 </span><span style="color:navy">test    [byte ptr bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:green">2 </span>; [bx+ARGV_ELE.argflags],2 ; wildcard
<span style="color:black">TRANGROUP:0F79                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FOR_FIND_FIRST
</span><span style="color:black">TRANGROUP:0F7B                 </span><span style="color:navy">mov     cx, [bx+</span><span style="color:#ff8000">5</span><span style="color:navy">]      </span>; [bx+ARGV_ELE.arglen]
<span style="color:black">TRANGROUP:0F7E                 </span><span style="color:navy">jmp     short </span><span style="color:gray">FOR_SMOOSH
</span><span style="color:black">TRANGROUP:0F80 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0F80
TRANGROUP:0F80 </span><span style="color:gray">FOR_FIND_FIRST</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0F80                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:0F81                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:0F83                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4E00h
</span><span style="color:black">TRANGROUP:0F86                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FIND FIRST ASCIZ (FINDFIRST)
<span style="color:black">TRANGROUP:0F86                                         </span>; CX = search attributes
<span style="color:black">TRANGROUP:0F86                                         </span>; DS:DX -&gt; ASCIZ filespec
<span style="color:black">TRANGROUP:0F86                                         </span>; (drive, path, and wildcards allowed)
<span style="color:black">TRANGROUP:0F88                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:0F89                 </span><span style="color:navy">jmp     short </span><span style="color:gray">FOR_RESULT
</span><span style="color:black">TRANGROUP:0F8B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0F8B
TRANGROUP:0F8B </span><span style="color:gray">FOR_FIND_NEXT</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0F8B                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4F00h
</span><span style="color:black">TRANGROUP:0F8E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FIND NEXT ASCIZ (FINDNEXT)
<span style="color:black">TRANGROUP:0F8E                                         </span>; [DTA] = data block from
<span style="color:black">TRANGROUP:0F8E                                         </span>; last AH = 4Eh/4Fh call
<span style="color:black">TRANGROUP:0F90
TRANGROUP:0F90 </span><span style="color:gray">FOR_RESULT</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0F90                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FFFFh      </span>; -1
<span style="color:black">TRANGROUP:0F93                 </span><span style="color:navy">jb      short </span><span style="color:gray">FOR_CHECK
</span><span style="color:black">TRANGROUP:0F95                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0F98
TRANGROUP:0F98 </span><span style="color:gray">FOR_CHECK</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0F98                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">445h</span><span style="color:navy">], ax   </span>; [FOR_INFO.FOR_EXPAND]
<span style="color:black">TRANGROUP:0F9B                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">TRANGROUP:0F9D                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FOR_BEGIN
</span><span style="color:black">TRANGROUP:0F9F
TRANGROUP:0F9F </span><span style="color:gray">FOR_SMOOSH</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0F9F                 </span><span style="color:navy">mov     si, [bx]
</span><span style="color:black">TRANGROUP:0FA1                 </span><span style="color:navy">mov     di, </span><span style="color:#ff8000">44Bh        </span>; offset FOR_INFO.FORBUF
<span style="color:black">TRANGROUP:0FA4                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:0FA6                 </span><span style="color:navy">cmp     [word ptr ds:</span><span style="color:green">445h</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [FOR_INFO.FOR_EXPAND]
<span style="color:black">TRANGROUP:0FAB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FOR_MAKE_COM
</span><span style="color:black">TRANGROUP:0FAD                 </span><span style="color:navy">mov     si, </span><span style="color:#ff8000">4E9h        </span>; offset FOR_INFO.FORDMA+FIND_BUF.PNAME
<span style="color:black">TRANGROUP:0FB0
TRANGROUP:0FB0 </span><span style="color:gray">FOR_MORE</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0FB0                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:0FB3                 </span><span style="color:navy">jz      short </span><span style="color:gray">FOR_MAKE_COM
</span><span style="color:black">TRANGROUP:0FB5                 </span><span style="color:navy">movsb
</span><span style="color:black">TRANGROUP:0FB6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FOR_MORE
</span><span style="color:black">TRANGROUP:0FB8
TRANGROUP:0FB8 </span><span style="color:gray">FOR_MAKE_COM</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0FB8                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:0FBA                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:0FBB                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:0FBD                 </span><span style="color:navy">not     cx
</span><span style="color:black">TRANGROUP:0FBF                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:0FC1                 </span><span style="color:navy">mov     di, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:0FC4                 </span><span style="color:navy">mov     bl, [ds:</span><span style="color:green">444h</span><span style="color:navy">]   </span>; [FOR_INFO.FOR_COM_START]
<span style="color:black">TRANGROUP:0FC8                 </span><span style="color:navy">mov     dh, [ds:</span><span style="color:green">54Bh</span><span style="color:navy">]   </span>; [FOR_INFO.FOR_VAR]
<span style="color:black">TRANGROUP:0FCC                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:0FCD                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:0FCE                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:0FCE                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">0           </span>; FOR_INFO.FOR_ARGS
<span style="color:black">TRANGROUP:0FD1                 </span><span style="color:navy">call    </span>argv_calc
<span style="color:black">TRANGROUP:0FD4                 </span><span style="color:navy">mov     si, [bx+</span><span style="color:#ff8000">9</span><span style="color:navy">]      </span>; [bx+ARGV_ELE.arg_ocomptr]
<span style="color:black">TRANGROUP:0FD7                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:0FD8
TRANGROUP:0FD8 </span><span style="color:gray">FOR_MAKE_LOOP</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0FD8                 </span><span style="color:navy">mov     al, [si]
</span><span style="color:black">TRANGROUP:0FDA                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:0FDB                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">25h </span><span style="color:gray">; &#039;%&#039;
</span><span style="color:black">TRANGROUP:0FDD                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FOR_STOSB
</span><span style="color:black">TRANGROUP:0FDF                 </span><span style="color:navy">cmp     [si], dh
</span><span style="color:black">TRANGROUP:0FE1                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FOR_STOSB
</span><span style="color:black">TRANGROUP:0FE3                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:0FE4                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:0FE5                 </span><span style="color:navy">mov     si, </span><span style="color:#ff8000">44Bh        </span>; offset FOR_INFO.FORBUF
<span style="color:black">TRANGROUP:0FE8
TRANGROUP:0FE8 </span><span style="color:gray">SLOOP</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0FE8                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:0FE9                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:0FEA                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:0FEC                 </span><span style="color:navy">loopne  </span><span style="color:gray">SLOOP
</span><span style="color:black">TRANGROUP:0FEE                 </span><span style="color:navy">dec     di
</span><span style="color:black">TRANGROUP:0FEF                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:0FF0                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:0FF1                 </span><span style="color:navy">jmp     short </span><span style="color:gray">FOR_MAKE_LOOP
</span><span style="color:black">TRANGROUP:0FF3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:0FF3
TRANGROUP:0FF3 </span><span style="color:gray">FOR_STOSB</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:0FF3                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:0FF4                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:0FF5                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:0FF7                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FOR_MAKE_LOOP
</span><span style="color:black">TRANGROUP:0FF9                 </span><span style="color:navy">not     cl
</span><span style="color:black">TRANGROUP:0FFB                 </span><span style="color:navy">mov     [es:</span>COMBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">], cl
</span><span style="color:black">TRANGROUP:1000                 </span><span style="color:navy">mov     ds, [es:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1005                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:1005                 </span><span style="color:navy">test    [</span>EchoFlag<span style="color:navy">], </span><span style="color:green">1   </span>; byte
<span style="color:black">TRANGROUP:100A                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOECHO3
</span><span style="color:black">TRANGROUP:100C                 </span><span style="color:navy">cmp     [</span>NullFlag<span style="color:navy">], </span><span style="color:#ff8000">1   </span>; cmp byte [NullFlag],nullcommand
<span style="color:black">TRANGROUP:1011                 </span><span style="color:navy">jz      short </span><span style="color:gray">NO_CRLF_PR
</span><span style="color:black">TRANGROUP:1013                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:1016
TRANGROUP:1016 </span><span style="color:gray">NO_CRLF_PR</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1016                 </span><span style="color:navy">mov     [</span>NullFlag<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; byte
<span style="color:black">TRANGROUP:101B                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:101C                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:101D                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:101D                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:101E                 </span><span style="color:navy">call    </span>PRINT_PROMPT
<span style="color:black">TRANGROUP:1021                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:1022                 </span><span style="color:navy">mov     [byte ptr es:di-</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1027                 </span><span style="color:navy">mov     [</span>string_ptr_2<span style="color:navy">], (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:102D                 </span><span style="color:navy">mov     dx, offset </span>string_buf_ptr
<span style="color:black">TRANGROUP:1030                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:1033                 </span><span style="color:navy">mov     [byte ptr es:di-</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:1038                 </span><span style="color:navy">jmp     </span><span style="color:gray">DOCOM
</span><span style="color:black">TRANGROUP:103B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:103B
TRANGROUP:103B </span><span style="color:gray">NOECHO3</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:103B                 </span><span style="color:navy">mov     [ds:</span>NullFlag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:black">TRANGROUP:1040                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:1041                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:1042                 </span><span style="color:navy">jmp     </span>DOCOM0
<span style="color:black">TRANGROUP:1042 </span><span style="color:gray">; END OF FUNCTION CHUNK FOR PROMPTBAT
</span><span style="color:maroon">TRANGROUP:1045 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1045
TRANGROUP:1045 </span>FORNESTERRJ<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1045                 </span><span style="color:navy">call    </span>FOROFF
<span style="color:maroon">TRANGROUP:1048                 </span><span style="color:navy">jmp     </span>FORNESTERR
<span style="color:maroon">TRANGROUP:104B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:104B
TRANGROUP:104B </span>FORERRORJ<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:104B                 </span><span style="color:navy">jmp     </span>IFERROR
<span style="color:maroon">TRANGROUP:104E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:104E
TRANGROUP:104E </span>_$FOR<span style="color:navy">:                                  </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:104E                 </span><span style="color:navy">mov     es, [</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1052                 </span>assume es:RESGROUP
<span style="color:maroon">TRANGROUP:1052                 </span><span style="color:navy">cmp     [es:</span>ForFlag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:maroon">TRANGROUP:1058                 </span><span style="color:navy">jnz     short </span>FORNESTERRJ
<span style="color:maroon">TRANGROUP:105A                 </span><span style="color:navy">cmp     [es:</span>PipeFiles<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:maroon">TRANGROUP:1060                 </span><span style="color:navy">jz      short </span>NO_PIPE
<span style="color:maroon">TRANGROUP:1062                 </span><span style="color:navy">call    </span>PIPEDEL
<span style="color:maroon">TRANGROUP:1065
TRANGROUP:1065 </span>NO_PIPE<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1065                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">TRANGROUP:1067                 </span><span style="color:navy">call    </span>NEXTARG
<span style="color:maroon">TRANGROUP:106A                 </span><span style="color:navy">jb      short </span>FORERRORJ
<span style="color:maroon">TRANGROUP:106C                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">25h </span><span style="color:gray">; &#039;%&#039;
</span><span style="color:maroon">TRANGROUP:106E                 </span><span style="color:navy">jnz     short </span>FORERRORJ
<span style="color:maroon">TRANGROUP:1070                 </span><span style="color:navy">mov     bp, ax
</span><span style="color:maroon">TRANGROUP:1072                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:1073                 </span><span style="color:navy">or      al, al
</span><span style="color:maroon">TRANGROUP:1075                 </span><span style="color:navy">jnz     short </span>FORERRORJ
<span style="color:maroon">TRANGROUP:1077                 </span><span style="color:navy">call    </span>NEXTARG
<span style="color:maroon">TRANGROUP:107A                 </span><span style="color:navy">jb      short </span>FORERRORJ
<span style="color:maroon">TRANGROUP:107C                 </span><span style="color:navy">and     ax, </span><span style="color:green">0DFDFh      </span>; ~2020h ; uppercase letters
<span style="color:maroon">TRANGROUP:107F                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">4E49h       </span>; &#039;IN&#039; (NASM syntax)
<span style="color:maroon">TRANGROUP:1082                 </span><span style="color:navy">jnz     short </span>FORERRORJ
<span style="color:maroon">TRANGROUP:1084                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:1085                 </span><span style="color:navy">or      al, al
</span><span style="color:maroon">TRANGROUP:1087                 </span><span style="color:navy">jnz     short </span>FORERRORJ
<span style="color:maroon">TRANGROUP:1089
TRANGROUP:1089 </span>CHECKLPAREN<span style="color:navy">:
</span><span style="color:maroon">TRANGROUP:1089                 </span><span style="color:navy">call    </span>NEXTARG
<span style="color:maroon">TRANGROUP:108C                 </span><span style="color:navy">jb      short </span>FORERRORJ
<span style="color:maroon">TRANGROUP:108E                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">28h </span><span style="color:gray">; &#039;(&#039;
</span><span style="color:maroon">TRANGROUP:1090                 </span><span style="color:navy">jnz     short </span>FORERRORJ
<span style="color:maroon">TRANGROUP:1092                 </span><span style="color:navy">cmp     ah, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1095                 </span><span style="color:navy">jz      short </span>FOR_PAREN_TOKEN
<span style="color:maroon">TRANGROUP:1097                 </span><span style="color:navy">cmp     ah, </span><span style="color:#ff8000">29h </span><span style="color:gray">; &#039;)&#039;
</span><span style="color:maroon">TRANGROUP:109A                 </span><span style="color:navy">jnz     short </span>FOR_LIST_NOT_EMPTY
<span style="color:maroon">TRANGROUP:109C                 </span><span style="color:navy">jmp     </span>FORTERM
<span style="color:maroon">TRANGROUP:109F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:109F
TRANGROUP:109F </span>FOR_LIST_NOT_EMPTY<span style="color:navy">:                     </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:109F                 </span><span style="color:navy">inc     [word ptr bx]   </span>; [bx+ARGV_ELE.argpointer] ; [bx+0]
<span style="color:maroon">TRANGROUP:10A1                 </span><span style="color:navy">dec     [word ptr bx+</span><span style="color:#ff8000">5</span><span style="color:navy">] </span>; [bx+ARGV_ELE.arglen]
<span style="color:maroon">TRANGROUP:10A4                 </span><span style="color:navy">inc     si
</span><span style="color:maroon">TRANGROUP:10A5                 </span><span style="color:navy">jmp     short </span>FOR_LIST
<span style="color:maroon">TRANGROUP:10A7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:10A7
TRANGROUP:10A7 </span>FOR_PAREN_TOKEN<span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:10A7                 </span><span style="color:navy">call    </span>NEXTARG
<span style="color:maroon">TRANGROUP:10AA                 </span><span style="color:navy">jb      short </span>FORERRORJ
<span style="color:maroon">TRANGROUP:10AC                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">29h </span><span style="color:gray">; &#039;)&#039;
</span><span style="color:maroon">TRANGROUP:10AF                 </span><span style="color:navy">jnz     short </span>FOR_LIST
<span style="color:maroon">TRANGROUP:10B1                 </span><span style="color:navy">jmp     </span>FORTERM
<span style="color:maroon">TRANGROUP:10B4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:10B4
TRANGROUP:10B4 </span>FORERORJJ<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:10B4                 </span><span style="color:navy">jmp     </span>IFERROR
<span style="color:maroon">TRANGROUP:10B7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:10B7
TRANGROUP:10B7 </span>FOR_LIST<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:10B7                 </span><span style="color:navy">mov     cx, dx
</span><span style="color:maroon">TRANGROUP:10B9
TRANGROUP:10B9 </span>SKIP_LIST<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:10B9                 </span><span style="color:navy">add     si, [bx+</span><span style="color:#ff8000">5</span><span style="color:navy">]      </span>; [bx+ARGV_ELE.arglen]
<span style="color:maroon">TRANGROUP:10BC                 </span><span style="color:navy">sub     si, </span><span style="color:#ff8000">3
</span><span style="color:maroon">TRANGROUP:10BF                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">29h </span><span style="color:gray">; &#039;)&#039;
</span><span style="color:maroon">TRANGROUP:10C1                 </span><span style="color:navy">cmp     [si], al
</span><span style="color:maroon">TRANGROUP:10C3                 </span><span style="color:navy">jz      short </span>FOR_END_LIST
<span style="color:maroon">TRANGROUP:10C5                 </span><span style="color:navy">call    </span>NEXTARG
<span style="color:maroon">TRANGROUP:10C8                 </span><span style="color:navy">jb      short </span>FORERORJJ
<span style="color:maroon">TRANGROUP:10CA                 </span><span style="color:navy">jmp     short </span>SKIP_LIST
<span style="color:maroon">TRANGROUP:10CC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:10CC
TRANGROUP:10CC </span>FOR_END_LIST<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:10CC                 </span><span style="color:navy">mov     di, dx
</span><span style="color:maroon">TRANGROUP:10CE                 </span><span style="color:navy">mov     [byte ptr si], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:10D1                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">29h </span><span style="color:gray">; &#039;)&#039;   </span>; db &#039;)&#039;,0
<span style="color:maroon">TRANGROUP:10D4                 </span><span style="color:navy">jz      short </span>FOR_DO
<span style="color:maroon">TRANGROUP:10D6                 </span><span style="color:navy">inc     di
</span><span style="color:maroon">TRANGROUP:10D7
TRANGROUP:10D7 </span>FOR_DO<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:10D7                 </span><span style="color:navy">call    </span>NEXTARG
<span style="color:maroon">TRANGROUP:10DA                 </span><span style="color:navy">jb      short </span>FORERORJJ
<span style="color:maroon">TRANGROUP:10DC                 </span><span style="color:navy">and     ax, </span><span style="color:green">0DFDFh      </span>; ~2020h ; uppercase the letters
<span style="color:maroon">TRANGROUP:10DF                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">4F44h       </span>; &#039;DO&#039; (NASM syntax)
<span style="color:maroon">TRANGROUP:10E2                 </span><span style="color:navy">jnz     short </span>FORERORJJ
<span style="color:maroon">TRANGROUP:10E4                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:10E5                 </span><span style="color:navy">or      al, al
</span><span style="color:maroon">TRANGROUP:10E7                 </span><span style="color:navy">jnz     short </span>FORERORJJ
<span style="color:maroon">TRANGROUP:10E9                 </span><span style="color:navy">call    </span>NEXTARG
<span style="color:maroon">TRANGROUP:10EC                 </span><span style="color:navy">jb      short </span>FORERORJJ
<span style="color:maroon">TRANGROUP:10EE                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">TRANGROUP:10EF                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">TRANGROUP:10F0                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">TRANGROUP:10F1                 </span><span style="color:navy">push    dx
</span><span style="color:maroon">TRANGROUP:10F2                 </span><span style="color:navy">push    di
</span><span style="color:maroon">TRANGROUP:10F3                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:10F4                 </span><span style="color:navy">push    bp
</span><span style="color:maroon">TRANGROUP:10F5                 </span><span style="color:navy">call    </span>FREE_TPA
<span style="color:maroon">TRANGROUP:10F8                 </span><span style="color:navy">call    </span>FOROFF
<span style="color:maroon">TRANGROUP:10FB                 </span><span style="color:navy">mov     bx, </span><span style="color:green">264         </span>; FOR_INFO.size-ARG_UNIT.SIZE
<span style="color:maroon">TRANGROUP:10FE                 </span><span style="color:navy">call    </span>SAVE_ARGS
<span style="color:maroon">TRANGROUP:1101                 </span><span style="color:navy">pushf
</span><span style="color:maroon">TRANGROUP:1102                 </span><span style="color:navy">mov     [es:</span>ForPtr<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:1106                 </span><span style="color:navy">call    </span>ALLOC_TPA
<span style="color:maroon">TRANGROUP:1109                 </span><span style="color:navy">popf
</span><span style="color:maroon">TRANGROUP:110A                 </span><span style="color:navy">pop     bp
</span><span style="color:maroon">TRANGROUP:110B                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:110C                 </span><span style="color:navy">pop     di
</span><span style="color:maroon">TRANGROUP:110D                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">TRANGROUP:110E                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">TRANGROUP:110F                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">TRANGROUP:1110                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:1111                 </span><span style="color:navy">jb      short </span>FOR_ALLOC_ERR
<span style="color:maroon">TRANGROUP:1113                 </span><span style="color:navy">push    es
</span><span style="color:maroon">TRANGROUP:1114                 </span><span style="color:navy">push    [es:</span>ForPtr<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1119                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:111A                 </span>assume es:nothing
<span style="color:maroon">TRANGROUP:111A                 </span><span style="color:navy">dec     cx
</span><span style="color:maroon">TRANGROUP:111B                 </span><span style="color:navy">dec     di
</span><span style="color:maroon">TRANGROUP:111C                 </span><span style="color:navy">mov     [es:</span><span style="color:green">447h</span><span style="color:navy">], cx   </span>; [es:FOR_INFO.FOR_MINARG]
<span style="color:maroon">TRANGROUP:1121                 </span><span style="color:navy">mov     [es:</span><span style="color:green">449h</span><span style="color:navy">], di   </span>; [es:FOR_INFO.FOR_MAXARG]
<span style="color:maroon">TRANGROUP:1126                 </span><span style="color:navy">mov     [es:</span><span style="color:green">444h</span><span style="color:navy">], dl   </span>; [es:FOR_INFO.FOR_COM_START]
<span style="color:maroon">TRANGROUP:112B                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">445h</span><span style="color:navy">], </span><span style="color:green">0FFFFh </span>; [es:FOR_INFO.FOR_EXPAND],-1
<span style="color:maroon">TRANGROUP:1132                 </span><span style="color:navy">mov     ax, bp
</span><span style="color:maroon">TRANGROUP:1134                 </span><span style="color:navy">mov     [es:</span><span style="color:green">54Bh</span><span style="color:navy">], ah   </span>; [es:FOR_INFO.FOR_VAR]
<span style="color:maroon">TRANGROUP:1139                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:113A                 </span><span style="color:navy">inc     [es:</span>ForFlag<span style="color:navy">]    </span>; byte
<span style="color:maroon">TRANGROUP:113F                 </span><span style="color:navy">cmp     [es:</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:maroon">TRANGROUP:1145                 </span><span style="color:navy">jnz     short </span>FOR_RET
<span style="color:maroon">TRANGROUP:1147                 </span><span style="color:navy">mov     [es:</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FF00h
</span><span style="color:maroon">TRANGROUP:114E
TRANGROUP:114E </span>FOR_RET<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:114E                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:114F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:114F
TRANGROUP:114F </span>FOR_ALLOC_ERR<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:114F                 </span><span style="color:navy">mov     [</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; ext_msg_class
<span style="color:maroon">TRANGROUP:1154                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:maroon">TRANGROUP:1157                 </span><span style="color:navy">mov     [</span>extend_buf_ptr<span style="color:navy">], </span><span style="color:#ff8000">8 </span>; ERROR_NOT_ENOUGH_MEMORY
<span style="color:maroon">TRANGROUP:115D                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:1160
TRANGROUP:1160 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1160
TRANGROUP:1160
TRANGROUP:1160 </span>proc            NEXTARG near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1160                 </span><span style="color:navy">inc     dx
</span><span style="color:black">TRANGROUP:1161                 </span><span style="color:navy">cmp     dx, [</span>ARG_ARGVCNT<span style="color:navy">] </span>; [ARG+ARG_UNIT.argvcnt]
<span style="color:black">TRANGROUP:1165                 </span><span style="color:navy">jge     short </span><span style="color:gray">NEXTARG_ERR
</span><span style="color:black">TRANGROUP:1167                 </span><span style="color:navy">mov     bx, dx
</span><span style="color:black">TRANGROUP:1169                 </span><span style="color:navy">mov     ax, offset </span>ARG_ARGV
<span style="color:black">TRANGROUP:116C                 </span><span style="color:navy">call    </span>argv_calc
<span style="color:black">TRANGROUP:116F                 </span><span style="color:navy">mov     si, [bx]        </span>; [bx+ARGV_ELE.argpointer] ; mov si,[bx+0]
<span style="color:black">TRANGROUP:1171                 </span><span style="color:navy">lodsw
</span><span style="color:black">TRANGROUP:1172                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:1173                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1174 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1174
TRANGROUP:1174 </span><span style="color:gray">NEXTARG_ERR</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1174                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:1175                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1175 </span>endp            NEXTARG
<span style="color:black">TRANGROUP:1175
</span><span style="color:maroon">TRANGROUP:1176 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1176
TRANGROUP:1176 </span>FORNESTERR<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1176                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:1177                 </span><span style="color:navy">mov     ds, [</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:117B                 </span>assume ds:RESGROUP
<span style="color:maroon">TRANGROUP:117B                 </span><span style="color:navy">mov     dx, offset </span>FORNESTMES_PTR
<span style="color:maroon">TRANGROUP:117E                 </span><span style="color:navy">cmp     [</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FF00h
</span><span style="color:maroon">TRANGROUP:1184                 </span><span style="color:navy">jnz     short </span>NOFORP3
<span style="color:maroon">TRANGROUP:1186                 </span><span style="color:navy">mov     [</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:maroon">TRANGROUP:118C
TRANGROUP:118C </span>NOFORP3<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:118C                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:118D                 </span>assume ds:nothing
<span style="color:maroon">TRANGROUP:118D                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:1190
TRANGROUP:1190 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1190
TRANGROUP:1190
TRANGROUP:1190 </span>proc            FOROFF near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1190                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:1191                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:1192                 </span><span style="color:navy">mov     es, [cs:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1197                 </span>assume es:RESGROUP
<span style="color:black">TRANGROUP:1197                 </span><span style="color:navy">mov     ax, [es:</span>ForPtr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:119B                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">TRANGROUP:119D                 </span><span style="color:navy">jz      short </span><span style="color:gray">FREEDONE
</span><span style="color:black">TRANGROUP:119F                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:11A0                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:11A2                 </span>assume es:nothing
<span style="color:black">TRANGROUP:11A2                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h
</span><span style="color:black">TRANGROUP:11A4                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FREE MEMORY
<span style="color:black">TRANGROUP:11A4                                         </span>; ES = segment address of area to be freed
<span style="color:black">TRANGROUP:11A6                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:11A7
TRANGROUP:11A7 </span><span style="color:gray">FREEDONE</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:11A7                 </span><span style="color:navy">mov     [es:</span>ForPtr<span style="color:navy">], </span><span style="color:#ff8000">0  </span>; word
<span style="color:black">TRANGROUP:11AE                 </span><span style="color:navy">mov     [es:</span>ForFlag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:black">TRANGROUP:11B4                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:11B5                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:11B6                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:11B6 </span>endp            FOROFF
<span style="color:black">TRANGROUP:11B6
</span><span style="color:maroon">TRANGROUP:11B7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:11B7
TRANGROUP:11B7 </span>CATALOG<span style="color:navy">:                                </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:11B7                 </span><span style="color:navy">mov     [ds:</span>nocommas<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:11BC                 </span><span style="color:navy">mov     [ds:</span>bfree_not_kilo<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; use kilobyte if number of bytes is very big
<span style="color:maroon">TRANGROUP:11C1                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">TRANGROUP:11C2                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">TRANGROUP:11C3                 </span><span style="color:navy">push    di
</span><span style="color:maroon">TRANGROUP:11C4                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:11C5                 </span><span style="color:navy">push    es
</span><span style="color:maroon">TRANGROUP:11C6                 </span><span style="color:navy">mov     si, offset </span>no_sep_text ; NO_SEP=1 ; Removes the commas from numbers
<span style="color:maroon">TRANGROUP:11C9                 </span><span style="color:navy">call    </span>find_name_in_environment
<span style="color:maroon">TRANGROUP:11CC                 </span><span style="color:navy">jb      short </span>catalog0
<span style="color:maroon">TRANGROUP:11CE                 </span><span style="color:navy">mov     [ds:</span>bfree_not_kilo<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; no need to kilobyte (short) display
<span style="color:maroon">TRANGROUP:11D3                 </span><span style="color:navy">mov     [ds:</span>nocommas<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; do not use commas for displaying numbers
<span style="color:maroon">TRANGROUP:11D8
TRANGROUP:11D8 </span>catalog0<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:11D8                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:11D9                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:11DA                 </span><span style="color:navy">pop     di
</span><span style="color:maroon">TRANGROUP:11DB                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">TRANGROUP:11DC                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:11DD                 </span><span style="color:navy">call    </span>SetDefaults
<span style="color:maroon">TRANGROUP:11E0                 </span><span style="color:navy">call    </span>ParseEnvironment
<span style="color:maroon">TRANGROUP:11E3                 </span><span style="color:navy">call    </span>ParseCmdLine
<span style="color:maroon">TRANGROUP:11E6                 </span><span style="color:navy">jnb     short </span>catalog1  ; no parse error
<span style="color:maroon">TRANGROUP:11E8                 </span><span style="color:navy">jmp     </span>catErr
<span style="color:maroon">TRANGROUP:11EB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:11EB
TRANGROUP:11EB </span>catalog1<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:11EB                 </span><span style="color:navy">call    </span>SetOptions
<span style="color:maroon">TRANGROUP:11EE                 </span><span style="color:navy">call    </span>SetCollatingTable
<span style="color:maroon">TRANGROUP:11F1                 </span><span style="color:navy">mov     [ds:</span>narrow<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:11F6                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">20h </span>; /Z switch (narrow)
<span style="color:maroon">TRANGROUP:11FC                 </span><span style="color:navy">jz      short </span>catalog1_1
<span style="color:maroon">TRANGROUP:11FE                 </span><span style="color:navy">mov     [ds:</span>narrow<span style="color:navy">], </span><span style="color:#ff8000">0FFh
</span><span style="color:maroon">TRANGROUP:1203                 </span><span style="color:navy">mov     [ds:</span>nocommas<span style="color:navy">], </span><span style="color:#ff8000">0FFh
</span><span style="color:maroon">TRANGROUP:1208
TRANGROUP:1208 </span>catalog1_1<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1208                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">40h </span>; /4 switch
<span style="color:maroon">TRANGROUP:120E                 </span><span style="color:navy">jz      short </span>catalog1_2
<span style="color:maroon">TRANGROUP:1210                 </span><span style="color:navy">mov     [cs:</span>yeardigit4<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; 4 digits year
<span style="color:maroon">TRANGROUP:1216                 </span><span style="color:navy">jmp     short </span>catalog1_3
<span style="color:maroon">TRANGROUP:1218 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1218
TRANGROUP:1218 </span>catalog1_2<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1218                 </span><span style="color:navy">mov     [cs:</span>yeardigit4<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; 2 digits year
<span style="color:maroon">TRANGROUP:121E
TRANGROUP:121E </span>catalog1_3<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:121E                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">8   </span>; mask.bare
<span style="color:maroon">TRANGROUP:1224                 </span><span style="color:navy">jnz     short </span>catalog2
<span style="color:maroon">TRANGROUP:1226                 </span><span style="color:navy">call    </span>OkVolArg
<span style="color:maroon">TRANGROUP:1229                 </span><span style="color:navy">sub     [ds:</span>LeftOnPage<span style="color:navy">], </span><span style="color:#ff8000">2
</span><span style="color:maroon">TRANGROUP:122E                 </span><span style="color:navy">jmp     short </span>catCrunch
<span style="color:maroon">TRANGROUP:1230 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1230
TRANGROUP:1230 </span>catalog2<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1230                 </span><span style="color:navy">call    </span>DisAppend
<span style="color:maroon">TRANGROUP:1233                 </span><span style="color:navy">mov     dx, offset </span>BWDBUF ; DIRBUF
<span style="color:maroon">TRANGROUP:1236                 </span><span style="color:navy">mov     ah, </span><span style="color:green">1Ah
</span><span style="color:maroon">TRANGROUP:1238                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET DISK TRANSFER AREA ADDRESS
<span style="color:maroon">TRANGROUP:1238                                         </span>; DS:DX -&gt; disk transfer buffer
<span style="color:maroon">TRANGROUP:123A                 </span><span style="color:navy">mov     di, </span><span style="color:green">5Dh         </span>; FCB+1
<span style="color:maroon">TRANGROUP:123D                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Fh </span><span style="color:gray">; &#039;?&#039;
</span><span style="color:maroon">TRANGROUP:123F                 </span><span style="color:navy">mov     cx, </span><span style="color:green">11
</span><span style="color:maroon">TRANGROUP:1242                 </span><span style="color:navy">rep stosb
</span><span style="color:maroon">TRANGROUP:1244
TRANGROUP:1244 </span>catCrunch<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1244                 </span><span style="color:navy">call    </span>CrunchPath
<span style="color:maroon">TRANGROUP:1247                 </span><span style="color:navy">jb      short </span>catRecErr
<span style="color:maroon">TRANGROUP:1249                 </span><span style="color:navy">cmp     [ds:</span>COMSW<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; word
<span style="color:maroon">TRANGROUP:124E                 </span><span style="color:navy">jnz     short </span>catRecErr
<span style="color:maroon">TRANGROUP:1250                 </span><span style="color:navy">call    </span>InstallCtrlC
<span style="color:maroon">TRANGROUP:1253                 </span><span style="color:navy">call    </span>ZeroTotals
<span style="color:maroon">TRANGROUP:1256                 </span><span style="color:navy">call    </span>ListDir
<span style="color:maroon">TRANGROUP:1259                 </span><span style="color:navy">jb      short </span>catExtErr
<span style="color:maroon">TRANGROUP:125B                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">4   </span>; mask.subd
<span style="color:maroon">TRANGROUP:1261                 </span><span style="color:navy">jz      short </span>catalog3
<span style="color:maroon">TRANGROUP:1263                 </span><span style="color:navy">call    </span>ListSubds
<span style="color:maroon">TRANGROUP:1266                 </span><span style="color:navy">jb      short </span>catExtErr
<span style="color:maroon">TRANGROUP:1268
TRANGROUP:1268 </span>catalog3<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1268                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">8   </span>; mask.bare
<span style="color:maroon">TRANGROUP:126E                 </span><span style="color:navy">jnz     short </span>catRet
<span style="color:maroon">TRANGROUP:1270                 </span><span style="color:navy">mov     cx, [ds:</span>FileCntTotal<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1274                 </span><span style="color:navy">or      cx, [ds:</span>FileCntTotal<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1278                 </span><span style="color:navy">jcxz    short </span>catNoFiles
<span style="color:maroon">TRANGROUP:127A                 </span><span style="color:navy">call    </span>DisplayTotals
<span style="color:maroon">TRANGROUP:127D                 </span><span style="color:navy">jmp     short </span>catRet
<span style="color:maroon">TRANGROUP:127F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:127F
TRANGROUP:127F </span>catRecErr<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:127F                 </span><span style="color:navy">test    [ds:</span>COMSW<span style="color:navy">], </span><span style="color:green">1   </span>; mask.dev
<span style="color:maroon">TRANGROUP:1285                 </span><span style="color:navy">jnz     short </span>catNoFiles
<span style="color:maroon">TRANGROUP:1287                 </span><span style="color:navy">test    [ds:</span>COMSW<span style="color:navy">], </span><span style="color:green">2   </span>; mask.baddir
<span style="color:maroon">TRANGROUP:128D                 </span><span style="color:navy">jz      short </span>catExtErr
<span style="color:maroon">TRANGROUP:128F                 </span><span style="color:navy">mov     dx, offset </span>badcd_ptr
<span style="color:maroon">TRANGROUP:1292                 </span><span style="color:navy">jmp     short </span>catErr
<span style="color:maroon">TRANGROUP:1294 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1294
TRANGROUP:1294 </span>catNoFiles<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1294                 </span><span style="color:navy">call    </span>DisplayHeader
<span style="color:maroon">TRANGROUP:1297                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2           </span>; ERROR_FILE_NOT_FOUND
<span style="color:maroon">TRANGROUP:129A                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; ext_msg_class
<span style="color:maroon">TRANGROUP:129F                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:maroon">TRANGROUP:12A2                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:12A5                 </span><span style="color:navy">jmp     short </span>catErr
<span style="color:maroon">TRANGROUP:12A7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:12A7
TRANGROUP:12A7 </span>catExtErr<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:12A7                 </span><span style="color:navy">call    </span>Set_Ext_Error_Msg
<span style="color:maroon">TRANGROUP:12AA                 </span><span style="color:navy">cmp     [ds:</span>extend_buf_ptr<span style="color:navy">], </span><span style="color:green">18 </span>; ERROR_NO_MORE_FILES
<span style="color:maroon">TRANGROUP:12AF                 </span><span style="color:navy">jnz     short </span>catErr
<span style="color:maroon">TRANGROUP:12B1                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], </span><span style="color:#ff8000">2 </span>; ERROR_FILE_NOT_FOUND
<span style="color:maroon">TRANGROUP:12B7
TRANGROUP:12B7 </span>catErr<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:12B7                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:12BA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:12BA
TRANGROUP:12BA </span>catRet<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:12BA                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:12BB
TRANGROUP:12BB </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:12BB
TRANGROUP:12BB
TRANGROUP:12BB </span>proc            SetDefaults near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:12BB                 </span><span style="color:navy">mov     di, offset </span>SrcBuf
<span style="color:black">TRANGROUP:12BE                 </span><span style="color:navy">mov     [ds:</span>PathPos<span style="color:navy">], di </span>; PathPos = ptr to pathname
<span style="color:black">TRANGROUP:12C2                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">2Ah </span><span style="color:gray">; &#039;*&#039;   </span>; STAR
<span style="color:black">TRANGROUP:12C4                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:12C5                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0Dh         </span>; END_OF_LINE_IN
<span style="color:black">TRANGROUP:12C7                 </span><span style="color:navy">stosb                   </span>; SrcBuf = &#039;*&#039;,0Dh
<span style="color:black">TRANGROUP:12C8                 </span><span style="color:navy">mov     [ds:</span>PathCnt<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; PathCnt = pathname length
<span style="color:black">TRANGROUP:12CE                 </span><span style="color:navy">xor     ax, ax          </span>; 0
<span style="color:black">TRANGROUP:12D0                 </span><span style="color:navy">mov     [ds:</span>COMSW<span style="color:navy">], ax  </span>; = no error
<span style="color:black">TRANGROUP:12D3                 </span><span style="color:navy">mov     [ds:</span>_Bits<span style="color:navy">], ax  </span>; = options off
<span style="color:black">TRANGROUP:12D6                 </span><span style="color:navy">mov     [ds:</span>DestBuf<span style="color:navy">], al </span>; = no sort
<span style="color:black">TRANGROUP:12D9                 </span><span style="color:navy">mov     [ds:</span>AttrSpecified<span style="color:navy">], </span><span style="color:#ff8000">6 </span>; ATTR_HIDDEN+ATTR_SYSTEM
<span style="color:black">TRANGROUP:12DE                 </span><span style="color:navy">mov     [ds:</span>AttrSelect<span style="color:navy">], al </span>; exclude hidden, system files
<span style="color:black">TRANGROUP:12E1                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:12E1 </span>endp            SetDefaults
<span style="color:black">TRANGROUP:12E1
TRANGROUP:12E2
TRANGROUP:12E2 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:12E2
TRANGROUP:12E2
TRANGROUP:12E2 </span>proc            ParseEnvironment near   <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:12E2                 </span><span style="color:navy">call    </span>GetEnvValue
<span style="color:black">TRANGROUP:12E5                 </span><span style="color:navy">jb      short </span><span style="color:gray">peRet
</span><span style="color:black">TRANGROUP:12E7                 </span><span style="color:navy">call    </span>Parse_Line
<span style="color:black">TRANGROUP:12EA                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh      </span>; -1
<span style="color:black">TRANGROUP:12ED                 </span><span style="color:navy">jz      short </span><span style="color:gray">peRet
</span><span style="color:black">TRANGROUP:12EF                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:12F2                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; util_msg_class ; -1
<span style="color:black">TRANGROUP:12F7                 </span><span style="color:navy">mov     dx, offset </span>errparsenv_ptr
<span style="color:black">TRANGROUP:12FA                 </span><span style="color:navy">call    </span>Printf_Crlf
<span style="color:black">TRANGROUP:12FD
TRANGROUP:12FD </span><span style="color:gray">peRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:12FD                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:12FD </span>endp            ParseEnvironment
<span style="color:black">TRANGROUP:12FD
TRANGROUP:12FE
TRANGROUP:12FE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:12FE
TRANGROUP:12FE
TRANGROUP:12FE </span>proc            ParseCmdLine near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:12FE                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:black">TRANGROUP:1301                 </span><span style="color:navy">call    </span>Parse_Line
<span style="color:black">TRANGROUP:1304                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh      </span>; -1
<span style="color:black">TRANGROUP:1307                 </span><span style="color:navy">jz      short </span><span style="color:gray">pcOk
</span><span style="color:black">TRANGROUP:1309                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:130A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">pcRet
</span><span style="color:black">TRANGROUP:130C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:130C
TRANGROUP:130C </span><span style="color:gray">pcOk</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:130C                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:130D
TRANGROUP:130D </span><span style="color:gray">pcRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:130D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:130D </span>endp            ParseCmdLine
<span style="color:black">TRANGROUP:130D
TRANGROUP:130E
TRANGROUP:130E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:130E
TRANGROUP:130E
TRANGROUP:130E </span>proc            SetCollatingTable near  <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:130E                 </span><span style="color:navy">mov     dx, offset </span>STACK ; INTERNATVARS
<span style="color:black">TRANGROUP:1311                 </span><span style="color:navy">mov     ax, </span><span style="color:green">3800h
</span><span style="color:black">TRANGROUP:1314                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET COUNTRY-DEPENDENT INFORMATION
<span style="color:black">TRANGROUP:1314                                         </span>; get current-country info
<span style="color:black">TRANGROUP:1314                                         </span>; DS:DX -&gt; buffer for returned info
<span style="color:black">TRANGROUP:1316                 </span><span style="color:navy">jb      short </span><span style="color:gray">scNoTable
</span><span style="color:black">TRANGROUP:1318                 </span><span style="color:navy">cmp     bx, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:131B                 </span><span style="color:navy">jz      short </span><span style="color:gray">scNoTable
</span><span style="color:black">TRANGROUP:131D                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">6506h       </span>; (GETEXTCNTRY shl 8) + SETCOLLATE
<span style="color:black">TRANGROUP:1320                 </span><span style="color:navy">mov     bx, </span><span style="color:green">0FFFFh      </span>; -1
<span style="color:black">TRANGROUP:1323                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">5
</span><span style="color:black">TRANGROUP:1326                 </span><span style="color:navy">mov     dx, bx
</span><span style="color:black">TRANGROUP:1328                 </span><span style="color:navy">mov     di, offset </span>CountryPtrId ; CountryPtrInfo
<span style="color:black">TRANGROUP:132B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 4.x internal - COUNTRY-DEPENDENT FILENAME CAPITALIZATION
<span style="color:black">TRANGROUP:132B                                         </span>; AL = function -
<span style="color:black">TRANGROUP:132D                 </span><span style="color:navy">jnb     short </span><span style="color:gray">scRet
</span><span style="color:black">TRANGROUP:132F
TRANGROUP:132F </span><span style="color:gray">scNoTable</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:132F                 </span><span style="color:navy">mov     [ds:</span>CountryPtrId<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1334
TRANGROUP:1334 </span><span style="color:gray">scRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1334                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1334 </span>endp            SetCollatingTable
<span style="color:black">TRANGROUP:1334
TRANGROUP:1335
TRANGROUP:1335 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1335
TRANGROUP:1335
TRANGROUP:1335 </span>proc            SetOptions near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1335                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">8   </span>; mask.bare
<span style="color:black">TRANGROUP:133B                 </span><span style="color:navy">jz      short </span><span style="color:gray">setopts1
</span><span style="color:black">TRANGROUP:133D                 </span><span style="color:navy">and     [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">0FFFEh </span>; ~mask.wide
<span style="color:black">TRANGROUP:1342
TRANGROUP:1342 </span><span style="color:gray">setopts1</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1342                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:1343                 </span><span style="color:navy">mov     ax, </span><span style="color:green">40h         </span>; ROMBIOS_DATA
<span style="color:black">TRANGROUP:1346                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:black">TRANGROUP:1348                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:1348                 </span><span style="color:navy">mov     al, [ds:</span><span style="color:green">84h</span><span style="color:navy">]    </span>; [CRT_Rows]
<span style="color:black">TRANGROUP:134B                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:134C                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:134C                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:134E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">setopts3
</span><span style="color:black">TRANGROUP:1350                 </span><span style="color:navy">mov     al, </span><span style="color:green">25          </span>; LINESPERPAGE
<span style="color:black">TRANGROUP:1352
TRANGROUP:1352 </span><span style="color:gray">setopts3</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1352                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:black">TRANGROUP:1354                 </span><span style="color:navy">inc     al
</span><span style="color:black">TRANGROUP:1356                 </span><span style="color:navy">mov     [ds:</span>LinPerPag<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:1359                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">440Ch       </span>; (IOCTL shl 8)+GENERIC_IOCTL_HANDLE
<span style="color:black">TRANGROUP:135C                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">1           </span>; STDOUT
<span style="color:black">TRANGROUP:135F                 </span><span style="color:navy">mov     ch, </span><span style="color:#ff8000">3           </span>; IOC_SC
<span style="color:black">TRANGROUP:1361                 </span><span style="color:navy">mov     cl, </span><span style="color:green">7Fh         </span>; get_generic
<span style="color:black">TRANGROUP:1363                 </span><span style="color:navy">mov     dx, offset </span>Display_Ioctl
<span style="color:black">TRANGROUP:1366                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL -
<span style="color:black">TRANGROUP:1368                 </span><span style="color:navy">mov     ax, [ds:</span>LinPerPag<span style="color:navy">]
</span><span style="color:black">TRANGROUP:136B                 </span><span style="color:navy">mov     [ds:</span>LeftOnPage<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:136E                 </span><span style="color:navy">mov     [ds:</span>PerLine<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:1373                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">1   </span>; mask.wide
<span style="color:black">TRANGROUP:1379                 </span><span style="color:navy">jz      short </span><span style="color:gray">setopts4
</span><span style="color:black">TRANGROUP:137B                 </span><span style="color:navy">mov     [ds:</span>PerLine<span style="color:navy">], </span><span style="color:#ff8000">5 </span>; WIDEPERLIN
<span style="color:black">TRANGROUP:1380
TRANGROUP:1380 </span><span style="color:gray">setopts4</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1380                 </span><span style="color:navy">cmp     [ds:</span>SrcBuf<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:black">TRANGROUP:1385                 </span><span style="color:navy">jnz     short </span><span style="color:gray">soRet
</span><span style="color:black">TRANGROUP:1387                 </span><span style="color:navy">mov     al, [ds:</span>SrcBuf<span style="color:navy">]
</span><span style="color:black">TRANGROUP:138A                 </span><span style="color:navy">and     al, </span><span style="color:green">0DFh        </span>; not 20h
<span style="color:black">TRANGROUP:138C                 </span><span style="color:navy">sub     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;
</span><span style="color:black">TRANGROUP:138E                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">5Ch</span><span style="color:navy">], al    </span>; [FCB]
<span style="color:black">TRANGROUP:1391
TRANGROUP:1391 </span><span style="color:gray">soRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1391                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1391 </span>endp            SetOptions
<span style="color:black">TRANGROUP:1391
TRANGROUP:1392
TRANGROUP:1392 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1392
TRANGROUP:1392
TRANGROUP:1392 </span>proc            CrunchPath near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1392                 </span><span style="color:navy">call    </span>FileIsDevice
<span style="color:black">TRANGROUP:1395                 </span><span style="color:navy">jnz     short </span><span style="color:gray">crpath1
</span><span style="color:black">TRANGROUP:1397                 </span><span style="color:navy">or      [ds:</span>COMSW<span style="color:navy">], </span><span style="color:green">1   </span>; or byte [COMSW],mask.dev
<span style="color:black">TRANGROUP:139C                 </span><span style="color:navy">jmp     short </span><span style="color:gray">cpErr
</span><span style="color:black">TRANGROUP:139E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:139E
TRANGROUP:139E </span><span style="color:gray">crpath1</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:139E                 </span><span style="color:navy">push    [ds:</span>PathPos<span style="color:navy">]
</span><span style="color:black">TRANGROUP:13A2                 </span><span style="color:navy">mov     [ds:</span>DirFlag<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; -1
<span style="color:black">TRANGROUP:13A7                 </span><span style="color:navy">call    </span>PathCrunch
<span style="color:black">TRANGROUP:13AA                 </span><span style="color:navy">mov     [ds:</span>DirFlag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:black">TRANGROUP:13AF                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:13B0                 </span><span style="color:navy">jb      short </span><span style="color:gray">cpNoDir
</span><span style="color:black">TRANGROUP:13B2                 </span><span style="color:navy">jz      short </span><span style="color:gray">cpRet
</span><span style="color:black">TRANGROUP:13B4                 </span><span style="color:navy">mov     si, [ds:</span>DestTail<span style="color:navy">]
</span><span style="color:black">TRANGROUP:13B8                 </span><span style="color:navy">jmp     short </span><span style="color:gray">cpFile
</span><span style="color:black">TRANGROUP:13BA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:13BA
TRANGROUP:13BA </span><span style="color:gray">cpNoDir</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:13BA                 </span><span style="color:navy">mov     ax, [ds:</span>Msg_Numb<span style="color:navy">]
</span><span style="color:black">TRANGROUP:13BD                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">TRANGROUP:13BF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">cpErr
</span><span style="color:black">TRANGROUP:13C1                 </span><span style="color:navy">cmp     [ds:</span>DestIsDir<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:13C6                 </span><span style="color:navy">jz      short </span><span style="color:gray">cpMaybe
</span><span style="color:black">TRANGROUP:13C8                 </span><span style="color:navy">or      [ds:</span>COMSW<span style="color:navy">], </span><span style="color:green">2   </span>; or byte [COMSW],mask.baddir
<span style="color:black">TRANGROUP:13CD                 </span><span style="color:navy">jmp     short </span><span style="color:gray">cpErr
</span><span style="color:black">TRANGROUP:13CF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:13CF
TRANGROUP:13CF </span><span style="color:gray">cpMaybe</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:13CF                 </span><span style="color:navy">cmp     [byte ptr si+</span><span style="color:#ff8000">1</span><span style="color:navy">], </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039; </span>; COLON_CHAR
<span style="color:black">TRANGROUP:13D3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">crpath2
</span><span style="color:black">TRANGROUP:13D5                 </span><span style="color:navy">lodsw
</span><span style="color:black">TRANGROUP:13D6
TRANGROUP:13D6 </span><span style="color:gray">crpath2</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:13D6                 </span><span style="color:navy">cmp     [word ptr si], </span><span style="color:#ff8000">2E2Eh </span>; &quot;..&quot; ?
<span style="color:black">TRANGROUP:13DA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">cpFile    </span>; if not &quot;..&quot;, treat as a file
<span style="color:black">TRANGROUP:13DC                 </span><span style="color:navy">cmp     [byte ptr si+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:13E0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">cpFile    </span>; or if there&#039;s more after &quot;..&quot;, treat as file
<span style="color:black">TRANGROUP:13E2                 </span><span style="color:navy">or      [ds:</span>COMSW<span style="color:navy">], </span><span style="color:green">2   </span>; or byte [COMSW],mask.baddir
<span style="color:black">TRANGROUP:13E7                 </span><span style="color:navy">jmp     short </span><span style="color:gray">cpErr
</span><span style="color:black">TRANGROUP:13E9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:13E9
TRANGROUP:13E9 </span><span style="color:gray">cpFile</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:13E9                 </span><span style="color:navy">mov     di, </span><span style="color:green">5Ch         </span>; FCB
<span style="color:black">TRANGROUP:13EC                 </span><span style="color:navy">mov     ax, </span><span style="color:green">290Eh       </span>; (Parse_File_Descriptor&lt;&lt;8)|0Eh
<span style="color:black">TRANGROUP:13EF                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - PARSE FILENAME
<span style="color:black">TRANGROUP:13EF                                         </span>; DS:SI -&gt; string to parse
<span style="color:black">TRANGROUP:13EF                                         </span>; ES:DI -&gt; buffer to fill with unopened FCB
<span style="color:black">TRANGROUP:13EF                                         </span>; AL = bit mask to control parsing
<span style="color:black">TRANGROUP:13F1                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:13F2                 </span><span style="color:navy">jmp     short </span><span style="color:gray">cpRet
</span><span style="color:black">TRANGROUP:13F4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:13F4
TRANGROUP:13F4 </span><span style="color:gray">cpErr</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:13F4                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:13F5
TRANGROUP:13F5 </span><span style="color:gray">cpRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:13F5                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:13F5 </span>endp            CrunchPath
<span style="color:black">TRANGROUP:13F5
TRANGROUP:13F6
TRANGROUP:13F6 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:13F6
TRANGROUP:13F6
TRANGROUP:13F6 </span>proc            InstallCtrlC near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:13F6                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:13F7                 </span><span style="color:navy">mov     ax, </span><span style="color:green">3523h
</span><span style="color:black">TRANGROUP:13FA                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET INTERRUPT VECTOR
<span style="color:black">TRANGROUP:13FA                                         </span>; AL = interrupt number
<span style="color:black">TRANGROUP:13FA                                         </span>; Return: ES:BX = value of interrupt vector
<span style="color:black">TRANGROUP:13FC                 </span><span style="color:navy">mov     [word ptr ds:</span>OldCtrlCHandler<span style="color:navy">], bx
</span><span style="color:black">TRANGROUP:1400                 </span><span style="color:navy">mov     [word ptr ds:</span>OldCtrlCHandler<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], es
</span><span style="color:black">TRANGROUP:1404                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:1405                 </span><span style="color:navy">mov     dx, offset </span>CtrlCHandler
<span style="color:black">TRANGROUP:1408                 </span><span style="color:navy">mov     ax, </span><span style="color:green">2523h
</span><span style="color:black">TRANGROUP:140B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET INTERRUPT VECTOR
<span style="color:black">TRANGROUP:140B                                         </span>; AL = interrupt number
<span style="color:black">TRANGROUP:140B                                         </span>; DS:DX = new vector to be used for specified interrupt
<span style="color:black">TRANGROUP:140D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:140D </span>endp            InstallCtrlC
<span style="color:black">TRANGROUP:140D
TRANGROUP:140E
TRANGROUP:140E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:140E
TRANGROUP:140E
TRANGROUP:140E </span>proc            ListSubds near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:140E                 </span><span style="color:navy">call    </span>SetRest1
<span style="color:black">TRANGROUP:1411                 </span><span style="color:navy">mov     bx, offset </span>ScanBuf
<span style="color:black">TRANGROUP:1414
TRANGROUP:1414 </span><span style="color:gray">lsNode</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1414                 </span><span style="color:navy">mov     [byte ptr bx], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1417
TRANGROUP:1417 </span><span style="color:gray">lsLoop</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1417                 </span><span style="color:navy">call    </span>FindNextChild
<span style="color:black">TRANGROUP:141A                 </span><span style="color:navy">jb      short </span><span style="color:gray">lsErr
</span><span style="color:black">TRANGROUP:141C                 </span><span style="color:navy">mov     dx, bx
</span><span style="color:black">TRANGROUP:141E                 </span><span style="color:navy">call    </span>ChangeDir
<span style="color:black">TRANGROUP:1421                 </span><span style="color:navy">jnb     short </span><span style="color:gray">lstsd1
</span><span style="color:black">TRANGROUP:1423                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">3           </span>; ERROR_PATH_NOT_FOUND
<span style="color:black">TRANGROUP:1426                 </span><span style="color:navy">jz      short </span><span style="color:gray">lsLoop
</span><span style="color:black">TRANGROUP:1428                 </span><span style="color:navy">jmp     short </span><span style="color:gray">lsRet
</span><span style="color:black">TRANGROUP:142A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:142A
TRANGROUP:142A </span><span style="color:gray">lstsd1</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:142A                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:142B                 </span><span style="color:navy">call    </span>ListDir
<span style="color:black">TRANGROUP:142E                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:142F                 </span><span style="color:navy">mov     di, bx
</span><span style="color:black">TRANGROUP:1431                 </span><span style="color:navy">mov     cx, </span><span style="color:green">13
</span><span style="color:black">TRANGROUP:1434                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:1436                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:1438                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:1439                 </span><span style="color:navy">mov     bx, di
</span><span style="color:black">TRANGROUP:143B                 </span><span style="color:navy">call    </span><span style="color:gray">lsNode
</span><span style="color:black">TRANGROUP:143E                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:143F                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:1440                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1443                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:1444                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2E2Eh       </span>; &quot;..&quot;
<span style="color:black">TRANGROUP:1447                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:1448                 </span><span style="color:navy">mov     dx, sp
</span><span style="color:black">TRANGROUP:144A                 </span><span style="color:navy">call    </span>ChangeDir
<span style="color:black">TRANGROUP:144D                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:144E                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:144F                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:1450                 </span><span style="color:navy">jb      short </span><span style="color:gray">lsRet
</span><span style="color:black">TRANGROUP:1452                 </span><span style="color:navy">jmp     short </span><span style="color:gray">lsLoop
</span><span style="color:black">TRANGROUP:1454 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1454
TRANGROUP:1454 </span><span style="color:gray">lsErr</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1454                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:1457                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">2           </span>; ERROR_FILE_NOT_FOUND
<span style="color:black">TRANGROUP:145A                 </span><span style="color:navy">jz      short </span><span style="color:gray">lsRet
</span><span style="color:black">TRANGROUP:145C                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">18          </span>; ERROR_NO_MORE_FILES
<span style="color:black">TRANGROUP:145F                 </span><span style="color:navy">jz      short </span><span style="color:gray">lsRet
</span><span style="color:black">TRANGROUP:1461                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:1462
TRANGROUP:1462 </span><span style="color:gray">lsRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1462                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1462 </span>endp            ListSubds
<span style="color:black">TRANGROUP:1462
TRANGROUP:1463
TRANGROUP:1463 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1463
TRANGROUP:1463
TRANGROUP:1463 </span>proc            CheckChild near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1463                 </span><span style="color:navy">test    [ds:</span>BWDBUF<span style="color:navy">+</span><span style="color:green">15h</span><span style="color:navy">], </span><span style="color:green">10h </span>; [DIRBUF+FIND_BUF.ATTR],ATTR_DIRECTORY
<span style="color:black">TRANGROUP:1468                 </span><span style="color:navy">jz      short </span><span style="color:gray">ccRet
</span><span style="color:black">TRANGROUP:146A                 </span><span style="color:navy">cmp     [ds:</span>BWDBUF<span style="color:navy">+</span><span style="color:green">1Eh</span><span style="color:navy">], </span><span style="color:#ff8000">2Eh </span><span style="color:gray">; &#039;.&#039; </span>; [DIRBUF+FIND_BUF.PNAME],&#039;.&#039;
<span style="color:black">TRANGROUP:146F                 </span><span style="color:navy">jz      short </span><span style="color:gray">ccRet
</span><span style="color:black">TRANGROUP:1471                 </span><span style="color:navy">mov     si, (offset </span>BWDBUF<span style="color:navy">+</span><span style="color:green">1Eh</span><span style="color:navy">) </span>; offset DIRBUF+FIND_BUF.PNAME
<span style="color:black">TRANGROUP:1474                 </span><span style="color:navy">mov     di, bx
</span><span style="color:black">TRANGROUP:1476                 </span><span style="color:navy">call    </span>CmpAscz
<span style="color:black">TRANGROUP:1479                 </span><span style="color:navy">jbe     short </span><span style="color:gray">ccRet
</span><span style="color:black">TRANGROUP:147B                 </span><span style="color:navy">mov     si, (offset </span>BWDBUF<span style="color:navy">+</span><span style="color:green">1Eh</span><span style="color:navy">) </span>; offset DIRBUF+FIND_BUF.PNAME
<span style="color:black">TRANGROUP:147E                 </span><span style="color:navy">mov     di, bp
</span><span style="color:black">TRANGROUP:1480                 </span><span style="color:navy">call    </span>CmpAscz
<span style="color:black">TRANGROUP:1483                 </span><span style="color:navy">jnb     short </span><span style="color:gray">ccRet
</span><span style="color:black">TRANGROUP:1485                 </span><span style="color:navy">mov     si, (offset </span>BWDBUF<span style="color:navy">+</span><span style="color:green">1Eh</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:1488                 </span><span style="color:navy">mov     di, bp
</span><span style="color:black">TRANGROUP:148A                 </span><span style="color:navy">mov     cx, </span><span style="color:green">13
</span><span style="color:black">TRANGROUP:148D                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:148F
TRANGROUP:148F </span><span style="color:gray">ccRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:148F                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:148F </span>endp            CheckChild
<span style="color:black">TRANGROUP:148F
TRANGROUP:1490
TRANGROUP:1490 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1490
TRANGROUP:1490
TRANGROUP:1490 </span>proc            CmpEntry near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1490                 </span><span style="color:navy">mov     si, offset </span>DestBuf
<span style="color:black">TRANGROUP:1493
TRANGROUP:1493 </span><span style="color:gray">ceLoop</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1493                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:1495                 </span><span style="color:navy">mov     al, [si]
</span><span style="color:black">TRANGROUP:1497                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:1499                 </span><span style="color:navy">jz      short </span><span style="color:gray">ceDone
</span><span style="color:black">TRANGROUP:149B                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:149C                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:149D                 </span><span style="color:navy">dec     al
</span><span style="color:black">TRANGROUP:149F                 </span><span style="color:navy">shl     al, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:14A1                 </span><span style="color:navy">mov     si, ax
</span><span style="color:black">TRANGROUP:14A3                 </span><span style="color:navy">mov     ax, [cs:</span>FieldCmps<span style="color:navy">+si]
</span><span style="color:black">TRANGROUP:14A8                 </span><span style="color:navy">jb      short </span><span style="color:gray">ceDn
</span><span style="color:black">TRANGROUP:14AA                 </span><span style="color:navy">call    ax
</span><span style="color:black">TRANGROUP:14AC                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ceNs
</span><span style="color:black">TRANGROUP:14AE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:14AE
TRANGROUP:14AE </span><span style="color:gray">ceDn</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:14AE                 </span><span style="color:navy">xchg    bx, bp
</span><span style="color:black">TRANGROUP:14B0                 </span><span style="color:navy">call    ax
</span><span style="color:black">TRANGROUP:14B2                 </span><span style="color:navy">xchg    bx, bp
</span><span style="color:black">TRANGROUP:14B4
TRANGROUP:14B4 </span><span style="color:gray">ceNs</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:14B4                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:14B5                 </span><span style="color:navy">jz      short </span><span style="color:gray">ceLoop
</span><span style="color:black">TRANGROUP:14B7
TRANGROUP:14B7 </span><span style="color:gray">ceDone</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:14B7                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:14B7 </span>endp            CmpEntry
<span style="color:black">TRANGROUP:14B7
TRANGROUP:14B7 </span><span style="color:gray">; ---------------------------------------------------------------------------
TRANGROUP:14B8 </span>FieldCmps       <span style="color:navy">dw offset </span>CmpName       <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:14BA                 </span><span style="color:navy">dw offset </span>CmpExt
<span style="color:gray">TRANGROUP:14BC                 </span><span style="color:navy">dw offset </span>CmpTime
<span style="color:gray">TRANGROUP:14BE                 </span><span style="color:navy">dw offset </span>CmpSize
<span style="color:gray">TRANGROUP:14C0                 </span><span style="color:navy">dw offset </span>CmpType
<span style="color:maroon">TRANGROUP:14C2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:14C2
TRANGROUP:14C2 </span>CmpName<span style="color:navy">:                                </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:14C2                 </span><span style="color:navy">mov     si, bx
</span><span style="color:maroon">TRANGROUP:14C4                 </span><span style="color:navy">mov     di, bp
</span><span style="color:maroon">TRANGROUP:14C6                 </span><span style="color:navy">add     si, </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:14C9                 </span><span style="color:navy">add     di, </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:14CC                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">8
</span><span style="color:maroon">TRANGROUP:14CF                 </span><span style="color:navy">jmp     short </span>CmpStr
<span style="color:maroon">TRANGROUP:14D1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:14D1
TRANGROUP:14D1 </span>CmpExt<span style="color:navy">:                                 </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:14D1                 </span><span style="color:navy">mov     si, bx
</span><span style="color:maroon">TRANGROUP:14D3                 </span><span style="color:navy">mov     di, bp
</span><span style="color:maroon">TRANGROUP:14D5                 </span><span style="color:navy">add     si, </span><span style="color:#ff8000">9
</span><span style="color:maroon">TRANGROUP:14D8                 </span><span style="color:navy">add     di, </span><span style="color:#ff8000">9
</span><span style="color:maroon">TRANGROUP:14DB                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">3
</span><span style="color:maroon">TRANGROUP:14DE
TRANGROUP:14DE </span>CmpStr<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:14DE                 </span><span style="color:navy">cmp     [ds:</span>CountryPtrId<span style="color:navy">], </span><span style="color:#ff8000">6 </span>; byte
<span style="color:maroon">TRANGROUP:14E3                 </span><span style="color:navy">jnz     short </span>cnNoCollTable
<span style="color:maroon">TRANGROUP:14E5                 </span><span style="color:navy">push    bp
</span><span style="color:maroon">TRANGROUP:14E6                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">TRANGROUP:14E7                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:14E8                 </span><span style="color:navy">lds     bx, [ds:</span>CountryPtr<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:14EC                 </span><span style="color:navy">mov     bp, [bx]
</span><span style="color:maroon">TRANGROUP:14EE                 </span><span style="color:navy">inc     bx
</span><span style="color:maroon">TRANGROUP:14EF                 </span><span style="color:navy">inc     bx
</span><span style="color:maroon">TRANGROUP:14F0                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:maroon">TRANGROUP:14F2                 </span><span style="color:navy">xor     dh, dh
</span><span style="color:maroon">TRANGROUP:14F4
TRANGROUP:14F4 </span>cnNextChar<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:14F4                 </span><span style="color:navy">mov     al, [es:di]
</span><span style="color:maroon">TRANGROUP:14F7                 </span><span style="color:navy">inc     di
</span><span style="color:maroon">TRANGROUP:14F8                 </span><span style="color:navy">test    dh, dh
</span><span style="color:maroon">TRANGROUP:14FA                 </span><span style="color:navy">jz      short </span>cn1
<span style="color:maroon">TRANGROUP:14FC                 </span><span style="color:navy">xor     dh, dh
</span><span style="color:maroon">TRANGROUP:14FE                 </span><span style="color:navy">mov     dl, al
</span><span style="color:maroon">TRANGROUP:1500                 </span><span style="color:navy">lods    [byte ptr es:si]
</span><span style="color:maroon">TRANGROUP:1502                 </span><span style="color:navy">jmp     short </span>cn4
<span style="color:maroon">TRANGROUP:1504 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1504
TRANGROUP:1504 </span>cn1<span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1504                 </span><span style="color:navy">call    </span>testkanj
<span style="color:maroon">TRANGROUP:1507                 </span><span style="color:navy">jz      short </span>cn2
<span style="color:maroon">TRANGROUP:1509                 </span><span style="color:navy">mov     dh, </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:150B
TRANGROUP:150B </span>cn2<span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:150B                 </span><span style="color:navy">cmp     ax, bp
</span><span style="color:maroon">TRANGROUP:150D                 </span><span style="color:navy">jnb     short </span>cn3
<span style="color:maroon">TRANGROUP:150F                 </span><span style="color:navy">xlat
</span><span style="color:maroon">TRANGROUP:1510
TRANGROUP:1510 </span>cn3<span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1510                 </span><span style="color:navy">mov     dl, al
</span><span style="color:maroon">TRANGROUP:1512                 </span><span style="color:navy">lods    [byte ptr es:si]
</span><span style="color:maroon">TRANGROUP:1514                 </span><span style="color:navy">cmp     ax, bp
</span><span style="color:maroon">TRANGROUP:1516                 </span><span style="color:navy">jnb     short </span>cn4
<span style="color:maroon">TRANGROUP:1518                 </span><span style="color:navy">xlat
</span><span style="color:maroon">TRANGROUP:1519
TRANGROUP:1519 </span>cn4<span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1519                 </span><span style="color:navy">cmp     al, dl
</span><span style="color:maroon">TRANGROUP:151B                 </span><span style="color:navy">loope   </span>cnNextChar
<span style="color:maroon">TRANGROUP:151D                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:151E                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">TRANGROUP:151F                 </span><span style="color:navy">pop     bp
</span><span style="color:maroon">TRANGROUP:1520                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:1521 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1521
TRANGROUP:1521 </span>cnNoCollTable<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1521                 </span><span style="color:navy">repe cmps [byte ptr es:si], [byte ptr es:di] </span>;
<span style="color:maroon">TRANGROUP:1521                                         </span>; repe    ; 0F3h
<span style="color:maroon">TRANGROUP:1521                                         </span>; es      ; 26h
<span style="color:maroon">TRANGROUP:1521                                         </span>; cmpsb   ; 0A6h
<span style="color:maroon">TRANGROUP:1521                                         </span>; retn    ; 0C3h
<span style="color:maroon">TRANGROUP:1524                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:1525 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1525
TRANGROUP:1525 </span>CmpTime<span style="color:navy">:                                </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:1525                 </span><span style="color:navy">mov     si, bx
</span><span style="color:maroon">TRANGROUP:1527                 </span><span style="color:navy">mov     di, bp
</span><span style="color:maroon">TRANGROUP:1529                 </span><span style="color:navy">add     si, </span><span style="color:green">16
</span><span style="color:maroon">TRANGROUP:152C                 </span><span style="color:navy">add     di, </span><span style="color:green">16
</span><span style="color:maroon">TRANGROUP:152F                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">4
</span><span style="color:maroon">TRANGROUP:1532                 </span><span style="color:navy">std
</span><span style="color:maroon">TRANGROUP:1533                 </span><span style="color:navy">repe cmps [byte ptr es:si], [byte ptr es:di] </span>;
<span style="color:maroon">TRANGROUP:1533                                         </span>; repe  ; 0F3h
<span style="color:maroon">TRANGROUP:1533                                         </span>; es    ; 26h
<span style="color:maroon">TRANGROUP:1533                                         </span>; cmpsb ; 0A6h
<span style="color:maroon">TRANGROUP:1536                 </span><span style="color:navy">cld
</span><span style="color:maroon">TRANGROUP:1537                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:1538 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1538
TRANGROUP:1538 </span>CmpSize<span style="color:navy">:                                </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:1538                 </span><span style="color:navy">mov     si, bx
</span><span style="color:maroon">TRANGROUP:153A                 </span><span style="color:navy">mov     di, bp
</span><span style="color:maroon">TRANGROUP:153C                 </span><span style="color:navy">add     si, </span><span style="color:green">20
</span><span style="color:maroon">TRANGROUP:153F                 </span><span style="color:navy">add     di, </span><span style="color:green">20
</span><span style="color:maroon">TRANGROUP:1542                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">4
</span><span style="color:maroon">TRANGROUP:1545                 </span><span style="color:navy">std
</span><span style="color:maroon">TRANGROUP:1546                 </span><span style="color:navy">repe cmps [byte ptr es:si], [byte ptr es:di]
</span><span style="color:maroon">TRANGROUP:1549                 </span><span style="color:navy">cld
</span><span style="color:maroon">TRANGROUP:154A                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:154B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:154B
TRANGROUP:154B </span>CmpType<span style="color:navy">:                                </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:154B                 </span><span style="color:navy">mov     al, [es:bx+</span><span style="color:#ff8000">0Ch</span><span style="color:navy">] </span>; es:[bx].fileattr
<span style="color:maroon">TRANGROUP:154F                 </span><span style="color:navy">mov     ah, [es:bp+</span><span style="color:#ff8000">0Ch</span><span style="color:navy">] </span>; es:[bp].fileattr
<span style="color:maroon">TRANGROUP:1553                 </span><span style="color:navy">and     ax, </span><span style="color:green">1010h       </span>; (ATTR_DIRECTORY&lt;&lt;8)+ATTR_DIRECTORY
<span style="color:maroon">TRANGROUP:1556                 </span><span style="color:navy">cmp     ah, al
</span><span style="color:maroon">TRANGROUP:1558                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1559
TRANGROUP:1559 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1559
TRANGROUP:1559
TRANGROUP:1559 </span>proc            DefaultAttr near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1559                 </span><span style="color:navy">mov     [ds:</span>AttrSpecified<span style="color:navy">], </span><span style="color:#ff8000">6 </span>; ATTR_HIDDEN+ATTR_SYSTEM
<span style="color:black">TRANGROUP:155E                 </span><span style="color:navy">mov     [ds:</span>AttrSelect<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; H and S must be off
<span style="color:black">TRANGROUP:1563                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:1564                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1564 </span>endp            DefaultAttr
<span style="color:black">TRANGROUP:1564
TRANGROUP:1565
TRANGROUP:1565 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1565
TRANGROUP:1565
TRANGROUP:1565 </span>proc            DisplayTotals near      <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1565                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">4   </span>; mask.subd
<span style="color:black">TRANGROUP:156B                 </span><span style="color:navy">jz      short </span><span style="color:gray">dtFree
</span><span style="color:black">TRANGROUP:156D                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:1570                 </span><span style="color:navy">call    </span>UseLine
<span style="color:black">TRANGROUP:1573                 </span><span style="color:navy">mov     dx, offset </span>total_ptr ; MSG_1080
<span style="color:black">TRANGROUP:1576                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:1579                 </span><span style="color:navy">call    </span>UseLine
<span style="color:black">TRANGROUP:157C                 </span><span style="color:navy">mov     ax, [ds:</span>FileCntTotal<span style="color:navy">]
</span><span style="color:black">TRANGROUP:157F                 </span><span style="color:navy">mov     si, offset </span>FileSizTotal
<span style="color:black">TRANGROUP:1582                 </span><span style="color:navy">mov     di, offset </span>FileSiz
<span style="color:black">TRANGROUP:1585                 </span><span style="color:navy">movsw
</span><span style="color:black">TRANGROUP:1586                 </span><span style="color:navy">movsw
</span><span style="color:black">TRANGROUP:1587                 </span><span style="color:navy">movsw
</span><span style="color:black">TRANGROUP:1588                 </span><span style="color:navy">movsw
</span><span style="color:black">TRANGROUP:1589                 </span><span style="color:navy">mov     dx, [ds:</span>FileCntTotal<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:158D                 </span><span style="color:navy">call    </span>DisplayCntSiz
<span style="color:black">TRANGROUP:1590
TRANGROUP:1590 </span><span style="color:gray">dtFree</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1590                 </span><span style="color:navy">call    </span>GetDriveLtr
<span style="color:black">TRANGROUP:1593                 </span><span style="color:navy">mov     [byte ptr ds:</span>efs_drive<span style="color:navy">], al </span><span style="color:gray">; &quot;C:\\&quot;
</span><span style="color:black">TRANGROUP:1596                 </span><span style="color:navy">mov     dx, offset </span>efs_drive <span style="color:gray">; &quot;C:\\&quot;
</span><span style="color:black">TRANGROUP:1599                 </span><span style="color:navy">mov     di, offset </span>efs_buffer
<span style="color:black">TRANGROUP:159C                 </span><span style="color:navy">mov     cx, </span><span style="color:green">44
</span><span style="color:black">TRANGROUP:159F                 </span><span style="color:navy">mov     [es:di], cx
</span><span style="color:black">TRANGROUP:15A2                 </span><span style="color:navy">mov     [word ptr es:di+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:15A8                 </span><span style="color:navy">mov     ax, </span><span style="color:green">7303h       </span>; GET EXTENDED FREE SPACE ON DRIVE
<span style="color:black">TRANGROUP:15A8                                         </span>; DS:DX -&gt; ASCIZ string for drive (&quot;C:\&quot; or &quot;\\SERVER\Share&quot;)
<span style="color:black">TRANGROUP:15A8                                         </span>; ES:DI -&gt; buffer for extended free space structure
<span style="color:black">TRANGROUP:15A8                                         </span>; CX = length of buffer for extended free space
<span style="color:black">TRANGROUP:15AB                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS -
<span style="color:black">TRANGROUP:15AB                                         </span>;
<span style="color:black">TRANGROUP:15AB                                         </span>; Return:
<span style="color:black">TRANGROUP:15AB                                         </span>; CF clear if successful
<span style="color:black">TRANGROUP:15AB                                         </span>; ES:DI buffer filled
<span style="color:black">TRANGROUP:15AB                                         </span>; CF set on error
<span style="color:black">TRANGROUP:15AB                                         </span>; AX = error code
<span style="color:black">TRANGROUP:15AB                                         </span>;
<span style="color:black">TRANGROUP:15AB                                         </span>; Format of extended free space structure:
<span style="color:black">TRANGROUP:15AB                                         </span>;
<span style="color:black">TRANGROUP:15AB                                         </span>; Offset  Size    Description
<span style="color:black">TRANGROUP:15AB                                         </span>; 00h    WORD    (ret) size of returned structure
<span style="color:black">TRANGROUP:15AB                                         </span>; 02h    WORD    (call) structure version (0000h)
<span style="color:black">TRANGROUP:15AB                                         </span>;                (ret) actual structure version (0000h)
<span style="color:black">TRANGROUP:15AB                                         </span>; 04h    DWORD   number of sectors per cluster
<span style="color:black">TRANGROUP:15AB                                         </span>;                (with adjustment for compression)
<span style="color:black">TRANGROUP:15AB                                         </span>; 08h    DWORD   number of bytes per sector
<span style="color:black">TRANGROUP:15AB                                         </span>; 0Ch    DWORD   number of available clusters
<span style="color:black">TRANGROUP:15AB                                         </span>; 10h    DWORD   total number of clusters on the drive
<span style="color:black">TRANGROUP:15AB                                         </span>; 14h    DWORD   number of physical sectors available on the drive,
<span style="color:black">TRANGROUP:15AB                                         </span>;                without adjustment for compression
<span style="color:black">TRANGROUP:15AB                                         </span>; 18h    DWORD   total number of physical sectors on the drive,
<span style="color:black">TRANGROUP:15AB                                         </span>;                without adjustment for compression
<span style="color:black">TRANGROUP:15AB                                         </span>; 1Ch    DWORD   number of available allocation units,
<span style="color:black">TRANGROUP:15AB                                         </span>;                without adjustment for compression
<span style="color:black">TRANGROUP:15AB                                         </span>; 20h    DWORD   total allocation units,
<span style="color:black">TRANGROUP:15AB                                         </span>;                without adjustment for compression
<span style="color:black">TRANGROUP:15AB                                         </span>; 24h  8 BYTEs   reserved
<span style="color:black">TRANGROUP:15AD                 </span><span style="color:navy">mov     cx, ax          </span>; error code (cf=1) or (cf=0) efs structure size (44)
<span style="color:black">TRANGROUP:15AF                 </span><span style="color:navy">mov     bx, [es:di+</span><span style="color:#ff8000">8</span><span style="color:navy">]   </span>; bytes per sector
<span style="color:black">TRANGROUP:15B3                 </span><span style="color:navy">mov     ax, [es:di+</span><span style="color:#ff8000">14h</span><span style="color:navy">] </span>; number of sectors available
<span style="color:black">TRANGROUP:15B7                 </span><span style="color:navy">mov     dx, [es:di+</span><span style="color:#ff8000">16h</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:15BB                 </span><span style="color:navy">jb      short </span><span style="color:gray">get_efs_err
</span><span style="color:black">TRANGROUP:15BD                 </span><span style="color:navy">or      cl, cl
</span><span style="color:black">TRANGROUP:15BF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">dtFree_1  </span>; cl = 44 (IBMDOS 7.1 Kernel, INT 21h, AX=7303h return value)
<span style="color:black">TRANGROUP:15C1
TRANGROUP:15C1 </span><span style="color:gray">get_efs_err</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:15C1                 </span><span style="color:navy">mov     ah, </span><span style="color:green">36h
</span><span style="color:black">TRANGROUP:15C3                 </span><span style="color:navy">mov     dl, [ds:</span><span style="color:green">5Ch</span><span style="color:navy">]    </span>; [FCB]
<span style="color:black">TRANGROUP:15C7                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET DISK SPACE
<span style="color:black">TRANGROUP:15C7                                         </span>; DL = drive code (0 = default, 1 = A, 2 = B, etc.)
<span style="color:black">TRANGROUP:15C9                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh      </span>; ax = sectors per cluster
<span style="color:black">TRANGROUP:15CC                 </span><span style="color:navy">jz      short </span><span style="color:gray">dtRet     </span>; invalid drive
<span style="color:black">TRANGROUP:15CE                 </span><span style="color:navy">mul     cx              </span>; * bytes per sectors
<span style="color:black">TRANGROUP:15CE                                         </span>; dx:ax = bytes per cluster
<span style="color:black">TRANGROUP:15CE                                         </span>; bx = free clusters
<span style="color:black">TRANGROUP:15D0
TRANGROUP:15D0 </span><span style="color:gray">dtFree_1</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:15D0                 </span><span style="color:navy">mov     cx, dx          </span>; hw of free sectors
<span style="color:black">TRANGROUP:15D2                 </span><span style="color:navy">mul     bx              </span>; lw of free sectors * bytes per sector
<span style="color:black">TRANGROUP:15D4                 </span><span style="color:navy">xchg    ax, cx
</span><span style="color:black">TRANGROUP:15D5                 </span><span style="color:navy">xchg    dx, bx
</span><span style="color:black">TRANGROUP:15D7                 </span><span style="color:navy">mul     dx
</span><span style="color:black">TRANGROUP:15D9                 </span><span style="color:navy">add     ax, bx
</span><span style="color:black">TRANGROUP:15DB                 </span><span style="color:navy">adc     dx, </span><span style="color:#ff8000">0           </span>; dx:ax:cx = free bytes
<span style="color:black">TRANGROUP:15DE                 </span><span style="color:navy">or      dx, dx
</span><span style="color:black">TRANGROUP:15E0                 </span><span style="color:navy">jz      short </span><span style="color:gray">dtFree_2
</span><span style="color:black">TRANGROUP:15E2                 </span><span style="color:navy">mov     cl, ch          </span>; prints free space as kilobytes
<span style="color:black">TRANGROUP:15E4                 </span><span style="color:navy">mov     ch, al          </span>; save al
<span style="color:black">TRANGROUP:15E6                 </span><span style="color:navy">mov     al, ah          </span>; / 256
<span style="color:black">TRANGROUP:15E8                 </span><span style="color:navy">mov     ah, dl
</span><span style="color:black">TRANGROUP:15EA                 </span><span style="color:navy">ror     dh, </span><span style="color:green">1           </span>; / 2 (= free bytes / 512)
<span style="color:black">TRANGROUP:15EC                 </span><span style="color:navy">rcr     ax, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:15EE                 </span><span style="color:navy">rcr     cx, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:15F0                 </span><span style="color:navy">ror     dh, </span><span style="color:green">1           </span>; / 2 (= free bytes / 1024)
<span style="color:black">TRANGROUP:15F2                 </span><span style="color:navy">rcr     ax, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:15F4                 </span><span style="color:navy">rcr     cx, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:15F6                 </span><span style="color:navy">mov     dl, </span><span style="color:#ff8000">0FFh        </span>; dx &gt; 0
<span style="color:black">TRANGROUP:15F8
TRANGROUP:15F8 </span><span style="color:gray">dtFree_2</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:15F8                 </span><span style="color:navy">mov     [word ptr ds:</span>Bytes_Free<span style="color:navy">], cx
</span><span style="color:black">TRANGROUP:15FC                 </span><span style="color:navy">mov     [word ptr ds:</span>Bytes_Free<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:15FF                 </span><span style="color:navy">or      dx, dx          </span>; is dx &gt; 0 ?
<span style="color:black">TRANGROUP:1601                 </span><span style="color:navy">jz      short </span><span style="color:gray">dtFree_3  </span>; no
<span style="color:black">TRANGROUP:1603                 </span><span style="color:navy">mov     dx, offset </span>kbytesf_ptr ; MSG_1106 (&quot;.. K bytes free&quot; msg)
<span style="color:black">TRANGROUP:1603                                         </span>; 30 digits, long binary do decimal
<span style="color:black">TRANGROUP:1606                 </span><span style="color:navy">cmp     [ds:</span>bfree_not_kilo<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:160B                 </span><span style="color:navy">jz      short </span><span style="color:gray">dtFree_5
</span><span style="color:black">TRANGROUP:160D                 </span><span style="color:navy">mov     dx, offset </span>kbytesf_n_ptr ; MSG_1106 (narrow)
<span style="color:black">TRANGROUP:160D                                         </span>; &quot;.. K bytes free&quot; msg, 28 digits
<span style="color:black">TRANGROUP:1610                 </span><span style="color:navy">jmp     short </span><span style="color:gray">dtFree_5
</span><span style="color:black">TRANGROUP:1612 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1612
TRANGROUP:1612 </span><span style="color:gray">dtFree_3</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1612                 </span><span style="color:navy">mov     dx, offset </span>bytmes1_ptr ; MSG_1020 (&quot;.. bytes free&quot; msg)
<span style="color:black">TRANGROUP:1612                                         </span>; 30 digits, long binary do decimal
<span style="color:black">TRANGROUP:1615                 </span><span style="color:navy">cmp     [ds:</span>narrow<span style="color:navy">], </span><span style="color:#ff8000">0  </span>; narrow display area ?
<span style="color:black">TRANGROUP:161A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">dtFree_4  </span>; yes
<span style="color:black">TRANGROUP:161C                 </span><span style="color:navy">mov     dx, offset </span>bytmes2_ptr ; MSG_1020, 33 digits
<span style="color:black">TRANGROUP:161F
TRANGROUP:161F </span><span style="color:gray">dtFree_4</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:161F                 </span><span style="color:navy">cmp     [ds:</span>bfree_not_kilo<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; not kilobyte option
<span style="color:black">TRANGROUP:1624                 </span><span style="color:navy">jz      short </span><span style="color:gray">dtFree_5  </span>; use kilo bytes (if number of free bytes is big)
<span style="color:black">TRANGROUP:1626                 </span><span style="color:navy">mov     dx, offset </span>bytmes_n_ptr ; narrow (28 digits), MSG_1020
<span style="color:black">TRANGROUP:1629
TRANGROUP:1629 </span><span style="color:gray">dtFree_5</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1629                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:162C                 </span><span style="color:navy">call    </span>UseLine
<span style="color:black">TRANGROUP:162F
TRANGROUP:162F </span><span style="color:gray">dtRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:162F                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:162F </span>endp            DisplayTotals
<span style="color:black">TRANGROUP:162F
TRANGROUP:1630
TRANGROUP:1630 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1630
TRANGROUP:1630
TRANGROUP:1630 </span>proc            FileIsDevice near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1630                 </span><span style="color:navy">mov     dx, [ds:</span>PathPos<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1634                 </span><span style="color:navy">mov     di, dx
</span><span style="color:black">TRANGROUP:1636                 </span><span style="color:navy">add     di, [ds:</span>PathCnt<span style="color:navy">]
</span><span style="color:black">TRANGROUP:163A                 </span><span style="color:navy">xor     bl, bl
</span><span style="color:black">TRANGROUP:163C                 </span><span style="color:navy">xchg    bl, [di]
</span><span style="color:black">TRANGROUP:163E                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:1640                 </span><span style="color:navy">mov     ah, </span><span style="color:green">4Eh
</span><span style="color:black">TRANGROUP:1642                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FIND FIRST ASCIZ (FINDFIRST)
<span style="color:black">TRANGROUP:1642                                         </span>; CX = search attributes
<span style="color:black">TRANGROUP:1642                                         </span>; DS:DX -&gt; ASCIZ filespec
<span style="color:black">TRANGROUP:1642                                         </span>; (drive, path, and wildcards allowed)
<span style="color:black">TRANGROUP:1644                 </span><span style="color:navy">xchg    bl, [di]
</span><span style="color:black">TRANGROUP:1646                 </span><span style="color:navy">jb      short </span><span style="color:gray">piCol
</span><span style="color:black">TRANGROUP:1648                 </span><span style="color:navy">test    [ds:</span>BWDBUF<span style="color:navy">+</span><span style="color:green">15h</span><span style="color:navy">], </span><span style="color:green">40h </span>; [DIRBUF+FIND_BUF.ATTR],ATTR_DEVICE
<span style="color:black">TRANGROUP:164D                 </span><span style="color:navy">jz      short </span><span style="color:gray">piCol
</span><span style="color:black">TRANGROUP:164F                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:1651                 </span><span style="color:navy">jmp     short </span><span style="color:gray">piRet
</span><span style="color:black">TRANGROUP:1653 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1653
TRANGROUP:1653 </span><span style="color:gray">piCol</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1653                 </span><span style="color:navy">dec     di
</span><span style="color:black">TRANGROUP:1654                 </span><span style="color:navy">mov     al, &#039;</span><span style="color:green">:&#039;         </span>; COLON_CHAR
<span style="color:black">TRANGROUP:1656                 </span><span style="color:navy">mov     cx, [ds:</span>PathCnt<span style="color:navy">]
</span><span style="color:black">TRANGROUP:165A                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:165B                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:165C                 </span><span style="color:navy">or      cx, cx
</span><span style="color:black">TRANGROUP:165E                 </span><span style="color:navy">js      short </span><span style="color:gray">piRet
</span><span style="color:black">TRANGROUP:1660                 </span><span style="color:navy">or      di, di
</span><span style="color:black">TRANGROUP:1662                 </span><span style="color:navy">std
</span><span style="color:black">TRANGROUP:1663                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:1665                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:1666
TRANGROUP:1666 </span><span style="color:gray">piRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1666                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1666 </span>endp            FileIsDevice
<span style="color:black">TRANGROUP:1666
TRANGROUP:1667
TRANGROUP:1667 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1667
TRANGROUP:1667
TRANGROUP:1667 </span>proc            FindFirst near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1667                 </span><span style="color:navy">mov     ax, offset </span>GetFirst
<span style="color:black">TRANGROUP:166A                 </span><span style="color:navy">jmp     short </span>ffFindEntry
<span style="color:black">TRANGROUP:166A </span>endp            FindFirst
<span style="color:black">TRANGROUP:166A
TRANGROUP:166C
TRANGROUP:166C </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:166C
TRANGROUP:166C
TRANGROUP:166C </span>proc            FindNext near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:166C                 </span><span style="color:navy">mov     ax, offset </span>GetNext
<span style="color:black">TRANGROUP:166F
TRANGROUP:166F </span>ffFindEntry<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:166F                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:1670                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">80h </span>; mask.inmem
<span style="color:black">TRANGROUP:1676                 </span><span style="color:navy">jz      short </span><span style="color:gray">ffDisk
</span><span style="color:black">TRANGROUP:1678                 </span><span style="color:navy">call    </span>FindInMem
<span style="color:black">TRANGROUP:167B                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ffRet
</span><span style="color:black">TRANGROUP:167D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:167D
TRANGROUP:167D </span><span style="color:gray">ffDisk</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:167D                 </span><span style="color:navy">call    ax
</span><span style="color:black">TRANGROUP:167F                 </span><span style="color:navy">jb      short </span><span style="color:gray">ffGetErr
</span><span style="color:black">TRANGROUP:1681                 </span><span style="color:navy">mov     es, [ds:</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1685                 </span><span style="color:navy">xor     di, di
</span><span style="color:black">TRANGROUP:1687                 </span><span style="color:navy">mov     bx, di
</span><span style="color:black">TRANGROUP:1689                 </span><span style="color:navy">call    </span>LoadEntry
<span style="color:black">TRANGROUP:168C                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:168D                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ffRet
</span><span style="color:black">TRANGROUP:168F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:168F
TRANGROUP:168F </span><span style="color:gray">ffGetErr</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:168F                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:1692                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:1693
TRANGROUP:1693 </span><span style="color:gray">ffRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1693                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:1694                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1694 </span>endp            FindNext
<span style="color:black">TRANGROUP:1694
TRANGROUP:1695
TRANGROUP:1695 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1695
TRANGROUP:1695
TRANGROUP:1695 </span>proc            FindInMem near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1695                 </span><span style="color:navy">mov     es, [ds:</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1699                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:169B                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:169C                 </span><span style="color:navy">call    </span>FindOneInMem
<span style="color:black">TRANGROUP:169F                 </span><span style="color:navy">jb      short </span><span style="color:gray">fiNoMore
</span><span style="color:black">TRANGROUP:16A1
TRANGROUP:16A1 </span><span style="color:gray">fiBest</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:16A1                 </span><span style="color:navy">mov     bp, bx
</span><span style="color:black">TRANGROUP:16A3
TRANGROUP:16A3 </span><span style="color:gray">fiNext</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:16A3                 </span><span style="color:navy">call    </span>FindNextInMem
<span style="color:black">TRANGROUP:16A6                 </span><span style="color:navy">jb      short </span><span style="color:gray">fiFound
</span><span style="color:black">TRANGROUP:16A8                 </span><span style="color:navy">call    </span>CmpEntry
<span style="color:black">TRANGROUP:16AB                 </span><span style="color:navy">jnb     short </span><span style="color:gray">fiNext
</span><span style="color:black">TRANGROUP:16AD                 </span><span style="color:navy">jmp     short </span><span style="color:gray">fiBest
</span><span style="color:black">TRANGROUP:16AF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:16AF
TRANGROUP:16AF </span><span style="color:gray">fiNoMore</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:16AF                 </span><span style="color:navy">mov     ax, </span><span style="color:green">18          </span>; ERROR_NO_MORE_FILES
<span style="color:black">TRANGROUP:16B2                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:16B3                 </span><span style="color:navy">jmp     short </span><span style="color:gray">fiRet
</span><span style="color:black">TRANGROUP:16B5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:16B5
TRANGROUP:16B5 </span><span style="color:gray">fiFound</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:16B5                 </span><span style="color:navy">mov     bx, bp
</span><span style="color:black">TRANGROUP:16B7                 </span><span style="color:navy">mov     [byte ptr es:bx], </span><span style="color:#ff8000">1 </span>; mark entry &#039;used&#039;
<span style="color:black">TRANGROUP:16BB                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:16BC
TRANGROUP:16BC </span><span style="color:gray">fiRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:16BC                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:16BC </span>endp            FindInMem
<span style="color:black">TRANGROUP:16BC
TRANGROUP:16BD
TRANGROUP:16BD </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:16BD
TRANGROUP:16BD
TRANGROUP:16BD </span>proc            FindNextChild near      <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:16BD                 </span><span style="color:navy">sub     sp, </span><span style="color:green">12          </span>; make temp filename buf on stack
<span style="color:black">TRANGROUP:16C0                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:16C3                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:16C4                 </span><span style="color:navy">mov     bp, sp
</span><span style="color:black">TRANGROUP:16C6                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2Ah </span><span style="color:gray">; &#039;*&#039;
</span><span style="color:black">TRANGROUP:16C9                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:16CA                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2E2Ah       </span>; &quot;*.&quot; (NASM syntax)
<span style="color:black">TRANGROUP:16CD                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:16CE                 </span><span style="color:navy">call    </span>GetDriveLtr
<span style="color:black">TRANGROUP:16D1                 </span><span style="color:navy">push    ax              </span>; AX = &quot;d:&quot;
<span style="color:black">TRANGROUP:16D2                 </span><span style="color:navy">mov     dx, sp          </span>; DX = ptr to &quot;d:*.*&quot;,0 on stack
<span style="color:black">TRANGROUP:16D4                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">10h         </span>; ATTR_DIRECTORY
<span style="color:black">TRANGROUP:16D7                 </span><span style="color:navy">mov     ah, </span><span style="color:green">4Eh
</span><span style="color:black">TRANGROUP:16D9                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FIND FIRST ASCIZ (FINDFIRST)
<span style="color:black">TRANGROUP:16D9                                         </span>; CX = search attributes
<span style="color:black">TRANGROUP:16D9                                         </span>; DS:DX -&gt; ASCIZ filespec
<span style="color:black">TRANGROUP:16D9                                         </span>; (drive, path, and wildcards allowed)
<span style="color:black">TRANGROUP:16DB                 </span><span style="color:navy">jb      short </span><span style="color:gray">fcRet
</span><span style="color:black">TRANGROUP:16DD                 </span><span style="color:navy">call    </span>CheckChild      ; check child against last, temp
<span style="color:black">TRANGROUP:16E0
TRANGROUP:16E0 </span><span style="color:gray">fcNext</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:16E0                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">10h         </span>; ATTR_DIRECTORY
<span style="color:black">TRANGROUP:16E3                 </span><span style="color:navy">mov     ah, </span><span style="color:green">4Fh
</span><span style="color:black">TRANGROUP:16E5                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FIND NEXT ASCIZ (FINDNEXT)
<span style="color:black">TRANGROUP:16E5                                         </span>; [DTA] = data block from
<span style="color:black">TRANGROUP:16E5                                         </span>; last AH = 4Eh/4Fh call
<span style="color:black">TRANGROUP:16E7                 </span><span style="color:navy">jb      short </span><span style="color:gray">fcErr
</span><span style="color:black">TRANGROUP:16E9                 </span><span style="color:navy">call    </span>CheckChild
<span style="color:black">TRANGROUP:16EC                 </span><span style="color:navy">jmp     short </span><span style="color:gray">fcNext
</span><span style="color:black">TRANGROUP:16EE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:16EE
TRANGROUP:16EE </span><span style="color:gray">fcErr</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:16EE                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:16F1                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">18          </span>; ERROR_NO_MORE_FILES
<span style="color:black">TRANGROUP:16F4                 </span><span style="color:navy">jnz     short </span><span style="color:gray">fcNope
</span><span style="color:black">TRANGROUP:16F6                 </span><span style="color:navy">cmp     [byte ptr bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:16FA                 </span><span style="color:navy">jz      short </span><span style="color:gray">fcNope
</span><span style="color:black">TRANGROUP:16FC                 </span><span style="color:navy">mov     si, bp
</span><span style="color:black">TRANGROUP:16FE                 </span><span style="color:navy">mov     di, bx
</span><span style="color:black">TRANGROUP:1700
TRANGROUP:1700 </span><span style="color:gray">fcMove</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1700                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:1701                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:1702                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:1704                 </span><span style="color:navy">jz      short </span><span style="color:gray">fcRet
</span><span style="color:black">TRANGROUP:1706                 </span><span style="color:navy">jmp     short </span><span style="color:gray">fcMove
</span><span style="color:black">TRANGROUP:1708 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1708
TRANGROUP:1708 </span><span style="color:gray">fcNope</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1708                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:1709
TRANGROUP:1709 </span><span style="color:gray">fcRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1709                 </span><span style="color:navy">lahf
</span><span style="color:black">TRANGROUP:170A                 </span><span style="color:navy">add     sp, </span><span style="color:green">20          </span>; restore stack
<span style="color:black">TRANGROUP:170D                 </span><span style="color:navy">sahf
</span><span style="color:black">TRANGROUP:170E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:170E </span>endp            FindNextChild
<span style="color:black">TRANGROUP:170E
TRANGROUP:170F
TRANGROUP:170F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:170F
TRANGROUP:170F
TRANGROUP:170F </span>proc            FindOneInMem near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:170F
TRANGROUP:170F </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:1721 SIZE 00000002 BYTES
</span><span style="color:black">TRANGROUP:170F
TRANGROUP:170F                 </span><span style="color:navy">mov     al, [es:bx]
</span><span style="color:black">TRANGROUP:1712                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:1714                 </span><span style="color:navy">jz      short </span>FindNextInMem
<span style="color:black">TRANGROUP:1716                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:1718                 </span><span style="color:navy">jz      short </span><span style="color:gray">foNoMore
</span><span style="color:black">TRANGROUP:171A                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:171B                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:171B </span>endp            FindOneInMem
<span style="color:black">TRANGROUP:171B
TRANGROUP:171C
TRANGROUP:171C </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:171C
TRANGROUP:171C
TRANGROUP:171C </span>proc            FindNextInMem near      <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:171C                 </span><span style="color:navy">add     bx, </span><span style="color:green">22          </span>; size EntryStruc
<span style="color:black">TRANGROUP:171F                 </span><span style="color:navy">jmp     short </span>FindOneInMem
<span style="color:black">TRANGROUP:171F </span>endp            FindNextInMem
<span style="color:black">TRANGROUP:171F
TRANGROUP:1721 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1721 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR FindOneInMem
</span><span style="color:black">TRANGROUP:1721
TRANGROUP:1721 </span><span style="color:gray">foNoMore</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1721                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:1722                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1722 </span><span style="color:gray">; END OF FUNCTION CHUNK FOR FindOneInMem
</span><span style="color:black">TRANGROUP:1723
TRANGROUP:1723 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1723
TRANGROUP:1723
TRANGROUP:1723 </span>proc            GetEnvValue near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1723                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:1724                 </span><span style="color:navy">mov     si, offset </span>DirEnvVar <span style="color:gray">; &quot;DIRCMD=&quot;
</span><span style="color:black">TRANGROUP:1727                 </span><span style="color:navy">call    </span>find_name_in_environment
<span style="color:black">TRANGROUP:172A                 </span><span style="color:navy">jb      short </span><span style="color:gray">geRet
</span><span style="color:black">TRANGROUP:172C                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:172D                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:172E                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:172F                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:1730                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:1732                 </span><span style="color:navy">mov     di, offset </span>ScanBuf
<span style="color:black">TRANGROUP:1735
TRANGROUP:1735 </span><span style="color:gray">geLoop</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1735                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:1736                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:1738                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:1739                 </span><span style="color:navy">loopne  </span><span style="color:gray">geLoop
</span><span style="color:black">TRANGROUP:173B                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:173C                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:173D                 </span><span style="color:navy">mov     si, offset </span>ScanBuf
<span style="color:black">TRANGROUP:1740
TRANGROUP:1740 </span><span style="color:gray">geRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1740                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:1741                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1741 </span>endp            GetEnvValue
<span style="color:black">TRANGROUP:1741
TRANGROUP:1742
TRANGROUP:1742 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1742
TRANGROUP:1742
TRANGROUP:1742 </span>proc            GetFirst near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1742                 </span><span style="color:navy">mov     [byte ptr ds:</span><span style="color:green">55h</span><span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; [FCB-7]
<span style="color:black">TRANGROUP:1747                 </span><span style="color:navy">mov     [byte ptr ds:</span><span style="color:green">5Bh</span><span style="color:navy">], </span><span style="color:#ff8000">16h </span>; [FCB-1],ATTR_ALL
<span style="color:black">TRANGROUP:174C                 </span><span style="color:navy">mov     dx, </span><span style="color:green">55h         </span>; FCB-7
<span style="color:black">TRANGROUP:174F                 </span><span style="color:navy">mov     ah, </span><span style="color:green">11h
</span><span style="color:black">TRANGROUP:1751                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SEARCH FIRST USING FCB
<span style="color:black">TRANGROUP:1751                                         </span>; DS:DX -&gt; FCB
<span style="color:black">TRANGROUP:1753                 </span><span style="color:navy">shl     al, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1755                 </span><span style="color:navy">jb      short </span>gfRet
<span style="color:black">TRANGROUP:1757                 </span><span style="color:navy">jmp     short </span>gfFound
<span style="color:black">TRANGROUP:1757 </span>endp            GetFirst
<span style="color:black">TRANGROUP:1757
TRANGROUP:1759
TRANGROUP:1759 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1759
TRANGROUP:1759
TRANGROUP:1759 </span>proc            GetNext near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1759                 </span><span style="color:navy">mov     dx, </span><span style="color:green">55h         </span>; FCB-7
<span style="color:black">TRANGROUP:175C                 </span><span style="color:navy">mov     ah, </span><span style="color:green">12h
</span><span style="color:black">TRANGROUP:175E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SEARCH NEXT USING FCB
<span style="color:black">TRANGROUP:175E                                         </span>; DS:DX -&gt; FCB
<span style="color:black">TRANGROUP:175E                                         </span>; Return: AL = status
<span style="color:black">TRANGROUP:1760                 </span><span style="color:navy">shl     al, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1762                 </span><span style="color:navy">jb      short </span>gfRet
<span style="color:black">TRANGROUP:1764
TRANGROUP:1764 </span>gfFound<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1764                 </span><span style="color:navy">mov     al, [ds:</span>BWDBUF<span style="color:navy">+</span><span style="color:green">13h</span><span style="color:navy">] </span>; [DIRBUF+8+DIR_ENTRY.DIR_ATTR]
<span style="color:black">TRANGROUP:1767                 </span><span style="color:navy">mov     ah, [ds:</span>AttrSpecified<span style="color:navy">]
</span><span style="color:black">TRANGROUP:176B                 </span><span style="color:navy">and     al, ah
</span><span style="color:black">TRANGROUP:176D                 </span><span style="color:navy">and     ah, [ds:</span>AttrSelect<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1771                 </span><span style="color:navy">cmp     al, ah
</span><span style="color:black">TRANGROUP:1773                 </span><span style="color:navy">jnz     short </span>GetNext
<span style="color:black">TRANGROUP:1775
TRANGROUP:1775 </span>gfRet<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1775                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1775 </span>endp            GetNext
<span style="color:black">TRANGROUP:1775
TRANGROUP:1776
TRANGROUP:1776 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1776
TRANGROUP:1776
TRANGROUP:1776 </span>proc            ListDir near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1776                 </span><span style="color:navy">xor     ax, ax          </span>; 0
<span style="color:black">TRANGROUP:1778                 </span><span style="color:navy">mov     [ds:</span>FileCnt<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:177B                 </span><span style="color:navy">mov     [ds:</span>FileSiz<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:177E                 </span><span style="color:navy">mov     [ds:</span>FileSiz<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:1781                 </span><span style="color:navy">mov     [ds:</span>FileSiz<span style="color:navy">+</span><span style="color:green">4</span><span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:1784                 </span><span style="color:navy">mov     [ds:</span>FileSiz<span style="color:navy">+</span><span style="color:green">6</span><span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:1787                 </span><span style="color:navy">cmp     [ds:</span>DestBuf<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:178C                 </span><span style="color:navy">jz      short </span><span style="color:gray">ld1
</span><span style="color:black">TRANGROUP:178E                 </span><span style="color:navy">call    </span>LoadEntries
<span style="color:black">TRANGROUP:1791                 </span><span style="color:navy">jnb     short </span><span style="color:gray">ld1
</span><span style="color:black">TRANGROUP:1793                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:1796                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:1797                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ldErr
</span><span style="color:black">TRANGROUP:1799 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1799
TRANGROUP:1799 </span><span style="color:gray">ld1</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1799                 </span><span style="color:navy">call    </span>FindFirst
<span style="color:black">TRANGROUP:179C                 </span><span style="color:navy">jb      short </span><span style="color:gray">ldErr
</span><span style="color:black">TRANGROUP:179E                 </span><span style="color:navy">call    </span>DisplayHeader
<span style="color:black">TRANGROUP:17A1                 </span><span style="color:navy">call    </span>DisplayFile
<span style="color:black">TRANGROUP:17A4
TRANGROUP:17A4 </span><span style="color:gray">ldNext</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:17A4                 </span><span style="color:navy">call    </span>FindNext
<span style="color:black">TRANGROUP:17A7                 </span><span style="color:navy">jb      short </span><span style="color:gray">ldErr
</span><span style="color:black">TRANGROUP:17A9                 </span><span style="color:navy">call    </span>DisplayFile
<span style="color:black">TRANGROUP:17AC                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ldNext
</span><span style="color:black">TRANGROUP:17AE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:17AE
TRANGROUP:17AE </span><span style="color:gray">ldErr</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:17AE                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">2           </span>; ERROR_FILE_NOT_FOUND
<span style="color:black">TRANGROUP:17B1                 </span><span style="color:navy">jz      short </span><span style="color:gray">ldDone
</span><span style="color:black">TRANGROUP:17B3                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">18          </span>; ERROR_NO_MORE_FILES
<span style="color:black">TRANGROUP:17B6                 </span><span style="color:navy">jz      short </span><span style="color:gray">ldDone
</span><span style="color:black">TRANGROUP:17B8                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:17B9                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ldRet
</span><span style="color:black">TRANGROUP:17BB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:17BB
TRANGROUP:17BB </span><span style="color:gray">ldDone</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:17BB                 </span><span style="color:navy">cmp     [ds:</span>FileCnt<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; word
<span style="color:black">TRANGROUP:17C0                 </span><span style="color:navy">jz      short </span><span style="color:gray">ld2
</span><span style="color:black">TRANGROUP:17C2                 </span><span style="color:navy">call    </span>DisplayTrailer
<span style="color:black">TRANGROUP:17C5
TRANGROUP:17C5 </span><span style="color:gray">ld2</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:17C5                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:17C6
TRANGROUP:17C6 </span><span style="color:gray">ldRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:17C6                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:17C6 </span>endp            ListDir
<span style="color:black">TRANGROUP:17C6
TRANGROUP:17C7
TRANGROUP:17C7 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:17C7
TRANGROUP:17C7
TRANGROUP:17C7 </span>proc            LoadEntries near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:17C7                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:17C8                 </span><span style="color:navy">mov     es, [ds:</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:17CC                 </span><span style="color:navy">xor     di, di
</span><span style="color:black">TRANGROUP:17CE                 </span><span style="color:navy">and     [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">0FF7Fh </span>; ~mask.inmem
<span style="color:black">TRANGROUP:17D4                 </span><span style="color:navy">call    </span>GetFirst
<span style="color:black">TRANGROUP:17D7                 </span><span style="color:navy">jb      short </span><span style="color:gray">leRet
</span><span style="color:black">TRANGROUP:17D9                 </span><span style="color:navy">call    </span>LoadEntry
<span style="color:black">TRANGROUP:17DC
TRANGROUP:17DC </span><span style="color:gray">leNext</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:17DC                 </span><span style="color:navy">call    </span>GetNext
<span style="color:black">TRANGROUP:17DF                 </span><span style="color:navy">jb      short </span><span style="color:gray">leLoaded
</span><span style="color:black">TRANGROUP:17E1                 </span><span style="color:navy">mov     ax, [ds:</span>BYTCNT<span style="color:navy">]
</span><span style="color:black">TRANGROUP:17E4                 </span><span style="color:navy">sub     ax, di
</span><span style="color:black">TRANGROUP:17E6                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">24
</span><span style="color:black">TRANGROUP:17E9                 </span><span style="color:navy">jb      short </span><span style="color:gray">leOk
</span><span style="color:black">TRANGROUP:17EB                 </span><span style="color:navy">call    </span>LoadEntry
<span style="color:black">TRANGROUP:17EE                 </span><span style="color:navy">jmp     short </span><span style="color:gray">leNext
</span><span style="color:black">TRANGROUP:17F0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:17F0
TRANGROUP:17F0 </span><span style="color:gray">leLoaded</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:17F0                 </span><span style="color:navy">mov     [byte ptr es:di], </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:17F4                 </span><span style="color:navy">or      [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">80h </span>; mask.inmem
<span style="color:black">TRANGROUP:17FA
TRANGROUP:17FA </span><span style="color:gray">leOk</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:17FA                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:17FB
TRANGROUP:17FB </span><span style="color:gray">leRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:17FB                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:17FC                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:17FC </span>endp            LoadEntries
<span style="color:black">TRANGROUP:17FC
TRANGROUP:17FD
TRANGROUP:17FD </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:17FD
TRANGROUP:17FD
TRANGROUP:17FD </span>proc            LoadEntry near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:17FD                 </span><span style="color:navy">mov     si, (offset </span>BWDBUF<span style="color:navy">+</span><span style="color:green">8</span><span style="color:navy">) </span>; DIRBUF+8
<span style="color:black">TRANGROUP:1800                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:1802                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:1803                 </span><span style="color:navy">mov     cx, </span><span style="color:green">11
</span><span style="color:black">TRANGROUP:1806                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:1808                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:1809                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:180A                 </span><span style="color:navy">add     si, </span><span style="color:green">10          </span>; (DIR_ENTRY.DIR_TIME-DIR_ENTRY.DIR_ATTR)-1
<span style="color:black">TRANGROUP:180D                 </span><span style="color:navy">movsw
</span><span style="color:black">TRANGROUP:180E                 </span><span style="color:navy">movsw
</span><span style="color:black">TRANGROUP:180F                 </span><span style="color:navy">mov     cl, al
</span><span style="color:black">TRANGROUP:1811                 </span><span style="color:navy">lodsw
</span><span style="color:black">TRANGROUP:1812                 </span><span style="color:navy">and     cl, </span><span style="color:green">10h         </span>; ATTR_DIRECTORY
<span style="color:black">TRANGROUP:1815                 </span><span style="color:navy">jnz     short </span><span style="color:gray">leSetDirSize
</span><span style="color:black">TRANGROUP:1817                 </span><span style="color:navy">movsw
</span><span style="color:black">TRANGROUP:1818                 </span><span style="color:navy">movsw
</span><span style="color:black">TRANGROUP:1819                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:181B                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:181C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:181D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:181D
TRANGROUP:181D </span><span style="color:gray">leSetDirSize</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:181D                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:181F                 </span><span style="color:navy">stosw
</span><span style="color:black">TRANGROUP:1820                 </span><span style="color:navy">stosw
</span><span style="color:black">TRANGROUP:1821                 </span><span style="color:navy">dec     al
</span><span style="color:black">TRANGROUP:1823                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:1824                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1824 </span>endp            LoadEntry
<span style="color:black">TRANGROUP:1824
TRANGROUP:1825
TRANGROUP:1825 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1825
TRANGROUP:1825
TRANGROUP:1825 </span>proc            NoOrder near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1825                 </span><span style="color:navy">mov     [ds:</span>DestBuf<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:182A                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:182B                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:182B </span>endp            NoOrder
<span style="color:black">TRANGROUP:182B
TRANGROUP:182C
TRANGROUP:182C </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:182C
TRANGROUP:182C
TRANGROUP:182C </span>proc            OnOffSw near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:182C                 </span><span style="color:navy">mov     cx, di
</span><span style="color:black">TRANGROUP:182E                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1830                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1832                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:1835                 </span><span style="color:navy">shl     ax, cl
</span><span style="color:black">TRANGROUP:1837                 </span><span style="color:navy">test    di, </span><span style="color:green">2           </span>; check if it is a negated option
<span style="color:black">TRANGROUP:183B                 </span><span style="color:navy">jz      short </span><span style="color:gray">oo1
</span><span style="color:black">TRANGROUP:183D                 </span><span style="color:navy">or      [ds:</span>_Bits<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:1841                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ooRet
</span><span style="color:black">TRANGROUP:1843 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1843
TRANGROUP:1843 </span><span style="color:gray">oo1</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1843                 </span><span style="color:navy">not     ax
</span><span style="color:black">TRANGROUP:1845                 </span><span style="color:navy">and     [ds:</span>_Bits<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:1849
TRANGROUP:1849 </span><span style="color:gray">ooRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1849                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:184A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:184A </span>endp            OnOffSw
<span style="color:black">TRANGROUP:184A
TRANGROUP:184B
TRANGROUP:184B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:184B
TRANGROUP:184B
TRANGROUP:184B </span>proc            ParseAttr near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:184B                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:184C                 </span><span style="color:navy">mov     [ds:</span>AttrSpecified<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1851                 </span><span style="color:navy">mov     si, [bx+</span><span style="color:#ff8000">4</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:1854
TRANGROUP:1854 </span><span style="color:gray">paLoop</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1854                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:1857                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:1858                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:185A                 </span><span style="color:navy">jz      short </span><span style="color:gray">paOk
</span><span style="color:black">TRANGROUP:185C                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">2Dh </span><span style="color:gray">; &#039;-&#039;
</span><span style="color:black">TRANGROUP:185E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">pa1
</span><span style="color:black">TRANGROUP:1860                 </span><span style="color:navy">dec     dx
</span><span style="color:black">TRANGROUP:1861                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:1862
TRANGROUP:1862 </span><span style="color:gray">pa1</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1862                 </span><span style="color:navy">mov     di, offset </span>AttrLtrs <span style="color:gray">; &quot;RHSvDA&quot;
</span><span style="color:black">TRANGROUP:1865                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">6           </span>; NUM_ATTR_LTRS
<span style="color:black">TRANGROUP:1868                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:186A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">paErr
</span><span style="color:black">TRANGROUP:186C                 </span><span style="color:navy">not     cx
</span><span style="color:black">TRANGROUP:186E                 </span><span style="color:navy">add     cx, </span><span style="color:#ff8000">6           </span>; NUM_ATTR_LTRS
<span style="color:black">TRANGROUP:1871                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:1873                 </span><span style="color:navy">shl     al, cl
</span><span style="color:black">TRANGROUP:1875                 </span><span style="color:navy">or      [ds:</span>AttrSpecified<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:1879                 </span><span style="color:navy">not     al
</span><span style="color:black">TRANGROUP:187B                 </span><span style="color:navy">and     [ds:</span>AttrSelect<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:187F                 </span><span style="color:navy">shl     dl, cl
</span><span style="color:black">TRANGROUP:1881                 </span><span style="color:navy">or      [ds:</span>AttrSelect<span style="color:navy">], dl
</span><span style="color:black">TRANGROUP:1885                 </span><span style="color:navy">jmp     short </span><span style="color:gray">paLoop
</span><span style="color:black">TRANGROUP:1887 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1887
TRANGROUP:1887 </span><span style="color:gray">paErr</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1887                 </span><span style="color:navy">call    </span>SetupParamError
<span style="color:black">TRANGROUP:188A                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:188B                 </span><span style="color:navy">jmp     short </span><span style="color:gray">paRet
</span><span style="color:black">TRANGROUP:188D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:188D
TRANGROUP:188D </span><span style="color:gray">paOk</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:188D                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:188E
TRANGROUP:188E </span><span style="color:gray">paRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:188E                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:188F                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:188F </span>endp            ParseAttr
<span style="color:black">TRANGROUP:188F
TRANGROUP:1890
TRANGROUP:1890 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1890
TRANGROUP:1890
TRANGROUP:1890 </span>proc            Parse_Line near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1890                 </span><span style="color:navy">mov     di, offset </span>PARSE_DIR
<span style="color:black">TRANGROUP:1893                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:1895
TRANGROUP:1895 </span><span style="color:gray">plPars</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1895                 </span><span style="color:navy">call    </span>Parse_With_Msg
<span style="color:black">TRANGROUP:1898                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh      </span>; END_OF_LINE ; -1
<span style="color:black">TRANGROUP:189B                 </span><span style="color:navy">jz      short </span><span style="color:gray">plRet
</span><span style="color:black">TRANGROUP:189D                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0           </span>; RESULT_NO_ERROR
<span style="color:black">TRANGROUP:18A0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">plRet
</span><span style="color:black">TRANGROUP:18A2                 </span><span style="color:navy">mov     bx, dx
</span><span style="color:black">TRANGROUP:18A4                 </span><span style="color:navy">cmp     [byte ptr bx], </span><span style="color:#ff8000">5 </span>; RESULT_FILESPEC
<span style="color:black">TRANGROUP:18A7                 </span><span style="color:navy">jz      short </span><span style="color:gray">plFil
</span><span style="color:black">TRANGROUP:18A9                 </span><span style="color:navy">call    </span>ParseSwitch
<span style="color:black">TRANGROUP:18AC                 </span><span style="color:navy">jb      short </span><span style="color:gray">plRet
</span><span style="color:black">TRANGROUP:18AE                 </span><span style="color:navy">jmp     short </span><span style="color:gray">plPars
</span><span style="color:black">TRANGROUP:18B0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:18B0
TRANGROUP:18B0 </span><span style="color:gray">plFil</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:18B0                 </span><span style="color:navy">call    </span>CopyPathname
<span style="color:black">TRANGROUP:18B3                 </span><span style="color:navy">jmp     short </span><span style="color:gray">plPars
</span><span style="color:black">TRANGROUP:18B5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:18B5
TRANGROUP:18B5 </span><span style="color:gray">plRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:18B5                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:18B5 </span>endp            Parse_Line
<span style="color:black">TRANGROUP:18B5
TRANGROUP:18B6
TRANGROUP:18B6 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:18B6
TRANGROUP:18B6
TRANGROUP:18B6 </span>proc            ParseOrder near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:18B6                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:18B7                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:18B8                 </span><span style="color:navy">mov     si, [bx+</span><span style="color:#ff8000">4</span><span style="color:navy">]      </span>; [bx+ResultBuffer.ValuePtr]
<span style="color:black">TRANGROUP:18BB                 </span><span style="color:navy">mov     bx, offset </span>DestBuf
<span style="color:black">TRANGROUP:18BE                 </span><span style="color:navy">mov     al, [si]
</span><span style="color:black">TRANGROUP:18C0                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:18C2                 </span><span style="color:navy">jnz     short </span><span style="color:gray">poLtr
</span><span style="color:black">TRANGROUP:18C4                 </span><span style="color:navy">mov     [byte ptr bx], </span><span style="color:#ff8000">5
</span><span style="color:black">TRANGROUP:18C7                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:18C8                 </span><span style="color:navy">mov     [byte ptr bx], </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:18CB                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:18CC                 </span><span style="color:navy">mov     [byte ptr bx], </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:18CF                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:18D0                 </span><span style="color:navy">jmp     short </span><span style="color:gray">poOk
</span><span style="color:black">TRANGROUP:18D2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:18D2
TRANGROUP:18D2 </span><span style="color:gray">poLtr</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:18D2                 </span><span style="color:navy">xor     dl, dl
</span><span style="color:black">TRANGROUP:18D4                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:18D5                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:18D7                 </span><span style="color:navy">jz      short </span><span style="color:gray">poOk
</span><span style="color:black">TRANGROUP:18D9                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">2Dh </span><span style="color:gray">; &#039;-&#039;
</span><span style="color:black">TRANGROUP:18DB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">po1
</span><span style="color:black">TRANGROUP:18DD                 </span><span style="color:navy">mov     dl, </span><span style="color:green">80h
</span><span style="color:black">TRANGROUP:18DF                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:18E0
TRANGROUP:18E0 </span><span style="color:gray">po1</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:18E0                 </span><span style="color:navy">mov     di, offset </span>OrderLtrs <span style="color:gray">; &quot;NEDSG&quot;
</span><span style="color:black">TRANGROUP:18E3                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">5           </span>; NUM_ORDER_LTRS
<span style="color:black">TRANGROUP:18E6                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:18E8                 </span><span style="color:navy">jnz     short </span><span style="color:gray">poErr
</span><span style="color:black">TRANGROUP:18EA                 </span><span style="color:navy">neg     cx
</span><span style="color:black">TRANGROUP:18EC                 </span><span style="color:navy">add     cx, </span><span style="color:#ff8000">5           </span>; NUM_ORDER_LTRS
<span style="color:black">TRANGROUP:18EF                 </span><span style="color:navy">or      cl, dl
</span><span style="color:black">TRANGROUP:18F1                 </span><span style="color:navy">mov     [bx], cl
</span><span style="color:black">TRANGROUP:18F3                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:18F4                 </span><span style="color:navy">cmp     bx, offset </span>EndDestBuf
<span style="color:black">TRANGROUP:18F8                 </span><span style="color:navy">jb      short </span><span style="color:gray">poLtr
</span><span style="color:black">TRANGROUP:18FA
TRANGROUP:18FA </span><span style="color:gray">poErr</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:18FA                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:18FB                 </span><span style="color:navy">call    </span>SetupParamError
<span style="color:black">TRANGROUP:18FE                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:18FF                 </span><span style="color:navy">jmp     short </span><span style="color:gray">poRet
</span><span style="color:black">TRANGROUP:1901 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1901
TRANGROUP:1901 </span><span style="color:gray">poOk</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1901                 </span><span style="color:navy">mov     [byte ptr bx], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1904                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:1905                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:1906
TRANGROUP:1906 </span><span style="color:gray">poRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1906                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:1907                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1907 </span>endp            ParseOrder
<span style="color:black">TRANGROUP:1907
TRANGROUP:1908
TRANGROUP:1908 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1908
TRANGROUP:1908
TRANGROUP:1908 </span>proc            ParseSwitch near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1908                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:1909                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:190A                 </span><span style="color:navy">mov     ax, [bx+</span><span style="color:#ff8000">2</span><span style="color:navy">]      </span>; [bx+ResultBuffer.SynPtr]
<span style="color:black">TRANGROUP:190D                 </span><span style="color:navy">mov     di, offset </span>Dir_Sw_Ptrs
<span style="color:black">TRANGROUP:1910                 </span><span style="color:navy">mov     cx, </span><span style="color:green">18          </span>; NUM_DIR_SWS
<span style="color:black">TRANGROUP:1913                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:1914                 </span><span style="color:navy">repne scasw
</span><span style="color:black">TRANGROUP:1916                 </span><span style="color:navy">sub     di, offset </span>Dir_Sw_Ptrs_2 ; Dir_Sw_Ptrs+2
<span style="color:black">TRANGROUP:191A                 </span><span style="color:navy">call    [cs:</span>SwHandler<span style="color:navy">+di]
</span><span style="color:black">TRANGROUP:191F                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:1920                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:1921                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1921 </span>endp            ParseSwitch
<span style="color:black">TRANGROUP:1921
TRANGROUP:1921 </span><span style="color:gray">; ---------------------------------------------------------------------------
TRANGROUP:1922 </span>SwHandler       <span style="color:navy">dw offset </span>OnOffSw       <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:1924                 </span><span style="color:navy">dw offset </span>OnOffSw
<span style="color:gray">TRANGROUP:1926                 </span><span style="color:navy">dw offset </span>OnOffSw
<span style="color:gray">TRANGROUP:1928                 </span><span style="color:navy">dw offset </span>OnOffSw
<span style="color:gray">TRANGROUP:192A                 </span><span style="color:navy">dw offset </span>OnOffSw
<span style="color:gray">TRANGROUP:192C                 </span><span style="color:navy">dw offset </span>OnOffSw
<span style="color:gray">TRANGROUP:192E                 </span><span style="color:navy">dw offset </span>OnOffSw
<span style="color:gray">TRANGROUP:1930                 </span><span style="color:navy">dw offset </span>OnOffSw
<span style="color:gray">TRANGROUP:1932                 </span><span style="color:navy">dw offset </span>OnOffSw
<span style="color:gray">TRANGROUP:1934                 </span><span style="color:navy">dw offset </span>OnOffSw
<span style="color:gray">TRANGROUP:1936                 </span><span style="color:navy">dw offset </span>OnOffSw
<span style="color:gray">TRANGROUP:1938                 </span><span style="color:navy">dw offset </span>OnOffSw
<span style="color:gray">TRANGROUP:193A                 </span><span style="color:navy">dw offset </span>OnOffSw
<span style="color:gray">TRANGROUP:193C                 </span><span style="color:navy">dw offset </span>OnOffSw
<span style="color:gray">TRANGROUP:193E                 </span><span style="color:navy">dw offset </span>NoOrder
<span style="color:gray">TRANGROUP:1940                 </span><span style="color:navy">dw offset </span>ParseOrder
<span style="color:gray">TRANGROUP:1942                 </span><span style="color:navy">dw offset </span>DefaultAttr
<span style="color:gray">TRANGROUP:1944                 </span><span style="color:navy">dw offset </span>ParseAttr
<span style="color:black">TRANGROUP:1946
TRANGROUP:1946 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1946
TRANGROUP:1946
TRANGROUP:1946 </span>proc            ChangeDir near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1946                 </span><span style="color:navy">mov     di, offset </span>BWDBUF ; DIRBUF
<span style="color:black">TRANGROUP:1949                 </span><span style="color:navy">call    </span>GetDriveLtr
<span style="color:black">TRANGROUP:194C                 </span><span style="color:navy">stosw
</span><span style="color:black">TRANGROUP:194D                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">TRANGROUP:194F
TRANGROUP:194F </span><span style="color:gray">cdLoop</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:194F                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:1950                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:1951                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:1953                 </span><span style="color:navy">jnz     short </span><span style="color:gray">cdLoop
</span><span style="color:black">TRANGROUP:1955                 </span><span style="color:navy">mov     dx, offset </span>BWDBUF ; DIRBUF
<span style="color:black">TRANGROUP:1958                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Bh
</span><span style="color:black">TRANGROUP:195A                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CHANGE THE CURRENT DIRECTORY (CHDIR)
<span style="color:black">TRANGROUP:195A                                         </span>; DS:DX -&gt; ASCIZ directory name (may include drive)
<span style="color:black">TRANGROUP:195C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:195C </span>endp            ChangeDir
<span style="color:black">TRANGROUP:195C
TRANGROUP:195D
TRANGROUP:195D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:195D
TRANGROUP:195D
TRANGROUP:195D </span>proc            CmpAscz near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:195D                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:195E                 </span><span style="color:navy">mov     di, si
</span><span style="color:black">TRANGROUP:1960                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:1962                 </span><span style="color:navy">mov     cx, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:1965                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:1967                 </span><span style="color:navy">not     cx
</span><span style="color:black">TRANGROUP:1969                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:196A                 </span><span style="color:navy">repe cmpsb
</span><span style="color:black">TRANGROUP:196C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:196C </span>endp            CmpAscz
<span style="color:black">TRANGROUP:196C
TRANGROUP:196D
TRANGROUP:196D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:196D
TRANGROUP:196D
TRANGROUP:196D </span>proc            CopyPathname near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:196D                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:196E                 </span><span style="color:navy">lds     si, [bx+</span><span style="color:#ff8000">4</span><span style="color:navy">]      </span>; [bx+ResultBuffer.ValuePtr]
<span style="color:black">TRANGROUP:1971                 </span><span style="color:navy">call    </span>Move_To_SrcBuf
<span style="color:black">TRANGROUP:1974                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:1975                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1975 </span>endp            CopyPathname
<span style="color:black">TRANGROUP:1975
TRANGROUP:1976
TRANGROUP:1976 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1976
TRANGROUP:1976
TRANGROUP:1976 </span>proc            CountFile near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1976                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:1977                 </span><span style="color:navy">mov     es, [ds:</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:197B                 </span><span style="color:navy">inc     [ds:</span>FileCnt<span style="color:navy">]    </span>; word
<span style="color:black">TRANGROUP:197F                 </span><span style="color:navy">inc     [ds:</span>FileCntTotal<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1983                 </span><span style="color:navy">jnz     short </span><span style="color:gray">cntf1
</span><span style="color:black">TRANGROUP:1985                 </span><span style="color:navy">inc     [ds:</span>FileCntTotal<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:1989
TRANGROUP:1989 </span><span style="color:gray">cntf1</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1989                 </span><span style="color:navy">mov     ax, [es:bx+</span><span style="color:#ff8000">11h</span><span style="color:navy">] </span>; [es:bx+EntryStruc.filesize]
<span style="color:black">TRANGROUP:198D                 </span><span style="color:navy">mov     dx, [es:bx+</span><span style="color:#ff8000">13h</span><span style="color:navy">] </span>; [es:bx+EntryStruc.filesize+2]
<span style="color:black">TRANGROUP:1991                 </span><span style="color:navy">add     [ds:</span>FileSiz<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:1995                 </span><span style="color:navy">adc     [ds:</span>FileSiz<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:1999                 </span><span style="color:navy">adc     [ds:</span>FileSiz<span style="color:navy">+</span><span style="color:green">4</span><span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:199E                 </span><span style="color:navy">add     [ds:</span>FileSizTotal<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:19A2                 </span><span style="color:navy">adc     [ds:</span>FileSizTotal<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:19A6                 </span><span style="color:navy">adc     [ds:</span>FileSizTotal<span style="color:navy">+</span><span style="color:green">4</span><span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:19AB                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:19AC                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:19AC </span>endp            CountFile
<span style="color:black">TRANGROUP:19AC
TRANGROUP:19AD
TRANGROUP:19AD </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:19AD
TRANGROUP:19AD
TRANGROUP:19AD </span>proc            DisplayBare near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:19AD                 </span><span style="color:navy">mov     cx, ds
</span><span style="color:black">TRANGROUP:19AF                 </span><span style="color:navy">mov     ds, [ds:</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:19B3                 </span><span style="color:navy">cmp     [byte ptr bx+</span><span style="color:#ff8000">1</span><span style="color:navy">], </span><span style="color:#ff8000">2Eh </span><span style="color:gray">; &#039;.&#039; </span>; [bx+EntrStruc.filename]
<span style="color:black">TRANGROUP:19B7                 </span><span style="color:navy">mov     ds, cx
</span><span style="color:black">TRANGROUP:19B9                 </span><span style="color:navy">jz      short </span><span style="color:gray">dbRet
</span><span style="color:black">TRANGROUP:19BB                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">4   </span>; mask.subd
<span style="color:black">TRANGROUP:19C1                 </span><span style="color:navy">jz      short </span><span style="color:gray">dbNameExt
</span><span style="color:black">TRANGROUP:19C3                 </span><span style="color:navy">call    </span>build_dir_string
<span style="color:black">TRANGROUP:19C6                 </span><span style="color:navy">mov     di, offset </span>BWDBUF
<span style="color:black">TRANGROUP:19C9                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">10h </span>; mask.lcase
<span style="color:black">TRANGROUP:19CF                 </span><span style="color:navy">jz      short </span><span style="color:gray">dbare1
</span><span style="color:black">TRANGROUP:19D1                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:19D3                 </span><span style="color:navy">call    </span>LowercaseString
<span style="color:black">TRANGROUP:19D6
TRANGROUP:19D6 </span><span style="color:gray">dbare1</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:19D6                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:19D8                 </span><span style="color:navy">mov     cx, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:19DB                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:19DC                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:19DE                 </span><span style="color:navy">dec     di
</span><span style="color:black">TRANGROUP:19DF                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:19E0                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:19E1                 </span><span style="color:navy">mov     si, offset </span>BWDBUF
<span style="color:black">TRANGROUP:19E4                 </span><span style="color:navy">dec     di
</span><span style="color:black">TRANGROUP:19E5                 </span><span style="color:navy">call    </span>CheckDBCSTailByte
<span style="color:black">TRANGROUP:19E8                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:19E9                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:19EA                 </span><span style="color:navy">jz      short </span><span style="color:gray">dbTailByte
</span><span style="color:black">TRANGROUP:19EC                 </span><span style="color:navy">cmp     [byte ptr es:di-</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">5Ch </span><span style="color:gray">; &#039;\&#039;
</span><span style="color:black">TRANGROUP:19F1                 </span><span style="color:navy">jz      short </span><span style="color:gray">dbare2
</span><span style="color:black">TRANGROUP:19F3
TRANGROUP:19F3 </span><span style="color:gray">dbTailByte</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:19F3                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">5Ch </span><span style="color:gray">; &#039;\&#039;
</span><span style="color:black">TRANGROUP:19F6                 </span><span style="color:navy">stosw
</span><span style="color:black">TRANGROUP:19F7
TRANGROUP:19F7 </span><span style="color:gray">dbare2</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:19F7                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], offset </span>BWDBUF
<span style="color:black">TRANGROUP:19FD                 </span><span style="color:navy">mov     dx, offset </span>string_buf_ptr
<span style="color:black">TRANGROUP:1A00                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:1A03
TRANGROUP:1A03 </span><span style="color:gray">dbNameExt</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1A03                 </span><span style="color:navy">call    </span>DisplayDotForm
<span style="color:black">TRANGROUP:1A06                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:1A09                 </span><span style="color:navy">call    </span>UseLine
<span style="color:black">TRANGROUP:1A0C
TRANGROUP:1A0C </span><span style="color:gray">dbRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1A0C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1A0C </span>endp            DisplayBare
<span style="color:black">TRANGROUP:1A0C
TRANGROUP:1A0D
TRANGROUP:1A0D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1A0D
TRANGROUP:1A0D
TRANGROUP:1A0D </span>proc            DisplayDotForm near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1A0D                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:1A0E                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:1A0F                 </span><span style="color:navy">mov     ax, [cs:</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1A13                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:black">TRANGROUP:1A15                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:1A15                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:1A17                 </span>assume es:RESGROUP
<span style="color:black">TRANGROUP:1A17                 </span><span style="color:navy">mov     di, bx
</span><span style="color:black">TRANGROUP:1A19                 </span><span style="color:navy">add     di, </span><span style="color:#ff8000">8
</span><span style="color:black">TRANGROUP:1A1C                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">8
</span><span style="color:black">TRANGROUP:1A1F                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:1A21                 </span><span style="color:navy">std
</span><span style="color:black">TRANGROUP:1A22                 </span><span style="color:navy">repe scasb
</span><span style="color:black">TRANGROUP:1A24                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:1A25                 </span><span style="color:navy">mov     dx, cx
</span><span style="color:black">TRANGROUP:1A27                 </span><span style="color:navy">mov     si, bx
</span><span style="color:black">TRANGROUP:1A29                 </span><span style="color:navy">add     si, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:1A2C
TRANGROUP:1A2C </span><span style="color:gray">NextNameChar</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1A2C                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:1A2D                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:1A2E                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:1A31                 </span><span style="color:navy">jz      short </span><span style="color:gray">ddf3
</span><span style="color:black">TRANGROUP:1A33                 </span><span style="color:navy">call    </span>PRINT_CHAR
<span style="color:black">TRANGROUP:1A36                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:1A37                 </span><span style="color:navy">jz      short </span><span style="color:gray">ExtChar
</span><span style="color:black">TRANGROUP:1A39                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:1A3A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ddf1
</span><span style="color:black">TRANGROUP:1A3C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1A3C
TRANGROUP:1A3C </span><span style="color:gray">ddf3</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1A3C                 </span><span style="color:navy">test    [ss:</span>_Bits<span style="color:navy">], </span><span style="color:green">10h </span>; mask.lcase
<span style="color:black">TRANGROUP:1A43                 </span><span style="color:navy">jz      short </span><span style="color:gray">ddf1
</span><span style="color:black">TRANGROUP:1A45                 </span><span style="color:navy">call    </span>LowerCase
<span style="color:black">TRANGROUP:1A48
TRANGROUP:1A48 </span><span style="color:gray">ddf1</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1A48                 </span><span style="color:navy">call    </span>PRINT_CHAR
<span style="color:black">TRANGROUP:1A4B                 </span><span style="color:navy">loop    </span><span style="color:gray">NextNameChar
</span><span style="color:black">TRANGROUP:1A4D
TRANGROUP:1A4D </span><span style="color:gray">ExtChar</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1A4D                 </span><span style="color:navy">mov     di, bx
</span><span style="color:black">TRANGROUP:1A4F                 </span><span style="color:navy">add     di, </span><span style="color:green">11          </span>; fileext + size fileext - 1 ; 9+3-1
<span style="color:black">TRANGROUP:1A52                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">3           </span>; size fileext
<span style="color:black">TRANGROUP:1A55                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:1A57                 </span><span style="color:navy">std
</span><span style="color:black">TRANGROUP:1A58                 </span><span style="color:navy">repe scasb
</span><span style="color:black">TRANGROUP:1A5A                 </span><span style="color:navy">jz      short </span><span style="color:gray">ddDone
</span><span style="color:black">TRANGROUP:1A5C                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:1A5D                 </span><span style="color:navy">add     dx, cx
</span><span style="color:black">TRANGROUP:1A5F                 </span><span style="color:navy">inc     dx
</span><span style="color:black">TRANGROUP:1A60                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">2Eh </span><span style="color:gray">; &#039;.&#039;
</span><span style="color:black">TRANGROUP:1A62                 </span><span style="color:navy">call    </span>PRINT_CHAR
<span style="color:black">TRANGROUP:1A65                 </span><span style="color:navy">mov     si, bx
</span><span style="color:black">TRANGROUP:1A67                 </span><span style="color:navy">add     si, </span><span style="color:#ff8000">9           </span>; fileext
<span style="color:black">TRANGROUP:1A6A
TRANGROUP:1A6A </span><span style="color:gray">NextExtChar</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1A6A                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:1A6B                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:1A6C                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:1A6F                 </span><span style="color:navy">jz      short </span><span style="color:gray">ddf4
</span><span style="color:black">TRANGROUP:1A71                 </span><span style="color:navy">call    </span>PRINT_CHAR
<span style="color:black">TRANGROUP:1A74                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:1A75                 </span><span style="color:navy">jz      short </span><span style="color:gray">ddDone
</span><span style="color:black">TRANGROUP:1A77                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:1A78                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ddf2
</span><span style="color:black">TRANGROUP:1A7A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1A7A
TRANGROUP:1A7A </span><span style="color:gray">ddf4</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1A7A                 </span><span style="color:navy">test    [cs:</span>_Bits<span style="color:navy">], </span><span style="color:green">10h </span>; mask.lcase
<span style="color:black">TRANGROUP:1A81                 </span><span style="color:navy">jz      short </span><span style="color:gray">ddf2
</span><span style="color:black">TRANGROUP:1A83                 </span><span style="color:navy">call    </span>LowerCase
<span style="color:black">TRANGROUP:1A86
TRANGROUP:1A86 </span><span style="color:gray">ddf2</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1A86                 </span><span style="color:navy">call    </span>PRINT_CHAR
<span style="color:black">TRANGROUP:1A89                 </span><span style="color:navy">loop    </span><span style="color:gray">NextExtChar
</span><span style="color:black">TRANGROUP:1A8B
TRANGROUP:1A8B </span><span style="color:gray">ddDone</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1A8B                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:1A8C                 </span>assume es:nothing
<span style="color:black">TRANGROUP:1A8C                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:1A8D                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:1A8D                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:1A8E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1A8E </span>endp            DisplayDotForm
<span style="color:black">TRANGROUP:1A8E
TRANGROUP:1A8F
TRANGROUP:1A8F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1A8F
TRANGROUP:1A8F
TRANGROUP:1A8F </span>proc            DisplayFile near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1A8F                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">8   </span>; mask.bare
<span style="color:black">TRANGROUP:1A95                 </span><span style="color:navy">jz      short </span><span style="color:gray">dfNorm
</span><span style="color:black">TRANGROUP:1A97                 </span><span style="color:navy">call    </span>DisplayBare
<span style="color:black">TRANGROUP:1A9A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">dhRet
</span><span style="color:black">TRANGROUP:1A9C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1A9C
TRANGROUP:1A9C </span><span style="color:gray">dfNorm</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1A9C                 </span><span style="color:navy">call    </span>DisplayNext
<span style="color:black">TRANGROUP:1A9F                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">1   </span>; mask.wide
<span style="color:black">TRANGROUP:1AA5                 </span><span style="color:navy">jz      short </span><span style="color:gray">dfFull
</span><span style="color:black">TRANGROUP:1AA7                 </span><span style="color:navy">call    </span>DisplayWide
<span style="color:black">TRANGROUP:1AAA                 </span><span style="color:navy">jmp     short </span><span style="color:gray">dfCnt
</span><span style="color:black">TRANGROUP:1AAC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1AAC
TRANGROUP:1AAC </span><span style="color:gray">dfFull</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1AAC                 </span><span style="color:navy">call    </span>DisplayName
<span style="color:black">TRANGROUP:1AAF                 </span><span style="color:navy">call    </span>DisplayTheRest
<span style="color:black">TRANGROUP:1AB2
TRANGROUP:1AB2 </span><span style="color:gray">dfCnt</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1AB2                 </span><span style="color:navy">call    </span>CountFile
<span style="color:black">TRANGROUP:1AB5
TRANGROUP:1AB5 </span><span style="color:gray">dhRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1AB5                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1AB5 </span>endp            DisplayFile
<span style="color:black">TRANGROUP:1AB5
TRANGROUP:1AB6
TRANGROUP:1AB6 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1AB6
TRANGROUP:1AB6
TRANGROUP:1AB6 </span>proc            DisplayHeader near      <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1AB6                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">8   </span>; mask.bare
<span style="color:black">TRANGROUP:1ABC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">dhRet
</span><span style="color:black">TRANGROUP:1ABE                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">4   </span>; mask.subd
<span style="color:black">TRANGROUP:1AC4                 </span><span style="color:navy">jz      short </span><span style="color:gray">dhNorm
</span><span style="color:black">TRANGROUP:1AC6                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:1AC9                 </span><span style="color:navy">call    </span>UseLine
<span style="color:black">TRANGROUP:1ACC                 </span><span style="color:navy">jmp     short </span><span style="color:gray">dhCom
</span><span style="color:black">TRANGROUP:1ACE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1ACE
TRANGROUP:1ACE </span><span style="color:gray">dhNorm</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1ACE                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:1AD0                 </span><span style="color:navy">call    </span>PRINT_CHAR
<span style="color:black">TRANGROUP:1AD3
TRANGROUP:1AD3 </span><span style="color:gray">dhCom</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1AD3                 </span><span style="color:navy">call    </span>build_dir_string
<span style="color:black">TRANGROUP:1AD6                 </span><span style="color:navy">mov     dx, offset </span>dirhead_ptr
<span style="color:black">TRANGROUP:1AD9                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:1ADC                 </span><span style="color:navy">call    </span>UseLine
<span style="color:black">TRANGROUP:1ADF                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:1AE2                 </span><span style="color:navy">call    </span>UseLine
<span style="color:black">TRANGROUP:1AE5
TRANGROUP:1AE5 </span><span style="color:gray">dhRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1AE5                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1AE5 </span>endp            DisplayHeader
<span style="color:black">TRANGROUP:1AE5
TRANGROUP:1AE6
TRANGROUP:1AE6 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1AE6
TRANGROUP:1AE6
TRANGROUP:1AE6 </span>proc            DisplayName near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1AE6                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:1AE7                 </span><span style="color:navy">mov     ds, [ds:</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1AEB                 </span><span style="color:navy">mov     si, bx
</span><span style="color:black">TRANGROUP:1AED                 </span><span style="color:navy">add     si, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:1AF0                 </span><span style="color:navy">mov     di, offset </span>CHARBUF
<span style="color:black">TRANGROUP:1AF3                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">8
</span><span style="color:black">TRANGROUP:1AF6                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:1AF7                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:1AF9                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:1AFB                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:1AFC                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">3
</span><span style="color:black">TRANGROUP:1AFF                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:1B01                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:1B03                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:1B04                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:1B05                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">10h </span>; mask.lcase
<span style="color:black">TRANGROUP:1B0B                 </span><span style="color:navy">jz      short </span><span style="color:gray">dn1
</span><span style="color:black">TRANGROUP:1B0D                 </span><span style="color:navy">mov     si, offset </span>CHARBUF
<span style="color:black">TRANGROUP:1B10                 </span><span style="color:navy">call    </span>LowercaseString
<span style="color:black">TRANGROUP:1B13
TRANGROUP:1B13 </span><span style="color:gray">dn1</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1B13                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], offset </span>CHARBUF
<span style="color:black">TRANGROUP:1B19                 </span><span style="color:navy">mov     dx, offset </span>string_buf_ptr
<span style="color:black">TRANGROUP:1B1C                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:1B1F                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1B1F </span>endp            DisplayName
<span style="color:black">TRANGROUP:1B1F
TRANGROUP:1B20
TRANGROUP:1B20 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1B20
TRANGROUP:1B20
TRANGROUP:1B20 </span>proc            DisplayNext near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1B20                 </span><span style="color:navy">cmp     [ds:</span>FileCnt<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1B25                 </span><span style="color:navy">jz      short </span><span style="color:gray">dn1st
</span><span style="color:black">TRANGROUP:1B27                 </span><span style="color:navy">cmp     [ds:</span>LeftOnLine<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1B2C                 </span><span style="color:navy">jle     short </span><span style="color:gray">dnEol
</span><span style="color:black">TRANGROUP:1B2E                 </span><span style="color:navy">mov     dx, offset </span>tab_ptr
<span style="color:black">TRANGROUP:1B31                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:1B34                 </span><span style="color:navy">jmp     short </span><span style="color:gray">dnDone
</span><span style="color:black">TRANGROUP:1B36 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1B36
TRANGROUP:1B36 </span><span style="color:gray">dnEol</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1B36                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:1B39                 </span><span style="color:navy">call    </span>UseLine
<span style="color:black">TRANGROUP:1B3C
TRANGROUP:1B3C </span><span style="color:gray">dn1st</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1B3C                 </span><span style="color:navy">mov     al, [ds:</span>PerLine<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1B3F                 </span><span style="color:navy">mov     [ds:</span>LeftOnLine<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:1B42
TRANGROUP:1B42 </span><span style="color:gray">dnDone</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1B42                 </span><span style="color:navy">dec     [ds:</span>LeftOnLine<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1B46                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1B46 </span>endp            DisplayNext
<span style="color:black">TRANGROUP:1B46
TRANGROUP:1B47
TRANGROUP:1B47 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1B47
TRANGROUP:1B47
TRANGROUP:1B47 </span>proc            DisplayTheRest near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1B47                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:1B48                 </span><span style="color:navy">mov     es, [ds:</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1B4C                 </span><span style="color:navy">mov     bp, bx
</span><span style="color:black">TRANGROUP:1B4E                 </span><span style="color:navy">test    [byte ptr es:bp+</span><span style="color:#ff8000">0Ch</span><span style="color:navy">], </span><span style="color:green">10h </span>; [es:bp+EntryStruc.fileattr],ATTR_DIRECTORY
<span style="color:black">TRANGROUP:1B53                 </span><span style="color:navy">jz      short </span><span style="color:gray">drNonDir
</span><span style="color:black">TRANGROUP:1B55                 </span><span style="color:navy">cmp     [ds:</span>nocommas<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1B5A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">dr_2
</span><span style="color:black">TRANGROUP:1B5C                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], offset </span>twospacechars <span style="color:gray">; &quot;  &quot;
</span><span style="color:black">TRANGROUP:1B62                 </span><span style="color:navy">mov     dx, offset </span>string_buf_ptr
<span style="color:black">TRANGROUP:1B65                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:1B68
TRANGROUP:1B68 </span><span style="color:gray">dr_2</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1B68                 </span><span style="color:navy">mov     dx, offset </span>dmes_ptr ; MSG_1068
<span style="color:black">TRANGROUP:1B6B                 </span><span style="color:navy">cmp     [ds:</span>bfree_not_kilo<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1B70                 </span><span style="color:navy">jz      short </span><span style="color:gray">dr_3
</span><span style="color:black">TRANGROUP:1B72                 </span><span style="color:navy">mov     dx, offset </span>space_4_ptr
<span style="color:black">TRANGROUP:1B75
TRANGROUP:1B75 </span><span style="color:gray">dr_3</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1B75                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:1B78                 </span><span style="color:navy">jmp     short </span><span style="color:gray">drCom
</span><span style="color:black">TRANGROUP:1B7A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1B7A
TRANGROUP:1B7A </span><span style="color:gray">drNonDir</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1B7A                 </span><span style="color:navy">mov     dx, [es:bp+</span><span style="color:#ff8000">11h</span><span style="color:navy">] </span>; [es:bp+EntryStruc.filesize]
<span style="color:black">TRANGROUP:1B7E                 </span><span style="color:navy">mov     [ds:</span>File_Size_Low<span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:1B82                 </span><span style="color:navy">mov     dx, [es:bp+</span><span style="color:#ff8000">13h</span><span style="color:navy">] </span>; [es:bp+EntryStruc.filesize+2]
<span style="color:black">TRANGROUP:1B86                 </span><span style="color:navy">mov     [ds:</span>File_Size_High<span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:1B8A                 </span><span style="color:navy">mov     dx, offset </span>disp_file_size_ptr
<span style="color:black">TRANGROUP:1B8D                 </span><span style="color:navy">cmp     [ds:</span>narrow<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1B92                 </span><span style="color:navy">jnz     short </span><span style="color:gray">dr_4      </span>; narrow display
<span style="color:black">TRANGROUP:1B94                 </span><span style="color:navy">mov     dx, offset </span>disp_file_size_w_ptr ; big file (wide)
<span style="color:black">TRANGROUP:1B97
TRANGROUP:1B97 </span><span style="color:gray">dr_4</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1B97                 </span><span style="color:navy">cmp     [ds:</span>bfree_not_kilo<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1B9C                 </span><span style="color:navy">jz      short </span><span style="color:gray">dr_5      </span>; big file
<span style="color:black">TRANGROUP:1B9E                 </span><span style="color:navy">mov     dx, offset </span>disp_file_size_n_ptr ; not big file
<span style="color:black">TRANGROUP:1BA1
TRANGROUP:1BA1 </span><span style="color:gray">dr_5</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1BA1                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:1BA4
TRANGROUP:1BA4 </span><span style="color:gray">drCom</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1BA4                 </span><span style="color:navy">mov     ax, [es:bp+</span><span style="color:#ff8000">0Fh</span><span style="color:navy">] </span>; [es:bp+EntryStruc.filedate]
<span style="color:black">TRANGROUP:1BA8                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">TRANGROUP:1BAA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">dr_6
</span><span style="color:black">TRANGROUP:1BAC                 </span><span style="color:navy">jmp     </span><span style="color:gray">drDone
</span><span style="color:black">TRANGROUP:1BAF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1BAF
TRANGROUP:1BAF </span><span style="color:gray">dr_6</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1BAF                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:1BB1                 </span><span style="color:navy">and     ax, </span><span style="color:green">1Fh         </span>; AX = day of month
<span style="color:black">TRANGROUP:1BB4                 </span><span style="color:navy">mov     dl, al
</span><span style="color:black">TRANGROUP:1BB6                 </span><span style="color:navy">mov     ax, bx          </span>; AX = date word
<span style="color:black">TRANGROUP:1BB8                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">5
</span><span style="color:black">TRANGROUP:1BBA                 </span><span style="color:navy">shr     ax, cl          </span>; shift day out
<span style="color:black">TRANGROUP:1BBC                 </span><span style="color:navy">and     al, </span><span style="color:green">0Fh         </span>; AL = month
<span style="color:black">TRANGROUP:1BBE                 </span><span style="color:navy">mov     dh, al
</span><span style="color:black">TRANGROUP:1BC0                 </span><span style="color:navy">mov     cl, bh
</span><span style="color:black">TRANGROUP:1BC2                 </span><span style="color:navy">shr     cl, </span><span style="color:green">1           </span>; CL = year - 1980
<span style="color:black">TRANGROUP:1BC4                 </span><span style="color:navy">xor     ch, ch          </span>; CX = year - 1980
<span style="color:black">TRANGROUP:1BC6                 </span><span style="color:navy">add     cx, </span><span style="color:green">1980        </span>; CX = 4-digit year
<span style="color:black">TRANGROUP:1BCA                 </span><span style="color:navy">cmp     [ds:</span>yeardigit4<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1BCF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">dr_1
</span><span style="color:black">TRANGROUP:1BD1                 </span><span style="color:navy">sub     cx, </span><span style="color:green">2000        </span>; after year 2000
<span style="color:black">TRANGROUP:1BD5                 </span><span style="color:navy">jns     short </span><span style="color:gray">dr_1
</span><span style="color:black">TRANGROUP:1BD7                 </span><span style="color:navy">add     cx, </span><span style="color:green">100         </span>; before year 2000
<span style="color:black">TRANGROUP:1BDA
TRANGROUP:1BDA </span><span style="color:gray">dr_1</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1BDA                 </span><span style="color:navy">xchg    dh, dl
</span><span style="color:black">TRANGROUP:1BDC                 </span><span style="color:navy">mov     [ds:</span>DirDat_Yr<span style="color:navy">], cx
</span><span style="color:black">TRANGROUP:1BE0                 </span><span style="color:navy">mov     [ds:</span>DirDat_Mo_Day<span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:1BE4                 </span><span style="color:navy">mov     cx, [es:bp+</span><span style="color:#ff8000">0Dh</span><span style="color:navy">] </span>; [es:bp+EntryStruc.filetime]
<span style="color:black">TRANGROUP:1BE8                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">drPrint   </span>; no time field - go print
<span style="color:black">TRANGROUP:1BEA                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1BEC                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1BEE                 </span><span style="color:navy">shr     cx, </span><span style="color:green">1           </span>; CH = hours
<span style="color:black">TRANGROUP:1BF0                 </span><span style="color:navy">shr     cl, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1BF2                 </span><span style="color:navy">shr     cl, </span><span style="color:green">1           </span>; CL = minutes
<span style="color:black">TRANGROUP:1BF4                 </span><span style="color:navy">xchg    ch, cl          </span>; CX = hr/min
<span style="color:black">TRANGROUP:1BF6                 </span><span style="color:navy">mov     [ds:</span>DirTim_Hr_Min<span style="color:navy">], cx
</span><span style="color:black">TRANGROUP:1BFA
TRANGROUP:1BFA </span><span style="color:gray">drPrint</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1BFA                 </span><span style="color:navy">mov     [ds:</span>dirdattim_ptr<span style="color:navy">], </span><span style="color:green">1077 </span>; MSG_1077 (normal)
<span style="color:black">TRANGROUP:1C00                 </span><span style="color:navy">mov     [ds:</span>DirDat_form<span style="color:navy">], </span><span style="color:green">0A4h </span>; Right_Align+DATE_MDY_2
<span style="color:black">TRANGROUP:1C05                 </span><span style="color:navy">mov     [word ptr ds:</span>DirDat_width<span style="color:navy">], </span><span style="color:green">80Ah </span>; 10 (max), 8 (min)
<span style="color:black">TRANGROUP:1C0B                 </span><span style="color:navy">cmp     [ds:</span>narrow<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1C10                 </span><span style="color:navy">jnz     short </span><span style="color:gray">dr_narrow
</span><span style="color:black">TRANGROUP:1C12                 </span><span style="color:navy">mov     [ds:</span>dirdattim_ptr<span style="color:navy">], </span><span style="color:green">1075 </span>; MSG_1075 (narrow)
<span style="color:black">TRANGROUP:1C18                 </span><span style="color:navy">add     [word ptr ds:</span>DirDat_width<span style="color:navy">], </span><span style="color:green">202h </span>; 12 (max), 10 (min)
<span style="color:black">TRANGROUP:1C1E
TRANGROUP:1C1E </span><span style="color:gray">dr_narrow</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1C1E                 </span><span style="color:navy">cmp     [ds:</span>yeardigit4<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1C23                 </span><span style="color:navy">jz      short </span><span style="color:gray">dr_7
</span><span style="color:black">TRANGROUP:1C25                 </span><span style="color:navy">mov     [ds:</span>DirDat_form<span style="color:navy">], </span><span style="color:green">0B4h </span>; Right_Align+DATE_MDY_4
<span style="color:black">TRANGROUP:1C2A                 </span><span style="color:navy">add     [word ptr ds:</span>DirDat_width<span style="color:navy">], </span><span style="color:green">202h </span>; 12 (max), 10 (min)
<span style="color:black">TRANGROUP:1C30
TRANGROUP:1C30 </span><span style="color:gray">dr_7</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1C30                 </span><span style="color:navy">mov     dx, offset </span>dirdattim_ptr
<span style="color:black">TRANGROUP:1C33                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:1C36                 </span><span style="color:navy">mov     [ds:</span>dirdattim_ptr<span style="color:navy">], </span><span style="color:green">1077 </span>; MSG_1077
<span style="color:black">TRANGROUP:1C3C                 </span><span style="color:navy">mov     [ds:</span>DirDat_form<span style="color:navy">], </span><span style="color:green">0A4h </span>; Right_Align+DATE_MDY_2
<span style="color:black">TRANGROUP:1C41                 </span><span style="color:navy">mov     [word ptr ds:</span>DirDat_width<span style="color:navy">], </span><span style="color:green">80Ah </span>; 10 (max), 8 (min)
<span style="color:black">TRANGROUP:1C47                 </span><span style="color:navy">mov     [ds:</span>DirDat_Yr<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; word
<span style="color:black">TRANGROUP:1C4D                 </span><span style="color:navy">mov     [ds:</span>DirDat_Mo_Day<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; word
<span style="color:black">TRANGROUP:1C53                 </span><span style="color:navy">mov     [ds:</span>DirTim_Hr_Min<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; word
<span style="color:black">TRANGROUP:1C59
TRANGROUP:1C59 </span><span style="color:gray">drDone</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1C59                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:1C5A                 </span><span style="color:navy">mov     bx, bp
</span><span style="color:black">TRANGROUP:1C5C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1C5C </span>endp            DisplayTheRest
<span style="color:black">TRANGROUP:1C5C
TRANGROUP:1C5D
TRANGROUP:1C5D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1C5D
TRANGROUP:1C5D
TRANGROUP:1C5D </span>proc            DisplayTrailer near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1C5D                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">8
</span><span style="color:black">TRANGROUP:1C63                 </span><span style="color:navy">jnz     short </span>dtrRet
<span style="color:black">TRANGROUP:1C65                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:1C68                 </span><span style="color:navy">call    </span>UseLine
<span style="color:black">TRANGROUP:1C6B                 </span><span style="color:navy">mov     ax, [ds:</span>FileCnt<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1C6E                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:1C6E </span>endp            DisplayTrailer
<span style="color:black">TRANGROUP:1C6E
TRANGROUP:1C70
TRANGROUP:1C70 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1C70
TRANGROUP:1C70
TRANGROUP:1C70 </span>proc            DisplayCntSiz near      <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1C70                 </span><span style="color:navy">mov     [ds:</span>Dir_Num<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:1C73                 </span><span style="color:navy">mov     [ds:</span>Dir_Num<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:1C77                 </span><span style="color:navy">mov     dx, offset </span>dirmes_ptr
<span style="color:black">TRANGROUP:1C7A                 </span><span style="color:navy">cmp     [ds:</span>narrow<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1C7F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">dcs_1
</span><span style="color:black">TRANGROUP:1C81                 </span><span style="color:navy">mov     dx, offset </span>dirmes_w_ptr
<span style="color:black">TRANGROUP:1C84
TRANGROUP:1C84 </span><span style="color:gray">dcs_1</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1C84                 </span><span style="color:navy">cmp     [ds:</span>bfree_not_kilo<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1C89                 </span><span style="color:navy">jz      short </span><span style="color:gray">dcs_2
</span><span style="color:black">TRANGROUP:1C8B                 </span><span style="color:navy">mov     dx, offset </span>dirmes2_ptr
<span style="color:black">TRANGROUP:1C8E
TRANGROUP:1C8E </span><span style="color:gray">dcs_2</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1C8E                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:1C91                 </span><span style="color:navy">mov     cx, [ds:</span>FileSiz<span style="color:navy">+</span><span style="color:green">4</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:1C95                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">dcs_3
</span><span style="color:black">TRANGROUP:1C97                 </span><span style="color:navy">mov     dx, [ds:</span>FileSiz<span style="color:navy">+</span><span style="color:green">3</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:1C9B                 </span><span style="color:navy">mov     ax, [ds:</span>FileSiz<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:1C9E                 </span><span style="color:navy">ror     ch, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1CA0                 </span><span style="color:navy">rcr     dx, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1CA2                 </span><span style="color:navy">rcr     ax, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1CA4                 </span><span style="color:navy">ror     ch, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1CA6                 </span><span style="color:navy">rcr     dx, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1CA8                 </span><span style="color:navy">rcr     ax, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1CAA                 </span><span style="color:navy">mov     [ds:</span>FileSiz<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:1CAE                 </span><span style="color:navy">mov     [ds:</span>FileSiz<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:1CB1                 </span><span style="color:navy">mov     dx, offset </span>kbytes_ptr
<span style="color:black">TRANGROUP:1CB4                 </span><span style="color:navy">cmp     [ds:</span>bfree_not_kilo<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1CB9                 </span><span style="color:navy">jz      short </span><span style="color:gray">dcs_5
</span><span style="color:black">TRANGROUP:1CBB                 </span><span style="color:navy">mov     dx, offset </span>kybytes_n_ptr
<span style="color:black">TRANGROUP:1CBE                 </span><span style="color:navy">jmp     short </span><span style="color:gray">dcs_5
</span><span style="color:black">TRANGROUP:1CC0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1CC0
TRANGROUP:1CC0 </span><span style="color:gray">dcs_3</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1CC0                 </span><span style="color:navy">mov     dx, offset </span>bytes_ptr
<span style="color:black">TRANGROUP:1CC3                 </span><span style="color:navy">cmp     [ds:</span>narrow<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1CC8                 </span><span style="color:navy">jnz     short </span><span style="color:gray">dcs_4
</span><span style="color:black">TRANGROUP:1CCA                 </span><span style="color:navy">mov     dx, offset </span>bytes_w_tr
<span style="color:black">TRANGROUP:1CCD
TRANGROUP:1CCD </span><span style="color:gray">dcs_4</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1CCD                 </span><span style="color:navy">cmp     [ds:</span>bfree_not_kilo<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:1CD2                 </span><span style="color:navy">jz      short </span><span style="color:gray">dcs_5
</span><span style="color:black">TRANGROUP:1CD4                 </span><span style="color:navy">mov     dx, offset </span>bytes_n_ptr
<span style="color:black">TRANGROUP:1CD7
TRANGROUP:1CD7 </span><span style="color:gray">dcs_5</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1CD7                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:1CDA                 </span><span style="color:navy">call    </span>UseLine
<span style="color:black">TRANGROUP:1CDD
TRANGROUP:1CDD </span>dtrRet<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1CDD                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1CDD </span>endp            DisplayCntSiz
<span style="color:black">TRANGROUP:1CDD
TRANGROUP:1CDE
TRANGROUP:1CDE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1CDE
TRANGROUP:1CDE
TRANGROUP:1CDE </span>proc            DisplayWide near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1CDE                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:1CDF                 </span><span style="color:navy">mov     ds, [ds:</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1CE3                 </span><span style="color:navy">test    [byte ptr bx+</span><span style="color:#ff8000">0Ch</span><span style="color:navy">], </span><span style="color:green">10h </span>; [bx+EntryStruc.fileattr],ATTR_DIRECTORY
<span style="color:black">TRANGROUP:1CE7                 </span><span style="color:navy">jz      short </span><span style="color:gray">dw1
</span><span style="color:black">TRANGROUP:1CE9                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">5Bh </span><span style="color:gray">; &#039;[&#039;
</span><span style="color:black">TRANGROUP:1CEB                 </span><span style="color:navy">call    </span>PRINT_CHAR
<span style="color:black">TRANGROUP:1CEE
TRANGROUP:1CEE </span><span style="color:gray">dw1</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1CEE                 </span><span style="color:navy">call    </span>DisplayDotForm
<span style="color:black">TRANGROUP:1CF1                 </span><span style="color:navy">test    [byte ptr bx+</span><span style="color:#ff8000">0Ch</span><span style="color:navy">], </span><span style="color:green">10h
</span><span style="color:black">TRANGROUP:1CF5                 </span><span style="color:navy">jz      short </span><span style="color:gray">dw2
</span><span style="color:black">TRANGROUP:1CF7                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">5Dh </span><span style="color:gray">; &#039;]&#039;
</span><span style="color:black">TRANGROUP:1CF9                 </span><span style="color:navy">call    </span>PRINT_CHAR
<span style="color:black">TRANGROUP:1CFC
TRANGROUP:1CFC </span><span style="color:gray">dw2</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1CFC                 </span><span style="color:navy">mov     cx, </span><span style="color:green">12          </span>; 8+3+1
<span style="color:black">TRANGROUP:1CFF                 </span><span style="color:navy">sub     cx, dx          </span>; CX = # pad char&#039;s
<span style="color:black">TRANGROUP:1D01                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">dwDone
</span><span style="color:black">TRANGROUP:1D03                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:1D05
TRANGROUP:1D05 </span><span style="color:gray">dw3</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D05                 </span><span style="color:navy">call    </span>PRINT_CHAR
<span style="color:black">TRANGROUP:1D08                 </span><span style="color:navy">loop    </span><span style="color:gray">dw3
</span><span style="color:black">TRANGROUP:1D0A
TRANGROUP:1D0A </span><span style="color:gray">dwDone</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D0A                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:1D0B                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1D0B </span>endp            DisplayWide
<span style="color:black">TRANGROUP:1D0B
TRANGROUP:1D0C
TRANGROUP:1D0C </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1D0C
TRANGROUP:1D0C
TRANGROUP:1D0C </span>proc            EndPage near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D0C                 </span><span style="color:navy">test    [ds:</span>_Bits<span style="color:navy">], </span><span style="color:green">2   </span>; mask.pagd
<span style="color:black">TRANGROUP:1D12                 </span><span style="color:navy">jz      short </span><span style="color:gray">epNew
</span><span style="color:black">TRANGROUP:1D14                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:1D15                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:1D16                 </span><span style="color:navy">call    </span>PAUSE
<span style="color:black">TRANGROUP:1D19                 </span><span style="color:navy">call    </span>build_dir_string
<span style="color:black">TRANGROUP:1D1C                 </span><span style="color:navy">mov     dx, offset </span>dircont_ptr
<span style="color:black">TRANGROUP:1D1F                 </span><span style="color:navy">call    </span>Printf_Crlf
<span style="color:black">TRANGROUP:1D22                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:1D23                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:1D24
TRANGROUP:1D24 </span><span style="color:gray">epNew</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D24                 </span><span style="color:navy">mov     ax, [ds:</span>LinPerPag<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1D27                 </span><span style="color:navy">dec     ax
</span><span style="color:black">TRANGROUP:1D28                 </span><span style="color:navy">mov     [ds:</span>LeftOnPage<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:1D2B                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1D2B </span>endp            EndPage
<span style="color:black">TRANGROUP:1D2B
TRANGROUP:1D2C
TRANGROUP:1D2C </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1D2C
TRANGROUP:1D2C
TRANGROUP:1D2C </span>proc            GetDriveLtr near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D2C                 </span><span style="color:navy">mov     al, [ds:</span><span style="color:green">5Ch</span><span style="color:navy">]    </span>; [FCB]
<span style="color:black">TRANGROUP:1D2F                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:1D31                 </span><span style="color:navy">jnz     short </span><span style="color:gray">gdl1
</span><span style="color:black">TRANGROUP:1D33                 </span><span style="color:navy">mov     al, [ds:</span>CURDRV<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1D36                 </span><span style="color:navy">inc     al
</span><span style="color:black">TRANGROUP:1D38
TRANGROUP:1D38 </span><span style="color:gray">gdl1</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D38                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;   </span>; &#039;A&#039;-1
<span style="color:black">TRANGROUP:1D3A                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:black">TRANGROUP:1D3C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1D3C </span>endp            GetDriveLtr
<span style="color:black">TRANGROUP:1D3C
TRANGROUP:1D3D
TRANGROUP:1D3D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1D3D
TRANGROUP:1D3D
TRANGROUP:1D3D </span>proc            SetupParamError near    <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D3D                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:1D40                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">2 </span>; parse_msg_class
<span style="color:black">TRANGROUP:1D45                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:1D48                 </span><span style="color:navy">mov     si, [bx+</span><span style="color:#ff8000">4</span><span style="color:navy">]      </span>; [bx+ResultBuffer.ValuePtr]
<span style="color:black">TRANGROUP:1D4B                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], si
</span><span style="color:black">TRANGROUP:1D4F                 </span><span style="color:navy">mov     [ds:</span>extend_buf_sub<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; one_subst
<span style="color:black">TRANGROUP:1D54                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:black">TRANGROUP:1D57                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1D57 </span>endp            SetupParamError
<span style="color:black">TRANGROUP:1D57
TRANGROUP:1D58
TRANGROUP:1D58 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1D58
TRANGROUP:1D58
TRANGROUP:1D58 </span>proc            UseLine near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D58                 </span><span style="color:navy">dec     [ds:</span>LeftOnPage<span style="color:navy">] </span>; word
<span style="color:black">TRANGROUP:1D5C                 </span><span style="color:navy">cmp     [ds:</span>LeftOnPage<span style="color:navy">], </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:1D61                 </span><span style="color:navy">ja      short </span><span style="color:gray">ulRet
</span><span style="color:black">TRANGROUP:1D63                 </span><span style="color:navy">call    </span>EndPage
<span style="color:black">TRANGROUP:1D66
TRANGROUP:1D66 </span><span style="color:gray">ulRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D66                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1D66 </span>endp            UseLine
<span style="color:black">TRANGROUP:1D66
TRANGROUP:1D67
TRANGROUP:1D67 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1D67
TRANGROUP:1D67
TRANGROUP:1D67 </span>proc            ZeroTotals near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D67                 </span><span style="color:navy">mov     di, offset </span>FileCntTotal
<span style="color:black">TRANGROUP:1D6A                 </span><span style="color:navy">mov     cx, </span><span style="color:green">12
</span><span style="color:black">TRANGROUP:1D6D                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:1D6F                 </span><span style="color:navy">rep stosb
</span><span style="color:black">TRANGROUP:1D71                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1D71 </span>endp            ZeroTotals
<span style="color:black">TRANGROUP:1D71
</span><span style="color:maroon">TRANGROUP:1D72 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1D72
TRANGROUP:1D72 </span>CtrlCHandler<span style="color:navy">:                           </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:1D72                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:1D73                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">TRANGROUP:1D74                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:1D75                 </span>assume ds:TRANGROUP
<span style="color:maroon">TRANGROUP:1D75                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">TRANGROUP:1D76                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">TRANGROUP:1D77                 </span><span style="color:navy">push    dx
</span><span style="color:maroon">TRANGROUP:1D78                 </span><span style="color:navy">call    </span>RestUDir
<span style="color:maroon">TRANGROUP:1D7B                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">TRANGROUP:1D7C                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">TRANGROUP:1D7D                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:1D7E                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:1D7F                 </span>assume ds:nothing
<span style="color:maroon">TRANGROUP:1D7F                 </span><span style="color:navy">jmp     [cs:</span>OldCtrlCHandler<span style="color:navy">]
</span><span style="color:black">TRANGROUP:1D84
TRANGROUP:1D84 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1D84
TRANGROUP:1D84
TRANGROUP:1D84 </span>proc            LowerCase near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D84                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">41h </span><span style="color:gray">; &#039;A&#039;
</span><span style="color:black">TRANGROUP:1D86                 </span><span style="color:navy">jb      short </span><span style="color:gray">lcRet
</span><span style="color:black">TRANGROUP:1D88                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">5Ah </span><span style="color:gray">; &#039;Z&#039;
</span><span style="color:black">TRANGROUP:1D8A                 </span><span style="color:navy">ja      short </span><span style="color:gray">lcRet
</span><span style="color:black">TRANGROUP:1D8C                 </span><span style="color:navy">or      al, </span><span style="color:green">20h         </span>; convert to ASCII lowercase
<span style="color:black">TRANGROUP:1D8E
TRANGROUP:1D8E </span><span style="color:gray">lcRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D8E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1D8E </span>endp            LowerCase
<span style="color:black">TRANGROUP:1D8E
TRANGROUP:1D8F
TRANGROUP:1D8F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1D8F
TRANGROUP:1D8F
TRANGROUP:1D8F </span>proc            LowercaseString near    <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D8F                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:1D90                 </span><span style="color:navy">mov     di, si
</span><span style="color:black">TRANGROUP:1D92                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:1D93
TRANGROUP:1D93 </span><span style="color:gray">NextChar</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1D93                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:1D94                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:1D96                 </span><span style="color:navy">jz      short </span><span style="color:gray">EndOfString
</span><span style="color:black">TRANGROUP:1D98                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:1D9B                 </span><span style="color:navy">jz      short </span><span style="color:gray">NextChar_@
</span><span style="color:black">TRANGROUP:1D9D                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:1D9E                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:1D9F                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:1DA1                 </span><span style="color:navy">jz      short </span><span style="color:gray">EndOfString
</span><span style="color:black">TRANGROUP:1DA3                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:1DA4                 </span><span style="color:navy">jmp     short </span><span style="color:gray">NextChar
</span><span style="color:black">TRANGROUP:1DA6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1DA6
TRANGROUP:1DA6 </span><span style="color:gray">NextChar_@</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1DA6                 </span><span style="color:navy">call    </span>LowerCase
<span style="color:black">TRANGROUP:1DA9                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:1DAA                 </span><span style="color:navy">jmp     short </span><span style="color:gray">NextChar
</span><span style="color:black">TRANGROUP:1DAC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1DAC
TRANGROUP:1DAC </span><span style="color:gray">EndOfString</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1DAC                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:1DAD                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1DAD </span>endp            LowercaseString
<span style="color:black">TRANGROUP:1DAD
TRANGROUP:1DAE
TRANGROUP:1DAE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1DAE
TRANGROUP:1DAE
TRANGROUP:1DAE </span>proc            CheckDBCSTailByte near  <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1DAE                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:1DAF                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:1DB0                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:1DB1                 </span><span style="color:navy">mov     cx, di
</span><span style="color:black">TRANGROUP:1DB3
TRANGROUP:1DB3 </span><span style="color:gray">cdtb_check</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1DB3                 </span><span style="color:navy">cmp     di, si
</span><span style="color:black">TRANGROUP:1DB5                 </span><span style="color:navy">jz      short </span><span style="color:gray">cdtb_next
</span><span style="color:black">TRANGROUP:1DB7                 </span><span style="color:navy">dec     di
</span><span style="color:black">TRANGROUP:1DB8                 </span><span style="color:navy">mov     al, [di]
</span><span style="color:black">TRANGROUP:1DBA                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:1DBD                 </span><span style="color:navy">jnz     short </span><span style="color:gray">cdtb_check </span>; not Kanji
<span style="color:black">TRANGROUP:1DBF                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:1DC0
TRANGROUP:1DC0 </span><span style="color:gray">cdtb_next</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1DC0                 </span><span style="color:navy">sub     cx, di
</span><span style="color:black">TRANGROUP:1DC2                 </span><span style="color:navy">xor     cl, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1DC5                 </span><span style="color:navy">test    cl, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:1DC8                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:1DC9                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:1DCA                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:1DCB                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1DCB </span>endp            CheckDBCSTailByte
<span style="color:black">TRANGROUP:1DCB
TRANGROUP:1DCC
TRANGROUP:1DCC </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:1DCC
TRANGROUP:1DCC
TRANGROUP:1DCC </span>proc            PAUSE near              <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1DCC                 </span><span style="color:navy">mov     dx, offset </span>PAUSEMES_PTR
<span style="color:black">TRANGROUP:1DCF                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:1DD2                 </span><span style="color:navy">call    </span>GETKEYSTROKE
<span style="color:black">TRANGROUP:1DD5                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:1DD8                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:1DD8 </span>endp            PAUSE
<span style="color:black">TRANGROUP:1DD8
</span><span style="color:maroon">TRANGROUP:1DD9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1DD9
TRANGROUP:1DD9 </span>ERASE<span style="color:navy">:                                  </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:1DD9                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h         </span>; get command line
<span style="color:maroon">TRANGROUP:1DDC                 </span><span style="color:navy">mov     [ds:</span>COMSW<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; word
<span style="color:maroon">TRANGROUP:1DE2                 </span><span style="color:navy">mov     di, offset </span>PARSE_ERASE
<span style="color:maroon">TRANGROUP:1DE5                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:maroon">TRANGROUP:1DE7
TRANGROUP:1DE7 </span>erase_scan<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1DE7                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">TRANGROUP:1DE9                 </span><span style="color:navy">call    </span>Parse_With_Msg
<span style="color:maroon">TRANGROUP:1DEC                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">TRANGROUP:1DEF                 </span><span style="color:navy">jz      short </span>good_line
<span style="color:maroon">TRANGROUP:1DF1                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1DF4                 </span><span style="color:navy">jnz     short </span>errj2
<span style="color:maroon">TRANGROUP:1DF6                 </span><span style="color:navy">cmp     [ds:</span>PARSE1_SYN<span style="color:navy">], offset </span>SLASH_P_SYN <span style="color:gray">; &quot;/P&quot;
</span><span style="color:maroon">TRANGROUP:1DFC                 </span><span style="color:navy">jz      short </span>set_erase_prompt
<span style="color:maroon">TRANGROUP:1DFE                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:1DFF                 </span><span style="color:navy">lds     si, [ds:</span>PARSE1_ADDR<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1E03                 </span><span style="color:navy">cmp     [byte ptr si+</span><span style="color:#ff8000">1</span><span style="color:navy">], </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:maroon">TRANGROUP:1E07                 </span><span style="color:navy">jnz     short </span>erase_drive_ok
<span style="color:maroon">TRANGROUP:1E09                 </span><span style="color:navy">cmp     [byte ptr si+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1E0D                 </span><span style="color:navy">jnz     short </span>erase_drive_ok
<span style="color:maroon">TRANGROUP:1E0F                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2           </span>; ERROR_FILE_NOT_FOUND
<span style="color:maroon">TRANGROUP:1E12                 </span><span style="color:navy">jmp     short </span>extend_setup
<span style="color:maroon">TRANGROUP:1E14 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1E14
TRANGROUP:1E14 </span>erase_drive_ok<span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1E14                 </span><span style="color:navy">call    </span>Move_To_SrcBuf
<span style="color:maroon">TRANGROUP:1E17                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:1E18                 </span><span style="color:navy">jmp     short </span>erase_scan
<span style="color:maroon">TRANGROUP:1E1A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1E1A
TRANGROUP:1E1A </span>set_erase_prompt<span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1E1A                 </span><span style="color:navy">cmp     [ds:</span>COMSW<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1E1F                 </span><span style="color:navy">jz      short </span>ok_to_set_erase_prompt
<span style="color:maroon">TRANGROUP:1E21                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1           </span>; MoreArgs_Ptr
<span style="color:maroon">TRANGROUP:1E24                 </span><span style="color:navy">call    </span>setup_parse_error_msg
<span style="color:maroon">TRANGROUP:1E27                 </span><span style="color:navy">jmp     short </span>errj2
<span style="color:maroon">TRANGROUP:1E29 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1E29
TRANGROUP:1E29 </span>ok_to_set_erase_prompt<span style="color:navy">:                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1E29                 </span><span style="color:navy">inc     [ds:</span>COMSW<span style="color:navy">]      </span>; word
<span style="color:maroon">TRANGROUP:1E2D                 </span><span style="color:navy">jmp     short </span>erase_scan
<span style="color:maroon">TRANGROUP:1E2F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1E2F
TRANGROUP:1E2F </span>good_line<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1E2F                 </span><span style="color:navy">call    </span>PathCrunch
<span style="color:maroon">TRANGROUP:1E32                 </span><span style="color:navy">jnb     short </span>checkdr
<span style="color:maroon">TRANGROUP:1E34                 </span><span style="color:navy">mov     ax, [ds:</span>Msg_Numb<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1E37                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1E3A                 </span><span style="color:navy">jnz     short </span>extend_setup
<span style="color:maroon">TRANGROUP:1E3C                 </span><span style="color:navy">cmp     [ds:</span>DestIsDir<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1E41                 </span><span style="color:navy">jnz     short </span>badpath_err
<span style="color:maroon">TRANGROUP:1E43
TRANGROUP:1E43 </span>checkdr<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1E43                 </span><span style="color:navy">cmp     [ds:</span>COMSW<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1E48                 </span><span style="color:navy">jz      short </span>notest2j
<span style="color:maroon">TRANGROUP:1E4A                 </span><span style="color:navy">jmp     </span>slashp_erase
<span style="color:maroon">TRANGROUP:1E4D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1E4D
TRANGROUP:1E4D </span>notest2j<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1E4D                 </span><span style="color:navy">jmp     </span>notest2
<span style="color:black">TRANGROUP:1E50 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:1E50 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR BUILDPATH
</span><span style="color:black">TRANGROUP:1E50
TRANGROUP:1E50 </span>badpath_err<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1E50                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3           </span>; ERROR_PATH_NOT_FOUND
<span style="color:black">TRANGROUP:1E53
TRANGROUP:1E53 </span>extend_setup<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1E53                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; ext_msg_class
<span style="color:black">TRANGROUP:1E58                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:black">TRANGROUP:1E5B                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:1E5E
TRANGROUP:1E5E </span>errj2<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:1E5E                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:1E5E </span><span style="color:gray">; END OF FUNCTION CHUNK FOR BUILDPATH
</span><span style="color:maroon">TRANGROUP:1E61 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1E61
TRANGROUP:1E61 </span>CRENAME<span style="color:navy">:                                </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:1E61                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:maroon">TRANGROUP:1E64                 </span><span style="color:navy">mov     di, offset </span>PARSE_RENAME
<span style="color:maroon">TRANGROUP:1E67                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:maroon">TRANGROUP:1E69                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">TRANGROUP:1E6B                 </span><span style="color:navy">call    </span>Parse_With_Msg
<span style="color:maroon">TRANGROUP:1E6E                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1E71                 </span><span style="color:navy">jnz     short </span>crename_parse_error
<span style="color:maroon">TRANGROUP:1E73                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:1E74                 </span><span style="color:navy">lds     si, [ds:</span>PARSE1_ADDR<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1E78                 </span><span style="color:navy">call    </span>Move_To_SrcBuf
<span style="color:maroon">TRANGROUP:1E7B                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:1E7C                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">TRANGROUP:1E7E                 </span><span style="color:navy">call    </span>Parse_With_Msg
<span style="color:maroon">TRANGROUP:1E81                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1E84                 </span><span style="color:navy">jnz     short </span>crename_parse_error
<span style="color:maroon">TRANGROUP:1E86                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:1E87                 </span><span style="color:navy">lds     si, [ds:</span>PARSE1_ADDR<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1E8B                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:maroon">TRANGROUP:1E8D                 </span><span style="color:navy">cmp     [si+</span><span style="color:#ff8000">1</span><span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:1E90                 </span><span style="color:navy">jnz     short </span>ren_no_drive
<span style="color:maroon">TRANGROUP:1E92                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">2
</span><span style="color:maroon">TRANGROUP:1E97                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:maroon">TRANGROUP:1E9A                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], </span><span style="color:#ff8000">0Ah </span>; BadParm_Ptr
<span style="color:maroon">TRANGROUP:1EA0                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:1EA1
TRANGROUP:1EA1 </span>crename_parse_error<span style="color:navy">:                    </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1EA1                 </span><span style="color:navy">jmp     short </span>errj
<span style="color:maroon">TRANGROUP:1EA3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1EA3
TRANGROUP:1EA3 </span>ren_no_drive<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1EA3                 </span><span style="color:navy">mov     di, </span><span style="color:green">6Ch         </span>; FCB+10h
<span style="color:maroon">TRANGROUP:1EA6                 </span><span style="color:navy">mov     ax, </span><span style="color:green">2901h
</span><span style="color:maroon">TRANGROUP:1EA9                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - PARSE FILENAME
<span style="color:maroon">TRANGROUP:1EA9                                         </span>; DS:SI -&gt; string to parse
<span style="color:maroon">TRANGROUP:1EA9                                         </span>; ES:DI -&gt; buffer to fill with unopened FCB
<span style="color:maroon">TRANGROUP:1EA9                                         </span>; AL = bit mask to control parsing
<span style="color:maroon">TRANGROUP:1EAB                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:1EAC                 </span><span style="color:navy">mov     [ds:</span>One_Char_Val<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:1EAF                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:1EB0                 </span><span style="color:navy">mov     di, offset </span>PARSE_RENAME
<span style="color:maroon">TRANGROUP:1EB3                 </span><span style="color:navy">call    </span>parse_check_eol
<span style="color:maroon">TRANGROUP:1EB6                 </span><span style="color:navy">jnz     short </span>crename_parse_error
<span style="color:maroon">TRANGROUP:1EB8                 </span><span style="color:navy">call    </span>PathCrunch
<span style="color:maroon">TRANGROUP:1EBB                 </span><span style="color:navy">mov     dx, offset </span>BADCPMES_PTR
<span style="color:maroon">TRANGROUP:1EBE                 </span><span style="color:navy">jz      short </span>errj2
<span style="color:maroon">TRANGROUP:1EC0                 </span><span style="color:navy">jnb     short </span>notest3
<span style="color:maroon">TRANGROUP:1EC2                 </span><span style="color:navy">mov     ax, [ds:</span>Msg_Numb<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1EC5                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1EC8                 </span><span style="color:navy">jnz     short </span>extend_setup
<span style="color:maroon">TRANGROUP:1ECA                 </span><span style="color:navy">cmp     [ds:</span>DestIsDir<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1ECF                 </span><span style="color:navy">jz      short </span>notest3
<span style="color:maroon">TRANGROUP:1ED1                 </span><span style="color:navy">jmp     </span>badpath_err
<span style="color:maroon">TRANGROUP:1ED4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1ED4
TRANGROUP:1ED4 </span>notest3<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1ED4                 </span><span style="color:navy">mov     al, [ds:</span>One_Char_Val<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1ED7                 </span><span style="color:navy">mov     dx, offset </span>INORNOT_PTR
<span style="color:maroon">TRANGROUP:1EDA                 </span><span style="color:navy">call    </span>pathchrcmp
<span style="color:maroon">TRANGROUP:1EDD                 </span><span style="color:navy">jz      short </span>errj
<span style="color:maroon">TRANGROUP:1EDF                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">17h         </span>; FCB_Rename
<span style="color:maroon">TRANGROUP:1EE1                 </span><span style="color:navy">mov     dx, </span><span style="color:green">5Ch         </span>; FCB
<span style="color:maroon">TRANGROUP:1EE4                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:maroon">TRANGROUP:1EE7                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:maroon">TRANGROUP:1EE9                 </span><span style="color:navy">jnz     short </span>renameok
<span style="color:maroon">TRANGROUP:1EEB                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:maroon">TRANGROUP:1EEE                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">TRANGROUP:1EEF                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:maroon">TRANGROUP:1EF1
TRANGROUP:1EF1 </span>renameok<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1EF1                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">TRANGROUP:1EF2                 </span><span style="color:navy">call    </span>RestUDir
<span style="color:maroon">TRANGROUP:1EF5                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:1EF6                 </span><span style="color:navy">inc     al
</span><span style="color:maroon">TRANGROUP:1EF8                 </span><span style="color:navy">jz      short </span>rn1
<span style="color:maroon">TRANGROUP:1EFA                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:1EFB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1EFB
TRANGROUP:1EFB </span>rn1<span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1EFB                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:1EFC                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">2           </span>; ERROR_FILE_NOT_FOUND
<span style="color:maroon">TRANGROUP:1EFF                 </span><span style="color:navy">jz      short </span>use_renerr
<span style="color:maroon">TRANGROUP:1F01                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">5           </span>; ERROR_ACCESS_DENIED
<span style="color:maroon">TRANGROUP:1F04                 </span><span style="color:navy">jz      short </span>use_renerr
<span style="color:maroon">TRANGROUP:1F06                 </span><span style="color:navy">jmp     </span>extend_setup
<span style="color:maroon">TRANGROUP:1F09 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1F09
TRANGROUP:1F09 </span>use_renerr<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1F09                 </span><span style="color:navy">mov     dx, offset </span>RENERR_PTR
<span style="color:maroon">TRANGROUP:1F0C
TRANGROUP:1F0C </span>errj<span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1F0C                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:1F0F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1F0F                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:1F10 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1F10
TRANGROUP:1F10 </span>TYPEFIL<span style="color:navy">:                                </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:1F10                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:maroon">TRANGROUP:1F13                 </span><span style="color:navy">mov     di, offset </span>PARSE_MRDIR
<span style="color:maroon">TRANGROUP:1F16                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:maroon">TRANGROUP:1F18                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">TRANGROUP:1F1A                 </span><span style="color:navy">call    </span>Parse_With_Msg
<span style="color:maroon">TRANGROUP:1F1D                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1F20                 </span><span style="color:navy">jnz     short </span>typefil_parse_error
<span style="color:maroon">TRANGROUP:1F22                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:1F23                 </span><span style="color:navy">lds     si, [ds:</span>PARSE1_ADDR<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1F27                 </span><span style="color:navy">call    </span>Move_To_SrcBuf
<span style="color:maroon">TRANGROUP:1F2A                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:1F2B                 </span><span style="color:navy">mov     di, offset </span>PARSE_MRDIR
<span style="color:maroon">TRANGROUP:1F2E                 </span><span style="color:navy">call    </span>parse_check_eol
<span style="color:maroon">TRANGROUP:1F31                 </span><span style="color:navy">jz      short </span>gottarg
<span style="color:maroon">TRANGROUP:1F33
TRANGROUP:1F33 </span>typefil_parse_error<span style="color:navy">:                    </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1F33                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:1F36 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1F36
TRANGROUP:1F36 </span>gottarg<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1F36                 </span><span style="color:navy">call    </span>SETPATH
<span style="color:maroon">TRANGROUP:1F39                 </span><span style="color:navy">test    [ds:</span>DestInfo<span style="color:navy">], </span><span style="color:green">2
</span><span style="color:maroon">TRANGROUP:1F3E                 </span><span style="color:navy">jz      short </span>nowilds
<span style="color:maroon">TRANGROUP:1F40                 </span><span style="color:navy">mov     dx, offset </span>INORNOT_PTR
<span style="color:maroon">TRANGROUP:1F43                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:1F46 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1F46
TRANGROUP:1F46 </span>nowilds<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1F46                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">6C00h       </span>; ExtOpen SHL 8
<span style="color:maroon">TRANGROUP:1F49                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">0           </span>; read_open_mode
<span style="color:maroon">TRANGROUP:1F4C                 </span><span style="color:navy">xor     cx, cx          </span>; no special files
<span style="color:maroon">TRANGROUP:1F4E                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">101h        </span>; read_open_flag
<span style="color:maroon">TRANGROUP:1F51                 </span><span style="color:navy">mov     si, offset </span>SrcBuf
<span style="color:maroon">TRANGROUP:1F54                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:maroon">TRANGROUP:1F57                 </span><span style="color:navy">jnb     short </span>typecont
<span style="color:maroon">TRANGROUP:1F59
TRANGROUP:1F59 </span>typerr<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1F59                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">TRANGROUP:1F5A                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:1F5B                 </span>assume ds:TRANGROUP
<span style="color:maroon">TRANGROUP:1F5B                 </span><span style="color:navy">call    </span>Set_Ext_Error_Msg
<span style="color:maroon">TRANGROUP:1F5E                 </span><span style="color:navy">mov     [</span>string_ptr_2<span style="color:navy">], offset </span>SrcBuf
<span style="color:maroon">TRANGROUP:1F64                 </span><span style="color:navy">mov     [</span>extend_buf_sub<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; one_subst
<span style="color:maroon">TRANGROUP:1F69                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:1F6C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1F6C
TRANGROUP:1F6C </span>typecont<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1F6C                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:maroon">TRANGROUP:1F6E                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4400h       </span>; (IOCTL shl 8) or 0
<span style="color:maroon">TRANGROUP:1F71                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:maroon">TRANGROUP:1F74                 </span><span style="color:navy">test    dl, </span><span style="color:green">80h
</span><span style="color:maroon">TRANGROUP:1F77                 </span><span style="color:navy">jz      short </span>not_device
<span style="color:maroon">TRANGROUP:1F79                 </span><span style="color:navy">mov     [</span>File_Size_High<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; indicate it is a device
<span style="color:maroon">TRANGROUP:1F7F                 </span><span style="color:navy">jmp     short </span>dotype
<span style="color:maroon">TRANGROUP:1F81 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1F81
TRANGROUP:1F81 </span>not_device<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1F81                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4202h       </span>; (LSEEK shl 8) or 2
<span style="color:maroon">TRANGROUP:1F84                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">TRANGROUP:1F86                 </span><span style="color:navy">mov     cx, dx
</span><span style="color:maroon">TRANGROUP:1F88                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:maroon">TRANGROUP:1F8B                 </span><span style="color:navy">mov     [</span>File_Size_Low<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:1F8E                 </span><span style="color:navy">mov     [</span>File_Size_High<span style="color:navy">], dx
</span><span style="color:maroon">TRANGROUP:1F92                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4200h       </span>; (LSEEK shl 8) or 0
<span style="color:maroon">TRANGROUP:1F95                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">TRANGROUP:1F97                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:maroon">TRANGROUP:1F9A
TRANGROUP:1F9A </span>dotype<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1F9A                 </span><span style="color:navy">mov     [</span>zflag<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1F9F                 </span><span style="color:navy">mov     ds, [</span>TPA<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1FA3                 </span>assume ds:RESGROUP
<span style="color:maroon">TRANGROUP:1FA3                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">TRANGROUP:1FA5
TRANGROUP:1FA5 </span>typelp<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1FA5                 </span><span style="color:navy">cmp     [cs:</span>zflag<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; Is the ^Z flag set?
<span style="color:maroon">TRANGROUP:1FAB                 </span><span style="color:navy">jz      short </span>tf1       ; no
<span style="color:maroon">TRANGROUP:1FAD                 </span><span style="color:navy">retn                    </span>; yes, return
<span style="color:maroon">TRANGROUP:1FAE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1FAE
TRANGROUP:1FAE </span>tf1<span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1FAE                 </span><span style="color:navy">mov     cx, [cs:</span>BYTCNT<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1FB3                 </span><span style="color:navy">cmp     [cs:</span>File_Size_High<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1 ; is it a device?
<span style="color:maroon">TRANGROUP:1FB9                 </span><span style="color:navy">jz      short </span>typ_read  ; yes, just read from it
<span style="color:maroon">TRANGROUP:1FBB                 </span><span style="color:navy">cmp     [cs:</span>File_Size_High<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; word
<span style="color:maroon">TRANGROUP:1FC1                 </span><span style="color:navy">jz      short </span>lt64k
<span style="color:maroon">TRANGROUP:1FC3                 </span><span style="color:navy">sub     [cs:</span>File_Size_Low<span style="color:navy">], cx
</span><span style="color:maroon">TRANGROUP:1FC8                 </span><span style="color:navy">sbb     [cs:</span>File_Size_High<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:1FCE                 </span><span style="color:navy">jmp     short </span>typ_read
<span style="color:maroon">TRANGROUP:1FD0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1FD0
TRANGROUP:1FD0 </span>lt64k<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1FD0                 </span><span style="color:navy">cmp     cx, [cs:</span>File_Size_Low<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1FD5                 </span><span style="color:navy">jbe     short </span>gtbuf
<span style="color:maroon">TRANGROUP:1FD7                 </span><span style="color:navy">mov     cx, [cs:</span>File_Size_Low<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:1FDC                 </span><span style="color:navy">jcxz    short </span>typelp_ret
<span style="color:maroon">TRANGROUP:1FDE                 </span><span style="color:navy">mov     [cs:</span>File_Size_Low<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; word
<span style="color:maroon">TRANGROUP:1FE5                 </span><span style="color:navy">jmp     short </span>typ_read
<span style="color:maroon">TRANGROUP:1FE7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1FE7
TRANGROUP:1FE7 </span>gtbuf<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1FE7                 </span><span style="color:navy">sub     [cs:</span>File_Size_Low<span style="color:navy">], cx
</span><span style="color:maroon">TRANGROUP:1FEC
TRANGROUP:1FEC </span>typ_read<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1FEC                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Fh         </span>; read
<span style="color:maroon">TRANGROUP:1FEE                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:maroon">TRANGROUP:1FF1                 </span><span style="color:navy">jnb     short </span>tf2
<span style="color:maroon">TRANGROUP:1FF3                 </span><span style="color:navy">jmp     </span>typerr
<span style="color:maroon">TRANGROUP:1FF6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:1FF6
TRANGROUP:1FF6 </span>tf2<span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:1FF6                 </span><span style="color:navy">mov     cx, ax
</span><span style="color:maroon">TRANGROUP:1FF8                 </span><span style="color:navy">jcxz    short </span>typelp_ret
<span style="color:maroon">TRANGROUP:1FFA                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:1FFB                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:1FFC                 </span>assume es:RESGROUP
<span style="color:maroon">TRANGROUP:1FFC                 </span><span style="color:navy">xor     di, di          </span>; Check to see if a ^Z was read.
<span style="color:maroon">TRANGROUP:1FFE                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">TRANGROUP:1FFF                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">1Ah
</span><span style="color:maroon">TRANGROUP:2001                 </span><span style="color:navy">repne scasb
</span><span style="color:maroon">TRANGROUP:2003                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:2004                 </span><span style="color:navy">xchg    ax, cx
</span><span style="color:maroon">TRANGROUP:2005                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:2008                 </span><span style="color:navy">jnz     short </span>foundz
<span style="color:maroon">TRANGROUP:200A                 </span><span style="color:navy">cmp     [byte ptr di-</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">1Ah </span>; double check
<span style="color:maroon">TRANGROUP:200E                 </span><span style="color:navy">jnz     short </span>typecont2 ; No ^Z, continue
<span style="color:maroon">TRANGROUP:2010
TRANGROUP:2010 </span>foundz<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2010                 </span><span style="color:navy">sub     cx, ax
</span><span style="color:maroon">TRANGROUP:2012                 </span><span style="color:navy">dec     cx
</span><span style="color:maroon">TRANGROUP:2013                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">TRANGROUP:2014                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:2015                 </span>assume es:TRANGROUP
<span style="color:maroon">TRANGROUP:2015                 </span><span style="color:navy">not     [es:</span>zflag<span style="color:navy">]      </span>; Turn on ^Z flag so that the routine
<span style="color:maroon">TRANGROUP:2015                                         </span>;  will quit after this write.
<span style="color:maroon">TRANGROUP:201A
TRANGROUP:201A </span>typecont2<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:201A                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">TRANGROUP:201B                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:201E                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;   </span>; Write
<span style="color:maroon">TRANGROUP:2020                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:maroon">TRANGROUP:2023                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">TRANGROUP:2024                 </span><span style="color:navy">jb      short </span>Error_outputj
<span style="color:maroon">TRANGROUP:2026                 </span><span style="color:navy">cmp     ax, cx
</span><span style="color:maroon">TRANGROUP:2028                 </span><span style="color:navy">jnz     short </span>tf3
<span style="color:maroon">TRANGROUP:202A                 </span><span style="color:navy">jmp     </span>typelp
<span style="color:maroon">TRANGROUP:202D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:202D
TRANGROUP:202D </span>tf3<span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:202D                 </span><span style="color:navy">dec     cx
</span><span style="color:maroon">TRANGROUP:202E                 </span><span style="color:navy">cmp     ax, cx
</span><span style="color:maroon">TRANGROUP:2030                 </span><span style="color:navy">jnz     short </span>Error_outputj
<span style="color:maroon">TRANGROUP:2032
TRANGROUP:2032 </span>tf4<span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2032                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:2033 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2033
TRANGROUP:2033 </span>Error_outputj<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2033                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:2036                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4400h       </span>; IOCTL SHL 8
<span style="color:maroon">TRANGROUP:2039                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:maroon">TRANGROUP:203C                 </span><span style="color:navy">test    dl, </span><span style="color:green">80h
</span><span style="color:maroon">TRANGROUP:203F                 </span><span style="color:navy">jnz     short </span>tf4
<span style="color:maroon">TRANGROUP:2041                 </span><span style="color:navy">jmp     </span>error_output
<span style="color:maroon">TRANGROUP:2044 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2044
TRANGROUP:2044 </span>typelp_ret<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2044                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:2045 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2045
TRANGROUP:2045 </span>VOLUME<span style="color:navy">:                                 </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:2045                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:maroon">TRANGROUP:2048                 </span><span style="color:navy">mov     di, offset </span>PARSE_VOL
<span style="color:maroon">TRANGROUP:204B                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:maroon">TRANGROUP:204D                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">TRANGROUP:204F                 </span><span style="color:navy">call    </span>Parse_With_Msg
<span style="color:maroon">TRANGROUP:2052                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">TRANGROUP:2055                 </span><span style="color:navy">jz      short </span>OkVolArg
<span style="color:maroon">TRANGROUP:2057                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:205A                 </span><span style="color:navy">jnz     short </span>badvolarg
<span style="color:maroon">TRANGROUP:205C                 </span><span style="color:navy">mov     di, offset </span>PARSE_VOL
<span style="color:maroon">TRANGROUP:205F                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">TRANGROUP:2061                 </span><span style="color:navy">call    </span>parse_check_eol
<span style="color:maroon">TRANGROUP:2064                 </span><span style="color:navy">jz      short </span>OkVolArg
<span style="color:maroon">TRANGROUP:2066
TRANGROUP:2066 </span>badvolarg<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2066                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:2069
TRANGROUP:2069 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2069
TRANGROUP:2069
TRANGROUP:2069 </span>proc            DisAppend near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2069                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:206A                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:206B                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:206C                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0B700h      </span>; APPENDINSTALL
<span style="color:black">TRANGROUP:206F                 </span><span style="color:navy">call    </span>int_2Fh_indirect
<span style="color:black">TRANGROUP:2072                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:2074                 </span><span style="color:navy">jz      short </span><span style="color:gray">daRet
</span><span style="color:black">TRANGROUP:2076                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0B702h      </span>; APPENDDOS
<span style="color:black">TRANGROUP:2079                 </span><span style="color:navy">call    </span>int_2Fh_indirect
<span style="color:black">TRANGROUP:207C                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:207F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">daRet
</span><span style="color:black">TRANGROUP:2081                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0B706h      </span>; APPENDGETSTATE
<span style="color:black">TRANGROUP:2084                 </span><span style="color:navy">call    </span>int_2Fh_indirect
<span style="color:black">TRANGROUP:2087                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:208B                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:208B                 </span><span style="color:navy">mov     [ds:</span>Append_State<span style="color:navy">], bx
</span><span style="color:black">TRANGROUP:208F                 </span><span style="color:navy">mov     [ds:</span>Append_Flag<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; -1
<span style="color:black">TRANGROUP:2094                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:2096                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0B707h      </span>; APPENDSETSTATE
<span style="color:black">TRANGROUP:2099                 </span><span style="color:navy">call    </span>int_2Fh_indirect
<span style="color:black">TRANGROUP:209C
TRANGROUP:209C </span><span style="color:gray">daRet</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:209C                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:209D                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:209E                 </span>assume es:nothing
<span style="color:black">TRANGROUP:209E                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:209F                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:209F </span>endp            DisAppend
<span style="color:black">TRANGROUP:209F
TRANGROUP:20A0
TRANGROUP:20A0 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:20A0
TRANGROUP:20A0
TRANGROUP:20A0 </span>proc            OkVolArg near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:20A0                 </span><span style="color:navy">call    </span>DisAppend
<span style="color:black">TRANGROUP:20A3                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:20A6                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;   </span>; black (space)
<span style="color:black">TRANGROUP:20A8                 </span><span style="color:navy">call    </span>PRINT_CHAR
<span style="color:black">TRANGROUP:20AB                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:20AC                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:20AD                 </span><span style="color:navy">mov     di, </span><span style="color:green">55h         </span>; FCB-7
<span style="color:black">TRANGROUP:20B0                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0FFh        </span>; -1
<span style="color:black">TRANGROUP:20B2                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:20B3                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:20B5                 </span><span style="color:navy">stosw
</span><span style="color:black">TRANGROUP:20B6                 </span><span style="color:navy">stosw
</span><span style="color:black">TRANGROUP:20B7                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:20B8                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">8           </span>; ATTR_VOLUME_ID
<span style="color:black">TRANGROUP:20BA                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:20BB                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:20BC                 </span><span style="color:navy">mov     cx, </span><span style="color:green">11
</span><span style="color:black">TRANGROUP:20BF                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Fh </span><span style="color:gray">; &#039;?&#039;
</span><span style="color:black">TRANGROUP:20C1                 </span><span style="color:navy">rep stosb
</span><span style="color:black">TRANGROUP:20C3                 </span><span style="color:navy">mov     dx, offset </span>BWDBUF ; DIRBUF
<span style="color:black">TRANGROUP:20C6                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">1Ah         </span>; Set_DMA
<span style="color:black">TRANGROUP:20C8                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:20CB                 </span><span style="color:navy">mov     dx, </span><span style="color:green">55h         </span>; FCB-7
<span style="color:black">TRANGROUP:20CE                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">11h         </span>; Dir_Search_First
<span style="color:black">TRANGROUP:20D0                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:20D3                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:20D4                 </span><span style="color:navy">mov     al, [ds:</span><span style="color:green">5Ch</span><span style="color:navy">]    </span>; [FCB]
<span style="color:black">TRANGROUP:20D7                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;
</span><span style="color:black">TRANGROUP:20D9                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;
</span><span style="color:black">TRANGROUP:20DB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">drvok
</span><span style="color:black">TRANGROUP:20DD                 </span><span style="color:navy">mov     al, [ds:</span>CURDRV<span style="color:navy">]
</span><span style="color:black">TRANGROUP:20E0                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">41h </span><span style="color:gray">; &#039;A&#039;
</span><span style="color:black">TRANGROUP:20E2
TRANGROUP:20E2 </span><span style="color:gray">drvok</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:20E2                 </span><span style="color:navy">mov     [ds:</span>vol_drv<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:20E5                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:20E6                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:20E8                 </span><span style="color:navy">jz      short </span><span style="color:gray">Get_vol_name
</span><span style="color:black">TRANGROUP:20EA                 </span><span style="color:navy">mov     dx, offset </span>VolMes_Ptr_2
<span style="color:black">TRANGROUP:20ED                 </span><span style="color:navy">jmp     short </span><span style="color:gray">print_serial
</span><span style="color:black">TRANGROUP:20EF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:20EF
TRANGROUP:20EF </span><span style="color:gray">Get_vol_name</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:20EF                 </span><span style="color:navy">mov     di, offset </span>CHARBUF
<span style="color:black">TRANGROUP:20F2                 </span><span style="color:navy">mov     dx, di
</span><span style="color:black">TRANGROUP:20F4                 </span><span style="color:navy">mov     si, (offset </span>BWDBUF<span style="color:navy">+</span><span style="color:green">8</span><span style="color:navy">) </span>; offset DIRBUF+8
<span style="color:black">TRANGROUP:20F7                 </span><span style="color:navy">mov     cx, </span><span style="color:green">11
</span><span style="color:black">TRANGROUP:20FA                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:20FC                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:20FE                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:20FF                 </span><span style="color:navy">mov     dx, offset </span>VolMes_Ptr
<span style="color:black">TRANGROUP:2102
TRANGROUP:2102 </span><span style="color:gray">print_serial</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2102                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:2103                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">6900h       </span>; (GetSetMediaID SHL 8)
<span style="color:black">TRANGROUP:2106                 </span><span style="color:navy">mov     bl, [ds:</span><span style="color:green">5Ch</span><span style="color:navy">]    </span>; [FCB]
<span style="color:black">TRANGROUP:210A                 </span><span style="color:navy">mov     dx, offset </span>vol_ioctl_buf
<span style="color:black">TRANGROUP:210D                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:2110                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:2111                 </span><span style="color:navy">jb      short </span><span style="color:gray">printvol_end
</span><span style="color:black">TRANGROUP:2113                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:2116                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;   </span>; blank (space)
<span style="color:black">TRANGROUP:2118                 </span><span style="color:navy">call    </span>PRINT_CHAR
<span style="color:black">TRANGROUP:211B                 </span><span style="color:navy">mov     dx, offset </span>VolSerMes_Ptr
<span style="color:black">TRANGROUP:211E
TRANGROUP:211E </span><span style="color:gray">printvol_end</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:211E                 </span><span style="color:navy">jmp     </span>std_printf
<span style="color:black">TRANGROUP:211E </span>endp            OkVolArg
<span style="color:black">TRANGROUP:211E
TRANGROUP:2121
TRANGROUP:2121 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2121
TRANGROUP:2121
TRANGROUP:2121 </span>proc            Set_Ext_Error_Msg near  <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2121                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:2124                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; ext_msg_class
<span style="color:black">TRANGROUP:2129                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:black">TRANGROUP:212C                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:212F                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:2130                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2130 </span>endp            Set_Ext_Error_Msg
<span style="color:black">TRANGROUP:2130
TRANGROUP:2131
TRANGROUP:2131 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2131
TRANGROUP:2131
TRANGROUP:2131 </span>proc            get_ext_error_number near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2131                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:2132                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:2133                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:2134                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:2135                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:2136                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:2137                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:2138                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:2139                 </span><span style="color:navy">mov     ah, </span><span style="color:green">59h         </span>; GetExtendedError
<span style="color:black">TRANGROUP:213B                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:213D                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET EXTENDED ERROR CODE
<span style="color:black">TRANGROUP:213D                                         </span>; BX = version code (0000h for DOS 3.x)
<span style="color:black">TRANGROUP:213F                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:2140                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2141                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:2142                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:2143                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:2144                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:2145                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:2146                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:2147                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2147 </span>endp            get_ext_error_number
<span style="color:black">TRANGROUP:2147
</span><span style="color:maroon">TRANGROUP:2148 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2148
TRANGROUP:2148 </span>VERSION<span style="color:navy">:                                </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:2148                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:maroon">TRANGROUP:214B                 </span><span style="color:navy">mov     di, offset </span>PARSE_VER
<span style="color:maroon">TRANGROUP:214E                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:maroon">TRANGROUP:2150                 </span><span style="color:navy">call    </span>Parse_With_Msg
<span style="color:maroon">TRANGROUP:2153                 </span><span style="color:navy">mov     bl, </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:2155                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:2158                 </span><span style="color:navy">jz      short </span>verPrintVer
<span style="color:maroon">TRANGROUP:215A                 </span><span style="color:navy">dec     bl
</span><span style="color:maroon">TRANGROUP:215C                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh      </span>; END_OF_LINE
<span style="color:maroon">TRANGROUP:215F                 </span><span style="color:navy">jz      short </span>verPrintVer
<span style="color:maroon">TRANGROUP:2161                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:2164 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2164
TRANGROUP:2164 </span>verPrintVer<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2164                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">TRANGROUP:2165                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:maroon">TRANGROUP:2168                 </span><span style="color:navy">call    </span>PRINT_VERSION
<span style="color:maroon">TRANGROUP:216B                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:maroon">TRANGROUP:216E                 </span><span style="color:navy">mov     ax, </span><span style="color:green">3306h
</span><span style="color:maroon">TRANGROUP:2171                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 5+ Get TRUE Version Number (BL major, BH minor, DL revision, DH flags)
<span style="color:maroon">TRANGROUP:2173                 </span><span style="color:navy">mov     al, dl
</span><span style="color:maroon">TRANGROUP:2175                 </span><span style="color:navy">mov     bh, dh
</span><span style="color:maroon">TRANGROUP:2177                 </span><span style="color:navy">cmp     al, </span><span style="color:green">25          </span>; &#039;Z&#039;-&#039;A&#039;
<span style="color:maroon">TRANGROUP:2179                 </span><span style="color:navy">jbe     short </span>ver1
<span style="color:maroon">TRANGROUP:217B                 </span><span style="color:navy">mov     al, </span><span style="color:green">0E9h        </span>; &#039;*&#039;-&#039;A&#039; ; -23
<span style="color:maroon">TRANGROUP:217D
TRANGROUP:217D </span>ver1<span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:217D                 </span><span style="color:navy">add     al, </span><span style="color:green">30h         </span>; &#039;0&#039;
<span style="color:maroon">TRANGROUP:217F                 </span><span style="color:navy">mov     [ds:</span>One_Char_Val<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:2182                 </span><span style="color:navy">mov     dx, offset </span>dosrev_ptr ; MSG_1090
<span style="color:maroon">TRANGROUP:2185                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:2188                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">TRANGROUP:2189                 </span><span style="color:navy">or      dl, dl
</span><span style="color:maroon">TRANGROUP:218B                 </span><span style="color:navy">jz      short </span>verDone   ; Revision 0
<span style="color:maroon">TRANGROUP:218D                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:maroon">TRANGROUP:218F                 </span><span style="color:navy">shr     bh, cl
</span><span style="color:maroon">TRANGROUP:2191                 </span><span style="color:navy">jb      short </span>verRom
<span style="color:maroon">TRANGROUP:2193                 </span><span style="color:navy">shr     bh, </span><span style="color:green">1
</span><span style="color:maroon">TRANGROUP:2195                 </span><span style="color:navy">jb      short </span>verHma    ; MSG_1093
<span style="color:maroon">TRANGROUP:2197                 </span><span style="color:navy">mov     dx, offset </span>DosLow_Ptr
<span style="color:maroon">TRANGROUP:219A                 </span><span style="color:navy">jmp     short </span>verPrintLoc
<span style="color:maroon">TRANGROUP:219C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:219C
TRANGROUP:219C </span>verRom<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:219C                 </span><span style="color:navy">mov     dx, offset </span>DosRom_Ptr ; MSG_1091
<span style="color:maroon">TRANGROUP:219F                 </span><span style="color:navy">jmp     short </span>verPrintLoc
<span style="color:maroon">TRANGROUP:21A1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:21A1
TRANGROUP:21A1 </span>verHma<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:21A1                 </span><span style="color:navy">mov     dx, offset </span>DosHma_Ptr ; MSG_1092
<span style="color:maroon">TRANGROUP:21A4
TRANGROUP:21A4 </span>verPrintLoc<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:21A4                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:21A7
TRANGROUP:21A7 </span>verDone<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:21A7                 </span><span style="color:navy">jmp     </span>CRLF2
<span style="color:black">TRANGROUP:21AA
TRANGROUP:21AA </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:21AA
TRANGROUP:21AA
TRANGROUP:21AA </span>proc            PRINT_VERSION near      <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:21AA                 </span><span style="color:navy">mov     ah, </span><span style="color:green">30h
</span><span style="color:black">TRANGROUP:21AC                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - GET DOS VERSION
<span style="color:black">TRANGROUP:21AC                                         </span>; Return: AL = major version number (00h for DOS 1.x)
<span style="color:black">TRANGROUP:21AE                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:21AF                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:black">TRANGROUP:21B1                 </span><span style="color:navy">mov     [ds:</span>Major_Ver_Num<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:21B4                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:21B5                 </span><span style="color:navy">xchg    ah, al
</span><span style="color:black">TRANGROUP:21B7                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:black">TRANGROUP:21B9                 </span><span style="color:navy">mov     [ds:</span>Minor_Ver_Num<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:21BC                 </span><span style="color:navy">mov     dx, offset </span>VerMes_Ptr ; MSG_1040
<span style="color:black">TRANGROUP:21BF                 </span><span style="color:navy">jmp     </span>std_printf
<span style="color:black">TRANGROUP:21BF </span>endp            PRINT_VERSION
<span style="color:black">TRANGROUP:21BF
TRANGROUP:21C2
TRANGROUP:21C2 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:21C2
TRANGROUP:21C2
TRANGROUP:21C2 </span>proc            PRINT_PROMPT near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:21C2                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:21C3                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:21C4                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:21C5                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:21C5                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:21C6                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:21C7
TRANGROUP:21C7 </span><span style="color:gray">PP0</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:21C7                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4A10h       </span>; SMARTDRV INSTALLATION CHECK (*)
<span style="color:black">TRANGROUP:21CA                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">0           </span>; (*)
<span style="color:black">TRANGROUP:21CD                 </span><span style="color:navy">int     </span><span style="color:green">2Fh
</span><span style="color:black">TRANGROUP:21CF                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0BABEh      </span>; 0BABEh if installed
<span style="color:black">TRANGROUP:21D2                 </span><span style="color:navy">jnz     short </span><span style="color:gray">PP1
</span><span style="color:black">TRANGROUP:21D4                 </span><span style="color:navy">cmp     cx, </span><span style="color:#ff8000">0           </span>; number of dirty cache elements
<span style="color:black">TRANGROUP:21D7                 </span><span style="color:navy">jnz     short </span><span style="color:gray">PP3
</span><span style="color:black">TRANGROUP:21D9
TRANGROUP:21D9 </span><span style="color:gray">PP1</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:21D9                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:21DA                 </span><span style="color:navy">call    </span>find_prompt
<span style="color:black">TRANGROUP:21DD                 </span><span style="color:navy">jb      short </span><span style="color:gray">PP2
</span><span style="color:black">TRANGROUP:21DF                 </span><span style="color:navy">cmp     [byte ptr es:di], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:21E3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">PP4
</span><span style="color:black">TRANGROUP:21E5
TRANGROUP:21E5 </span><span style="color:gray">PP2</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:21E5                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:21E6                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:21E7                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:21E7                 </span><span style="color:navy">call    </span>build_dir_for_prompt
<span style="color:black">TRANGROUP:21EA                 </span><span style="color:navy">call    </span>PRINT_G
<span style="color:black">TRANGROUP:21ED                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PP8
</span><span style="color:black">TRANGROUP:21EF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:21EF
TRANGROUP:21EF </span><span style="color:gray">PP3</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:21EF                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4A10h       </span>; SMARTDRV - FLUSH BUFFERS (**)
<span style="color:black">TRANGROUP:21F2                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">1           </span>; (**)
<span style="color:black">TRANGROUP:21F5                 </span><span style="color:navy">int     </span><span style="color:green">2Fh
</span><span style="color:black">TRANGROUP:21F7                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PP0
</span><span style="color:black">TRANGROUP:21F9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:21F9
TRANGROUP:21F9 </span><span style="color:gray">PP4</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:21F9                 </span><span style="color:navy">mov     al, [es:di]
</span><span style="color:black">TRANGROUP:21FC                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:21FD                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:21FF                 </span><span style="color:navy">jz      short </span><span style="color:gray">PP8
</span><span style="color:black">TRANGROUP:2201                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">$&#039;
</span><span style="color:black">TRANGROUP:2203                 </span><span style="color:navy">jz      short </span><span style="color:gray">PP5
</span><span style="color:black">TRANGROUP:2205                 </span><span style="color:navy">call    </span>PRINT_CHAR
<span style="color:black">TRANGROUP:2208                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PP4
</span><span style="color:black">TRANGROUP:220A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:220A
TRANGROUP:220A </span><span style="color:gray">PP5</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:220A                 </span><span style="color:navy">mov     al, [es:di]
</span><span style="color:black">TRANGROUP:220D                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:220E                 </span><span style="color:navy">mov     bx, offset </span>PROMPT_TABLE_3 ; PROMPT_TABLE-3
<span style="color:black">TRANGROUP:2211                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:2213                 </span><span style="color:navy">jz      short </span><span style="color:gray">PP8
</span><span style="color:black">TRANGROUP:2215
TRANGROUP:2215 </span><span style="color:gray">PP6</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2215                 </span><span style="color:navy">add     bx, </span><span style="color:#ff8000">3
</span><span style="color:black">TRANGROUP:2218                 </span><span style="color:navy">call    </span>UPCONV
<span style="color:black">TRANGROUP:221B                 </span><span style="color:navy">cmp     al, [bx]
</span><span style="color:black">TRANGROUP:221D                 </span><span style="color:navy">jz      short </span><span style="color:gray">PP7
</span><span style="color:black">TRANGROUP:221F                 </span><span style="color:navy">cmp     [byte ptr bx], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2222                 </span><span style="color:navy">jnz     short </span><span style="color:gray">PP6
</span><span style="color:black">TRANGROUP:2224                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PP4
</span><span style="color:black">TRANGROUP:2226 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2226
TRANGROUP:2226 </span><span style="color:gray">PP7</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2226                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:2227                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:2228                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:2229                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:222A                 </span><span style="color:navy">call    [word ptr bx+</span><span style="color:#ff8000">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:222D                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:222E                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:222F                 </span>assume es:nothing
<span style="color:black">TRANGROUP:222F                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PP4
</span><span style="color:black">TRANGROUP:2231 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2231
TRANGROUP:2231 </span><span style="color:gray">PP8</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2231                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2232                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:2233                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:2233                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2233 </span>endp            PRINT_PROMPT
<span style="color:black">TRANGROUP:2233
</span><span style="color:maroon">TRANGROUP:2234 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2234
TRANGROUP:2234 </span>PRINT_BACK<span style="color:navy">:                             </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:2234                 </span><span style="color:navy">mov     dx, offset </span>dback_ptr
<span style="color:maroon">TRANGROUP:2237                 </span><span style="color:navy">jmp     </span>std_printf
<span style="color:maroon">TRANGROUP:223A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:223A
TRANGROUP:223A </span>PRINT_EQ<span style="color:navy">:                               </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:223A                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Dh </span><span style="color:gray">; &#039;=&#039;
</span><span style="color:maroon">TRANGROUP:223C                 </span><span style="color:navy">jmp     short </span>PRINT_CHAR
<span style="color:maroon">TRANGROUP:223E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:223E
TRANGROUP:223E </span>PRINT_R<span style="color:navy">:                                </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:223E                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:223F                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:2243                 </span><span style="color:navy">mov     al, [byte ptr ds:</span>RetCode<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:2246                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:2247                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:maroon">TRANGROUP:2249                 </span><span style="color:navy">mov     dl, </span><span style="color:green">10
</span><span style="color:maroon">TRANGROUP:224B                 </span><span style="color:navy">mov     si, offset </span>RetCode_str <span style="color:gray">; &quot;000&quot;
</span><span style="color:maroon">TRANGROUP:224E                 </span><span style="color:navy">div     dl
</span><span style="color:maroon">TRANGROUP:2250                 </span><span style="color:navy">add     ah, </span><span style="color:#ff8000">30h </span><span style="color:gray">; &#039;0&#039;
</span><span style="color:maroon">TRANGROUP:2253                 </span><span style="color:navy">mov     [si+</span><span style="color:#ff8000">2</span><span style="color:navy">], ah
</span><span style="color:maroon">TRANGROUP:2256                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:maroon">TRANGROUP:2258                 </span><span style="color:navy">div     dl
</span><span style="color:maroon">TRANGROUP:225A                 </span><span style="color:navy">add     ax, </span><span style="color:#ff8000">3030h
</span><span style="color:maroon">TRANGROUP:225D                 </span><span style="color:navy">mov     [si], ax
</span><span style="color:maroon">TRANGROUP:225F                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">30h </span><span style="color:gray">; &#039;0&#039;
</span><span style="color:maroon">TRANGROUP:2261                 </span><span style="color:navy">jnz     short </span>Print_R_@
<span style="color:maroon">TRANGROUP:2263                 </span><span style="color:navy">inc     si
</span><span style="color:maroon">TRANGROUP:2264                 </span><span style="color:navy">cmp     ah, </span><span style="color:#ff8000">30h </span><span style="color:gray">; &#039;0&#039;
</span><span style="color:maroon">TRANGROUP:2267                 </span><span style="color:navy">jnz     short </span>Print_R_@
<span style="color:maroon">TRANGROUP:2269                 </span><span style="color:navy">inc     si
</span><span style="color:maroon">TRANGROUP:226A
TRANGROUP:226A </span>Print_R_@<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:226A                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], si
</span><span style="color:maroon">TRANGROUP:226E                 </span><span style="color:navy">clc
</span><span style="color:maroon">TRANGROUP:226F                 </span><span style="color:navy">jmp     short </span>Print_R_@@
<span style="color:maroon">TRANGROUP:226F </span><span style="color:gray">; ---------------------------------------------------------------------------
TRANGROUP:2271 </span>RetCode_str     <span style="color:navy">db &#039;000&#039;,0              </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:2275 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2275
TRANGROUP:2275 </span>PRINT_ESC<span style="color:navy">:                              </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:2275                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">1Bh
</span><span style="color:maroon">TRANGROUP:2277                 </span><span style="color:navy">jmp     short </span>PRINT_CHAR
<span style="color:black">TRANGROUP:2279
TRANGROUP:2279 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2279
TRANGROUP:2279
TRANGROUP:2279 </span>proc            PRINT_G near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2279                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Eh </span><span style="color:gray">; &#039;&gt;&#039;   </span>; RABRACKET
<span style="color:black">TRANGROUP:227B                 </span><span style="color:navy">jmp     short </span>PRINT_CHAR
<span style="color:black">TRANGROUP:227B </span>endp            PRINT_G
<span style="color:black">TRANGROUP:227B
</span><span style="color:maroon">TRANGROUP:227D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:227D
TRANGROUP:227D </span>PRINT_L<span style="color:navy">:                                </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:227D                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Ch </span><span style="color:gray">; &#039;&lt;&#039;   </span>; LABRACKET
<span style="color:maroon">TRANGROUP:227F                 </span><span style="color:navy">jmp     short </span>PRINT_CHAR
<span style="color:maroon">TRANGROUP:2281 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2281
TRANGROUP:2281 </span>Print_B<span style="color:navy">:                                </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:2281                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">7Ch </span><span style="color:gray">; &#039;|&#039;   </span>; VBAR
<span style="color:black">TRANGROUP:2283
TRANGROUP:2283 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2283
TRANGROUP:2283
TRANGROUP:2283 </span>proc            PRINT_CHAR near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2283                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:2284                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:2285                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2286                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:2287                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:2288                 </span><span style="color:navy">mov     dl, al
</span><span style="color:black">TRANGROUP:228A                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2           </span>; STD_CON_OUTPUT
<span style="color:black">TRANGROUP:228C                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - DISPLAY OUTPUT
<span style="color:black">TRANGROUP:228C                                         </span>; DL = character to send to standard output
<span style="color:black">TRANGROUP:228E                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:228F                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:2290                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2291                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2291 </span>endp            PRINT_CHAR
<span style="color:black">TRANGROUP:2291
</span><span style="color:maroon">TRANGROUP:2292 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2292
TRANGROUP:2292 </span>PRINT_DRIVE<span style="color:navy">:                            </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:2292                 </span><span style="color:navy">mov     ah, </span><span style="color:green">19h
</span><span style="color:maroon">TRANGROUP:2294                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - GET DEFAULT DISK NUMBER
<span style="color:maroon">TRANGROUP:2296                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">41h </span><span style="color:gray">; &#039;A&#039;
</span><span style="color:maroon">TRANGROUP:2298                 </span><span style="color:navy">call    </span>PRINT_CHAR
<span style="color:maroon">TRANGROUP:229B                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:229C
TRANGROUP:229C </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:229C
TRANGROUP:229C
TRANGROUP:229C </span>proc            build_dir_for_prompt near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:229C                 </span><span style="color:navy">xor     dl, dl
</span><span style="color:black">TRANGROUP:229E                 </span><span style="color:navy">mov     si, offset </span>BWDBUF
<span style="color:black">TRANGROUP:22A1                 </span><span style="color:navy">mov     di, si
</span><span style="color:black">TRANGROUP:22A3                 </span><span style="color:navy">mov     al, [ds:</span>CURDRV<span style="color:navy">]
</span><span style="color:black">TRANGROUP:22A6                 </span><span style="color:navy">add     al, &#039;</span><span style="color:green">A&#039;
</span><span style="color:black">TRANGROUP:22A8                 </span><span style="color:navy">mov     ah, &#039;</span><span style="color:green">:&#039;
</span><span style="color:black">TRANGROUP:22AA                 </span><span style="color:navy">stosw
</span><span style="color:black">TRANGROUP:22AB                 </span><span style="color:navy">mov     al, [ds:</span>DIRCHAR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:22AE                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:22AF                 </span><span style="color:navy">xchg    si, di
</span><span style="color:black">TRANGROUP:22B1                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:22B5                 </span><span style="color:navy">mov     ah, </span><span style="color:green">47h
</span><span style="color:black">TRANGROUP:22B7                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET CURRENT DIRECTORY
<span style="color:black">TRANGROUP:22B7                                         </span>; DL = drive (0=default, 1=A, etc.)
<span style="color:black">TRANGROUP:22B7                                         </span>; DS:SI points to 64-byte buffer area
<span style="color:black">TRANGROUP:22B9
TRANGROUP:22B9 </span>Print_R_@@<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:22B9                 </span><span style="color:navy">mov     dx, offset </span>string_buf_ptr
<span style="color:black">TRANGROUP:22BC                 </span><span style="color:navy">jnb     short </span><span style="color:gray">doprint
</span><span style="color:black">TRANGROUP:22BE                 </span><span style="color:navy">mov     dx, offset </span>BADCURDRV
<span style="color:black">TRANGROUP:22C1
TRANGROUP:22C1 </span><span style="color:gray">doprint</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:22C1                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:22C4                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:22C4 </span>endp            build_dir_for_prompt
<span style="color:black">TRANGROUP:22C4
TRANGROUP:22C5
TRANGROUP:22C5 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:22C5
TRANGROUP:22C5
TRANGROUP:22C5 </span>proc            build_dir_for_chdir near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:22C5                 </span><span style="color:navy">call    </span>build_dir_string
<span style="color:black">TRANGROUP:22C8                 </span><span style="color:navy">mov     dx, offset </span>BWDBUF ; DIRBUF
<span style="color:black">TRANGROUP:22CB                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:22CF                 </span><span style="color:navy">mov     dx, offset </span>string_buf_ptr
<span style="color:black">TRANGROUP:22D2                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:22D5                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:22D5 </span>endp            build_dir_for_chdir
<span style="color:black">TRANGROUP:22D5
TRANGROUP:22D6
TRANGROUP:22D6 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:22D6
TRANGROUP:22D6
TRANGROUP:22D6 </span>proc            build_dir_string near   <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:22D6                 </span><span style="color:navy">mov     dl, [ds:</span><span style="color:green">5Ch</span><span style="color:navy">]    </span>; FCB
<span style="color:black">TRANGROUP:22DA                 </span><span style="color:navy">mov     al, dl
</span><span style="color:black">TRANGROUP:22DC                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;
</span><span style="color:black">TRANGROUP:22DE                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;
</span><span style="color:black">TRANGROUP:22E0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">gotdrive
</span><span style="color:black">TRANGROUP:22E2                 </span><span style="color:navy">add     al, [ds:</span>CURDRV<span style="color:navy">]
</span><span style="color:black">TRANGROUP:22E6                 </span><span style="color:navy">inc     al
</span><span style="color:black">TRANGROUP:22E8
TRANGROUP:22E8 </span><span style="color:gray">gotdrive</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:22E8                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:22E9                 </span><span style="color:navy">mov     si, (offset </span>BWDBUF<span style="color:navy">+</span><span style="color:green">3</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:22EC                 </span><span style="color:navy">mov     ah, </span><span style="color:green">47h
</span><span style="color:black">TRANGROUP:22EE                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET CURRENT DIRECTORY
<span style="color:black">TRANGROUP:22EE                                         </span>; DL = drive (0=default, 1=A, etc.)
<span style="color:black">TRANGROUP:22EE                                         </span>; DS:SI points to 64-byte buffer area
<span style="color:black">TRANGROUP:22F0                 </span><span style="color:navy">jnb     short </span><span style="color:gray">dpbisok
</span><span style="color:black">TRANGROUP:22F2                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:22F3                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:22F4                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:22F4                 </span><span style="color:navy">jmp     </span>DRVBAD
<span style="color:black">TRANGROUP:22F7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:22F7
TRANGROUP:22F7 </span><span style="color:gray">dpbisok</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:22F7                 </span><span style="color:navy">mov     di, offset </span>BWDBUF
<span style="color:black">TRANGROUP:22FA                 </span><span style="color:navy">mov     dx, di
</span><span style="color:black">TRANGROUP:22FC                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:22FD                 </span><span style="color:navy">mov     ah, &#039;</span><span style="color:green">:&#039;
</span><span style="color:black">TRANGROUP:22FF                 </span><span style="color:navy">stosw
</span><span style="color:black">TRANGROUP:2300                 </span><span style="color:navy">mov     al, [</span>DIRCHAR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2303                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2304                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2304 </span>endp            build_dir_string
<span style="color:black">TRANGROUP:2304
TRANGROUP:2305
TRANGROUP:2305 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2305
TRANGROUP:2305
TRANGROUP:2305 </span>proc            PATH near               <span style="color:#8080ff">; ...
</span><span style="color:black">TRANGROUP:2305                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:2307                 </span><span style="color:navy">mov     di, offset </span>SRCXNAME
<span style="color:black">TRANGROUP:230A                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:230B                 </span><span style="color:navy">dec     di
</span><span style="color:black">TRANGROUP:230C                 </span><span style="color:navy">call    </span>PGETARG
<span style="color:black">TRANGROUP:230F                 </span><span style="color:navy">jz      short </span><span style="color:gray">disppath
</span><span style="color:black">TRANGROUP:2311                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Bh </span><span style="color:gray">; &#039;;&#039;   </span>; semicolon
<span style="color:black">TRANGROUP:2313                 </span><span style="color:navy">jnz     short </span><span style="color:gray">pathslp
</span><span style="color:black">TRANGROUP:2315                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:2316                 </span><span style="color:navy">jmp     short </span><span style="color:gray">scan_white
</span><span style="color:black">TRANGROUP:2318 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2318
TRANGROUP:2318 </span><span style="color:gray">pathslp</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2318                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2319                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh         </span>; END_OF_LINE_IN
<span style="color:black">TRANGROUP:231B                 </span><span style="color:navy">jz      short </span><span style="color:gray">path_eol
</span><span style="color:black">TRANGROUP:231D                 </span><span style="color:navy">call    </span>testkanj        ; See if DBCS
<span style="color:black">TRANGROUP:2320                 </span><span style="color:navy">jz      short </span><span style="color:gray">notkanj2  </span>; No - continue
<span style="color:black">TRANGROUP:2322                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2323                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2324
TRANGROUP:2324 </span><span style="color:gray">path_hold</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2324                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2325                 </span><span style="color:navy">jmp     short </span><span style="color:gray">pathslp
</span><span style="color:black">TRANGROUP:2327 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2327
TRANGROUP:2327 </span><span style="color:gray">notkanj2</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2327                 </span><span style="color:navy">call    </span>UPCONV          ; upper case the character
<span style="color:black">TRANGROUP:232A                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Bh </span><span style="color:gray">; &#039;;&#039;   </span>; semicolon
<span style="color:black">TRANGROUP:232C                 </span><span style="color:navy">jz      short </span><span style="color:gray">path_hold
</span><span style="color:black">TRANGROUP:232E                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:2331                 </span><span style="color:navy">jnz     short </span><span style="color:gray">path_hold
</span><span style="color:black">TRANGROUP:2333
TRANGROUP:2333 </span><span style="color:gray">scan_white</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2333                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2334                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh         </span>; END_OF_LINE_IN
<span style="color:black">TRANGROUP:2336                 </span><span style="color:navy">jz      short </span><span style="color:gray">path_eol
</span><span style="color:black">TRANGROUP:2338                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;   </span>; blank
<span style="color:black">TRANGROUP:233A                 </span><span style="color:navy">jz      short </span><span style="color:gray">scan_white
</span><span style="color:black">TRANGROUP:233C                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">9           </span>; tab_chr
<span style="color:black">TRANGROUP:233E                 </span><span style="color:navy">jz      short </span><span style="color:gray">scan_white
</span><span style="color:black">TRANGROUP:2340                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:black">TRANGROUP:2343                 </span><span style="color:navy">mov     [</span>extend_buf_ptr<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; MoreArgs_Ptr
<span style="color:black">TRANGROUP:2349                 </span><span style="color:navy">mov     [</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">2 </span>; parse_msg_class
<span style="color:black">TRANGROUP:234E                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:2351 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2351
TRANGROUP:2351 </span><span style="color:gray">path_eol</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2351                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:2353                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2354                 </span><span style="color:navy">call    </span>find_path
<span style="color:black">TRANGROUP:2357                 </span><span style="color:navy">call    </span>delete_path
<span style="color:black">TRANGROUP:235A                 </span><span style="color:navy">call    </span>scan_double_null
<span style="color:black">TRANGROUP:235D                 </span><span style="color:navy">call    </span>move_name
<span style="color:black">TRANGROUP:2360                 </span><span style="color:navy">mov     si, offset </span>SRCXNAME
<span style="color:black">TRANGROUP:2363
TRANGROUP:2363 </span><span style="color:gray">store_path</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2363                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2364                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2366                 </span><span style="color:navy">jz      short </span><span style="color:gray">got_paths
</span><span style="color:black">TRANGROUP:2368                 </span><span style="color:navy">call    </span>store_char
<span style="color:black">TRANGROUP:236B                 </span><span style="color:navy">jmp     short </span><span style="color:gray">store_path
</span><span style="color:black">TRANGROUP:236D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:236D
TRANGROUP:236D </span><span style="color:gray">got_paths</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:236D                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:236F                 </span><span style="color:navy">stosw
</span><span style="color:black">TRANGROUP:2370                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2371 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2371
TRANGROUP:2371 </span><span style="color:gray">disppath</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2371                 </span><span style="color:navy">call    </span>find_path
<span style="color:black">TRANGROUP:2374                 </span><span style="color:navy">call    </span>print_path
<span style="color:black">TRANGROUP:2377                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:237A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:237A </span>endp            PATH
<span style="color:black">TRANGROUP:237A
TRANGROUP:237B
TRANGROUP:237B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:237B
TRANGROUP:237B
TRANGROUP:237B </span>proc            print_path near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:237B                 </span><span style="color:navy">cmp     [byte ptr es:di], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:237F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">path1
</span><span style="color:black">TRANGROUP:2381
TRANGROUP:2381 </span><span style="color:gray">path0</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2381                 </span><span style="color:navy">mov     dx, offset </span>NULLPATH_PTR
<span style="color:black">TRANGROUP:2384                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:2385                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2386                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:2386                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:2387                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:2388                 </span><span style="color:navy">jmp     </span>std_printf
<span style="color:black">TRANGROUP:238B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:238B
TRANGROUP:238B </span><span style="color:gray">path1</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:238B                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:238C                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:238D                 </span><span style="color:navy">sub     di, </span><span style="color:#ff8000">5
</span><span style="color:black">TRANGROUP:2390                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:2392                 </span><span style="color:navy">call    </span>SCASB2          ; Look for null
<span style="color:black">TRANGROUP:2395                 </span><span style="color:navy">cmp     cx, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:2399                 </span><span style="color:navy">jz      short </span><span style="color:gray">path0
</span><span style="color:black">TRANGROUP:239B                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:239C                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:239D                 </span><span style="color:navy">mov     di, offset </span>TPBUF ; Arg_Buf ; = TPBUF
<span style="color:black">TRANGROUP:23A0                 </span><span style="color:navy">mov     dx, </span><span style="color:green">256
</span><span style="color:black">TRANGROUP:23A3                 </span><span style="color:navy">sub     dx, cx          </span>; ch = 0
<span style="color:black">TRANGROUP:23A5                 </span><span style="color:navy">xchg    dx, cx          </span>; cl = neg cl (256-cl)
<span style="color:black">TRANGROUP:23A7                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:23A9                 </span><span style="color:navy">mov     dx, offset </span>arg_buf_ptr
<span style="color:black">TRANGROUP:23AC                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:23AD                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:23AE                 </span><span style="color:navy">jmp     </span>std_printf
<span style="color:black">TRANGROUP:23AE </span>endp            print_path
<span style="color:black">TRANGROUP:23AE
TRANGROUP:23B1
TRANGROUP:23B1 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:23B1
TRANGROUP:23B1
TRANGROUP:23B1 </span>proc            CLS near                <span style="color:#8080ff">; ...
</span><span style="color:black">TRANGROUP:23B1                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">1Ah
</span><span style="color:black">TRANGROUP:23B3                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:23B5                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - DOS 4+ ANSI.SYS internal - INSTALLATION CHECK
<span style="color:black">TRANGROUP:23B5                                         </span>; Return: AL = FFh if installed
<span style="color:black">TRANGROUP:23B7                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:23B9                 </span><span style="color:navy">jz      short </span><span style="color:gray">ansicls
</span><span style="color:black">TRANGROUP:23BB                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">440Ch       </span>; (IOCTL SHL 8) + generic_ioctl_handle
<span style="color:black">TRANGROUP:23BE                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">1           </span>; handle
<span style="color:black">TRANGROUP:23C1                 </span><span style="color:navy">mov     ch, </span><span style="color:#ff8000">3           </span>; CON device
<span style="color:black">TRANGROUP:23C3                 </span><span style="color:navy">mov     cl, </span><span style="color:green">7Fh         </span>; minor function, get display info
<span style="color:black">TRANGROUP:23C5                 </span><span style="color:navy">mov     dx, offset </span>Display_Ioctl
<span style="color:black">TRANGROUP:23C8                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL -
<span style="color:black">TRANGROUP:23CA                 </span><span style="color:navy">jb      short </span><span style="color:gray">no_variable
</span><span style="color:black">TRANGROUP:23CC                 </span><span style="color:navy">mov     ax, [</span>LinPerPag<span style="color:navy">]
</span><span style="color:black">TRANGROUP:23CF                 </span><span style="color:navy">mov     dh, al
</span><span style="color:black">TRANGROUP:23D1                 </span><span style="color:navy">mov     ax, [</span>display_width<span style="color:navy">]
</span><span style="color:black">TRANGROUP:23D4                 </span><span style="color:navy">mov     dl, al
</span><span style="color:black">TRANGROUP:23D6                 </span><span style="color:navy">jmp     short </span><span style="color:gray">regcls
</span><span style="color:black">TRANGROUP:23D8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:23D8
TRANGROUP:23D8 </span><span style="color:gray">no_variable</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:23D8                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">1           </span>; stdout
<span style="color:black">TRANGROUP:23DB                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4400h
</span><span style="color:black">TRANGROUP:23DE                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL - GET DEVICE INFORMATION
<span style="color:black">TRANGROUP:23DE                                         </span>; BX = file or device handle
<span style="color:black">TRANGROUP:23E0                 </span><span style="color:navy">test    dl, </span><span style="color:green">80h         </span>; devid_ISDEV
<span style="color:black">TRANGROUP:23E3                 </span><span style="color:navy">jz      short </span><span style="color:gray">ansicls
</span><span style="color:black">TRANGROUP:23E5                 </span><span style="color:navy">test    dl, </span><span style="color:green">10h         </span>; devid_SPECIAL
<span style="color:black">TRANGROUP:23E8                 </span><span style="color:navy">jnz     short </span><span style="color:gray">cls_normal
</span><span style="color:black">TRANGROUP:23EA
TRANGROUP:23EA </span><span style="color:gray">ansicls</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:23EA                 </span><span style="color:navy">call    </span>ansi_cls
<span style="color:black">TRANGROUP:23ED                 </span><span style="color:navy">jmp     short </span><span style="color:gray">cls_ret
</span><span style="color:black">TRANGROUP:23EF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:23EF
TRANGROUP:23EF </span><span style="color:gray">cls_normal</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:23EF                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0Fh
</span><span style="color:black">TRANGROUP:23F1                 </span><span style="color:navy">int     </span><span style="color:green">10h             </span>; - VIDEO - GET CURRENT VIDEO MODE
<span style="color:black">TRANGROUP:23F1                                         </span>; Return: AH = number of columns on screen
<span style="color:black">TRANGROUP:23F1                                         </span>; AL = current video mode
<span style="color:black">TRANGROUP:23F1                                         </span>; BH = current active display page
<span style="color:black">TRANGROUP:23F3                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3           </span>; video_alpha
<span style="color:black">TRANGROUP:23F5                 </span><span style="color:navy">jbe     short </span><span style="color:gray">DoAlpha
</span><span style="color:black">TRANGROUP:23F7                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">7           </span>; video_bw
<span style="color:black">TRANGROUP:23F9                 </span><span style="color:navy">jz      short </span><span style="color:gray">DoAlpha
</span><span style="color:black">TRANGROUP:23FB                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:23FD                 </span><span style="color:navy">int     </span><span style="color:green">10h             </span>; - VIDEO - SET VIDEO MODE
<span style="color:black">TRANGROUP:23FD                                         </span>; AL = mode
<span style="color:black">TRANGROUP:23FF                 </span><span style="color:navy">jmp     short </span><span style="color:gray">cls_ret
</span><span style="color:black">TRANGROUP:2401 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2401
TRANGROUP:2401 </span><span style="color:gray">DoAlpha</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2401                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:2402                 </span><span style="color:navy">mov     ax, </span><span style="color:green">40h         </span>; ROMBIOS_DATA segment
<span style="color:black">TRANGROUP:2405                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:black">TRANGROUP:2407                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:2407                 </span><span style="color:navy">mov     dx, [ds:</span><span style="color:green">4Ah</span><span style="color:navy">]    </span>; [CRT_Cols]
<span style="color:black">TRANGROUP:240B                 </span><span style="color:navy">mov     dh, [ds:</span><span style="color:green">84h</span><span style="color:navy">]    </span>; [CRT_Rows]
<span style="color:black">TRANGROUP:240F                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:2410                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:2410                 </span><span style="color:navy">or      dh, dh
</span><span style="color:black">TRANGROUP:2412                 </span><span style="color:navy">jnz     short </span><span style="color:gray">regcls
</span><span style="color:black">TRANGROUP:2414                 </span><span style="color:navy">mov     dh, </span><span style="color:green">25          </span>; LINESPERPAGE
<span style="color:black">TRANGROUP:2416
TRANGROUP:2416 </span><span style="color:gray">regcls</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2416                 </span><span style="color:navy">inc     dh
</span><span style="color:black">TRANGROUP:2418                 </span><span style="color:navy">call    </span>reg_cls
<span style="color:black">TRANGROUP:241B
TRANGROUP:241B </span><span style="color:gray">cls_ret</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:241B                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:241B </span>endp            CLS
<span style="color:black">TRANGROUP:241B
TRANGROUP:241C
TRANGROUP:241C </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:241C
TRANGROUP:241C
TRANGROUP:241C </span>proc            reg_cls near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:241C                 </span><span style="color:navy">dec     dh              </span>; Clear the screen using INT 10H
<span style="color:black">TRANGROUP:241E                 </span><span style="color:navy">dec     dl
</span><span style="color:black">TRANGROUP:2420                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:2421                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0Bh
</span><span style="color:black">TRANGROUP:2423
TRANGROUP:2423 </span><span style="color:navy">loc_4CB3:
</span><span style="color:black">TRANGROUP:2423                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:2425                 </span><span style="color:navy">int     </span><span style="color:green">10h             </span>; - VIDEO - SET COLOR PALETTE
<span style="color:black">TRANGROUP:2425                                         </span>; BH = 00h, BL = border color
<span style="color:black">TRANGROUP:2425                                         </span>; BH = 01h, BL = palette (0-3)
<span style="color:black">TRANGROUP:2427                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:2428                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:242A                 </span><span style="color:navy">mov     cx, ax
</span><span style="color:black">TRANGROUP:242C                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">6
</span><span style="color:black">TRANGROUP:242E                 </span><span style="color:navy">mov     bh, </span><span style="color:#ff8000">7
</span><span style="color:black">TRANGROUP:2430                 </span><span style="color:navy">xor     bl, bl
</span><span style="color:black">TRANGROUP:2432                 </span><span style="color:navy">int     </span><span style="color:green">10h             </span>; - VIDEO - SCROLL PAGE UP
<span style="color:black">TRANGROUP:2432                                         </span>; AL = number of lines to scroll window (0 = blank whole window)
<span style="color:black">TRANGROUP:2432                                         </span>; BH = attributes to be used on blanked lines
<span style="color:black">TRANGROUP:2432                                         </span>; CH,CL = row,column of upper left corner of window to scroll
<span style="color:black">TRANGROUP:2432                                         </span>; DH,DL = row,column of lower right corner of window
<span style="color:black">TRANGROUP:2434                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0Fh
</span><span style="color:black">TRANGROUP:2436                 </span><span style="color:navy">int     </span><span style="color:green">10h             </span>; - VIDEO - GET CURRENT VIDEO MODE
<span style="color:black">TRANGROUP:2436                                         </span>; Return: AH = number of columns on screen
<span style="color:black">TRANGROUP:2436                                         </span>; AL = current video mode
<span style="color:black">TRANGROUP:2436                                         </span>; BH = current active display page
<span style="color:black">TRANGROUP:2438                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:243A                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:243C                 </span><span style="color:navy">int     </span><span style="color:green">10h             </span>; - VIDEO - SET CURSOR POSITION
<span style="color:black">TRANGROUP:243C                                         </span>; DH,DL = row, column (0,0 = upper left)
<span style="color:black">TRANGROUP:243C                                         </span>; BH = page number
<span style="color:black">TRANGROUP:243E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:243E </span>endp            reg_cls
<span style="color:black">TRANGROUP:243E
TRANGROUP:243F
TRANGROUP:243F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:243F
TRANGROUP:243F
TRANGROUP:243F </span>proc            ansi_cls near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:243F                 </span><span style="color:navy">mov     si, offset </span>CLSSTRING
<span style="color:black">TRANGROUP:2442                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2443                 </span><span style="color:navy">mov     cl, al
</span><span style="color:black">TRANGROUP:2445                 </span><span style="color:navy">xor     ch, ch
</span><span style="color:black">TRANGROUP:2447                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">6
</span><span style="color:black">TRANGROUP:2449
TRANGROUP:2449 </span><span style="color:gray">clrloop</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2449                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:244A                 </span><span style="color:navy">mov     dl, al
</span><span style="color:black">TRANGROUP:244C                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - DIRECT CONSOLE I/O CHARACTER OUTPUT
<span style="color:black">TRANGROUP:244C                                         </span>; DL = character &lt;&gt; FFh
<span style="color:black">TRANGROUP:244C                                         </span>;  Return: ZF set = no character
<span style="color:black">TRANGROUP:244C                                         </span>;   ZF clear = character recieved, AL = character
<span style="color:black">TRANGROUP:244E                 </span><span style="color:navy">loop    </span><span style="color:gray">clrloop
</span><span style="color:black">TRANGROUP:2450                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2450 </span>endp            ansi_cls
<span style="color:black">TRANGROUP:2450
TRANGROUP:2451
TRANGROUP:2451 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2451
TRANGROUP:2451
TRANGROUP:2451 </span>proc            CTTY far                <span style="color:#8080ff">; ...
</span><span style="color:black">TRANGROUP:2451                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:2452                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2453                 </span>assume es:nothing
<span style="color:black">TRANGROUP:2453                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:black">TRANGROUP:2456                 </span><span style="color:navy">mov     di, offset </span>PARSE_CTTY
<span style="color:black">TRANGROUP:2459                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:245B                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:245D                 </span><span style="color:navy">call    </span>cmd_parse
<span style="color:black">TRANGROUP:2460                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:2463                 </span><span style="color:navy">jz      short </span><span style="color:gray">ctty_error
</span><span style="color:black">TRANGROUP:2465                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2468                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ctty_error
</span><span style="color:black">TRANGROUP:246A                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:246B                 </span><span style="color:navy">lds     si, [ds:</span>PARSE1_ADDR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:246F                 </span><span style="color:navy">mov     di, offset </span>SrcBuf
<span style="color:black">TRANGROUP:2472
TRANGROUP:2472 </span><span style="color:gray">ctty_move_filename</span><span style="color:navy">:                     </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2472                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2473                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2474                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2476                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ctty_move_filename
</span><span style="color:black">TRANGROUP:2478                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:2479                 </span><span style="color:navy">mov     di, offset </span>PARSE_CTTY
<span style="color:black">TRANGROUP:247C                 </span><span style="color:navy">call    </span>parse_check_eol
<span style="color:black">TRANGROUP:247F                 </span><span style="color:navy">jz      short </span><span style="color:gray">nocolon
</span><span style="color:black">TRANGROUP:2481
TRANGROUP:2481 </span><span style="color:gray">ctty_error</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2481                 </span><span style="color:navy">jmp     short </span><span style="color:gray">isbaddev
</span><span style="color:black">TRANGROUP:2483 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2483
TRANGROUP:2483 </span><span style="color:gray">nocolon</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2483                 </span><span style="color:navy">mov     dx, offset </span>SrcBuf
<span style="color:black">TRANGROUP:2486                 </span><span style="color:navy">mov     ax, </span><span style="color:green">3D02h
</span><span style="color:black">TRANGROUP:2489                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - OPEN DISK FILE WITH HANDLE
<span style="color:black">TRANGROUP:2489                                         </span>; DS:DX -&gt; ASCIZ filename
<span style="color:black">TRANGROUP:2489                                         </span>; AL = access mode
<span style="color:black">TRANGROUP:2489                                         </span>; 2 - read &amp; write
<span style="color:black">TRANGROUP:248B                 </span><span style="color:navy">jb      short </span><span style="color:gray">isbaddev
</span><span style="color:black">TRANGROUP:248D                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:248F                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4400h
</span><span style="color:black">TRANGROUP:2492                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL - GET DEVICE INFORMATION
<span style="color:black">TRANGROUP:2492                                         </span>; BX = file or device handle
<span style="color:black">TRANGROUP:2494                 </span><span style="color:navy">test    dl, </span><span style="color:green">80h
</span><span style="color:black">TRANGROUP:2497                 </span><span style="color:navy">jnz     short </span><span style="color:gray">devisok
</span><span style="color:black">TRANGROUP:2499
TRANGROUP:2499 </span><span style="color:gray">closedev</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2499                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:black">TRANGROUP:249B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:black">TRANGROUP:249B                                         </span>; BX = file handle
<span style="color:black">TRANGROUP:249D
TRANGROUP:249D </span><span style="color:gray">isbaddev</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:249D                 </span><span style="color:navy">mov     dx, offset </span>BADDEV_PTR
<span style="color:black">TRANGROUP:24A0                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:24A3                 </span><span style="color:navy">jmp     short </span><span style="color:gray">resret
</span><span style="color:black">TRANGROUP:24A5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:24A5
TRANGROUP:24A5 </span><span style="color:gray">devisok</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:24A5                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:24A6                 </span><span style="color:navy">mov     ax, [ds:</span>acrlf_ptr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:24A9                 </span><span style="color:navy">mov     dh, </span><span style="color:#ff8000">0FFh        </span>; -1
<span style="color:black">TRANGROUP:24AB                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:24AC                 </span><span style="color:navy">call    </span>TSYSGETMSG
<span style="color:black">TRANGROUP:24AF                 </span><span style="color:navy">mov     dx, si
</span><span style="color:black">TRANGROUP:24B1                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4000h       </span>; (Write shl 8)
<span style="color:black">TRANGROUP:24B4                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:24B7                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - WRITE TO FILE WITH HANDLE
<span style="color:black">TRANGROUP:24B7                                         </span>; BX = file handle, CX = number of bytes to write, DS:DX -&gt; buffer
<span style="color:black">TRANGROUP:24B9                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:24BA                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:24BB                 </span><span style="color:navy">jb      short </span><span style="color:gray">closedev
</span><span style="color:black">TRANGROUP:24BD                 </span><span style="color:navy">xor     dh, dh
</span><span style="color:black">TRANGROUP:24BF                 </span><span style="color:navy">or      dl, </span><span style="color:green">3
</span><span style="color:black">TRANGROUP:24C2                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4401h       </span>; (IOCTL SHL 8) OR 1
<span style="color:black">TRANGROUP:24C5                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL - SET DEVICE INFORMATION
<span style="color:black">TRANGROUP:24C5                                         </span>; BX = device handle, DH = 0
<span style="color:black">TRANGROUP:24C5                                         </span>; DL = device information to set (bits 0-7 from function 0)
<span style="color:black">TRANGROUP:24C7                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:24C8                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">3
</span><span style="color:black">TRANGROUP:24CB                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:24CD
TRANGROUP:24CD </span><span style="color:gray">iclloop</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:24CD                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:black">TRANGROUP:24CF                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:black">TRANGROUP:24CF                                         </span>; BX = file handle
<span style="color:black">TRANGROUP:24D1                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:24D2                 </span><span style="color:navy">loop    </span><span style="color:gray">iclloop
</span><span style="color:black">TRANGROUP:24D4                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:24D5                 </span><span style="color:navy">mov     ah, </span><span style="color:green">45h         </span>; XDUP
<span style="color:black">TRANGROUP:24D7                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CREATE DUPLICATE HANDLE (DUP)
<span style="color:black">TRANGROUP:24D7                                         </span>; BX = file handle to duplicate
<span style="color:black">TRANGROUP:24D9                 </span><span style="color:navy">mov     ah, </span><span style="color:green">45h
</span><span style="color:black">TRANGROUP:24DB                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CREATE DUPLICATE HANDLE (DUP)
<span style="color:black">TRANGROUP:24DB                                         </span>; BX = file handle to duplicate
<span style="color:black">TRANGROUP:24DD                 </span><span style="color:navy">mov     ah, </span><span style="color:green">45h
</span><span style="color:black">TRANGROUP:24DF                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CREATE DUPLICATE HANDLE (DUP)
<span style="color:black">TRANGROUP:24DF                                         </span>; BX = file handle to duplicate
<span style="color:black">TRANGROUP:24E1                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh         </span>; CLOSE
<span style="color:black">TRANGROUP:24E3                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:black">TRANGROUP:24E3                                         </span>; BX = file handle
<span style="color:black">TRANGROUP:24E5
TRANGROUP:24E5 </span><span style="color:gray">resret</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:24E5                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:24E9                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:24EA                 </span><span style="color:navy">mov     ax, [ds:</span><span style="color:green">18h</span><span style="color:navy">]    </span>; [PDB.JFN_TABLE]
<span style="color:black">TRANGROUP:24ED                 </span><span style="color:navy">mov     [ds:</span>Io_Save<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:24F0                 </span><span style="color:navy">mov     ax, offset </span>TrnLodCom1_Trap
<span style="color:black">TRANGROUP:24F3                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:24F4                 </span><span style="color:navy">retf
</span><span style="color:black">TRANGROUP:24F4 </span>endp            CTTY
<span style="color:black">TRANGROUP:24F4
</span><span style="color:maroon">TRANGROUP:24F5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:24F5
TRANGROUP:24F5 </span>CHCP<span style="color:navy">:                                   </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:24F5                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:24F6                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:24F7                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:maroon">TRANGROUP:24FA                 </span><span style="color:navy">mov     di, offset </span>PARSE_CHCP
<span style="color:maroon">TRANGROUP:24FD                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:maroon">TRANGROUP:24FF                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">TRANGROUP:2501                 </span><span style="color:navy">call    </span>Parse_With_Msg
<span style="color:maroon">TRANGROUP:2504                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">TRANGROUP:2507                 </span><span style="color:navy">jz      short </span>getcp
<span style="color:maroon">TRANGROUP:2509                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:250C                 </span><span style="color:navy">jnz     short </span>cp_error
<span style="color:maroon">TRANGROUP:250E                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">TRANGROUP:250F                 </span><span style="color:navy">mov     bx, offset </span>PARSE1_ADDR
<span style="color:maroon">TRANGROUP:2512                 </span><span style="color:navy">mov     cx, [bx]
</span><span style="color:maroon">TRANGROUP:2514                 </span><span style="color:navy">mov     [ds:</span>system_cpage<span style="color:navy">], cx
</span><span style="color:maroon">TRANGROUP:2518                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">TRANGROUP:2519                 </span><span style="color:navy">mov     di, offset </span>PARSE_CHCP
<span style="color:maroon">TRANGROUP:251C                 </span><span style="color:navy">call    </span>parse_check_eol
<span style="color:maroon">TRANGROUP:251F                 </span><span style="color:navy">jnz     short </span>cp_error
<span style="color:maroon">TRANGROUP:2521                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">14h         </span>; NLSFUNC
<span style="color:maroon">TRANGROUP:2523                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:2525                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - NLSFUNC.COM - INSTALLATION CHECK
<span style="color:maroon">TRANGROUP:2525                                         </span>; Return: AL = 00h not installed, OK to install
<span style="color:maroon">TRANGROUP:2525                                         </span>; 01h not installed, not OK
<span style="color:maroon">TRANGROUP:2525                                         </span>; FFh installed
<span style="color:maroon">TRANGROUP:2527                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:maroon">TRANGROUP:2529                 </span><span style="color:navy">jz      short </span>got_NLS
<span style="color:maroon">TRANGROUP:252B                 </span><span style="color:navy">mov     dx, offset </span>NLSFUNC_PTR
<span style="color:maroon">TRANGROUP:252E                 </span><span style="color:navy">jmp     short </span>cp_error
<span style="color:maroon">TRANGROUP:2530 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2530
TRANGROUP:2530 </span>got_NLS<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2530                 </span><span style="color:navy">mov     bx, [ds:</span>system_cpage<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:2534                 </span><span style="color:navy">mov     ah, </span><span style="color:green">66h
</span><span style="color:maroon">TRANGROUP:2536                 </span><span style="color:navy">mov     al, </span><span style="color:green">2
</span><span style="color:maroon">TRANGROUP:2538                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3.3+ - SET GLOBAL CODE PAGE TABLE
<span style="color:maroon">TRANGROUP:2538                                         </span>; BX = active code page
<span style="color:maroon">TRANGROUP:2538                                         </span>; DX = system code page (active page at boot time)
<span style="color:maroon">TRANGROUP:253A                 </span><span style="color:navy">jnb     short </span>chcp_return
<span style="color:maroon">TRANGROUP:253C                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">2           </span>; ERROR_FILE_NOT_FOUND
<span style="color:maroon">TRANGROUP:253F                 </span><span style="color:navy">jnz     short </span>chcp_other_error
<span style="color:maroon">TRANGROUP:2541                 </span><span style="color:navy">mov     ah, </span><span style="color:green">59h
</span><span style="color:maroon">TRANGROUP:2543                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:maroon">TRANGROUP:2545                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET EXTENDED ERROR CODE
<span style="color:maroon">TRANGROUP:2545                                         </span>; BX = version code (0000h for DOS 3.x)
<span style="color:maroon">TRANGROUP:2547                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0Dh         </span>; ERROR_INVALID_DATA
<span style="color:maroon">TRANGROUP:254A                 </span><span style="color:navy">jnz     short </span>no_countrysys
<span style="color:maroon">TRANGROUP:254C                 </span><span style="color:navy">mov     dx, offset </span>INV_CODE_PAGE
<span style="color:maroon">TRANGROUP:254F                 </span><span style="color:navy">jmp     short </span>cp_error
<span style="color:maroon">TRANGROUP:2551 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2551
TRANGROUP:2551 </span>no_countrysys<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2551                 </span><span style="color:navy">mov     dx, offset </span>NoCntry_Ptr
<span style="color:maroon">TRANGROUP:2554                 </span><span style="color:navy">jmp     short </span>cp_error
<span style="color:maroon">TRANGROUP:2556 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2556
TRANGROUP:2556 </span>chcp_other_error<span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2556                 </span><span style="color:navy">mov     ah, </span><span style="color:green">59h
</span><span style="color:maroon">TRANGROUP:2558                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:maroon">TRANGROUP:255A                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET EXTENDED ERROR CODE
<span style="color:maroon">TRANGROUP:255A                                         </span>; BX = version code (0000h for DOS 3.x)
<span style="color:maroon">TRANGROUP:255C                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">65          </span>; was it access denied?
<span style="color:maroon">TRANGROUP:255F                 </span><span style="color:navy">jnz     short </span>none_set  ; no - assume all failed
<span style="color:maroon">TRANGROUP:2561                 </span><span style="color:navy">mov     dx, offset </span>cp_not_all_ptr
<span style="color:maroon">TRANGROUP:2564                 </span><span style="color:navy">jmp     short </span>cp_error
<span style="color:maroon">TRANGROUP:2566 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2566
TRANGROUP:2566 </span>none_set<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2566                 </span><span style="color:navy">mov     dx, offset </span>cp_not_set_ptr
<span style="color:maroon">TRANGROUP:2569
TRANGROUP:2569 </span>cp_error<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2569                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:256C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:256C
TRANGROUP:256C </span>getcp<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:256C                 </span><span style="color:navy">mov     ah, </span><span style="color:green">66h
</span><span style="color:maroon">TRANGROUP:256E                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:2570                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3.3+ - GET GLOBAL CODE PAGE TABLE
<span style="color:maroon">TRANGROUP:2572                 </span><span style="color:navy">mov     [ds:</span>system_cpage<span style="color:navy">], bx
</span><span style="color:maroon">TRANGROUP:2576                 </span><span style="color:navy">mov     dx, offset </span>cp_active_ptr
<span style="color:maroon">TRANGROUP:2579                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:257C
TRANGROUP:257C </span>chcp_return<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:257C                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:257D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:257D
TRANGROUP:257D </span>TRUENAME<span style="color:navy">:                               </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:257D                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:257E                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:257F                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:maroon">TRANGROUP:2582                 </span><span style="color:navy">mov     di, offset </span>PARSE_CHDIR
<span style="color:maroon">TRANGROUP:2585                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:maroon">TRANGROUP:2587                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:maroon">TRANGROUP:2589                 </span><span style="color:navy">call    </span>Parse_With_Msg
<span style="color:maroon">TRANGROUP:258C                 </span><span style="color:navy">mov     di, offset </span>SRCXNAME
<span style="color:maroon">TRANGROUP:258F                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">TRANGROUP:2592                 </span><span style="color:navy">jz      short </span>tn_eol
<span style="color:maroon">TRANGROUP:2594                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:2597                 </span><span style="color:navy">jnz     short </span>tn_parse_error
<span style="color:maroon">TRANGROUP:2599                 </span><span style="color:navy">cmp     [ds:</span>PARSE1_OUTPUT<span style="color:navy">], </span><span style="color:#ff8000">6 </span>; byte [PARSE1_TYPE],result_drive
<span style="color:maroon">TRANGROUP:259E                 </span><span style="color:navy">jz      short </span>tn_drive
<span style="color:maroon">TRANGROUP:25A0                 </span><span style="color:navy">jmp     short </span>tn_filespec
<span style="color:maroon">TRANGROUP:25A2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:25A2
TRANGROUP:25A2 </span>tn_eol<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:25A2                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0           </span>; END_OF_LINE_OUT
<span style="color:maroon">TRANGROUP:25A4                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">2Eh </span><span style="color:gray">; &#039;.&#039;
</span><span style="color:maroon">TRANGROUP:25A6                 </span><span style="color:navy">stosw
</span><span style="color:maroon">TRANGROUP:25A7                 </span><span style="color:navy">jmp     short </span>tn_doit
<span style="color:maroon">TRANGROUP:25A9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:25A9
TRANGROUP:25A9 </span>tn_drive<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:25A9                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:25AA                 </span><span style="color:navy">mov     si, offset </span>PARSE1_ADDR
<span style="color:maroon">TRANGROUP:25AD                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:25AE                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;   </span>; &quot;A&quot;-1
<span style="color:maroon">TRANGROUP:25B0                 </span><span style="color:navy">stosb
</span><span style="color:maroon">TRANGROUP:25B1                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2E3Ah       </span>; &#039;:.&#039; (NASM syntax)
<span style="color:maroon">TRANGROUP:25B4                 </span><span style="color:navy">stosw
</span><span style="color:maroon">TRANGROUP:25B5                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0           </span>; END_OF_LINE_OUT
<span style="color:maroon">TRANGROUP:25B7                 </span><span style="color:navy">stosb
</span><span style="color:maroon">TRANGROUP:25B8                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:25B9                 </span><span style="color:navy">jmp     short </span>tn_check_eol
<span style="color:maroon">TRANGROUP:25BB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:25BB
TRANGROUP:25BB </span>tn_filespec<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:25BB                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:25BC                 </span><span style="color:navy">lds     si, [ds:</span>PARSE1_ADDR<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:25C0
TRANGROUP:25C0 </span>tn_move_filename<span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:25C0                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:25C1                 </span><span style="color:navy">stosb
</span><span style="color:maroon">TRANGROUP:25C2                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:25C4                 </span><span style="color:navy">jnz     short </span>tn_move_filename
<span style="color:maroon">TRANGROUP:25C6                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:25C7
TRANGROUP:25C7 </span>tn_check_eol<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:25C7                 </span><span style="color:navy">mov     di, offset </span>PARSE_CHDIR
<span style="color:maroon">TRANGROUP:25CA                 </span><span style="color:navy">call    </span>parse_check_eol
<span style="color:maroon">TRANGROUP:25CD                 </span><span style="color:navy">jz      short </span>tn_doit
<span style="color:maroon">TRANGROUP:25CF
TRANGROUP:25CF </span>tn_parse_error<span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:25CF                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:25D2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:25D2
TRANGROUP:25D2 </span>tn_doit<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:25D2                 </span><span style="color:navy">mov     si, offset </span>SRCXNAME
<span style="color:maroon">TRANGROUP:25D5                 </span><span style="color:navy">mov     di, offset </span>COMBUF
<span style="color:maroon">TRANGROUP:25D8                 </span><span style="color:navy">mov     ax, </span><span style="color:green">6000h       </span>; ax = (xNameTrans&lt;&lt;8)
<span style="color:maroon">TRANGROUP:25DB                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - RESOLVE PATH STRING TO CANONICAL PATH STRING
<span style="color:maroon">TRANGROUP:25DB                                         </span>; DS:SI -&gt; ASCIZ relative path string or directory name
<span style="color:maroon">TRANGROUP:25DB                                         </span>; ES:DI -&gt; 128-byte buffer for ASCIZ canonical fully qualified name
<span style="color:maroon">TRANGROUP:25DD                 </span><span style="color:navy">jnb     short </span>tn_print_xname
<span style="color:maroon">TRANGROUP:25DF                 </span><span style="color:navy">call    </span>Set_Ext_Error_Msg
<span style="color:maroon">TRANGROUP:25E2                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], offset </span>SRCXNAME
<span style="color:maroon">TRANGROUP:25E8                 </span><span style="color:navy">mov     [ds:</span>extend_buf_sub<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; one_subst
<span style="color:maroon">TRANGROUP:25ED                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:25F0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:25F0
TRANGROUP:25F0 </span>tn_print_xname<span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:25F0                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], offset </span>COMBUF
<span style="color:maroon">TRANGROUP:25F6                 </span><span style="color:navy">mov     dx, offset </span>string_buf_ptr
<span style="color:maroon">TRANGROUP:25F9                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:maroon">TRANGROUP:25FC                 </span><span style="color:navy">call    </span>Printf_Crlf
<span style="color:maroon">TRANGROUP:25FF                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2600 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2600 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR PROMPTBAT
</span><span style="color:black">TRANGROUP:2600
TRANGROUP:2600 </span>_$EXIT<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2600                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:2601                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2605                 </span><span style="color:navy">cmp     [ds:</span>PermCom<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte ; is this a permanent COMMAND?
<span style="color:black">TRANGROUP:260A                 </span><span style="color:navy">jz      short </span><span style="color:gray">free_com  </span>; no - free everything
<span style="color:black">TRANGROUP:260C                 </span><span style="color:navy">cmp     [ds:</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:black">TRANGROUP:2611                 </span><span style="color:navy">jz      short </span><span style="color:gray">free_com  </span>; exit singlecom
<span style="color:black">TRANGROUP:2613                 </span><span style="color:navy">jmp     </span>TCOMMAND        ; permanent command, recycle
<span style="color:black">TRANGROUP:2616 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2616
TRANGROUP:2616 </span><span style="color:gray">free_com</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2616                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:2617                 </span><span style="color:navy">call    </span>RestUDir1
<span style="color:black">TRANGROUP:261A                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:261E                 </span><span style="color:navy">mov     ax, [es:</span>Parent<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2622                 </span><span style="color:navy">mov     [es:</span><span style="color:green">16h</span><span style="color:navy">], ax    </span>; [es:PDB.PARENT_PID]
<span style="color:black">TRANGROUP:2626                 </span><span style="color:navy">mov     ax, [word ptr es:</span>OldTerm<span style="color:navy">]
</span><span style="color:black">TRANGROUP:262A                 </span><span style="color:navy">mov     [es:</span><span style="color:green">0Ah</span><span style="color:navy">], ax    </span>; [es:PDB.EXIT]
<span style="color:black">TRANGROUP:262E                 </span><span style="color:navy">mov     ax, [word ptr es:</span>OldTerm<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:2632                 </span><span style="color:navy">mov     [es:</span><span style="color:green">0Ch</span><span style="color:navy">], ax    </span>; [es:PDB.EXIT+2]
<span style="color:black">TRANGROUP:2636                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:2637                 </span><span style="color:navy">mov     es, [ds:</span>TRAN_TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:263B                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h         </span>; DEALLOC
<span style="color:black">TRANGROUP:263D                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FREE MEMORY
<span style="color:black">TRANGROUP:263D                                         </span>; ES = segment address of area to be freed
<span style="color:black">TRANGROUP:263F                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2640                 </span><span style="color:navy">mov     ah, </span><span style="color:green">4Ch         </span>; Exit
<span style="color:black">TRANGROUP:2642                 </span><span style="color:navy">mov     al, [byte ptr es:</span>RetCode<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2646                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - QUIT WITH EXIT CODE (EXIT)
<span style="color:black">TRANGROUP:2646 </span><span style="color:gray">; END OF FUNCTION CHUNK FOR PROMPTBAT   </span>; AL = exit code
<span style="color:black">TRANGROUP:2648
TRANGROUP:2648 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2648
TRANGROUP:2648
TRANGROUP:2648 </span>proc            parse_check_eol near    <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2648                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:264A                 </span><span style="color:navy">mov     [ds:</span>parse_last<span style="color:navy">], si
</span><span style="color:black">TRANGROUP:264E                 </span><span style="color:navy">call    </span>cmd_parse
<span style="color:black">TRANGROUP:2651                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:2653                 </span><span style="color:navy">jz      short </span><span style="color:gray">parse_good_eol
</span><span style="color:black">TRANGROUP:2655                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2658                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ok_to_setup_pmsg
</span><span style="color:black">TRANGROUP:265A                 </span><span style="color:navy">inc     ax
</span><span style="color:black">TRANGROUP:265B
TRANGROUP:265B </span><span style="color:gray">ok_to_setup_pmsg</span><span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:265B                 </span><span style="color:navy">call    </span>setup_parse_error_msg
<span style="color:black">TRANGROUP:265E
TRANGROUP:265E </span><span style="color:gray">parse_good_eol</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:265E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:265E </span>endp            parse_check_eol
<span style="color:black">TRANGROUP:265E
TRANGROUP:265F
TRANGROUP:265F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:265F
TRANGROUP:265F
TRANGROUP:265F </span>proc            Parse_With_Msg near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:265F                 </span><span style="color:navy">mov     [ds:</span>parse_last<span style="color:navy">], si
</span><span style="color:black">TRANGROUP:2663                 </span><span style="color:navy">call    </span>cmd_parse
<span style="color:black">TRANGROUP:2666                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:2668                 </span><span style="color:navy">jz      short </span><span style="color:gray">parse_msg_good
</span><span style="color:black">TRANGROUP:266A                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:266D                 </span><span style="color:navy">jz      short </span><span style="color:gray">parse_msg_good
</span><span style="color:black">TRANGROUP:266F                 </span><span style="color:navy">call    </span>setup_parse_error_msg
<span style="color:black">TRANGROUP:2672
TRANGROUP:2672 </span><span style="color:gray">parse_msg_good</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2672                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2672 </span>endp            Parse_With_Msg
<span style="color:black">TRANGROUP:2672
TRANGROUP:2673
TRANGROUP:2673 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2673
TRANGROUP:2673
TRANGROUP:2673 </span>proc            setup_parse_error_msg near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2673                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">2 </span>; parse_msg_class
<span style="color:black">TRANGROUP:2678                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:black">TRANGROUP:267B                 </span><span style="color:navy">mov     [byte ptr si], </span><span style="color:#ff8000">0 </span>; END_OF_LINE_OUT
<span style="color:black">TRANGROUP:267E                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:2681                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">2           </span>; LessArgs_Ptr
<span style="color:black">TRANGROUP:2684                 </span><span style="color:navy">jz      short </span><span style="color:gray">setup_parse_msg_ret
</span><span style="color:black">TRANGROUP:2686                 </span><span style="color:navy">mov     si, [ds:</span>parse_last<span style="color:navy">]
</span><span style="color:black">TRANGROUP:268A                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], si
</span><span style="color:black">TRANGROUP:268E                 </span><span style="color:navy">mov     [ds:</span>extend_buf_sub<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; one_subst
<span style="color:black">TRANGROUP:2693
TRANGROUP:2693 </span><span style="color:gray">setup_parse_msg_ret</span><span style="color:navy">:                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2693                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:2694                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2694 </span>endp            setup_parse_error_msg
<span style="color:black">TRANGROUP:2694
</span><span style="color:maroon">TRANGROUP:2695 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2695
TRANGROUP:2695 </span>ADD_PROMPT<span style="color:navy">:                             </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:2695                 </span><span style="color:navy">call    </span>delete_prompt
<span style="color:maroon">TRANGROUP:2698                 </span><span style="color:navy">call    </span>scan_double_null
<span style="color:maroon">TRANGROUP:269B                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:269C                 </span><span style="color:navy">call    </span>GETARG
<span style="color:maroon">TRANGROUP:269F                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:26A0                 </span><span style="color:navy">jnz     short </span>ADD_PROMPT3
<span style="color:maroon">TRANGROUP:26A2
TRANGROUP:26A2 </span>ADD_PROMPT_RETN<span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:26A2                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:26A3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:26A3
TRANGROUP:26A3 </span>ADD_PROMPT3<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:26A3                 </span><span style="color:navy">call    </span>move_name
<span style="color:maroon">TRANGROUP:26A6                 </span><span style="color:navy">call    </span>GETARG
<span style="color:maroon">TRANGROUP:26A9                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:26AA                 </span><span style="color:navy">jmp     short </span>ADD_NAME
<span style="color:maroon">TRANGROUP:26AC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:26AC
TRANGROUP:26AC </span>DISP_ENVJ<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:26AC                 </span><span style="color:navy">jmp     </span>DISP_ENV
<span style="color:maroon">TRANGROUP:26AF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:26AF
TRANGROUP:26AF </span>ADD_NAME_TO_ENVIRONMENT<span style="color:navy">:                </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:26AF                 </span><span style="color:navy">call    </span>GETARG
<span style="color:maroon">TRANGROUP:26B2                 </span><span style="color:navy">jz      short </span>DISP_ENVJ
<span style="color:maroon">TRANGROUP:26B4                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:maroon">TRANGROUP:26B6                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:26B7
TRANGROUP:26B7 </span>EQLP<span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:26B7                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:26B8                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:maroon">TRANGROUP:26BA                 </span><span style="color:navy">jz      short </span>QUEQ
<span style="color:maroon">TRANGROUP:26BC                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Dh </span><span style="color:gray">; &#039;=&#039;
</span><span style="color:maroon">TRANGROUP:26BE                 </span><span style="color:navy">jnz     short </span>EQLP
<span style="color:maroon">TRANGROUP:26C0                 </span><span style="color:navy">inc     bl
</span><span style="color:maroon">TRANGROUP:26C2                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">0Dh
</span><span style="color:maroon">TRANGROUP:26C5                 </span><span style="color:navy">jnz     short </span>EQLP
<span style="color:maroon">TRANGROUP:26C7                 </span><span style="color:navy">inc     bh
</span><span style="color:maroon">TRANGROUP:26C9                 </span><span style="color:navy">jmp     short </span>EQLP
<span style="color:maroon">TRANGROUP:26CB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:26CB
TRANGROUP:26CB </span>QUEQ<span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:26CB                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:26CC                 </span><span style="color:navy">dec     bl
</span><span style="color:maroon">TRANGROUP:26CE                 </span><span style="color:navy">jz      short </span>ONEQ
<span style="color:maroon">TRANGROUP:26D0                 </span><span style="color:navy">mov     dx, offset </span>SYNTMES_PTR
<span style="color:maroon">TRANGROUP:26D3                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:26D6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:26D6
TRANGROUP:26D6 </span>ONEQ<span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:26D6                 </span><span style="color:navy">push    bx
</span><span style="color:maroon">TRANGROUP:26D7                 </span><span style="color:navy">call    </span>delete_name_in_environment
<span style="color:maroon">TRANGROUP:26DA                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">TRANGROUP:26DB                 </span><span style="color:navy">dec     bh
</span><span style="color:maroon">TRANGROUP:26DD                 </span><span style="color:navy">jz      short </span>ADD_PROMPT_RETN
<span style="color:maroon">TRANGROUP:26DF                 </span><span style="color:navy">call    </span>scan_double_null
<span style="color:maroon">TRANGROUP:26E2                 </span><span style="color:navy">mov     bx, di
</span><span style="color:maroon">TRANGROUP:26E4                 </span><span style="color:navy">call    </span>move_name
<span style="color:maroon">TRANGROUP:26E7                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:26E8                 </span><span style="color:navy">xchg    bx, di
</span><span style="color:maroon">TRANGROUP:26EA                 </span><span style="color:navy">mov     [ds:</span>comspec_flag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:maroon">TRANGROUP:26EF                 </span><span style="color:navy">mov     si, offset </span>COMSPECSTR <span style="color:gray">; &quot;COMSPEC=&quot;
</span><span style="color:maroon">TRANGROUP:26F2                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">4
</span><span style="color:maroon">TRANGROUP:26F5                 </span><span style="color:navy">repe cmpsw
</span><span style="color:maroon">TRANGROUP:26F7                 </span><span style="color:navy">jnz     short </span>NOT_COMSPEC
<span style="color:maroon">TRANGROUP:26F9                 </span><span style="color:navy">inc     [ds:</span>comspec_flag<span style="color:navy">] </span>; byte
<span style="color:maroon">TRANGROUP:26FD
TRANGROUP:26FD </span>NOT_COMSPEC<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:26FD                 </span><span style="color:navy">mov     di, bx
</span><span style="color:maroon">TRANGROUP:26FF
TRANGROUP:26FF </span>ADD_NAME<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:26FF                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:2700                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:2701
TRANGROUP:2701 </span>ADD_NAME1<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2701                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:2702                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh         </span>; 13
<span style="color:maroon">TRANGROUP:2704                 </span><span style="color:navy">jz      short </span>ADD_NAME_RET
<span style="color:maroon">TRANGROUP:2706                 </span><span style="color:navy">call    </span>store_char
<span style="color:maroon">TRANGROUP:2709                 </span><span style="color:navy">jmp     short </span>ADD_NAME1
<span style="color:maroon">TRANGROUP:270B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:270B
TRANGROUP:270B </span>ADD_NAME_RET<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:270B                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:270C                 </span><span style="color:navy">cmp     [ds:</span>comspec_flag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:maroon">TRANGROUP:2711
TRANGROUP:2711 </span>ADD_NAME_JZ_RET<span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2711                 </span><span style="color:navy">jz      short </span>ADD_PROMPT_RETN
<span style="color:maroon">TRANGROUP:2713                 </span><span style="color:navy">call    </span>scanoff
<span style="color:maroon">TRANGROUP:2716                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:271A                 </span><span style="color:navy">mov     di, offset </span>ComSpec
<span style="color:maroon">TRANGROUP:271D                 </span><span style="color:navy">mov     bx, di
</span><span style="color:maroon">TRANGROUP:271F                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:maroon">TRANGROUP:2721                 </span><span style="color:navy">mov     [es:</span>ComDrv<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:2725                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">TRANGROUP:2726                 </span><span style="color:navy">mov     al, [si]
</span><span style="color:maroon">TRANGROUP:2728                 </span><span style="color:navy">call    </span>testkanj
<span style="color:maroon">TRANGROUP:272B                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:272C                 </span><span style="color:navy">jnz     short </span>_GOTDRIVE
<span style="color:maroon">TRANGROUP:272E                 </span><span style="color:navy">cmp     [byte ptr si+</span><span style="color:#ff8000">1</span><span style="color:navy">], &#039;</span><span style="color:green">:&#039;
</span><span style="color:maroon">TRANGROUP:2732                 </span><span style="color:navy">jnz     short </span>_GOTDRIVE
<span style="color:maroon">TRANGROUP:2734                 </span><span style="color:navy">mov     al, [si]
</span><span style="color:maroon">TRANGROUP:2736                 </span><span style="color:navy">call    </span>UPCONV
<span style="color:maroon">TRANGROUP:2739                 </span><span style="color:navy">sub     al, &#039;</span><span style="color:green">A&#039;
</span><span style="color:maroon">TRANGROUP:273B                 </span><span style="color:navy">add     di, </span><span style="color:#ff8000">2
</span><span style="color:maroon">TRANGROUP:273E                 </span><span style="color:navy">inc     al
</span><span style="color:maroon">TRANGROUP:2740                 </span><span style="color:navy">mov     [es:</span>ComDrv<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:2744                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;   </span>; &#039;A&#039;-1
<span style="color:maroon">TRANGROUP:2746
TRANGROUP:2746 </span>_GOTDRIVE<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2746                 </span><span style="color:navy">mov     [es:</span>PutBackComSpec<span style="color:navy">], di
</span><span style="color:maroon">TRANGROUP:274B                 </span><span style="color:navy">mov     [es:</span>PutBackDrv<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:274F                 </span><span style="color:navy">mov     di, bx
</span><span style="color:maroon">TRANGROUP:2751
TRANGROUP:2751 </span>COPY_COMSPEC<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2751                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:2752                 </span><span style="color:navy">call    </span>DELIM
<span style="color:maroon">TRANGROUP:2755                 </span><span style="color:navy">jz      short </span>COPYDONE
<span style="color:maroon">TRANGROUP:2757                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh         </span>; 13
<span style="color:maroon">TRANGROUP:2759                 </span><span style="color:navy">jz      short </span>COPYDONE
<span style="color:maroon">TRANGROUP:275B                 </span><span style="color:navy">stosb
</span><span style="color:maroon">TRANGROUP:275C                 </span><span style="color:navy">jmp     short </span>COPY_COMSPEC
<span style="color:maroon">TRANGROUP:275E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:275E
TRANGROUP:275E </span>COPYDONE<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:275E                 </span><span style="color:navy">xor     al, al
</span><span style="color:maroon">TRANGROUP:2760                 </span><span style="color:navy">stosb
</span><span style="color:maroon">TRANGROUP:2761                 </span><span style="color:navy">mov     [ds:</span>comspec_flag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:maroon">TRANGROUP:2766                 </span><span style="color:navy">dec     di
</span><span style="color:maroon">TRANGROUP:2767                 </span><span style="color:navy">mov     [es:</span>ComSpec_End<span style="color:navy">], di
</span><span style="color:maroon">TRANGROUP:276C                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:276D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:276D
TRANGROUP:276D </span>DISP_ENV<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:276D                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:2771                 </span><span style="color:navy">mov     ds, [ds:</span>EnvirSeg<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:2775                 </span><span style="color:navy">xor     si, si
</span><span style="color:maroon">TRANGROUP:2777
TRANGROUP:2777 </span>PENVLP<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2777                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:277A                 </span><span style="color:navy">jz      short </span>ADD_NAME_JZ_RET
<span style="color:maroon">TRANGROUP:277C                 </span><span style="color:navy">mov     di, offset </span>TPBUF ; Arg_Buf
<span style="color:maroon">TRANGROUP:277F
TRANGROUP:277F </span>PENVLP2<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:277F                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:2780                 </span><span style="color:navy">stosb
</span><span style="color:maroon">TRANGROUP:2781                 </span><span style="color:navy">or      al, al
</span><span style="color:maroon">TRANGROUP:2783                 </span><span style="color:navy">jnz     short </span>PENVLP2
<span style="color:maroon">TRANGROUP:2785                 </span><span style="color:navy">mov     dx, offset </span>arg_buf_ptr
<span style="color:maroon">TRANGROUP:2788                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:2789                 </span><span style="color:navy">push    es
</span><span style="color:maroon">TRANGROUP:278A                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:278B                 </span><span style="color:navy">call    </span>Printf_Crlf
<span style="color:maroon">TRANGROUP:278E                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:278F                 </span><span style="color:navy">jmp     short </span>PENVLP
<span style="color:black">TRANGROUP:2791
TRANGROUP:2791 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2791
TRANGROUP:2791
TRANGROUP:2791 </span>proc            delete_path near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2791                 </span><span style="color:navy">mov     si, offset </span>PATH_TEXT <span style="color:gray">; &quot;PATH=&quot;
</span><span style="color:black">TRANGROUP:2794                 </span><span style="color:navy">jmp     short </span>delete_name_in_environment
<span style="color:black">TRANGROUP:2796 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2796
TRANGROUP:2796 </span>delete_prompt<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2796                 </span><span style="color:navy">mov     si, offset </span>PROMPT_TEXT <span style="color:gray">; &quot;PROMPT=&quot;
</span><span style="color:black">TRANGROUP:2799
TRANGROUP:2799 </span>delete_name_in_environment<span style="color:navy">:             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2799                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:279A                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:279B                 </span><span style="color:navy">call    </span>FIND
<span style="color:black">TRANGROUP:279E                 </span><span style="color:navy">jb      short </span><span style="color:gray">del1
</span><span style="color:black">TRANGROUP:27A0                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:27A2                 </span><span style="color:navy">call    </span>SCASB2
<span style="color:black">TRANGROUP:27A5                 </span><span style="color:navy">xchg    si, di
</span><span style="color:black">TRANGROUP:27A7                 </span><span style="color:navy">cmp     [byte ptr es:si], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:27AB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">not_dnull
</span><span style="color:black">TRANGROUP:27AD                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:27AE
TRANGROUP:27AE </span><span style="color:gray">not_dnull</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:27AE                 </span><span style="color:navy">call    </span>GETENVSIZ
<span style="color:black">TRANGROUP:27B1                 </span><span style="color:navy">sub     cx, si
</span><span style="color:black">TRANGROUP:27B3                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:27B4                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:27B5                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:27B7
TRANGROUP:27B7 </span><span style="color:gray">del1</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:27B7                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:27B8                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:27B8 </span>endp            delete_path
<span style="color:black">TRANGROUP:27B8
</span><span style="color:maroon">TRANGROUP:27B9
TRANGROUP:27B9 </span>find_retn<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:27B9                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:27BA
TRANGROUP:27BA </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:27BA
TRANGROUP:27BA
TRANGROUP:27BA </span>proc            find_path near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:27BA                 </span><span style="color:navy">mov     si, offset </span>PATH_TEXT <span style="color:gray">; &quot;PATH=&quot;
</span><span style="color:black">TRANGROUP:27BD                 </span><span style="color:navy">jmp     short </span>find_name_in_environment
<span style="color:black">TRANGROUP:27BD </span>endp            find_path
<span style="color:black">TRANGROUP:27BD
TRANGROUP:27BF
TRANGROUP:27BF </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:27BF
TRANGROUP:27BF
TRANGROUP:27BF </span>proc            find_prompt near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:27BF                 </span><span style="color:navy">mov     si, offset </span>PROMPT_TEXT <span style="color:gray">; &quot;PROMPT=&quot;
</span><span style="color:black">TRANGROUP:27BF </span>endp            find_prompt
<span style="color:black">TRANGROUP:27BF
TRANGROUP:27C2
TRANGROUP:27C2 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:27C2
TRANGROUP:27C2
TRANGROUP:27C2 </span>proc            find_name_in_environment near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:27C2                 </span><span style="color:navy">call    </span>FIND
<span style="color:black">TRANGROUP:27C5                 </span><span style="color:navy">jb      short </span>find_retn
<span style="color:black">TRANGROUP:27C7                 </span><span style="color:navy">jmp     </span>SCASB1
<span style="color:black">TRANGROUP:27C7 </span>endp            find_name_in_environment
<span style="color:black">TRANGROUP:27C7
TRANGROUP:27CA
TRANGROUP:27CA </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:27CA
TRANGROUP:27CA
TRANGROUP:27CA </span>proc            FIND near               <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:27CA                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:27CB                 </span><span style="color:navy">call    </span>COUNT0
<span style="color:black">TRANGROUP:27CE                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:27D2                 </span><span style="color:navy">mov     es, [es:</span>EnvirSeg<span style="color:navy">]
</span><span style="color:black">TRANGROUP:27D7                 </span><span style="color:navy">xor     di, di
</span><span style="color:black">TRANGROUP:27D9
TRANGROUP:27D9 </span><span style="color:gray">find1</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:27D9                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:27DA                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:27DB                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:27DC
TRANGROUP:27DC </span><span style="color:gray">find11</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:27DC                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:27DD                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:27E0                 </span><span style="color:navy">jz      short </span><span style="color:gray">notkanj3
</span><span style="color:black">TRANGROUP:27E2                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:27E3                 </span><span style="color:navy">lodsw
</span><span style="color:black">TRANGROUP:27E4                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:27E5                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:27E6                 </span><span style="color:navy">cmp     ax, [es:di-</span><span style="color:green">2</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:27EA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">find12
</span><span style="color:black">TRANGROUP:27EC                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:27ED                 </span><span style="color:navy">loop    </span><span style="color:gray">find11
</span><span style="color:black">TRANGROUP:27EF                 </span><span style="color:navy">jmp     short </span><span style="color:gray">find12
</span><span style="color:black">TRANGROUP:27F1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:27F1
TRANGROUP:27F1 </span><span style="color:gray">notkanj3</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:27F1                 </span><span style="color:navy">call    </span>UPCONV
<span style="color:black">TRANGROUP:27F4                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:27F5                 </span><span style="color:navy">cmp     al, [es:di-</span><span style="color:green">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:27F9                 </span><span style="color:navy">jnz     short </span><span style="color:gray">find12
</span><span style="color:black">TRANGROUP:27FB                 </span><span style="color:navy">loop    </span><span style="color:gray">find11
</span><span style="color:black">TRANGROUP:27FD
TRANGROUP:27FD </span><span style="color:gray">find12</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:27FD                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:27FE                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:27FF                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:2800                 </span><span style="color:navy">jz      short </span>find_retn
<span style="color:black">TRANGROUP:2802                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:2803                 </span><span style="color:navy">call    </span>SCASB2
<span style="color:black">TRANGROUP:2806                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:2807                 </span><span style="color:navy">cmp     [byte ptr es:di], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:280B                 </span><span style="color:navy">jnz     short </span><span style="color:gray">find1
</span><span style="color:black">TRANGROUP:280D                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:280E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:280E </span>endp            FIND
<span style="color:black">TRANGROUP:280E
TRANGROUP:280F
TRANGROUP:280F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:280F
TRANGROUP:280F
TRANGROUP:280F </span>proc            COUNT0 near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:280F                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:2810                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2811                 </span><span style="color:navy">mov     di, si
</span><span style="color:black">TRANGROUP:2813                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:2814                 </span><span style="color:navy">call    </span>SCASB1
<span style="color:black">TRANGROUP:2817                 </span><span style="color:navy">jmp     short </span><span style="color:gray">COUNTX
</span><span style="color:black">TRANGROUP:2819 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2819                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:281A                 </span><span style="color:navy">call    </span>SCASB2
<span style="color:black">TRANGROUP:281D
TRANGROUP:281D </span><span style="color:gray">COUNTX</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:281D                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:281E                 </span><span style="color:navy">sub     di, cx
</span><span style="color:black">TRANGROUP:2820                 </span><span style="color:navy">xchg    di, cx
</span><span style="color:black">TRANGROUP:2822
TRANGROUP:2822 </span>move_name_retn<span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2822                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2822 </span>endp            COUNT0
<span style="color:black">TRANGROUP:2822
TRANGROUP:2823
TRANGROUP:2823 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2823
TRANGROUP:2823
TRANGROUP:2823 </span>proc            move_name near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2823                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:2826                 </span><span style="color:navy">jz      short </span>move_name_retn
<span style="color:black">TRANGROUP:2828                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2829                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:282C                 </span><span style="color:navy">jz      short </span><span style="color:gray">notkanj1
</span><span style="color:black">TRANGROUP:282E                 </span><span style="color:navy">call    </span>store_char
<span style="color:black">TRANGROUP:2831                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2832                 </span><span style="color:navy">call    </span>store_char
<span style="color:black">TRANGROUP:2835                 </span><span style="color:navy">jmp     short </span>move_name
<span style="color:black">TRANGROUP:2837 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2837
TRANGROUP:2837 </span><span style="color:gray">notkanj1</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2837                 </span><span style="color:navy">call    </span>UPCONV
<span style="color:black">TRANGROUP:283A                 </span><span style="color:navy">call    </span>store_char
<span style="color:black">TRANGROUP:283D                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Dh </span><span style="color:gray">; &#039;=&#039;
</span><span style="color:black">TRANGROUP:283F                 </span><span style="color:navy">jnz     short </span>move_name
<span style="color:black">TRANGROUP:2841
TRANGROUP:2841 </span>getarg_retn<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2841                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2841 </span>endp            move_name
<span style="color:black">TRANGROUP:2841
TRANGROUP:2842
TRANGROUP:2842 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2842
TRANGROUP:2842
TRANGROUP:2842 </span>proc            GETARG near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2842                 </span><span style="color:navy">mov     si, </span><span style="color:green">80h
</span><span style="color:black">TRANGROUP:2845                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2846                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:2848                 </span><span style="color:navy">jz      short </span>getarg_retn
<span style="color:black">TRANGROUP:284A                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:284D                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh         </span>; 13
<span style="color:black">TRANGROUP:284F
TRANGROUP:284F </span>sdn_retn<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:284F                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:284F </span>endp            GETARG
<span style="color:black">TRANGROUP:284F
TRANGROUP:2850
TRANGROUP:2850 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2850
TRANGROUP:2850
TRANGROUP:2850 </span>proc            scan_double_null near   <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2850                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2854                 </span><span style="color:navy">mov     es, [es:</span>EnvirSeg<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2859                 </span><span style="color:navy">xor     di, di
</span><span style="color:black">TRANGROUP:285B
TRANGROUP:285B </span><span style="color:gray">sdn1</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:285B                 </span><span style="color:navy">cmp     [byte ptr es:di], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:285F                 </span><span style="color:navy">jz      short </span>sdn_retn
<span style="color:black">TRANGROUP:2861                 </span><span style="color:navy">call    </span>SCASB2
<span style="color:black">TRANGROUP:2864                 </span><span style="color:navy">jmp     short </span><span style="color:gray">sdn1
</span><span style="color:black">TRANGROUP:2864 </span>endp            scan_double_null
<span style="color:black">TRANGROUP:2864
TRANGROUP:2866
TRANGROUP:2866 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2866
TRANGROUP:2866
TRANGROUP:2866 </span>proc            SCASB1 near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2866                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Dh </span><span style="color:gray">; &#039;=&#039;
</span><span style="color:black">TRANGROUP:2868                 </span><span style="color:navy">jmp     short </span>SCASBX
<span style="color:black">TRANGROUP:2868 </span>endp            SCASB1
<span style="color:black">TRANGROUP:2868
TRANGROUP:286A
TRANGROUP:286A </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:286A
TRANGROUP:286A
TRANGROUP:286A </span>proc            SCASB2 near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:286A                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:286C
TRANGROUP:286C </span>SCASBX<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:286C                 </span><span style="color:navy">mov     cx, </span><span style="color:green">256
</span><span style="color:black">TRANGROUP:286F                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:2871                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2871 </span>endp            SCASB2
<span style="color:black">TRANGROUP:2871
TRANGROUP:2872
TRANGROUP:2872 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2872
TRANGROUP:2872
TRANGROUP:2872 </span>proc            testkanj near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2872                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:2873                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:2874                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:2875                 </span><span style="color:navy">mov     ds, [cs:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:287A                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:287A                 </span><span style="color:navy">lds     si, [</span>Dbcs_Vector_Addr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:287E                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:287E
TRANGROUP:287E </span><span style="color:gray">ktlop</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:287E                 </span><span style="color:navy">cmp     [word ptr si], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2881                 </span><span style="color:navy">jz      short </span><span style="color:gray">notlead
</span><span style="color:black">TRANGROUP:2883                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:2884                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:2885                 </span><span style="color:navy">cmp     al, [si]
</span><span style="color:black">TRANGROUP:2887                 </span><span style="color:navy">jb      short </span><span style="color:gray">notlead
</span><span style="color:black">TRANGROUP:2889                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:288A                 </span><span style="color:navy">cmp     al, [si]
</span><span style="color:black">TRANGROUP:288C                 </span><span style="color:navy">jbe     short </span><span style="color:gray">islead
</span><span style="color:black">TRANGROUP:288E                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:288F                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ktlop
</span><span style="color:black">TRANGROUP:2891 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2891
TRANGROUP:2891 </span><span style="color:gray">notlead</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2891                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:2893                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ktret
</span><span style="color:black">TRANGROUP:2895 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2895
TRANGROUP:2895 </span><span style="color:gray">islead</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2895                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:2897                 </span><span style="color:navy">inc     ax
</span><span style="color:black">TRANGROUP:2898
TRANGROUP:2898 </span><span style="color:gray">ktret</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2898                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:2899                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:289A                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:289B                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:289B </span>endp            testkanj
<span style="color:black">TRANGROUP:289B
TRANGROUP:289C
TRANGROUP:289C </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:289C
TRANGROUP:289C
TRANGROUP:289C </span>proc            UPCONV near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:289C                 </span><span style="color:navy">cmp     al, </span><span style="color:green">80h         </span>; see if char is &gt; ascii 128
<span style="color:black">TRANGROUP:289E                 </span><span style="color:navy">jb      short </span><span style="color:gray">oth_fucase </span>; no - upper case math
<span style="color:black">TRANGROUP:28A0                 </span><span style="color:navy">sub     al, </span><span style="color:green">80h         </span>; only upper 128 chars in table
<span style="color:black">TRANGROUP:28A2                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:28A3                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:28A4                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:28A8                 </span><span style="color:navy">lds     bx, [dword ptr ds:</span>FUCase_Addr<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">] </span>; get table address
<span style="color:black">TRANGROUP:28AC                 </span><span style="color:navy">add     bx, </span><span style="color:#ff8000">2           </span>; skip over first word
<span style="color:black">TRANGROUP:28AF                 </span><span style="color:navy">xlat
</span><span style="color:black">TRANGROUP:28B0                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:28B1                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:28B2                 </span><span style="color:navy">jmp     short </span><span style="color:gray">upconv_end
</span><span style="color:black">TRANGROUP:28B4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:28B4
TRANGROUP:28B4 </span><span style="color:gray">oth_fucase</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:28B4                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">61h </span><span style="color:gray">; &#039;a&#039;
</span><span style="color:black">TRANGROUP:28B6                 </span><span style="color:navy">jb      short </span><span style="color:gray">upconv_end
</span><span style="color:black">TRANGROUP:28B8                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">7Ah </span><span style="color:gray">; &#039;z&#039;
</span><span style="color:black">TRANGROUP:28BA                 </span><span style="color:navy">ja      short </span><span style="color:gray">upconv_end
</span><span style="color:black">TRANGROUP:28BC                 </span><span style="color:navy">sub     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;   </span>; Change lower-case to upper
<span style="color:black">TRANGROUP:28BE
TRANGROUP:28BE </span><span style="color:gray">upconv_end</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:28BE                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:28BE </span>endp            UPCONV
<span style="color:black">TRANGROUP:28BE
TRANGROUP:28BF
TRANGROUP:28BF </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:28BF
TRANGROUP:28BF
TRANGROUP:28BF </span>proc            store_char near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:28BF                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:28C0                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:28C1                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:28C2                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:28C3                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:28C7                 </span><span style="color:navy">mov     es, [ds:</span>EnvirSeg<span style="color:navy">]
</span><span style="color:black">TRANGROUP:28CB                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:28CC                 </span><span style="color:navy">call    </span>GETENVSIZ
<span style="color:black">TRANGROUP:28CF                 </span><span style="color:navy">mov     bx, cx
</span><span style="color:black">TRANGROUP:28D1                 </span><span style="color:navy">sub     bx, </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:28D4                 </span><span style="color:navy">cmp     di, bx
</span><span style="color:black">TRANGROUP:28D6                 </span><span style="color:navy">jb      short </span><span style="color:gray">store1
</span><span style="color:black">TRANGROUP:28D8                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:28D9                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:28DA                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:28DB                 </span><span style="color:navy">call    </span>FREE_TPA
<span style="color:black">TRANGROUP:28DE                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:28DF                 </span><span style="color:navy">add     bx, </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:28E2                 </span><span style="color:navy">cmp     bx, </span><span style="color:green">8000h
</span><span style="color:black">TRANGROUP:28E6                 </span><span style="color:navy">jb      short </span><span style="color:gray">envsiz_ok
</span><span style="color:black">TRANGROUP:28E8
TRANGROUP:28E8 </span><span style="color:gray">bad_env_size</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:28E8                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:28E9                 </span><span style="color:navy">jmp     short </span><span style="color:gray">envnoset
</span><span style="color:black">TRANGROUP:28EB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:28EB
TRANGROUP:28EB </span><span style="color:gray">envsiz_ok</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:28EB                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:black">TRANGROUP:28ED                 </span><span style="color:navy">shr     bx, cl
</span><span style="color:black">TRANGROUP:28EF                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:28F0                 </span><span style="color:navy">mov     cx, es
</span><span style="color:black">TRANGROUP:28F2                 </span><span style="color:navy">add     cx, bx
</span><span style="color:black">TRANGROUP:28F4                 </span><span style="color:navy">add     cx, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:28F7                 </span><span style="color:navy">mov     ax, cs
</span><span style="color:black">TRANGROUP:28F9                 </span><span style="color:navy">cmp     cx, ax
</span><span style="color:black">TRANGROUP:28FB                 </span><span style="color:navy">jnb     short </span><span style="color:gray">bad_env_size
</span><span style="color:black">TRANGROUP:28FD                 </span><span style="color:navy">mov     ah, </span><span style="color:green">4Ah
</span><span style="color:black">TRANGROUP:28FF                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ADJUST MEMORY BLOCK SIZE (SETBLOCK)
<span style="color:black">TRANGROUP:28FF                                         </span>; ES = segment address of block to change
<span style="color:black">TRANGROUP:28FF                                         </span>; BX = new size in paragraphs
<span style="color:black">TRANGROUP:2901
TRANGROUP:2901 </span><span style="color:gray">envnoset</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2901                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:2902                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:2903                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2907                 </span><span style="color:navy">call    </span>ALLOC_TPA
<span style="color:black">TRANGROUP:290A                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:290B                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:290C                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:290D                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:290E                 </span><span style="color:navy">jnb     short </span><span style="color:gray">store1
</span><span style="color:black">TRANGROUP:2910                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2911                 </span><span style="color:navy">mov     dx, offset </span>ENVERR_PTR
<span style="color:black">TRANGROUP:2914                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:2917 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2917
TRANGROUP:2917 </span><span style="color:gray">store1</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2917                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2918                 </span><span style="color:navy">mov     [word ptr es:di], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:291D                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:291E                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:291F                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:2920                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2920 </span>endp            store_char
<span style="color:black">TRANGROUP:2920
TRANGROUP:2921
TRANGROUP:2921 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2921
TRANGROUP:2921
TRANGROUP:2921 </span>proc            GETENVSIZ near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2921                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:2922                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:2923                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">TRANGROUP:2925                 </span><span style="color:navy">dec     ax
</span><span style="color:black">TRANGROUP:2926                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:2928                 </span>assume es:nothing
<span style="color:black">TRANGROUP:2928                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:ARENA.size]
<span style="color:black">TRANGROUP:292C                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:black">TRANGROUP:292E                 </span><span style="color:navy">shl     ax, cl          </span>; Convert to bytes
<span style="color:black">TRANGROUP:2930                 </span><span style="color:navy">mov     cx, ax
</span><span style="color:black">TRANGROUP:2932                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:2933                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2934                 </span>assume es:nothing
<span style="color:black">TRANGROUP:2934
TRANGROUP:2934 </span>getenvsiz_retn<span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2934                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2934 </span>endp            GETENVSIZ
<span style="color:black">TRANGROUP:2934
TRANGROUP:2935
TRANGROUP:2935 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2935
TRANGROUP:2935
TRANGROUP:2935 </span>proc            RestUDir1 near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2935                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:2936                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:293A                 </span><span style="color:navy">cmp     [ds:</span>RestDir<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:black">TRANGROUP:293F                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:2940                 </span><span style="color:navy">jz      short </span>getenvsiz_retn
<span style="color:black">TRANGROUP:2942
TRANGROUP:2942 </span>RestUDir<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2942                 </span><span style="color:navy">mov     dx, offset </span>USERDIR1
<span style="color:black">TRANGROUP:2945                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Bh
</span><span style="color:black">TRANGROUP:2947                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CHANGE THE CURRENT DIRECTORY (CHDIR)
<span style="color:black">TRANGROUP:2947                                         </span>; DS:DX -&gt; ASCIZ directory name (may include drive)
<span style="color:black">TRANGROUP:2949                 </span><span style="color:navy">xor     al, al          </span>; 0
<span style="color:black">TRANGROUP:294B                 </span><span style="color:navy">call    </span>SETREST
<span style="color:black">TRANGROUP:294E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:294E </span>endp            RestUDir1
<span style="color:black">TRANGROUP:294E
TRANGROUP:294F
TRANGROUP:294F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:294F
TRANGROUP:294F
TRANGROUP:294F </span>proc            _$CHDIR near            <span style="color:#8080ff">; ...
</span><span style="color:black">TRANGROUP:294F                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:black">TRANGROUP:2952                 </span><span style="color:navy">mov     di, offset </span>PARSE_CHDIR
<span style="color:black">TRANGROUP:2955                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:2957                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:2959                 </span><span style="color:navy">call    </span>Parse_With_Msg
<span style="color:black">TRANGROUP:295C                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:295F                 </span><span style="color:navy">jz      short </span><span style="color:gray">bwdj
</span><span style="color:black">TRANGROUP:2961                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2964                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ChDirErr
</span><span style="color:black">TRANGROUP:2966                 </span><span style="color:navy">cmp     [ds:</span>PARSE1_OUTPUT<span style="color:navy">], </span><span style="color:#ff8000">6 </span>; byte [PARSE1_TYPE],result_drive
<span style="color:black">TRANGROUP:296B                 </span><span style="color:navy">jnz     short </span><span style="color:gray">REALCD
</span><span style="color:black">TRANGROUP:296D                 </span><span style="color:navy">mov     di, offset </span>PARSE_CHDIR
<span style="color:black">TRANGROUP:2970                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:2972                 </span><span style="color:navy">call    </span>parse_check_eol
<span style="color:black">TRANGROUP:2975                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ChDirErr
</span><span style="color:black">TRANGROUP:2977
TRANGROUP:2977 </span><span style="color:gray">bwdj</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2977                 </span><span style="color:navy">call    </span>build_dir_for_chdir
<span style="color:black">TRANGROUP:297A                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:297D
TRANGROUP:297D </span><span style="color:gray">chdir_retn</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:297D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:297E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:297E
TRANGROUP:297E </span><span style="color:gray">REALCD</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:297E                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:297F                 </span><span style="color:navy">lds     si, [ds:</span>PARSE1_ADDR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2983                 </span><span style="color:navy">call    </span>Move_To_SrcBuf
<span style="color:black">TRANGROUP:2986                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:2987                 </span><span style="color:navy">mov     di, offset </span>PARSE_CHDIR
<span style="color:black">TRANGROUP:298A                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:298C                 </span><span style="color:navy">call    </span>parse_check_eol
<span style="color:black">TRANGROUP:298F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ChDirErr
</span><span style="color:black">TRANGROUP:2991                 </span><span style="color:navy">call    </span>SETPATH
<span style="color:black">TRANGROUP:2994                 </span><span style="color:navy">test    [ds:</span>DestInfo<span style="color:navy">], </span><span style="color:green">2
</span><span style="color:black">TRANGROUP:2999                 </span><span style="color:navy">jnz     short </span><span style="color:gray">BadChDir
</span><span style="color:black">TRANGROUP:299B                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Bh         </span>; CHDir
<span style="color:black">TRANGROUP:299D                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:29A0                 </span><span style="color:navy">jnb     short </span><span style="color:gray">chdir_retn
</span><span style="color:black">TRANGROUP:29A2                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:29A5                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">3           </span>; ERROR_PATH_NOT_FOUND
<span style="color:black">TRANGROUP:29A8                 </span><span style="color:navy">jz      short </span><span style="color:gray">BadChDir
</span><span style="color:black">TRANGROUP:29AA                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">5           </span>; ERROR_ACCESS_DENIED
<span style="color:black">TRANGROUP:29AD                 </span><span style="color:navy">jz      short </span><span style="color:gray">BadChDir
</span><span style="color:black">TRANGROUP:29AF                 </span><span style="color:navy">call    </span>set_ext_error_subst
<span style="color:black">TRANGROUP:29B2                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ChDirErr
</span><span style="color:black">TRANGROUP:29B4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:29B4
TRANGROUP:29B4 </span><span style="color:gray">BadChDir</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:29B4                 </span><span style="color:navy">mov     dx, offset </span>badcd_ptr
<span style="color:black">TRANGROUP:29B7
TRANGROUP:29B7 </span><span style="color:gray">ChDirErr</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:29B7                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:29BA
TRANGROUP:29BA </span>mkdir_retn<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:29BA                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:29BA </span>endp            _$CHDIR
<span style="color:black">TRANGROUP:29BA
TRANGROUP:29BB
TRANGROUP:29BB </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:29BB
TRANGROUP:29BB
TRANGROUP:29BB </span>proc            _$MKDIR near            <span style="color:#8080ff">; ...
</span><span style="color:black">TRANGROUP:29BB                 </span><span style="color:navy">call    </span>SETRMMK
<span style="color:black">TRANGROUP:29BE                 </span><span style="color:navy">jb      short </span><span style="color:gray">MkDirErr
</span><span style="color:black">TRANGROUP:29C0                 </span><span style="color:navy">mov     ah, </span><span style="color:green">39h         </span>; MKDIR
<span style="color:black">TRANGROUP:29C2                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:29C5                 </span><span style="color:navy">jnb     short </span>mkdir_retn
<span style="color:black">TRANGROUP:29C7                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:29CA                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">3           </span>; ERROR_PATH_NOT_FOUND
<span style="color:black">TRANGROUP:29CD                 </span><span style="color:navy">jz      short </span><span style="color:gray">MD_other_err
</span><span style="color:black">TRANGROUP:29CF                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">5           </span>; ERROR_ACCESS_DENIED
<span style="color:black">TRANGROUP:29D2                 </span><span style="color:navy">jz      short </span><span style="color:gray">badmderr
</span><span style="color:black">TRANGROUP:29D4                 </span><span style="color:navy">call    </span>set_ext_error_subst
<span style="color:black">TRANGROUP:29D7                 </span><span style="color:navy">jmp     short </span><span style="color:gray">MkDirErr
</span><span style="color:black">TRANGROUP:29D9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:29D9
TRANGROUP:29D9 </span><span style="color:gray">badmderr</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:29D9                 </span><span style="color:navy">mov     dx, offset </span>SRCXNAME
<span style="color:black">TRANGROUP:29DC                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">1Ah         </span>; Set_DMA
<span style="color:black">TRANGROUP:29DE                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:29E1                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">4Eh </span><span style="color:gray">; &#039;N&#039;   </span>; Find_First
<span style="color:black">TRANGROUP:29E3                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">10h         </span>; ATTR_DIRECTORY
<span style="color:black">TRANGROUP:29E6                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:29E9                 </span><span style="color:navy">jb      short </span><span style="color:gray">MD_other_err
</span><span style="color:black">TRANGROUP:29EB                 </span><span style="color:navy">mov     dl, [ds:</span>SRCXNAME<span style="color:navy">+</span><span style="color:green">15h</span><span style="color:navy">] </span>; [SRCXNAME+FIND_BUF.ATTR] ; [SRCXNAME+21]
<span style="color:black">TRANGROUP:29EF                 </span><span style="color:navy">test    dl, </span><span style="color:green">10h         </span>; ATTR_DIRECTORY
<span style="color:black">TRANGROUP:29F2                 </span><span style="color:navy">jz      short </span><span style="color:gray">MD_other_err
</span><span style="color:black">TRANGROUP:29F4                 </span><span style="color:navy">mov     dx, offset </span>MD_EXISTS_PTR
<span style="color:black">TRANGROUP:29F7                 </span><span style="color:navy">jmp     short </span><span style="color:gray">MkDirErr
</span><span style="color:black">TRANGROUP:29F9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:29F9
TRANGROUP:29F9 </span><span style="color:gray">MD_other_err</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:29F9                 </span><span style="color:navy">mov     dx, offset </span>badmkd_ptr
<span style="color:black">TRANGROUP:29FC
TRANGROUP:29FC </span><span style="color:gray">MkDirErr</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:29FC                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:29FF
TRANGROUP:29FF </span>rmdir_retn<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:29FF                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:29FF </span>endp            _$MKDIR
<span style="color:black">TRANGROUP:29FF
TRANGROUP:2A00
TRANGROUP:2A00 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2A00
TRANGROUP:2A00
TRANGROUP:2A00 </span>proc            SETRMMK near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2A00                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:black">TRANGROUP:2A03                 </span><span style="color:navy">mov     di, offset </span>PARSE_MRDIR
<span style="color:black">TRANGROUP:2A06                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:2A08                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:2A0A                 </span><span style="color:navy">call    </span>Parse_With_Msg
<span style="color:black">TRANGROUP:2A0D                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2A10                 </span><span style="color:navy">jnz     short </span><span style="color:gray">noargerr
</span><span style="color:black">TRANGROUP:2A12                 </span><span style="color:navy">mov     di, offset </span>SRCXNAME
<span style="color:black">TRANGROUP:2A15                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:2A16                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:2A17                 </span><span style="color:navy">lds     si, [ds:</span>PARSE1_ADDR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2A1B
TRANGROUP:2A1B </span><span style="color:gray">mrdir_move_filename</span><span style="color:navy">:                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2A1B                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2A1C                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2A1D                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2A1F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">mrdir_move_filename
</span><span style="color:black">TRANGROUP:2A21                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:2A22                 </span><span style="color:navy">mov     di, offset </span>PARSE_MRDIR
<span style="color:black">TRANGROUP:2A25                 </span><span style="color:navy">call    </span>parse_check_eol
<span style="color:black">TRANGROUP:2A28                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:2A29                 </span><span style="color:navy">jz      short </span>rmdir_retn
<span style="color:black">TRANGROUP:2A2B
TRANGROUP:2A2B </span><span style="color:gray">noargerr</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2A2B                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:black">TRANGROUP:2A2E                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:2A30                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:2A31
TRANGROUP:2A31 </span>setrmmk_retn<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2A31                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2A31 </span>endp            SETRMMK
<span style="color:black">TRANGROUP:2A31
TRANGROUP:2A32
TRANGROUP:2A32 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2A32
TRANGROUP:2A32
TRANGROUP:2A32 </span>proc            _$RMDIR near            <span style="color:#8080ff">; ...
</span><span style="color:black">TRANGROUP:2A32                 </span><span style="color:navy">call    </span>SETRMMK
<span style="color:black">TRANGROUP:2A35                 </span><span style="color:navy">jb      short </span><span style="color:gray">RmDirErr
</span><span style="color:black">TRANGROUP:2A37                 </span><span style="color:navy">jnz     short </span><span style="color:gray">badrderr
</span><span style="color:black">TRANGROUP:2A39                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Ah         </span>; RMDIR
<span style="color:black">TRANGROUP:2A3B                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:2A3E                 </span><span style="color:navy">jnb     short </span>setrmmk_retn
<span style="color:black">TRANGROUP:2A40                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:2A43                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">3           </span>; ERROR_PATH_NOT_FOUND
<span style="color:black">TRANGROUP:2A46                 </span><span style="color:navy">jz      short </span><span style="color:gray">badrderr
</span><span style="color:black">TRANGROUP:2A48                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">5           </span>; ERROR_ACCESS_DENIED
<span style="color:black">TRANGROUP:2A4B                 </span><span style="color:navy">jz      short </span><span style="color:gray">badrderr
</span><span style="color:black">TRANGROUP:2A4D                 </span><span style="color:navy">call    </span>set_ext_error_subst
<span style="color:black">TRANGROUP:2A50                 </span><span style="color:navy">jmp     short </span><span style="color:gray">RmDirErr
</span><span style="color:black">TRANGROUP:2A52 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2A52
TRANGROUP:2A52 </span><span style="color:gray">badrderr</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2A52                 </span><span style="color:navy">mov     dx, offset </span>badrmd_ptr
<span style="color:black">TRANGROUP:2A55
TRANGROUP:2A55 </span><span style="color:gray">RmDirErr</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2A55                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:2A58
TRANGROUP:2A58 </span>savudir_err_retn<span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2A58                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2A58 </span>endp            _$RMDIR
<span style="color:black">TRANGROUP:2A58
TRANGROUP:2A59
TRANGROUP:2A59 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2A59
TRANGROUP:2A59
TRANGROUP:2A59 </span>proc            set_ext_error_subst near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2A59                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; ext_msg_class
<span style="color:black">TRANGROUP:2A5E                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:2A62                 </span><span style="color:navy">mov     [ds:</span>extend_buf_sub<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; one_subst
<span style="color:black">TRANGROUP:2A67                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:black">TRANGROUP:2A6A                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:2A6D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2A6D </span>endp            set_ext_error_subst
<span style="color:black">TRANGROUP:2A6D
TRANGROUP:2A6E
TRANGROUP:2A6E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2A6E
TRANGROUP:2A6E
TRANGROUP:2A6E </span>proc            SAVUDIR near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2A6E                 </span><span style="color:navy">mov     di, offset </span>USERDIR1
<span style="color:black">TRANGROUP:2A71
TRANGROUP:2A71 </span>SAVUDIR1<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2A71                 </span><span style="color:navy">mov     al, dl
</span><span style="color:black">TRANGROUP:2A73                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;
</span><span style="color:black">TRANGROUP:2A75                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;
</span><span style="color:black">TRANGROUP:2A77                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GOTUDRV
</span><span style="color:black">TRANGROUP:2A79                 </span><span style="color:navy">add     al, [ds:</span>CURDRV<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2A7D                 </span><span style="color:navy">inc     al              </span>; A = 1
<span style="color:black">TRANGROUP:2A7F
TRANGROUP:2A7F </span><span style="color:gray">GOTUDRV</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2A7F                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2A80                 </span><span style="color:navy">mov     ah, [ds:</span>DIRCHAR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2A84                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:black">TRANGROUP:2A86                 </span><span style="color:navy">stosw
</span><span style="color:black">TRANGROUP:2A87                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:2A88                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:2A89                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:2A8B                 </span><span style="color:navy">mov     ah, </span><span style="color:green">47h         </span>; CURRENT_DIR
<span style="color:black">TRANGROUP:2A8D                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:2A90                 </span><span style="color:navy">jb      short </span>savudir_err_retn
<span style="color:black">TRANGROUP:2A92                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:2A93                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:2A94                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:2A94                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2A94 </span>endp            SAVUDIR
<span style="color:black">TRANGROUP:2A94
TRANGROUP:2A95
TRANGROUP:2A95 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2A95
TRANGROUP:2A95
TRANGROUP:2A95 </span>proc            CRLF2 near              <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2A95                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:2A96                 </span><span style="color:navy">mov     dx, offset </span>acrlf_ptr
<span style="color:black">TRANGROUP:2A99                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:2A9A                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:2A9B                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:2A9C                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:2A9F                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:2AA0                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:2AA0                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:2AA1                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2AA1 </span>endp            CRLF2
<span style="color:black">TRANGROUP:2AA1
TRANGROUP:2AA2
TRANGROUP:2AA2 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2AA2
TRANGROUP:2AA2
TRANGROUP:2AA2 </span>proc            scanoff near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2AA2                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2AA3                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:2AA6                 </span><span style="color:navy">jz      short </span>scanoff
<span style="color:black">TRANGROUP:2AA8                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:2AA9
TRANGROUP:2AA9 </span>scanoff_retn<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2AA9                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2AA9 </span>endp            scanoff
<span style="color:black">TRANGROUP:2AA9
TRANGROUP:2AAA
TRANGROUP:2AAA </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2AAA
TRANGROUP:2AAA
TRANGROUP:2AAA </span>proc            DELIM near              <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2AAA                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:2AAC                 </span><span style="color:navy">jz      short </span>scanoff_retn
<span style="color:black">TRANGROUP:2AAE                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Dh </span><span style="color:gray">; &#039;=&#039;
</span><span style="color:black">TRANGROUP:2AB0                 </span><span style="color:navy">jz      short </span>scanoff_retn
<span style="color:black">TRANGROUP:2AB2                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">2Ch </span><span style="color:gray">; &#039;,&#039;
</span><span style="color:black">TRANGROUP:2AB4                 </span><span style="color:navy">jz      short </span>scanoff_retn
<span style="color:black">TRANGROUP:2AB6                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Bh </span><span style="color:gray">; &#039;;&#039;
</span><span style="color:black">TRANGROUP:2AB8                 </span><span style="color:navy">jz      short </span>scanoff_retn
<span style="color:black">TRANGROUP:2ABA                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:2ABC                 </span><span style="color:navy">jz      short </span>scanoff_retn
<span style="color:black">TRANGROUP:2ABE                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Ah
</span><span style="color:black">TRANGROUP:2AC0                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2AC0 </span>endp            DELIM
<span style="color:black">TRANGROUP:2AC0
TRANGROUP:2AC1
TRANGROUP:2AC1 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2AC1
TRANGROUP:2AC1
TRANGROUP:2AC1 </span>proc            FCB_TO_ASCZ near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2AC1                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">8
</span><span style="color:black">TRANGROUP:2AC4
TRANGROUP:2AC4 </span><span style="color:gray">MAINNAME</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2AC4                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2AC5                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:2AC7                 </span><span style="color:navy">jz      short </span><span style="color:gray">SKIPSPC
</span><span style="color:black">TRANGROUP:2AC9                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2ACA
TRANGROUP:2ACA </span><span style="color:gray">SKIPSPC</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2ACA                 </span><span style="color:navy">loop    </span><span style="color:gray">MAINNAME
</span><span style="color:black">TRANGROUP:2ACC                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2ACD                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:2ACF                 </span><span style="color:navy">jz      short </span><span style="color:gray">GOTNAME
</span><span style="color:black">TRANGROUP:2AD1                 </span><span style="color:navy">mov     ah, al
</span><span style="color:black">TRANGROUP:2AD3                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">2Eh </span><span style="color:gray">; &#039;.&#039;
</span><span style="color:black">TRANGROUP:2AD5                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2AD6                 </span><span style="color:navy">xchg    al, ah
</span><span style="color:black">TRANGROUP:2AD8                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2AD9                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:2ADB
TRANGROUP:2ADB </span><span style="color:gray">EXTNAME</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2ADB                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2ADC                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:2ADE                 </span><span style="color:navy">jz      short </span><span style="color:gray">GOTNAME
</span><span style="color:black">TRANGROUP:2AE0                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2AE1                 </span><span style="color:navy">loop    </span><span style="color:gray">EXTNAME
</span><span style="color:black">TRANGROUP:2AE3
TRANGROUP:2AE3 </span><span style="color:gray">GOTNAME</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2AE3                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:2AE5                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2AE6
TRANGROUP:2AE6 </span>STRCOMP_RETN<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2AE6                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2AE6 </span>endp            FCB_TO_ASCZ
<span style="color:black">TRANGROUP:2AE6
TRANGROUP:2AE7
TRANGROUP:2AE7 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2AE7
TRANGROUP:2AE7
TRANGROUP:2AE7 </span>proc            STRCOMP near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2AE7                 </span><span style="color:navy">cmpsb
</span><span style="color:black">TRANGROUP:2AE8                 </span><span style="color:navy">jnz     short </span>STRCOMP_RETN ; Strings not equal
<span style="color:black">TRANGROUP:2AEA                 </span><span style="color:navy">cmp     [byte ptr si-</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; Hit NUL terminator?
<span style="color:black">TRANGROUP:2AEE                 </span><span style="color:navy">jz      short </span>STRCOMP_RETN ; Yes, strings equal
<span style="color:black">TRANGROUP:2AF0                 </span><span style="color:navy">jmp     short </span>STRCOMP
<span style="color:black">TRANGROUP:2AF0 </span>endp            STRCOMP
<span style="color:black">TRANGROUP:2AF0
TRANGROUP:2AF2
TRANGROUP:2AF2 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2AF2
TRANGROUP:2AF2
TRANGROUP:2AF2 </span>proc            CRPRINT near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2AF2                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:2AF3                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0Dh         </span>; 13
<span style="color:black">TRANGROUP:2AF5                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:2AF6                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:2AF7                 </span><span style="color:navy">mov     di, dx
</span><span style="color:black">TRANGROUP:2AF9                 </span><span style="color:navy">mov     cx, </span><span style="color:green">0FFFFh      </span>; 65535
<span style="color:black">TRANGROUP:2AFC                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:2AFD                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:2AFE                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2AFF                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:2B01                 </span><span style="color:navy">mov     [byte ptr di-</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; nul terminate the string
<span style="color:black">TRANGROUP:2B05                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2B06                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:2B0A                 </span><span style="color:navy">mov     dx, offset </span>string_buf_ptr
<span style="color:black">TRANGROUP:2B0D                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:2B10                 </span><span style="color:navy">mov     [byte ptr di-</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">0Dh </span>; put the CR back
<span style="color:black">TRANGROUP:2B14                 </span><span style="color:navy">jb      short </span>error_output
<span style="color:black">TRANGROUP:2B16                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:2B17                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:2B18                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:2B19                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2B1A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2B1A
TRANGROUP:2B1A </span>error_output<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2B1A                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:2B1B                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:2B1C                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:2B1C                 </span><span style="color:navy">mov     es, [</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2B20                 </span>assume es:RESGROUP
<span style="color:black">TRANGROUP:2B20                 </span><span style="color:navy">mov     dx, offset </span>NOSPACE_PTR
<span style="color:black">TRANGROUP:2B23                 </span><span style="color:navy">cmp     [es:</span>PipeFlag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:black">TRANGROUP:2B29                 </span><span style="color:navy">jz      short </span><span style="color:gray">go_to_error
</span><span style="color:black">TRANGROUP:2B2B                 </span><span style="color:navy">call    </span>PipeOff
<span style="color:black">TRANGROUP:2B2E                 </span><span style="color:navy">mov     dx, offset </span>PIPEEMES_PTR
<span style="color:black">TRANGROUP:2B31
TRANGROUP:2B31 </span><span style="color:gray">go_to_error</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2B31                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:2B31 </span>endp            CRPRINT
<span style="color:black">TRANGROUP:2B31
TRANGROUP:2B34
TRANGROUP:2B34 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2B34
TRANGROUP:2B34
TRANGROUP:2B34 </span>proc            pathchrcmp near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2B34                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:2B35                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">2Fh </span><span style="color:gray">; &#039;/&#039;
</span><span style="color:black">TRANGROUP:2B37                 </span><span style="color:navy">cmp     [</span>SWITCHAR<span style="color:navy">], ah
</span><span style="color:black">TRANGROUP:2B3B                 </span><span style="color:navy">jz      short </span><span style="color:gray">noslasht
</span><span style="color:black">TRANGROUP:2B3D                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">2Fh </span><span style="color:gray">; &#039;/&#039;
</span><span style="color:black">TRANGROUP:2B3F                 </span><span style="color:navy">jz      short </span><span style="color:gray">pccont
</span><span style="color:black">TRANGROUP:2B41
TRANGROUP:2B41 </span><span style="color:gray">noslasht</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2B41                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">5Ch </span><span style="color:gray">; &#039;\&#039;
</span><span style="color:black">TRANGROUP:2B43
TRANGROUP:2B43 </span><span style="color:gray">pccont</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2B43                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:2B44                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2B44 </span>endp            pathchrcmp
<span style="color:black">TRANGROUP:2B44
TRANGROUP:2B45
TRANGROUP:2B45 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2B45
TRANGROUP:2B45
TRANGROUP:2B45 </span>proc            PathCrunch near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2B45                 </span><span style="color:navy">mov     [</span>Msg_Numb<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2B4B                 </span><span style="color:navy">mov     dl, </span>[5Ch]       ; [FCB]
<span style="color:black">TRANGROUP:2B4F                 </span><span style="color:navy">call    </span>SAVUDIR
<span style="color:black">TRANGROUP:2B52                 </span><span style="color:navy">jb      short </span><span style="color:gray">pcrunch_cderrj
</span><span style="color:black">TRANGROUP:2B54                 </span><span style="color:navy">call    </span>SETPATH
<span style="color:black">TRANGROUP:2B57                 </span><span style="color:navy">test    [</span>DestInfo<span style="color:navy">], </span><span style="color:green">2   </span>; test if wildcards (? or *) seen
<span style="color:black">TRANGROUP:2B5C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">trypeel   </span>; wildcard seen, peel filename
<span style="color:black">TRANGROUP:2B5E                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Bh
</span><span style="color:black">TRANGROUP:2B60                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CHANGE THE CURRENT DIRECTORY (CHDIR)
<span style="color:black">TRANGROUP:2B60                                         </span>; DS:DX -&gt; ASCIZ directory name (may include drive)
<span style="color:black">TRANGROUP:2B62                 </span><span style="color:navy">jnb     short </span><span style="color:gray">chdir_worked
</span><span style="color:black">TRANGROUP:2B64                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:2B67                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">3           </span>; ERROR_PATH_NOT_FOUND
<span style="color:black">TRANGROUP:2B6A                 </span><span style="color:navy">jz      short </span><span style="color:gray">trypeel
</span><span style="color:black">TRANGROUP:2B6C                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">5           </span>; ERROR_ACCESS_DENIED
<span style="color:black">TRANGROUP:2B6F                 </span><span style="color:navy">jz      short </span><span style="color:gray">trypeel
</span><span style="color:black">TRANGROUP:2B71                 </span><span style="color:navy">mov     [</span>Msg_Numb<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:2B74                 </span><span style="color:navy">jmp     </span><span style="color:gray">peelfail
</span><span style="color:black">TRANGROUP:2B77 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2B77
TRANGROUP:2B77 </span><span style="color:gray">chdir_worked</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2B77                 </span><span style="color:navy">call    </span>SetRest1
<span style="color:black">TRANGROUP:2B7A                 </span><span style="color:navy">mov     al, &#039;</span><span style="color:green">?&#039;
</span><span style="color:black">TRANGROUP:2B7C                 </span><span style="color:navy">mov     di, </span><span style="color:green">5Dh         </span>; FCB+1
<span style="color:black">TRANGROUP:2B7F                 </span><span style="color:navy">mov     cx, </span><span style="color:green">11
</span><span style="color:black">TRANGROUP:2B82                 </span><span style="color:navy">rep stosb
</span><span style="color:black">TRANGROUP:2B84                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:2B86                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2B87 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2B87
TRANGROUP:2B87 </span><span style="color:gray">pcrunch_cderrj</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2B87                 </span><span style="color:navy">jmp     </span><span style="color:gray">pcrunch_cderr
</span><span style="color:black">TRANGROUP:2B8A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2B8A
TRANGROUP:2B8A </span><span style="color:gray">trypeel</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2B8A                 </span><span style="color:navy">mov     si, [</span>PathPos<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2B8E                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:2B8F                 </span><span style="color:navy">mov     al, [si-</span><span style="color:green">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:2B92                 </span><span style="color:navy">cmp     [</span>KPARSE<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2B97                 </span><span style="color:navy">jnz     short </span><span style="color:gray">delstrt
</span><span style="color:black">TRANGROUP:2B99                 </span><span style="color:navy">call    </span>pathchrcmp
<span style="color:black">TRANGROUP:2B9C                 </span><span style="color:navy">jz      short </span><span style="color:gray">peelfail
</span><span style="color:black">TRANGROUP:2B9E
TRANGROUP:2B9E </span><span style="color:gray">delstrt</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2B9E                 </span><span style="color:navy">mov     cx, si
</span><span style="color:black">TRANGROUP:2BA0                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">TRANGROUP:2BA2                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:2BA3
TRANGROUP:2BA3 </span><span style="color:gray">delloop</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2BA3                 </span><span style="color:navy">cmp     si, cx
</span><span style="color:black">TRANGROUP:2BA5                 </span><span style="color:navy">jz      short </span><span style="color:gray">gotdele
</span><span style="color:black">TRANGROUP:2BA7                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2BA8                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:2BAB                 </span><span style="color:navy">jz      short </span><span style="color:gray">notkanj8
</span><span style="color:black">TRANGROUP:2BAD                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:2BAE                 </span><span style="color:navy">jmp     short </span><span style="color:gray">delloop
</span><span style="color:black">TRANGROUP:2BB0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2BB0
TRANGROUP:2BB0 </span><span style="color:gray">notkanj8</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2BB0                 </span><span style="color:navy">call    </span>pathchrcmp
<span style="color:black">TRANGROUP:2BB3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">delloop
</span><span style="color:black">TRANGROUP:2BB5                 </span><span style="color:navy">mov     dx, si
</span><span style="color:black">TRANGROUP:2BB7                 </span><span style="color:navy">dec     dx
</span><span style="color:black">TRANGROUP:2BB8                 </span><span style="color:navy">jmp     short </span><span style="color:gray">delloop
</span><span style="color:black">TRANGROUP:2BBA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2BBA
TRANGROUP:2BBA </span><span style="color:gray">gotdele</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2BBA                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">TRANGROUP:2BBC                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:2BBD                 </span><span style="color:navy">cmp     si, dx
</span><span style="color:black">TRANGROUP:2BBF                 </span><span style="color:navy">jz      short </span><span style="color:gray">badret
</span><span style="color:black">TRANGROUP:2BC1                 </span><span style="color:navy">mov     cx, si
</span><span style="color:black">TRANGROUP:2BC3                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">TRANGROUP:2BC5
TRANGROUP:2BC5 </span><span style="color:gray">delloop2</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2BC5                 </span><span style="color:navy">cmp     si, cx
</span><span style="color:black">TRANGROUP:2BC7                 </span><span style="color:navy">jz      short </span><span style="color:gray">trycd
</span><span style="color:black">TRANGROUP:2BC9                 </span><span style="color:navy">mov     [</span>KPARSE<span style="color:navy">], </span><span style="color:#ff8000">0     </span>; byte
<span style="color:black">TRANGROUP:2BCE                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2BCF                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:2BD2                 </span><span style="color:navy">jz      short </span><span style="color:gray">delloop2
</span><span style="color:black">TRANGROUP:2BD4                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:2BD5                 </span><span style="color:navy">inc     [</span>KPARSE<span style="color:navy">]        </span>; byte
<span style="color:black">TRANGROUP:2BD9                 </span><span style="color:navy">jmp     short </span><span style="color:gray">delloop2
</span><span style="color:black">TRANGROUP:2BDB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2BDB
TRANGROUP:2BDB </span><span style="color:gray">trycd</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2BDB                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:2BDC                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">2Eh </span><span style="color:gray">; &#039;.&#039;
</span><span style="color:black">TRANGROUP:2BDE                 </span><span style="color:navy">cmp     [si+</span><span style="color:#ff8000">1</span><span style="color:navy">], al
</span><span style="color:black">TRANGROUP:2BE1                 </span><span style="color:navy">jnz     short </span><span style="color:gray">trycd1
</span><span style="color:black">TRANGROUP:2BE3                 </span><span style="color:navy">cmp     [si+</span><span style="color:#ff8000">2</span><span style="color:navy">], al
</span><span style="color:black">TRANGROUP:2BE6                 </span><span style="color:navy">jz      short </span><span style="color:gray">trycd1
</span><span style="color:black">TRANGROUP:2BE8                 </span><span style="color:navy">cmp     [byte ptr si+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2BEC
TRANGROUP:2BEC </span><span style="color:gray">trycd1</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2BEC                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:2BED                 </span><span style="color:navy">jz      short </span><span style="color:gray">peelfail
</span><span style="color:black">TRANGROUP:2BEF                 </span><span style="color:navy">mov     al, [si-</span><span style="color:green">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:2BF2                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:black">TRANGROUP:2BF4                 </span><span style="color:navy">jz      short </span><span style="color:gray">badret
</span><span style="color:black">TRANGROUP:2BF6                 </span><span style="color:navy">cmp     [</span>KPARSE<span style="color:navy">], </span><span style="color:#ff8000">0     </span>; byte
<span style="color:black">TRANGROUP:2BFB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">notdoublesl
</span><span style="color:black">TRANGROUP:2BFD                 </span><span style="color:navy">call    </span>pathchrcmp
<span style="color:black">TRANGROUP:2C00                 </span><span style="color:navy">jnz     short </span><span style="color:gray">notdoublesl
</span><span style="color:black">TRANGROUP:2C02
TRANGROUP:2C02 </span><span style="color:gray">peelfail</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2C02                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:2C03                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2C04 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2C04
TRANGROUP:2C04 </span><span style="color:gray">notdoublesl</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2C04                 </span><span style="color:navy">mov     [byte ptr si], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2C07                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Bh
</span><span style="color:black">TRANGROUP:2C09                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:2C0C                 </span><span style="color:navy">jnb     short </span><span style="color:gray">cdsucc
</span><span style="color:black">TRANGROUP:2C0E
TRANGROUP:2C0E </span><span style="color:gray">pcrunch_cderr</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2C0E                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:2C11                 </span><span style="color:navy">mov     [</span>Msg_Numb<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:2C14                 </span><span style="color:navy">or      si, si
</span><span style="color:black">TRANGROUP:2C16                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:2C17
TRANGROUP:2C17 </span><span style="color:gray">pcrunch_retn</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2C17                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2C18 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2C18
TRANGROUP:2C18 </span><span style="color:gray">badret</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2C18                 </span><span style="color:navy">mov     al, [si]
</span><span style="color:black">TRANGROUP:2C1A                 </span><span style="color:navy">call    </span>pathchrcmp
<span style="color:black">TRANGROUP:2C1D                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:2C1E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">pcrunch_retn
</span><span style="color:black">TRANGROUP:2C20                 </span><span style="color:navy">xor     bl, bl
</span><span style="color:black">TRANGROUP:2C22                 </span><span style="color:navy">xchg    bl, [si+</span><span style="color:#ff8000">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:2C25                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">3Bh </span><span style="color:gray">; &#039;;&#039;
</span><span style="color:black">TRANGROUP:2C27                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:2C2A                 </span><span style="color:navy">jb      short </span><span style="color:gray">pcrunch_cderr
</span><span style="color:black">TRANGROUP:2C2C                 </span><span style="color:navy">mov     [si+</span><span style="color:#ff8000">1</span><span style="color:navy">], bl
</span><span style="color:black">TRANGROUP:2C2F
TRANGROUP:2C2F </span><span style="color:gray">cdsucc</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2C2F                 </span><span style="color:navy">call    </span>SetRest1
<span style="color:black">TRANGROUP:2C32                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:2C33                 </span><span style="color:navy">mov     [</span>DestTail<span style="color:navy">], si
</span><span style="color:black">TRANGROUP:2C37                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:2C38                 </span><span style="color:navy">cmp     [</span>DirFlag<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; -1
<span style="color:black">TRANGROUP:2C3D                 </span><span style="color:navy">jz      short </span><span style="color:gray">pcrunch_end
</span><span style="color:black">TRANGROUP:2C3F                 </span><span style="color:navy">mov     di, </span><span style="color:green">5Ch         </span>; FCB
<span style="color:black">TRANGROUP:2C42                 </span><span style="color:navy">mov     ax, </span><span style="color:green">2902h
</span><span style="color:black">TRANGROUP:2C45                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - PARSE FILENAME
<span style="color:black">TRANGROUP:2C45                                         </span>; DS:SI -&gt; string to parse
<span style="color:black">TRANGROUP:2C45                                         </span>; ES:DI -&gt; buffer to fill with unopened FCB
<span style="color:black">TRANGROUP:2C45                                         </span>; AL = bit mask to control parsing
<span style="color:black">TRANGROUP:2C47
TRANGROUP:2C47 </span><span style="color:gray">pcrunch_end</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2C47                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:2C48                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2C48 </span>endp            PathCrunch
<span style="color:black">TRANGROUP:2C48
TRANGROUP:2C49 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2C49 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR SWITCH
</span><span style="color:black">TRANGROUP:2C49
TRANGROUP:2C49 </span><span style="color:gray">RETSW</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2C49                 </span><span style="color:navy">xchg    ax, bx
</span><span style="color:black">TRANGROUP:2C4A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2C4A </span><span style="color:gray">; END OF FUNCTION CHUNK FOR SWITCH
</span><span style="color:black">TRANGROUP:2C4B
TRANGROUP:2C4B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2C4B
TRANGROUP:2C4B
TRANGROUP:2C4B </span>proc            SWITCH near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2C4B
TRANGROUP:2C4B </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:2C49 SIZE 00000002 BYTES
</span><span style="color:black">TRANGROUP:2C4B
TRANGROUP:2C4B                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:2C4D
TRANGROUP:2C4D </span><span style="color:gray">SWLOOP</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2C4D                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:2C50                 </span><span style="color:navy">cmp     al, [</span>SWITCHAR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2C54                 </span><span style="color:navy">jnz     short </span><span style="color:gray">RETSW
</span><span style="color:black">TRANGROUP:2C56                 </span><span style="color:navy">or      bx, </span><span style="color:green">8000h       </span>; FSWITCH
<span style="color:black">TRANGROUP:2C5A                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:2C5B                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:2C5E                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:2C60                 </span><span style="color:navy">jz      short </span><span style="color:gray">RETSW
</span><span style="color:black">TRANGROUP:2C62                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:2C63                 </span><span style="color:navy">call    </span>UPCONV
<span style="color:black">TRANGROUP:2C66                 </span><span style="color:navy">mov     di, offset </span>switch_list <span style="color:gray">; &quot;-Y?VBAPW&quot;
</span><span style="color:black">TRANGROUP:2C69                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">8
</span><span style="color:black">TRANGROUP:2C6C                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:2C6E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">BADSW
</span><span style="color:black">TRANGROUP:2C70                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:2C73                 </span><span style="color:navy">shl     ax, cl
</span><span style="color:black">TRANGROUP:2C75                 </span><span style="color:navy">or      bx, ax
</span><span style="color:black">TRANGROUP:2C77                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SWLOOP
</span><span style="color:black">TRANGROUP:2C79 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2C79
TRANGROUP:2C79 </span><span style="color:gray">BADSW</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2C79                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SWLOOP
</span><span style="color:black">TRANGROUP:2C79 </span>endp            SWITCH
<span style="color:black">TRANGROUP:2C79
TRANGROUP:2C7B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2C7B </span><span style="color:gray">; START OF FUNCTION CHUNK FOR PROMPTBAT
</span><span style="color:black">TRANGROUP:2C7B
TRANGROUP:2C7B </span>DRVBAD<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2C7B                 </span><span style="color:navy">mov     dx, offset </span>baddrv_ptr
<span style="color:black">TRANGROUP:2C7E                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:2C7E </span><span style="color:gray">; END OF FUNCTION CHUNK FOR PROMPTBAT
</span><span style="color:maroon">TRANGROUP:2C81 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2C81
TRANGROUP:2C81 </span>EXTERNALJ<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2C81                 </span><span style="color:navy">jmp     </span>EXTERNAL
<span style="color:maroon">TRANGROUP:2C84 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2C84
TRANGROUP:2C84 </span>FNDCOM<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2C84                 </span><span style="color:navy">or      al, al
</span><span style="color:maroon">TRANGROUP:2C86                 </span><span style="color:navy">jz      short </span>EXTERNALJ
<span style="color:maroon">TRANGROUP:2C88                 </span><span style="color:navy">call    </span>test_append
<span style="color:maroon">TRANGROUP:2C8B                 </span><span style="color:navy">jz      short </span>CONTCOM
<span style="color:maroon">TRANGROUP:2C8D
TRANGROUP:2C8D </span>APPEND_INTERNAL<span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2C8D                 </span><span style="color:navy">mov     cl, [</span>IDLEN<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:2C91                 </span><span style="color:navy">mov     ch, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:2C93                 </span><span style="color:navy">mov     [</span>PathPos<span style="color:navy">], cx
</span><span style="color:maroon">TRANGROUP:2C97                 </span><span style="color:navy">inc     [</span>append_exec<span style="color:navy">]   </span>; byte
<span style="color:maroon">TRANGROUP:2C9B                 </span><span style="color:navy">call    </span>IOSET
<span style="color:maroon">TRANGROUP:2C9E                 </span><span style="color:navy">mov     si, offset </span>IDLEN
<span style="color:maroon">TRANGROUP:2CA1                 </span><span style="color:navy">mov     dx, </span><span style="color:green">0FFFFh
</span><span style="color:maroon">TRANGROUP:2CA4                 </span><span style="color:navy">mov     di, offset </span>append_parse
<span style="color:maroon">TRANGROUP:2CA7                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0AE01h
</span><span style="color:maroon">TRANGROUP:2CAA                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - DOS 3.3+ internal - INSTALLABLE COMMAND - EXECUTE
<span style="color:maroon">TRANGROUP:2CAA                                         </span>; DX = FFFFh, DS:SI -&gt; buffer
<span style="color:maroon">TRANGROUP:2CAA                                         </span>; Return: buffer at DS:SI filled with a length byte followed by the uppercase
<span style="color:maroon">TRANGROUP:2CAA                                         </span>; internal command to execute (if length not 0)
<span style="color:maroon">TRANGROUP:2CAC                 </span><span style="color:navy">cmp     [</span>IDLEN<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:2CB1                 </span><span style="color:navy">jnz     short </span>CONTCOM
<span style="color:maroon">TRANGROUP:2CB3                 </span><span style="color:navy">jmp     </span>CMD_DONE
<span style="color:maroon">TRANGROUP:2CB6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2CB6
TRANGROUP:2CB6 </span>CONTCOM<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2CB6                 </span><span style="color:navy">mov     di, offset </span>COMTAB <span style="color:gray">; &quot;\x03DIR&quot;
</span><span style="color:maroon">TRANGROUP:2CB9                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:maroon">TRANGROUP:2CBB
TRANGROUP:2CBB </span>FINDCOM<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2CBB                 </span><span style="color:navy">mov     si, offset </span>ID
<span style="color:maroon">TRANGROUP:2CBE                 </span><span style="color:navy">mov     cl, [di]
</span><span style="color:maroon">TRANGROUP:2CC0                 </span><span style="color:navy">inc     di
</span><span style="color:maroon">TRANGROUP:2CC1                 </span><span style="color:navy">jcxz    short </span>EXTERNALJ
<span style="color:maroon">TRANGROUP:2CC3                 </span><span style="color:navy">cmp     cl, [</span>IDLEN<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:2CC7                 </span><span style="color:navy">jnz     short </span>ABCD
<span style="color:maroon">TRANGROUP:2CC9                 </span><span style="color:navy">mov     [</span>PathPos<span style="color:navy">], cx
</span><span style="color:maroon">TRANGROUP:2CCD                 </span><span style="color:navy">repe cmpsb
</span><span style="color:maroon">TRANGROUP:2CCF
TRANGROUP:2CCF </span>ABCD<span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2CCF                 </span><span style="color:navy">lahf
</span><span style="color:maroon">TRANGROUP:2CD0                 </span><span style="color:navy">add     di, cx
</span><span style="color:maroon">TRANGROUP:2CD2                 </span><span style="color:navy">mov     al, [di]
</span><span style="color:maroon">TRANGROUP:2CD4                 </span><span style="color:navy">mov     [</span>CHKDRV<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:2CD7                 </span><span style="color:navy">inc     di
</span><span style="color:maroon">TRANGROUP:2CD8                 </span><span style="color:navy">mov     bx, [di]
</span><span style="color:maroon">TRANGROUP:2CDA                 </span><span style="color:navy">inc     di
</span><span style="color:maroon">TRANGROUP:2CDB                 </span><span style="color:navy">inc     di
</span><span style="color:maroon">TRANGROUP:2CDC                 </span><span style="color:navy">mov     dx, [di]
</span><span style="color:maroon">TRANGROUP:2CDE                 </span><span style="color:navy">inc     di
</span><span style="color:maroon">TRANGROUP:2CDF                 </span><span style="color:navy">inc     di
</span><span style="color:maroon">TRANGROUP:2CE0                 </span><span style="color:navy">sahf
</span><span style="color:maroon">TRANGROUP:2CE1                 </span><span style="color:navy">jnz     short </span>FINDCOM
<span style="color:maroon">TRANGROUP:2CE3                 </span><span style="color:navy">cmp     [</span>append_exec<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:maroon">TRANGROUP:2CE8                 </span><span style="color:navy">jnz     short </span>DONT_SET_IO
<span style="color:maroon">TRANGROUP:2CEA                 </span><span style="color:navy">call    </span>IOSET
<span style="color:maroon">TRANGROUP:2CED
TRANGROUP:2CED </span>DONT_SET_IO<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2CED                 </span><span style="color:navy">mov     ax, [</span>COMSW<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:2CF0                 </span><span style="color:navy">or      ax, [</span>ARGTS<span style="color:navy">]     </span>; [AllSwitch]
<span style="color:maroon">TRANGROUP:2CF4                 </span><span style="color:navy">and     ax, </span><span style="color:green">20h         </span>; SwitchQues
<span style="color:maroon">TRANGROUP:2CF7                 </span><span style="color:navy">jz      short </span>DRIVE_CHECK
<span style="color:maroon">TRANGROUP:2CF9                 </span><span style="color:navy">test    [</span>CHKDRV<span style="color:navy">], </span><span style="color:green">4     </span>; byte [CHKDRV],fLimitHelp
<span style="color:maroon">TRANGROUP:2CFE                 </span><span style="color:navy">jz      short </span>DO_HELP
<span style="color:maroon">TRANGROUP:2D00                 </span><span style="color:navy">cmp     [</span>ARG_ARGVCNT<span style="color:navy">], </span><span style="color:#ff8000">2 </span>; [ARG+ARG_UNIT.argvcnt]
<span style="color:maroon">TRANGROUP:2D05                 </span><span style="color:navy">jnz     short </span>DRIVE_CHECK
<span style="color:maroon">TRANGROUP:2D07
TRANGROUP:2D07 </span>DO_HELP<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2D07                 </span><span style="color:navy">mov     si, dx
</span><span style="color:maroon">TRANGROUP:2D09                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:2D0C                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">TRANGROUP:2D0D
TRANGROUP:2D0D </span>NEXT_HELP_MSG<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2D0D                 </span><span style="color:navy">lodsw
</span><span style="color:maroon">TRANGROUP:2D0E                 </span><span style="color:navy">or      ax, ax
</span><span style="color:maroon">TRANGROUP:2D10                 </span><span style="color:navy">jz      short </span>HELP_DONE
<span style="color:maroon">TRANGROUP:2D12                 </span><span style="color:navy">push    ax
</span><span style="color:maroon">TRANGROUP:2D13                 </span><span style="color:navy">mov     dx, sp
</span><span style="color:maroon">TRANGROUP:2D15                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:2D18                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:2D19                 </span><span style="color:navy">jmp     short </span>NEXT_HELP_MSG
<span style="color:maroon">TRANGROUP:2D1B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2D1B
TRANGROUP:2D1B </span>HELP_DONE<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2D1B                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:2D1C                 </span><span style="color:navy">jmp     </span>TCOMMAND
<span style="color:maroon">TRANGROUP:2D1F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2D1F
TRANGROUP:2D1F </span>DRIVE_CHECK<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2D1F                 </span><span style="color:navy">test    [</span>CHKDRV<span style="color:navy">], </span><span style="color:green">1     </span>; byte [CHKDRV],FCHECKDRIVE
<span style="color:maroon">TRANGROUP:2D24                 </span><span style="color:navy">jz      short </span>NOCHECK
<span style="color:maroon">TRANGROUP:2D26                 </span><span style="color:navy">mov     al, [</span>PARM1<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:2D29                 </span><span style="color:navy">or      al, [</span>PARM2<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:2D2D                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh        </span>; -1
<span style="color:maroon">TRANGROUP:2D2F                 </span><span style="color:navy">jnz     short </span>NOCHECK
<span style="color:maroon">TRANGROUP:2D31                 </span><span style="color:navy">jmp     </span>DRVBAD
<span style="color:maroon">TRANGROUP:2D34 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2D34
TRANGROUP:2D34 </span>NOCHECK<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2D34                 </span><span style="color:navy">call    </span>cmd_copy
<span style="color:maroon">TRANGROUP:2D37                 </span><span style="color:navy">test    [</span>CHKDRV<span style="color:navy">], </span><span style="color:green">2     </span>; byte [CHKDRV],fSwitchAllowed
<span style="color:maroon">TRANGROUP:2D3C                 </span><span style="color:navy">jnz     short </span>REALWORK
<span style="color:maroon">TRANGROUP:2D3E                 </span><span style="color:navy">call    </span>noswit
<span style="color:maroon">TRANGROUP:2D41                 </span><span style="color:navy">jnz     short </span>REALWORK
<span style="color:maroon">TRANGROUP:2D43                 </span><span style="color:navy">mov     [</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">2 </span>; parse_msg_class
<span style="color:maroon">TRANGROUP:2D48                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:maroon">TRANGROUP:2D4B                 </span><span style="color:navy">mov     [</span>extend_buf_ptr<span style="color:navy">], </span><span style="color:#ff8000">3 </span>; BadSwt_Ptr
<span style="color:maroon">TRANGROUP:2D51                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:2D54 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2D54
TRANGROUP:2D54 </span>REALWORK<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2D54                 </span><span style="color:navy">call    bx
</span><span style="color:maroon">TRANGROUP:2D56
TRANGROUP:2D56 </span>CMD_DONE<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2D56                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">TRANGROUP:2D57                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:2D58                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:2D59                 </span><span style="color:navy">mov     ds, [</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:2D5D                 </span>assume ds:RESGROUP
<span style="color:maroon">TRANGROUP:2D5D                 </span><span style="color:navy">cmp     [</span>Call_Flag<span style="color:navy">], </span><span style="color:#ff8000">1  </span>; call_in_progress
<span style="color:maroon">TRANGROUP:2D62                 </span><span style="color:navy">mov     [</span>Call_Flag<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:2D67                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:2D68                 </span>assume ds:nothing
<span style="color:maroon">TRANGROUP:2D68                 </span><span style="color:navy">jz      short </span>INCALL
<span style="color:maroon">TRANGROUP:2D6A                 </span><span style="color:navy">jmp     </span>TCOMMAND
<span style="color:maroon">TRANGROUP:2D6D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2D6D
TRANGROUP:2D6D </span>INCALL<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2D6D                 </span><span style="color:navy">jmp     </span>DOCOM0
<span style="color:black">TRANGROUP:2D70
TRANGROUP:2D70 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2D70
TRANGROUP:2D70
TRANGROUP:2D70 </span>proc            noswit near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2D70                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:2D71                 </span><span style="color:navy">mov     di, </span><span style="color:green">81h
</span><span style="color:black">TRANGROUP:2D74                 </span><span style="color:navy">mov     si, </span><span style="color:green">80h
</span><span style="color:black">TRANGROUP:2D77                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2D78                 </span><span style="color:navy">mov     cl, al
</span><span style="color:black">TRANGROUP:2D7A                 </span><span style="color:navy">xor     ch, ch
</span><span style="color:black">TRANGROUP:2D7C                 </span><span style="color:navy">mov     al, [cs:</span>SWITCHAR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2D80                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2D82                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:2D84                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:2D85                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:2D85 </span>endp            noswit
<span style="color:black">TRANGROUP:2D85
</span><span style="color:maroon">TRANGROUP:2D86 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2D86
TRANGROUP:2D86 </span>EXTERNAL<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2D86                 </span><span style="color:navy">call    </span>test_append
<span style="color:maroon">TRANGROUP:2D89                 </span><span style="color:navy">jz      short </span>NOT_BARRYF
<span style="color:maroon">TRANGROUP:2D8B                 </span><span style="color:navy">jmp     </span>APPEND_INTERNAL
<span style="color:maroon">TRANGROUP:2D8E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2D8E
TRANGROUP:2D8E </span>NOT_BARRYF<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2D8E                 </span><span style="color:navy">mov     [cs:</span>IFNOTFLAG<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte [cs:FILTYP],0
<span style="color:maroon">TRANGROUP:2D94                 </span><span style="color:navy">mov     dl, [cs:</span>SPECDRV<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:2D99                 </span><span style="color:navy">mov     [cs:</span>IDLEN<span style="color:navy">], dl
</span><span style="color:maroon">TRANGROUP:2D9E                 </span><span style="color:navy">mov     [cs:</span>ROM_CALL<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:maroon">TRANGROUP:2DA4                 </span><span style="color:navy">push    dx
</span><span style="color:maroon">TRANGROUP:2DA5                 </span><span style="color:navy">mov     dx, offset </span>IDLEN
<span style="color:maroon">TRANGROUP:2DA8                 </span><span style="color:navy">call    </span>ROM_SCAN
<span style="color:maroon">TRANGROUP:2DAB                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">TRANGROUP:2DAC                 </span><span style="color:navy">jnb     short </span>DO_SCAN
<span style="color:maroon">TRANGROUP:2DAE                 </span><span style="color:navy">inc     [cs:</span>ROM_CALL<span style="color:navy">]   </span>; byte
<span style="color:maroon">TRANGROUP:2DB3                 </span><span style="color:navy">jmp     short $+</span><span style="color:green">2
</span><span style="color:maroon">TRANGROUP:2DB5
TRANGROUP:2DB5 </span>DO_SCAN<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2DB5                 </span><span style="color:navy">mov     di, offset </span>EXECPATH
<span style="color:maroon">TRANGROUP:2DB8                 </span><span style="color:navy">mov     [byte ptr di], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:2DBB                 </span><span style="color:navy">cmp     [cs:</span>ROM_CALL<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:maroon">TRANGROUP:2DC1                 </span><span style="color:navy">jnz     short </span>NEOEXECUTE
<span style="color:maroon">TRANGROUP:2DC3                 </span><span style="color:navy">call    </span>path_search
<span style="color:maroon">TRANGROUP:2DC6                 </span><span style="color:navy">or      ax, ax
</span><span style="color:maroon">TRANGROUP:2DC8                 </span><span style="color:navy">jz      short </span>BADCOMJ45
<span style="color:maroon">TRANGROUP:2DCA                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">4
</span><span style="color:maroon">TRANGROUP:2DCD                 </span><span style="color:navy">jge     short </span>NEOEXECUTE ; jge short EXECUTE
<span style="color:maroon">TRANGROUP:2DCD                                         </span>; ... .BAT file ...
<span style="color:maroon">TRANGROUP:2DCF                 </span><span style="color:navy">mov     dx, offset </span>EXECPATH
<span style="color:maroon">TRANGROUP:2DD2                 </span><span style="color:navy">mov     ax, </span><span style="color:green">3D00h
</span><span style="color:maroon">TRANGROUP:2DD5                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - OPEN DISK FILE WITH HANDLE
<span style="color:maroon">TRANGROUP:2DD5                                         </span>; DS:DX -&gt; ASCIZ filename
<span style="color:maroon">TRANGROUP:2DD5                                         </span>; AL = access mode
<span style="color:maroon">TRANGROUP:2DD5                                         </span>; 0 - read
<span style="color:maroon">TRANGROUP:2DD7                 </span><span style="color:navy">jb      short </span>BATCOMJ
<span style="color:maroon">TRANGROUP:2DD9                 </span><span style="color:navy">and     [word ptr ds:</span>TPBUF<span style="color:navy">], </span><span style="color:green">0 </span>; clear 1st two bytes of the buffer
<span style="color:maroon">TRANGROUP:2DDE                 </span><span style="color:navy">mov     dx, offset </span>TPBUF
<span style="color:maroon">TRANGROUP:2DE1                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">2
</span><span style="color:maroon">TRANGROUP:2DE4                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:maroon">TRANGROUP:2DE6                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Fh
</span><span style="color:maroon">TRANGROUP:2DE8                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - READ FROM FILE WITH HANDLE
<span style="color:maroon">TRANGROUP:2DE8                                         </span>; BX = file handle, CX = number of bytes to read
<span style="color:maroon">TRANGROUP:2DE8                                         </span>; DS:DX -&gt; buffer
<span style="color:maroon">TRANGROUP:2DEA                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:maroon">TRANGROUP:2DEC                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:maroon">TRANGROUP:2DEC                                         </span>; BX = file handle
<span style="color:maroon">TRANGROUP:2DEE                 </span><span style="color:navy">cmp     [word ptr ds:</span>TPBUF<span style="color:navy">], </span><span style="color:#ff8000">2A2Fh </span>; &#039;/*&#039; (NASM syntax)
<span style="color:maroon">TRANGROUP:2DF4                 </span><span style="color:navy">jnz     short </span>BATCOMJ
<span style="color:maroon">TRANGROUP:2DF6                 </span><span style="color:navy">mov     ax, offset </span>REXX_EXE <span style="color:gray">; &quot;REXX.EXE&quot;
</span><span style="color:maroon">TRANGROUP:2DF9                 </span><span style="color:navy">mov     [ds:</span>ARG_ARGV<span style="color:navy">], ax </span>; [ARG+ARGV_ELE.argpointer]
<span style="color:maroon">TRANGROUP:2DFC                 </span><span style="color:navy">mov     [ds:</span>ARGV0_ARG_FLAGS<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [ARG+ARGV_ELE.argflags]
<span style="color:maroon">TRANGROUP:2E01                 </span><span style="color:navy">mov     [ds:</span>ARGV0_ARGSTARTEL<span style="color:navy">], ax </span>; [ARG+ARGV_ELE.argstartel]
<span style="color:maroon">TRANGROUP:2E04                 </span><span style="color:navy">mov     [ds:</span>ARGV0_ARGLEN<span style="color:navy">], </span><span style="color:#ff8000">8 </span>; [ARG+ARGV_ELE.arglen]
<span style="color:maroon">TRANGROUP:2E0A                 </span><span style="color:navy">mov     [ds:</span>ARGV0_ARGSW_WORD<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [ARG+ARGV_ELE.argsw_word]
<span style="color:maroon">TRANGROUP:2E10                 </span><span style="color:navy">mov     [ds:</span>ARGV0_OCOMPTR<span style="color:navy">], ax </span>; [ARG+ARGV_ELE.arg_ocomptr]
<span style="color:maroon">TRANGROUP:2E10                                         </span>; pointer into original command string
<span style="color:maroon">TRANGROUP:2E13                 </span><span style="color:navy">call    </span>path_search
<span style="color:maroon">TRANGROUP:2E16                 </span><span style="color:navy">test    ax, ax
</span><span style="color:maroon">TRANGROUP:2E18                 </span><span style="color:navy">jz      short </span>rexx_nf_err
<span style="color:maroon">TRANGROUP:2E1A                 </span><span style="color:navy">mov     si, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">)
</span><span style="color:maroon">TRANGROUP:2E1D                 </span><span style="color:navy">mov     di, </span><span style="color:green">80h         </span>; PSP command tail (arguments)
<span style="color:maroon">TRANGROUP:2E20                 </span><span style="color:navy">mov     cx, di          </span>; 128
<span style="color:maroon">TRANGROUP:2E22                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">TRANGROUP:2E24                 </span><span style="color:navy">jmp     short </span>NEOEXECUTE
<span style="color:maroon">TRANGROUP:2E26 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2E26
TRANGROUP:2E26 </span>rexx_nf_err<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2E26                 </span><span style="color:navy">mov     dx, offset </span>REXXNOTF_PTR ; MSG_1012 ; REXX.EXE not found
<span style="color:maroon">TRANGROUP:2E29                 </span><span style="color:navy">jmp     short </span>cerror
<span style="color:maroon">TRANGROUP:2E2B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2E2B
TRANGROUP:2E2B </span>BATCOMJ<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2E2B                 </span><span style="color:navy">jmp     </span>BATCOM
<span style="color:maroon">TRANGROUP:2E2E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2E2E
TRANGROUP:2E2E </span>BADCOMJ45<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2E2E                 </span><span style="color:navy">jmp     short </span>BADCOM
<span style="color:maroon">TRANGROUP:2E30 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2E30
TRANGROUP:2E30 </span>NEOEXECUTE<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2E30                 </span><span style="color:navy">call    </span>IOSET           ; offset EXECUTE = offset NEOEXECUTE
<span style="color:black">TRANGROUP:2E33 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR LoadHigh
</span><span style="color:black">TRANGROUP:2E33
TRANGROUP:2E33 </span>LH_EXECUTE<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2E33                 </span><span style="color:navy">mov     es, [ds:</span>TRAN_TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2E37                 </span>assume es:nothing
<span style="color:black">TRANGROUP:2E37                 </span><span style="color:navy">mov     ah, </span><span style="color:green">49h         </span>; DEALLOC
<span style="color:black">TRANGROUP:2E39                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FREE MEMORY
<span style="color:black">TRANGROUP:2E39                                         </span>; ES = segment address of area to be freed
<span style="color:black">TRANGROUP:2E3B                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2E3F                 </span><span style="color:navy">inc     [es:</span>ExtCom<span style="color:navy">]     </span>; byte
<span style="color:black">TRANGROUP:2E44                 </span><span style="color:navy">mov     [es:</span>RestDir<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:black">TRANGROUP:2E4A                 </span><span style="color:navy">mov     si, offset </span>EXECPATH ; TRANGROUP:EXECPATH
<span style="color:black">TRANGROUP:2E4D                 </span><span style="color:navy">mov     di, offset </span>MsgBuffer ; RESGROUP:SafePathBuffer
<span style="color:black">TRANGROUP:2E50                 </span><span style="color:navy">mov     cx, </span><span style="color:green">80
</span><span style="color:black">TRANGROUP:2E53                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:2E54                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:2E56                 </span><span style="color:navy">mov     di, </span><span style="color:green">5Ch         </span>; FCB
<span style="color:black">TRANGROUP:2E59                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:2E5B                 </span><span style="color:navy">mov     cx, </span><span style="color:green">82
</span><span style="color:black">TRANGROUP:2E5E                 </span><span style="color:navy">rep movsw
</span><span style="color:black">TRANGROUP:2E60                 </span><span style="color:navy">mov     dx, offset </span>MsgBuffer ; SafePathBuffer
<span style="color:black">TRANGROUP:2E63                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:2E64                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:2E65                 </span><span style="color:navy">mov     bx, offset </span>EnvirSeg ; Exec_Block = offset EnvirSeg
<span style="color:black">TRANGROUP:2E68                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4B00h       </span>; EXEC*256
<span style="color:black">TRANGROUP:2E6B                 </span><span style="color:navy">test    [cs:</span>ROM_CALL<span style="color:navy">], </span><span style="color:green">0FFh </span>; byte
<span style="color:black">TRANGROUP:2E71                 </span><span style="color:navy">jz      short </span>OK_EXEC
<span style="color:black">TRANGROUP:2E73                 </span><span style="color:navy">jmp     </span>ROM_EXEC
<span style="color:black">TRANGROUP:2E76 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2E76
TRANGROUP:2E76 </span>OK_EXEC<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2E76                 </span><span style="color:navy">mov     cx, es
</span><span style="color:black">TRANGROUP:2E78                 </span><span style="color:navy">mov     ss, cx
</span><span style="color:black">TRANGROUP:2E7A                 </span><span style="color:navy">mov     sp, offset </span>RStack
<span style="color:black">TRANGROUP:2E7D                 </span><span style="color:navy">jmp     [cs:</span>EXEC_ADDR<span style="color:navy">]  </span>; jmp far [cs:EXEC_ADDR]
<span style="color:black">TRANGROUP:2E7D </span><span style="color:gray">; END OF FUNCTION CHUNK FOR LoadHigh
</span><span style="color:maroon">TRANGROUP:2E82 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:2E82
TRANGROUP:2E82 </span>BADCOM<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:2E82                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">TRANGROUP:2E83                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:2E84                 </span>assume ds:TRANGROUP
<span style="color:maroon">TRANGROUP:2E84                 </span><span style="color:navy">mov     dx, offset </span>BADNAM_PTR
<span style="color:black">TRANGROUP:2E87 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR TESTDOREIN
</span><span style="color:black">TRANGROUP:2E87
TRANGROUP:2E87 </span>cerror<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2E87                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:2E8A                 </span><span style="color:navy">jmp     </span>TCOMMAND
<span style="color:black">TRANGROUP:2E8A </span><span style="color:gray">; END OF FUNCTION CHUNK FOR TESTDOREIN
</span><span style="color:black">TRANGROUP:2E8D
TRANGROUP:2E8D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:2E8D
TRANGROUP:2E8D
TRANGROUP:2E8D </span>proc            PRESCAN near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2E8D                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:2E8F                 </span><span style="color:navy">mov     es, [</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2E93                 </span>assume es:RESGROUP
<span style="color:black">TRANGROUP:2E93                 </span><span style="color:navy">mov     si, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:2E96                 </span><span style="color:navy">mov     di, si
</span><span style="color:black">TRANGROUP:2E98
TRANGROUP:2E98 </span><span style="color:gray">COUNTQUOTES</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2E98                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2E99                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">22h </span><span style="color:gray">; &#039;&quot;&#039;
</span><span style="color:black">TRANGROUP:2E9B                 </span><span style="color:navy">jnz     short </span><span style="color:gray">COUNTEND
</span><span style="color:black">TRANGROUP:2E9D                 </span><span style="color:navy">inc     ch
</span><span style="color:black">TRANGROUP:2E9F                 </span><span style="color:navy">jmp     short </span><span style="color:gray">COUNTQUOTES
</span><span style="color:black">TRANGROUP:2EA1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2EA1
TRANGROUP:2EA1 </span><span style="color:gray">COUNTEND</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2EA1                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:2EA3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">COUNTQUOTES
</span><span style="color:black">TRANGROUP:2EA5                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:2EA6                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:2EA8
TRANGROUP:2EA8 </span><span style="color:gray">KanjiScan</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2EA8                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2EA9                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:2EAC                 </span><span style="color:navy">jz      short </span><span style="color:gray">KanjiQuote
</span><span style="color:black">TRANGROUP:2EAE                 </span><span style="color:navy">mov     ah, al
</span><span style="color:black">TRANGROUP:2EB0                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2EB1                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">2020h       </span>; DB_SPACE
<span style="color:black">TRANGROUP:2EB4                 </span><span style="color:navy">jnz     short </span><span style="color:gray">KanjiScan
</span><span style="color:black">TRANGROUP:2EB6                 </span><span style="color:navy">mov     [word ptr si-</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:#ff8000">2020h
</span><span style="color:black">TRANGROUP:2EBB                 </span><span style="color:navy">jmp     short </span><span style="color:gray">KanjiScan
</span><span style="color:black">TRANGROUP:2EBD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2EBD
TRANGROUP:2EBD </span><span style="color:gray">KanjiQuote</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2EBD                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">22h </span><span style="color:gray">; &#039;&quot;&#039;
</span><span style="color:black">TRANGROUP:2EBF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">KanjiEnd
</span><span style="color:black">TRANGROUP:2EC1                 </span><span style="color:navy">dec     ch
</span><span style="color:black">TRANGROUP:2EC3                 </span><span style="color:navy">jz      short </span><span style="color:gray">KanjiScan
</span><span style="color:black">TRANGROUP:2EC5
TRANGROUP:2EC5 </span><span style="color:gray">KanjiQuoteLoop</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2EC5                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2EC6                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">22h </span><span style="color:gray">; &#039;&quot;&#039;
</span><span style="color:black">TRANGROUP:2EC8                 </span><span style="color:navy">jnz     short </span><span style="color:gray">KanjiQuoteLoop
</span><span style="color:black">TRANGROUP:2ECA                 </span><span style="color:navy">dec     ch
</span><span style="color:black">TRANGROUP:2ECC                 </span><span style="color:navy">jmp     short </span><span style="color:gray">KanjiScan
</span><span style="color:black">TRANGROUP:2ECE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2ECE
TRANGROUP:2ECE </span><span style="color:gray">KanjiEnd</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2ECE                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:2ED0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">KanjiScan
</span><span style="color:black">TRANGROUP:2ED2                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:2ED3                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:2ED5
TRANGROUP:2ED5 </span><span style="color:gray">PRESCANLP</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2ED5                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2ED6                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:2ED9                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOTKANJ6
</span><span style="color:black">TRANGROUP:2EDB                 </span><span style="color:navy">mov     [di], al
</span><span style="color:black">TRANGROUP:2EDD                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:2EDE                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2EDF                 </span><span style="color:navy">mov     [di], al
</span><span style="color:black">TRANGROUP:2EE1                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:2EE2                 </span><span style="color:navy">inc     cl
</span><span style="color:black">TRANGROUP:2EE4                 </span><span style="color:navy">inc     cl
</span><span style="color:black">TRANGROUP:2EE6                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PRESCANLP
</span><span style="color:black">TRANGROUP:2EE8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2EE8
TRANGROUP:2EE8 </span><span style="color:gray">NOTKANJ6</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2EE8                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">22h </span><span style="color:gray">; &#039;&quot;&#039;
</span><span style="color:black">TRANGROUP:2EEA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TRYGREATER
</span><span style="color:black">TRANGROUP:2EEC                 </span><span style="color:navy">dec     ch
</span><span style="color:black">TRANGROUP:2EEE                 </span><span style="color:navy">jz      short </span><span style="color:gray">TRYGREATER
</span><span style="color:black">TRANGROUP:2EF0
TRANGROUP:2EF0 </span><span style="color:gray">QLOOP</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2EF0                 </span><span style="color:navy">mov     [di], al
</span><span style="color:black">TRANGROUP:2EF2                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:2EF3                 </span><span style="color:navy">inc     cl
</span><span style="color:black">TRANGROUP:2EF5                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2EF6                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">22h </span><span style="color:gray">; &#039;&quot;&#039;
</span><span style="color:black">TRANGROUP:2EF8                 </span><span style="color:navy">jnz     short </span><span style="color:gray">QLOOP
</span><span style="color:black">TRANGROUP:2EFA                 </span><span style="color:navy">dec     ch
</span><span style="color:black">TRANGROUP:2EFC
TRANGROUP:2EFC </span><span style="color:gray">TRYGREATER</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2EFC                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Eh </span><span style="color:gray">; &#039;&gt;&#039;   </span>; rabracket
<span style="color:black">TRANGROUP:2EFE                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOOUT
</span><span style="color:black">TRANGROUP:2F00                 </span><span style="color:navy">cmp     [si], al
</span><span style="color:black">TRANGROUP:2F02                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOAPPND
</span><span style="color:black">TRANGROUP:2F04                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2F05                 </span><span style="color:navy">inc     [es:</span>Re_Out_App<span style="color:navy">] </span>; byte ; Flag &gt;&gt;
<span style="color:black">TRANGROUP:2F0A
TRANGROUP:2F0A </span><span style="color:gray">NOAPPND</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F0A                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:2F0D                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Ch </span><span style="color:gray">; &#039;&lt;&#039;   </span>; labracket
<span style="color:black">TRANGROUP:2F0F                 </span><span style="color:navy">jz      short </span><span style="color:gray">REOUT_ERRSET
</span><span style="color:black">TRANGROUP:2F11                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:2F13                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GOTREOFIL
</span><span style="color:black">TRANGROUP:2F15
TRANGROUP:2F15 </span><span style="color:gray">REOUT_ERRSET</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F15                 </span><span style="color:navy">mov     [byte ptr di], </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:2F18                 </span><span style="color:navy">mov     [word ptr es:</span>Re_OutStr<span style="color:navy">], </span><span style="color:#ff8000">9 </span>; word
<span style="color:black">TRANGROUP:2F1F                 </span><span style="color:navy">jmp     </span><span style="color:gray">PRESCANEND
</span><span style="color:black">TRANGROUP:2F22 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2F22
TRANGROUP:2F22 </span><span style="color:gray">GOTREOFIL</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F22                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:2F23                 </span><span style="color:navy">mov     di, offset </span>Re_OutStr
<span style="color:black">TRANGROUP:2F26                 </span><span style="color:navy">mov     bx, di
</span><span style="color:black">TRANGROUP:2F28                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:2F29
TRANGROUP:2F29 </span><span style="color:gray">SETREOUTSTR</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F29                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:2F2A                 </span><span style="color:navy">mov     cx, </span><span style="color:green">77          </span>; 64+13 ; CX = max string length
<span style="color:black">TRANGROUP:2F2D
TRANGROUP:2F2D </span><span style="color:gray">SETREOUTSTR_LOOP</span><span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F2D                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2F2E                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:2F30                 </span><span style="color:navy">jz      short </span><span style="color:gray">GOTRESTR_J
</span><span style="color:black">TRANGROUP:2F32                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:2F35                 </span><span style="color:navy">jz      short </span><span style="color:gray">GOTRESTR_J
</span><span style="color:black">TRANGROUP:2F37                 </span><span style="color:navy">cmp     al, [</span>SWITCHAR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:2F3B                 </span><span style="color:navy">jz      short </span><span style="color:gray">GOTRESTR_J
</span><span style="color:black">TRANGROUP:2F3D                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">22h </span><span style="color:gray">; &#039;&quot;&#039;
</span><span style="color:black">TRANGROUP:2F3F                 </span><span style="color:navy">jz      short </span><span style="color:gray">PIPEERRSYNJ5_J
</span><span style="color:black">TRANGROUP:2F41                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Ch </span><span style="color:gray">; &#039;&lt;&#039;
</span><span style="color:black">TRANGROUP:2F43                 </span><span style="color:navy">jz      short </span><span style="color:gray">ABRACKET_TERM
</span><span style="color:black">TRANGROUP:2F45                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Eh </span><span style="color:gray">; &#039;&gt;&#039;
</span><span style="color:black">TRANGROUP:2F47                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NO_ABRACKET
</span><span style="color:black">TRANGROUP:2F49
TRANGROUP:2F49 </span><span style="color:gray">ABRACKET_TERM</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F49                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:2F4A                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:2F4C
TRANGROUP:2F4C </span><span style="color:gray">GOTRESTR_J</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F4C                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:2F4D                 </span><span style="color:navy">jmp     short </span><span style="color:gray">GOTRESTR
</span><span style="color:black">TRANGROUP:2F4F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2F4F
TRANGROUP:2F4F </span><span style="color:gray">NO_ABRACKET</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F4F                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2F50                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:2F53                 </span><span style="color:navy">jz      short </span><span style="color:gray">NO_ABRACKET_@
</span><span style="color:black">TRANGROUP:2F55                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">GOTRESTR_J
</span><span style="color:black">TRANGROUP:2F57                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2F58                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:2F5A                 </span><span style="color:navy">jz      short </span><span style="color:gray">GOTRESTR_J
</span><span style="color:black">TRANGROUP:2F5C                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2F5D                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:2F5E
TRANGROUP:2F5E </span><span style="color:gray">NO_ABRACKET_@</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F5E                 </span><span style="color:navy">loop    </span><span style="color:gray">SETREOUTSTR_LOOP
</span><span style="color:black">TRANGROUP:2F60                 </span><span style="color:navy">jmp     short </span><span style="color:gray">GOTRESTR_J
</span><span style="color:black">TRANGROUP:2F62 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2F62
TRANGROUP:2F62 </span><span style="color:gray">PIPEERRSYNJ5_J</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F62                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:2F63                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PIPEERRSYNJ5
</span><span style="color:black">TRANGROUP:2F65 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2F65
TRANGROUP:2F65 </span><span style="color:gray">NOOUT</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F65                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Ch </span><span style="color:gray">; &#039;&lt;&#039;
</span><span style="color:black">TRANGROUP:2F67                 </span><span style="color:navy">jnz     short </span><span style="color:gray">CHKPIPE
</span><span style="color:black">TRANGROUP:2F69                 </span><span style="color:navy">mov     bx, si
</span><span style="color:black">TRANGROUP:2F6B                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:2F6E                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Eh </span><span style="color:gray">; &#039;&gt;&#039;
</span><span style="color:black">TRANGROUP:2F70                 </span><span style="color:navy">jz      short </span><span style="color:gray">REIN_ERRSET
</span><span style="color:black">TRANGROUP:2F72                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:2F74                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GOTREIFIL
</span><span style="color:black">TRANGROUP:2F76
TRANGROUP:2F76 </span><span style="color:gray">REIN_ERRSET</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F76                 </span><span style="color:navy">mov     [byte ptr di], </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:2F79                 </span><span style="color:navy">mov     [word ptr </span>RE_INSTR<span style="color:navy">], </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:2F7F                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PRESCANEND
</span><span style="color:black">TRANGROUP:2F81 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2F81
TRANGROUP:2F81 </span><span style="color:gray">GOTREIFIL</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F81                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:2F82                 </span><span style="color:navy">mov     di, offset </span>RE_INSTR
<span style="color:black">TRANGROUP:2F85                 </span><span style="color:navy">mov     bx, di
</span><span style="color:black">TRANGROUP:2F87                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:2F88                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:2F89                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2F8A                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:2F8A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SETREOUTSTR
</span><span style="color:black">TRANGROUP:2F8C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2F8C
TRANGROUP:2F8C </span><span style="color:gray">CHKPIPE</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F8C                 </span><span style="color:navy">mov     ah, al
</span><span style="color:black">TRANGROUP:2F8E                 </span><span style="color:navy">cmp     ah, </span><span style="color:#ff8000">7Ch </span><span style="color:gray">; &#039;|&#039;   </span>; ALTPIPECHR
<span style="color:black">TRANGROUP:2F91                 </span><span style="color:navy">jz      short </span><span style="color:gray">ISPIPE3
</span><span style="color:black">TRANGROUP:2F93                 </span><span style="color:navy">cmp     ah, </span><span style="color:#ff8000">7Ch </span><span style="color:gray">; &#039;|&#039;   </span>; VBAR
<span style="color:black">TRANGROUP:2F96                 </span><span style="color:navy">jnz     short </span><span style="color:gray">CONTPRESCAN
</span><span style="color:black">TRANGROUP:2F98
TRANGROUP:2F98 </span><span style="color:gray">ISPIPE3</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2F98                 </span><span style="color:navy">cmp     [es:</span>PipeFlag<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2F9E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOECHOPUSH
</span><span style="color:black">TRANGROUP:2FA0                 </span><span style="color:navy">shl     [es:</span>EchoFlag<span style="color:navy">], </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:2FA5
TRANGROUP:2FA5 </span><span style="color:gray">NOECHOPUSH</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2FA5                 </span><span style="color:navy">inc     [es:</span>PipeFlag<span style="color:navy">]   </span>; byte
<span style="color:black">TRANGROUP:2FAA                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:2FAD                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:2FAF                 </span><span style="color:navy">jz      short </span><span style="color:gray">PIPEERRSYNJ5
</span><span style="color:black">TRANGROUP:2FB1                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">7Ch </span><span style="color:gray">; &#039;|&#039;   </span>; ALTPIPECHR
<span style="color:black">TRANGROUP:2FB3                 </span><span style="color:navy">jz      short </span><span style="color:gray">PIPEERRSYNJ5
</span><span style="color:black">TRANGROUP:2FB5                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">7Ch </span><span style="color:gray">; &#039;|&#039;   </span>; VBAR
<span style="color:black">TRANGROUP:2FB7                 </span><span style="color:navy">jnz     short </span><span style="color:gray">CONTPRESCAN
</span><span style="color:black">TRANGROUP:2FB9
TRANGROUP:2FB9 </span><span style="color:gray">PIPEERRSYNJ5</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2FB9                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:2FBA                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:2FBB                 </span><span style="color:navy">jmp     </span>PIPEERRSYN
<span style="color:black">TRANGROUP:2FBE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2FBE
TRANGROUP:2FBE </span><span style="color:gray">GOTRESTR</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2FBE                 </span><span style="color:navy">xchg    ah, al
</span><span style="color:black">TRANGROUP:2FC0                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:black">TRANGROUP:2FC2                 </span><span style="color:navy">sub     bx, di
</span><span style="color:black">TRANGROUP:2FC4                 </span><span style="color:navy">cmp     bx, </span><span style="color:green">0FFFFh      </span>; -1
<span style="color:black">TRANGROUP:2FC7                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOTRAILCOL
</span><span style="color:black">TRANGROUP:2FC9                 </span><span style="color:navy">cmp     [es:di-</span><span style="color:green">1</span><span style="color:navy">], al
</span><span style="color:black">TRANGROUP:2FCD                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOTRAILCOL
</span><span style="color:black">TRANGROUP:2FCF                 </span><span style="color:navy">dec     di
</span><span style="color:black">TRANGROUP:2FD0
TRANGROUP:2FD0 </span><span style="color:gray">NOTRAILCOL</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2FD0                 </span><span style="color:navy">xor     al, al          </span>; 0
<span style="color:black">TRANGROUP:2FD2                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2FD3                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:2FD4                 </span>assume es:nothing
<span style="color:black">TRANGROUP:2FD4                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:2FD5
TRANGROUP:2FD5 </span><span style="color:gray">CONTPRESCAN</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2FD5                 </span><span style="color:navy">mov     [di], ah
</span><span style="color:black">TRANGROUP:2FD7                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:2FD8                 </span><span style="color:navy">cmp     ah, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:2FDB                 </span><span style="color:navy">jz      short </span><span style="color:gray">PRESCANEND
</span><span style="color:black">TRANGROUP:2FDD                 </span><span style="color:navy">inc     cl
</span><span style="color:black">TRANGROUP:2FDF                 </span><span style="color:navy">jmp     </span><span style="color:gray">PRESCANLP
</span><span style="color:black">TRANGROUP:2FE2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:2FE2
TRANGROUP:2FE2 </span><span style="color:gray">PRESCANEND</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2FE2                 </span><span style="color:navy">cmp     [es:</span>PipeFlag<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:2FE8                 </span><span style="color:navy">jz      short </span><span style="color:gray">ISNOPIPE
</span><span style="color:black">TRANGROUP:2FEA                 </span><span style="color:navy">mov     di, </span><span style="color:green">4BEh        </span>; PipeStr ; RESGROUP:EndInit+160
<span style="color:black">TRANGROUP:2FEA                                         </span>; ENDINIT is at offset 41Eh
<span style="color:black">TRANGROUP:2FED                 </span><span style="color:navy">mov     [es:</span><span style="color:green">4BCh</span><span style="color:navy">], di   </span>; mov [es:PipePtr],di
<span style="color:black">TRANGROUP:2FED                                         </span>; (RESGROUP:EndInit+158)
<span style="color:black">TRANGROUP:2FF2                 </span><span style="color:navy">mov     si, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:2FF5                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:2FF8
TRANGROUP:2FF8 </span><span style="color:gray">PIPESETLP</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2FF8                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:2FF9                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:2FFA                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:2FFC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">PIPESETLP
</span><span style="color:black">TRANGROUP:2FFE
TRANGROUP:2FFE </span><span style="color:gray">ISNOPIPE</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:2FFE                 </span><span style="color:navy">mov     [</span>COMBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">], cl
</span><span style="color:black">TRANGROUP:3002                 </span><span style="color:navy">cmp     [es:</span>PipeFlag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [es::41Ch]
<span style="color:black">TRANGROUP:3008                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:3009                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:300A                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:300A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:300A </span>endp            PRESCAN
<span style="color:black">TRANGROUP:300A
TRANGROUP:300B
TRANGROUP:300B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:300B
TRANGROUP:300B
TRANGROUP:300B </span>proc            cmd_copy near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:300B                 </span><span style="color:navy">mov     si, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:300E                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:3011                 </span><span style="color:navy">add     si, [</span>PathPos<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3015                 </span><span style="color:navy">mov     di, </span><span style="color:green">81h
</span><span style="color:black">TRANGROUP:3018                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:301A
TRANGROUP:301A </span><span style="color:gray">cmdcopy</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:301A                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:301B                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:301C                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:301E                 </span><span style="color:navy">jz      short </span><span style="color:gray">copy_done
</span><span style="color:black">TRANGROUP:3020                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:3021                 </span><span style="color:navy">jmp     short </span><span style="color:gray">cmdcopy
</span><span style="color:black">TRANGROUP:3023 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3023
TRANGROUP:3023 </span><span style="color:gray">copy_done</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3023                 </span><span style="color:navy">mov     </span>[80h]<span style="color:navy">, cl
</span><span style="color:black">TRANGROUP:3027                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3027 </span>endp            cmd_copy
<span style="color:black">TRANGROUP:3027
TRANGROUP:3028
TRANGROUP:3028 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3028
TRANGROUP:3028
TRANGROUP:3028 </span>proc            test_append near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3028                 </span><span style="color:navy">mov     bx, offset </span>COMBUF
<span style="color:black">TRANGROUP:302B                 </span><span style="color:navy">mov     si, offset </span>IDLEN
<span style="color:black">TRANGROUP:302E                 </span><span style="color:navy">mov     dx, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:3031                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0AE00h
</span><span style="color:black">TRANGROUP:3034                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; - Multiplex - DOS 3.3+ internal - INSTALLABLE COMMAND - INSTALL CHECK
<span style="color:black">TRANGROUP:3034                                         </span>; DX = FFFFh, DS:BX -&gt; command line
<span style="color:black">TRANGROUP:3034                                         </span>; Return: AL = FFh if this command is a TSR extension to COMMAND.COM
<span style="color:black">TRANGROUP:3034                                         </span>; AL = 00h if the command should be executed as usual
<span style="color:black">TRANGROUP:3036                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:3038                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3038 </span>endp            test_append
<span style="color:black">TRANGROUP:3038
TRANGROUP:3039
TRANGROUP:3039 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3039
TRANGROUP:3039
TRANGROUP:3039 </span>proc            SETPATH near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3039                 </span><span style="color:navy">mov     ax, [</span>PathCnt<span style="color:navy">]
</span><span style="color:black">TRANGROUP:303C                 </span><span style="color:navy">mov     si, [</span>PathPos<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3040                 </span><span style="color:navy">mov     [</span>DestInfo<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; byte
<span style="color:black">TRANGROUP:3045                 </span><span style="color:navy">mov     [</span>DestIsDir<span style="color:navy">], </span><span style="color:#ff8000">0  </span>; byte
<span style="color:black">TRANGROUP:304A                 </span><span style="color:navy">mov     si, [</span>PathPos<span style="color:navy">]
</span><span style="color:black">TRANGROUP:304E                 </span><span style="color:navy">mov     cx, [</span>PathCnt<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3052                 </span><span style="color:navy">mov     dx, si
</span><span style="color:black">TRANGROUP:3054                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">PATHDONE
</span><span style="color:black">TRANGROUP:3056                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:3057                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:3058                 </span><span style="color:navy">call    </span>SWITCH
<span style="color:black">TRANGROUP:305B                 </span><span style="color:navy">mov     [</span>PathSw<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:305E                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:305F                 </span><span style="color:navy">sub     bx, si
</span><span style="color:black">TRANGROUP:3061                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:3062                 </span><span style="color:navy">add     cx, bx
</span><span style="color:black">TRANGROUP:3064                 </span><span style="color:navy">mov     dx, si
</span><span style="color:black">TRANGROUP:3066
TRANGROUP:3066 </span><span style="color:gray">SKIPPATH</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3066                 </span><span style="color:navy">mov     [</span>KPARSE<span style="color:navy">], </span><span style="color:#ff8000">0     </span>; byte
<span style="color:black">TRANGROUP:306B
TRANGROUP:306B </span><span style="color:gray">SKIPPATH2</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:306B                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">PATHDONE
</span><span style="color:black">TRANGROUP:306D                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:306E                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:306F                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:3072                 </span><span style="color:navy">jz      short </span><span style="color:gray">TESTPPSEP
</span><span style="color:black">TRANGROUP:3074                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:3075                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:3076                 </span><span style="color:navy">inc     [</span>KPARSE<span style="color:navy">]        </span>; byte
<span style="color:black">TRANGROUP:307A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SKIPPATH2
</span><span style="color:black">TRANGROUP:307C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:307C
TRANGROUP:307C </span><span style="color:gray">TESTPPSEP</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:307C                 </span><span style="color:navy">call    </span>pathchrcmp
<span style="color:black">TRANGROUP:307F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TESTPMETA
</span><span style="color:black">TRANGROUP:3081                 </span><span style="color:navy">inc     [</span>DestIsDir<span style="color:navy">]     </span>; byte
<span style="color:black">TRANGROUP:3085
TRANGROUP:3085 </span><span style="color:gray">TESTPMETA</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3085                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Fh </span><span style="color:gray">; &#039;?&#039;
</span><span style="color:black">TRANGROUP:3087                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TESTPSTAR
</span><span style="color:black">TRANGROUP:3089                 </span><span style="color:navy">or      [</span>DestInfo<span style="color:navy">], </span><span style="color:green">2   </span>; byte
<span style="color:black">TRANGROUP:308E
TRANGROUP:308E </span><span style="color:gray">TESTPSTAR</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:308E                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">2Ah </span><span style="color:gray">; &#039;*&#039;
</span><span style="color:black">TRANGROUP:3090                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TESTPDELIM
</span><span style="color:black">TRANGROUP:3092                 </span><span style="color:navy">or      [</span>DestInfo<span style="color:navy">], </span><span style="color:green">2
</span><span style="color:black">TRANGROUP:3097
TRANGROUP:3097 </span><span style="color:gray">TESTPDELIM</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3097                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:309A                 </span><span style="color:navy">jz      short </span><span style="color:gray">PATHDONEDEC
</span><span style="color:black">TRANGROUP:309C                 </span><span style="color:navy">cmp     al, [</span>SWITCHAR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:30A0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SKIPPATH
</span><span style="color:black">TRANGROUP:30A2
TRANGROUP:30A2 </span><span style="color:gray">PATHDONEDEC</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:30A2                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:30A3
TRANGROUP:30A3 </span><span style="color:gray">PATHDONE</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:30A3                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:30A5                 </span><span style="color:navy">xchg    al, [si]
</span><span style="color:black">TRANGROUP:30A7                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:30A8                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:30AA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOPSTORE
</span><span style="color:black">TRANGROUP:30AC                 </span><span style="color:navy">mov     [si], al
</span><span style="color:black">TRANGROUP:30AE
TRANGROUP:30AE </span><span style="color:gray">NOPSTORE</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:30AE                 </span><span style="color:navy">mov     [</span>PathPos<span style="color:navy">], si
</span><span style="color:black">TRANGROUP:30B2                 </span><span style="color:navy">mov     [</span>PathCnt<span style="color:navy">], cx
</span><span style="color:black">TRANGROUP:30B6
TRANGROUP:30B6 </span>SETPATH_RETN<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:30B6                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:30B6 </span>endp            SETPATH
<span style="color:black">TRANGROUP:30B6
TRANGROUP:30B7
TRANGROUP:30B7 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:30B7
TRANGROUP:30B7
TRANGROUP:30B7 </span>proc            PGETARG near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:30B7                 </span><span style="color:navy">mov     si, </span><span style="color:green">80h
</span><span style="color:black">TRANGROUP:30BA                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:30BB                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:30BD                 </span><span style="color:navy">jz      short </span>SETPATH_RETN
<span style="color:black">TRANGROUP:30BF                 </span><span style="color:navy">call    </span>PSCANOFF
<span style="color:black">TRANGROUP:30C2                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:30C4                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:30C4 </span>endp            PGETARG
<span style="color:black">TRANGROUP:30C4
TRANGROUP:30C5
TRANGROUP:30C5 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:30C5
TRANGROUP:30C5
TRANGROUP:30C5 </span>proc            PSCANOFF near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:30C5                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:30C6                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:30C9                 </span><span style="color:navy">jnz     short </span><span style="color:gray">PSCANOFFD
</span><span style="color:black">TRANGROUP:30CB                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Bh </span><span style="color:gray">; &#039;;&#039;
</span><span style="color:black">TRANGROUP:30CD                 </span><span style="color:navy">jnz     short </span>PSCANOFF
<span style="color:black">TRANGROUP:30CF
TRANGROUP:30CF </span><span style="color:gray">PSCANOFFD</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:30CF                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:30D0                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:30D0 </span>endp            PSCANOFF
<span style="color:black">TRANGROUP:30D0
TRANGROUP:30D1
TRANGROUP:30D1 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:30D1
TRANGROUP:30D1
TRANGROUP:30D1 </span>proc            IOSET near              <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:30D1                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:30D2                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:30D3                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:30D4                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:30D5                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:30D6                 </span><span style="color:navy">mov     ds, [cs:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:30DB                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:30DB                 </span><span style="color:navy">cmp     [ds:</span>PipeFlag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:black">TRANGROUP:30E0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOREDIR
</span><span style="color:black">TRANGROUP:30E2                 </span><span style="color:navy">test    [ds:</span>IfFlag<span style="color:navy">], </span><span style="color:green">0FFh
</span><span style="color:black">TRANGROUP:30E7                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOREDIR
</span><span style="color:black">TRANGROUP:30E9                 </span><span style="color:navy">call    </span>TESTDOREIN
<span style="color:black">TRANGROUP:30EC                 </span><span style="color:navy">call    </span>TESTDOREOUT
<span style="color:black">TRANGROUP:30EF
TRANGROUP:30EF </span><span style="color:gray">NOREDIR</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:30EF                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:30F0                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:30F1                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:30F2                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:30F3                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:30F4
TRANGROUP:30F4 </span>IOSET_RETN<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:30F4                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:30F4 </span>endp            IOSET
<span style="color:black">TRANGROUP:30F4
TRANGROUP:30F5
TRANGROUP:30F5 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:30F5
TRANGROUP:30F5
TRANGROUP:30F5 </span>proc            TESTDOREIN near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:30F5
TRANGROUP:30F5 </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:2E87 SIZE 00000006 BYTES
</span><span style="color:black">TRANGROUP:30F5
TRANGROUP:30F5                 </span><span style="color:navy">cmp     [cs:</span>RE_INSTR<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:30FB                 </span><span style="color:navy">jz      short </span>IOSET_RETN
<span style="color:black">TRANGROUP:30FD                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:30FE                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:30FF                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:3100                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:3100                 </span><span style="color:navy">mov     dx, offset </span>RE_INSTR
<span style="color:black">TRANGROUP:3103                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3D40h       </span>; mov ax,(OPEN*256)+SHARING_DENY_NONE
<span style="color:black">TRANGROUP:3106                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:3108                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - OPEN DISK FILE WITH HANDLE
<span style="color:black">TRANGROUP:3108                                         </span>; DS:DX -&gt; ASCIZ filename
<span style="color:black">TRANGROUP:3108                                         </span>; AL = access mode
<span style="color:black">TRANGROUP:3108                                         </span>; 0 - read, 1 - write, 2 - read &amp; write
<span style="color:black">TRANGROUP:310A                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:310B                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:310B                 </span><span style="color:navy">jb      short </span>REDIRERR
<span style="color:black">TRANGROUP:310D                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:310F                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:3111                 </span><span style="color:navy">xchg    al, [bx+</span><span style="color:#ff8000">18h</span><span style="color:navy">]    </span>; [bx+PDB.JFN_TABLE]
<span style="color:black">TRANGROUP:3114                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">18h</span><span style="color:navy">], al    </span>; [PDB.JFN_TABLE]
<span style="color:black">TRANGROUP:3117                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3118 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3118
TRANGROUP:3118 </span>REDIRERR<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3118                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:3119                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:311A                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:311A                 </span><span style="color:navy">call    </span>TriageError
<span style="color:black">TRANGROUP:311D                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">65          </span>; network access denied
<span style="color:black">TRANGROUP:3120                 </span><span style="color:navy">jz      short </span><span style="color:gray">_CERRORJ
</span><span style="color:black">TRANGROUP:3122                 </span><span style="color:navy">cmp     bh, </span><span style="color:green">3Dh         </span>; OPEN
<span style="color:black">TRANGROUP:3125                 </span><span style="color:navy">jz      short </span><span style="color:gray">OpenError
</span><span style="color:black">TRANGROUP:3127                 </span><span style="color:navy">mov     dx, offset </span>FULLDIR_PTR
<span style="color:black">TRANGROUP:312A
TRANGROUP:312A </span><span style="color:gray">_CERRORJ</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:312A                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:312D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:312D
TRANGROUP:312D </span><span style="color:gray">OpenError</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:312D                 </span><span style="color:navy">mov     [cs:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:3133                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:black">TRANGROUP:3136                 </span><span style="color:navy">mov     [cs:</span>extend_buf_ptr<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:313A                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:313A </span>endp            TESTDOREIN
<span style="color:black">TRANGROUP:313A
TRANGROUP:313D
TRANGROUP:313D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:313D
TRANGROUP:313D
TRANGROUP:313D </span>proc            TESTDOREOUT near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:313D                 </span><span style="color:navy">cmp     [ds:</span>Re_OutStr<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:black">TRANGROUP:3142                 </span><span style="color:navy">jnz     short </span><span style="color:gray">REOUTEXISTS
</span><span style="color:black">TRANGROUP:3144                 </span><span style="color:navy">jmp     </span><span style="color:gray">NOREOUT
</span><span style="color:black">TRANGROUP:3147 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3147
TRANGROUP:3147 </span><span style="color:gray">REOUTEXISTS</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3147                 </span><span style="color:navy">cmp     [ds:</span>Re_Out_App<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:black">TRANGROUP:314C                 </span><span style="color:navy">jz      short </span><span style="color:gray">REOUTCRT
</span><span style="color:black">TRANGROUP:314E                 </span><span style="color:navy">mov     dx, offset </span>Re_OutStr
<span style="color:black">TRANGROUP:3151                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3D02h       </span>; (OPEN SHL 8) OR 2
<span style="color:black">TRANGROUP:3154                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:3155                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - OPEN DISK FILE WITH HANDLE
<span style="color:black">TRANGROUP:3155                                         </span>; DS:DX -&gt; ASCIZ filename
<span style="color:black">TRANGROUP:3155                                         </span>; AL = access mode
<span style="color:black">TRANGROUP:3155                                         </span>; 2 - read &amp; write
<span style="color:black">TRANGROUP:3157                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:3158                 </span><span style="color:navy">jb      short </span><span style="color:gray">OpenWriteError
</span><span style="color:black">TRANGROUP:315A                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:315C                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4400h       </span>; IOCTL&lt;&lt;8
<span style="color:black">TRANGROUP:315F                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL - GET DEVICE INFORMATION
<span style="color:black">TRANGROUP:315F                                         </span>; BX = file or device handle
<span style="color:black">TRANGROUP:3161                 </span><span style="color:navy">test    dl, </span><span style="color:green">80h
</span><span style="color:black">TRANGROUP:3164                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SET_REOUT
</span><span style="color:black">TRANGROUP:3166                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4202h       </span>; (LSEEK SHL 8) OR 2
<span style="color:black">TRANGROUP:3169                 </span><span style="color:navy">mov     cx, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:316C                 </span><span style="color:navy">mov     dx, cx
</span><span style="color:black">TRANGROUP:316E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
<span style="color:black">TRANGROUP:316E                                         </span>; AL = method: offset from end of file
<span style="color:black">TRANGROUP:3170                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:3171                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:3172                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3F00h       </span>; (READ SHL 8)
<span style="color:black">TRANGROUP:3175                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:3178                 </span><span style="color:navy">mov     dx, offset </span>One_Char_Val
<span style="color:black">TRANGROUP:317B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - READ FROM FILE WITH HANDLE
<span style="color:black">TRANGROUP:317B                                         </span>; BX = file handle, CX = number of bytes to read
<span style="color:black">TRANGROUP:317B                                         </span>; DS:DX -&gt; buffer
<span style="color:black">TRANGROUP:317D                 </span><span style="color:navy">jb      short </span><span style="color:gray">OpenWriteError
</span><span style="color:black">TRANGROUP:317F                 </span><span style="color:navy">cmp     ax, cx
</span><span style="color:black">TRANGROUP:3181                 </span><span style="color:navy">jnz     short </span><span style="color:gray">reout_0_length
</span><span style="color:black">TRANGROUP:3183                 </span><span style="color:navy">cmp     [</span>One_Char_Val<span style="color:navy">], </span><span style="color:#ff8000">1Ah </span>; Was char an eof mark?
<span style="color:black">TRANGROUP:3188                 </span><span style="color:navy">mov     ds, [</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:318C                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:318C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SET_REOUT </span>; No, just continue
<span style="color:black">TRANGROUP:318E                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4201h       </span>; (LSEEK&lt;&lt;8)|1
<span style="color:black">TRANGROUP:3191                 </span><span style="color:navy">mov     cx, </span><span style="color:green">0FFFFh      </span>; -1 ; LSEEK back one byte
<span style="color:black">TRANGROUP:3194                 </span><span style="color:navy">mov     dx, cx
</span><span style="color:black">TRANGROUP:3196                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
<span style="color:black">TRANGROUP:3196                                         </span>; AL = method: offset from present location
<span style="color:black">TRANGROUP:3198                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SET_REOUT
</span><span style="color:black">TRANGROUP:319A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:319A
TRANGROUP:319A </span><span style="color:gray">reout_0_length</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:319A                 </span><span style="color:navy">mov     ds, [cs:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:319F                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4200h       </span>; (LSEEK SHL 8)
<span style="color:black">TRANGROUP:31A2                 </span><span style="color:navy">xor     cx, cx          </span>; Offset is 0 ; Move to beginning of file
<span style="color:black">TRANGROUP:31A4                 </span><span style="color:navy">mov     dx, cx
</span><span style="color:black">TRANGROUP:31A6                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
<span style="color:black">TRANGROUP:31A6                                         </span>; AL = method: offset from beginning of file
<span style="color:black">TRANGROUP:31A8                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SET_REOUT
</span><span style="color:black">TRANGROUP:31AA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:31AA
TRANGROUP:31AA </span><span style="color:gray">OpenWriteError</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:31AA                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">5           </span>; ERROR_ACCESS_DENIED
<span style="color:black">TRANGROUP:31AD                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:31AE                 </span><span style="color:navy">jnz     short </span><span style="color:gray">REOUTCRT
</span><span style="color:black">TRANGROUP:31B0                 </span><span style="color:navy">jmp     </span>REDIRERR
<span style="color:black">TRANGROUP:31B3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:31B3
TRANGROUP:31B3 </span><span style="color:gray">REOUTCRT</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:31B3                 </span><span style="color:navy">mov     dx, offset </span>Re_OutStr
<span style="color:black">TRANGROUP:31B6                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:31B8                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Ch         </span>; CREAT
<span style="color:black">TRANGROUP:31BA                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:31BB                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CREATE A FILE WITH HANDLE (CREAT)
<span style="color:black">TRANGROUP:31BB                                         </span>; CX = attributes for file
<span style="color:black">TRANGROUP:31BB                                         </span>; DS:DX -&gt; ASCIZ filename (may include drive and path)
<span style="color:black">TRANGROUP:31BD                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:31BE                 </span><span style="color:navy">jnb     short </span><span style="color:gray">NOREDIRERR
</span><span style="color:black">TRANGROUP:31C0                 </span><span style="color:navy">jmp     </span>REDIRERR
<span style="color:black">TRANGROUP:31C3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:31C3
TRANGROUP:31C3 </span><span style="color:gray">NOREDIRERR</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:31C3                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:31C5
TRANGROUP:31C5 </span><span style="color:gray">SET_REOUT</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:31C5                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:31C7                 </span><span style="color:navy">xchg    al, [bx+</span><span style="color:#ff8000">18h</span><span style="color:navy">]    </span>; [bx+PDB.JFN_TABLE]
<span style="color:black">TRANGROUP:31CA                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">19h</span><span style="color:navy">], al    </span>; [PDB.JFN_TABLE+1]
<span style="color:black">TRANGROUP:31CD
TRANGROUP:31CD </span><span style="color:gray">NOREOUT</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:31CD                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:31CD </span>endp            TESTDOREOUT
<span style="color:black">TRANGROUP:31CD
TRANGROUP:31CE
TRANGROUP:31CE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:31CE
TRANGROUP:31CE
TRANGROUP:31CE </span>proc            dstrlen near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:31CE                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:31CF                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:31D1                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:31D2
TRANGROUP:31D2 </span><span style="color:gray">dloop</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:31D2                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:31D3                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:31D4                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:31D6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">dloop
</span><span style="color:black">TRANGROUP:31D8                 </span><span style="color:navy">sub     si, cx
</span><span style="color:black">TRANGROUP:31DA                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:31DB
TRANGROUP:31DB </span>TRIAGEERR_RETN<span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:31DB                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:31DB </span>endp            dstrlen
<span style="color:black">TRANGROUP:31DB
TRANGROUP:31DC
TRANGROUP:31DC </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:31DC
TRANGROUP:31DC
TRANGROUP:31DC </span>proc            TriageError near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:31DC                 </span><span style="color:navy">jnb     short </span>TRIAGEERR_RETN ; GET_EXT_ERR_NUMBER
<span style="color:black">TRANGROUP:31DE                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:31DF                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:31E0                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:31E1                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:31E2                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:31E3                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:31E4                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:31E5                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:31E6                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:31E7                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:31E8                 </span><span style="color:navy">mov     ah, </span><span style="color:green">59h
</span><span style="color:black">TRANGROUP:31EA                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET EXTENDED ERROR CODE
<span style="color:black">TRANGROUP:31EA                                         </span>; BX = version code (0000h for DOS 3.x)
<span style="color:black">TRANGROUP:31EC                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:31ED                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:31EE                 </span><span style="color:navy">mov     dx, offset </span>ACCDEN_PTR
<span style="color:black">TRANGROUP:31F1                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">65          </span>; network access denied?
<span style="color:black">TRANGROUP:31F4                 </span><span style="color:navy">jz      short </span><span style="color:gray">NoMove    </span>; Yes, return it.
<span style="color:black">TRANGROUP:31F6                 </span><span style="color:navy">mov     ax, bx
</span><span style="color:black">TRANGROUP:31F8                 </span><span style="color:navy">mov     dx, cx
</span><span style="color:black">TRANGROUP:31FA
TRANGROUP:31FA </span><span style="color:gray">NoMove</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:31FA                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:31FB                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:31FB                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:31FC                 </span>assume es:nothing
<span style="color:black">TRANGROUP:31FC                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:31FD                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:31FE                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:31FF                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:3200                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:3201                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:3202                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3202 </span>endp            TriageError
<span style="color:black">TRANGROUP:3202
</span><span style="color:maroon">TRANGROUP:3203 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3203
TRANGROUP:3203 </span>Triage_Init<span style="color:navy">:                            </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:3203                 </span><span style="color:navy">call    </span>TriageError
<span style="color:maroon">TRANGROUP:3206                 </span><span style="color:navy">retf
</span><span style="color:black">TRANGROUP:3207
TRANGROUP:3207 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3207
TRANGROUP:3207
TRANGROUP:3207 </span>proc            Move_To_SrcBuf near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3207                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:3208                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:3209                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:320A                 </span><span style="color:navy">mov     di, offset </span>SrcBuf
<span style="color:black">TRANGROUP:320D                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:320F                 </span><span style="color:navy">mov     ax, cx
</span><span style="color:black">TRANGROUP:3211                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:3212                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:3213
TRANGROUP:3213 </span><span style="color:gray">mts_get_chars</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3213                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:3215                 </span><span style="color:navy">jz      short </span><span style="color:gray">mts_end_string
</span><span style="color:black">TRANGROUP:3217                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:3218                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:3219                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:321A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">mts_get_chars
</span><span style="color:black">TRANGROUP:321C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:321C
TRANGROUP:321C </span><span style="color:gray">mts_end_string</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:321C                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0Dh         </span>; END_OF_LINE_IN
<span style="color:black">TRANGROUP:321E                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:321F                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:3220                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:3221                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:3222                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:3222                 </span><span style="color:navy">mov     [</span>PathCnt<span style="color:navy">], cx
</span><span style="color:black">TRANGROUP:3226                 </span><span style="color:navy">mov     [</span>PathPos<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:322A                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:322B                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:322C                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:322D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:322D </span>endp            Move_To_SrcBuf
<span style="color:black">TRANGROUP:322D
TRANGROUP:322E
TRANGROUP:322E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:322E
TRANGROUP:322E
TRANGROUP:322E </span>proc            SINGLETEST near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:322E                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:322F                 </span><span style="color:navy">mov     ds, [cs:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3234                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:3234                 </span><span style="color:navy">cmp     [</span>SingleCom<span style="color:navy">], </span><span style="color:#ff8000">0  </span>; word
<span style="color:black">TRANGROUP:3239                 </span><span style="color:navy">jz      short </span><span style="color:gray">TESTDONE
</span><span style="color:black">TRANGROUP:323B                 </span><span style="color:navy">cmp     [</span>SingleCom<span style="color:navy">], </span><span style="color:green">0EFFFh
</span><span style="color:black">TRANGROUP:3241
TRANGROUP:3241 </span><span style="color:gray">TESTDONE</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3241                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:3242                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:3242                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3242 </span>endp            SINGLETEST
<span style="color:black">TRANGROUP:3242
TRANGROUP:3243
TRANGROUP:3243 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3243
TRANGROUP:3243
TRANGROUP:3243 </span>proc            SetRest1 near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3243                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:3243 </span>endp            SetRest1
<span style="color:black">TRANGROUP:3243
TRANGROUP:3245
TRANGROUP:3245 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3245
TRANGROUP:3245
TRANGROUP:3245 </span>proc            SETREST near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3245                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:3246                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:324A                 </span><span style="color:navy">mov     [ds:</span>RestDir<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:324D                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:324E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:324E </span>endp            SETREST
<span style="color:black">TRANGROUP:324E
TRANGROUP:324F
TRANGROUP:324F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:324F
TRANGROUP:324F
TRANGROUP:324F </span>proc            PIPEDEL near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:324F                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:3250                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:3251                 </span><span style="color:navy">mov     ds, [cs:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3256                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:3256                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">41Eh        </span>; Pipe1 = offset RESGROUP:EndInit
<span style="color:black">TRANGROUP:3259                 </span><span style="color:navy">mov     ah, </span><span style="color:green">41h         </span>; Unlink
<span style="color:black">TRANGROUP:325B                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:325E                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">46Dh        </span>; Pipe2 = offset RESGROUP:EndInit+79
<span style="color:black">TRANGROUP:3261                 </span><span style="color:navy">mov     ah, </span><span style="color:green">41h         </span>; Unlink
<span style="color:black">TRANGROUP:3263                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:3266                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:3267                 </span><span style="color:navy">call    </span>PipeOff
<span style="color:black">TRANGROUP:326A                 </span><span style="color:navy">mov     [</span>PipeFiles<span style="color:navy">], </span><span style="color:#ff8000">0  </span>; byte
<span style="color:black">TRANGROUP:326F                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:3270                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:3270                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3270 </span>endp            PIPEDEL
<span style="color:black">TRANGROUP:3270
TRANGROUP:3271 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3271 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR PROMPTBAT
</span><span style="color:black">TRANGROUP:3271
TRANGROUP:3271 </span>PIPEERRSYN<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3271                 </span><span style="color:navy">mov     dx, offset </span>SYNTMES_PTR ; MSG_1030
<span style="color:black">TRANGROUP:3274                 </span><span style="color:navy">call    </span>PIPEDEL
<span style="color:black">TRANGROUP:3277                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:3278                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:3279                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:3279                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:327C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:327C
TRANGROUP:327C </span><span style="color:gray">PIPERR</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:327C                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:327D                 </span><span style="color:navy">call    </span>TriageError
<span style="color:black">TRANGROUP:3280                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:3281                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:3282                 </span><span style="color:navy">mov     dx, offset </span>PIPEEMES_PTR
<span style="color:black">TRANGROUP:3285                 </span><span style="color:navy">call    </span>PIPEDEL
<span style="color:black">TRANGROUP:3288                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:3289                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:328A                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:328D                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:328E                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:328F                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:3290                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">65          </span>; network access denied
<span style="color:black">TRANGROUP:3293                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TCOMMANDJ
</span><span style="color:black">TRANGROUP:3295                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:3298 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3298
TRANGROUP:3298 </span><span style="color:gray">TCOMMANDJ</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3298                 </span><span style="color:navy">jmp     </span>TCOMMAND
<span style="color:black">TRANGROUP:329B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:329B
TRANGROUP:329B </span><span style="color:gray">PIPEPROCSTRT</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:329B                 </span><span style="color:navy">mov     ds, [</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:329F                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:329F                 </span><span style="color:navy">inc     [</span>PipeFiles<span style="color:navy">]     </span>; byte
<span style="color:black">TRANGROUP:32A3                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:32A4                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:32A5                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:32A6                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:32A7                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:32A8                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:32A9                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:32AA                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:32AA                 </span><span style="color:navy">mov     si, offset </span>TempVarName <span style="color:gray">; &quot;TEMP=&quot;
</span><span style="color:black">TRANGROUP:32AD                 </span><span style="color:navy">call    </span>find_name_in_environment
<span style="color:black">TRANGROUP:32B0                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:32B1                 </span><span style="color:navy">jb      short </span><span style="color:gray">no_temp_path
</span><span style="color:black">TRANGROUP:32B3                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:32B4                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:32B5                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:32B6                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:32B7                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:32B9                 </span><span style="color:navy">call    </span>skip_white      ; skip white space chars
<span style="color:black">TRANGROUP:32BC                 </span><span style="color:navy">call    </span>copy_pipe_path
<span style="color:black">TRANGROUP:32BF                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:32C0                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:32C1                 </span><span style="color:navy">mov     dx, offset </span>EndInit ; 41Eh
<span style="color:black">TRANGROUP:32C4                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4300h       </span>; (CHMOD shl 8) or 0
<span style="color:black">TRANGROUP:32C7                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:32CA                 </span><span style="color:navy">jb      short </span><span style="color:gray">no_temp_path
</span><span style="color:black">TRANGROUP:32CC                 </span><span style="color:navy">test    cx, </span><span style="color:green">10h         </span>; is it a directory?
<span style="color:black">TRANGROUP:32D0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">no_temp_path </span>; yes, continue
<span style="color:black">TRANGROUP:32D2                 </span><span style="color:navy">stc                     </span>; no, indicate fail
<span style="color:black">TRANGROUP:32D3
TRANGROUP:32D3 </span><span style="color:gray">no_temp_path</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:32D3                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:32D4                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:32D5                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:32D6                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:32D7                 </span><span style="color:navy">jnb     short </span><span style="color:gray">crt_temp
</span><span style="color:black">TRANGROUP:32D9                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">2Eh </span><span style="color:gray">; &#039;.&#039;
</span><span style="color:black">TRANGROUP:32DB                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">41Eh</span><span style="color:navy">], ah   </span>; mov [Pipe1],ah
<span style="color:black">TRANGROUP:32DF                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">46Dh</span><span style="color:navy">], ah   </span>; mov [Pipe2],ah
<span style="color:black">TRANGROUP:32E3                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:black">TRANGROUP:32E5                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">41Fh</span><span style="color:navy">], ah   </span>; mov [Pipe1+1],ah
<span style="color:black">TRANGROUP:32E9                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">46Eh</span><span style="color:navy">], ah   </span>; mov [Pipe2+1],ah
<span style="color:black">TRANGROUP:32ED
TRANGROUP:32ED </span><span style="color:gray">crt_temp</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:32ED                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">41Eh        </span>; mov dx,Pipe1
<span style="color:black">TRANGROUP:32F0                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:32F2                 </span><span style="color:navy">mov     ah, </span><span style="color:green">5Ah         </span>; CREATETEMPFILE
<span style="color:black">TRANGROUP:32F4                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:32F7                 </span><span style="color:navy">jnb     short </span><span style="color:gray">pps0
</span><span style="color:black">TRANGROUP:32F9                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PIPERR
</span><span style="color:black">TRANGROUP:32FB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:32FB
TRANGROUP:32FB </span><span style="color:gray">pps0</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:32FB                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:32FD                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh         </span>; CLOSE
<span style="color:black">TRANGROUP:32FF                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:black">TRANGROUP:32FF                                         </span>; BX = file handle
<span style="color:black">TRANGROUP:3301                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">46Dh        </span>; mov dx,Pipe2
<span style="color:black">TRANGROUP:3304                 </span><span style="color:navy">mov     ah, </span><span style="color:green">5Ah         </span>; CREATETEMPFILE
<span style="color:black">TRANGROUP:3306                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:3309                 </span><span style="color:navy">jnb     short </span><span style="color:gray">pps1
</span><span style="color:black">TRANGROUP:330B                 </span><span style="color:navy">jmp     </span><span style="color:gray">PIPERR
</span><span style="color:black">TRANGROUP:330E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:330E
TRANGROUP:330E </span><span style="color:gray">pps1</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:330E                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:3310                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh         </span>; CLOSE
<span style="color:black">TRANGROUP:3312                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:3315                 </span><span style="color:navy">call    </span>TESTDOREIN
<span style="color:black">TRANGROUP:3318                 </span><span style="color:navy">mov     si, [ds:</span><span style="color:green">4BCh</span><span style="color:navy">]   </span>; [PipePtr] ; offset RESGROUP:EndInit+158
<span style="color:black">TRANGROUP:331C                 </span><span style="color:navy">cmp     [ds:</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:black">TRANGROUP:3321                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOSINGP
</span><span style="color:black">TRANGROUP:3323                 </span><span style="color:navy">mov     [ds:</span>SingleCom<span style="color:navy">], </span><span style="color:green">0F000h </span>; Flag single command pipe
<span style="color:black">TRANGROUP:3329
TRANGROUP:3329 </span><span style="color:gray">NOSINGP</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3329                 </span><span style="color:navy">jmp     short </span><span style="color:gray">FIRSTPIPE
</span><span style="color:black">TRANGROUP:332B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:332B
TRANGROUP:332B </span><span style="color:gray">PIPEPROC</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:332B                 </span><span style="color:navy">and     [ds:</span>EchoFlag<span style="color:navy">], </span><span style="color:green">0FEh
</span><span style="color:black">TRANGROUP:3330                 </span><span style="color:navy">mov     si, [ds:</span><span style="color:green">4BCh</span><span style="color:navy">]   </span>; [PipePtr] ; offset RESGROUP:EndInit+158
<span style="color:black">TRANGROUP:3334                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:3335                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">7Ch </span><span style="color:gray">; &#039;|&#039;   </span>; ALTPIPECHR
<span style="color:black">TRANGROUP:3337                 </span><span style="color:navy">jz      short </span><span style="color:gray">ISPIPE1
</span><span style="color:black">TRANGROUP:3339                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">7Ch </span><span style="color:gray">; &#039;|&#039;   </span>; VBAR
<span style="color:black">TRANGROUP:333B                 </span><span style="color:navy">jz      short </span><span style="color:gray">ISPIPE1
</span><span style="color:black">TRANGROUP:333D                 </span><span style="color:navy">jmp     </span><span style="color:gray">PIPEEND
</span><span style="color:black">TRANGROUP:3340 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3340
TRANGROUP:3340 </span><span style="color:gray">ISPIPE1</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3340                 </span><span style="color:navy">mov     dx, [ds:</span>InPipePtr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3344                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3D00h       </span>; OPEN*256
<span style="color:black">TRANGROUP:3347                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:334A
TRANGROUP:334A </span><span style="color:gray">PIPEERRJ</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:334A                 </span><span style="color:navy">jnb     short </span><span style="color:gray">NO_PIPEERR
</span><span style="color:black">TRANGROUP:334C                 </span><span style="color:navy">jmp     </span><span style="color:gray">PIPERR
</span><span style="color:black">TRANGROUP:334F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:334F
TRANGROUP:334F </span><span style="color:gray">NO_PIPEERR</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:334F                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:3351                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:3353                 </span><span style="color:navy">xchg    al, [bx+</span><span style="color:#ff8000">18h</span><span style="color:navy">]    </span>; [bx+PDB.JFN_TABLE]
<span style="color:black">TRANGROUP:3356                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">18h</span><span style="color:navy">], al    </span>; [PDB.JFN_TABLE]
<span style="color:black">TRANGROUP:3359
TRANGROUP:3359 </span><span style="color:gray">FIRSTPIPE</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3359                 </span><span style="color:navy">mov     di, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:335C                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:335E                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">0Dh </span>; ; &#039;|&lt;CR&gt;&#039;
<span style="color:black">TRANGROUP:3361                 </span><span style="color:navy">jnz     short </span><span style="color:gray">PIPEOK1
</span><span style="color:black">TRANGROUP:3363
TRANGROUP:3363 </span><span style="color:gray">PIPEERRSYNJ</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3363                 </span><span style="color:navy">jmp     </span>PIPEERRSYN
<span style="color:black">TRANGROUP:3366 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3366
TRANGROUP:3366 </span><span style="color:gray">PIPEOK1</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3366                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">7Ch </span><span style="color:gray">; &#039;|&#039;   </span>; VBAR
<span style="color:black">TRANGROUP:3368                 </span><span style="color:navy">cmp     [si], al        </span>; &#039;||&#039; ?
<span style="color:black">TRANGROUP:336A                 </span><span style="color:navy">jz      short </span><span style="color:gray">PIPEERRSYNJ </span>; error
<span style="color:black">TRANGROUP:336C                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">7Ch </span><span style="color:gray">; &#039;|&#039; </span>; ALTPIPECHR
<span style="color:black">TRANGROUP:336F                 </span><span style="color:navy">jz      short </span><span style="color:gray">PIPEERRSYNJ
</span><span style="color:black">TRANGROUP:3371
TRANGROUP:3371 </span><span style="color:gray">PIPECOMLP</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3371                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:3372                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:3373                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:3376                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOTKANJ5
</span><span style="color:black">TRANGROUP:3378                 </span><span style="color:navy">movsb
</span><span style="color:black">TRANGROUP:3379                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:337A                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:337B                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PIPECOMLP
</span><span style="color:black">TRANGROUP:337D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:337D
TRANGROUP:337D </span><span style="color:gray">NOTKANJ5</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:337D                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:337F                 </span><span style="color:navy">jz      short </span><span style="color:gray">LASTPIPE
</span><span style="color:black">TRANGROUP:3381                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:3382                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">7Ch </span><span style="color:gray">; &#039;|&#039;   </span>; ALTPIPECHR
<span style="color:black">TRANGROUP:3384                 </span><span style="color:navy">jz      short </span><span style="color:gray">ISPIPE2
</span><span style="color:black">TRANGROUP:3386                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">7Ch </span><span style="color:gray">; &#039;|&#039;   </span>; VBAR
<span style="color:black">TRANGROUP:3388                 </span><span style="color:navy">jnz     short </span><span style="color:gray">PIPECOMLP
</span><span style="color:black">TRANGROUP:338A
TRANGROUP:338A </span><span style="color:gray">ISPIPE2</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:338A                 </span><span style="color:navy">mov     [byte ptr es:di-</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:338F                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:3390                 </span><span style="color:navy">mov     [es:</span>COMBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">], cl
</span><span style="color:black">TRANGROUP:3395                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:3396                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">4BCh</span><span style="color:navy">], si   </span>; ; [PipePtr] = [EndInit+158]
<span style="color:black">TRANGROUP:339A                 </span><span style="color:navy">mov     dx, [ds:</span>OutPipePtr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:339E                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:339F                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:33A1                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3C00h       </span>; CREAT*256
<span style="color:black">TRANGROUP:33A4                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:33A7                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:33A8                 </span><span style="color:navy">jb      short </span><span style="color:gray">PIPEERRJ
</span><span style="color:black">TRANGROUP:33AA                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:33AC                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:33AE                 </span><span style="color:navy">xchg    al, [bx+</span><span style="color:#ff8000">18h</span><span style="color:navy">]    </span>; [bx+PDB.JFN_TABLE]
<span style="color:black">TRANGROUP:33B1                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">19h</span><span style="color:navy">], al    </span>; [PDB.JFN_TABLE+1]
<span style="color:black">TRANGROUP:33B4                 </span><span style="color:navy">xchg    dx, [ds:</span>InPipePtr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:33B8                 </span><span style="color:navy">mov     [ds:</span>OutPipePtr<span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:33BC                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PIPECOM
</span><span style="color:black">TRANGROUP:33BE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:33BE
TRANGROUP:33BE </span><span style="color:gray">LASTPIPE</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:33BE                 </span><span style="color:navy">mov     [es:</span>COMBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">], cl
</span><span style="color:black">TRANGROUP:33C3                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:33C4                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">4BCh</span><span style="color:navy">], si   </span>; mov [PipePtr],si
<span style="color:black">TRANGROUP:33C8                 </span><span style="color:navy">call    </span>TESTDOREOUT
<span style="color:black">TRANGROUP:33CB
TRANGROUP:33CB </span><span style="color:gray">PIPECOM</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:33CB                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:33CC                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:33CD                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:33CD                 </span><span style="color:navy">jmp     </span><span style="color:gray">NOPIPEPROC
</span><span style="color:black">TRANGROUP:33D0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:33D0
TRANGROUP:33D0 </span><span style="color:gray">PIPEEND</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:33D0                 </span><span style="color:navy">call    </span>PIPEDEL
<span style="color:black">TRANGROUP:33D3                 </span><span style="color:navy">cmp     [ds:</span>SingleCom<span style="color:navy">], </span><span style="color:green">0F000h
</span><span style="color:black">TRANGROUP:33D9                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOSINGP2
</span><span style="color:black">TRANGROUP:33DB                 </span><span style="color:navy">mov     [ds:</span>SingleCom<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:black">TRANGROUP:33E1
TRANGROUP:33E1 </span><span style="color:gray">NOSINGP2</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:33E1                 </span><span style="color:navy">jmp     </span>TCOMMAND
<span style="color:black">TRANGROUP:33E1 </span><span style="color:gray">; END OF FUNCTION CHUNK FOR PROMPTBAT
</span><span style="color:black">TRANGROUP:33E4
TRANGROUP:33E4 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:33E4
TRANGROUP:33E4
TRANGROUP:33E4 </span>proc            DATINIT far             <span style="color:#8080ff">; ...
</span><span style="color:black">TRANGROUP:33E4                 </span><span style="color:navy">mov     [cs:</span>RESSEG<span style="color:navy">], ds
</span><span style="color:black">TRANGROUP:33E9                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:33EA                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:33EB                 </span><span style="color:navy">mov     ax, cs
</span><span style="color:black">TRANGROUP:33ED                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:33EF                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:33EF                 </span><span style="color:navy">mov     ds, ax
</span><span style="color:black">TRANGROUP:33F1                 </span><span style="color:navy">call    </span>TSYSLOADMSG     ; preload messages
<span style="color:black">TRANGROUP:33F4                 </span><span style="color:navy">mov     dx, offset </span>STACK ; INTERNATVARS
<span style="color:black">TRANGROUP:33F7                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3800h       </span>; INTERNATIONAL*256
<span style="color:black">TRANGROUP:33FA                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:33FD                 </span><span style="color:navy">mov     </span>word ptr ds:81h<span style="color:navy">, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:3403                 </span><span style="color:navy">mov     [</span>COMBUF<span style="color:navy">], </span><span style="color:green">128
</span><span style="color:black">TRANGROUP:3408                 </span><span style="color:navy">mov     [word ptr </span>COMBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">0D01h
</span><span style="color:black">TRANGROUP:340E                 </span><span style="color:navy">call    </span>DATE
<span style="color:black">TRANGROUP:3411                 </span><span style="color:navy">call    </span>CTIME
<span style="color:black">TRANGROUP:3414                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:3415                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:3415                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:3416                 </span>assume es:nothing
<span style="color:black">TRANGROUP:3416                 </span><span style="color:navy">retf
</span><span style="color:black">TRANGROUP:3416 </span>endp            DATINIT
<span style="color:black">TRANGROUP:3416
TRANGROUP:3417
TRANGROUP:3417 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3417
TRANGROUP:3417
TRANGROUP:3417 </span>proc            DATE near               <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3417                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:black">TRANGROUP:341A                 </span><span style="color:navy">mov     di, offset </span>PARSE_DATE
<span style="color:black">TRANGROUP:341D                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:341F                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:3421                 </span><span style="color:navy">call    </span>cmd_parse
<span style="color:black">TRANGROUP:3424                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:3427                 </span><span style="color:navy">jz      short </span><span style="color:gray">PRMTDAT
</span><span style="color:black">TRANGROUP:3429                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:342C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">DATERR
</span><span style="color:black">TRANGROUP:342E                 </span><span style="color:navy">jmp     short </span><span style="color:gray">COMDAT
</span><span style="color:black">TRANGROUP:3430 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3430
TRANGROUP:3430 </span><span style="color:gray">PRMTDAT</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3430                 </span><span style="color:navy">call    </span>GetDate
<span style="color:black">TRANGROUP:3433                 </span><span style="color:navy">xchg    dh, dl
</span><span style="color:black">TRANGROUP:3435                 </span><span style="color:navy">mov     [ds:</span>CurDat_yr<span style="color:navy">], cx
</span><span style="color:black">TRANGROUP:3439                 </span><span style="color:navy">mov     [ds:</span>CurDat_mo_day<span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:343D                 </span><span style="color:navy">mov     dx, offset </span>CurDat_Ptr
<span style="color:black">TRANGROUP:3440                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:3443
TRANGROUP:3443 </span><span style="color:gray">GET_NEW_DATE</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3443                 </span><span style="color:navy">call    </span>GETDAT
<span style="color:black">TRANGROUP:3446                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh      </span>; -1
<span style="color:black">TRANGROUP:3449                 </span><span style="color:navy">jz      short </span><span style="color:gray">date_end
</span><span style="color:black">TRANGROUP:344B                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:344E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">DATERR
</span><span style="color:black">TRANGROUP:3450
TRANGROUP:3450 </span><span style="color:gray">COMDAT</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3450                 </span><span style="color:navy">mov     cx, [ds:</span>DATE_YEAR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3454                 </span><span style="color:navy">mov     dh, [ds:</span>DATE_MONTH<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3458                 </span><span style="color:navy">mov     dl, [ds:</span>DATE_DAY<span style="color:navy">]
</span><span style="color:black">TRANGROUP:345C                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:345D                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:345E                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">1           </span>; set 1 positional entered
<span style="color:black">TRANGROUP:3461                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:3463                 </span><span style="color:navy">call    </span>cmd_parse
<span style="color:black">TRANGROUP:3466                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:3468                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:3469                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:346A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">DATERR
</span><span style="color:black">TRANGROUP:346C                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2Bh         </span>; SET_DATE
<span style="color:black">TRANGROUP:346E                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:3471                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:3473                 </span><span style="color:navy">jnz     short </span><span style="color:gray">DATERR
</span><span style="color:black">TRANGROUP:3475
TRANGROUP:3475 </span><span style="color:gray">date_end</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3475                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3476 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3476
TRANGROUP:3476 </span><span style="color:gray">DATERR</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3476                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:3479                 </span><span style="color:navy">mov     dx, offset </span>BADDAT_PTR
<span style="color:black">TRANGROUP:347C                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:347F                 </span><span style="color:navy">jmp     short </span><span style="color:gray">GET_NEW_DATE
</span><span style="color:black">TRANGROUP:347F </span>endp            DATE
<span style="color:black">TRANGROUP:347F
TRANGROUP:3481
TRANGROUP:3481 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3481
TRANGROUP:3481
TRANGROUP:3481 </span>proc            CTIME near              <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3481                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:black">TRANGROUP:3484                 </span><span style="color:navy">mov     di, offset </span>PARSE_TIME
<span style="color:black">TRANGROUP:3487                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:3489                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:348B                 </span><span style="color:navy">call    </span>cmd_parse
<span style="color:black">TRANGROUP:348E                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:3491                 </span><span style="color:navy">jz      short </span><span style="color:gray">PRMTTIM
</span><span style="color:black">TRANGROUP:3493                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:3496                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TIMERR
</span><span style="color:black">TRANGROUP:3498                 </span><span style="color:navy">jmp     short </span><span style="color:gray">COMTIM
</span><span style="color:black">TRANGROUP:349A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:349A
TRANGROUP:349A </span><span style="color:gray">PRMTTIM</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:349A                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2Ch         </span>; Get_Time
<span style="color:black">TRANGROUP:349C                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:349F                 </span><span style="color:navy">xchg    ch, cl
</span><span style="color:black">TRANGROUP:34A1                 </span><span style="color:navy">xchg    dh, dl
</span><span style="color:black">TRANGROUP:34A3                 </span><span style="color:navy">mov     [ds:</span>CurTim_hr_min<span style="color:navy">], cx
</span><span style="color:black">TRANGROUP:34A7                 </span><span style="color:navy">mov     [ds:</span>CurTim_Sec_hn<span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:34AB                 </span><span style="color:navy">mov     dx, offset </span>CurTim_Ptr
<span style="color:black">TRANGROUP:34AE                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:34B1
TRANGROUP:34B1 </span><span style="color:gray">GET_NEW_TIME</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:34B1                 </span><span style="color:navy">call    </span>GETTIM
<span style="color:black">TRANGROUP:34B4                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:34B7                 </span><span style="color:navy">jz      short </span><span style="color:gray">time_end
</span><span style="color:black">TRANGROUP:34B9                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:34BC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TIMERR
</span><span style="color:black">TRANGROUP:34BE
TRANGROUP:34BE </span><span style="color:gray">COMTIM</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:34BE                 </span><span style="color:navy">mov     ch, [ds:</span>TIME_HOUR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:34C2                 </span><span style="color:navy">mov     cl, [ds:</span>TIME_MINUTES<span style="color:navy">]
</span><span style="color:black">TRANGROUP:34C6                 </span><span style="color:navy">mov     dh, [ds:</span>TIME_SECONDS<span style="color:navy">]
</span><span style="color:black">TRANGROUP:34CA                 </span><span style="color:navy">mov     dl, [ds:</span>TIME_FRACTION<span style="color:navy">]
</span><span style="color:black">TRANGROUP:34CE                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:34CF                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:34D0                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:34D3                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:34D5                 </span><span style="color:navy">call    </span>cmd_parse
<span style="color:black">TRANGROUP:34D8                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:34DA                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:34DB                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:34DC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TIMERR
</span><span style="color:black">TRANGROUP:34DE                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2Dh         </span>; SET_TIME
<span style="color:black">TRANGROUP:34E0                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:34E3                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:34E5                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TIMERR
</span><span style="color:black">TRANGROUP:34E7
TRANGROUP:34E7 </span><span style="color:gray">time_end</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:34E7                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:34E8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:34E8
TRANGROUP:34E8 </span><span style="color:gray">TIMERR</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:34E8                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:34EB                 </span><span style="color:navy">mov     dx, offset </span>BadTim_Ptr
<span style="color:black">TRANGROUP:34EE                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:34F1                 </span><span style="color:navy">jmp     short </span><span style="color:gray">GET_NEW_TIME
</span><span style="color:black">TRANGROUP:34F1 </span>endp            CTIME
<span style="color:black">TRANGROUP:34F1
TRANGROUP:34F3
TRANGROUP:34F3 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:34F3
TRANGROUP:34F3
TRANGROUP:34F3 </span>proc            SetInitFlag near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:34F3                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:34F7                 </span><span style="color:navy">and     [ds:</span>InitFlag<span style="color:navy">], </span><span style="color:green">0FDh
</span><span style="color:black">TRANGROUP:34FC                 </span><span style="color:navy">or      [ds:</span>InitFlag<span style="color:navy">], cl
</span><span style="color:black">TRANGROUP:3500                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:3501                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:3502                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:3502                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3502 </span>endp            SetInitFlag
<span style="color:black">TRANGROUP:3502
TRANGROUP:3503
TRANGROUP:3503 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3503
TRANGROUP:3503
TRANGROUP:3503 </span>proc            PipeOff near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3503                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:3504                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:3505                 </span><span style="color:navy">mov     ds, [cs:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:350A                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:350A                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:350C                 </span><span style="color:navy">xchg    al, [ds:</span>PipeFlag<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3510                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:3512                 </span><span style="color:navy">jz      short </span><span style="color:gray">PipeOffDone
</span><span style="color:black">TRANGROUP:3514                 </span><span style="color:navy">shr     [ds:</span>EchoFlag<span style="color:navy">], </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:3518
TRANGROUP:3518 </span><span style="color:gray">PipeOffDone</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3518                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:3519                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:351A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:351A </span>endp            PipeOff
<span style="color:black">TRANGROUP:351A
</span><span style="color:maroon">TRANGROUP:351B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:351B
TRANGROUP:351B </span>PRINT_TIME<span style="color:navy">:                             </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:351B                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2Ch
</span><span style="color:maroon">TRANGROUP:351D                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:maroon">TRANGROUP:3520                 </span><span style="color:navy">push    es
</span><span style="color:maroon">TRANGROUP:3521                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">TRANGROUP:3522                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:3523                 </span>assume es:TRANGROUP
<span style="color:maroon">TRANGROUP:3523                 </span><span style="color:navy">xchg    ch, cl
</span><span style="color:maroon">TRANGROUP:3525                 </span><span style="color:navy">xchg    dh, dl
</span><span style="color:maroon">TRANGROUP:3527                 </span><span style="color:navy">mov     [cs:</span>PromTim_hr_min<span style="color:navy">], cx
</span><span style="color:maroon">TRANGROUP:352C                 </span><span style="color:navy">mov     [cs:</span>PromTim_Sec_hn<span style="color:navy">], dx
</span><span style="color:maroon">TRANGROUP:3531                 </span><span style="color:navy">mov     dx, offset </span>promtim_ptr
<span style="color:maroon">TRANGROUP:3534                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:3537                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:3538                 </span>assume es:nothing
<span style="color:maroon">TRANGROUP:3538                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3539
TRANGROUP:3539 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3539
TRANGROUP:3539
TRANGROUP:3539 </span>proc            GETDAT near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3539                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3800h       </span>; (International SHL 8)
<span style="color:black">TRANGROUP:353C                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">5Ch </span><span style="color:gray">; &#039;\&#039;
</span><span style="color:black">TRANGROUP:353F                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:3542                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">TRANGROUP:3544                 </span><span style="color:navy">lodsw
</span><span style="color:black">TRANGROUP:3545                 </span><span style="color:navy">mov     dx, [cs:</span>usadat_ptr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:354A                 </span><span style="color:navy">dec     ax
</span><span style="color:black">TRANGROUP:354B                 </span><span style="color:navy">js      short </span><span style="color:gray">printformat
</span><span style="color:black">TRANGROUP:354D                 </span><span style="color:navy">mov     dx, [cs:</span>eurdat_ptr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3552                 </span><span style="color:navy">jz      short </span><span style="color:gray">printformat
</span><span style="color:black">TRANGROUP:3554                 </span><span style="color:navy">mov     dx, [cs:</span>japdat_ptr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3559
TRANGROUP:3559 </span><span style="color:gray">printformat</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3559                 </span><span style="color:navy">mov     ax, dx
</span><span style="color:black">TRANGROUP:355B                 </span><span style="color:navy">mov     dh, </span><span style="color:#ff8000">0FFh        </span>; util_msg_class
<span style="color:black">TRANGROUP:355D                 </span><span style="color:navy">call    </span>TSYSGETMSG
<span style="color:black">TRANGROUP:3560                 </span><span style="color:navy">mov     [cs:</span>NewDat_Format<span style="color:navy">], si
</span><span style="color:black">TRANGROUP:3565                 </span><span style="color:navy">mov     dx, offset </span>NewDat_Ptr
<span style="color:black">TRANGROUP:3568                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:356B                 </span><span style="color:navy">mov     [cs:</span>NewDat_Format<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:3572                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0Ah         </span>; Std_Con_String_Input
<span style="color:black">TRANGROUP:3574                 </span><span style="color:navy">mov     dx, offset </span>COMBUF
<span style="color:black">TRANGROUP:3577                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">2           </span>; INITSPECIAL
<span style="color:black">TRANGROUP:357A                 </span><span style="color:navy">call    </span>SetInitFlag
<span style="color:black">TRANGROUP:357D                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:3580                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:3582                 </span><span style="color:navy">call    </span>SetInitFlag
<span style="color:black">TRANGROUP:3585                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:3588                 </span><span style="color:navy">mov     si, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:358B                 </span><span style="color:navy">mov     di, offset </span>PARSE_DATE
<span style="color:black">TRANGROUP:358E                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:3590                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:3592                 </span><span style="color:navy">call    </span>cmd_parse
<span style="color:black">TRANGROUP:3595                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3595 </span>endp            GETDAT
<span style="color:black">TRANGROUP:3595
TRANGROUP:3596
TRANGROUP:3596 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3596
TRANGROUP:3596
TRANGROUP:3596 </span>proc            GETTIM near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3596                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:3598                 </span><span style="color:navy">mov     dx, offset </span>NewTim_Ptr
<span style="color:black">TRANGROUP:359B                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:359E                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0Ah         </span>; Std_Con_String_Input
<span style="color:black">TRANGROUP:35A0                 </span><span style="color:navy">mov     dx, offset </span>COMBUF
<span style="color:black">TRANGROUP:35A3                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:35A6                 </span><span style="color:navy">call    </span>SetInitFlag
<span style="color:black">TRANGROUP:35A9                 </span><span style="color:navy">call    </span>int_21h_indirect
<span style="color:black">TRANGROUP:35AC                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:35AE                 </span><span style="color:navy">call    </span>SetInitFlag
<span style="color:black">TRANGROUP:35B1                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:35B4                 </span><span style="color:navy">mov     si, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:35B7                 </span><span style="color:navy">mov     di, offset </span>PARSE_TIME
<span style="color:black">TRANGROUP:35BA                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:35BC                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:35BE                 </span><span style="color:navy">call    </span>cmd_parse
<span style="color:black">TRANGROUP:35C1                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:35C1 </span>endp            GETTIM
<span style="color:black">TRANGROUP:35C1
TRANGROUP:35C2
TRANGROUP:35C2 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:35C2
TRANGROUP:35C2
TRANGROUP:35C2 </span>proc            skip_white near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:35C2                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:35C3
TRANGROUP:35C3 </span><span style="color:gray">skw_lp</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:35C3                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:35C4                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:35C6                 </span><span style="color:navy">jz      short </span><span style="color:gray">skw_lp
</span><span style="color:black">TRANGROUP:35C8                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:35CA                 </span><span style="color:navy">jz      short </span><span style="color:gray">skw_lp
</span><span style="color:black">TRANGROUP:35CC                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:35CD                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:35CD </span>endp            skip_white
<span style="color:black">TRANGROUP:35CD
TRANGROUP:35CE
TRANGROUP:35CE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:35CE
TRANGROUP:35CE
TRANGROUP:35CE </span>proc            copy_pipe_path near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:35CE                 </span><span style="color:navy">mov     cx, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:35D1                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:35D3                 </span><span style="color:navy">mov     di, si
</span><span style="color:black">TRANGROUP:35D5                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:35D6                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:35D7                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:35D8                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:35D9                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:35DA                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:35DC                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:35DD                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:35DE                 </span><span style="color:navy">not     cx
</span><span style="color:black">TRANGROUP:35E0                 </span><span style="color:navy">mov     di, </span><span style="color:#ff8000">41Eh        </span>; Pipe1 ; (offset RESGROUP:EndInit)
<span style="color:black">TRANGROUP:35E3                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:35E4                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:35E5                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:35E7                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:35E8                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:35E9                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:35EA                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:35EB                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:35EC                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:35EE                 </span><span style="color:navy">mov     di, </span><span style="color:#ff8000">46Dh        </span>; Pipe2 ; (offset RESGROUP:EndInit+79)
<span style="color:black">TRANGROUP:35F1                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:35F3                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:35F4                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:35F4 </span>endp            copy_pipe_path
<span style="color:black">TRANGROUP:35F4
TRANGROUP:35F5
TRANGROUP:35F5 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:35F5
TRANGROUP:35F5
TRANGROUP:35F5 </span>proc            PARSELINE near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:35F5                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:35F6                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:35F7                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:35F8                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:35F9                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:35FA                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:35FB                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:35FC                 </span><span style="color:navy">mov     [ds:</span>cpyflag<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:3601                 </span><span style="color:navy">mov     [ds:</span>LASTARG<span style="color:navy">], </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:3607                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:3609                 </span><span style="color:navy">mov     cx, </span><span style="color:green">1092        </span>; ARG_UNIT.SIZE
<span style="color:black">TRANGROUP:360C                 </span><span style="color:navy">mov     di, offset </span>ARG_ARGV ; offset ARG
<span style="color:black">TRANGROUP:360F                 </span><span style="color:navy">rep stosb
</span><span style="color:black">TRANGROUP:3611                 </span><span style="color:navy">mov     [ds:</span>ARGBUF_PTR<span style="color:navy">], offset </span>ARG_ARGBUF ; ARG+ARG_UNIT.argbuf
<span style="color:black">TRANGROUP:3617                 </span><span style="color:navy">mov     [ds:</span>ARG_ARGSWINFO<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [ARG+ARG_UNIT.argswinfo]
<span style="color:black">TRANGROUP:361D                 </span><span style="color:navy">mov     [ds:</span>ARG_ARGVCNT<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [ARG+ARG_UNIT.argvcnt]
<span style="color:black">TRANGROUP:3623                 </span><span style="color:navy">mov     si, (offset </span>COMBUF<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">)
</span><span style="color:black">TRANGROUP:3626                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:3627                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:362B                 </span><span style="color:navy">cmp     [ds:</span>ForFlag<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:3630                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:3631                 </span><span style="color:navy">jnz     short </span><span style="color:gray">PCONT
</span><span style="color:black">TRANGROUP:3633                 </span><span style="color:navy">mov     di, offset </span>ARG_ARGFORCOMBUF ; ARG+ARG_UNIT.argforcombuf
<span style="color:black">TRANGROUP:3636                 </span><span style="color:navy">xor     ch, ch
</span><span style="color:black">TRANGROUP:3638                 </span><span style="color:navy">mov     cl, [ds:</span>COMBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:363C                 </span><span style="color:navy">inc     cl
</span><span style="color:black">TRANGROUP:363E                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:3640                 </span><span style="color:navy">mov     si, offset </span>ARG_ARGFORCOMBUF ; ARG+ARG_UNIT.argforcombuf
<span style="color:black">TRANGROUP:3643
TRANGROUP:3643 </span><span style="color:gray">PCONT</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3643                 </span><span style="color:navy">mov     di, offset </span>TPBUF ; destination is temporary token buffer
<span style="color:black">TRANGROUP:3646                 </span><span style="color:navy">mov     bl, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:3648
TRANGROUP:3648 </span><span style="color:gray">PARSELOOP</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3648                 </span><span style="color:navy">mov     [ds:</span>COMPTR<span style="color:navy">], si </span>; save ptr into original command buffer
<span style="color:black">TRANGROUP:364C                 </span><span style="color:navy">xor     bp, bp
</span><span style="color:black">TRANGROUP:364E                 </span><span style="color:navy">mov     [ds:</span>expand_star<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte ; don&#039;t expand *&#039;s to ?&#039;s
<span style="color:black">TRANGROUP:3653                 </span><span style="color:navy">call    </span>scanoff         ; skip leading blanks
<span style="color:black">TRANGROUP:3656                 </span><span style="color:navy">call    </span>cparse          ; byte off a token (args in SI, DI, BL)
<span style="color:black">TRANGROUP:3659                 </span><span style="color:navy">jnb     short </span><span style="color:gray">MORE_PRSE
</span><span style="color:black">TRANGROUP:365B                 </span><span style="color:navy">or      bp, bp
</span><span style="color:black">TRANGROUP:365D                 </span><span style="color:navy">jz      short </span><span style="color:gray">PARSEDONE
</span><span style="color:black">TRANGROUP:365F                 </span><span style="color:navy">call    </span>newarg
<span style="color:black">TRANGROUP:3662                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PARSEDONE
</span><span style="color:black">TRANGROUP:3664 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3664
TRANGROUP:3664 </span><span style="color:gray">MORE_PRSE</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3664                 </span><span style="color:navy">mov     [ds:</span>cpyflag<span style="color:navy">], </span><span style="color:#ff8000">2 </span>; tell CPARSE that 1st token is done
<span style="color:black">TRANGROUP:3669                 </span><span style="color:navy">call    </span>newarg          ; add to argv array (CX has char count)
<span style="color:black">TRANGROUP:366C                 </span><span style="color:navy">jnb     short </span><span style="color:gray">PARSELOOP
</span><span style="color:black">TRANGROUP:366E                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PARSE_ERROR
</span><span style="color:black">TRANGROUP:3670 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3670
TRANGROUP:3670 </span><span style="color:gray">PARSEDONE</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3670                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:3671                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:3672                 </span><span style="color:navy">jmp     short </span><span style="color:gray">PARSE_EXIT
</span><span style="color:black">TRANGROUP:3674 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3674
TRANGROUP:3674 </span><span style="color:gray">PARSE_ERROR</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3674                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:3675                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:3676
TRANGROUP:3676 </span><span style="color:gray">PARSE_EXIT</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3676                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:3677                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:3678                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:3679                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:367A                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:367B                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:367C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:367C </span>endp            PARSELINE
<span style="color:black">TRANGROUP:367C
TRANGROUP:367D
TRANGROUP:367D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:367D
TRANGROUP:367D
TRANGROUP:367D </span>proc            newarg near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:367D                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:367E                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:367F                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:3680                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:3681                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:3682                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:3683                 </span><span style="color:navy">call    </span>arg_switch
<span style="color:black">TRANGROUP:3686                 </span><span style="color:navy">cmp     [ds:</span>ARG_ARGVCNT<span style="color:navy">], </span><span style="color:green">64 </span>; [ARG+ARG_UNIT.argvcnt],ARGMAX
<span style="color:black">TRANGROUP:368B                 </span><span style="color:navy">jge     short </span><span style="color:gray">to_many_args
</span><span style="color:black">TRANGROUP:368D                 </span><span style="color:navy">mov     dh, bh
</span><span style="color:black">TRANGROUP:368F                 </span><span style="color:navy">mov     bx, [ds:</span>ARG_ARGVCNT<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3693                 </span><span style="color:navy">inc     [ds:</span>ARG_ARGVCNT<span style="color:navy">] </span>; inc word [ARG+ARG_UNIT.argvcnt]
<span style="color:black">TRANGROUP:3697                 </span><span style="color:navy">mov     ax, offset </span>ARG_ARGV ; ARG+ARG_UNIT.argv
<span style="color:black">TRANGROUP:369A                 </span><span style="color:navy">call    </span>argv_calc
<span style="color:black">TRANGROUP:369D                 </span><span style="color:navy">mov     [word ptr bx+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [bx+ARGV_ELE.argsw_word]
<span style="color:black">TRANGROUP:36A2                 </span><span style="color:navy">mov     [bx+</span><span style="color:#ff8000">5</span><span style="color:navy">], cx      </span>; [bx+ARGV_ELE.arglen]
<span style="color:black">TRANGROUP:36A5                 </span><span style="color:navy">mov     [bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], dh      </span>; [bx+ARGV_ELE.argflags]
<span style="color:black">TRANGROUP:36A8                 </span><span style="color:navy">mov     si, [ds:</span>ARGBUF_PTR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:36AC                 </span><span style="color:navy">mov     [bx], si        </span>; [bx+ARGV_ELE.argpointer]
<span style="color:black">TRANGROUP:36AE                 </span><span style="color:navy">add     si, [ds:</span>STARTEL<span style="color:navy">]
</span><span style="color:black">TRANGROUP:36B2                 </span><span style="color:navy">sub     si, di
</span><span style="color:black">TRANGROUP:36B4                 </span><span style="color:navy">mov     [bx+</span><span style="color:#ff8000">3</span><span style="color:navy">], si      </span>; [bx+ARGV_ELE.argstartel]
<span style="color:black">TRANGROUP:36B7                 </span><span style="color:navy">mov     si, [ds:</span>COMPTR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:36BB                 </span><span style="color:navy">mov     [bx+</span><span style="color:#ff8000">9</span><span style="color:navy">], si      </span>; [bx+ARGV_ELE.arg_ocomptr]
<span style="color:black">TRANGROUP:36BE                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:36C0                 </span><span style="color:navy">mov     di, [ds:</span>ARGBUF_PTR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:36C4                 </span><span style="color:navy">add     di, cx
</span><span style="color:black">TRANGROUP:36C6                 </span><span style="color:navy">cmp     di, (offset </span>ARG_ARGBUF<span style="color:navy">+</span><span style="color:green">7Fh</span><span style="color:navy">) </span>; ARG+ARG_UNIT.argbuf+ARGBLEN-1
<span style="color:black">TRANGROUP:36CA                 </span><span style="color:navy">jge     short </span><span style="color:gray">buf_oflow
</span><span style="color:black">TRANGROUP:36CC                 </span><span style="color:navy">sub     di, cx
</span><span style="color:black">TRANGROUP:36CE
TRANGROUP:36CE </span><span style="color:gray">newarg_@</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:36CE                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:36CF                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:36D1                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:36D3                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:36D4                 </span><span style="color:navy">mov     [ds:</span>ARGBUF_PTR<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:36D8                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:36D9                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:36DA                 </span><span style="color:navy">jmp     short </span><span style="color:gray">newarg_exit
</span><span style="color:black">TRANGROUP:36DC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:36DC
TRANGROUP:36DC </span><span style="color:gray">buf_oflow</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:36DC                 </span><span style="color:navy">sub     di, cx
</span><span style="color:black">TRANGROUP:36DE                 </span><span style="color:navy">mov     cx, (offset </span>ARG_ARGBUF<span style="color:navy">+</span><span style="color:green">7Fh</span><span style="color:navy">) </span>; ARG+ARG_UNIT.argbuf+ARGBLEN-1
<span style="color:black">TRANGROUP:36E1                 </span><span style="color:navy">sub     cx, di
</span><span style="color:black">TRANGROUP:36E3                 </span><span style="color:navy">jmp     short </span><span style="color:gray">newarg_@
</span><span style="color:black">TRANGROUP:36E5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:36E5
TRANGROUP:36E5 </span><span style="color:gray">to_many_args</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:36E5                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:36E8                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:36E9                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:36EA
TRANGROUP:36EA </span><span style="color:gray">newarg_exit</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:36EA                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:36EB                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:36EC                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:36ED                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:36EE                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:36EF                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:36EF </span>endp            newarg
<span style="color:black">TRANGROUP:36EF
TRANGROUP:36F0
TRANGROUP:36F0 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:36F0
TRANGROUP:36F0
TRANGROUP:36F0 </span>proc            arg_switch near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:36F0                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:36F1                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:36F2                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:36F3                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:36F4                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:36F5                 </span><span style="color:navy">test    bh, </span><span style="color:green">1           </span>; sw_flag
<span style="color:black">TRANGROUP:36F8                 </span><span style="color:navy">jz      short </span><span style="color:gray">no_switch0
</span><span style="color:black">TRANGROUP:36FA                 </span><span style="color:navy">cmp     [ds:</span>LASTARG<span style="color:navy">], </span><span style="color:green">0FFFFh </span>; -1
<span style="color:black">TRANGROUP:36FF                 </span><span style="color:navy">jz      short </span><span style="color:gray">arg_no_switch1
</span><span style="color:black">TRANGROUP:3701                 </span><span style="color:navy">mov     bx, [ds:</span>LASTARG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3705                 </span><span style="color:navy">mov     ax, offset </span>ARG_ARGV ; ARG+ARG_UNIT.argv ; ARG+0
<span style="color:black">TRANGROUP:3708                 </span><span style="color:navy">call    </span>argv_calc
<span style="color:black">TRANGROUP:370B                 </span><span style="color:navy">or      [bx+</span><span style="color:#ff8000">7</span><span style="color:navy">], bp      </span>; or [bx+ARGV_ELE.argsw_word],bp
<span style="color:black">TRANGROUP:370E                 </span><span style="color:navy">or      [ds:</span>ARG_ARGSWINFO<span style="color:navy">], bp </span>; or [ARG+ARG_UNIT.argswinfo],bp
<span style="color:black">TRANGROUP:3712                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:3713                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:3714                 </span><span style="color:navy">jmp     short </span><span style="color:gray">arg_switch_exit
</span><span style="color:black">TRANGROUP:3716 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3716
TRANGROUP:3716 </span><span style="color:gray">no_switch0</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3716                 </span><span style="color:navy">mov     ax, [ds:</span>ARG_ARGVCNT<span style="color:navy">] </span>; [ARG+ARG_UNIT.argvcnt]
<span style="color:black">TRANGROUP:3719                 </span><span style="color:navy">mov     [ds:</span>LASTARG<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:371C
TRANGROUP:371C </span><span style="color:gray">arg_no_switch1</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:371C                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:371D                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:371E
TRANGROUP:371E </span><span style="color:gray">arg_switch_exit</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:371E                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:371F                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:3720                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:3721                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:3722                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3722 </span>endp            arg_switch
<span style="color:black">TRANGROUP:3722
TRANGROUP:3723
TRANGROUP:3723 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3723
TRANGROUP:3723
TRANGROUP:3723 </span>proc            argv_calc near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3723                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:3724                 </span><span style="color:navy">mov     al, bl
</span><span style="color:black">TRANGROUP:3726                 </span><span style="color:navy">mov     bl, </span><span style="color:green">11          </span>; ARGV_ELE.SIZE
<span style="color:black">TRANGROUP:3728                 </span><span style="color:navy">mul     bl
</span><span style="color:black">TRANGROUP:372A                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:372B                 </span><span style="color:navy">add     ax, bx
</span><span style="color:black">TRANGROUP:372D                 </span><span style="color:navy">xchg    ax, bx
</span><span style="color:black">TRANGROUP:372E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:372E </span>endp            argv_calc
<span style="color:black">TRANGROUP:372E
TRANGROUP:372F
TRANGROUP:372F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:372F
TRANGROUP:372F
TRANGROUP:372F </span>proc            path_search near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:372F                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:3730                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:3731                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:3732                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:3733                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:3734                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:3735                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:3736                 </span><span style="color:navy">test    [ds:</span>ARGV0_ARG_FLAGS<span style="color:navy">], </span><span style="color:green">3 </span>; [ARG+ARGV_ELE.argflags],3 ; wildcard+sw_flag
<span style="color:black">TRANGROUP:373B                 </span><span style="color:navy">jz      short </span><span style="color:gray">path_search_ok
</span><span style="color:black">TRANGROUP:373D
TRANGROUP:373D </span><span style="color:gray">path_failure_jmp</span><span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:373D                 </span><span style="color:navy">jmp     </span><span style="color:gray">path_failure
</span><span style="color:black">TRANGROUP:3740 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3740
TRANGROUP:3740 </span><span style="color:gray">path_search_ok</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3740                 </span><span style="color:navy">call    </span>STORE_PCHAR     ; figure out the pathname separator
<span style="color:black">TRANGROUP:3743                 </span><span style="color:navy">mov     dx, offset </span>FBUF
<span style="color:black">TRANGROUP:3746                 </span><span style="color:navy">mov     ax, </span><span style="color:green">1A00h
</span><span style="color:black">TRANGROUP:3749                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET DISK TRANSFER AREA ADDRESS
<span style="color:black">TRANGROUP:3749                                         </span>; DS:DX -&gt; disk transfer buffer
<span style="color:black">TRANGROUP:374B                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:374C                 </span><span style="color:navy">call    </span>find_path       ; get a handle (ES:DI) on user path
<span style="color:black">TRANGROUP:374F                 </span><span style="color:navy">mov     [ds:</span>pathinfo<span style="color:navy">], es
</span><span style="color:black">TRANGROUP:3753                 </span><span style="color:navy">mov     [ds:</span>pathinfo<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], di </span>; &quot;old&quot; pathstring pointer
<span style="color:black">TRANGROUP:3757                 </span><span style="color:navy">mov     [ds:</span>pathinfo<span style="color:navy">+</span><span style="color:green">4</span><span style="color:navy">], di </span>; &quot;new&quot; pathstring pointer
<span style="color:black">TRANGROUP:375B                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:375C                 </span><span style="color:navy">mov     bx, </span><span style="color:green">256         </span>; PBUFLEN
<span style="color:black">TRANGROUP:375C                                         </span>; copy/format argv[0] into temp buffer
<span style="color:black">TRANGROUP:375F                 </span><span style="color:navy">mov     si, offset </span>EXECPATH
<span style="color:black">TRANGROUP:3762                 </span><span style="color:navy">call    </span>STRIP
<span style="color:black">TRANGROUP:3765                 </span><span style="color:navy">jb      short </span><span style="color:gray">path_failure_jmp
</span><span style="color:black">TRANGROUP:3767                 </span><span style="color:navy">mov     dx, si
</span><span style="color:black">TRANGROUP:3769                 </span><span style="color:navy">mov     [ds:</span>search_error<span style="color:navy">], offset </span>baddrv_ptr
<span style="color:black">TRANGROUP:376F                 </span><span style="color:navy">call    </span>PSEARCH
<span style="color:black">TRANGROUP:3772                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">TRANGROUP:3774                 </span><span style="color:navy">jz      short </span><span style="color:gray">path_noinit
</span><span style="color:black">TRANGROUP:3776                 </span><span style="color:navy">mov     bp, ax
</span><span style="color:black">TRANGROUP:3778                 </span><span style="color:navy">mov     di, offset </span>EXECPATH
<span style="color:black">TRANGROUP:377B                 </span><span style="color:navy">mov     si, [ds:</span>ARG_ARGV<span style="color:navy">] </span>; [ARG+ARGV_ELE.argpointer]
<span style="color:black">TRANGROUP:377B                                         </span>; mov si,ds:arg.argv[0].argpointer
<span style="color:black">TRANGROUP:377F                 </span><span style="color:navy">mov     cx, [ds:</span>ARGV0_ARGSTARTEL<span style="color:navy">] </span>; [ARG+ARGV_ELE.argstartel]
<span style="color:black">TRANGROUP:377F                                         </span>; mov cx,ds:arg.argv[0].argstartel
<span style="color:black">TRANGROUP:3783                 </span><span style="color:navy">sub     cx, si          </span>; compute prefix bytes to copy
<span style="color:black">TRANGROUP:3785                 </span><span style="color:navy">mov     ah, &#039;</span><span style="color:green">:&#039;
</span><span style="color:black">TRANGROUP:3787                 </span><span style="color:navy">cmp     cx, </span><span style="color:#ff8000">2           </span>; room for drive letter?
<span style="color:black">TRANGROUP:378A                 </span><span style="color:navy">jb      short </span><span style="color:gray">adddrive  </span>; no, stick it in
<span style="color:black">TRANGROUP:378C                 </span><span style="color:navy">cmp     [si+</span><span style="color:#ff8000">1</span><span style="color:navy">], ah      </span>; colon present?
<span style="color:black">TRANGROUP:378F                 </span><span style="color:navy">jz      short </span><span style="color:gray">movedrive </span>; yes, just move it
<span style="color:black">TRANGROUP:3791
TRANGROUP:3791 </span><span style="color:gray">adddrive</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3791                 </span><span style="color:navy">mov     al, [ds:</span>CURDRV<span style="color:navy">] </span>; get current drive
<span style="color:black">TRANGROUP:3794                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">41h </span><span style="color:gray">; &#039;A&#039;   </span>; convert to uppercase letter
<span style="color:black">TRANGROUP:3796                 </span><span style="color:navy">stosw                   </span>; store d:
<span style="color:black">TRANGROUP:3797                 </span><span style="color:navy">jmp     short </span><span style="color:gray">checkpath
</span><span style="color:black">TRANGROUP:3799 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3799
TRANGROUP:3799 </span><span style="color:gray">movedrive</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3799                 </span><span style="color:navy">lodsw
</span><span style="color:black">TRANGROUP:379A                 </span><span style="color:navy">stosw
</span><span style="color:black">TRANGROUP:379B                 </span><span style="color:navy">sub     cx, </span><span style="color:#ff8000">2           </span>; 2 bytes less to move
<span style="color:black">TRANGROUP:379E
TRANGROUP:379E </span><span style="color:gray">checkpath</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:379E                 </span><span style="color:navy">or      al, </span><span style="color:green">20h
</span><span style="color:black">TRANGROUP:37A0                 </span><span style="color:navy">mov     dl, al
</span><span style="color:black">TRANGROUP:37A2                 </span><span style="color:navy">sub     dl, </span><span style="color:green">60h         </span>; &#039;a&#039;-1
<span style="color:black">TRANGROUP:37A5                 </span><span style="color:navy">mov     al, [ds:</span>psep_char<span style="color:navy">]
</span><span style="color:black">TRANGROUP:37A8                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:37A9                 </span><span style="color:navy">cmp     cx, </span><span style="color:#ff8000">1           </span>; is there room for path char?
<span style="color:black">TRANGROUP:37AC                 </span><span style="color:navy">jb      short </span><span style="color:gray">addpath   </span>; no, go add path
<span style="color:black">TRANGROUP:37AE                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:37AF                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:37B0                 </span><span style="color:navy">cmp     al, [ds:</span>psep_char<span style="color:navy">] </span>; is there a path separator?
<span style="color:black">TRANGROUP:37B4                 </span><span style="color:navy">jz      short </span><span style="color:gray">movepath  </span>; yes, go move remainder of path
<span style="color:black">TRANGROUP:37B6                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:37B7                 </span><span style="color:navy">dec     si              </span>; undo the lodsb
<span style="color:black">TRANGROUP:37B8
TRANGROUP:37B8 </span><span style="color:gray">addpath</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:37B8                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:37B9                 </span><span style="color:navy">mov     si, di          </span>; remainder of buffer
<span style="color:black">TRANGROUP:37BB                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4700h
</span><span style="color:black">TRANGROUP:37BE                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET CURRENT DIRECTORY
<span style="color:black">TRANGROUP:37BE                                         </span>; DL = drive (0=default, 1=A, etc.)
<span style="color:black">TRANGROUP:37BE                                         </span>; DS:SI points to 64-byte buffer area
<span style="color:black">TRANGROUP:37C0                 </span><span style="color:navy">mov     di, si
</span><span style="color:black">TRANGROUP:37C2                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:37C3                 </span><span style="color:navy">mov     al, [ds:</span>psep_char<span style="color:navy">]
</span><span style="color:black">TRANGROUP:37C6                 </span><span style="color:navy">cmp     [byte ptr di], </span><span style="color:#ff8000">0 </span>; root (empty dir string)?
<span style="color:black">TRANGROUP:37C9                 </span><span style="color:navy">jz      short </span><span style="color:gray">movepath  </span>; yes, no need for path char
<span style="color:black">TRANGROUP:37CB
TRANGROUP:37CB </span><span style="color:gray">scanend</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:37CB                 </span><span style="color:navy">cmp     [byte ptr di], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:37CE                 </span><span style="color:navy">jz      short </span><span style="color:gray">foundend
</span><span style="color:black">TRANGROUP:37D0                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:37D1                 </span><span style="color:navy">jmp     short </span><span style="color:gray">scanend
</span><span style="color:black">TRANGROUP:37D3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:37D3
TRANGROUP:37D3 </span><span style="color:gray">foundend</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:37D3                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:37D4
TRANGROUP:37D4 </span><span style="color:gray">movepath</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:37D4                 </span><span style="color:navy">cmp     [si], al        </span>; first char a path char?
<span style="color:black">TRANGROUP:37D6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">copypath  </span>; no
<span style="color:black">TRANGROUP:37D8                 </span><span style="color:navy">inc     si              </span>; move past leading char
<span style="color:black">TRANGROUP:37D9                 </span><span style="color:navy">dec     cx              </span>; drop from count
<span style="color:black">TRANGROUP:37DA
TRANGROUP:37DA </span><span style="color:gray">copypath</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:37DA                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">_copydone </span>; no chars to move!
<span style="color:black">TRANGROUP:37DC                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:37DE
TRANGROUP:37DE </span><span style="color:gray">_copydone</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:37DE                 </span><span style="color:navy">jmp     </span><span style="color:gray">path_success
</span><span style="color:black">TRANGROUP:37E1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:37E1
TRANGROUP:37E1 </span><span style="color:gray">path_noinit</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:37E1                 </span><span style="color:navy">test    [ds:</span>ARGV0_ARG_FLAGS<span style="color:navy">], </span><span style="color:green">4 </span>; [ARG+ARGV_ELE.argflags],4 ; path_sep
<span style="color:black">TRANGROUP:37E1                                         </span>; test ds:arg.argv[0].argflags, MASK path_sep
<span style="color:black">TRANGROUP:37E6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">path_failure
</span><span style="color:black">TRANGROUP:37E8                 </span><span style="color:navy">mov     bh, &#039;</span><span style="color:green">;&#039;         </span>; PATH_SEP_CHAR
<span style="color:black">TRANGROUP:37EA                 </span><span style="color:navy">mov     dx, [ds:</span>ARGV0_ARGSTARTEL<span style="color:navy">] </span>; [ARG+ARGV_ELE.argstartel]
<span style="color:black">TRANGROUP:37EA                                         </span>; mov dx,ds:arg.argv[0].argstartel
<span style="color:black">TRANGROUP:37EE                 </span><span style="color:navy">sub     dx, [ds:</span>ARG_ARGV<span style="color:navy">]
</span><span style="color:black">TRANGROUP:37F2                 </span><span style="color:navy">add     dx, offset </span>EXECPATH
<span style="color:black">TRANGROUP:37F6
TRANGROUP:37F6 </span><span style="color:gray">path_loop</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:37F6                 </span><span style="color:navy">call    </span>path_crunch     ; pcrunch (EXECPATH, pathinfo)
<span style="color:black">TRANGROUP:37F9                 </span><span style="color:navy">mov     bp, ax          </span>; save filetype code
<span style="color:black">TRANGROUP:37FB                 </span><span style="color:navy">lahf
</span><span style="color:black">TRANGROUP:37FC                 </span><span style="color:navy">or      bp, bp          </span>; did path_crunch find anything?
<span style="color:black">TRANGROUP:37FE                 </span><span style="color:navy">jnz     short </span><span style="color:gray">path_found
</span><span style="color:black">TRANGROUP:3800                 </span><span style="color:navy">sahf
</span><span style="color:black">TRANGROUP:3801                 </span><span style="color:navy">jnb     short </span><span style="color:gray">path_loop </span>; is there anything left to the path?
<span style="color:black">TRANGROUP:3803
TRANGROUP:3803 </span><span style="color:gray">path_failure</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3803                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:3805                 </span><span style="color:navy">jmp     </span><span style="color:gray">path_exit
</span><span style="color:black">TRANGROUP:3808 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3808
TRANGROUP:3808 </span><span style="color:gray">path_found</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3808                 </span><span style="color:navy">mov     di, offset </span>EXECPATH
<span style="color:black">TRANGROUP:380B                 </span><span style="color:navy">mov     cx, [ds:</span>pathinfo<span style="color:navy">+</span><span style="color:green">4</span><span style="color:navy">] </span>; &quot;new&quot; pointer -- end of string
<span style="color:black">TRANGROUP:380F                 </span><span style="color:navy">mov     si, [ds:</span>pathinfo<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">] </span>; &quot;old&quot; pointer -- beginning of string
<span style="color:black">TRANGROUP:3813                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:3814                 </span><span style="color:navy">push    [ds:</span>pathinfo<span style="color:navy">]   </span>; push word [pathinfo+0]
<span style="color:black">TRANGROUP:3818                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:3819                 </span><span style="color:navy">cmp     [byte ptr es:si+</span><span style="color:#ff8000">2</span><span style="color:navy">], &#039;</span><span style="color:green">.&#039; </span>; Look for Current dir at start of path
<span style="color:black">TRANGROUP:381E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">path_cpy
</span><span style="color:black">TRANGROUP:3820                 </span><span style="color:navy">cmp     [byte ptr es:si+</span><span style="color:#ff8000">1</span><span style="color:navy">], &#039;</span><span style="color:green">:&#039; </span>; does path have drive letter?
<span style="color:black">TRANGROUP:3825                 </span><span style="color:navy">jnz     short </span><span style="color:gray">path_cpy  </span>; no, copy the path string
<span style="color:black">TRANGROUP:3827                 </span><span style="color:navy">push    cx              </span>; Save pointer to end of string
<span style="color:black">TRANGROUP:3828                 </span><span style="color:navy">mov     al, [es:si]     </span>; Copy drive letter, :, and root char to EXECPATH
<span style="color:black">TRANGROUP:382B                 </span><span style="color:navy">mov     [di], al
</span><span style="color:black">TRANGROUP:382D                 </span><span style="color:navy">mov     al, [es:si+</span><span style="color:#ff8000">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:3831                 </span><span style="color:navy">mov     [di+</span><span style="color:#ff8000">1</span><span style="color:navy">], al
</span><span style="color:black">TRANGROUP:3834                 </span><span style="color:navy">mov     al, [ds:</span>psep_char<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3837                 </span><span style="color:navy">mov     [di+</span><span style="color:#ff8000">2</span><span style="color:navy">], al
</span><span style="color:black">TRANGROUP:383A                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:383B                 </span><span style="color:navy">mov     dl, [es:si]     </span>; Convert device letter for cur dir
<span style="color:black">TRANGROUP:383E                 </span><span style="color:navy">or      dl, </span><span style="color:green">20h
</span><span style="color:black">TRANGROUP:3841                 </span><span style="color:navy">sub     dl, </span><span style="color:green">60h         </span>; &#039;a&#039;-1
<span style="color:black">TRANGROUP:3844                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:3846                 </span><span style="color:navy">add     si, </span><span style="color:#ff8000">3           </span>; Don&#039;t wipe out drive and root info
<span style="color:black">TRANGROUP:3849                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4700h
</span><span style="color:black">TRANGROUP:384C                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET CURRENT DIRECTORY
<span style="color:black">TRANGROUP:384C                                         </span>; DL = drive (0=default, 1=A, etc.)
<span style="color:black">TRANGROUP:384C                                         </span>; DS:SI points to 64-byte buffer area
<span style="color:black">TRANGROUP:384E                 </span><span style="color:navy">call    </span>dstrlen
<span style="color:black">TRANGROUP:3851                 </span><span style="color:navy">add     si, cx          </span>; Don&#039;t copy over drive and root info
<span style="color:black">TRANGROUP:3853                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:3854                 </span><span style="color:navy">mov     di, si
</span><span style="color:black">TRANGROUP:3856                 </span><span style="color:navy">pop     si              </span>; Restore pointer to begining of string
<span style="color:black">TRANGROUP:3857                 </span><span style="color:navy">add     si, </span><span style="color:#ff8000">3           </span>; Point past drive letter, :, .
<span style="color:black">TRANGROUP:385A                 </span><span style="color:navy">pop     cx              </span>; Restore pointer to end of string
<span style="color:black">TRANGROUP:385B
TRANGROUP:385B </span><span style="color:gray">path_cpy</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:385B                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:385C                 </span><span style="color:navy">sub     cx, si
</span><span style="color:black">TRANGROUP:385E                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:385F                 </span><span style="color:navy">push    [ds:</span>pathinfo<span style="color:navy">]   </span>; push word [pathinfo+0]
<span style="color:black">TRANGROUP:3863                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:3864                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:3865
TRANGROUP:3865 </span><span style="color:gray">kloop</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3865                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:3866                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:3867                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:386A                 </span><span style="color:navy">jz      short </span><span style="color:gray">_notkanj1
</span><span style="color:black">TRANGROUP:386C                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:386D                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">popdone
</span><span style="color:black">TRANGROUP:386F                 </span><span style="color:navy">movsb
</span><span style="color:black">TRANGROUP:3870                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:3871                 </span><span style="color:navy">cmp     cx, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:3874                 </span><span style="color:navy">ja      short </span><span style="color:gray">kloop
</span><span style="color:black">TRANGROUP:3876
TRANGROUP:3876 </span><span style="color:gray">popdone</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3876                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:3877                 </span><span style="color:navy">mov     al, [ds:</span>psep_char<span style="color:navy">]
</span><span style="color:black">TRANGROUP:387A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">path_store
</span><span style="color:black">TRANGROUP:387C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:387C
TRANGROUP:387C </span><span style="color:gray">_notkanj1</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:387C                 </span><span style="color:navy">loop    </span><span style="color:gray">kloop
</span><span style="color:black">TRANGROUP:387E                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:387F                 </span><span style="color:navy">dec     di              </span>; overwrite terminator
<span style="color:black">TRANGROUP:3880                 </span><span style="color:navy">mov     al, [ds:</span>psep_char<span style="color:navy">] </span>; with a pathname separator
<span style="color:black">TRANGROUP:3883                 </span><span style="color:navy">cmp     al, [di-</span><span style="color:green">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:3886                 </span><span style="color:navy">jz      short </span><span style="color:gray">path_success
</span><span style="color:black">TRANGROUP:3888
TRANGROUP:3888 </span><span style="color:gray">path_store</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3888                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:3889
TRANGROUP:3889 </span><span style="color:gray">path_success</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3889                 </span><span style="color:navy">mov     si, offset </span>search_best_buf
<span style="color:black">TRANGROUP:388C                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:388E
TRANGROUP:388E </span><span style="color:gray">path_succ_loop</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:388E                 </span><span style="color:navy">lodsb                   </span>; append winning filename to path
<span style="color:black">TRANGROUP:388F                 </span><span style="color:navy">stosb                   </span>; (including terminating null)
<span style="color:black">TRANGROUP:3890                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:3892                 </span><span style="color:navy">jnz     short </span><span style="color:gray">path_succ_loop
</span><span style="color:black">TRANGROUP:3894                 </span><span style="color:navy">mov     ax, bp
</span><span style="color:black">TRANGROUP:3896
TRANGROUP:3896 </span><span style="color:gray">path_exit</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3896                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:3897                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:3898                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:3899                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:389A                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:389B                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:389C                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:389D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:389D </span>endp            path_search
<span style="color:black">TRANGROUP:389D
TRANGROUP:389E
TRANGROUP:389E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:389E
TRANGROUP:389E
TRANGROUP:389E </span>proc            STORE_PCHAR near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:389E                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:389F                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">2Fh </span><span style="color:gray">; &#039;/&#039;
</span><span style="color:black">TRANGROUP:38A1                 </span><span style="color:navy">call    </span>pathchrcmp
<span style="color:black">TRANGROUP:38A4                 </span><span style="color:navy">jz      short </span><span style="color:gray">STORE_SLASH
</span><span style="color:black">TRANGROUP:38A6                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">5Ch </span><span style="color:gray">; &#039;\&#039;
</span><span style="color:black">TRANGROUP:38A8                 </span><span style="color:navy">mov     [ds:</span>psep_char<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:38AB                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:38AC                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:38AD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:38AD
TRANGROUP:38AD </span><span style="color:gray">STORE_SLASH</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:38AD                 </span><span style="color:navy">mov     [ds:</span>psep_char<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:38B0                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:38B1                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:38B1 </span>endp            STORE_PCHAR
<span style="color:black">TRANGROUP:38B1
TRANGROUP:38B2
TRANGROUP:38B2 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:38B2
TRANGROUP:38B2
TRANGROUP:38B2 </span>proc            path_crunch near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:38B2                 </span><span style="color:navy">push    bx              </span>; BH = additional terminator character
<span style="color:black">TRANGROUP:38B3                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:38B4                 </span><span style="color:navy">push    dx              </span>; pointer to stripped filename
<span style="color:black">TRANGROUP:38B5                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:38B6                 </span><span style="color:navy">push    si              </span>; pointer into pathstring to be dissected
<span style="color:black">TRANGROUP:38B7                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:38B8                 </span><span style="color:navy">call    </span>STORE_PCHAR     ; figure out pathname separator
<span style="color:black">TRANGROUP:38BB                 </span><span style="color:navy">mov     di, offset </span>TPBUF ; destination of concatenated string
<span style="color:black">TRANGROUP:38BE                 </span><span style="color:navy">mov     si, [ds:</span>pathinfo<span style="color:navy">+</span><span style="color:green">4</span><span style="color:navy">] </span>; &quot;new&quot; pointer to start with
<span style="color:black">TRANGROUP:38C2                 </span><span style="color:navy">mov     [ds:</span>pathinfo<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], si </span>; becomes &quot;old&quot; pointer
<span style="color:black">TRANGROUP:38C6                 </span><span style="color:navy">push    ds              </span>; save old segment pointer
<span style="color:black">TRANGROUP:38C7                 </span><span style="color:navy">push    [ds:</span>pathinfo<span style="color:navy">]   </span>; push word [pathinfo+0]
<span style="color:black">TRANGROUP:38CB                 </span><span style="color:navy">pop     ds              </span>; replace with pointer to userpath&#039;s segment
<span style="color:black">TRANGROUP:38CC                 </span><span style="color:navy">xor     cl, cl          </span>; clear flag for later use
<span style="color:black">TRANGROUP:38CE
TRANGROUP:38CE </span><span style="color:gray">path_cr_copy</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:38CE                 </span><span style="color:navy">lodsb                   </span>; get a pathname byte
<span style="color:black">TRANGROUP:38CF                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:38D1                 </span><span style="color:navy">jz      short </span><span style="color:gray">path_seg  </span>; null terminates segment &amp; pathstring
<span style="color:black">TRANGROUP:38D3                 </span><span style="color:navy">cmp     al, bh
</span><span style="color:black">TRANGROUP:38D5                 </span><span style="color:navy">jz      short </span><span style="color:gray">path_seg  </span>; BH terminates a pathstring segment
<span style="color:black">TRANGROUP:38D7                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:38DA                 </span><span style="color:navy">jz      short </span><span style="color:gray">_notkanj2
</span><span style="color:black">TRANGROUP:38DC                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:38DD                 </span><span style="color:navy">movsb
</span><span style="color:black">TRANGROUP:38DE                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">1           </span>; CL=1 means latest stored char is DBCS
<span style="color:black">TRANGROUP:38E0                 </span><span style="color:navy">jmp     short </span><span style="color:gray">path_cr_copy
</span><span style="color:black">TRANGROUP:38E2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:38E2
TRANGROUP:38E2 </span><span style="color:gray">_notkanj2</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:38E2                 </span><span style="color:navy">xor     cl, cl          </span>; CL=0 means latest stored char is SBCS
<span style="color:black">TRANGROUP:38E4                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:38E5                 </span><span style="color:navy">jmp     short </span><span style="color:gray">path_cr_copy
</span><span style="color:black">TRANGROUP:38E7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:38E7
TRANGROUP:38E7 </span><span style="color:gray">path_seg</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:38E7                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:38E8                 </span><span style="color:navy">mov     [ds:</span>pathinfo<span style="color:navy">+</span><span style="color:green">4</span><span style="color:navy">], si </span>; save &quot;new&quot; pointer for next time
<span style="color:black">TRANGROUP:38EC                 </span><span style="color:navy">mov     bl, al
</span><span style="color:black">TRANGROUP:38EE                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:38F0                 </span><span style="color:navy">cmp     di, offset </span>TPBUF ; was there really anything in pathstr?
<span style="color:black">TRANGROUP:38F4                 </span><span style="color:navy">jz      short </span><span style="color:gray">path_cr_leave
</span><span style="color:black">TRANGROUP:38F6                 </span><span style="color:navy">mov     al, [ds:</span>psep_char<span style="color:navy">]
</span><span style="color:black">TRANGROUP:38F9                 </span><span style="color:navy">or      cl, cl
</span><span style="color:black">TRANGROUP:38FB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">path_cr_store </span>; this is a trailing byte of ECS code
<span style="color:black">TRANGROUP:38FD                 </span><span style="color:navy">cmp     al, [di-</span><span style="color:green">1</span><span style="color:navy">]      </span>; add pathname separator for suffix
<span style="color:black">TRANGROUP:3900                 </span><span style="color:navy">jz      short </span><span style="color:gray">path_cr_l1
</span><span style="color:black">TRANGROUP:3902
TRANGROUP:3902 </span><span style="color:gray">path_cr_store</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3902                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:3903
TRANGROUP:3903 </span><span style="color:gray">path_cr_l1</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3903                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">TRANGROUP:3905
TRANGROUP:3905 </span><span style="color:gray">path_cr_l2</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3905                 </span><span style="color:navy">lodsb                   </span>; tack the stripped filename onto
<span style="color:black">TRANGROUP:3905                                         </span>; the end of the path, up to and
<span style="color:black">TRANGROUP:3906                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:3907                 </span><span style="color:navy">or      al, al          </span>; including the terminating null
<span style="color:black">TRANGROUP:3909                 </span><span style="color:navy">jnz     short </span><span style="color:gray">path_cr_l2
</span><span style="color:black">TRANGROUP:390B                 </span><span style="color:navy">mov     dx, offset </span>TPBUF ; and look for an appropriate file
<span style="color:black">TRANGROUP:390E                 </span><span style="color:navy">mov     [ds:</span>search_error<span style="color:navy">], offset </span>BADPMES_PTR
<span style="color:black">TRANGROUP:3914                 </span><span style="color:navy">call    </span>PSEARCH         ; results are in AX &amp; search_best_buf
<span style="color:black">TRANGROUP:3917
TRANGROUP:3917 </span><span style="color:gray">path_cr_leave</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3917                 </span><span style="color:navy">or      bl, bl
</span><span style="color:black">TRANGROUP:3919                 </span><span style="color:navy">jz      short </span><span style="color:gray">path_cr_empty </span>; null in BL means all gone
<span style="color:black">TRANGROUP:391B                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:391C                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:391D                 </span><span style="color:navy">jmp     short </span><span style="color:gray">path_cr_exit
</span><span style="color:black">TRANGROUP:391F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:391F
TRANGROUP:391F </span><span style="color:gray">path_cr_empty</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:391F                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:3920                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:3921
TRANGROUP:3921 </span><span style="color:gray">path_cr_exit</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3921                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:3922                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:3923                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:3924                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:3925                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:3926                 </span><span style="color:navy">retn                    </span>; AX = non-zero (file type), zero (nothing found)
<span style="color:black">TRANGROUP:3926 </span>endp            path_crunch
<span style="color:black">TRANGROUP:3926
TRANGROUP:3927
TRANGROUP:3927 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3927
TRANGROUP:3927
TRANGROUP:3927 </span>proc            PSEARCH near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3927                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:3928                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:3929                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:392A                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:392B                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:392C                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:392D                 </span><span style="color:navy">mov     di, dx
</span><span style="color:black">TRANGROUP:392F                 </span><span style="color:navy">mov     si, offset </span>search_curdir_buf
<span style="color:black">TRANGROUP:3932                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:3934                 </span><span style="color:navy">cmp     [byte ptr di+</span><span style="color:#ff8000">1</span><span style="color:navy">], &#039;</span><span style="color:green">:&#039; </span>; is there a drive spec?
<span style="color:black">TRANGROUP:3938                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SEARCH_DIR_CHECK </span>; no
<span style="color:black">TRANGROUP:393A                 </span><span style="color:navy">mov     dl, [di]
</span><span style="color:black">TRANGROUP:393C                 </span><span style="color:navy">and     dl, </span><span style="color:green">0DFh        </span>; uppercase the drive letter
<span style="color:black">TRANGROUP:393F                 </span><span style="color:navy">sub     dl, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;   </span>; and convert to drive number
<span style="color:black">TRANGROUP:3942
TRANGROUP:3942 </span><span style="color:gray">SEARCH_DIR_CHECK</span><span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3942                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4700h
</span><span style="color:black">TRANGROUP:3945                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET CURRENT DIRECTORY
<span style="color:black">TRANGROUP:3945                                         </span>; DL = drive (0=default, 1=A, etc.)
<span style="color:black">TRANGROUP:3945                                         </span>; DS:SI points to 64-byte buffer area
<span style="color:black">TRANGROUP:3947                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:3948                 </span><span style="color:navy">jb      short </span><span style="color:gray">SEARCH_INVALID_DRIVE
</span><span style="color:black">TRANGROUP:394A                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">13h
</span><span style="color:black">TRANGROUP:394D                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4E00h
</span><span style="color:black">TRANGROUP:3950                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FIND FIRST ASCIZ (FINDFIRST)
<span style="color:black">TRANGROUP:3950                                         </span>; CX = search attributes
<span style="color:black">TRANGROUP:3950                                         </span>; DS:DX -&gt; ASCIZ filespec
<span style="color:black">TRANGROUP:3950                                         </span>; (drive, path, and wildcards allowed)
<span style="color:black">TRANGROUP:3952                 </span><span style="color:navy">jb      short </span><span style="color:gray">SEARCH_NO_FILE
</span><span style="color:black">TRANGROUP:3954                 </span><span style="color:navy">mov     [ds:</span>search_best<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; SEARCH_FILE_NOT_FOUND ; 0
<span style="color:black">TRANGROUP:3959                 </span><span style="color:navy">mov     [ds:</span>search_best_buf<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:395E
TRANGROUP:395E </span><span style="color:gray">SEARCH_LOOP</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:395E                 </span><span style="color:navy">call    </span>SEARCH_FTYPE    ; determine if .com, &amp;c...
<span style="color:black">TRANGROUP:3961                 </span><span style="color:navy">cmp     al, [ds:</span>search_best<span style="color:navy">] </span>; better than what we&#039;ve found so far?
<span style="color:black">TRANGROUP:3965                 </span><span style="color:navy">jle     short </span><span style="color:gray">SEARCH_NEXT
</span><span style="color:black">TRANGROUP:3967                 </span><span style="color:navy">mov     [ds:</span>search_best<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:396A                 </span><span style="color:navy">mov     si, (offset </span>FBUF<span style="color:navy">+</span><span style="color:green">1Eh</span><span style="color:navy">) </span>; FBUF+FIND_BUF.PNAME ; FBUF+30
<span style="color:black">TRANGROUP:396D                 </span><span style="color:navy">mov     di, offset </span>search_best_buf
<span style="color:black">TRANGROUP:3970                 </span><span style="color:navy">mov     cx, </span><span style="color:green">13          </span>; FNAME_MAX_LEN
<span style="color:black">TRANGROUP:3973                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:3974                 </span><span style="color:navy">rep movsb               </span>; save complete pathname representation
<span style="color:black">TRANGROUP:3976                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">8           </span>; SEARCH_COM ; have we found the best of all?
<span style="color:black">TRANGROUP:3978                 </span><span style="color:navy">jz      short </span><span style="color:gray">SEARCH_DONE </span>; yes
<span style="color:black">TRANGROUP:397A
TRANGROUP:397A </span><span style="color:gray">SEARCH_NEXT</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:397A                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">13h         </span>; search_attr
<span style="color:black">TRANGROUP:397D                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4F00h
</span><span style="color:black">TRANGROUP:3980                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - FIND NEXT ASCIZ (FINDNEXT)
<span style="color:black">TRANGROUP:3980                                         </span>; [DTA] = data block from
<span style="color:black">TRANGROUP:3980                                         </span>; last AH = 4Eh/4Fh call
<span style="color:black">TRANGROUP:3982                 </span><span style="color:navy">jnb     short </span><span style="color:gray">SEARCH_LOOP
</span><span style="color:black">TRANGROUP:3984
TRANGROUP:3984 </span><span style="color:gray">SEARCH_DONE</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3984                 </span><span style="color:navy">mov     al, [ds:</span>search_best<span style="color:navy">] </span>; pick best to return with
<span style="color:black">TRANGROUP:3987                 </span><span style="color:navy">cmp     [ds:</span>ext_entered<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; byte ; Did user request a specific ext?
<span style="color:black">TRANGROUP:398C                 </span><span style="color:navy">jz      short </span><span style="color:gray">SEARCH_EXIT </span>; no - exit
<span style="color:black">TRANGROUP:398E                 </span><span style="color:navy">mov     al, [ds:</span>ext_entered<span style="color:navy">] </span>; yes - get the real file type back
<span style="color:black">TRANGROUP:3991                 </span><span style="color:navy">mov     [ds:</span>search_best<span style="color:navy">], al </span>; save the real file type
<span style="color:black">TRANGROUP:3994                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SEARCH_EXIT
</span><span style="color:black">TRANGROUP:3996 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3996
TRANGROUP:3996 </span><span style="color:gray">SEARCH_INVALID_DRIVE</span><span style="color:navy">:                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3996                 </span><span style="color:navy">mov     dx, [ds:</span>search_error<span style="color:navy">]
</span><span style="color:black">TRANGROUP:399A                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:399D
TRANGROUP:399D </span><span style="color:gray">SEARCH_NO_FILE</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:399D                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">0           </span>; SEARCH_FILE_NOT_FOUND ; = 0
<span style="color:black">TRANGROUP:39A0
TRANGROUP:39A0 </span><span style="color:gray">SEARCH_EXIT</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:39A0                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:39A1                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:39A2                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:39A3                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:39A4                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:39A5                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:39A5 </span>endp            PSEARCH
<span style="color:black">TRANGROUP:39A5
TRANGROUP:39A6
TRANGROUP:39A6 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:39A6
TRANGROUP:39A6
TRANGROUP:39A6 </span>proc            SEARCH_FTYPE near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:39A6                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:39A7                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:39A8                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:39AB                 </span><span style="color:navy">mov     di, (offset </span>FBUF<span style="color:navy">+</span><span style="color:green">1Eh</span><span style="color:navy">) </span>; FBUF+FIND_BUF.PNAME ; FBUF+30
<span style="color:black">TRANGROUP:39AE                 </span><span style="color:navy">mov     cx, </span><span style="color:green">13
</span><span style="color:black">TRANGROUP:39B1                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:39B2                 </span><span style="color:navy">repne scasb             </span>; search for the terminating null
<span style="color:black">TRANGROUP:39B4                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FTYPE_EXIT </span>; weird... no null byte at end
<span style="color:black">TRANGROUP:39B6                 </span><span style="color:navy">sub     di, </span><span style="color:#ff8000">5           </span>; . + E + X + T + NULL
<span style="color:black">TRANGROUP:39B9                 </span><span style="color:navy">mov     si, offset </span>comext <span style="color:gray">; &quot;.COM&quot;
</span><span style="color:black">TRANGROUP:39BC                 </span><span style="color:navy">mov     ax, di
</span><span style="color:black">TRANGROUP:39BE                 </span><span style="color:navy">cmpsw
</span><span style="color:black">TRANGROUP:39BF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FTYPE_EXE
</span><span style="color:black">TRANGROUP:39C1                 </span><span style="color:navy">cmpsw
</span><span style="color:black">TRANGROUP:39C2                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FTYPE_EXE
</span><span style="color:black">TRANGROUP:39C4                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">8           </span>; SEARCH_COM ; success!
<span style="color:black">TRANGROUP:39C7                 </span><span style="color:navy">jmp     short </span><span style="color:gray">FTYPE_EXIT
</span><span style="color:black">TRANGROUP:39C9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:39C9
TRANGROUP:39C9 </span><span style="color:gray">FTYPE_EXE</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:39C9                 </span><span style="color:navy">mov     di, ax
</span><span style="color:black">TRANGROUP:39CB                 </span><span style="color:navy">mov     si, offset </span>exeext <span style="color:gray">; &quot;.EXE&quot;
</span><span style="color:black">TRANGROUP:39CE                 </span><span style="color:navy">cmpsw
</span><span style="color:black">TRANGROUP:39CF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FTYPE_BAT
</span><span style="color:black">TRANGROUP:39D1                 </span><span style="color:navy">cmpsw
</span><span style="color:black">TRANGROUP:39D2                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FTYPE_BAT
</span><span style="color:black">TRANGROUP:39D4                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4           </span>; SEARCH_EXE ; success!
<span style="color:black">TRANGROUP:39D7                 </span><span style="color:navy">jmp     short </span><span style="color:gray">FTYPE_EXIT
</span><span style="color:black">TRANGROUP:39D9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:39D9
TRANGROUP:39D9 </span><span style="color:gray">FTYPE_BAT</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:39D9                 </span><span style="color:navy">mov     di, ax
</span><span style="color:black">TRANGROUP:39DB                 </span><span style="color:navy">mov     si, offset </span>batext <span style="color:gray">; &quot;.BAT&quot;
</span><span style="color:black">TRANGROUP:39DE                 </span><span style="color:navy">cmpsw
</span><span style="color:black">TRANGROUP:39DF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FTYPE_FAIL
</span><span style="color:black">TRANGROUP:39E1                 </span><span style="color:navy">cmpsw
</span><span style="color:black">TRANGROUP:39E2                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FTYPE_FAIL
</span><span style="color:black">TRANGROUP:39E4                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2           </span>; SEARCH_BAT ; success!
<span style="color:black">TRANGROUP:39E7                 </span><span style="color:navy">jmp     short </span><span style="color:gray">FTYPE_EXIT
</span><span style="color:black">TRANGROUP:39E9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:39E9
TRANGROUP:39E9 </span><span style="color:gray">FTYPE_FAIL</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:39E9                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">0           </span>; ANULL
<span style="color:black">TRANGROUP:39EC
TRANGROUP:39EC </span><span style="color:gray">FTYPE_EXIT</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:39EC                 </span><span style="color:navy">cmp     [ds:</span>ext_entered<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:39F1                 </span><span style="color:navy">jz      short </span><span style="color:gray">FTYPE_DONE
</span><span style="color:black">TRANGROUP:39F3                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0           </span>; ANULL
<span style="color:black">TRANGROUP:39F6                 </span><span style="color:navy">jz      short </span><span style="color:gray">FTYPE_DONE
</span><span style="color:black">TRANGROUP:39F8                 </span><span style="color:navy">mov     [ds:</span>ext_entered<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:39FB                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">8
</span><span style="color:black">TRANGROUP:39FE
TRANGROUP:39FE </span><span style="color:gray">FTYPE_DONE</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:39FE                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:39FF                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:3A00                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3A00 </span>endp            SEARCH_FTYPE
<span style="color:black">TRANGROUP:3A00
TRANGROUP:3A01
TRANGROUP:3A01 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3A01
TRANGROUP:3A01
TRANGROUP:3A01 </span>proc            STRIP near              <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3A01                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:3A02                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:3A03                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:3A04                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:3A05                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:3A06                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:3A07                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:3A08                 </span><span style="color:navy">mov     [ds:</span>ext_entered<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:3A0D                 </span><span style="color:navy">mov     dx, [ds:</span>ARG_ARGV<span style="color:navy">] </span>; [ARG+ARGV_ELE.argpointer]
<span style="color:black">TRANGROUP:3A11                 </span><span style="color:navy">mov     di, [ds:</span>ARGV0_ARGSTARTEL<span style="color:navy">] </span>; [ARG+ARGV_ELE.argstartel]
<span style="color:black">TRANGROUP:3A15                 </span><span style="color:navy">cmp     [byte ptr di], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:3A18                 </span><span style="color:navy">jz      short </span><span style="color:gray">STRIP_ERROR
</span><span style="color:black">TRANGROUP:3A1A                 </span><span style="color:navy">mov     cx, dx
</span><span style="color:black">TRANGROUP:3A1C                 </span><span style="color:navy">add     cx, [ds:</span>ARGV0_ARGLEN<span style="color:navy">] </span>; [ARG+ARGV_ELE.arglen]
<span style="color:black">TRANGROUP:3A20                 </span><span style="color:navy">sub     cx, di
</span><span style="color:black">TRANGROUP:3A22                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:3A23                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">2Eh </span><span style="color:gray">; &#039;.&#039;
</span><span style="color:black">TRANGROUP:3A25                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:3A26                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:3A28                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">PROCESS_EXT
</span><span style="color:black">TRANGROUP:3A2A                 </span><span style="color:navy">mov     [ds:</span>ext_entered<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:3A2F                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:3A31                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:3A33
TRANGROUP:3A33 </span><span style="color:gray">PROCESS_EXT</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3A33                 </span><span style="color:navy">mov     cx, di
</span><span style="color:black">TRANGROUP:3A35                 </span><span style="color:navy">sub     cx, dx
</span><span style="color:black">TRANGROUP:3A37                 </span><span style="color:navy">sub     bx, </span><span style="color:#ff8000">4
</span><span style="color:black">TRANGROUP:3A3A                 </span><span style="color:navy">cmp     cx, bx
</span><span style="color:black">TRANGROUP:3A3C                 </span><span style="color:navy">jg      short </span><span style="color:gray">STRIP_ERROR
</span><span style="color:black">TRANGROUP:3A3E                 </span><span style="color:navy">mov     di, si
</span><span style="color:black">TRANGROUP:3A40                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">TRANGROUP:3A42                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:3A43                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:3A45                 </span><span style="color:navy">cmp     [ds:</span>ext_entered<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:3A4A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SKIP_WILDS
</span><span style="color:black">TRANGROUP:3A4C                 </span><span style="color:navy">dec     di
</span><span style="color:black">TRANGROUP:3A4D                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:3A4E                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Fh </span><span style="color:gray">; &#039;?&#039;   </span>; WILDCHAR
<span style="color:black">TRANGROUP:3A50                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:3A51                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:3A52                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:3A53                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0           </span>; ANULL
<span style="color:black">TRANGROUP:3A55                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:3A56
TRANGROUP:3A56 </span><span style="color:gray">SKIP_WILDS</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3A56                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:3A57                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:3A58                 </span><span style="color:navy">jmp     short </span><span style="color:gray">STRIP_EXIT
</span><span style="color:black">TRANGROUP:3A5A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3A5A
TRANGROUP:3A5A </span><span style="color:gray">STRIP_ERROR</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3A5A                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:3A5B                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:3A5C
TRANGROUP:3A5C </span><span style="color:gray">STRIP_EXIT</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3A5C                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:3A5D                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:3A5E                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:3A5F                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:3A60                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:3A61                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:3A62                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3A62 </span>endp            STRIP
<span style="color:black">TRANGROUP:3A62
TRANGROUP:3A63
TRANGROUP:3A63 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3A63
TRANGROUP:3A63
TRANGROUP:3A63 </span>proc            SAVE_ARGS near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3A63                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:3A64                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:3A65                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:3A66                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:3A67                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:3A68                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:3A69                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:3A6A                 </span><span style="color:navy">add     bx, </span><span style="color:green">1107        </span>; ARG_UNIT.SIZE+15 ; 1092+15 = 1107
<span style="color:black">TRANGROUP:3A6E                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:black">TRANGROUP:3A70                 </span><span style="color:navy">shr     bx, cl
</span><span style="color:black">TRANGROUP:3A72                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4800h
</span><span style="color:black">TRANGROUP:3A75                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - ALLOCATE MEMORY
<span style="color:black">TRANGROUP:3A75                                         </span>; BX = number of 16-byte paragraphs desired
<span style="color:black">TRANGROUP:3A77                 </span><span style="color:navy">jb      short </span><span style="color:gray">SAVE_ERROR
</span><span style="color:black">TRANGROUP:3A79                 </span><span style="color:navy">mov     bp, ax
</span><span style="color:black">TRANGROUP:3A7B                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:3A7C                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:3A7E                 </span>assume es:nothing
<span style="color:black">TRANGROUP:3A7E                 </span><span style="color:navy">mov     cx, </span><span style="color:green">1092
</span><span style="color:black">TRANGROUP:3A81                 </span><span style="color:navy">xor     di, di
</span><span style="color:black">TRANGROUP:3A83                 </span><span style="color:navy">mov     si, offset </span>ARG_ARGV ; ARG
<span style="color:black">TRANGROUP:3A86                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:3A88                 </span><span style="color:navy">mov     cx, [ds:</span>ARG_ARGVCNT<span style="color:navy">] </span>; [ARG+ARG_UNIT.argvcnt]
<span style="color:black">TRANGROUP:3A8C                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:3A8E                 </span><span style="color:navy">mov     si, offset </span>ARG_ARGV ; ARG
<span style="color:black">TRANGROUP:3A91
TRANGROUP:3A91 </span><span style="color:gray">SAVE_PTR_LOOP</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3A91                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:3A92                 </span><span style="color:navy">jl      short </span><span style="color:gray">SAVE_DONE
</span><span style="color:black">TRANGROUP:3A94                 </span><span style="color:navy">mov     bx, cx
</span><span style="color:black">TRANGROUP:3A96                 </span><span style="color:navy">call    </span>argv_calc
<span style="color:black">TRANGROUP:3A99                 </span><span style="color:navy">mov     dx, [ds:</span>ARG_ARGV<span style="color:navy">+bx] </span>; [ARG+ARGV_ELE.argpointer+bx]
<span style="color:black">TRANGROUP:3A9D                 </span><span style="color:navy">sub     dx, si
</span><span style="color:black">TRANGROUP:3A9F                 </span><span style="color:navy">mov     [es:bx], dx
</span><span style="color:black">TRANGROUP:3AA2                 </span><span style="color:navy">mov     dx, [ds:</span>ARGV0_ARGSTARTEL<span style="color:navy">+bx] </span>; [ARG+ARGV_ELE.argstartel+bx]
<span style="color:black">TRANGROUP:3AA6                 </span><span style="color:navy">sub     dx, si
</span><span style="color:black">TRANGROUP:3AA8                 </span><span style="color:navy">mov     [es:bx+</span><span style="color:#ff8000">3</span><span style="color:navy">], dx   </span>; [es:bx+ARGV_ELE.argstartel]
<span style="color:black">TRANGROUP:3AAC                 </span><span style="color:navy">mov     dx, [ds:</span>ARGV0_OCOMPTR<span style="color:navy">+bx] </span>; [ARG+ARGV_ELE.arg_ocomptr+bx]
<span style="color:black">TRANGROUP:3AB0                 </span><span style="color:navy">sub     dx, si
</span><span style="color:black">TRANGROUP:3AB2                 </span><span style="color:navy">mov     [es:bx+</span><span style="color:#ff8000">9</span><span style="color:navy">], dx   </span>; [es:bx+ARGV_ELE.arg_ocomptr]
<span style="color:black">TRANGROUP:3AB6                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SAVE_PTR_LOOP
</span><span style="color:black">TRANGROUP:3AB8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3AB8
TRANGROUP:3AB8 </span><span style="color:gray">SAVE_DONE</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3AB8                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:3AB9                 </span>assume es:nothing
<span style="color:black">TRANGROUP:3AB9                 </span><span style="color:navy">mov     ax, bp
</span><span style="color:black">TRANGROUP:3ABB                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SAVE_OK
</span><span style="color:black">TRANGROUP:3ABD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3ABD
TRANGROUP:3ABD </span><span style="color:gray">SAVE_ERROR</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3ABD                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:3ABE                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:3ABF                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SAVE_EXIT
</span><span style="color:black">TRANGROUP:3AC1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3AC1
TRANGROUP:3AC1 </span><span style="color:gray">SAVE_OK</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3AC1                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:3AC2                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:3AC3
TRANGROUP:3AC3 </span><span style="color:gray">SAVE_EXIT</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3AC3                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:3AC4                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:3AC5                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:3AC6                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:3AC7                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:3AC8                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:3AC9                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3AC9 </span>endp            SAVE_ARGS
<span style="color:black">TRANGROUP:3AC9
</span><span style="color:maroon">TRANGROUP:3ACA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3ACA
TRANGROUP:3ACA </span>notest2<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3ACA                 </span><span style="color:navy">mov     cx, </span><span style="color:green">11
</span><span style="color:maroon">TRANGROUP:3ACD                 </span><span style="color:navy">mov     si, </span><span style="color:green">5Dh         </span>; FCB+1
<span style="color:maroon">TRANGROUP:3AD0
TRANGROUP:3AD0 </span>ambspec<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3AD0                 </span><span style="color:navy">lodsb
</span><span style="color:maroon">TRANGROUP:3AD1                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Fh </span><span style="color:gray">; &#039;?&#039;
</span><span style="color:maroon">TRANGROUP:3AD3                 </span><span style="color:navy">jnz     short </span>allfil
<span style="color:maroon">TRANGROUP:3AD5                 </span><span style="color:navy">loop    </span>ambspec
<span style="color:maroon">TRANGROUP:3AD7
TRANGROUP:3AD7 </span>allfil<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3AD7                 </span><span style="color:navy">cmp     cx, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:3ADA                 </span><span style="color:navy">jnz     short </span>noprmpt
<span style="color:maroon">TRANGROUP:3ADC
TRANGROUP:3ADC </span>askagn<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3ADC                 </span><span style="color:navy">mov     dx, offset </span>SureMes_Ptr
<span style="color:maroon">TRANGROUP:3ADF                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:3AE2                 </span><span style="color:navy">mov     si, </span><span style="color:green">80h
</span><span style="color:maroon">TRANGROUP:3AE5                 </span><span style="color:navy">mov     dx, si
</span><span style="color:maroon">TRANGROUP:3AE7                 </span><span style="color:navy">mov     [word ptr si], </span><span style="color:green">120
</span><span style="color:maroon">TRANGROUP:3AEB                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0C0Ah
</span><span style="color:maroon">TRANGROUP:3AEE                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - CLEAR KEYBOARD BUFFER
<span style="color:maroon">TRANGROUP:3AEE                                         </span>; AL must be 01h, 06h, 07h, 08h, or 0Ah.
<span style="color:maroon">TRANGROUP:3AF0                 </span><span style="color:navy">lodsw
</span><span style="color:maroon">TRANGROUP:3AF1                 </span><span style="color:navy">or      ah, ah
</span><span style="color:maroon">TRANGROUP:3AF3                 </span><span style="color:navy">jz      short </span>askagn
<span style="color:maroon">TRANGROUP:3AF5                 </span><span style="color:navy">call    </span>scanoff
<span style="color:maroon">TRANGROUP:3AF8                 </span><span style="color:navy">call    </span>char_in_xlat
<span style="color:maroon">TRANGROUP:3AFB                 </span><span style="color:navy">jnb     short </span>check_yn
<span style="color:maroon">TRANGROUP:3AFD
TRANGROUP:3AFD </span>answ_no<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3AFD                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:3AFE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3AFE
TRANGROUP:3AFE </span>check_yn<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3AFE                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:3B00                 </span><span style="color:navy">jz      short </span>answ_no
<span style="color:maroon">TRANGROUP:3B02                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:3B04                 </span><span style="color:navy">pushf
</span><span style="color:maroon">TRANGROUP:3B05                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:maroon">TRANGROUP:3B08                 </span><span style="color:navy">popf
</span><span style="color:maroon">TRANGROUP:3B09                 </span><span style="color:navy">jnz     short </span>askagn
<span style="color:maroon">TRANGROUP:3B0B
TRANGROUP:3B0B </span>noprmpt<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3B0B                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">13h         </span>; FCB_Delete
<span style="color:maroon">TRANGROUP:3B0D                 </span><span style="color:navy">mov     dx, </span><span style="color:green">5Ch         </span>; FCB
<span style="color:maroon">TRANGROUP:3B10                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - DELETE FILE via FCB
<span style="color:maroon">TRANGROUP:3B10                                         </span>; DS:DX -&gt; FCB with filename field filled with
<span style="color:maroon">TRANGROUP:3B10                                         </span>; template for  deletion (&#039;?&#039; wildcard allowed, but not &#039;*&#039;)
<span style="color:maroon">TRANGROUP:3B10                                         </span>; Return: AL = 00h file found, FFh file not found
<span style="color:maroon">TRANGROUP:3B12                 </span><span style="color:navy">inc     al
</span><span style="color:maroon">TRANGROUP:3B14                 </span><span style="color:navy">jz      short </span>eraerr
<span style="color:maroon">TRANGROUP:3B16                 </span><span style="color:navy">call    </span>RestUDir
<span style="color:maroon">TRANGROUP:3B19                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:3B1A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3B1A
TRANGROUP:3B1A </span>eraerr<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3B1A                 </span><span style="color:navy">call    </span>Set_Ext_Error_Msg
<span style="color:maroon">TRANGROUP:3B1D                 </span><span style="color:navy">push    dx
</span><span style="color:maroon">TRANGROUP:3B1E                 </span><span style="color:navy">call    </span>RestUDir
<span style="color:maroon">TRANGROUP:3B21                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">TRANGROUP:3B22                 </span><span style="color:navy">cmp     [ds:</span>extend_buf_ptr<span style="color:navy">], </span><span style="color:green">18 </span>; ERROR_NO_MORE_FILES
<span style="color:maroon">TRANGROUP:3B27                 </span><span style="color:navy">jnz     short </span>cerrorj2
<span style="color:maroon">TRANGROUP:3B29                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], </span><span style="color:#ff8000">2 </span>; ERROR_FILE_NOT_FOUND
<span style="color:maroon">TRANGROUP:3B2F
TRANGROUP:3B2F </span>cerrorj2<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3B2F                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:3B32 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3B32
TRANGROUP:3B32 </span>slashp_erase<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3B32                 </span><span style="color:navy">call    </span>build_dir_string
<span style="color:maroon">TRANGROUP:3B35                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">1Ah         </span>; Set_DMA
<span style="color:maroon">TRANGROUP:3B37                 </span><span style="color:navy">mov     dx, offset </span>DESTDIR
<span style="color:maroon">TRANGROUP:3B3A                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET DISK TRANSFER AREA ADDRESS
<span style="color:maroon">TRANGROUP:3B3A                                         </span>; DS:DX -&gt; disk transfer buffer
<span style="color:maroon">TRANGROUP:3B3C                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">11h         </span>; Dir_Search_First
<span style="color:maroon">TRANGROUP:3B3E                 </span><span style="color:navy">mov     dx, </span><span style="color:green">5Ch         </span>; FCB
<span style="color:maroon">TRANGROUP:3B41                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SEARCH FIRST USING FCB
<span style="color:maroon">TRANGROUP:3B41                                         </span>; DS:DX -&gt; FCB
<span style="color:maroon">TRANGROUP:3B43                 </span><span style="color:navy">inc     al
</span><span style="color:maroon">TRANGROUP:3B45                 </span><span style="color:navy">jz      short </span>eraerr
<span style="color:maroon">TRANGROUP:3B47
TRANGROUP:3B47 </span>delete_prompt_loop<span style="color:navy">:                     </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3B47                 </span><span style="color:navy">mov     si, (offset </span>DESTDIR<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">)
</span><span style="color:maroon">TRANGROUP:3B4A                 </span><span style="color:navy">mov     di, offset </span>DEST
<span style="color:maroon">TRANGROUP:3B4D                 </span><span style="color:navy">mov     al, [ds:</span>DIRCHAR<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:3B50                 </span><span style="color:navy">stosb
</span><span style="color:maroon">TRANGROUP:3B51                 </span><span style="color:navy">call    </span>FCB_TO_ASCZ
<span style="color:maroon">TRANGROUP:3B54
TRANGROUP:3B54 </span>slashp_askagn<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3B54                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:maroon">TRANGROUP:3B57                 </span><span style="color:navy">mov     dx, offset </span>BWDBUF
<span style="color:maroon">TRANGROUP:3B5A                 </span><span style="color:navy">mov     bx, dx
</span><span style="color:maroon">TRANGROUP:3B5C                 </span><span style="color:navy">cmp     [byte ptr bx+</span><span style="color:#ff8000">3</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; END_OF_LINE_OUT
<span style="color:maroon">TRANGROUP:3B60                 </span><span style="color:navy">jnz     short </span>not_del_root
<span style="color:maroon">TRANGROUP:3B62                 </span><span style="color:navy">mov     [byte ptr bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:3B66
TRANGROUP:3B66 </span>not_del_root<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3B66                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], dx
</span><span style="color:maroon">TRANGROUP:3B6A                 </span><span style="color:navy">mov     dx, offset </span>string_buf_ptr
<span style="color:maroon">TRANGROUP:3B6D                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:3B70                 </span><span style="color:navy">mov     dx, offset </span>DEST
<span style="color:maroon">TRANGROUP:3B73                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], dx
</span><span style="color:maroon">TRANGROUP:3B77                 </span><span style="color:navy">mov     dx, offset </span>string_buf_ptr
<span style="color:maroon">TRANGROUP:3B7A                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:3B7D                 </span><span style="color:navy">mov     dx, offset </span>Del_Y_N_Ptr
<span style="color:maroon">TRANGROUP:3B80                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:3B83                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0C01h       </span>; (STD_CON_INPUT_FLUSH&lt;&lt;8)|STD_CON_INPUT
<span style="color:maroon">TRANGROUP:3B86                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - CLEAR KEYBOARD BUFFER
<span style="color:maroon">TRANGROUP:3B86                                         </span>; AL must be 01h, 06h, 07h, 08h, or 0Ah.
<span style="color:maroon">TRANGROUP:3B88                 </span><span style="color:navy">call    </span>char_in_xlat
<span style="color:maroon">TRANGROUP:3B8B                 </span><span style="color:navy">jnb     short </span>slashp_check_yn
<span style="color:maroon">TRANGROUP:3B8D                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:3B8E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3B8E
TRANGROUP:3B8E </span>slashp_check_yn<span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3B8E                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:3B90                 </span><span style="color:navy">jz      short </span>next_del_file
<span style="color:maroon">TRANGROUP:3B92                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:3B94                 </span><span style="color:navy">jz      short </span>delete_this_file
<span style="color:maroon">TRANGROUP:3B96                 </span><span style="color:navy">jmp     short </span>slashp_askagn
<span style="color:maroon">TRANGROUP:3B98 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3B98
TRANGROUP:3B98 </span>delete_this_file<span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3B98                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">13h         </span>; FCB_Delete
<span style="color:maroon">TRANGROUP:3B9A                 </span><span style="color:navy">mov     dx, offset </span>DESTDIR
<span style="color:maroon">TRANGROUP:3B9D                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - DELETE FILE via FCB
<span style="color:maroon">TRANGROUP:3B9D                                         </span>; DS:DX -&gt; FCB with filename field filled with
<span style="color:maroon">TRANGROUP:3B9D                                         </span>; template for  deletion (&#039;?&#039; wildcard allowed, but not &#039;*&#039;)
<span style="color:maroon">TRANGROUP:3B9D                                         </span>; Return: AL = 00h file found, FFh file not found
<span style="color:maroon">TRANGROUP:3B9F                 </span><span style="color:navy">inc     al
</span><span style="color:maroon">TRANGROUP:3BA1                 </span><span style="color:navy">jnz     short </span>next_del_file
<span style="color:maroon">TRANGROUP:3BA3                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:maroon">TRANGROUP:3BA6                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">5           </span>; ERROR_ACCESS_DENIED
<span style="color:maroon">TRANGROUP:3BA9                 </span><span style="color:navy">jnz     short </span>stop_del
<span style="color:maroon">TRANGROUP:3BAB                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:maroon">TRANGROUP:3BAE                 </span><span style="color:navy">call    </span>Set_Ext_Error_Msg
<span style="color:maroon">TRANGROUP:3BB1                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:maroon">TRANGROUP:3BB4                 </span><span style="color:navy">jmp     short </span>next_del_file
<span style="color:maroon">TRANGROUP:3BB6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3BB6
TRANGROUP:3BB6 </span>stop_del<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3BB6                 </span><span style="color:navy">jmp     </span>eraerr
<span style="color:maroon">TRANGROUP:3BB9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3BB9
TRANGROUP:3BB9 </span>next_del_file<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3BB9                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">1Ah
</span><span style="color:maroon">TRANGROUP:3BBB                 </span><span style="color:navy">mov     dx, offset </span>DESTDIR
<span style="color:maroon">TRANGROUP:3BBE                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET DISK TRANSFER AREA ADDRESS
<span style="color:maroon">TRANGROUP:3BBE                                         </span>; DS:DX -&gt; disk transfer buffer
<span style="color:maroon">TRANGROUP:3BC0                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">12h
</span><span style="color:maroon">TRANGROUP:3BC2                 </span><span style="color:navy">mov     dx, </span><span style="color:green">5Ch
</span><span style="color:maroon">TRANGROUP:3BC5                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SEARCH NEXT USING FCB
<span style="color:maroon">TRANGROUP:3BC5                                         </span>; DS:DX -&gt; FCB
<span style="color:maroon">TRANGROUP:3BC5                                         </span>; Return: AL = status
<span style="color:maroon">TRANGROUP:3BC7                 </span><span style="color:navy">inc     al
</span><span style="color:maroon">TRANGROUP:3BC9                 </span><span style="color:navy">jz      short </span>slash_p_exit
<span style="color:maroon">TRANGROUP:3BCB                 </span><span style="color:navy">jmp     </span>delete_prompt_loop
<span style="color:maroon">TRANGROUP:3BCE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3BCE
TRANGROUP:3BCE </span>slash_p_exit<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3BCE                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:maroon">TRANGROUP:3BD1                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">18          </span>; ERROR_NO_MORE_FILES
<span style="color:maroon">TRANGROUP:3BD4                 </span><span style="color:navy">jz      short </span>good_erase_exit
<span style="color:maroon">TRANGROUP:3BD6                 </span><span style="color:navy">jmp     </span>extend_setup
<span style="color:maroon">TRANGROUP:3BD9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3BD9
TRANGROUP:3BD9 </span>good_erase_exit<span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3BD9                 </span><span style="color:navy">call    </span>RestUDir
<span style="color:maroon">TRANGROUP:3BDC                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:maroon">TRANGROUP:3BDF                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:3BE0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3BE0
TRANGROUP:3BE0 </span>_ECHO<span style="color:navy">:                                  </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:3BE0                 </span><span style="color:navy">call    </span>ON_OFF
<span style="color:maroon">TRANGROUP:3BE3                 </span><span style="color:navy">jb      short </span>DOEMES
<span style="color:maroon">TRANGROUP:3BE5                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:3BE9                 </span><span style="color:navy">jnz     short </span>ECH_OFF
<span style="color:maroon">TRANGROUP:3BEB                 </span><span style="color:navy">or      [ds:</span>EchoFlag<span style="color:navy">], </span><span style="color:green">1
</span><span style="color:maroon">TRANGROUP:3BF0                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:3BF1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3BF1
TRANGROUP:3BF1 </span>ECH_OFF<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3BF1                 </span><span style="color:navy">and     [ds:</span>EchoFlag<span style="color:navy">], </span><span style="color:green">0FEh
</span><span style="color:maroon">TRANGROUP:3BF6                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:3BF7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3BF7
TRANGROUP:3BF7 </span>CERRORJ<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3BF7                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:3BFA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3BFA
TRANGROUP:3BFA </span>DOEMES<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3BFA                 </span><span style="color:navy">cmp     cl, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:3BFD                 </span><span style="color:navy">jz      short </span>PECHO
<span style="color:maroon">TRANGROUP:3BFF                 </span><span style="color:navy">mov     dx, </span><span style="color:green">82h
</span><span style="color:maroon">TRANGROUP:3C02                 </span><span style="color:navy">call    </span>CRPRINT
<span style="color:maroon">TRANGROUP:3C05                 </span><span style="color:navy">jmp     </span>CRLF2
<span style="color:maroon">TRANGROUP:3C08 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3C08
TRANGROUP:3C08 </span>PECHO<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3C08                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:3C0C                 </span><span style="color:navy">mov     bl, [ds:</span>EchoFlag<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:3C10                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">TRANGROUP:3C11                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:3C12                 </span>assume ds:TRANGROUP
<span style="color:maroon">TRANGROUP:3C12                 </span><span style="color:navy">and     bl, </span><span style="color:green">1
</span><span style="color:maroon">TRANGROUP:3C15                 </span><span style="color:navy">mov     dx, offset </span>EchoMes_Ptr
<span style="color:maroon">TRANGROUP:3C18                 </span><span style="color:navy">jmp     short </span>PYN
<span style="color:maroon">TRANGROUP:3C1A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3C1A
TRANGROUP:3C1A </span>CNTRLC<span style="color:navy">:                                 </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:3C1A                 </span><span style="color:navy">call    </span>ON_OFF
<span style="color:maroon">TRANGROUP:3C1D                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3301h       </span>; (Set_CTRL_C_Trapping&lt;&lt;8)|1
<span style="color:maroon">TRANGROUP:3C20                 </span><span style="color:navy">jb      short </span>PCNTRLC
<span style="color:maroon">TRANGROUP:3C22                 </span><span style="color:navy">jnz     short </span>CNTRLC_OFF
<span style="color:maroon">TRANGROUP:3C24                 </span><span style="color:navy">mov     dl, </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:3C26                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - EXTENDED CONTROL-BREAK CHECKING
<span style="color:maroon">TRANGROUP:3C26                                         </span>; AL = 00h get state / 01h set state / 02h set AND get
<span style="color:maroon">TRANGROUP:3C26                                         </span>; DL = 00h for OFF or 01h for ON
<span style="color:maroon">TRANGROUP:3C28                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:3C29 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3C29
TRANGROUP:3C29 </span>CNTRLC_OFF<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3C29                 </span><span style="color:navy">xor     dl, dl
</span><span style="color:maroon">TRANGROUP:3C2B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS -
<span style="color:maroon">TRANGROUP:3C2D                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:3C2E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3C2E
TRANGROUP:3C2E </span>PCNTRLC<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3C2E                 </span><span style="color:navy">cmp     cl, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:3C31                 </span><span style="color:navy">jnz     short </span>CERRORJ
<span style="color:maroon">TRANGROUP:3C33                 </span><span style="color:navy">xor     al, al
</span><span style="color:maroon">TRANGROUP:3C35                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS -
<span style="color:maroon">TRANGROUP:3C37                 </span><span style="color:navy">mov     bl, dl
</span><span style="color:maroon">TRANGROUP:3C39                 </span><span style="color:navy">mov     dx, offset </span>CtrlcMes_Ptr
<span style="color:maroon">TRANGROUP:3C3C
TRANGROUP:3C3C </span>PYN<span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3C3C                 </span><span style="color:navy">mov     si, offset </span>ONMES_PTR
<span style="color:maroon">TRANGROUP:3C3F                 </span><span style="color:navy">or      bl, bl
</span><span style="color:maroon">TRANGROUP:3C41                 </span><span style="color:navy">jnz     short </span>PRINTVAL
<span style="color:maroon">TRANGROUP:3C43                 </span><span style="color:navy">mov     si, offset </span>OFFMES_PTR
<span style="color:maroon">TRANGROUP:3C46
TRANGROUP:3C46 </span>PRINTVAL<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3C46                 </span><span style="color:navy">push    dx
</span><span style="color:maroon">TRANGROUP:3C47                 </span><span style="color:navy">mov     bx, dx
</span><span style="color:maroon">TRANGROUP:3C49                 </span><span style="color:navy">lodsw
</span><span style="color:maroon">TRANGROUP:3C4A                 </span><span style="color:navy">mov     dh, </span><span style="color:#ff8000">0FFh        </span>; util_msg_class
<span style="color:maroon">TRANGROUP:3C4C                 </span><span style="color:navy">call    </span>TSYSGETMSG
<span style="color:maroon">TRANGROUP:3C4F                 </span><span style="color:navy">add     bx, </span><span style="color:#ff8000">5           </span>; Ptr_off_pos
<span style="color:maroon">TRANGROUP:3C52                 </span><span style="color:navy">mov     [bx], si
</span><span style="color:maroon">TRANGROUP:3C54                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">TRANGROUP:3C55                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:3C58                 </span><span style="color:navy">mov     [word ptr bx], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:3C5C                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:3C5D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3C5D
TRANGROUP:3C5D </span>VERIFY<span style="color:navy">:                                 </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:3C5D                 </span><span style="color:navy">call    </span>ON_OFF
<span style="color:maroon">TRANGROUP:3C60                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2E01h       </span>; (SET_VERIFY_ON_WRITE&lt;&lt;8)|1
<span style="color:maroon">TRANGROUP:3C63                 </span><span style="color:navy">jb      short </span>PVERIFY
<span style="color:maroon">TRANGROUP:3C65                 </span><span style="color:navy">jnz     short </span>VER_OFF
<span style="color:maroon">TRANGROUP:3C67                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET VERIFY FLAG
<span style="color:maroon">TRANGROUP:3C67                                         </span>; DL = 00h, AL = 01h VERIFY on / 00h VERIFY off
<span style="color:maroon">TRANGROUP:3C69                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:3C6A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3C6A
TRANGROUP:3C6A </span>VER_OFF<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3C6A                 </span><span style="color:navy">dec     al
</span><span style="color:maroon">TRANGROUP:3C6C                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS -
<span style="color:maroon">TRANGROUP:3C6E                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:3C6F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3C6F
TRANGROUP:3C6F </span>PVERIFY<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3C6F                 </span><span style="color:navy">cmp     cl, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:3C72                 </span><span style="color:navy">jnz     short </span>CERRORJ
<span style="color:maroon">TRANGROUP:3C74                 </span><span style="color:navy">mov     ah, </span><span style="color:green">54h
</span><span style="color:maroon">TRANGROUP:3C76                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET VERIFY FLAG
<span style="color:maroon">TRANGROUP:3C76                                         </span>; Return: AL = 00h if flag OFF
<span style="color:maroon">TRANGROUP:3C76                                         </span>; AL = 01h if flag ON
<span style="color:maroon">TRANGROUP:3C78                 </span><span style="color:navy">mov     bl, al
</span><span style="color:maroon">TRANGROUP:3C7A                 </span><span style="color:navy">mov     dx, offset </span>VeriMes_Ptr
<span style="color:maroon">TRANGROUP:3C7D                 </span><span style="color:navy">jmp     short </span>PYN
<span style="color:black">TRANGROUP:3C7F
TRANGROUP:3C7F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3C7F
TRANGROUP:3C7F
TRANGROUP:3C7F </span>proc            ON_OFF near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3C7F                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:black">TRANGROUP:3C82
TRANGROUP:3C82 </span><span style="color:gray">scan_on_off</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3C82                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:3C83                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:3C85                 </span><span style="color:navy">jz      short </span><span style="color:gray">scan_on_off
</span><span style="color:black">TRANGROUP:3C87                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:3C89                 </span><span style="color:navy">jz      short </span><span style="color:gray">scan_on_off
</span><span style="color:black">TRANGROUP:3C8B                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Dh </span><span style="color:gray">; &#039;=&#039;
</span><span style="color:black">TRANGROUP:3C8D                 </span><span style="color:navy">jz      short </span><span style="color:gray">parse_on_off
</span><span style="color:black">TRANGROUP:3C8F                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:3C90
TRANGROUP:3C90 </span><span style="color:gray">parse_on_off</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3C90                 </span><span style="color:navy">mov     di, offset </span>PARSE_BREAK
<span style="color:black">TRANGROUP:3C93                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:3C95                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:3C97                 </span><span style="color:navy">call    </span>cmd_parse
<span style="color:black">TRANGROUP:3C9A                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh      </span>; END_OF_LINE
<span style="color:black">TRANGROUP:3C9D                 </span><span style="color:navy">jz      short </span><span style="color:gray">BADONF
</span><span style="color:black">TRANGROUP:3C9F                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:3CA2                 </span><span style="color:navy">jz      short </span><span style="color:gray">on_off_there
</span><span style="color:black">TRANGROUP:3CA4                 </span><span style="color:navy">mov     cx, ax
</span><span style="color:black">TRANGROUP:3CA6                 </span><span style="color:navy">jmp     short </span><span style="color:gray">BADONF
</span><span style="color:black">TRANGROUP:3CA8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3CA8
TRANGROUP:3CA8 </span><span style="color:gray">on_off_there</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3CA8                 </span><span style="color:navy">cmp     [</span>PARSE1_CODE<span style="color:navy">], </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:3CAD                 </span><span style="color:navy">jnz     short </span><span style="color:gray">good_on_off
</span><span style="color:black">TRANGROUP:3CAF                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">0Ah         </span>; BadParm_Ptr
<span style="color:black">TRANGROUP:3CB2                 </span><span style="color:navy">jmp     short </span><span style="color:gray">BADONF
</span><span style="color:black">TRANGROUP:3CB4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3CB4
TRANGROUP:3CB4 </span><span style="color:gray">good_on_off</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3CB4                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:3CB6                 </span><span style="color:navy">or      al, [</span>PARSE1_CODE<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3CBA                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:3CBB                 </span><span style="color:navy">mov     di, offset </span>PARSE_BREAK
<span style="color:black">TRANGROUP:3CBE                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:3CC0                 </span><span style="color:navy">call    </span>cmd_parse
<span style="color:black">TRANGROUP:3CC3                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh      </span>; END_OF_LINE
<span style="color:black">TRANGROUP:3CC6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">BADONF_flags
</span><span style="color:black">TRANGROUP:3CC8                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:3CC9                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:3CCA                 </span><span style="color:navy">jmp     short </span><span style="color:gray">on_off_end
</span><span style="color:black">TRANGROUP:3CCC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3CCC
TRANGROUP:3CCC </span><span style="color:gray">BADONF_flags</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3CCC                 </span><span style="color:navy">mov     cx, ax
</span><span style="color:black">TRANGROUP:3CCE                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:3CCF
TRANGROUP:3CCF </span><span style="color:gray">BADONF</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3CCF                 </span><span style="color:navy">mov     dx, offset </span>bad_on_off_ptr
<span style="color:black">TRANGROUP:3CD2                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:3CD3
TRANGROUP:3CD3 </span><span style="color:gray">on_off_end</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3CD3                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3CD3 </span>endp            ON_OFF
<span style="color:black">TRANGROUP:3CD3
</span><span style="color:maroon">TRANGROUP:3CD4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3CD4
TRANGROUP:3CD4 </span>PRINT_DATE<span style="color:navy">:                             </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:3CD4                 </span><span style="color:navy">push    es
</span><span style="color:maroon">TRANGROUP:3CD5                 </span><span style="color:navy">push    di
</span><span style="color:maroon">TRANGROUP:3CD6                 </span><span style="color:navy">push    cs
</span><span style="color:maroon">TRANGROUP:3CD7                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:3CD8                 </span>assume es:TRANGROUP
<span style="color:maroon">TRANGROUP:3CD8                 </span><span style="color:navy">call    </span>GetDate
<span style="color:maroon">TRANGROUP:3CDB                 </span><span style="color:navy">xchg    dh, dl
</span><span style="color:maroon">TRANGROUP:3CDD                 </span><span style="color:navy">mov     [</span>promptDat_yr<span style="color:navy">], cx
</span><span style="color:maroon">TRANGROUP:3CE1                 </span><span style="color:navy">mov     [</span>promptDat_moday<span style="color:navy">], dx
</span><span style="color:maroon">TRANGROUP:3CE5                 </span><span style="color:navy">mov     dx, offset </span>promptdat_ptr
<span style="color:maroon">TRANGROUP:3CE8                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:3CEB                 </span><span style="color:navy">pop     di
</span><span style="color:maroon">TRANGROUP:3CEC                 </span><span style="color:navy">pop     es
</span><span style="color:maroon">TRANGROUP:3CED                 </span>assume es:nothing
<span style="color:maroon">TRANGROUP:3CED                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3CEE
TRANGROUP:3CEE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3CEE
TRANGROUP:3CEE
TRANGROUP:3CEE </span>proc            GetDate near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3CEE                 </span><span style="color:navy">mov     di, offset </span>TPBUF ; Arg_Buf
<span style="color:black">TRANGROUP:3CF1                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2Ah
</span><span style="color:black">TRANGROUP:3CF3                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - GET CURRENT DATE
<span style="color:black">TRANGROUP:3CF3                                         </span>; Return: DL = day, DH = month, CX = year
<span style="color:black">TRANGROUP:3CF3                                         </span>; AL = day of the week (0=Sunday, 1=Monday, etc.)
<span style="color:black">TRANGROUP:3CF5                 </span><span style="color:navy">cbw
</span><span style="color:black">TRANGROUP:3CF6                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:3CF7                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:3CF8                 </span><span style="color:navy">mov     si, ax
</span><span style="color:black">TRANGROUP:3CFA                 </span><span style="color:navy">shl     si, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:3CFC                 </span><span style="color:navy">add     si, ax
</span><span style="color:black">TRANGROUP:3CFE                 </span><span style="color:navy">mov     cx, si
</span><span style="color:black">TRANGROUP:3D00                 </span><span style="color:navy">mov     ax, [</span>WeekTab<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3D03                 </span><span style="color:navy">mov     dh, </span><span style="color:#ff8000">0FFh        </span>; util_msg_class
<span style="color:black">TRANGROUP:3D05                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:3D06                 </span><span style="color:navy">call    </span>TSYSGETMSG
<span style="color:black">TRANGROUP:3D09                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:3D0A                 </span><span style="color:navy">add     si, cx
</span><span style="color:black">TRANGROUP:3D0C                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:3D0E                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0           </span>; END_OF_LINE_OUT
<span style="color:black">TRANGROUP:3D10                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:3D11                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:3D12                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:3D13                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3D13 </span>endp            GetDate
<span style="color:black">TRANGROUP:3D13
TRANGROUP:3D14
TRANGROUP:3D14 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3D14
TRANGROUP:3D14
TRANGROUP:3D14 </span>proc            char_in_xlat near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3D14                 </span><span style="color:navy">mov     dl, al
</span><span style="color:black">TRANGROUP:3D16                 </span><span style="color:navy">xor     dh, dh
</span><span style="color:black">TRANGROUP:3D18                 </span><span style="color:navy">mov     ax, </span><span style="color:green">6523h       </span>; (GetExtCntry&lt;&lt;8)+23h
<span style="color:black">TRANGROUP:3D1B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 4.x internal - COUNTRY-DEPENDENT FILENAME CAPITALIZATION
<span style="color:black">TRANGROUP:3D1B                                         </span>; AL = function -
<span style="color:black">TRANGROUP:3D1D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:3D1D </span>endp            char_in_xlat
<span style="color:black">TRANGROUP:3D1D
</span><span style="color:maroon">TRANGROUP:3D1E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3D1E
TRANGROUP:3D1E </span>COPY<span style="color:navy">:                                   </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:3D1E                 </span><span style="color:navy">xor     ax, ax          </span>; 0
<span style="color:maroon">TRANGROUP:3D20                 </span><span style="color:navy">mov     [</span>Copy_num<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D23                 </span><span style="color:navy">mov     [</span>SRCPT<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D26                 </span><span style="color:navy">mov     [</span>SrcTail<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D29                 </span><span style="color:navy">mov     [</span>CFLAG<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D2C                 </span><span style="color:navy">mov     [</span>NXTADD<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D2F                 </span><span style="color:navy">mov     [</span>DestSwitch<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D32                 </span><span style="color:navy">mov     [</span>STARTEL<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D35                 </span><span style="color:navy">mov     [</span>DestTail<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D38                 </span><span style="color:navy">mov     [</span>SPECDRV<span style="color:navy">], al   </span>; DestClosed
<span style="color:maroon">TRANGROUP:3D3B                 </span><span style="color:navy">mov     [</span>DestSiz<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D3E                 </span><span style="color:navy">mov     [</span>SrcSiz<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D41                 </span><span style="color:navy">mov     [</span>DestInfo<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D44                 </span><span style="color:navy">mov     [</span>SrcInfo<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D47                 </span><span style="color:navy">mov     [</span>INEXACT<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D4A                 </span><span style="color:navy">mov     [</span>DestIsDir<span style="color:navy">], al </span>; DestVars
<span style="color:maroon">TRANGROUP:3D4D                 </span><span style="color:navy">mov     [</span>SrcIsDir<span style="color:navy">], al  </span>; SrcVars
<span style="color:maroon">TRANGROUP:3D50                 </span><span style="color:navy">mov     [</span>USERDIR1<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D53                 </span><span style="color:navy">mov     [</span>NOWRITE<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D56                 </span><span style="color:navy">mov     [</span>IFNOTFLAG<span style="color:navy">], al </span>; RDEOF
<span style="color:maroon">TRANGROUP:3D59                 </span><span style="color:navy">mov     [</span>SRCHAND<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D5C                 </span><span style="color:navy">mov     [</span>CPDATE<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D5F                 </span><span style="color:navy">mov     [</span>CPTIME<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D62                 </span><span style="color:navy">mov     [</span>SRCISDEV<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D65                 </span><span style="color:navy">mov     [</span>zflag<span style="color:navy">], al     </span>; OCtrlZ
<span style="color:maroon">TRANGROUP:3D68                 </span><span style="color:navy">mov     [</span>OFilePtr_Lo<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D6B                 </span><span style="color:navy">mov     [</span>OFilePtr_Hi<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D6E                 </span><span style="color:navy">mov     [</span>TERMREAD<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D71                 </span><span style="color:navy">mov     [</span>comma<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D74                 </span><span style="color:navy">mov     [</span>plus_comma<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D77                 </span><span style="color:navy">mov     [</span>msg_flag<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D7A                 </span><span style="color:navy">mov     [</span>ARGTS<span style="color:navy">], ax     </span>; AllSwitch
<span style="color:maroon">TRANGROUP:3D7D                 </span><span style="color:navy">mov     [</span>PARM2<span style="color:navy">], al     </span>; ArgC
<span style="color:maroon">TRANGROUP:3D80                 </span><span style="color:navy">mov     [</span>PLUS<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D83                 </span><span style="color:navy">mov     [</span>BINARY<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D86                 </span><span style="color:navy">mov     [</span>ASCII<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D89                 </span><span style="color:navy">mov     [</span>FileCnt<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D8C                 </span><span style="color:navy">mov     [</span>WRITTEN<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D8F                 </span><span style="color:navy">mov     [</span>PARM1<span style="color:navy">], al     </span>; Concat
<span style="color:maroon">TRANGROUP:3D92                 </span><span style="color:navy">mov     [</span>MELCOPY<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D95                 </span><span style="color:navy">mov     [</span>MELSTART<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3D98                 </span><span style="color:navy">mov     [</span>cox_dest_file<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D9B                 </span><span style="color:navy">mov     [</span>cox_src_file<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3D9E                 </span><span style="color:navy">mov     [word ptr </span>ScanBuf<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3DA1                 </span><span style="color:navy">mov     [word ptr </span>DestBuf<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3DA4                 </span><span style="color:navy">mov     [word ptr </span>SrcBuf<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3DA7                 </span><span style="color:navy">mov     [word ptr </span>SDIRBUF<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3DAA                 </span><span style="color:navy">mov     [word ptr </span>BWDBUF<span style="color:navy">], ax </span>; DIRBUF
<span style="color:maroon">TRANGROUP:3DAD                 </span><span style="color:navy">mov     [word ptr </span>DESTDIR<span style="color:navy">], ax </span>; DestFcb
<span style="color:maroon">TRANGROUP:3DB0                 </span><span style="color:navy">mov     [</span>objcnt<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3DB3                 </span><span style="color:navy">dec     ax
</span><span style="color:maroon">TRANGROUP:3DB4                 </span><span style="color:navy">mov     [</span>EndDestBuf<span style="color:navy">], ax </span>; DESTHAND
<span style="color:maroon">TRANGROUP:3DB7                 </span><span style="color:navy">mov     [</span>FRSTSRCH<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3DBA                 </span><span style="color:navy">mov     [</span>FIRSTDEST<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3DBD                 </span><span style="color:navy">mov     [</span>DestIsDir<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3DC0                 </span><span style="color:navy">call    </span>init_copycmd_option
<span style="color:maroon">TRANGROUP:3DC3                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h
</span><span style="color:maroon">TRANGROUP:3DC6                 </span><span style="color:navy">mov     bl, </span><span style="color:#ff8000">2Bh </span><span style="color:gray">; &#039;+&#039;   </span>; PLUS_CHR
<span style="color:maroon">TRANGROUP:3DC8                 </span><span style="color:navy">inc     [</span>expand_star<span style="color:navy">]   </span>; byte ; CParse &#039;expand * to ?s&#039; = true
<span style="color:maroon">TRANGROUP:3DCC                 </span><span style="color:navy">mov     [</span>cpyflag<span style="color:navy">], </span><span style="color:#ff8000">1    </span>; CParse &#039;called from COPY&#039; = true
<span style="color:maroon">TRANGROUP:3DD1
TRANGROUP:3DD1 </span>DESTSCAN<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3DD1                 </span><span style="color:navy">xor     bp, bp
</span><span style="color:maroon">TRANGROUP:3DD3                 </span><span style="color:navy">mov     di, offset </span>ScanBuf
<span style="color:maroon">TRANGROUP:3DD6                 </span><span style="color:navy">mov     [</span>parse_last<span style="color:navy">], si
</span><span style="color:maroon">TRANGROUP:3DDA                 </span><span style="color:navy">call    </span>cparse
<span style="color:maroon">TRANGROUP:3DDD                 </span><span style="color:navy">pushf                   </span>;  (*) ; save CParse flags
<span style="color:maroon">TRANGROUP:3DDE                 </span><span style="color:navy">inc     [</span>objcnt<span style="color:navy">]        </span>; byte
<span style="color:maroon">TRANGROUP:3DE2                 </span><span style="color:navy">test    bh, </span><span style="color:green">80h
</span><span style="color:maroon">TRANGROUP:3DE5                 </span><span style="color:navy">jz      short </span>NOCOPY    ; no &quot;+&quot; delimiter
<span style="color:maroon">TRANGROUP:3DE7                 </span><span style="color:navy">mov     [</span>PLUS<span style="color:navy">], </span><span style="color:#ff8000">1       </span>; &quot;+&quot; delimiter occurred
<span style="color:maroon">TRANGROUP:3DEC
TRANGROUP:3DEC </span>NOCOPY<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3DEC                 </span><span style="color:navy">test    bh, </span><span style="color:green">1
</span><span style="color:maroon">TRANGROUP:3DEF                 </span><span style="color:navy">jnz     short </span>CHK_CP_SWITCH
<span style="color:maroon">TRANGROUP:3DF1                 </span><span style="color:navy">jmp     </span>TESTP2
<span style="color:maroon">TRANGROUP:3DF4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3DF4
TRANGROUP:3DF4 </span>CHK_CP_SWITCH<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3DF4                 </span><span style="color:navy">test    bp, </span><span style="color:green">10h         </span>; Verify requested?
<span style="color:maroon">TRANGROUP:3DF8                 </span><span style="color:navy">jz      short </span>NOT_SLASHV ; No
<span style="color:maroon">TRANGROUP:3DFA                 </span><span style="color:navy">test    [</span>ARGTS<span style="color:navy">], </span><span style="color:green">10h    </span>; test word [AllSwitch],10h
<span style="color:maroon">TRANGROUP:3E00                 </span><span style="color:navy">jz      short </span>NOT_SLASHV
<span style="color:maroon">TRANGROUP:3E02                 </span><span style="color:navy">or      bp, </span><span style="color:green">4000h       </span>; FBadSwitch
<span style="color:maroon">TRANGROUP:3E06
TRANGROUP:3E06 </span>NOT_SLASHV<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3E06                 </span><span style="color:navy">test    bp, </span><span style="color:green">40h         </span>; negative Y (-Y) switch flag
<span style="color:maroon">TRANGROUP:3E0A                 </span><span style="color:navy">jz      short </span>CHK_SLASHY0
<span style="color:maroon">TRANGROUP:3E0C                 </span><span style="color:navy">test    [</span>ARGTS<span style="color:navy">], </span><span style="color:green">40h    </span>; [AllSwitch] ; negative (-Y) flag
<span style="color:maroon">TRANGROUP:3E12                 </span><span style="color:navy">jnz     short </span>NOT_SLASHY1
<span style="color:maroon">TRANGROUP:3E14                 </span><span style="color:navy">test    [</span>ARGTS<span style="color:navy">], </span><span style="color:green">80h    </span>; [AllSwitch] ; SwitchY (Y) flag
<span style="color:maroon">TRANGROUP:3E1A                 </span><span style="color:navy">jz      short </span>NOT_SLASHY2
<span style="color:maroon">TRANGROUP:3E1C
TRANGROUP:3E1C </span>NOT_SLASHY1<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3E1C                 </span><span style="color:navy">or      bp, </span><span style="color:green">4000h       </span>; FBadSwitch (Repetitive)
<span style="color:maroon">TRANGROUP:3E20
TRANGROUP:3E20 </span>NOT_SLASHY2<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3E20                 </span><span style="color:navy">mov     [</span>cox_y_override<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; cox_y setting will be used
<span style="color:maroon">TRANGROUP:3E25
TRANGROUP:3E25 </span>CHK_SLASHY0<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3E25                 </span><span style="color:navy">test    bp, </span><span style="color:green">80h
</span><span style="color:maroon">TRANGROUP:3E29                 </span><span style="color:navy">jz      short </span>CHK_SLASHY4
<span style="color:maroon">TRANGROUP:3E2B                 </span><span style="color:navy">mov     al, [si]
</span><span style="color:maroon">TRANGROUP:3E2D                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">y&#039;
</span><span style="color:maroon">TRANGROUP:3E2F                 </span><span style="color:navy">jz      short </span>CHK_SLASHY1
<span style="color:maroon">TRANGROUP:3E31                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">Y&#039;
</span><span style="color:maroon">TRANGROUP:3E33                 </span><span style="color:navy">jz      short </span>CHK_SLASHY1
<span style="color:maroon">TRANGROUP:3E35                 </span><span style="color:navy">or      bp, </span><span style="color:green">4000h       </span>; FBadSwitch
<span style="color:maroon">TRANGROUP:3E39                 </span><span style="color:navy">jmp     short </span>CHK_SLASHY4
<span style="color:maroon">TRANGROUP:3E3B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3E3B
TRANGROUP:3E3B </span>CHK_SLASHY1<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3E3B                 </span><span style="color:navy">mov     [byte ptr si], </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:maroon">TRANGROUP:3E3E                 </span><span style="color:navy">inc     si
</span><span style="color:maroon">TRANGROUP:3E3F                 </span><span style="color:navy">test    [</span>ARGTS<span style="color:navy">], </span><span style="color:green">40h    </span>; [AllSwitch] ; negative (-Y) flag
<span style="color:maroon">TRANGROUP:3E45                 </span><span style="color:navy">jnz     short </span>CHK_SLASHY2 ; N flag
<span style="color:maroon">TRANGROUP:3E47                 </span><span style="color:navy">test    [</span>ARGTS<span style="color:navy">], </span><span style="color:green">80h    </span>; [AllSwitch] ; SwitchY (Y) flag
<span style="color:maroon">TRANGROUP:3E4D                 </span><span style="color:navy">jz      short </span>CHK_SLASHY3
<span style="color:maroon">TRANGROUP:3E4F
TRANGROUP:3E4F </span>CHK_SLASHY2<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3E4F                 </span><span style="color:navy">or      bp, </span><span style="color:green">4000h       </span>; FBadSwitch (Repetitive)
<span style="color:maroon">TRANGROUP:3E53
TRANGROUP:3E53 </span>CHK_SLASHY3<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3E53                 </span><span style="color:navy">mov     [</span>cox_y_override<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:3E58
TRANGROUP:3E58 </span>CHK_SLASHY4<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3E58                 </span><span style="color:navy">or      [</span>DestSwitch<span style="color:navy">], bp </span>; set [DestSwitch] SwitchY flag to 1
<span style="color:maroon">TRANGROUP:3E5C                 </span><span style="color:navy">or      [</span>ARGTS<span style="color:navy">], bp     </span>; set [AllSwitch] SwitchY flag to 1
<span style="color:maroon">TRANGROUP:3E60                 </span><span style="color:navy">test    bp, </span><span style="color:green">7F23h       </span>; ~SwitchCopy  ; Bad switch?
<span style="color:maroon">TRANGROUP:3E64                 </span><span style="color:navy">jz      short </span>NOT_BAD_SWITCH
<span style="color:maroon">TRANGROUP:3E66                 </span><span style="color:navy">popf                    </span>; (*) ; fix up stack
<span style="color:maroon">TRANGROUP:3E67                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3           </span>; BadSwt_Ptr
<span style="color:maroon">TRANGROUP:3E67                                         </span>; get &quot;Invalid switch&quot; message number
<span style="color:maroon">TRANGROUP:3E6A                 </span><span style="color:navy">call    </span>setup_parse_error_msg
<span style="color:maroon">TRANGROUP:3E6D                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:3E70 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3E70
TRANGROUP:3E70 </span>NOT_BAD_SWITCH<span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3E70                 </span><span style="color:navy">popf
</span><span style="color:maroon">TRANGROUP:3E71                 </span><span style="color:navy">jb      short </span>CHECKDONE
<span style="color:maroon">TRANGROUP:3E73                 </span><span style="color:navy">jmp     </span>DESTSCAN
<span style="color:maroon">TRANGROUP:3E76 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3E76
TRANGROUP:3E76 </span>TESTP2<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3E76                 </span><span style="color:navy">popf                    </span>; (*) ; restore CParse flags
<span style="color:maroon">TRANGROUP:3E77                 </span><span style="color:navy">jb      short </span>CHECKDONE
<span style="color:maroon">TRANGROUP:3E79                 </span><span style="color:navy">test    bh, </span><span style="color:green">80h
</span><span style="color:maroon">TRANGROUP:3E7C                 </span><span style="color:navy">jnz     short </span>GOTPLUS   ; found a &quot;+pathname&quot; argument
<span style="color:maroon">TRANGROUP:3E7E                 </span><span style="color:navy">inc     [</span>PARM2<span style="color:navy">]         </span>; inc byte [ArgC]
<span style="color:maroon">TRANGROUP:3E82
TRANGROUP:3E82 </span>GOTPLUS<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3E82                 </span><span style="color:navy">push    si
</span><span style="color:maroon">TRANGROUP:3E83                 </span><span style="color:navy">mov     ax, [</span>STARTEL<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:3E86                 </span><span style="color:navy">mov     si, offset </span>ScanBuf
<span style="color:maroon">TRANGROUP:3E89                 </span><span style="color:navy">sub     ax, si
</span><span style="color:maroon">TRANGROUP:3E8B                 </span><span style="color:navy">mov     di, offset </span>DestBuf
<span style="color:maroon">TRANGROUP:3E8E                 </span><span style="color:navy">add     ax, di
</span><span style="color:maroon">TRANGROUP:3E90                 </span><span style="color:navy">mov     [</span>DestTail<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:3E93                 </span><span style="color:navy">mov     [</span>DestSiz<span style="color:navy">], cl
</span><span style="color:maroon">TRANGROUP:3E97                 </span><span style="color:navy">inc     cx
</span><span style="color:maroon">TRANGROUP:3E98                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">TRANGROUP:3E9A                 </span><span style="color:navy">mov     [</span>DestInfo<span style="color:navy">], bh
</span><span style="color:maroon">TRANGROUP:3E9E                 </span><span style="color:navy">mov     [</span>DestSwitch<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; word
<span style="color:maroon">TRANGROUP:3EA4                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:3EA5                 </span><span style="color:navy">jmp     </span>DESTSCAN
<span style="color:maroon">TRANGROUP:3EA8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3EA8
TRANGROUP:3EA8 </span>CHECKDONE<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3EA8                 </span><span style="color:navy">cmp     [</span>PLUS<span style="color:navy">], </span><span style="color:#ff8000">1       </span>; &quot;+&quot; with
<span style="color:maroon">TRANGROUP:3EAD                 </span><span style="color:navy">jnz     short </span>CDCONT
<span style="color:maroon">TRANGROUP:3EAF                 </span><span style="color:navy">cmp     [</span>PARM2<span style="color:navy">], </span><span style="color:#ff8000">1      </span>; cmp byte [ArgC],1 ; one arg,
<span style="color:maroon">TRANGROUP:3EB4                 </span><span style="color:navy">jnz     short </span>CDCONT
<span style="color:maroon">TRANGROUP:3EB6                 </span><span style="color:navy">cmp     [</span>objcnt<span style="color:navy">], </span><span style="color:#ff8000">2     </span>; two objects..
<span style="color:maroon">TRANGROUP:3EBB                 </span><span style="color:navy">jnz     short </span>CDCONT
<span style="color:maroon">TRANGROUP:3EBD                 </span><span style="color:navy">mov     dx, offset </span>OVERWR_PTR
<span style="color:maroon">TRANGROUP:3EC0                 </span><span style="color:navy">jmp     </span>COPYERR
<span style="color:maroon">TRANGROUP:3EC3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3EC3
TRANGROUP:3EC3 </span>CDCONT<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3EC3                 </span><span style="color:navy">mov     al, [</span>PLUS<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:3EC6                 </span><span style="color:navy">mov     [</span>PARM1<span style="color:navy">], al     </span>; mov [Concat],al
<span style="color:maroon">TRANGROUP:3EC6                                         </span>; if &quot;+&quot; occurred, we&#039;re concatenating
<span style="color:maroon">TRANGROUP:3EC9                 </span><span style="color:navy">shl     al, </span><span style="color:green">1
</span><span style="color:maroon">TRANGROUP:3ECB                 </span><span style="color:navy">shl     al, </span><span style="color:green">1
</span><span style="color:maroon">TRANGROUP:3ECD                 </span><span style="color:navy">mov     [</span>INEXACT<span style="color:navy">], al   </span>; therefore making an inexact copy
<span style="color:maroon">TRANGROUP:3ED0                 </span><span style="color:navy">mov     al, [</span>PARM2<span style="color:navy">]     </span>; [ArgC] ; AL = # independent arguments
<span style="color:maroon">TRANGROUP:3ED3                 </span><span style="color:navy">or      al, al
</span><span style="color:maroon">TRANGROUP:3ED5                 </span><span style="color:navy">jnz     short </span>TRY_TOO_MANY
<span style="color:maroon">TRANGROUP:3ED7                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:maroon">TRANGROUP:3EDA                 </span><span style="color:navy">mov     [</span>extend_buf_ptr<span style="color:navy">], </span><span style="color:#ff8000">2 </span>; LessArgs_Ptr ; set msg # &quot;param missing&quot;
<span style="color:maroon">TRANGROUP:3EE0                 </span><span style="color:navy">jmp     short </span>CERROR_PARSEJ
<span style="color:maroon">TRANGROUP:3EE2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3EE2
TRANGROUP:3EE2 </span>TRY_TOO_MANY<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3EE2                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">2
</span><span style="color:maroon">TRANGROUP:3EE4                 </span><span style="color:navy">jbe     short </span>ACOUNTOK  ; &lt;= 2 arguments - ok
<span style="color:maroon">TRANGROUP:3EE6                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:maroon">TRANGROUP:3EE9                 </span><span style="color:navy">mov     [</span>extend_buf_ptr<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; MoreArgs_Ptr ; set msg # &quot;too many params&quot;
<span style="color:maroon">TRANGROUP:3EEF
TRANGROUP:3EEF </span>CERROR_PARSEJ<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3EEF                 </span><span style="color:navy">mov     [</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">2 </span>; parse_msg_class ; parse error message
<span style="color:maroon">TRANGROUP:3EF4
TRANGROUP:3EF4 </span>CERROR4J<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3EF4                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:maroon">TRANGROUP:3EF7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3EF7
TRANGROUP:3EF7 </span>ACOUNTOK<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3EF7                 </span><span style="color:navy">mov     bp, offset </span>DestIsDir ; DestVars ; BP = base of dest variables
<span style="color:maroon">TRANGROUP:3EFA                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:3EFC                 </span><span style="color:navy">jnz     short </span>GOT2ARGS
<span style="color:maroon">TRANGROUP:3EFE                 </span><span style="color:navy">mov     al, [</span>CURDRV<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:3F01                 </span><span style="color:navy">add     al, &#039;</span><span style="color:green">A&#039;
</span><span style="color:maroon">TRANGROUP:3F03                 </span><span style="color:navy">mov     ah, &#039;</span><span style="color:green">:&#039;
</span><span style="color:maroon">TRANGROUP:3F05                 </span><span style="color:navy">mov     [byte ptr bp+</span><span style="color:#ff8000">1</span><span style="color:navy">], </span><span style="color:#ff8000">2 </span>; [bp+VARSTRUC.SIZ],2 ; pathname length = 2
<span style="color:maroon">TRANGROUP:3F09                 </span><span style="color:navy">mov     di, offset </span>DestBuf
<span style="color:maroon">TRANGROUP:3F0C                 </span><span style="color:navy">stosw
</span><span style="color:maroon">TRANGROUP:3F0D                 </span><span style="color:navy">mov     [</span>DestSwitch<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; word
<span style="color:maroon">TRANGROUP:3F13                 </span><span style="color:navy">mov     [byte ptr bp+</span><span style="color:#ff8000">4</span><span style="color:navy">], </span><span style="color:#ff8000">2 </span>; [bp+VARSTRUC.INFO] ; &#039;wildcard present&#039;
<span style="color:maroon">TRANGROUP:3F17                 </span><span style="color:navy">mov     [byte ptr bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [bp+VARSTRUC.ISDIR] ; &#039;not a directory&#039;
<span style="color:maroon">TRANGROUP:3F1B                 </span><span style="color:navy">call    </span>SETSTARS
<span style="color:maroon">TRANGROUP:3F1E
TRANGROUP:3F1E </span>GOT2ARGS<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3F1E                 </span><span style="color:navy">cmp     [byte ptr bp+</span><span style="color:#ff8000">1</span><span style="color:navy">], </span><span style="color:#ff8000">2 </span>; [bp+VARSTRUC.SIZ],2
<span style="color:maroon">TRANGROUP:3F22                 </span><span style="color:navy">jnz     short </span>NOTSHORTDEST ; not two chars, can&#039;t be &quot;d:&quot;
<span style="color:maroon">TRANGROUP:3F24                 </span><span style="color:navy">mov     al, &#039;</span><span style="color:green">:&#039;
</span><span style="color:maroon">TRANGROUP:3F26                 </span><span style="color:navy">cmp     [</span>DestBuf<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3F2A                 </span><span style="color:navy">jnz     short </span>NOTSHORTDEST ; it&#039;s just a 2-character filename
<span style="color:maroon">TRANGROUP:3F2C                 </span><span style="color:navy">or      [byte ptr bp+</span><span style="color:#ff8000">4</span><span style="color:navy">], </span><span style="color:green">2 </span>; [bp+VARSTRUC.INFO] ; &#039;wildcard present&#039;
<span style="color:maroon">TRANGROUP:3F30                 </span><span style="color:navy">mov     di, (offset </span>DestBuf<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">) </span>; ES:DI = ptr after &quot;d:&quot;
<span style="color:maroon">TRANGROUP:3F33                 </span><span style="color:navy">mov     [byte ptr bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [bp+VARSTRUC.ISDIR] ; &#039;not a directory&#039;
<span style="color:maroon">TRANGROUP:3F37                 </span><span style="color:navy">call    </span>SETSTARS        ; add wildcards
<span style="color:maroon">TRANGROUP:3F3A
TRANGROUP:3F3A </span>NOTSHORTDEST<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3F3A                 </span><span style="color:navy">mov     di, [bp+</span><span style="color:#ff8000">2</span><span style="color:navy">]      </span>; [bp+VARSTRUC.TTAIL]
<span style="color:maroon">TRANGROUP:3F3D                 </span><span style="color:navy">cmp     [byte ptr di], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:3F40                 </span><span style="color:navy">jnz     short </span>CHKSWTCHES ; not a null, so last char not &quot;\&quot;
<span style="color:maroon">TRANGROUP:3F42                 </span><span style="color:navy">mov     dx, offset </span>badcd_ptr
<span style="color:maroon">TRANGROUP:3F45                 </span><span style="color:navy">mov     al, &#039;</span><span style="color:green">:&#039;
</span><span style="color:maroon">TRANGROUP:3F47                 </span><span style="color:navy">cmp     [di-</span><span style="color:green">2</span><span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:3F4A                 </span><span style="color:navy">jnz     short </span>CERROR4J  ; it&#039;s not &quot;d:\&quot;, exit with error msg
<span style="color:maroon">TRANGROUP:3F4C                 </span><span style="color:navy">mov     [byte ptr bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">2 </span>; [bp+VARSTRUC.ISDIR],2
<span style="color:maroon">TRANGROUP:3F4C                                         </span>; destination &#039;is a directory&#039;
<span style="color:maroon">TRANGROUP:3F50                 </span><span style="color:navy">or      [byte ptr bp+</span><span style="color:#ff8000">4</span><span style="color:navy">], </span><span style="color:green">6 </span>; [bp+VARSTRUC.INFO],6
<span style="color:maroon">TRANGROUP:3F50                                         </span>; destination wildcarded and contains path character
<span style="color:maroon">TRANGROUP:3F54                 </span><span style="color:navy">call    </span>SETSTARS
<span style="color:maroon">TRANGROUP:3F57
TRANGROUP:3F57 </span>CHKSWTCHES<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3F57                 </span><span style="color:navy">mov     ax, [</span>ARGTS<span style="color:navy">]     </span>; [AllSwitch]  ; AX = all switch flags
<span style="color:maroon">TRANGROUP:3F5A                 </span><span style="color:navy">test    ax, </span><span style="color:green">10h         </span>; SwitchV
<span style="color:maroon">TRANGROUP:3F5D                 </span><span style="color:navy">jz      short </span>NOVERIF   ; no /v, no verify
<span style="color:maroon">TRANGROUP:3F5F                 </span><span style="color:navy">mov     ah, </span><span style="color:green">54h         </span>; Get_Verify_On_Write
<span style="color:maroon">TRANGROUP:3F61                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET VERIFY FLAG
<span style="color:maroon">TRANGROUP:3F61                                         </span>; Return: AL = 00h if flag OFF
<span style="color:maroon">TRANGROUP:3F61                                         </span>; AL = 01h if flag ON
<span style="color:maroon">TRANGROUP:3F63                 </span><span style="color:navy">push    ds
</span><span style="color:maroon">TRANGROUP:3F64                 </span><span style="color:navy">mov     ds, [</span>RESSEG<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:3F68                 </span>assume ds:RESGROUP
<span style="color:maroon">TRANGROUP:3F68                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:maroon">TRANGROUP:3F6A                 </span><span style="color:navy">mov     [</span>VerVal<span style="color:navy">], ax    </span>; save current verify flag
<span style="color:maroon">TRANGROUP:3F6D                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:3F6E                 </span>assume ds:nothing
<span style="color:maroon">TRANGROUP:3F6E                 </span><span style="color:navy">mov     ax, </span><span style="color:green">2E01h       </span>; (SET_VERIFY_ON_WRITE&lt;&lt;8)|1
<span style="color:maroon">TRANGROUP:3F71                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET VERIFY FLAG
<span style="color:maroon">TRANGROUP:3F71                                         </span>; DL = 00h, AL = 01h VERIFY on / 00h VERIFY off
<span style="color:maroon">TRANGROUP:3F73
TRANGROUP:3F73 </span>NOVERIF<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3F73                 </span><span style="color:navy">xor     bp, bp          </span>; BP = switch flags accumulator
<span style="color:maroon">TRANGROUP:3F75                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h         </span>; SI = ptr into command line
<span style="color:maroon">TRANGROUP:3F78                 </span><span style="color:navy">mov     bl, </span><span style="color:#ff8000">2Bh </span><span style="color:gray">; &#039;+&#039;   </span>; BL = special CParse delimiter = &quot;+&quot;
<span style="color:maroon">TRANGROUP:3F7A
TRANGROUP:3F7A </span>SCANFSRC<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3F7A                 </span><span style="color:navy">mov     di, offset </span>ScanBuf ; DI = ptr to pathname buf
<span style="color:maroon">TRANGROUP:3F7D                 </span><span style="color:navy">call    </span>cparse          ; parse first source pathname
<span style="color:maroon">TRANGROUP:3F80                 </span><span style="color:navy">test    bh, </span><span style="color:green">1           </span>; switch?
<span style="color:maroon">TRANGROUP:3F83                 </span><span style="color:navy">jnz     short </span>SCANFSRC  ; yes, try again
<span style="color:maroon">TRANGROUP:3F85                 </span><span style="color:navy">or      [ds:</span>DestSwitch<span style="color:navy">], bp </span>; include copy-wide switches on dest
<span style="color:maroon">TRANGROUP:3F89                 </span><span style="color:navy">test    bp, </span><span style="color:green">8           </span>; SWITCHB
<span style="color:maroon">TRANGROUP:3F8D                 </span><span style="color:navy">jnz     short </span>NOSETCASC ; /b - explicit binary copy
<span style="color:maroon">TRANGROUP:3F8F                 </span><span style="color:navy">cmp     [ds:</span>PARM1<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; cmp byte [Concat],0
<span style="color:maroon">TRANGROUP:3F94                 </span><span style="color:navy">jz      short </span>NOSETCASC ; we&#039;re not concatenating
<span style="color:maroon">TRANGROUP:3F96                 </span><span style="color:navy">mov     [ds:</span>ASCII<span style="color:navy">], </span><span style="color:#ff8000">4   </span>; SWITCHA ; set ascii copy
<span style="color:maroon">TRANGROUP:3F9B
TRANGROUP:3F9B </span>NOSETCASC<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3F9B                 </span><span style="color:navy">call    </span>SOURCE_SET      ; set source variables
<span style="color:maroon">TRANGROUP:3F9E                 </span><span style="color:navy">call    </span>FRSTSRC         ; set up first source copy
<span style="color:maroon">TRANGROUP:3FA1                 </span><span style="color:navy">jmp     </span>FIRSTENT        ; jump into the copy loop
<span style="color:black">TRANGROUP:3FA4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:3FA4 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR DOCOPY
</span><span style="color:black">TRANGROUP:3FA4
TRANGROUP:3FA4 </span>ENDCOPY<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3FA4                 </span><span style="color:navy">call    </span>CLOSEDEST       ; Close destination
<span style="color:black">TRANGROUP:3FA7
TRANGROUP:3FA7 </span>ENDCOPY2<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3FA7                 </span><span style="color:navy">mov     dx, offset </span>copied_ptr ; display # (destination) files copied
<span style="color:black">TRANGROUP:3FAA                 </span><span style="color:navy">mov     si, [ds:</span>FileCnt<span style="color:navy">]
</span><span style="color:black">TRANGROUP:3FAE                 </span><span style="color:navy">mov     [ds:</span>Copy_num<span style="color:navy">], si
</span><span style="color:black">TRANGROUP:3FB2                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:3FB5                 </span><span style="color:navy">jmp     </span>TCOMMAND        ; stack could be messed up
<span style="color:black">TRANGROUP:3FB5 </span><span style="color:gray">; END OF FUNCTION CHUNK FOR DOCOPY
</span><span style="color:maroon">TRANGROUP:3FB8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:3FB8
TRANGROUP:3FB8 </span>SRCNONEXIST<span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:3FB8                 </span><span style="color:navy">cmp     [ds:</span>PARM1<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; cmp byte [Concat],0
<span style="color:maroon">TRANGROUP:3FBD                 </span><span style="color:navy">jnz     short </span>NEXTSRC   ; concatenating - go on to next source
<span style="color:maroon">TRANGROUP:3FBF                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; ext_msg_class ; extended error msg
<span style="color:maroon">TRANGROUP:3FC4                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:maroon">TRANGROUP:3FC7                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], </span><span style="color:#ff8000">2 </span>; ERROR_FILE_NOT_FOUND
<span style="color:maroon">TRANGROUP:3FCD                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], offset </span>SrcBuf ; point at bad pathname
<span style="color:maroon">TRANGROUP:3FD3                 </span><span style="color:navy">mov     [ds:</span>extend_buf_sub<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; one_subst ; 1 substitution
<span style="color:maroon">TRANGROUP:3FD8                 </span><span style="color:navy">jmp     </span>COPYERR         ; print msg and clean up
<span style="color:black">TRANGROUP:3FDB
TRANGROUP:3FDB </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3FDB
TRANGROUP:3FDB
TRANGROUP:3FDB </span>proc            SOURCEPROC near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3FDB                 </span><span style="color:navy">call    </span>SOURCE_SET
<span style="color:black">TRANGROUP:3FDE                 </span><span style="color:navy">cmp     [ds:</span>PARM1<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; cmp byte [Concat],0
<span style="color:black">TRANGROUP:3FE3                 </span><span style="color:navy">jnz     short </span>LEAVECFLAG
<span style="color:black">TRANGROUP:3FE3 </span>endp            SOURCEPROC
<span style="color:black">TRANGROUP:3FE3
TRANGROUP:3FE5
TRANGROUP:3FE5 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:3FE5
TRANGROUP:3FE5
TRANGROUP:3FE5 </span>proc            FRSTSRC near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3FE5                 </span><span style="color:navy">xor     ax, ax          </span>; 0
<span style="color:black">TRANGROUP:3FE7                 </span><span style="color:navy">mov     [ds:</span>CFLAG<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:3FEA                 </span><span style="color:navy">mov     [ds:</span>NXTADD<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:3FED                 </span><span style="color:navy">mov     [ds:</span>SPECDRV<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:3FF0
TRANGROUP:3FF0 </span>LEAVECFLAG<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:3FF0                 </span><span style="color:navy">mov     [ds:</span>SRCPT<span style="color:navy">], si
</span><span style="color:black">TRANGROUP:3FF4                 </span><span style="color:navy">mov     di, offset </span>USERDIR1
<span style="color:black">TRANGROUP:3FF7                 </span><span style="color:navy">mov     bp, offset </span>SrcIsDir ; SrcVars
<span style="color:black">TRANGROUP:3FFA                 </span><span style="color:navy">mov     bx, </span><span style="color:green">40h         </span>; deny_none|read_open_mode
<span style="color:black">TRANGROUP:3FFD                 </span><span style="color:navy">call    </span>BUILDPATH
<span style="color:black">TRANGROUP:4000                 </span><span style="color:navy">mov     si, [ds:</span>SrcTail<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4004                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4004 </span>endp            FRSTSRC
<span style="color:black">TRANGROUP:4004
</span><span style="color:maroon">TRANGROUP:4005 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:4005
TRANGROUP:4005 </span>NEXTSRC<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4005                 </span><span style="color:navy">cmp     [ds:</span>PLUS<span style="color:navy">], </span><span style="color:#ff8000">0    </span>; byte
<span style="color:maroon">TRANGROUP:400A                 </span><span style="color:navy">jnz     short </span>MORECP
<span style="color:maroon">TRANGROUP:400C
TRANGROUP:400C </span>ENDCOPYJ2<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:400C                 </span><span style="color:navy">jmp     short </span>ENDCOPY
<span style="color:maroon">TRANGROUP:400E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:400E
TRANGROUP:400E </span>MORECP<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:400E                 </span><span style="color:navy">xor     bp, bp
</span><span style="color:maroon">TRANGROUP:4010                 </span><span style="color:navy">mov     si, [ds:</span>SRCPT<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:4014                 </span><span style="color:navy">mov     bl, </span><span style="color:#ff8000">2Bh </span><span style="color:gray">; &#039;+&#039;   </span>; PLUS_CHR
<span style="color:maroon">TRANGROUP:4016
TRANGROUP:4016 </span>SCANSRC<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4016                 </span><span style="color:navy">mov     di, offset </span>ScanBuf
<span style="color:maroon">TRANGROUP:4019                 </span><span style="color:navy">call    </span>cparse
<span style="color:maroon">TRANGROUP:401C                 </span><span style="color:navy">jb      short </span>ENDCOPYJ2
<span style="color:maroon">TRANGROUP:401E                 </span><span style="color:navy">test    bh, </span><span style="color:green">80h
</span><span style="color:maroon">TRANGROUP:4021                 </span><span style="color:navy">jz      short </span>ENDCOPYJ2 ; no &quot;+&quot; delimiter - we&#039;re done
<span style="color:maroon">TRANGROUP:4023                 </span><span style="color:navy">test    bh, </span><span style="color:green">1
</span><span style="color:maroon">TRANGROUP:4026                 </span><span style="color:navy">jnz     short </span>SCANSRC   ; switch found - keep looking
<span style="color:maroon">TRANGROUP:4028                 </span><span style="color:navy">call    </span>SOURCEPROC
<span style="color:maroon">TRANGROUP:402B                 </span><span style="color:navy">cmp     [ds:</span>comma<span style="color:navy">], </span><span style="color:#ff8000">1   </span>; was +,, found last time?
<span style="color:maroon">TRANGROUP:4030                 </span><span style="color:navy">jnz     short </span>NOSTAMP   ; no - try for a file
<span style="color:maroon">TRANGROUP:4032                 </span><span style="color:navy">mov     [ds:</span>plus_comma<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; yes - set flag
<span style="color:maroon">TRANGROUP:4037                 </span><span style="color:navy">jmp     </span>SRCNONEXIST     ; we know we won&#039;t find it
<span style="color:maroon">TRANGROUP:403A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:403A
TRANGROUP:403A </span>NOSTAMP<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:403A                 </span><span style="color:navy">mov     [ds:</span>plus_comma<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; reset +,, flag
<span style="color:maroon">TRANGROUP:403F
TRANGROUP:403F </span>FIRSTENT<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:403F                 </span><span style="color:navy">mov     di, </span><span style="color:green">5Ch         </span>; FCB
<span style="color:maroon">TRANGROUP:4042                 </span><span style="color:navy">mov     ax, </span><span style="color:green">2900h
</span><span style="color:maroon">TRANGROUP:4045                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - PARSE FILENAME
<span style="color:maroon">TRANGROUP:4045                                         </span>; DS:SI -&gt; string to parse
<span style="color:maroon">TRANGROUP:4045                                         </span>; ES:DI -&gt; buffer to fill with unopened FCB
<span style="color:maroon">TRANGROUP:4045                                         </span>; AL = bit mask to control parsing
<span style="color:maroon">TRANGROUP:4047                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">0 </span>; did we parse the whole thing?
<span style="color:maroon">TRANGROUP:404A                 </span><span style="color:navy">jnz     short </span>SRCHDONE  ; no, error, simulate &#039;not found&#039;
<span style="color:maroon">TRANGROUP:404C                 </span><span style="color:navy">mov     ax, [word ptr ds:</span>SrcBuf<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:404F                 </span><span style="color:navy">cmp     ah, &#039;</span><span style="color:green">:&#039;
</span><span style="color:maroon">TRANGROUP:4052                 </span><span style="color:navy">jz      short </span>DRVSPEC1
<span style="color:maroon">TRANGROUP:4054                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;   </span>; AL = drive &#039;letter&#039; for current drive
<span style="color:maroon">TRANGROUP:4056
TRANGROUP:4056 </span>DRVSPEC1<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4056                 </span><span style="color:navy">or      al, </span><span style="color:green">20h         </span>; AL = lowercase drive letter
<span style="color:maroon">TRANGROUP:4058                 </span><span style="color:navy">sub     al, </span><span style="color:green">60h
</span><span style="color:maroon">TRANGROUP:405A                 </span><span style="color:navy">mov     [ds:</span><span style="color:green">5Ch</span><span style="color:navy">], al    </span>; mov [FCB],al ; AL = drive id (0=current,1=A,..)
<span style="color:maroon">TRANGROUP:405D                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">11h         </span>; Dir_Search_First
<span style="color:maroon">TRANGROUP:405D                                         </span>; AH = &#039;Find First File&#039;
<span style="color:maroon">TRANGROUP:405F                 </span><span style="color:navy">call    </span>SEARCH
<span style="color:maroon">TRANGROUP:4062
TRANGROUP:4062 </span>SRCHDONE<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4062                 </span><span style="color:navy">pushf
</span><span style="color:maroon">TRANGROUP:4063                 </span><span style="color:navy">call    </span>RestUDir1       ; restore users current directory
<span style="color:maroon">TRANGROUP:4066                 </span><span style="color:navy">popf
</span><span style="color:maroon">TRANGROUP:4067                 </span><span style="color:navy">jz      short </span>NEXTAMBIG0
<span style="color:maroon">TRANGROUP:4069                 </span><span style="color:navy">jmp     </span>SRCNONEXIST
<span style="color:maroon">TRANGROUP:406C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:406C
TRANGROUP:406C </span>NEXTAMBIG0<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:406C                 </span><span style="color:navy">xor     al, al
</span><span style="color:maroon">TRANGROUP:406E                 </span><span style="color:navy">xchg    al, [ds:</span>FRSTSRCH<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:4072                 </span><span style="color:navy">or      al, al
</span><span style="color:maroon">TRANGROUP:4074                 </span><span style="color:navy">jz      short </span>NEXTAMBIG
<span style="color:maroon">TRANGROUP:4076
TRANGROUP:4076 </span>SETNMEL<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4076                 </span><span style="color:navy">mov     cx, </span><span style="color:green">12
</span><span style="color:maroon">TRANGROUP:4079                 </span><span style="color:navy">mov     di, offset </span>SDIRBUF
<span style="color:maroon">TRANGROUP:407C                 </span><span style="color:navy">mov     si, offset </span>BWDBUF ; DIRBUF
<span style="color:maroon">TRANGROUP:407F                 </span><span style="color:navy">rep movsb
</span><span style="color:maroon">TRANGROUP:4081
TRANGROUP:4081 </span>NEXTAMBIG<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4081                 </span><span style="color:navy">xor     al, al
</span><span style="color:maroon">TRANGROUP:4083                 </span><span style="color:navy">mov     [ds:</span>NOWRITE<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:4086                 </span><span style="color:navy">mov     di, [ds:</span>SrcTail<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:408A                 </span><span style="color:navy">mov     si, (offset </span>BWDBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">) </span>; offset DIRBUF+1
<span style="color:maroon">TRANGROUP:408D                 </span><span style="color:navy">call    </span>FCB_TO_ASCZ
<span style="color:maroon">TRANGROUP:4090
TRANGROUP:4090 </span>MELDO0<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4090                 </span><span style="color:navy">cmp     [ds:</span>cox_y_override<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; /Y switch override (question) enabled ?
<span style="color:maroon">TRANGROUP:4095                 </span><span style="color:navy">jz      short </span>MELDO     ; no
<span style="color:maroon">TRANGROUP:4097                 </span><span style="color:navy">call    </span>BUILDDEST
<span style="color:maroon">TRANGROUP:409A                 </span><span style="color:navy">mov     si, offset </span>SrcBuf
<span style="color:maroon">TRANGROUP:409D                 </span><span style="color:navy">mov     di, offset </span>SRCXNAME
<span style="color:maroon">TRANGROUP:40A0                 </span><span style="color:navy">mov     ax, </span><span style="color:green">6000h
</span><span style="color:maroon">TRANGROUP:40A3                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - RESOLVE PATH STRING TO CANONICAL PATH STRING
<span style="color:maroon">TRANGROUP:40A3                                         </span>; DS:SI -&gt; ASCIZ relative path string or directory name
<span style="color:maroon">TRANGROUP:40A3                                         </span>; ES:DI -&gt; 128-byte buffer for ASCIZ canonical fully qualified name
<span style="color:maroon">TRANGROUP:40A5                 </span><span style="color:navy">call    </span>COMPNAME
<span style="color:maroon">TRANGROUP:40A8                 </span><span style="color:navy">jnz     short </span>MELDO1    ; different file names
<span style="color:maroon">TRANGROUP:40AA                 </span><span style="color:navy">cmp     [ds:</span>PARM1<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; cmp byte [Concat],0
<span style="color:maroon">TRANGROUP:40AF                 </span><span style="color:navy">jnz     short </span>MELDO1    ; concatenating
<span style="color:maroon">TRANGROUP:40B1                 </span><span style="color:navy">mov     dx, offset </span>file_name_ptr
<span style="color:maroon">TRANGROUP:40B4                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:40B7                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:maroon">TRANGROUP:40BA                 </span><span style="color:navy">mov     dx, offset </span>OVERWR_PTR ; &quot;File cannot be copied onto itself&quot;
<span style="color:maroon">TRANGROUP:40BD                 </span><span style="color:navy">jmp     </span>COPYERR
<span style="color:maroon">TRANGROUP:40C0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:40C0
TRANGROUP:40C0 </span>MELDO1<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:40C0                 </span><span style="color:navy">cmp     [ds:</span>CFLAG<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; destination file created flag
<span style="color:maroon">TRANGROUP:40C5                 </span><span style="color:navy">jnz     short </span>MELDO     ; yes, new (created) file
<span style="color:maroon">TRANGROUP:40C7                 </span><span style="color:navy">call    </span>get_answer_YNA
<span style="color:maroon">TRANGROUP:40CA                 </span><span style="color:navy">jb      short </span>MELDO2    ; answer is no
<span style="color:maroon">TRANGROUP:40CC                 </span><span style="color:navy">cmp     [ds:</span>PARM1<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; cmp byte [Concat],0
<span style="color:maroon">TRANGROUP:40D1                 </span><span style="color:navy">jnz     short </span>MELDO
<span style="color:maroon">TRANGROUP:40D3                 </span><span style="color:navy">cmp     [ds:</span>cox_dest_file<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; is there a (valid) target file ?
<span style="color:maroon">TRANGROUP:40D8                 </span><span style="color:navy">jnz     short </span>DOREAD    ; yes
<span style="color:maroon">TRANGROUP:40DA                 </span><span style="color:navy">jmp     short </span>MELDO     ; no, destination/target file does not exist
<span style="color:maroon">TRANGROUP:40DC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:40DC
TRANGROUP:40DC </span>MELDO2<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:40DC                 </span><span style="color:navy">cmp     [ds:</span>MELCOPY<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; is &#039;Mel Hallerman copy&#039; false ?
<span style="color:maroon">TRANGROUP:40E1                 </span><span style="color:navy">jnz     short </span>MELDO3    ; no (, it is true)
<span style="color:maroon">TRANGROUP:40E3                 </span><span style="color:navy">cmp     [ds:</span>PARM1<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; cmp byte [Concat],0
<span style="color:maroon">TRANGROUP:40E8                 </span><span style="color:navy">jz      short </span>MELDO4
<span style="color:maroon">TRANGROUP:40EA
TRANGROUP:40EA </span>MELDO3<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:40EA                 </span><span style="color:navy">mov     [ds:</span>SPECDRV<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; mov byte [DestClosed],1
<span style="color:maroon">TRANGROUP:40EF                 </span><span style="color:navy">jmp     </span>ENDCOPY
<span style="color:maroon">TRANGROUP:40F2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:40F2
TRANGROUP:40F2 </span>MELDO4<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:40F2                 </span><span style="color:navy">call    </span>SEARCHNEXT
<span style="color:maroon">TRANGROUP:40F5                 </span><span style="color:navy">jz      short </span>NEXTAMBIG
<span style="color:maroon">TRANGROUP:40F7                 </span><span style="color:navy">cmp     [ds:</span>cox_src_file<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:40FC                 </span><span style="color:navy">jz      short </span>MELDO5
<span style="color:maroon">TRANGROUP:40FE                 </span><span style="color:navy">jmp     </span>NEXTSRC
<span style="color:maroon">TRANGROUP:4101 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:4101
TRANGROUP:4101 </span>MELDO5<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4101                 </span><span style="color:navy">mov     [ds:</span>SPECDRV<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; mov byte [DestClosed],1
<span style="color:maroon">TRANGROUP:4106                 </span><span style="color:navy">jmp     </span>NEXTSRC
<span style="color:maroon">TRANGROUP:4109 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:4109
TRANGROUP:4109 </span>MELDO<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4109                 </span><span style="color:navy">cmp     [ds:</span>PARM1<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; cmp byte [Concat],0
<span style="color:maroon">TRANGROUP:410E                 </span><span style="color:navy">jnz     short </span>SHOWCPNAM ; concatenating - show name
<span style="color:maroon">TRANGROUP:4110                 </span><span style="color:navy">test    [ds:</span>SrcInfo<span style="color:navy">], </span><span style="color:green">2 </span>; wildcard - show name
<span style="color:maroon">TRANGROUP:4115                 </span><span style="color:navy">jz      short </span>DOREAD
<span style="color:maroon">TRANGROUP:4117
TRANGROUP:4117 </span>SHOWCPNAM<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4117                 </span><span style="color:navy">mov     dx, offset </span>file_name_ptr
<span style="color:maroon">TRANGROUP:411A                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:411D                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:maroon">TRANGROUP:4120
TRANGROUP:4120 </span>DOREAD<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4120                 </span><span style="color:navy">call    </span>DOCOPY
<span style="color:maroon">TRANGROUP:4123                 </span><span style="color:navy">cmp     [ds:</span>PARM1<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; cmp byte [Concat],0
<span style="color:maroon">TRANGROUP:4128                 </span><span style="color:navy">jnz     short </span>NODCLOSE
<span style="color:maroon">TRANGROUP:412A                 </span><span style="color:navy">call    </span>CLOSEDEST
<span style="color:maroon">TRANGROUP:412D                 </span><span style="color:navy">jb      short </span>NODCLOSE
<span style="color:maroon">TRANGROUP:412F                 </span><span style="color:navy">mov     [ds:</span>CFLAG<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:4134
TRANGROUP:4134 </span>NODCLOSE<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4134                 </span><span style="color:navy">cmp     [ds:</span>PARM1<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; cmp byte [Concat],0
<span style="color:maroon">TRANGROUP:4139                 </span><span style="color:navy">jz      short </span>NOFLUSH
<span style="color:maroon">TRANGROUP:413B                 </span><span style="color:navy">call    </span>FlshFil
<span style="color:maroon">TRANGROUP:413E                 </span><span style="color:navy">test    [ds:</span>MELCOPY<span style="color:navy">], </span><span style="color:green">0FFh
</span><span style="color:maroon">TRANGROUP:4143                 </span><span style="color:navy">jnz     short </span>DOMELCOPY
<span style="color:maroon">TRANGROUP:4145
TRANGROUP:4145 </span>NOFLUSH<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4145                 </span><span style="color:navy">call    </span>SEARCHNEXT
<span style="color:maroon">TRANGROUP:4148                 </span><span style="color:navy">jnz     short </span>NEXTSRCJ
<span style="color:maroon">TRANGROUP:414A                 </span><span style="color:navy">mov     [ds:</span>SPECDRV<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; mov byte [DestClosed],0
<span style="color:maroon">TRANGROUP:414F                 </span><span style="color:navy">jmp     </span>NEXTAMBIG
<span style="color:maroon">TRANGROUP:4152 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:4152
TRANGROUP:4152 </span>DOMELCOPY<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4152                 </span><span style="color:navy">cmp     [ds:</span>MELCOPY<span style="color:navy">], </span><span style="color:#ff8000">0FFh
</span><span style="color:maroon">TRANGROUP:4157                 </span><span style="color:navy">jz      short </span>CONTMEL
<span style="color:maroon">TRANGROUP:4159                 </span><span style="color:navy">mov     si, [ds:</span>SRCPT<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:415D                 </span><span style="color:navy">mov     [ds:</span>MELSTART<span style="color:navy">], si
</span><span style="color:maroon">TRANGROUP:4161                 </span><span style="color:navy">mov     [ds:</span>MELCOPY<span style="color:navy">], </span><span style="color:#ff8000">0FFh
</span><span style="color:maroon">TRANGROUP:4166
TRANGROUP:4166 </span>CONTMEL<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:4166                 </span><span style="color:navy">xor     bp, bp
</span><span style="color:maroon">TRANGROUP:4168                 </span><span style="color:navy">mov     si, [ds:</span>SRCPT<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:416C                 </span><span style="color:navy">mov     bl, </span><span style="color:#ff8000">2Bh </span><span style="color:gray">; &#039;+&#039;   </span>; PLUS_CHR
<span style="color:maroon">TRANGROUP:416E
TRANGROUP:416E </span>SCANSRC2<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:416E                 </span><span style="color:navy">mov     di, offset </span>ScanBuf
<span style="color:maroon">TRANGROUP:4171                 </span><span style="color:navy">call    </span>cparse
<span style="color:maroon">TRANGROUP:4174                 </span><span style="color:navy">test    bh, </span><span style="color:green">80h
</span><span style="color:maroon">TRANGROUP:4177                 </span><span style="color:navy">jz      short </span>NEXTMEL
<span style="color:maroon">TRANGROUP:4179                 </span><span style="color:navy">test    bh, </span><span style="color:green">1
</span><span style="color:maroon">TRANGROUP:417C                 </span><span style="color:navy">jnz     short </span>SCANSRC2
<span style="color:maroon">TRANGROUP:417E                 </span><span style="color:navy">call    </span>SOURCEPROC
<span style="color:maroon">TRANGROUP:4181                 </span><span style="color:navy">call    </span>RestUDir1
<span style="color:maroon">TRANGROUP:4184                 </span><span style="color:navy">mov     di, offset </span>IDLEN ; DESTFCB2
<span style="color:maroon">TRANGROUP:4187                 </span><span style="color:navy">mov     ax, </span><span style="color:green">2900h       </span>; Parse_File_Descriptor*256
<span style="color:maroon">TRANGROUP:418A                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - PARSE FILENAME
<span style="color:maroon">TRANGROUP:418A                                         </span>; DS:SI -&gt; string to parse
<span style="color:maroon">TRANGROUP:418A                                         </span>; ES:DI -&gt; buffer to fill with unopened FCB
<span style="color:maroon">TRANGROUP:418A                                         </span>; AL = bit mask to control parsing
<span style="color:maroon">TRANGROUP:418C                 </span><span style="color:navy">mov     bx, (offset </span>SDIRBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">)
</span><span style="color:maroon">TRANGROUP:418F                 </span><span style="color:navy">mov     si, offset </span>ID   ; DESTFCB2+1
<span style="color:maroon">TRANGROUP:4192                 </span><span style="color:navy">mov     di, [ds:</span>SrcTail<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:4196                 </span><span style="color:navy">call    </span>BUILDNAME
<span style="color:maroon">TRANGROUP:4199                 </span><span style="color:navy">cmp     [ds:</span>PARM1<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; cmp byte [Concat],0
<span style="color:maroon">TRANGROUP:419E                 </span><span style="color:navy">jz      short </span>MELDOJ
<span style="color:maroon">TRANGROUP:41A0                 </span><span style="color:navy">mov     [ds:</span>NOWRITE<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:41A5
TRANGROUP:41A5 </span>MELDOJ<span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:41A5                 </span><span style="color:navy">jmp     </span>MELDO0
<span style="color:maroon">TRANGROUP:41A8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:41A8
TRANGROUP:41A8 </span>NEXTSRCJ<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:41A8                 </span><span style="color:navy">jmp     </span>NEXTSRC
<span style="color:maroon">TRANGROUP:41AB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:41AB
TRANGROUP:41AB </span>NEXTMEL<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:41AB                 </span><span style="color:navy">call    </span>CLOSEDEST
<span style="color:maroon">TRANGROUP:41AE                 </span><span style="color:navy">xor     ax, ax          </span>; 0
<span style="color:maroon">TRANGROUP:41B0                 </span><span style="color:navy">mov     [ds:</span>CFLAG<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:41B3                 </span><span style="color:navy">mov     [ds:</span>NXTADD<span style="color:navy">], ax
</span><span style="color:maroon">TRANGROUP:41B6                 </span><span style="color:navy">mov     [ds:</span>SPECDRV<span style="color:navy">], al
</span><span style="color:maroon">TRANGROUP:41B9                 </span><span style="color:navy">mov     si, [ds:</span>MELSTART<span style="color:navy">]
</span><span style="color:maroon">TRANGROUP:41BD                 </span><span style="color:navy">mov     [ds:</span>SRCPT<span style="color:navy">], si
</span><span style="color:maroon">TRANGROUP:41C1                 </span><span style="color:navy">call    </span>SEARCHNEXT
<span style="color:maroon">TRANGROUP:41C4                 </span><span style="color:navy">jz      short </span>SETNMELJ
<span style="color:maroon">TRANGROUP:41C6                 </span><span style="color:navy">jmp     </span>ENDCOPY2
<span style="color:maroon">TRANGROUP:41C9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:41C9
TRANGROUP:41C9 </span>SETNMELJ<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:41C9                 </span><span style="color:navy">jmp     </span>SETNMEL
<span style="color:black">TRANGROUP:41CC
TRANGROUP:41CC </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:41CC
TRANGROUP:41CC
TRANGROUP:41CC </span>proc            SEARCHNEXT near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:41CC                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">12h         </span>; Dir_Search_Next
<span style="color:black">TRANGROUP:41CE                 </span><span style="color:navy">test    [ds:</span>SrcInfo<span style="color:navy">], </span><span style="color:green">2
</span><span style="color:black">TRANGROUP:41D3                 </span><span style="color:navy">jnz     short </span>SEARCH    ; do search-next if ambig
<span style="color:black">TRANGROUP:41D5                 </span><span style="color:navy">or      ah, ah          </span>; reset zero flag
<span style="color:black">TRANGROUP:41D7                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:41D7 </span>endp            SEARCHNEXT
<span style="color:black">TRANGROUP:41D7
TRANGROUP:41D8
TRANGROUP:41D8 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:41D8
TRANGROUP:41D8
TRANGROUP:41D8 </span>proc            SEARCH near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:41D8                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:41D9                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">1Ah         </span>; Set_DMA
<span style="color:black">TRANGROUP:41DB                 </span><span style="color:navy">mov     dx, offset </span>BWDBUF ; offset DIRBUF
<span style="color:black">TRANGROUP:41DE                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - SET DISK TRANSFER AREA ADDRESS
<span style="color:black">TRANGROUP:41DE                                         </span>; DS:DX -&gt; disk transfer buffer
<span style="color:black">TRANGROUP:41E0                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:41E1                 </span><span style="color:navy">mov     dx, </span><span style="color:green">5Ch         </span>; FCB
<span style="color:black">TRANGROUP:41E4                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; Do the search
<span style="color:black">TRANGROUP:41E6                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:41E8                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:41E8 </span>endp            SEARCH
<span style="color:black">TRANGROUP:41E8
TRANGROUP:41E9
TRANGROUP:41E9 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:41E9
TRANGROUP:41E9
TRANGROUP:41E9 </span>proc            DOCOPY near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:41E9
TRANGROUP:41E9 </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:3FA4 SIZE 00000014 BYTES
</span><span style="color:black">TRANGROUP:41E9
TRANGROUP:41E9                 </span><span style="color:navy">mov     si, offset </span>SrcBuf
<span style="color:black">TRANGROUP:41EC                 </span><span style="color:navy">mov     di, offset </span>SRCXNAME
<span style="color:black">TRANGROUP:41EF                 </span><span style="color:navy">mov     ax, </span><span style="color:green">6000h       </span>; xNameTrans*256
<span style="color:black">TRANGROUP:41F2                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - RESOLVE PATH STRING TO CANONICAL PATH STRING
<span style="color:black">TRANGROUP:41F2                                         </span>; DS:SI -&gt; ASCIZ relative path string or directory name
<span style="color:black">TRANGROUP:41F2                                         </span>; ES:DI -&gt; 128-byte buffer for ASCIZ canonical fully qualified name
<span style="color:black">TRANGROUP:41F4                 </span><span style="color:navy">mov     [ds:</span>IFNOTFLAG<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; mov byte [RDEOF],0
<span style="color:black">TRANGROUP:41F9                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">6C00h       </span>; ExtOpen shl 8
<span style="color:black">TRANGROUP:41FC                 </span><span style="color:navy">mov     bx, </span><span style="color:green">40h         </span>; deny_none|read_open_mode
<span style="color:black">TRANGROUP:41FF                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:4201                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">101h        </span>; read_open_flag
<span style="color:black">TRANGROUP:4204                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 4.0 - EXTENDED OPEN/CREATE
<span style="color:black">TRANGROUP:4204                                         </span>; BL = open mode as in AL for normal open (INT 21h/AH=3Dh)
<span style="color:black">TRANGROUP:4204                                         </span>; BH = flags, CX = create attribute, DL = action if file exists/does not exists
<span style="color:black">TRANGROUP:4204                                         </span>; DH = 00h (reserved), DS:SI -&gt; ASCIZ file name
<span style="color:black">TRANGROUP:4206                 </span><span style="color:navy">jb      short </span><span style="color:gray">Error_On_Source
</span><span style="color:black">TRANGROUP:4208                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:420A                 </span><span style="color:navy">mov     [ds:</span>SRCHAND<span style="color:navy">], bx
</span><span style="color:black">TRANGROUP:420E                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5700h       </span>; File_Times*256
<span style="color:black">TRANGROUP:4211                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET FILE&#039;S DATE/TIME
<span style="color:black">TRANGROUP:4211                                         </span>; BX = file handle
<span style="color:black">TRANGROUP:4213                 </span><span style="color:navy">jb      short </span><span style="color:gray">Error_On_Source
</span><span style="color:black">TRANGROUP:4215                 </span><span style="color:navy">mov     [ds:</span>CPDATE<span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:4219                 </span><span style="color:navy">mov     [ds:</span>CPTIME<span style="color:navy">], cx
</span><span style="color:black">TRANGROUP:421D                 </span><span style="color:navy">jmp     short </span><span style="color:gray">No_Copy_Xa
</span><span style="color:black">TRANGROUP:421F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:421F
TRANGROUP:421F </span><span style="color:gray">Error_On_Source</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:421F                 </span><span style="color:navy">call    </span>Set_Ext_Error_Msg
<span style="color:black">TRANGROUP:4222                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], offset </span>SrcBuf
<span style="color:black">TRANGROUP:4228                 </span><span style="color:navy">mov     [ds:</span>extend_buf_sub<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; one_subst
<span style="color:black">TRANGROUP:422D                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:4230                 </span><span style="color:navy">cmp     [ds:</span>SRCHAND<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; did we open the file?
<span style="color:black">TRANGROUP:4235                 </span><span style="color:navy">jz      short </span><span style="color:gray">No_Close_Src </span>; no - don&#039;t close
<span style="color:black">TRANGROUP:4237                 </span><span style="color:navy">call    </span>CLOSESRC
<span style="color:black">TRANGROUP:423A
TRANGROUP:423A </span><span style="color:gray">No_Close_Src</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:423A                 </span><span style="color:navy">cmp     [ds:</span>CFLAG<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; was destination created?
<span style="color:black">TRANGROUP:423F                 </span><span style="color:navy">jz      short </span><span style="color:gray">EndCopyJ3 </span>; no - just cleanup and exit
<span style="color:black">TRANGROUP:4241                 </span><span style="color:navy">jmp     </span>ENDCOPY         ; clean up concatenation and exit
<span style="color:black">TRANGROUP:4244 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4244
TRANGROUP:4244 </span><span style="color:gray">EndCopyJ3</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4244                 </span><span style="color:navy">jmp     </span>ENDCOPY2
<span style="color:black">TRANGROUP:4247 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4247
TRANGROUP:4247 </span><span style="color:gray">No_Copy_Xa</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4247                 </span><span style="color:navy">mov     bx, [ds:</span>SRCHAND<span style="color:navy">]
</span><span style="color:black">TRANGROUP:424B                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4400h
</span><span style="color:black">TRANGROUP:424E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL - GET DEVICE INFORMATION
<span style="color:black">TRANGROUP:424E                                         </span>; BX = file or device handle
<span style="color:black">TRANGROUP:4250                 </span><span style="color:navy">and     dl, </span><span style="color:green">80h         </span>; devid_ISDEV
<span style="color:black">TRANGROUP:4253                 </span><span style="color:navy">mov     [ds:</span>SRCISDEV<span style="color:navy">], dl
</span><span style="color:black">TRANGROUP:4257                 </span><span style="color:navy">jz      short </span><span style="color:gray">COPYLP    </span>; source not a device
<span style="color:black">TRANGROUP:4259                 </span><span style="color:navy">cmp     [ds:</span>BINARY<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:425E                 </span><span style="color:navy">jz      short </span><span style="color:gray">COPYLP    </span>; ascii device ok
<span style="color:black">TRANGROUP:4260                 </span><span style="color:navy">mov     dx, offset </span>INBDEV_PTR ; cannot do binary input
<span style="color:black">TRANGROUP:4263                 </span><span style="color:navy">jmp     </span>COPYERR
<span style="color:black">TRANGROUP:4266 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4266
TRANGROUP:4266 </span><span style="color:gray">COPYLP</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4266                 </span><span style="color:navy">mov     bx, [ds:</span>SRCHAND<span style="color:navy">]
</span><span style="color:black">TRANGROUP:426A                 </span><span style="color:navy">mov     cx, [ds:</span>BYTCNT<span style="color:navy">]
</span><span style="color:black">TRANGROUP:426E                 </span><span style="color:navy">mov     dx, [ds:</span>NXTADD<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4272                 </span><span style="color:navy">sub     cx, dx          </span>; compute available space
<span style="color:black">TRANGROUP:4274                 </span><span style="color:navy">jnz     short </span><span style="color:gray">GOTROOM
</span><span style="color:black">TRANGROUP:4276                 </span><span style="color:navy">call    </span>FlshFil
<span style="color:black">TRANGROUP:4279                 </span><span style="color:navy">cmp     [ds:</span>TERMREAD<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:427E                 </span><span style="color:navy">jnz     short </span>CLOSESRC
<span style="color:black">TRANGROUP:4280                 </span><span style="color:navy">mov     cx, [ds:</span>BYTCNT<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4284
TRANGROUP:4284 </span><span style="color:gray">GOTROOM</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4284                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:4285                 </span><span style="color:navy">mov     ds, [ds:</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4289                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Fh
</span><span style="color:black">TRANGROUP:428B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - READ FROM FILE WITH HANDLE
<span style="color:black">TRANGROUP:428B                                         </span>; BX = file handle, CX = number of bytes to read
<span style="color:black">TRANGROUP:428B                                         </span>; DS:DX -&gt; buffer
<span style="color:black">TRANGROUP:428D                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:428E                 </span><span style="color:navy">jb      short </span><span style="color:gray">Error_On_Source
</span><span style="color:black">TRANGROUP:4290                 </span><span style="color:navy">mov     cx, ax          </span>; get count
<span style="color:black">TRANGROUP:4292                 </span><span style="color:navy">jcxz    short </span>CLOSESRC  ; no more to read
<span style="color:black">TRANGROUP:4294                 </span><span style="color:navy">cmp     [ds:</span>SRCISDEV<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4299                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOTESTA   </span>; is a device, ascii mode
<span style="color:black">TRANGROUP:429B                 </span><span style="color:navy">cmp     [ds:</span>ASCII<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:42A0                 </span><span style="color:navy">jz      short </span><span style="color:gray">BINREAD
</span><span style="color:black">TRANGROUP:42A2
TRANGROUP:42A2 </span><span style="color:gray">NOTESTA</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:42A2                 </span><span style="color:navy">mov     dx, cx
</span><span style="color:black">TRANGROUP:42A4                 </span><span style="color:navy">mov     di, [ds:</span>NXTADD<span style="color:navy">]
</span><span style="color:black">TRANGROUP:42A8                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">1Ah
</span><span style="color:black">TRANGROUP:42AA                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:42AB                 </span><span style="color:navy">mov     es, [ds:</span>TPA<span style="color:navy">]    </span>; scan for EOF
<span style="color:black">TRANGROUP:42AF                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:42B1                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:42B2                 </span><span style="color:navy">jnz     short </span><span style="color:gray">USEALL
</span><span style="color:black">TRANGROUP:42B4                 </span><span style="color:navy">inc     [ds:</span>IFNOTFLAG<span style="color:navy">]  </span>; inc byte [RDEOF]
<span style="color:black">TRANGROUP:42B8                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:42B9
TRANGROUP:42B9 </span><span style="color:gray">USEALL</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:42B9                 </span><span style="color:navy">sub     dx, cx
</span><span style="color:black">TRANGROUP:42BB                 </span><span style="color:navy">mov     cx, dx
</span><span style="color:black">TRANGROUP:42BD
TRANGROUP:42BD </span><span style="color:gray">BINREAD</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:42BD                 </span><span style="color:navy">add     cx, [ds:</span>NXTADD<span style="color:navy">]
</span><span style="color:black">TRANGROUP:42C1                 </span><span style="color:navy">mov     [ds:</span>NXTADD<span style="color:navy">], cx
</span><span style="color:black">TRANGROUP:42C5                 </span><span style="color:navy">cmp     cx, [ds:</span>BYTCNT<span style="color:navy">]
</span><span style="color:black">TRANGROUP:42C9                 </span><span style="color:navy">jb      short </span><span style="color:gray">TESTDEV
</span><span style="color:black">TRANGROUP:42CB                 </span><span style="color:navy">call    </span>FlshFil
<span style="color:black">TRANGROUP:42CE                 </span><span style="color:navy">cmp     [ds:</span>TERMREAD<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:42D3                 </span><span style="color:navy">jnz     short </span>CLOSESRC
<span style="color:black">TRANGROUP:42D5                 </span><span style="color:navy">jmp     short </span><span style="color:gray">COPYLP
</span><span style="color:black">TRANGROUP:42D7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:42D7
TRANGROUP:42D7 </span><span style="color:gray">TESTDEV</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:42D7                 </span><span style="color:navy">cmp     [ds:</span>SRCISDEV<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; if file then EOF
<span style="color:black">TRANGROUP:42DC                 </span><span style="color:navy">jz      short </span>CLOSESRC
<span style="color:black">TRANGROUP:42DE                 </span><span style="color:navy">cmp     [ds:</span>IFNOTFLAG<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; cmp byte [RDEOF],0
<span style="color:black">TRANGROUP:42E3                 </span><span style="color:navy">jz      short </span><span style="color:gray">COPYLP    </span>; on device, go till ^Z
<span style="color:black">TRANGROUP:42E3 </span>endp            DOCOPY
<span style="color:black">TRANGROUP:42E3
TRANGROUP:42E5
TRANGROUP:42E5 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:42E5
TRANGROUP:42E5
TRANGROUP:42E5 </span>proc            CLOSESRC near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:42E5                 </span><span style="color:navy">mov     bx, [ds:</span>SRCHAND<span style="color:navy">]
</span><span style="color:black">TRANGROUP:42E9                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:black">TRANGROUP:42EB                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:black">TRANGROUP:42EB                                         </span>; BX = file handle
<span style="color:black">TRANGROUP:42ED
TRANGROUP:42ED </span>CLOSESRCDEST_RETN<span style="color:navy">:                      </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:42ED                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:42ED </span>endp            CLOSESRC
<span style="color:black">TRANGROUP:42ED
TRANGROUP:42EE
TRANGROUP:42EE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:42EE
TRANGROUP:42EE
TRANGROUP:42EE </span>proc            CLOSEDEST near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:42EE
TRANGROUP:42EE </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:43C4 SIZE 00000012 BYTES
</span><span style="color:black">TRANGROUP:42EE
TRANGROUP:42EE                 </span><span style="color:navy">cmp     [ds:</span>SPECDRV<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; cmp byte [DestClosed],0
<span style="color:black">TRANGROUP:42F3                 </span><span style="color:navy">jnz     short </span>CLOSESRCDEST_RETN
<span style="color:black">TRANGROUP:42F5                 </span><span style="color:navy">mov     al, [byte ptr ds:</span>DestSwitch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:42F8                 </span><span style="color:navy">call    </span>SETASC          ; check for b or a switch on destination
<span style="color:black">TRANGROUP:42FB                 </span><span style="color:navy">jz      short </span><span style="color:gray">BINCLOS
</span><span style="color:black">TRANGROUP:42FD                 </span><span style="color:navy">mov     bx, [ds:</span>NXTADD<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4301                 </span><span style="color:navy">call    </span>TRYFLUSH
<span style="color:black">TRANGROUP:4304                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOCONC
</span><span style="color:black">TRANGROUP:4306
TRANGROUP:4306 </span><span style="color:gray">CONCHNG</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4306                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:4307                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4308 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4308
TRANGROUP:4308 </span><span style="color:gray">NOCONC</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4308                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:430A                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:430B                 </span><span style="color:navy">mov     ds, [ds:</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:430F                 </span><span style="color:navy">mov     [word ptr bx], </span><span style="color:#ff8000">1Ah </span>; add EOF mark (ctrl-Z)
<span style="color:black">TRANGROUP:4313                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:4314                 </span><span style="color:navy">inc     [ds:</span>NXTADD<span style="color:navy">]     </span>; inc word [NXTADD] ; make sure our ^z gets written
<span style="color:black">TRANGROUP:4318                 </span><span style="color:navy">mov     [ds:</span>NOWRITE<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte
<span style="color:black">TRANGROUP:431D                 </span><span style="color:navy">mov     ax, [ds:</span>WRITTEN<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4320                 </span><span style="color:navy">add     ax, [ds:</span>NXTADD<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4324                 </span><span style="color:navy">jb      short </span><span style="color:gray">BINCLOS   </span>; &gt; 1
<span style="color:black">TRANGROUP:4326                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:4329                 </span><span style="color:navy">jz      short </span><span style="color:gray">FORGETITJ </span>; Written = 0 NxtAdd = 1 (the ^Z)
<span style="color:black">TRANGROUP:432B
TRANGROUP:432B </span><span style="color:gray">BINCLOS</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:432B                 </span><span style="color:navy">call    </span>TRYFLUSH
<span style="color:black">TRANGROUP:432E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">CONCHNG
</span><span style="color:black">TRANGROUP:4330                 </span><span style="color:navy">cmp     [ds:</span>WRITTEN<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4335
TRANGROUP:4335 </span><span style="color:gray">FORGETITJ</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4335                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NO_FORGET </span>; wrote something
<span style="color:black">TRANGROUP:4337                 </span><span style="color:navy">jmp     </span><span style="color:gray">FORGETIT        </span>; never wrote nothing
<span style="color:black">TRANGROUP:433A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:433A
TRANGROUP:433A </span><span style="color:gray">NO_FORGET</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:433A                 </span><span style="color:navy">mov     bx, [ds:</span>EndDestBuf<span style="color:navy">] </span>; [DESTHAND]
<span style="color:black">TRANGROUP:433E                 </span><span style="color:navy">mov     cx, [ds:</span>CPTIME<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4342                 </span><span style="color:navy">mov     dx, [ds:</span>CPDATE<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4346                 </span><span style="color:navy">cmp     [ds:</span>INEXACT<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; copy not exact?
<span style="color:black">TRANGROUP:434B                 </span><span style="color:navy">jz      short </span>DODCLOSE  ; if no, copy date &amp; time
<span style="color:black">TRANGROUP:434D                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2Ch
</span><span style="color:black">TRANGROUP:434F                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - GET CURRENT TIME
<span style="color:black">TRANGROUP:434F                                         </span>; Return: CH = hours, CL = minutes, DH = seconds
<span style="color:black">TRANGROUP:434F                                         </span>; DL = hundredths of seconds
<span style="color:black">TRANGROUP:4351                 </span><span style="color:navy">shl     cl, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:4353                 </span><span style="color:navy">shl     cl, </span><span style="color:green">1           </span>; left justify min in cl
<span style="color:black">TRANGROUP:4355                 </span><span style="color:navy">shl     cx, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:4357                 </span><span style="color:navy">shl     cx, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:4359                 </span><span style="color:navy">shl     cx, </span><span style="color:green">1           </span>; hours to high 5 bits, min to 5-10
<span style="color:black">TRANGROUP:435B                 </span><span style="color:navy">shr     dh, </span><span style="color:green">1           </span>; divide seconds by 2 (now 5 bits)
<span style="color:black">TRANGROUP:435D                 </span><span style="color:navy">or      cl, dh          </span>; and stick into low 5 bits of cx
<span style="color:black">TRANGROUP:435F                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:4360                 </span><span style="color:navy">mov     ah, </span><span style="color:green">2Ah
</span><span style="color:black">TRANGROUP:4362                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - GET CURRENT DATE
<span style="color:black">TRANGROUP:4362                                         </span>; Return: DL = day, DH = month, CX = year
<span style="color:black">TRANGROUP:4362                                         </span>; AL = day of the week (0=Sunday, 1=Monday, etc.)
<span style="color:black">TRANGROUP:4364                 </span><span style="color:navy">sub     cx, </span><span style="color:green">1980
</span><span style="color:black">TRANGROUP:4368                 </span><span style="color:navy">xchg    ch, cl
</span><span style="color:black">TRANGROUP:436A                 </span><span style="color:navy">shl     cx, </span><span style="color:green">1           </span>; year to high 7 bits
<span style="color:black">TRANGROUP:436C                 </span><span style="color:navy">shl     dh, </span><span style="color:green">1           </span>; month to high 3 bits
<span style="color:black">TRANGROUP:436E                 </span><span style="color:navy">shl     dh, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:4370                 </span><span style="color:navy">shl     dh, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:4372                 </span><span style="color:navy">shl     dh, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:4374                 </span><span style="color:navy">shl     dh, </span><span style="color:green">1           </span>; most sig bit of month in carry
<span style="color:black">TRANGROUP:4376                 </span><span style="color:navy">adc     ch, </span><span style="color:#ff8000">0           </span>; put that bit next to year
<span style="color:black">TRANGROUP:4379                 </span><span style="color:navy">or      dl, dh          </span>; or low three of month into day
<span style="color:black">TRANGROUP:437B                 </span><span style="color:navy">mov     dh, ch          </span>; get year and high bit of month
<span style="color:black">TRANGROUP:437D                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:437D </span>endp            CLOSEDEST
<span style="color:black">TRANGROUP:437D
TRANGROUP:437E
TRANGROUP:437E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:437E
TRANGROUP:437E
TRANGROUP:437E </span>proc            DODCLOSE near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:437E                 </span><span style="color:navy">cmp     bx, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4381                 </span><span style="color:navy">jle     short </span><span style="color:gray">CLOSEDONE
</span><span style="color:black">TRANGROUP:4383                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5701h
</span><span style="color:black">TRANGROUP:4386                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - SET FILE&#039;S DATE/TIME
<span style="color:black">TRANGROUP:4386                                         </span>; BX = file handle, CX = time to be set
<span style="color:black">TRANGROUP:4386                                         </span>; DX = date to be set
<span style="color:black">TRANGROUP:4388                 </span><span style="color:navy">jb      short </span><span style="color:gray">Cleanup_Err
</span><span style="color:black">TRANGROUP:438A                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4202h       </span>; (LSEEK&lt;&lt;8)+2 ; seek to EOF
<span style="color:black">TRANGROUP:438D                 </span><span style="color:navy">xor     dx, dx          </span>; 0
<span style="color:black">TRANGROUP:438F                 </span><span style="color:navy">mov     cx, dx
</span><span style="color:black">TRANGROUP:4391                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
<span style="color:black">TRANGROUP:4391                                         </span>; AL = method: offset from end of file
<span style="color:black">TRANGROUP:4393                 </span><span style="color:navy">or      dx, ax          </span>; DX:AX is file size
<span style="color:black">TRANGROUP:4395                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:4396                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4400h
</span><span style="color:black">TRANGROUP:4399                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL - GET DEVICE INFORMATION
<span style="color:black">TRANGROUP:4399                                         </span>; BX = file or device handle
<span style="color:black">TRANGROUP:439B                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:439C                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:black">TRANGROUP:439E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:black">TRANGROUP:439E                                         </span>; BX = file handle
<span style="color:black">TRANGROUP:43A0                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:43A1                 </span><span style="color:navy">jnb     short </span><span style="color:gray">Close_Cont
</span><span style="color:black">TRANGROUP:43A3                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:43A4
TRANGROUP:43A4 </span><span style="color:gray">Cleanup_Err</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:43A4                 </span><span style="color:navy">call    </span>CleanUpErr
<span style="color:black">TRANGROUP:43A7                 </span><span style="color:navy">call    </span>DestDelete
<span style="color:black">TRANGROUP:43AA                 </span><span style="color:navy">jmp     short </span><span style="color:gray">FILECLOSED
</span><span style="color:black">TRANGROUP:43AC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:43AC
TRANGROUP:43AC </span><span style="color:gray">Close_Cont</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:43AC                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:43AD                 </span><span style="color:navy">jnz     short </span><span style="color:gray">CLOSEDONE
</span><span style="color:black">TRANGROUP:43AF                 </span><span style="color:navy">test    dx, </span><span style="color:green">80h         </span>; is the destination a device?
<span style="color:black">TRANGROUP:43B3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">CLOSEDONE </span>; yes, copy succeeded
<span style="color:black">TRANGROUP:43B5                 </span><span style="color:navy">call    </span>DestDelete
<span style="color:black">TRANGROUP:43B8                 </span><span style="color:navy">jmp     short </span><span style="color:gray">FILECLOSED
</span><span style="color:black">TRANGROUP:43BA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:43BA
TRANGROUP:43BA </span><span style="color:gray">CLOSEDONE</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:43BA                 </span><span style="color:navy">inc     [ds:</span>FileCnt<span style="color:navy">]    </span>; inc word [FileCnt]
<span style="color:black">TRANGROUP:43BE
TRANGROUP:43BE </span><span style="color:gray">FILECLOSED</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:43BE                 </span><span style="color:navy">inc     [ds:</span>SPECDRV<span style="color:navy">]    </span>; inc byte [DestClosed]
<span style="color:black">TRANGROUP:43C2
TRANGROUP:43C2 </span>RET50<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:43C2                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:43C3                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:43C3 </span>endp            DODCLOSE
<span style="color:black">TRANGROUP:43C3
TRANGROUP:43C4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:43C4 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR CLOSEDEST
</span><span style="color:black">TRANGROUP:43C4
TRANGROUP:43C4 </span><span style="color:gray">FORGETIT</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:43C4                 </span><span style="color:navy">mov     bx, [ds:</span>EndDestBuf<span style="color:navy">] </span>; [DESTHAND]
<span style="color:black">TRANGROUP:43C8                 </span><span style="color:navy">call    </span>DODCLOSE        ; close the dest
<span style="color:black">TRANGROUP:43CB                 </span><span style="color:navy">call    </span>DestDelete
<span style="color:black">TRANGROUP:43CE                 </span><span style="color:navy">mov     [ds:</span>FileCnt<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; no files transferred
<span style="color:black">TRANGROUP:43D4                 </span><span style="color:navy">jmp     short </span>RET50
<span style="color:black">TRANGROUP:43D4 </span><span style="color:gray">; END OF FUNCTION CHUNK FOR CLOSEDEST
</span><span style="color:black">TRANGROUP:43D6
TRANGROUP:43D6 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:43D6
TRANGROUP:43D6
TRANGROUP:43D6 </span>proc            DestDelete near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:43D6                 </span><span style="color:navy">cmp     [ds:</span>notzerofile<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; destination file size &gt; 0
<span style="color:black">TRANGROUP:43DB                 </span><span style="color:navy">jz      short </span>RET50     ; yes, do not delete
<span style="color:black">TRANGROUP:43DD                 </span><span style="color:navy">mov     dx, offset </span>DestBuf
<span style="color:black">TRANGROUP:43E0                 </span><span style="color:navy">mov     ah, </span><span style="color:green">41h         </span>; Unlink
<span style="color:black">TRANGROUP:43E2                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - DELETE A FILE (UNLINK)
<span style="color:black">TRANGROUP:43E2                                         </span>; DS:DX -&gt; ASCIZ pathname of file to delete (no wildcards allowed)
<span style="color:black">TRANGROUP:43E4                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:43E4 </span>endp            DestDelete
<span style="color:black">TRANGROUP:43E4
TRANGROUP:43E5
TRANGROUP:43E5 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:43E5
TRANGROUP:43E5
TRANGROUP:43E5 </span>proc            SOURCE_SET near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:43E5                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:43E6                 </span><span style="color:navy">mov     ax, [ds:</span>STARTEL<span style="color:navy">]
</span><span style="color:black">TRANGROUP:43E9                 </span><span style="color:navy">mov     si, offset </span>ScanBuf ; adjust to copy
<span style="color:black">TRANGROUP:43EC                 </span><span style="color:navy">sub     ax, si
</span><span style="color:black">TRANGROUP:43EE                 </span><span style="color:navy">mov     di, offset </span>SrcBuf
<span style="color:black">TRANGROUP:43F1                 </span><span style="color:navy">add     ax, di
</span><span style="color:black">TRANGROUP:43F3                 </span><span style="color:navy">mov     [ds:</span>SrcTail<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:43F6                 </span><span style="color:navy">mov     [ds:</span>SrcSiz<span style="color:navy">], cl
</span><span style="color:black">TRANGROUP:43FA                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:43FB                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:43FD                 </span><span style="color:navy">mov     [ds:</span>SrcInfo<span style="color:navy">], bh
</span><span style="color:black">TRANGROUP:4401                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:4402                 </span><span style="color:navy">mov     ax, bp
</span><span style="color:black">TRANGROUP:4404                 </span><span style="color:navy">call    </span>SETASC          ; set a,b switches accordingly
<span style="color:black">TRANGROUP:4407                 </span><span style="color:navy">call    </span>SWITCH          ; get any more switches on this arg
<span style="color:black">TRANGROUP:440A                 </span><span style="color:navy">call    </span>SETASC
<span style="color:black">TRANGROUP:440D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:440D </span>endp            SOURCE_SET
<span style="color:black">TRANGROUP:440D
TRANGROUP:440E
TRANGROUP:440E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:440E
TRANGROUP:440E
TRANGROUP:440E </span>proc            CleanUpErr near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:440E                 </span><span style="color:navy">cmp     [ds:</span>msg_flag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; have we already issued a message?
<span style="color:black">TRANGROUP:4413                 </span><span style="color:navy">jnz     short </span><span style="color:gray">CleanupErr_Cont </span>; yes - don&#039;t issue duplicate error
<span style="color:black">TRANGROUP:4415                 </span><span style="color:navy">call    </span>Set_Ext_Error_Msg
<span style="color:black">TRANGROUP:4418                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], offset </span>DestBuf
<span style="color:black">TRANGROUP:441E                 </span><span style="color:navy">mov     [ds:</span>extend_buf_sub<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; one_subst
<span style="color:black">TRANGROUP:4423                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:4426
TRANGROUP:4426 </span><span style="color:gray">CleanupErr_Cont</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4426                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4426 </span>endp            CleanUpErr
<span style="color:black">TRANGROUP:4426
TRANGROUP:4427
TRANGROUP:4427 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4427
TRANGROUP:4427
TRANGROUP:4427 </span>proc            get_answer_YNA near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4427                 </span><span style="color:navy">mov     [ds:</span>cox_dest_file<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:442C                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4300h
</span><span style="color:black">TRANGROUP:442F                 </span><span style="color:navy">mov     dx, offset </span>DestBuf
<span style="color:black">TRANGROUP:4432                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET FILE ATTRIBUTES
<span style="color:black">TRANGROUP:4432                                         </span>; DS:DX -&gt; ASCIZ file name or directory
<span style="color:black">TRANGROUP:4432                                         </span>; name without trailing slash
<span style="color:black">TRANGROUP:4434                 </span><span style="color:navy">jnb     short </span><span style="color:gray">getansw_1
</span><span style="color:black">TRANGROUP:4436                 </span><span style="color:navy">jmp     </span><span style="color:gray">getansw_5
</span><span style="color:black">TRANGROUP:4439 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4439
TRANGROUP:4439 </span><span style="color:gray">getansw_1</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4439                 </span><span style="color:navy">inc     [ds:</span>cox_dest_file<span style="color:navy">] </span>; byte ; valid destination file
<span style="color:black">TRANGROUP:443D                 </span><span style="color:navy">lea     si, [</span>cox_sublist_buff<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4441                 </span><span style="color:navy">mov     [word ptr si], </span><span style="color:green">11 </span>; sublist size, 11 bytes
<span style="color:black">TRANGROUP:4445                 </span><span style="color:navy">mov     [word ptr si+</span><span style="color:#ff8000">2</span><span style="color:navy">], offset </span>DestBuf ; sublist value (pointer)
<span style="color:black">TRANGROUP:444A                 </span><span style="color:navy">mov     [word ptr si+</span><span style="color:#ff8000">4</span><span style="color:navy">], ds </span>; sublist segment
<span style="color:black">TRANGROUP:444D                 </span><span style="color:navy">mov     [byte ptr si+</span><span style="color:#ff8000">6</span><span style="color:navy">], </span><span style="color:#ff8000">1 </span>; sub id (N of %N)
<span style="color:black">TRANGROUP:4451                 </span><span style="color:navy">mov     [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:#ff8000">10h </span>; data type flags ; ASCII
<span style="color:black">TRANGROUP:4455                 </span><span style="color:navy">mov     [byte ptr si+</span><span style="color:#ff8000">8</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; maximum length (chars)
<span style="color:black">TRANGROUP:4459                 </span><span style="color:navy">mov     [byte ptr si+</span><span style="color:#ff8000">9</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; minimum length (chars)
<span style="color:black">TRANGROUP:445D                 </span><span style="color:navy">mov     [byte ptr si+</span><span style="color:#ff8000">0Ah</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; pad field character (0)
<span style="color:black">TRANGROUP:4461                 </span><span style="color:navy">lea     si, [</span>cox_sublist_buff<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4465                 </span><span style="color:navy">mov     ax, </span><span style="color:green">1103        </span>; message number
<span style="color:black">TRANGROUP:4465                                         </span>; &#039;Overwrite %1 (Yes/No/All)?&#039;
<span style="color:black">TRANGROUP:4468                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">2           </span>; std error (file handle = 2)
<span style="color:black">TRANGROUP:446B                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">1           </span>; byte count
<span style="color:black">TRANGROUP:446E                 </span><span style="color:navy">mov     dh, </span><span style="color:#ff8000">0FFh        </span>; message class (utility)
<span style="color:black">TRANGROUP:4470                 </span><span style="color:navy">xor     dl, dl          </span>; control flag = 0
<span style="color:black">TRANGROUP:4472                 </span><span style="color:navy">call    </span>SYSDISPMSG
<span style="color:black">TRANGROUP:4475                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:4477
TRANGROUP:4477 </span><span style="color:gray">getansw_2</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4477                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0C08h
</span><span style="color:black">TRANGROUP:447A                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - CLEAR KEYBOARD BUFFER
<span style="color:black">TRANGROUP:447A                                         </span>; AL must be 01h, 06h, 07h, 08h, or 0Ah.
<span style="color:black">TRANGROUP:447C                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:447E                 </span><span style="color:navy">jz      short </span><span style="color:gray">getansw_2
</span><span style="color:black">TRANGROUP:4480                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:4482                 </span><span style="color:navy">jz      short </span><span style="color:gray">getansw_4
</span><span style="color:black">TRANGROUP:4484                 </span><span style="color:navy">mov     bl, al
</span><span style="color:black">TRANGROUP:4486                 </span><span style="color:navy">mov     dl, al
</span><span style="color:black">TRANGROUP:4488                 </span><span style="color:navy">mov     ax, </span><span style="color:green">6520h
</span><span style="color:black">TRANGROUP:448B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 4.x internal - COUNTRY-DEPENDENT FILENAME CAPITALIZATION
<span style="color:black">TRANGROUP:448B                                         </span>; AL = function -
<span style="color:black">TRANGROUP:448D                 </span><span style="color:navy">cmp     dl, [ds:</span>_Y_es<span style="color:navy">]  </span>; &#039;Y&#039;
<span style="color:black">TRANGROUP:4491                 </span><span style="color:navy">jz      short </span><span style="color:gray">getansw_3
</span><span style="color:black">TRANGROUP:4493                 </span><span style="color:navy">cmp     dl, [ds:</span>_N_o<span style="color:navy">]   </span>; &#039;N&#039;
<span style="color:black">TRANGROUP:4497                 </span><span style="color:navy">jz      short </span><span style="color:gray">getansw_3
</span><span style="color:black">TRANGROUP:4499                 </span><span style="color:navy">cmp     dl, [ds:</span>_A_ll<span style="color:navy">]  </span>; &#039;A&#039;
<span style="color:black">TRANGROUP:449D                 </span><span style="color:navy">jnz     short </span><span style="color:gray">getansw_2
</span><span style="color:black">TRANGROUP:449F
TRANGROUP:449F </span><span style="color:gray">getansw_3</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:449F                 </span><span style="color:navy">mov     bh, bl
</span><span style="color:black">TRANGROUP:44A1                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:44A2                 </span><span style="color:navy">mov     [ds:</span>MSG_1104<span style="color:navy">], bl
</span><span style="color:black">TRANGROUP:44A6                 </span><span style="color:navy">mov     ah, </span><span style="color:green">40h
</span><span style="color:black">TRANGROUP:44A8                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">2           </span>; std error (file handle = 2)
<span style="color:black">TRANGROUP:44AB                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">1           </span>; byte count
<span style="color:black">TRANGROUP:44AE                 </span><span style="color:navy">mov     dx, offset </span>MSG_1104
<span style="color:black">TRANGROUP:44B1                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - WRITE TO FILE WITH HANDLE
<span style="color:black">TRANGROUP:44B1                                         </span>; BX = file handle, CX = number of bytes to write, DS:DX -&gt; buffer
<span style="color:black">TRANGROUP:44B3                 </span><span style="color:navy">mov     ah, </span><span style="color:green">40h
</span><span style="color:black">TRANGROUP:44B5                 </span><span style="color:navy">mov     [ds:</span>MSG_1104<span style="color:navy">], </span><span style="color:#ff8000">8
</span><span style="color:black">TRANGROUP:44BA                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - WRITE TO FILE WITH HANDLE
<span style="color:black">TRANGROUP:44BA                                         </span>; BX = file handle, CX = number of bytes to write, DS:DX -&gt; buffer
<span style="color:black">TRANGROUP:44BC                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:44BD                 </span><span style="color:navy">jmp     short </span><span style="color:gray">getansw_2
</span><span style="color:black">TRANGROUP:44BF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:44BF
TRANGROUP:44BF </span><span style="color:gray">getansw_4</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:44BF                 </span><span style="color:navy">cmp     bh, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:44C2                 </span><span style="color:navy">jz      short </span><span style="color:gray">getansw_2
</span><span style="color:black">TRANGROUP:44C4                 </span><span style="color:navy">mov     dl, bh
</span><span style="color:black">TRANGROUP:44C6                 </span><span style="color:navy">mov     ax, </span><span style="color:green">6520h
</span><span style="color:black">TRANGROUP:44C9                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 4.x internal - COUNTRY-DEPENDENT FILENAME CAPITALIZATION
<span style="color:black">TRANGROUP:44C9                                         </span>; AL = function -
<span style="color:black">TRANGROUP:44CB                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:44CC                 </span><span style="color:navy">mov     ax, </span><span style="color:green">1070        </span>; message number
<span style="color:black">TRANGROUP:44CF                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">2           </span>; std error (file handle = 2)
<span style="color:black">TRANGROUP:44D2                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:44D4                 </span><span style="color:navy">mov     dh, </span><span style="color:#ff8000">0FFh        </span>; message class (utility)
<span style="color:black">TRANGROUP:44D6                 </span><span style="color:navy">xor     dl, dl
</span><span style="color:black">TRANGROUP:44D8                 </span><span style="color:navy">call    </span>SYSDISPMSG
<span style="color:black">TRANGROUP:44DB                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:44DC                 </span><span style="color:navy">cmp     dl, [ds:</span>_Y_es<span style="color:navy">]
</span><span style="color:black">TRANGROUP:44E0                 </span><span style="color:navy">jz      short </span><span style="color:gray">getansw_5
</span><span style="color:black">TRANGROUP:44E2                 </span><span style="color:navy">cmp     dl, [ds:</span>_N_o<span style="color:navy">]
</span><span style="color:black">TRANGROUP:44E6                 </span><span style="color:navy">jz      short </span><span style="color:gray">getansw_6
</span><span style="color:black">TRANGROUP:44E8                 </span><span style="color:navy">mov     [ds:</span>cox_y_override<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:44ED
TRANGROUP:44ED </span><span style="color:gray">getansw_5</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:44ED                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:44EE                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:44EF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:44EF
TRANGROUP:44EF </span><span style="color:gray">getansw_6</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:44EF                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:44F0                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:44F0 </span>endp            get_answer_YNA
<span style="color:black">TRANGROUP:44F0
TRANGROUP:44F1
TRANGROUP:44F1 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:44F1
TRANGROUP:44F1
TRANGROUP:44F1 </span>proc            init_copycmd_option near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:44F1                 </span><span style="color:navy">mov     [ds:</span>cox_y_override<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; suppress copy overwrite confirmation
<span style="color:black">TRANGROUP:44F6                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:44F7                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:44FB                 </span><span style="color:navy">cmp     [byte ptr es:</span>cox_location<span style="color:navy">], &#039;</span><span style="color:green">c&#039; </span><span style="color:gray">; &quot;cox&quot;
</span><span style="color:black">TRANGROUP:4501                 </span><span style="color:navy">jnz     short </span><span style="color:gray">icpcmd_1
</span><span style="color:black">TRANGROUP:4503                 </span><span style="color:navy">mov     es, [es:</span>EnvirSeg<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4508                 </span><span style="color:navy">lea     si, [</span>copycmd<span style="color:navy">]   </span><span style="color:gray">; &quot;COPYCMD=&quot;
</span><span style="color:black">TRANGROUP:450C                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">8
</span><span style="color:black">TRANGROUP:450F                 </span><span style="color:navy">call    </span>getenv_copycmd
<span style="color:black">TRANGROUP:4512                 </span><span style="color:navy">jb      short </span><span style="color:gray">icpcmd_3
</span><span style="color:black">TRANGROUP:4514                 </span><span style="color:navy">call    </span>get_copycmd_option ; copycmd=/Y or copycmd=/-Y
<span style="color:black">TRANGROUP:4517                 </span><span style="color:navy">jb      short </span><span style="color:gray">icpcmd_2
</span><span style="color:black">TRANGROUP:4519                 </span><span style="color:navy">inc     di              </span>; skip &#039;/&#039;
<span style="color:black">TRANGROUP:451A                 </span><span style="color:navy">mov     al, [es:di]
</span><span style="color:black">TRANGROUP:451D                 </span><span style="color:navy">and     al, </span><span style="color:green">0DFh        </span>; convert to uppercase
<span style="color:black">TRANGROUP:451F                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">Y&#039;
</span><span style="color:black">TRANGROUP:4521                 </span><span style="color:navy">jnz     short </span><span style="color:gray">icpcmd_2
</span><span style="color:black">TRANGROUP:4523
TRANGROUP:4523 </span><span style="color:gray">icpcmd_1</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4523                 </span><span style="color:navy">mov     [ds:</span>cox_y_override<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; clear copy overwrite question/confirmation
<span style="color:black">TRANGROUP:4523                                         </span>; (don&#039;t suppress)
<span style="color:black">TRANGROUP:4528
TRANGROUP:4528 </span><span style="color:gray">icpcmd_2</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4528                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:4529                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:452A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:452A
TRANGROUP:452A </span><span style="color:gray">icpcmd_3</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:452A                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:452E                 </span><span style="color:navy">cmp     [es:</span>cox_Y_option<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; default (/Y) switch option (1 = enabled)
<span style="color:black">TRANGROUP:4534                 </span><span style="color:navy">jz      short </span><span style="color:gray">icpcmd_2
</span><span style="color:black">TRANGROUP:4536                 </span><span style="color:navy">jmp     short </span><span style="color:gray">icpcmd_1
</span><span style="color:black">TRANGROUP:4536 </span>endp            init_copycmd_option
<span style="color:black">TRANGROUP:4536
TRANGROUP:4538
TRANGROUP:4538 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4538
TRANGROUP:4538
TRANGROUP:4538 </span>proc            get_copycmd_option near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4538                 </span><span style="color:navy">cmp     [byte ptr es:di], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:453C                 </span><span style="color:navy">jz      short </span><span style="color:gray">gcpcmdo_2
</span><span style="color:black">TRANGROUP:453E                 </span><span style="color:navy">cmp     [byte ptr es:di], </span><span style="color:#ff8000">2Fh </span><span style="color:gray">; &#039;/&#039;
</span><span style="color:black">TRANGROUP:4542                 </span><span style="color:navy">jz      short </span><span style="color:gray">gcpcmdo_1
</span><span style="color:black">TRANGROUP:4544                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:4545                 </span><span style="color:navy">jmp     short </span>get_copycmd_option
<span style="color:black">TRANGROUP:4547 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4547
TRANGROUP:4547 </span><span style="color:gray">gcpcmdo_1</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4547                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:4548                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4549 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4549
TRANGROUP:4549 </span><span style="color:gray">gcpcmdo_2</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4549                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:454A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:454A </span>endp            get_copycmd_option
<span style="color:black">TRANGROUP:454A
TRANGROUP:454B
TRANGROUP:454B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:454B
TRANGROUP:454B
TRANGROUP:454B </span>proc            getenv_copycmd near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:454B                 </span><span style="color:navy">xor     di, di
</span><span style="color:black">TRANGROUP:454D                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:454F
TRANGROUP:454F </span><span style="color:gray">gecpcmd_1</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:454F                 </span><span style="color:navy">cmp     [byte ptr es:di], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4553                 </span><span style="color:navy">jz      short </span><span style="color:gray">gecpcmd_3
</span><span style="color:black">TRANGROUP:4555                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:4556                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:4557                 </span><span style="color:navy">repe cmpsb
</span><span style="color:black">TRANGROUP:4559                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:455A                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:455B                 </span><span style="color:navy">jz      short </span><span style="color:gray">gecpcmd_2 </span>; cf = 0
<span style="color:black">TRANGROUP:455D                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:455E                 </span><span style="color:navy">mov     cx, </span><span style="color:green">32768
</span><span style="color:black">TRANGROUP:4561                 </span><span style="color:navy">repne scasb             </span>; al = 0
<span style="color:black">TRANGROUP:4563                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:4564                 </span><span style="color:navy">jmp     short </span><span style="color:gray">gecpcmd_1
</span><span style="color:black">TRANGROUP:4566 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4566
TRANGROUP:4566 </span><span style="color:gray">gecpcmd_2</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4566                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:4567                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4568 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4568
TRANGROUP:4568 </span><span style="color:gray">gecpcmd_3</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4568                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:4569                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4569 </span>endp            getenv_copycmd
<span style="color:black">TRANGROUP:4569
TRANGROUP:456A
TRANGROUP:456A </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:456A
TRANGROUP:456A
TRANGROUP:456A </span>proc            TRYFLUSH near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:456A                 </span><span style="color:navy">mov     al, [ds:</span>PARM1<span style="color:navy">]  </span>; mov al,[Concat]
<span style="color:black">TRANGROUP:456D                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:456E                 </span><span style="color:navy">call    </span>FlshFil
<span style="color:black">TRANGROUP:4571                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:4572                 </span><span style="color:navy">cmp     al, [ds:</span>PARM1<span style="color:navy">]  </span>; cmp al,[Concat]
<span style="color:black">TRANGROUP:4576                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4576 </span>endp            TRYFLUSH
<span style="color:black">TRANGROUP:4576
TRANGROUP:4577
TRANGROUP:4577 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4577
TRANGROUP:4577
TRANGROUP:4577 </span>proc            FlshFil near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4577                 </span><span style="color:navy">mov     [ds:</span>TERMREAD<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:457C                 </span><span style="color:navy">cmp     [ds:</span>CFLAG<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4581                 </span><span style="color:navy">jz      short </span><span style="color:gray">NotExists
</span><span style="color:black">TRANGROUP:4583                 </span><span style="color:navy">jmp     </span><span style="color:gray">Exists
</span><span style="color:black">TRANGROUP:4586 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4586
TRANGROUP:4586 </span><span style="color:gray">NotExists</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4586                 </span><span style="color:navy">call    </span>BUILDDEST       ; find out all about the destination
<span style="color:black">TRANGROUP:4589                 </span><span style="color:navy">call    </span>COMPNAME        ; source and dest. the same?
<span style="color:black">TRANGROUP:458C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ProcDest  </span>; if not, go ahead
<span style="color:black">TRANGROUP:458E                 </span><span style="color:navy">cmp     [ds:</span>SRCISDEV<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4593                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ProcDest  </span>; same name on device ok
<span style="color:black">TRANGROUP:4595                 </span><span style="color:navy">cmp     [ds:</span>PARM1<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; cmp byte [Concat],0
<span style="color:black">TRANGROUP:459A                 </span><span style="color:navy">mov     dx, offset </span>OVERWR_PTR
<span style="color:black">TRANGROUP:459D                 </span><span style="color:navy">jnz     short </span><span style="color:gray">No_Concat_Err
</span><span style="color:black">TRANGROUP:459F                 </span><span style="color:navy">jmp     </span>COPYERR         ; not concatenating - overwrite error
<span style="color:black">TRANGROUP:45A2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:45A2
TRANGROUP:45A2 </span><span style="color:gray">No_Concat_Err</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:45A2                 </span><span style="color:navy">mov     [ds:</span>NOWRITE<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; flag not writing (just seeking)
<span style="color:black">TRANGROUP:45A7
TRANGROUP:45A7 </span><span style="color:gray">ProcDest</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:45A7                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">6C00h
</span><span style="color:black">TRANGROUP:45AA                 </span><span style="color:navy">mov     si, offset </span>DestBuf
<span style="color:black">TRANGROUP:45AD                 </span><span style="color:navy">mov     bx, </span><span style="color:green">21h         </span>; get open mode for copy
<span style="color:black">TRANGROUP:45B0                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:45B2                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">101h        </span>; write_open_flag
<span style="color:black">TRANGROUP:45B5                 </span><span style="color:navy">cmp     [ds:</span>NOWRITE<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:45BA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">DoDestOpen </span>; don&#039;t actually create if nowrite set
<span style="color:black">TRANGROUP:45BC                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">112h        </span>; creat_open_flag
<span style="color:black">TRANGROUP:45BF
TRANGROUP:45BF </span><span style="color:gray">DoDestOpen</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:45BF                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 4.0 - EXTENDED OPEN/CREATE
<span style="color:black">TRANGROUP:45BF                                         </span>; BL = open mode as in AL for normal open (INT 21h/AH=3Dh)
<span style="color:black">TRANGROUP:45BF                                         </span>; BH = flags, CX = create attribute, DL = action if file exists/does not exists
<span style="color:black">TRANGROUP:45BF                                         </span>; DH = 00h (reserved), DS:SI -&gt; ASCIZ file name
<span style="color:black">TRANGROUP:45C1                 </span><span style="color:navy">jnb     short </span><span style="color:gray">Dest_Open_Okay
</span><span style="color:black">TRANGROUP:45C3
TRANGROUP:45C3 </span><span style="color:gray">Xa_Set_Error</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:45C3                 </span><span style="color:navy">call    </span>Set_Ext_Error_Msg
<span style="color:black">TRANGROUP:45C6                 </span><span style="color:navy">mov     [ds:</span>string_ptr_2<span style="color:navy">], offset </span>DestBuf
<span style="color:black">TRANGROUP:45CC                 </span><span style="color:navy">mov     [ds:</span>extend_buf_sub<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; one_subst
<span style="color:black">TRANGROUP:45D1                 </span><span style="color:navy">jmp     </span>COPYERR
<span style="color:black">TRANGROUP:45D4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:45D4
TRANGROUP:45D4 </span><span style="color:gray">Dest_Open_Okay</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:45D4                 </span><span style="color:navy">mov     [ds:</span>EndDestBuf<span style="color:navy">], ax </span>; mov [DESTHAND],ax ; save handle
<span style="color:black">TRANGROUP:45D7                 </span><span style="color:navy">mov     [ds:</span>CFLAG<span style="color:navy">], </span><span style="color:#ff8000">1   </span>; destination now exists
<span style="color:black">TRANGROUP:45DC                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:45DE                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4400h
</span><span style="color:black">TRANGROUP:45E1                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL - GET DEVICE INFORMATION
<span style="color:black">TRANGROUP:45E1                                         </span>; BX = file or device handle
<span style="color:black">TRANGROUP:45E3                 </span><span style="color:navy">mov     [ds:</span>DESTISDEV<span style="color:navy">], dl </span>; set dest info
<span style="color:black">TRANGROUP:45E7                 </span><span style="color:navy">test    dl, </span><span style="color:green">80h
</span><span style="color:black">TRANGROUP:45EA                 </span><span style="color:navy">jz      short </span><span style="color:gray">Exists    </span>; Dest not a device
<span style="color:black">TRANGROUP:45EC                 </span><span style="color:navy">mov     al, [byte ptr ds:</span>DestSwitch<span style="color:navy">]
</span><span style="color:black">TRANGROUP:45EF                 </span><span style="color:navy">and     al, </span><span style="color:green">0Ch         </span>; SWITCHA+SWITCHB ; 4+8
<span style="color:black">TRANGROUP:45F1                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TestBoth
</span><span style="color:black">TRANGROUP:45F3                 </span><span style="color:navy">mov     al, [ds:</span>ASCII<span style="color:navy">]  </span>; neither set, use current setting
<span style="color:black">TRANGROUP:45F6                 </span><span style="color:navy">or      al, [ds:</span>BINARY<span style="color:navy">]
</span><span style="color:black">TRANGROUP:45FA                 </span><span style="color:navy">jz      short </span><span style="color:gray">ExSetA    </span>; neither set, default to ascii
<span style="color:black">TRANGROUP:45FC
TRANGROUP:45FC </span><span style="color:gray">TestBoth</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:45FC                 </span><span style="color:navy">jp      short </span><span style="color:gray">Exists    </span>; jpe ; both are set, ignore
<span style="color:black">TRANGROUP:45FE                 </span><span style="color:navy">test    al, </span><span style="color:green">8
</span><span style="color:black">TRANGROUP:4600                 </span><span style="color:navy">jz      short </span><span style="color:gray">Exists
</span><span style="color:black">TRANGROUP:4602                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">4401h       </span>; (IOCTL&lt;&lt;8)|1
<span style="color:black">TRANGROUP:4605                 </span><span style="color:navy">xor     dh, dh
</span><span style="color:black">TRANGROUP:4607                 </span><span style="color:navy">or      dl, </span><span style="color:green">20h         </span>; devid_RAW
<span style="color:black">TRANGROUP:460A                 </span><span style="color:navy">mov     [ds:</span>DESTISDEV<span style="color:navy">], dl
</span><span style="color:black">TRANGROUP:460E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL - SET DEVICE INFORMATION
<span style="color:black">TRANGROUP:460E                                         </span>; BX = device handle, DH = 0
<span style="color:black">TRANGROUP:460E                                         </span>; DL = device information to set (bits 0-7 from function 0)
<span style="color:black">TRANGROUP:4610                 </span><span style="color:navy">jmp     short </span><span style="color:gray">Exists
</span><span style="color:black">TRANGROUP:4612 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4612
TRANGROUP:4612 </span><span style="color:gray">ExSetA</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4612                 </span><span style="color:navy">mov     [ds:</span>ASCII<span style="color:navy">], </span><span style="color:#ff8000">4   </span>; SWITCHA ; set ascii mode
<span style="color:black">TRANGROUP:4617                 </span><span style="color:navy">or      [ds:</span>INEXACT<span style="color:navy">], </span><span style="color:green">4 </span>; ascii -&gt; inexact
<span style="color:black">TRANGROUP:461C
TRANGROUP:461C </span><span style="color:gray">Exists</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:461C                 </span><span style="color:navy">cmp     [ds:</span>NOWRITE<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4621                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NoChecking </span>; if nowrite don&#039;t bother with name check
<span style="color:black">TRANGROUP:4623                 </span><span style="color:navy">cmp     [ds:</span>plus_comma<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; don&#039;t check if just doing +,,
<span style="color:black">TRANGROUP:4628                 </span><span style="color:navy">jz      short </span><span style="color:gray">NoChecking
</span><span style="color:black">TRANGROUP:462A                 </span><span style="color:navy">call    </span>COMPNAME        ; source and dest. the same?
<span style="color:black">TRANGROUP:462D                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NoChecking </span>; if not, go ahead
<span style="color:black">TRANGROUP:462F                 </span><span style="color:navy">cmp     [ds:</span>SRCISDEV<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4634                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NoChecking </span>; same name on device ok
<span style="color:black">TRANGROUP:4636                 </span><span style="color:navy">mov     dx, offset </span>LOSTERR_PTR ; tell him he&#039;s not going to get it
<span style="color:black">TRANGROUP:4639                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:463C                 </span><span style="color:navy">mov     [ds:</span>NXTADD<span style="color:navy">], </span><span style="color:#ff8000">0  </span>; word
<span style="color:black">TRANGROUP:4642                 </span><span style="color:navy">inc     [ds:</span>TERMREAD<span style="color:navy">]   </span>; byte
<span style="color:black">TRANGROUP:4646
TRANGROUP:4646 </span><span style="color:gray">Ret60</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4646                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4647 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4647
TRANGROUP:4647 </span><span style="color:gray">NoChecking</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4647                 </span><span style="color:navy">mov     bx, [ds:</span>EndDestBuf<span style="color:navy">] </span>; [DESTHAND]
<span style="color:black">TRANGROUP:464B                 </span><span style="color:navy">xor     cx, cx          </span>; 0
<span style="color:black">TRANGROUP:464D                 </span><span style="color:navy">xchg    cx, [ds:</span>NXTADD<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4651                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">Ret60     </span>; if nothing to write, forget it
<span style="color:black">TRANGROUP:4653                 </span><span style="color:navy">inc     [ds:</span>WRITTEN<span style="color:navy">]    </span>; word ; flag that we wrote something
<span style="color:black">TRANGROUP:4657                 </span><span style="color:navy">cmp     [ds:</span>NOWRITE<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; if nowrite set, just seek cx bytes
<span style="color:black">TRANGROUP:465C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SeekEnd
</span><span style="color:black">TRANGROUP:465E                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:4660                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:4661                 </span><span style="color:navy">mov     ds, [ds:</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4665                 </span><span style="color:navy">mov     ah, </span><span style="color:green">40h
</span><span style="color:black">TRANGROUP:4667                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - WRITE TO FILE WITH HANDLE
<span style="color:black">TRANGROUP:4667                                         </span>; BX = file handle, CX = number of bytes to write, DS:DX -&gt; buffer
<span style="color:black">TRANGROUP:4669                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:466A                 </span><span style="color:navy">mov     dx, offset </span>NOSPACE_PTR
<span style="color:black">TRANGROUP:466D                 </span><span style="color:navy">jnb     short </span><span style="color:gray">NoChecking2
</span><span style="color:black">TRANGROUP:466F
TRANGROUP:466F </span><span style="color:gray">Xa_Set_Error_Jmp</span><span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:466F                 </span><span style="color:navy">jmp     </span><span style="color:gray">Xa_Set_Error    </span>; failure
<span style="color:black">TRANGROUP:4672 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4672
TRANGROUP:4672 </span><span style="color:gray">NoChecking2</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4672                 </span><span style="color:navy">sub     cx, ax
</span><span style="color:black">TRANGROUP:4674                 </span><span style="color:navy">jz      short </span><span style="color:gray">Ret60
</span><span style="color:black">TRANGROUP:4676                 </span><span style="color:navy">test    [ds:</span>DESTISDEV<span style="color:navy">], </span><span style="color:green">80h </span>; devid_ISDEV
<span style="color:black">TRANGROUP:467B                 </span><span style="color:navy">jz      short </span>COPYERR   ; is a file, error
<span style="color:black">TRANGROUP:467D                 </span><span style="color:navy">test    [ds:</span>DESTISDEV<span style="color:navy">], </span><span style="color:green">20h </span>; devid_RAW
<span style="color:black">TRANGROUP:4682                 </span><span style="color:navy">jnz     short </span><span style="color:gray">DevWrtErr </span>; is a raw device, error
<span style="color:black">TRANGROUP:4684                 </span><span style="color:navy">cmp     [ds:</span>INEXACT<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4689                 </span><span style="color:navy">jnz     short </span><span style="color:gray">Ret60     </span>; inexact so ok
<span style="color:black">TRANGROUP:468B                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:468C                 </span><span style="color:navy">jz      short </span><span style="color:gray">Ret60     </span>; wrote one byte less (the ^z)
<span style="color:black">TRANGROUP:468E
TRANGROUP:468E </span><span style="color:gray">DevWrtErr</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:468E                 </span><span style="color:navy">mov     dx, offset </span>DEVWMES_PTR
<span style="color:black">TRANGROUP:4691                 </span><span style="color:navy">jmp     short </span>COPYERR
<span style="color:black">TRANGROUP:4693 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4693
TRANGROUP:4693 </span><span style="color:gray">SeekEnd</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4693                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:4695                 </span><span style="color:navy">xchg    dx, cx          </span>; cx = 0
<span style="color:black">TRANGROUP:4695                                         </span>; cx:dx = (signed) offset from origin of new file position
<span style="color:black">TRANGROUP:4697                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4201h       </span>; (LSEEK&lt;&lt;8)|1
<span style="color:black">TRANGROUP:469A                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
<span style="color:black">TRANGROUP:469A                                         </span>; AL = method: offset from present location
<span style="color:black">TRANGROUP:469C                 </span><span style="color:navy">mov     [ds:</span>notzerofile<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; (existing) destination file size is not zero
<span style="color:black">TRANGROUP:46A1                 </span><span style="color:navy">test    ax, ax
</span><span style="color:black">TRANGROUP:46A3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SeekEnd_@
</span><span style="color:black">TRANGROUP:46A5                 </span><span style="color:navy">test    dx, dx
</span><span style="color:black">TRANGROUP:46A7                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SeekEnd_@
</span><span style="color:black">TRANGROUP:46A9                 </span><span style="color:navy">mov     [ds:</span>notzerofile<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; (existing) destination file size is zero
<span style="color:black">TRANGROUP:46AE
TRANGROUP:46AE </span><span style="color:gray">SeekEnd_@</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:46AE                 </span><span style="color:navy">mov     [ds:</span>OFilePtr_Lo<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:46B1                 </span><span style="color:navy">mov     [ds:</span>OFilePtr_Hi<span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:46B5                 </span><span style="color:navy">cmp     [ds:</span>IFNOTFLAG<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; cmp byte [RDEOF],0
<span style="color:black">TRANGROUP:46BA                 </span><span style="color:navy">jz      short </span><span style="color:gray">Ret60
</span><span style="color:black">TRANGROUP:46BC                 </span><span style="color:navy">mov     ah, </span><span style="color:green">40h         </span>; cx = 0 ; file is truncated to the current position
<span style="color:black">TRANGROUP:46BE                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - WRITE TO FILE WITH HANDLE
<span style="color:black">TRANGROUP:46BE                                         </span>; BX = file handle, CX = number of bytes to write, DS:DX -&gt; buffer
<span style="color:black">TRANGROUP:46C0                 </span><span style="color:navy">jb      short </span><span style="color:gray">Xa_Set_Error_Jmp
</span><span style="color:black">TRANGROUP:46C2                 </span><span style="color:navy">mov     [ds:</span>zflag<span style="color:navy">], </span><span style="color:#ff8000">1Ah </span>; mov byte [OCtrlZ],1Ah
<span style="color:black">TRANGROUP:46C7                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:46C8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:46C8
TRANGROUP:46C8 </span>COPYERR<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:46C8                 </span><span style="color:navy">call    </span>std_eprintf
<span style="color:black">TRANGROUP:46CB                 </span><span style="color:navy">inc     [ds:</span>SPECDRV<span style="color:navy">]    </span>; inc byte [DestClosed]
<span style="color:black">TRANGROUP:46CF                 </span><span style="color:navy">cmp     [ds:</span>CFLAG<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:46D4                 </span><span style="color:navy">jz      short </span><span style="color:gray">EndCopyJ  </span>; never actually got it open
<span style="color:black">TRANGROUP:46D6                 </span><span style="color:navy">mov     bx, [ds:</span>EndDestBuf<span style="color:navy">] </span>; [DESTHAND]
<span style="color:black">TRANGROUP:46DA                 </span><span style="color:navy">cmp     bx, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:46DD                 </span><span style="color:navy">jle     short </span><span style="color:gray">NoClose
</span><span style="color:black">TRANGROUP:46DF                 </span><span style="color:navy">mov     cx, [ds:</span>OFilePtr_Hi<span style="color:navy">] </span>; CX = hi word of original file ptr
<span style="color:black">TRANGROUP:46E3                 </span><span style="color:navy">mov     dx, [ds:</span>OFilePtr_Lo<span style="color:navy">] </span>; DX = lo word of original file ptr
<span style="color:black">TRANGROUP:46E7                 </span><span style="color:navy">mov     ax, cx
</span><span style="color:black">TRANGROUP:46E9                 </span><span style="color:navy">or      ax, dx
</span><span style="color:black">TRANGROUP:46EB                 </span><span style="color:navy">jz      short </span><span style="color:gray">ceClose   </span>; null file ptr means nothing to save
<span style="color:black">TRANGROUP:46ED                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4200h
</span><span style="color:black">TRANGROUP:46F0                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
<span style="color:black">TRANGROUP:46F0                                         </span>; AL = method: offset from beginning of file
<span style="color:black">TRANGROUP:46F2                 </span><span style="color:navy">xor     cx, cx          </span>; 0
<span style="color:black">TRANGROUP:46F4                 </span><span style="color:navy">mov     ah, </span><span style="color:green">40h
</span><span style="color:black">TRANGROUP:46F6                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - WRITE TO FILE WITH HANDLE
<span style="color:black">TRANGROUP:46F6                                         </span>; BX = file handle, CX = number of bytes to write, DS:DX -&gt; buffer
<span style="color:black">TRANGROUP:46F8                 </span><span style="color:navy">cmp     [ds:</span>zflag<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; cmp byte [OCtrlZ],0
<span style="color:black">TRANGROUP:46FD                 </span><span style="color:navy">jz      short </span><span style="color:gray">ceClose0
</span><span style="color:black">TRANGROUP:46FF                 </span><span style="color:navy">inc     cx              </span>; 1
<span style="color:black">TRANGROUP:4700                 </span><span style="color:navy">mov     dx, offset </span>zflag ; offset OCtrlZ
<span style="color:black">TRANGROUP:4703                 </span><span style="color:navy">mov     ah, </span><span style="color:green">40h
</span><span style="color:black">TRANGROUP:4705                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - WRITE TO FILE WITH HANDLE
<span style="color:black">TRANGROUP:4705                                         </span>; BX = file handle, CX = number of bytes to write, DS:DX -&gt; buffer
<span style="color:black">TRANGROUP:4707
TRANGROUP:4707 </span><span style="color:gray">ceClose0</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4707                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:black">TRANGROUP:4709                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:black">TRANGROUP:4709                                         </span>; BX = file handle
<span style="color:black">TRANGROUP:470B                 </span><span style="color:navy">jmp     short </span><span style="color:gray">EndCopyJ
</span><span style="color:black">TRANGROUP:470D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:470D
TRANGROUP:470D </span><span style="color:gray">ceClose</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:470D                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:black">TRANGROUP:470F                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:black">TRANGROUP:470F                                         </span>; BX = file handle
<span style="color:black">TRANGROUP:4711
TRANGROUP:4711 </span><span style="color:gray">NoClose</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4711                 </span><span style="color:navy">mov     dx, offset </span>DestBuf
<span style="color:black">TRANGROUP:4714                 </span><span style="color:navy">mov     ah, </span><span style="color:green">41h
</span><span style="color:black">TRANGROUP:4716                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - DELETE A FILE (UNLINK)
<span style="color:black">TRANGROUP:4716                                         </span>; DS:DX -&gt; ASCIZ pathname of file to delete (no wildcards allowed)
<span style="color:black">TRANGROUP:4718                 </span><span style="color:navy">mov     [ds:</span>CFLAG<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:471D
TRANGROUP:471D </span><span style="color:gray">EndCopyJ</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:471D                 </span><span style="color:navy">jmp     </span>ENDCOPY
<span style="color:black">TRANGROUP:471D </span>endp            FlshFil
<span style="color:black">TRANGROUP:471D
TRANGROUP:4720
TRANGROUP:4720 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4720
TRANGROUP:4720
TRANGROUP:4720 </span>proc            SETASC near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4720                 </span><span style="color:navy">and     al, </span><span style="color:green">0Ch         </span>; SWITCHA+SWITCHB ; AL = /a, /b flags
<span style="color:black">TRANGROUP:4722                 </span><span style="color:navy">jp      short </span><span style="color:gray">LOADSW    </span>; jpe ; even parity - both or neither
<span style="color:black">TRANGROUP:4724                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:4725                 </span><span style="color:navy">and     al, </span><span style="color:green">8           </span>; SWITCHB
<span style="color:black">TRANGROUP:4727                 </span><span style="color:navy">mov     [ds:</span>BINARY<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:472A                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:472B                 </span><span style="color:navy">and     al, </span><span style="color:green">4           </span>; SWITCHA
<span style="color:black">TRANGROUP:472D                 </span><span style="color:navy">mov     [ds:</span>ASCII<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:4730                 </span><span style="color:navy">or      [ds:</span>INEXACT<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:4734
TRANGROUP:4734 </span><span style="color:gray">LOADSW</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4734                 </span><span style="color:navy">mov     al, [ds:</span>ASCII<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4737                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:4739                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4739 </span>endp            SETASC
<span style="color:black">TRANGROUP:4739
TRANGROUP:473A
TRANGROUP:473A </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:473A
TRANGROUP:473A
TRANGROUP:473A </span>proc            BUILDDEST near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:473A                 </span><span style="color:navy">cmp     [ds:</span>DestIsDir<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; -1
<span style="color:black">TRANGROUP:473F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">KNOWABOUTDEST
</span><span style="color:black">TRANGROUP:4741                 </span><span style="color:navy">mov     di, offset </span>USERDIR1
<span style="color:black">TRANGROUP:4744                 </span><span style="color:navy">mov     bp, offset </span>DestIsDir ; offset DestVars
<span style="color:black">TRANGROUP:4747                 </span><span style="color:navy">mov     bx, </span><span style="color:green">41h         </span>; deny_none|write_open_mode
<span style="color:black">TRANGROUP:474A                 </span><span style="color:navy">call    </span>BUILDPATH
<span style="color:black">TRANGROUP:474D                 </span><span style="color:navy">call    </span>RestUDir1
<span style="color:black">TRANGROUP:4750
TRANGROUP:4750 </span><span style="color:gray">KNOWABOUTDEST</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4750                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:4752                 </span><span style="color:navy">xchg    al, [ds:</span>FIRSTDEST<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4756                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:4758                 </span><span style="color:navy">jnz     short </span><span style="color:gray">FIRSTDST
</span><span style="color:black">TRANGROUP:475A                 </span><span style="color:navy">jmp     </span><span style="color:gray">NOFIRSTDEST
</span><span style="color:black">TRANGROUP:475D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:475D
TRANGROUP:475D </span><span style="color:gray">FIRSTDST</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:475D                 </span><span style="color:navy">mov     si, [ds:</span>DestTail<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4761                 </span><span style="color:navy">mov     di, offset </span>DESTDIR ; offset DestFcb
<span style="color:black">TRANGROUP:4764                 </span><span style="color:navy">mov     ax, </span><span style="color:green">2900h       </span>; Parse_File_Descriptor*256
<span style="color:black">TRANGROUP:4767                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - PARSE FILENAME
<span style="color:black">TRANGROUP:4767                                         </span>; DS:SI -&gt; string to parse
<span style="color:black">TRANGROUP:4767                                         </span>; ES:DI -&gt; buffer to fill with unopened FCB
<span style="color:black">TRANGROUP:4767                                         </span>; AL = bit mask to control parsing
<span style="color:black">TRANGROUP:4769                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:476C                 </span><span style="color:navy">jz      short </span><span style="color:gray">GOODPARSE
</span><span style="color:black">TRANGROUP:476E                 </span><span style="color:navy">mov     dx, offset </span>FULLDIR_PTR ; issue &quot;file creation error&quot;
<span style="color:black">TRANGROUP:4771                 </span><span style="color:navy">jmp     </span>COPYERR
<span style="color:black">TRANGROUP:4774 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4774
TRANGROUP:4774 </span><span style="color:gray">GOODPARSE</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4774                 </span><span style="color:navy">mov     ax, [word ptr ds:</span>DestBuf<span style="color:navy">] </span>; AX = possible &quot;d:&quot;
<span style="color:black">TRANGROUP:4777                 </span><span style="color:navy">cmp     ah, &#039;</span><span style="color:green">:&#039;
</span><span style="color:black">TRANGROUP:477A                 </span><span style="color:navy">jz      short </span><span style="color:gray">DRVSPEC4
</span><span style="color:black">TRANGROUP:477C                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;
</span><span style="color:black">TRANGROUP:477E
TRANGROUP:477E </span><span style="color:gray">DRVSPEC4</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:477E                 </span><span style="color:navy">mov     cl, [ds:</span>ASCII<span style="color:navy">]  </span>; CL = saved Ascii flag
<span style="color:black">TRANGROUP:4782                 </span><span style="color:navy">or      al, </span><span style="color:green">20h
</span><span style="color:black">TRANGROUP:4784                 </span><span style="color:navy">sub     al, </span><span style="color:green">60h
</span><span style="color:black">TRANGROUP:4786                 </span><span style="color:navy">mov     [ds:</span>DESTDIR<span style="color:navy">], al </span>; [DestFcb] ; store drive # in FCB
<span style="color:black">TRANGROUP:4789                 </span><span style="color:navy">mov     al, [ds:</span>DestInfo<span style="color:navy">] </span>; AL = destination CParse flags
<span style="color:black">TRANGROUP:478C                 </span><span style="color:navy">mov     ah, [ds:</span>SrcInfo<span style="color:navy">] </span>; AH = source CParse flags
<span style="color:black">TRANGROUP:4790                 </span><span style="color:navy">and     ax, </span><span style="color:green">202h
</span><span style="color:black">TRANGROUP:4793                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:4795                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOTMELCOPY
</span><span style="color:black">TRANGROUP:4797                 </span><span style="color:navy">cmp     al, ah
</span><span style="color:black">TRANGROUP:4799                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOTMELCOPY
</span><span style="color:black">TRANGROUP:479B                 </span><span style="color:navy">cmp     [ds:</span>PLUS<span style="color:navy">], </span><span style="color:#ff8000">0    </span>; Destination is wildcarded.
<span style="color:black">TRANGROUP:47A0                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOTMELCOPY </span>; no +&#039;s in source
<span style="color:black">TRANGROUP:47A2                 </span><span style="color:navy">inc     [ds:</span>MELCOPY<span style="color:navy">]    </span>; byte ; &#039;Mel copy&#039; = true
<span style="color:black">TRANGROUP:47A6                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:47A8                 </span><span style="color:navy">jmp     short </span><span style="color:gray">SETCONC
</span><span style="color:black">TRANGROUP:47AA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:47AA
TRANGROUP:47AA </span><span style="color:gray">NOTMELCOPY</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:47AA                 </span><span style="color:navy">xor     al, </span><span style="color:green">2           </span>; AL=0 -&gt; ambiguous destination, 2 otherwise
<span style="color:black">TRANGROUP:47AC                 </span><span style="color:navy">and     al, ah
</span><span style="color:black">TRANGROUP:47AE                 </span><span style="color:navy">shr     al, </span><span style="color:green">1           </span>; AL=1 -&gt; ambiguous source, unambiguous dest
<span style="color:black">TRANGROUP:47AE                                         </span>; (implies concatenation)
<span style="color:black">TRANGROUP:47B0
TRANGROUP:47B0 </span><span style="color:gray">SETCONC</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:47B0                 </span><span style="color:navy">or      al, [ds:</span>PLUS<span style="color:navy">]   </span>; &quot;+&quot; always infers concatenation
<span style="color:black">TRANGROUP:47B4                 </span><span style="color:navy">mov     [ds:</span>PARM1<span style="color:navy">], al  </span>; mov [Concat],al ; AL = 1 if concatenating, 0 if not.
<span style="color:black">TRANGROUP:47B7                 </span><span style="color:navy">shl     al, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:47B9                 </span><span style="color:navy">shl     al, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:47BB                 </span><span style="color:navy">mov     [ds:</span>INEXACT<span style="color:navy">], al </span>; concatenation -&gt; inexact copy
<span style="color:black">TRANGROUP:47BE                 </span><span style="color:navy">cmp     [ds:</span>BINARY<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:47C3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOFIRSTDEST </span>; explicit binary copy
<span style="color:black">TRANGROUP:47C5                 </span><span style="color:navy">mov     [ds:</span>ASCII<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:47C8                 </span><span style="color:navy">or      cl, cl
</span><span style="color:black">TRANGROUP:47CA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOFIRSTDEST </span>; Ascii flag set before, data read correctly
<span style="color:black">TRANGROUP:47CC                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:47CE                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOFIRSTDEST </span>; Ascii flag did not change state
<span style="color:black">TRANGROUP:47D0                 </span><span style="color:navy">mov     cx, [ds:</span>NXTADD<span style="color:navy">]
</span><span style="color:black">TRANGROUP:47D4                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">NOFIRSTDEST </span>; no data, everything ok
<span style="color:black">TRANGROUP:47D6                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">1Ah
</span><span style="color:black">TRANGROUP:47D8                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:47D9                 </span><span style="color:navy">xor     di, di
</span><span style="color:black">TRANGROUP:47DB                 </span><span style="color:navy">mov     es, [ds:</span>TPA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:47DF                 </span><span style="color:navy">repne scasb             </span>; scan for EOF
<span style="color:black">TRANGROUP:47E1                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:47E2                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOFIRSTDEST </span>; no ^z in buffer, everything ok
<span style="color:black">TRANGROUP:47E4                 </span><span style="color:navy">dec     di              </span>; point at ^z
<span style="color:black">TRANGROUP:47E5                 </span><span style="color:navy">mov     [ds:</span>NXTADD<span style="color:navy">], di </span>; new buffer length
<span style="color:black">TRANGROUP:47E9
TRANGROUP:47E9 </span><span style="color:gray">NOFIRSTDEST</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:47E9                 </span><span style="color:navy">mov     bx, (offset </span>BWDBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">) </span>; offset DIRBUF+1
<span style="color:black">TRANGROUP:47EC                 </span><span style="color:navy">cmp     [ds:</span>PARM1<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; cmp byte [Concat],0
<span style="color:black">TRANGROUP:47F1                 </span><span style="color:navy">jz      short </span><span style="color:gray">GOTCHRSRC </span>; Not a concat
<span style="color:black">TRANGROUP:47F3                 </span><span style="color:navy">mov     bx, (offset </span>SDIRBUF<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">) </span>; Source of replacement chars
<span style="color:black">TRANGROUP:47F6
TRANGROUP:47F6 </span><span style="color:gray">GOTCHRSRC</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:47F6                 </span><span style="color:navy">mov     si, (offset </span>DESTDIR<span style="color:navy">+</span><span style="color:green">1</span><span style="color:navy">) </span>; offset DestFcb+1
<span style="color:black">TRANGROUP:47F9                 </span><span style="color:navy">mov     di, [ds:</span>DestTail<span style="color:navy">]
</span><span style="color:black">TRANGROUP:47F9 </span>endp            BUILDDEST
<span style="color:black">TRANGROUP:47F9
TRANGROUP:47FD
TRANGROUP:47FD </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:47FD
TRANGROUP:47FD
TRANGROUP:47FD </span>proc            BUILDNAME near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:47FD                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">8
</span><span style="color:black">TRANGROUP:4800
TRANGROUP:4800 </span><span style="color:gray">BUILDMAIN</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4800                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:4801                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Fh </span><span style="color:gray">; &#039;?&#039;
</span><span style="color:black">TRANGROUP:4803                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOTAMBIG
</span><span style="color:black">TRANGROUP:4805                 </span><span style="color:navy">mov     al, [bx]
</span><span style="color:black">TRANGROUP:4807
TRANGROUP:4807 </span><span style="color:gray">NOTAMBIG</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4807                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:4809                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOSTORE
</span><span style="color:black">TRANGROUP:480B                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:480C
TRANGROUP:480C </span><span style="color:gray">NOSTORE</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:480C                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:480D                 </span><span style="color:navy">loop    </span><span style="color:gray">BUILDMAIN
</span><span style="color:black">TRANGROUP:480F                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">3
</span><span style="color:black">TRANGROUP:4811                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:4813                 </span><span style="color:navy">cmp     [si], al
</span><span style="color:black">TRANGROUP:4815                 </span><span style="color:navy">jz      short </span><span style="color:gray">ENDDEST   </span>; No extension
<span style="color:black">TRANGROUP:4817                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">2Eh </span><span style="color:gray">; &#039;.&#039;
</span><span style="color:black">TRANGROUP:4819                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:481A
TRANGROUP:481A </span><span style="color:gray">BUILDEXT</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:481A                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:481B                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Fh </span><span style="color:gray">; &#039;?&#039;
</span><span style="color:black">TRANGROUP:481D                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOTAMBIGE
</span><span style="color:black">TRANGROUP:481F                 </span><span style="color:navy">mov     al, [bx]
</span><span style="color:black">TRANGROUP:4821
TRANGROUP:4821 </span><span style="color:gray">NOTAMBIGE</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4821                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:4823                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOSTOREE
</span><span style="color:black">TRANGROUP:4825                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:4826
TRANGROUP:4826 </span><span style="color:gray">NOSTOREE</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4826                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:4827                 </span><span style="color:navy">loop    </span><span style="color:gray">BUILDEXT
</span><span style="color:black">TRANGROUP:4829
TRANGROUP:4829 </span><span style="color:gray">ENDDEST</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4829                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:482B                 </span><span style="color:navy">stosb                   </span>; NUL terminate
<span style="color:black">TRANGROUP:482C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:482C </span>endp            BUILDNAME
<span style="color:black">TRANGROUP:482C
TRANGROUP:482D
TRANGROUP:482D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:482D
TRANGROUP:482D
TRANGROUP:482D </span>proc            BUILDPATH near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:482D
TRANGROUP:482D </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:1E50 SIZE 00000011 BYTES
</span><span style="color:black">TRANGROUP:482D
TRANGROUP:482D                 </span><span style="color:navy">test    [byte ptr bp+</span><span style="color:#ff8000">4</span><span style="color:navy">], </span><span style="color:green">2 </span>; [bp+VARSTRUC.INFO]
<span style="color:black">TRANGROUP:4831                 </span><span style="color:navy">jnz     short </span><span style="color:gray">NOTPFILE
</span><span style="color:black">TRANGROUP:4833                 </span><span style="color:navy">mov     dx, bp
</span><span style="color:black">TRANGROUP:4835                 </span><span style="color:navy">add     dx, </span><span style="color:#ff8000">5           </span>; VARSTRUC.BUF
<span style="color:black">TRANGROUP:4838                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:4839                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">6C00h       </span>; (ExtOpen&lt;&lt;8)
<span style="color:black">TRANGROUP:483C                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:483E                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">TRANGROUP:4840                 </span><span style="color:navy">mov     dx, </span><span style="color:#ff8000">101h
</span><span style="color:black">TRANGROUP:4843                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 4.0 - EXTENDED OPEN/CREATE
<span style="color:black">TRANGROUP:4843                                         </span>; BL = open mode as in AL for normal open (INT 21h/AH=3Dh)
<span style="color:black">TRANGROUP:4843                                         </span>; BH = flags, CX = create attribute, DL = action if file exists/does not exists
<span style="color:black">TRANGROUP:4843                                         </span>; DH = 00h (reserved), DS:SI -&gt; ASCIZ file name
<span style="color:black">TRANGROUP:4845                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:4846                 </span><span style="color:navy">jnb     short </span><span style="color:gray">PURE_FILE
</span><span style="color:black">TRANGROUP:4848                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:484B                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">2           </span>; ERROR_FILE_NOT_FOUND
<span style="color:black">TRANGROUP:484E                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOTPFILE
</span><span style="color:black">TRANGROUP:4850                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">3           </span>; ERROR_PATH_NOT_FOUND
<span style="color:black">TRANGROUP:4853                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOTPFILE
</span><span style="color:black">TRANGROUP:4855                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">5           </span>; ERROR_ACCESS_DENIED
<span style="color:black">TRANGROUP:4858                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOTPFILE
</span><span style="color:black">TRANGROUP:485A                 </span><span style="color:navy">jmp     </span>extend_setup
<span style="color:black">TRANGROUP:485D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:485D
TRANGROUP:485D </span><span style="color:gray">PURE_FILE</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:485D                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:485F                 </span><span style="color:navy">mov     ax, </span><span style="color:green">4400h
</span><span style="color:black">TRANGROUP:4862                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - IOCTL - GET DEVICE INFORMATION
<span style="color:black">TRANGROUP:4862                                         </span>; BX = file or device handle
<span style="color:black">TRANGROUP:4864                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Eh
</span><span style="color:black">TRANGROUP:4866                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CLOSE A FILE WITH HANDLE
<span style="color:black">TRANGROUP:4866                                         </span>; BX = file handle
<span style="color:black">TRANGROUP:4868                 </span><span style="color:navy">test    dl, </span><span style="color:green">80h         </span>; devid_ISDEV
<span style="color:black">TRANGROUP:486B                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ISADEV
</span><span style="color:black">TRANGROUP:486D                 </span><span style="color:navy">test    [byte ptr bp+</span><span style="color:#ff8000">4</span><span style="color:navy">], </span><span style="color:green">4 </span>; [bp+VARSTRUC.INFO]
<span style="color:black">TRANGROUP:4871                 </span><span style="color:navy">jz      short </span><span style="color:gray">ISADEV
</span><span style="color:black">TRANGROUP:4873
TRANGROUP:4873 </span><span style="color:gray">NOTPFILE</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4873                 </span><span style="color:navy">mov     dx, [bp+</span><span style="color:#ff8000">5</span><span style="color:navy">]      </span>; [bp+VARSTRUC.BUF]
<span style="color:black">TRANGROUP:4876                 </span><span style="color:navy">cmp     dl, </span><span style="color:#ff8000">0           </span>; If no drive specified, get default drive dir
<span style="color:black">TRANGROUP:4879                 </span><span style="color:navy">jz      short </span><span style="color:gray">SET_DRIVE_SPEC
</span><span style="color:black">TRANGROUP:487B                 </span><span style="color:navy">cmp     dh, &#039;</span><span style="color:green">:&#039;
</span><span style="color:black">TRANGROUP:487E                 </span><span style="color:navy">jz      short </span><span style="color:gray">DRVSPEC5
</span><span style="color:black">TRANGROUP:4880
TRANGROUP:4880 </span><span style="color:gray">SET_DRIVE_SPEC</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4880                 </span><span style="color:navy">mov     dl, </span><span style="color:#ff8000">40h </span><span style="color:gray">; &#039;@&#039;
</span><span style="color:black">TRANGROUP:4882
TRANGROUP:4882 </span><span style="color:gray">DRVSPEC5</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4882                 </span><span style="color:navy">or      dl, </span><span style="color:green">20h
</span><span style="color:black">TRANGROUP:4885                 </span><span style="color:navy">sub     dl, </span><span style="color:green">60h
</span><span style="color:black">TRANGROUP:4888                 </span><span style="color:navy">call    </span>SAVUDIR1
<span style="color:black">TRANGROUP:488B                 </span><span style="color:navy">jnb     short </span><span style="color:gray">CURDIR_OK
</span><span style="color:black">TRANGROUP:488D                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:4890                 </span><span style="color:navy">jmp     </span>extend_setup
<span style="color:black">TRANGROUP:4893 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4893
TRANGROUP:4893 </span><span style="color:gray">CURDIR_OK</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4893                 </span><span style="color:navy">mov     dx, bp
</span><span style="color:black">TRANGROUP:4895                 </span><span style="color:navy">add     dx, </span><span style="color:#ff8000">5           </span>; VARSTRUC.BUF ; Set DX for upcomming CHDIRs
<span style="color:black">TRANGROUP:4898                 </span><span style="color:navy">mov     bh, [bp+</span><span style="color:#ff8000">4</span><span style="color:navy">]      </span>; [bp+VARSTRUC.INFO]
<span style="color:black">TRANGROUP:489B                 </span><span style="color:navy">and     bh, </span><span style="color:green">6
</span><span style="color:black">TRANGROUP:489E                 </span><span style="color:navy">cmp     bh, </span><span style="color:#ff8000">6           </span>; Ambig and path ?
<span style="color:black">TRANGROUP:48A1                 </span><span style="color:navy">jnz     short </span><span style="color:gray">CHECKAMB  </span>; jmp if no
<span style="color:black">TRANGROUP:48A3                 </span><span style="color:navy">mov     si, [bp+</span><span style="color:#ff8000">2</span><span style="color:navy">]      </span>; [bp+VARSTRUC.TTAIL]
<span style="color:black">TRANGROUP:48A6                 </span><span style="color:navy">mov     bl, &#039;</span><span style="color:green">:&#039;
</span><span style="color:black">TRANGROUP:48A8                 </span><span style="color:navy">cmp     [si-</span><span style="color:green">2</span><span style="color:navy">], bl
</span><span style="color:black">TRANGROUP:48AB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">KNOWNOTSPEC
</span><span style="color:black">TRANGROUP:48AD                 </span><span style="color:navy">mov     [byte ptr bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">2 </span>; [bp+VARSTRUC.ISDIR],2 ; Know is d:/file
<span style="color:black">TRANGROUP:48B1                 </span><span style="color:navy">jmp     short </span><span style="color:gray">DOPCDJ
</span><span style="color:black">TRANGROUP:48B3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:48B3
TRANGROUP:48B3 </span><span style="color:gray">KNOWNOTSPEC</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:48B3                 </span><span style="color:navy">mov     [byte ptr bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">1 </span>; [bp+VARSTRUC.ISDIR],1 ; Know is path/file
<span style="color:black">TRANGROUP:48B7                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:48B8
TRANGROUP:48B8 </span><span style="color:gray">DOPCDJ</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:48B8                 </span><span style="color:navy">jmp     </span><span style="color:gray">DOPCD
</span><span style="color:black">TRANGROUP:48BB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:48BB
TRANGROUP:48BB </span><span style="color:gray">CHECKAMB</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:48BB                 </span><span style="color:navy">cmp     bh, </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:48BE                 </span><span style="color:navy">jnz     short </span><span style="color:gray">CHECKCD
</span><span style="color:black">TRANGROUP:48C0
TRANGROUP:48C0 </span><span style="color:gray">ISADEV</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:48C0                 </span><span style="color:navy">mov     [byte ptr bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [bp+VARSTRUC.ISDIR]
<span style="color:black">TRANGROUP:48C4                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:48C5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:48C5
TRANGROUP:48C5 </span><span style="color:gray">CHECKCD</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:48C5                 </span><span style="color:navy">call    </span>SetRest1
<span style="color:black">TRANGROUP:48C8                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Bh
</span><span style="color:black">TRANGROUP:48CA                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CHANGE THE CURRENT DIRECTORY (CHDIR)
<span style="color:black">TRANGROUP:48CA                                         </span>; DS:DX -&gt; ASCIZ directory name (may include drive)
<span style="color:black">TRANGROUP:48CC                 </span><span style="color:navy">jb      short </span><span style="color:gray">NOTPDIR
</span><span style="color:black">TRANGROUP:48CE                 </span><span style="color:navy">mov     di, dx
</span><span style="color:black">TRANGROUP:48D0                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:48D2                 </span><span style="color:navy">mov     cx, ax
</span><span style="color:black">TRANGROUP:48D4                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:48D5
TRANGROUP:48D5 </span><span style="color:gray">Kloop</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:48D5                 </span><span style="color:navy">mov     al, [es:di]
</span><span style="color:black">TRANGROUP:48D8                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:48D9                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:48DB                 </span><span style="color:navy">jz      short </span><span style="color:gray">DONE
</span><span style="color:black">TRANGROUP:48DD                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:black">TRANGROUP:48DF                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:48E2                 </span><span style="color:navy">jz      short </span><span style="color:gray">Kloop
</span><span style="color:black">TRANGROUP:48E4                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:48E5                 </span><span style="color:navy">inc     ah
</span><span style="color:black">TRANGROUP:48E7                 </span><span style="color:navy">jmp     short </span><span style="color:gray">Kloop
</span><span style="color:black">TRANGROUP:48E9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:48E9
TRANGROUP:48E9 </span><span style="color:gray">DONE</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:48E9                 </span><span style="color:navy">dec     di
</span><span style="color:black">TRANGROUP:48EA                 </span><span style="color:navy">mov     al, [ds:</span>DIRCHAR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:48ED                 </span><span style="color:navy">mov     [byte ptr bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">2 </span>; [bp+VARSTRUC.ISDIR],2 ; assume d:/file
<span style="color:black">TRANGROUP:48F1                 </span><span style="color:navy">or      ah, ah
</span><span style="color:black">TRANGROUP:48F3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">_STORE_PCHAR </span>; his is the trailing byte of ECS code
<span style="color:black">TRANGROUP:48F5                 </span><span style="color:navy">cmp     al, [di-</span><span style="color:green">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:48F8                 </span><span style="color:navy">jz      short </span><span style="color:gray">GOTSRCSLSH
</span><span style="color:black">TRANGROUP:48FA
TRANGROUP:48FA </span><span style="color:gray">_STORE_PCHAR</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:48FA                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:48FB                 </span><span style="color:navy">mov     [byte ptr bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">1 </span>; [bp+VARSTRUC.ISDIR],1 ; know path/file
<span style="color:black">TRANGROUP:48FF
TRANGROUP:48FF </span><span style="color:gray">GOTSRCSLSH</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:48FF                 </span><span style="color:navy">or      [byte ptr bp+</span><span style="color:#ff8000">4</span><span style="color:navy">], </span><span style="color:green">6 </span>; [bp+VARSTRUC.INFO]
<span style="color:black">TRANGROUP:4903                 </span><span style="color:navy">call    </span>SETSTARS
<span style="color:black">TRANGROUP:4906
TRANGROUP:4906 </span><span style="color:gray">NOTPDIR_RETN</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4906                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4907 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4907
TRANGROUP:4907 </span><span style="color:gray">NOTPDIR</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4907                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:490A                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">3           </span>; ERROR_PATH_NOT_FOUND
<span style="color:black">TRANGROUP:490D                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOTPDIR_TRY
</span><span style="color:black">TRANGROUP:490F                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">5           </span>; ERROR_ACCESS_DENIED
<span style="color:black">TRANGROUP:4912                 </span><span style="color:navy">jnz     short </span><span style="color:gray">EXTEND_SETUPJ
</span><span style="color:black">TRANGROUP:4914
TRANGROUP:4914 </span><span style="color:gray">NOTPDIR_TRY</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4914                 </span><span style="color:navy">mov     [byte ptr bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [bp+VARSTRUC.ISDIR]
<span style="color:black">TRANGROUP:4918                 </span><span style="color:navy">mov     bh, [bp+</span><span style="color:#ff8000">4</span><span style="color:navy">]      </span>; [bp+VARSTRUC.INFO]
<span style="color:black">TRANGROUP:491B                 </span><span style="color:navy">test    bh, </span><span style="color:green">4
</span><span style="color:black">TRANGROUP:491E                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOTPDIR_RETN </span>; Know pure file, no path seps
<span style="color:black">TRANGROUP:4920                 </span><span style="color:navy">mov     [byte ptr bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">2 </span>; [bp+VARSTRUC.ISDIR],2 ; assume d:/file
<span style="color:black">TRANGROUP:4924                 </span><span style="color:navy">mov     si, [bp+</span><span style="color:#ff8000">2</span><span style="color:navy">]      </span>; [bp+VARSTRUC.TTAIL]
<span style="color:black">TRANGROUP:4927                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:492A                 </span><span style="color:navy">jz      short </span><span style="color:gray">BADCDERRJ2 </span>; Trailing &#039;/&#039;
<span style="color:black">TRANGROUP:492C                 </span><span style="color:navy">mov     bl, </span><span style="color:#ff8000">2Eh </span><span style="color:gray">; &#039;.&#039;
</span><span style="color:black">TRANGROUP:492E                 </span><span style="color:navy">cmp     [si], bl
</span><span style="color:black">TRANGROUP:4930                 </span><span style="color:navy">jz      short </span><span style="color:gray">BADCDERRJ2 </span>; If . or .. pure cd should have worked
<span style="color:black">TRANGROUP:4932                 </span><span style="color:navy">mov     bl, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:black">TRANGROUP:4934                 </span><span style="color:navy">cmp     [si-</span><span style="color:green">2</span><span style="color:navy">], bl
</span><span style="color:black">TRANGROUP:4937                 </span><span style="color:navy">jz      short </span><span style="color:gray">DOPCD     </span>; Know d:/file
<span style="color:black">TRANGROUP:4939                 </span><span style="color:navy">mov     [byte ptr bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">1 </span>; [bp+VARSTRUC.ISDIR],1 ; Know path/file
<span style="color:black">TRANGROUP:493D                 </span><span style="color:navy">dec     si              </span>; Point at last &#039;/&#039;
<span style="color:black">TRANGROUP:493E
TRANGROUP:493E </span><span style="color:gray">DOPCD</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:493E                 </span><span style="color:navy">xor     bl, bl
</span><span style="color:black">TRANGROUP:4940                 </span><span style="color:navy">xchg    bl, [si]        </span>; Stick in a NUL
<span style="color:black">TRANGROUP:4942                 </span><span style="color:navy">call    </span>SetRest1
<span style="color:black">TRANGROUP:4945                 </span><span style="color:navy">cmp     dx, si
</span><span style="color:black">TRANGROUP:4947                 </span><span style="color:navy">jnb     short </span><span style="color:gray">LookBack
</span><span style="color:black">TRANGROUP:4949                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:494A                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:494B                 </span><span style="color:navy">mov     cx, si
</span><span style="color:black">TRANGROUP:494D                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">TRANGROUP:494F
TRANGROUP:494F </span><span style="color:gray">Kloop2</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:494F                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:4950                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:4953                 </span><span style="color:navy">jz      short </span><span style="color:gray">NotKanj4
</span><span style="color:black">TRANGROUP:4955                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:4956                 </span><span style="color:navy">cmp     si, cx
</span><span style="color:black">TRANGROUP:4958                 </span><span style="color:navy">jb      short </span><span style="color:gray">Kloop2
</span><span style="color:black">TRANGROUP:495A                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:495B                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:495C                 </span><span style="color:navy">jmp     short </span><span style="color:gray">DoCdr     </span>; Last char is ECS code,
<span style="color:black">TRANGROUP:495C                                         </span>; don&#039;t check for trailing path sep
<span style="color:black">TRANGROUP:495E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:495E
TRANGROUP:495E </span><span style="color:gray">NotKanj4</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:495E                 </span><span style="color:navy">cmp     si, cx
</span><span style="color:black">TRANGROUP:4960                 </span><span style="color:navy">jb      short </span><span style="color:gray">Kloop2
</span><span style="color:black">TRANGROUP:4962                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:4963                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:4964
TRANGROUP:4964 </span><span style="color:gray">LookBack</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4964                 </span><span style="color:navy">cmp     bl, [si-</span><span style="color:green">1</span><span style="color:navy">]      </span>; if double slash, then complain
<span style="color:black">TRANGROUP:4967                 </span><span style="color:navy">jz      short </span><span style="color:gray">BADCDERRJ2
</span><span style="color:black">TRANGROUP:4969
TRANGROUP:4969 </span><span style="color:gray">DoCdr</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4969                 </span><span style="color:navy">mov     ah, </span><span style="color:green">3Bh
</span><span style="color:black">TRANGROUP:496B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - CHANGE THE CURRENT DIRECTORY (CHDIR)
<span style="color:black">TRANGROUP:496B                                         </span>; DS:DX -&gt; ASCIZ directory name (may include drive)
<span style="color:black">TRANGROUP:496D                 </span><span style="color:navy">xchg    bl, [si]
</span><span style="color:black">TRANGROUP:496F                 </span><span style="color:navy">jnb     short </span><span style="color:gray">NOTPDIR_RETN
</span><span style="color:black">TRANGROUP:4971                 </span><span style="color:navy">call    </span>get_ext_error_number
<span style="color:black">TRANGROUP:4974
TRANGROUP:4974 </span><span style="color:gray">EXTEND_SETUPJ</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4974                 </span><span style="color:navy">jmp     </span>extend_setup
<span style="color:black">TRANGROUP:4977 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4977
TRANGROUP:4977 </span><span style="color:gray">BADCDERRJ2</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4977                 </span><span style="color:navy">jmp     </span>badpath_err
<span style="color:black">TRANGROUP:4977 </span>endp            BUILDPATH
<span style="color:black">TRANGROUP:4977
TRANGROUP:497A
TRANGROUP:497A </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:497A
TRANGROUP:497A
TRANGROUP:497A </span>proc            SETSTARS near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:497A                 </span><span style="color:navy">mov     [bp+</span><span style="color:#ff8000">2</span><span style="color:navy">], di      </span>; [bp+VARSTRUC.TTAIL]
<span style="color:black">TRANGROUP:497D                 </span><span style="color:navy">add     [byte ptr bp+</span><span style="color:#ff8000">1</span><span style="color:navy">], </span><span style="color:green">12 </span>; [bp+VARSTRUC.SIZ]
<span style="color:black">TRANGROUP:4981                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2E3Fh       </span>; DOT_QMARK ; &#039;?.&#039; (NASM syntax)
<span style="color:black">TRANGROUP:4984                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">8
</span><span style="color:black">TRANGROUP:4987                 </span><span style="color:navy">rep stosb
</span><span style="color:black">TRANGROUP:4989                 </span><span style="color:navy">xchg    al, ah
</span><span style="color:black">TRANGROUP:498B                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:498C                 </span><span style="color:navy">xchg    al, ah
</span><span style="color:black">TRANGROUP:498E                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">3
</span><span style="color:black">TRANGROUP:4990                 </span><span style="color:navy">rep stosb
</span><span style="color:black">TRANGROUP:4992                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:4994                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:4995                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4995 </span>endp            SETSTARS
<span style="color:black">TRANGROUP:4995
TRANGROUP:4996
TRANGROUP:4996 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4996
TRANGROUP:4996
TRANGROUP:4996 </span>proc            COMPNAME near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4996                 </span><span style="color:navy">mov     si, offset </span>DestBuf
<span style="color:black">TRANGROUP:4999                 </span><span style="color:navy">mov     di, offset </span>TRGXNAME
<span style="color:black">TRANGROUP:499C                 </span><span style="color:navy">mov     ax, </span><span style="color:green">6000h       </span>; (xNameTrans*256)
<span style="color:black">TRANGROUP:499F                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - RESOLVE PATH STRING TO CANONICAL PATH STRING
<span style="color:black">TRANGROUP:499F                                         </span>; DS:SI -&gt; ASCIZ relative path string or directory name
<span style="color:black">TRANGROUP:499F                                         </span>; ES:DI -&gt; 128-byte buffer for ASCIZ canonical fully qualified name
<span style="color:black">TRANGROUP:49A1                 </span><span style="color:navy">mov     si, offset </span>SRCXNAME
<span style="color:black">TRANGROUP:49A4                 </span><span style="color:navy">mov     di, offset </span>TRGXNAME
<span style="color:black">TRANGROUP:49A7                 </span><span style="color:navy">call    </span>STRCOMP
<span style="color:black">TRANGROUP:49AA                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:49AA </span>endp            COMPNAME
<span style="color:black">TRANGROUP:49AA
TRANGROUP:49AB
TRANGROUP:49AB </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:49AB
TRANGROUP:49AB
TRANGROUP:49AB </span>proc            cparse near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:49AB                 </span><span style="color:navy">xor     ax, ax          </span>; DS:SI   Points input buffer
<span style="color:black">TRANGROUP:49AB                                         </span>; ES:DI   Points to the token buffer
<span style="color:black">TRANGROUP:49AB                                         </span>; BL  Special delimiter for this call
<span style="color:black">TRANGROUP:49AD                 </span><span style="color:navy">mov     [ds:</span>STARTEL<span style="color:navy">], di </span>; No path element
<span style="color:black">TRANGROUP:49B1                 </span><span style="color:navy">mov     [ds:</span>ELPOS<span style="color:navy">], al  </span>; Start in 8 char prefix
<span style="color:black">TRANGROUP:49B4                 </span><span style="color:navy">mov     [ds:</span>SKPDEL<span style="color:navy">], al </span>; No skip delimiter yet
<span style="color:black">TRANGROUP:49B7                 </span><span style="color:navy">mov     bh, al          </span>; Init nothing
<span style="color:black">TRANGROUP:49B9                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:49BA                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:49BB                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:49BD                 </span><span style="color:navy">mov     [ds:</span>comma<span style="color:navy">], cl  </span>; reset comma flag
<span style="color:black">TRANGROUP:49C1
TRANGROUP:49C1 </span><span style="color:gray">moredelim</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:49C1                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:49C2                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:49C5                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SCANCDONE
</span><span style="color:black">TRANGROUP:49C7                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:49C9                 </span><span style="color:navy">jz      short </span><span style="color:gray">moredelim
</span><span style="color:black">TRANGROUP:49CB                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:49CD                 </span><span style="color:navy">jz      short </span><span style="color:gray">moredelim
</span><span style="color:black">TRANGROUP:49CF                 </span><span style="color:navy">xchg    al, [ds:</span>SKPDEL<span style="color:navy">]
</span><span style="color:black">TRANGROUP:49D3                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:49D5                 </span><span style="color:navy">jz      short </span><span style="color:gray">moredelim </span>; One non space/tab delimiter allowed
<span style="color:black">TRANGROUP:49D7                 </span><span style="color:navy">test    bh, </span><span style="color:green">80h         </span>; has a special char been found?
<span style="color:black">TRANGROUP:49DA                 </span><span style="color:navy">jz      short </span><span style="color:gray">no_comma  </span>; no - just exit
<span style="color:black">TRANGROUP:49DC                 </span><span style="color:navy">mov     [ds:</span>comma<span style="color:navy">], </span><span style="color:#ff8000">1   </span>; set comma flag
<span style="color:black">TRANGROUP:49E1
TRANGROUP:49E1 </span><span style="color:gray">no_comma</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:49E1                 </span><span style="color:navy">jmp     </span><span style="color:gray">x_done
</span><span style="color:black">TRANGROUP:49E4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:49E4
TRANGROUP:49E4 </span><span style="color:gray">SCANCDONE</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:49E4                 </span><span style="color:navy">cmp     al, bl          </span>; Special delimiter?
<span style="color:black">TRANGROUP:49E6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">nospec
</span><span style="color:black">TRANGROUP:49E8                 </span><span style="color:navy">or      bh, </span><span style="color:green">80h
</span><span style="color:black">TRANGROUP:49EB                 </span><span style="color:navy">jmp     short </span><span style="color:gray">moredelim
</span><span style="color:black">TRANGROUP:49ED </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:49ED
TRANGROUP:49ED </span><span style="color:gray">nospec</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:49ED                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh         </span>; a CR?
<span style="color:black">TRANGROUP:49EF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ncperror
</span><span style="color:black">TRANGROUP:49F1                 </span><span style="color:navy">jmp     </span><span style="color:gray">cperror
</span><span style="color:black">TRANGROUP:49F4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:49F4
TRANGROUP:49F4 </span><span style="color:gray">ncperror</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:49F4                 </span><span style="color:navy">cmp     al, [ds:</span>SWITCHAR<span style="color:navy">] </span>; is the char the switch char?
<span style="color:black">TRANGROUP:49F8                 </span><span style="color:navy">jnz     short </span><span style="color:gray">na_switch
</span><span style="color:black">TRANGROUP:49FA                 </span><span style="color:navy">jmp     </span><span style="color:gray">a_switch        </span>; yes, process...
<span style="color:black">TRANGROUP:49FD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:49FD
TRANGROUP:49FD </span><span style="color:gray">na_switch</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:49FD                 </span><span style="color:navy">mov     dl, &#039;</span><span style="color:green">:&#039;
</span><span style="color:black">TRANGROUP:49FF                 </span><span style="color:navy">cmp     [si], dl
</span><span style="color:black">TRANGROUP:4A01                 </span><span style="color:navy">jnz     short </span><span style="color:gray">anum_chard </span>; Drive not specified
<span style="color:black">TRANGROUP:4A03                 </span><span style="color:navy">cmp     [ds:</span>cpyflag<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:4A08                 </span><span style="color:navy">jnz     short </span><span style="color:gray">cpcont2
</span><span style="color:black">TRANGROUP:4A0A                 </span><span style="color:navy">call    </span>UPCONV
<span style="color:black">TRANGROUP:4A0D
TRANGROUP:4A0D </span><span style="color:gray">cpcont2</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4A0D                 </span><span style="color:navy">call    </span>move_char
<span style="color:black">TRANGROUP:4A10                 </span><span style="color:navy">lodsb                   </span>; Get the &#039;:&#039;
<span style="color:black">TRANGROUP:4A11                 </span><span style="color:navy">call    </span>move_char
<span style="color:black">TRANGROUP:4A14                 </span><span style="color:navy">mov     [ds:</span>STARTEL<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:4A18                 </span><span style="color:navy">mov     [ds:</span>ELCNT<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4A1D                 </span><span style="color:navy">jmp     </span><span style="color:gray">anum_test
</span><span style="color:black">TRANGROUP:4A20 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4A20
TRANGROUP:4A20 </span><span style="color:gray">anum_chard</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4A20                 </span><span style="color:navy">mov     [ds:</span>STARTEL<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:4A24                 </span><span style="color:navy">mov     [ds:</span>ELCNT<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; Store of this char sets it to one
<span style="color:black">TRANGROUP:4A29                 </span><span style="color:navy">cmp     [ds:</span>cpyflag<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; Was CPARSE called from COPY?
<span style="color:black">TRANGROUP:4A2E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">anum_char </span>; No, don&#039;t add drive spec.
<span style="color:black">TRANGROUP:4A30                 </span><span style="color:navy">call    </span>pathchrcmp      ; Starts with a pathchar?
<span style="color:black">TRANGROUP:4A33                 </span><span style="color:navy">jnz     short </span><span style="color:gray">anum_char </span>; no
<span style="color:black">TRANGROUP:4A35                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:4A36                 </span><span style="color:navy">mov     al, [ds:</span>CURDRV<span style="color:navy">] </span>; Insert drive spec
<span style="color:black">TRANGROUP:4A39                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">41h </span><span style="color:gray">; &#039;A&#039;
</span><span style="color:black">TRANGROUP:4A3B                 </span><span style="color:navy">call    </span>move_char
<span style="color:black">TRANGROUP:4A3E                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:black">TRANGROUP:4A40                 </span><span style="color:navy">call    </span>move_char
<span style="color:black">TRANGROUP:4A43                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:4A44                 </span><span style="color:navy">mov     [ds:</span>STARTEL<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:4A48                 </span><span style="color:navy">mov     [ds:</span>ELCNT<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; byte
<span style="color:black">TRANGROUP:4A4D
TRANGROUP:4A4D </span><span style="color:gray">anum_char</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4A4D                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:4A50                 </span><span style="color:navy">jz      short </span><span style="color:gray">NOTKANJ
</span><span style="color:black">TRANGROUP:4A52                 </span><span style="color:navy">call    </span>move_char
<span style="color:black">TRANGROUP:4A55                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:4A56                 </span><span style="color:navy">jmp     short </span><span style="color:gray">notspecial
</span><span style="color:black">TRANGROUP:4A58 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4A58
TRANGROUP:4A58 </span><span style="color:gray">NOTKANJ</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4A58                 </span><span style="color:navy">cmp     [ds:</span>cpyflag<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; and if we&#039;re in COPY
<span style="color:black">TRANGROUP:4A5D                 </span><span style="color:navy">jnz     short </span><span style="color:gray">TESTDOT
</span><span style="color:black">TRANGROUP:4A5F                 </span><span style="color:navy">call    </span>UPCONV          ; upper case the char
<span style="color:black">TRANGROUP:4A62
TRANGROUP:4A62 </span><span style="color:gray">TESTDOT</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4A62                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">2Eh </span><span style="color:gray">; &#039;.&#039;
</span><span style="color:black">TRANGROUP:4A64                 </span><span style="color:navy">jnz     short </span><span style="color:gray">testquest
</span><span style="color:black">TRANGROUP:4A66                 </span><span style="color:navy">inc     [ds:</span>ELPOS<span style="color:navy">]      </span>; byte ; flag in extension
<span style="color:black">TRANGROUP:4A6A                 </span><span style="color:navy">mov     [ds:</span>ELCNT<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; Store of the &#039;.&#039; resets it to 0
<span style="color:black">TRANGROUP:4A6F
TRANGROUP:4A6F </span><span style="color:gray">testquest</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4A6F                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Fh </span><span style="color:gray">; &#039;?&#039;
</span><span style="color:black">TRANGROUP:4A71                 </span><span style="color:navy">jnz     short </span><span style="color:gray">testsplat
</span><span style="color:black">TRANGROUP:4A73                 </span><span style="color:navy">or      bh, </span><span style="color:green">2
</span><span style="color:black">TRANGROUP:4A76
TRANGROUP:4A76 </span><span style="color:gray">testsplat</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4A76                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">2Ah </span><span style="color:gray">; &#039;*&#039;
</span><span style="color:black">TRANGROUP:4A78                 </span><span style="color:navy">jnz     short </span><span style="color:gray">testpath
</span><span style="color:black">TRANGROUP:4A7A                 </span><span style="color:navy">or      bh, </span><span style="color:green">2
</span><span style="color:black">TRANGROUP:4A7D                 </span><span style="color:navy">cmp     [ds:</span>expand_star<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4A82                 </span><span style="color:navy">jnz     short </span><span style="color:gray">expand_filename
</span><span style="color:black">TRANGROUP:4A84                 </span><span style="color:navy">jmp     short </span><span style="color:gray">testpath
</span><span style="color:black">TRANGROUP:4A86 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4A86
TRANGROUP:4A86 </span><span style="color:gray">BADPERR2J</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4A86                 </span><span style="color:navy">jmp     short </span><span style="color:gray">BADPERR2
</span><span style="color:black">TRANGROUP:4A88 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4A88
TRANGROUP:4A88 </span><span style="color:gray">expand_filename</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4A88                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">7
</span><span style="color:black">TRANGROUP:4A8A                 </span><span style="color:navy">cmp     [ds:</span>ELPOS<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4A8F                 </span><span style="color:navy">jz      short </span><span style="color:gray">gotelcnt
</span><span style="color:black">TRANGROUP:4A91                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:4A93
TRANGROUP:4A93 </span><span style="color:gray">gotelcnt</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4A93                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3Fh </span><span style="color:gray">; &#039;?&#039;
</span><span style="color:black">TRANGROUP:4A95                 </span><span style="color:navy">sub     ah, [ds:</span>ELCNT<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4A99                 </span><span style="color:navy">jb      short </span><span style="color:gray">BADPERR2J
</span><span style="color:black">TRANGROUP:4A9B                 </span><span style="color:navy">xchg    ah, cl
</span><span style="color:black">TRANGROUP:4A9D                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">testpathx
</span><span style="color:black">TRANGROUP:4A9F
TRANGROUP:4A9F </span><span style="color:gray">qmove</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4A9F                 </span><span style="color:navy">xchg    ah, cl
</span><span style="color:black">TRANGROUP:4AA1                 </span><span style="color:navy">call    </span>move_char
<span style="color:black">TRANGROUP:4AA4                 </span><span style="color:navy">xchg    ah, cl
</span><span style="color:black">TRANGROUP:4AA6                 </span><span style="color:navy">loop    </span><span style="color:gray">qmove
</span><span style="color:black">TRANGROUP:4AA8
TRANGROUP:4AA8 </span><span style="color:gray">testpathx</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4AA8                 </span><span style="color:navy">xchg    ah, cl
</span><span style="color:black">TRANGROUP:4AAA
TRANGROUP:4AAA </span><span style="color:gray">testpath</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4AAA                 </span><span style="color:navy">call    </span>pathchrcmp
<span style="color:black">TRANGROUP:4AAD                 </span><span style="color:navy">jnz     short </span><span style="color:gray">notspecial
</span><span style="color:black">TRANGROUP:4AAF                 </span><span style="color:navy">or      bh, </span><span style="color:green">4
</span><span style="color:black">TRANGROUP:4AB2                 </span><span style="color:navy">cmp     [ds:</span>expand_star<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4AB7                 </span><span style="color:navy">jz      short </span><span style="color:gray">no_err_check
</span><span style="color:black">TRANGROUP:4AB9                 </span><span style="color:navy">test    bh, </span><span style="color:green">2           </span>; If just hit a &#039;/&#039;, cannot have ? or * yet
<span style="color:black">TRANGROUP:4ABC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">BADPERR
</span><span style="color:black">TRANGROUP:4ABE
TRANGROUP:4ABE </span><span style="color:gray">no_err_check</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4ABE                 </span><span style="color:navy">mov     [ds:</span>STARTEL<span style="color:navy">], di </span>; New element
<span style="color:black">TRANGROUP:4AC2                 </span><span style="color:navy">inc     [ds:</span>STARTEL<span style="color:navy">]    </span>; word ; Point to char after /
<span style="color:black">TRANGROUP:4AC6                 </span><span style="color:navy">mov     [ds:</span>ELCNT<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; Store of &#039;/&#039; sets it to 0
<span style="color:black">TRANGROUP:4ACB                 </span><span style="color:navy">mov     [ds:</span>ELPOS<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; byte
<span style="color:black">TRANGROUP:4AD0
TRANGROUP:4AD0 </span><span style="color:gray">notspecial</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4AD0                 </span><span style="color:navy">call    </span>move_char       ; just an alphanum string
<span style="color:black">TRANGROUP:4AD3
TRANGROUP:4AD3 </span><span style="color:gray">anum_test</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4AD3                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:4AD4                 </span><span style="color:navy">call    </span>DELIM
<span style="color:black">TRANGROUP:4AD7                 </span><span style="color:navy">jz      short </span><span style="color:gray">x_done
</span><span style="color:black">TRANGROUP:4AD9                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:4ADB                 </span><span style="color:navy">jz      short </span><span style="color:gray">x_done
</span><span style="color:black">TRANGROUP:4ADD                 </span><span style="color:navy">cmp     al, [ds:</span>SWITCHAR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4AE1                 </span><span style="color:navy">jz      short </span><span style="color:gray">x_done
</span><span style="color:black">TRANGROUP:4AE3                 </span><span style="color:navy">cmp     al, bl
</span><span style="color:black">TRANGROUP:4AE5                 </span><span style="color:navy">jz      short </span><span style="color:gray">x_done
</span><span style="color:black">TRANGROUP:4AE7                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">:&#039;         </span>; &#039;:&#039; allowed as trailer because of devices
<span style="color:black">TRANGROUP:4AE9                 </span><span style="color:navy">jz      short </span><span style="color:gray">FOO15
</span><span style="color:black">TRANGROUP:4AEB                 </span><span style="color:navy">jmp     </span><span style="color:gray">anum_char
</span><span style="color:black">TRANGROUP:4AEE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4AEE
TRANGROUP:4AEE </span><span style="color:gray">FOO15</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4AEE                 </span><span style="color:navy">cmp     [ds:</span>cpyflag<span style="color:navy">], </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:4AF3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">cpcont4
</span><span style="color:black">TRANGROUP:4AF5                 </span><span style="color:navy">call    </span>move_char
<span style="color:black">TRANGROUP:4AF8                 </span><span style="color:navy">jmp     short </span><span style="color:gray">anum_test
</span><span style="color:black">TRANGROUP:4AFA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4AFA
TRANGROUP:4AFA </span><span style="color:gray">cpcont4</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4AFA                 </span><span style="color:navy">inc     si              </span>; Skip the &#039;:&#039;
<span style="color:black">TRANGROUP:4AFB                 </span><span style="color:navy">jmp     short </span><span style="color:gray">x_done
</span><span style="color:black">TRANGROUP:4AFD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4AFD                 </span><span style="color:navy">jmp     </span><span style="color:gray">anum_char
</span><span style="color:black">TRANGROUP:4B00 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4B00
TRANGROUP:4B00 </span><span style="color:gray">BADPERR2</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4B00                 </span><span style="color:navy">mov     dx, offset </span>BADCPMES_PTR ; Issue &quot;Invalid Directory&quot; message
<span style="color:black">TRANGROUP:4B03                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:4B06 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4B06
TRANGROUP:4B06 </span><span style="color:gray">BADPERR</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4B06                 </span><span style="color:navy">mov     dx, offset </span>badcd_ptr
<span style="color:black">TRANGROUP:4B09                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:4B0C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4B0C
TRANGROUP:4B0C </span><span style="color:gray">cperror</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4B0C                 </span><span style="color:navy">dec     si              </span>; adjust the pointer
<span style="color:black">TRANGROUP:4B0D                 </span><span style="color:navy">pop     di              </span>; retrive token buffer address
<span style="color:black">TRANGROUP:4B0E                 </span><span style="color:navy">popf                    </span>; restore flags
<span style="color:black">TRANGROUP:4B0F                 </span><span style="color:navy">stc                     </span>; set the carry bit
<span style="color:black">TRANGROUP:4B10                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4B11 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4B11
TRANGROUP:4B11 </span><span style="color:gray">x_done</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4B11                 </span><span style="color:navy">dec     si              </span>; adjust for next round
<span style="color:black">TRANGROUP:4B12                 </span><span style="color:navy">jmp     short </span><span style="color:gray">out_token
</span><span style="color:black">TRANGROUP:4B14 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4B14
TRANGROUP:4B14 </span><span style="color:gray">a_switch</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4B14                 </span><span style="color:navy">or      bh, </span><span style="color:green">1           </span>; Indicate switch
<span style="color:black">TRANGROUP:4B17                 </span><span style="color:navy">or      bp, </span><span style="color:green">8000h       </span>; FSWITCH
<span style="color:black">TRANGROUP:4B1B                 </span><span style="color:navy">call    </span>scanoff
<span style="color:black">TRANGROUP:4B1E                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:4B1F                 </span><span style="color:navy">call    </span>testkanj
<span style="color:black">TRANGROUP:4B22                 </span><span style="color:navy">jz      short </span><span style="color:gray">a_switch_notkanj
</span><span style="color:black">TRANGROUP:4B24                 </span><span style="color:navy">call    </span>move_char
<span style="color:black">TRANGROUP:4B27                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:4B28                 </span><span style="color:navy">call    </span>move_char
<span style="color:black">TRANGROUP:4B2B                 </span><span style="color:navy">or      bp, </span><span style="color:green">4000h       </span>; FBADSWITCH
<span style="color:black">TRANGROUP:4B2F                 </span><span style="color:navy">jmp     short </span><span style="color:gray">out_token
</span><span style="color:black">TRANGROUP:4B31 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4B31
TRANGROUP:4B31 </span><span style="color:gray">a_switch_notkanj</span><span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4B31                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:4B33                 </span><span style="color:navy">jnz     short </span><span style="color:gray">Store_swt
</span><span style="color:black">TRANGROUP:4B35                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4B37                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:4B38                 </span><span style="color:navy">or      bp, </span><span style="color:green">4000h       </span>; FBADSWITCH
<span style="color:black">TRANGROUP:4B3C                 </span><span style="color:navy">jmp     short </span><span style="color:gray">cperror   </span>; Trailing switch character error
<span style="color:black">TRANGROUP:4B3C                                         </span>; BP = fSwitch but no switch bit is set
<span style="color:black">TRANGROUP:4B3C                                         </span>; (unknown switch)
<span style="color:black">TRANGROUP:4B3E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4B3E
TRANGROUP:4B3E </span><span style="color:gray">Store_swt</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4B3E                 </span><span style="color:navy">call    </span>move_char       ; store the character
<span style="color:black">TRANGROUP:4B41                 </span><span style="color:navy">call    </span>UPCONV
<span style="color:black">TRANGROUP:4B44                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:4B45                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:4B46                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:4B47                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:4B48                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:4B49                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:4B49                 </span><span style="color:navy">mov     di, offset </span>switch_list <span style="color:gray">; &quot;-Y?VBAPW&quot;
</span><span style="color:black">TRANGROUP:4B4C                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">8           </span>; SWCOUNT = 8
<span style="color:black">TRANGROUP:4B4F                 </span><span style="color:navy">or      bp, </span><span style="color:green">4000h
</span><span style="color:black">TRANGROUP:4B53                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:4B55                 </span><span style="color:navy">jnz     short </span><span style="color:gray">out_tokenp
</span><span style="color:black">TRANGROUP:4B57                 </span><span style="color:navy">and     bp, </span><span style="color:green">0BFFFh      </span>; ~FBADSWITCH
<span style="color:black">TRANGROUP:4B5B                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:4B5E                 </span><span style="color:navy">shl     ax, cl
</span><span style="color:black">TRANGROUP:4B60                 </span><span style="color:navy">or      bp, ax
</span><span style="color:black">TRANGROUP:4B62
TRANGROUP:4B62 </span><span style="color:gray">out_tokenp</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4B62                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:4B63                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:4B64                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:4B65                 </span>assume es:nothing
<span style="color:black">TRANGROUP:4B65
TRANGROUP:4B65 </span><span style="color:gray">out_token</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4B65                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4B67                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:4B68                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:4B69                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:4B6A                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:4B6B                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4B6B </span>endp            cparse
<span style="color:black">TRANGROUP:4B6B
TRANGROUP:4B6C
TRANGROUP:4B6C </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4B6C
TRANGROUP:4B6C
TRANGROUP:4B6C </span>proc            move_char near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4B6C                 </span><span style="color:navy">stosb                   </span>; store char in token buffer
<span style="color:black">TRANGROUP:4B6D                 </span><span style="color:navy">inc     cx              </span>; increment char count
<span style="color:black">TRANGROUP:4B6E                 </span><span style="color:navy">inc     [ds:</span>ELCNT<span style="color:navy">]      </span>; byte ; increment element count for * substi
<span style="color:black">TRANGROUP:4B72                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4B72 </span>endp            move_char
<span style="color:black">TRANGROUP:4B72
TRANGROUP:4B73
TRANGROUP:4B73 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4B73
TRANGROUP:4B73
TRANGROUP:4B73 </span>proc            sysparse near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4B73
TRANGROUP:4B73 </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:4C8C SIZE 00000069 BYTES
</span><span style="color:black">TRANGROUP:4B73
TRANGROUP:4B73                 </span><span style="color:navy">mov     [word ptr cs:</span>$P_Flags<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4B7A                 </span><span style="color:navy">mov     [cs:</span>$P_ORIG_ORD<span style="color:navy">], cx
</span><span style="color:black">TRANGROUP:4B7F                 </span><span style="color:navy">mov     [cs:</span>$P_ORIG_STACK<span style="color:navy">], sp
</span><span style="color:black">TRANGROUP:4B84                 </span><span style="color:navy">mov     [cs:</span>$P_ORIG_SI<span style="color:navy">], si
</span><span style="color:black">TRANGROUP:4B89
TRANGROUP:4B89 </span>$P_Redo_Time<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4B89                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:4B8A                 </span><span style="color:navy">mov     [cs:</span>$P_ORDINAL<span style="color:navy">], cx
</span><span style="color:black">TRANGROUP:4B8F                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; word ; $P_No_Error
<span style="color:black">TRANGROUP:4B96                 </span><span style="color:navy">mov     [cs:</span>$P_Found_SYNONYM<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4B9D                 </span><span style="color:navy">mov     [cs:</span>$P_DX<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4BA4                 </span><span style="color:navy">mov     [word ptr cs:</span>$P_FileSp_Char<span style="color:navy">], &#039;</span><span style="color:green">][&#039; </span><span style="color:gray">; &quot;[]|&lt;&gt;+=;\&quot;&quot;
</span><span style="color:black">TRANGROUP:4BAB                 </span><span style="color:navy">mov     [word ptr cs:</span>$P_FileSp_Char<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], &#039;&lt;</span><span style="color:green">|&#039;
</span><span style="color:black">TRANGROUP:4BB2                 </span><span style="color:navy">mov     [word ptr cs:</span>$P_FileSp_Char<span style="color:navy">+</span><span style="color:green">4</span><span style="color:navy">], &#039;</span><span style="color:green">+&gt;&#039;
</span><span style="color:black">TRANGROUP:4BB9                 </span><span style="color:navy">mov     [word ptr cs:</span>$P_FileSp_Char<span style="color:navy">+</span><span style="color:green">6</span><span style="color:navy">], &#039;</span><span style="color:green">;=&#039;
</span><span style="color:black">TRANGROUP:4BC0                 </span><span style="color:navy">call    </span>$P_Skip_Delim
<span style="color:black">TRANGROUP:4BC3                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$P_Start
</span><span style="color:black">TRANGROUP:4BC5                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FFFFh      </span>; $P_RC_EOL
<span style="color:black">TRANGROUP:4BC8                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:4BC9                 </span><span style="color:navy">mov     bx, [es:di]     </span>; [es:di+$P_PARMS_BLK.$P_PARMSX_Address]
<span style="color:black">TRANGROUP:4BCC                 </span><span style="color:navy">cmp     cl, [es:bx]     </span>; [es:bx+$P_PARMSX_BLK.$P_MinP]
<span style="color:black">TRANGROUP:4BCC                                         </span>; check ORDINAL to see if the minimum
<span style="color:black">TRANGROUP:4BCF                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$P_Fin    </span>; positional found.
<span style="color:black">TRANGROUP:4BD1                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2           </span>; $P_Op_Missing
<span style="color:black">TRANGROUP:4BD4
TRANGROUP:4BD4 </span><span style="color:gray">$P_Fin</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4BD4                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:4BD5                 </span><span style="color:navy">jmp     </span><span style="color:gray">$P_Single_Exit
</span><span style="color:black">TRANGROUP:4BD8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4BD8
TRANGROUP:4BD8 </span><span style="color:gray">$P_Start</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4BD8                 </span><span style="color:navy">mov     [cs:</span>$P_SaveSI_Cmpx<span style="color:navy">], si
</span><span style="color:black">TRANGROUP:4BDD                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:4BDE                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:4BDF                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:4BE0                 </span><span style="color:navy">lea     bx, [</span>$P_STRING_BUF<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4BE4                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">20h </span>; $P_Extra
<span style="color:black">TRANGROUP:4BEA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Pack_End
</span><span style="color:black">TRANGROUP:4BEC
TRANGROUP:4BEC </span><span style="color:gray">$P_Pack_Loop</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4BEC                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:4BED                 </span><span style="color:navy">call    </span>$P_Chk_Switch   ; Check switch character
<span style="color:black">TRANGROUP:4BF0                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_Pack_End_BY_EOL </span>; if carry set found delimiter type slash,
<span style="color:black">TRANGROUP:4BF0                                         </span>; need backup si, else continue
<span style="color:black">TRANGROUP:4BF2                 </span><span style="color:navy">call    </span>$P_Chk_EOL      ; Check EOL character
<span style="color:black">TRANGROUP:4BF5                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Pack_End_BY_EOL
</span><span style="color:black">TRANGROUP:4BF7                 </span><span style="color:navy">call    </span>$P_Chk_Delim    ; Check delimiter
<span style="color:black">TRANGROUP:4BFA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_PL01   </span>; If no, process next byte
<span style="color:black">TRANGROUP:4BFC                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">20h </span>; $P_Extra
<span style="color:black">TRANGROUP:4C02                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Pack_End_backup_si
</span><span style="color:black">TRANGROUP:4C04                 </span><span style="color:navy">call    </span>$P_Skip_Delim   ; skip subsequent white space,too
<span style="color:black">TRANGROUP:4C07                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Pack_End </span>; finish copy by placing NUL at end
<span style="color:black">TRANGROUP:4C09 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4C09
TRANGROUP:4C09 </span><span style="color:gray">$P_Pack_End_backup_si</span><span style="color:navy">:                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4C09                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">41h </span>; $P_SW+$P_equ
<span style="color:black">TRANGROUP:4C0F                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Pack_End
</span><span style="color:black">TRANGROUP:4C11                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:4C12                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Pack_End
</span><span style="color:black">TRANGROUP:4C14 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4C14
TRANGROUP:4C14 </span><span style="color:gray">$P_PL01</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4C14                 </span><span style="color:navy">mov     [cs:bx], al
</span><span style="color:black">TRANGROUP:4C17                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Dh </span><span style="color:gray">; &#039;=&#039;   </span>; $P_Keyword
<span style="color:black">TRANGROUP:4C19                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_PL00
</span><span style="color:black">TRANGROUP:4C1B                 </span><span style="color:navy">or      [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">1 </span>; $P_equ
<span style="color:black">TRANGROUP:4C21
TRANGROUP:4C21 </span><span style="color:gray">$P_PL00</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4C21                 </span><span style="color:navy">inc     bx              </span>; ready to see next byte
<span style="color:black">TRANGROUP:4C22                 </span><span style="color:navy">call    </span>$P_Chk_DBCS     ; was it 1st byte of DBCS ?
<span style="color:black">TRANGROUP:4C25                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$P_Pack_Loop </span>; if no, process to next byte
<span style="color:black">TRANGROUP:4C27                 </span><span style="color:navy">lodsb                   </span>; if yes, store 2nd byte of DBCS
<span style="color:black">TRANGROUP:4C28                 </span><span style="color:navy">mov     [cs:bx], al
</span><span style="color:black">TRANGROUP:4C2B                 </span><span style="color:navy">inc     bx              </span>; update pointer
<span style="color:black">TRANGROUP:4C2C                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Pack_Loop </span>; process to next byte
<span style="color:black">TRANGROUP:4C2E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4C2E
TRANGROUP:4C2E </span><span style="color:gray">$P_Pack_End_BY_EOL</span><span style="color:navy">:                     </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4C2E                 </span><span style="color:navy">dec     si              </span>; backup si pointer
<span style="color:black">TRANGROUP:4C2F
TRANGROUP:4C2F </span><span style="color:gray">$P_Pack_End</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4C2F                 </span><span style="color:navy">mov     [cs:</span>$P_SI_Save<span style="color:navy">], si </span>; save next pointer
<span style="color:black">TRANGROUP:4C34                 </span><span style="color:navy">mov     [byte ptr cs:bx], </span><span style="color:#ff8000">0 </span>; $P_NULL ; put nul at the end
<span style="color:black">TRANGROUP:4C38                 </span><span style="color:navy">mov     [cs:</span>$P_Save_EOB<span style="color:navy">], bx </span>; keep the addr for later use of complex
<span style="color:black">TRANGROUP:4C3D                 </span><span style="color:navy">mov     bx, [es:di]     </span>; get PARMSX address
<span style="color:black">TRANGROUP:4C40                 </span><span style="color:navy">lea     si, [</span>$P_STRING_BUF<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4C44                 </span><span style="color:navy">cmp     [byte ptr cs:si], </span><span style="color:#ff8000">2Fh </span><span style="color:gray">; &#039;/&#039; </span>; $P_Switch
<span style="color:black">TRANGROUP:4C48                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_SW_Manager </span>; if yes, process as switch
<span style="color:black">TRANGROUP:4C4A                 </span><span style="color:navy">cmp     [byte ptr cs:si], </span><span style="color:#ff8000">22h </span><span style="color:gray">; &#039;&quot;&#039; </span>; $P_DQuote
<span style="color:black">TRANGROUP:4C4E                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Positional_Manager </span>; if so, process as one!
<span style="color:black">TRANGROUP:4C50                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">1 </span>; $P_equ
<span style="color:black">TRANGROUP:4C50                                         </span>; is the operand includes equal char ?
<span style="color:black">TRANGROUP:4C56                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Key_Manager </span>; if yes, process as keyword
<span style="color:black">TRANGROUP:4C58
TRANGROUP:4C58 </span><span style="color:gray">$P_Positional_Manager</span><span style="color:navy">:                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4C58                 </span><span style="color:navy">mov     al, [es:bx+</span><span style="color:#ff8000">1</span><span style="color:navy">]   </span>; [es:bx+$P_PARMSX_BLK.$P_MaxP]
<span style="color:black">TRANGROUP:4C5C                 </span><span style="color:navy">xor     ah, ah          </span>; ax = maxp
<span style="color:black">TRANGROUP:4C5E                 </span><span style="color:navy">cmp     [cs:</span>$P_ORDINAL<span style="color:navy">], ax </span>; too many positional ?
<span style="color:black">TRANGROUP:4C63                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$P_Too_Many_Error </span>; if yes, set exit code to too many
<span style="color:black">TRANGROUP:4C65                 </span><span style="color:navy">mov     ax, [cs:</span>$P_ORDINAL<span style="color:navy">] </span>; see what the current ordinal
<span style="color:black">TRANGROUP:4C69                 </span><span style="color:navy">shl     ax, </span><span style="color:green">1           </span>; ax = ax*2
<span style="color:black">TRANGROUP:4C6B                 </span><span style="color:navy">inc     bx              </span>; add 2 to bx
<span style="color:black">TRANGROUP:4C6C                 </span><span style="color:navy">inc     bx              </span>; now bx points to 1st CONTROL
<span style="color:black">TRANGROUP:4C6D                 </span><span style="color:navy">add     bx, ax          </span>; now bx points to specified CONTROL address
<span style="color:black">TRANGROUP:4C6F                 </span><span style="color:navy">mov     bx, [es:bx]     </span>; now bx points to specified CONTROL itself
<span style="color:black">TRANGROUP:4C72                 </span><span style="color:navy">call    </span>$P_Chk_Pos_Control ; Do process for positional
<span style="color:black">TRANGROUP:4C75                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Return_to_Caller
</span><span style="color:black">TRANGROUP:4C77 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4C77
TRANGROUP:4C77 </span><span style="color:gray">$P_Too_Many_Error</span><span style="color:navy">:                      </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4C77                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">1   </span>; $P_Too_Many ; set exit code
<span style="color:black">TRANGROUP:4C7E                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Return_to_Caller
</span><span style="color:black">TRANGROUP:4C7E </span>endp            sysparse
<span style="color:black">TRANGROUP:4C7E
TRANGROUP:4C80
TRANGROUP:4C80 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4C80
TRANGROUP:4C80
TRANGROUP:4C80 </span>proc            $P_get_max_ptr near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4C80                 </span><span style="color:navy">mov     al, [es:bx+</span><span style="color:#ff8000">1</span><span style="color:navy">]   </span>; [es:bx+$P_PARMSX_BLK.$P_MaxP] ; get maxp
<span style="color:black">TRANGROUP:4C84                 </span><span style="color:navy">xor     ah, ah          </span>; ax = maxp
<span style="color:black">TRANGROUP:4C86                 </span><span style="color:navy">inc     ax
</span><span style="color:black">TRANGROUP:4C87                 </span><span style="color:navy">shl     ax, </span><span style="color:green">1           </span>; ax = (ax+1)*2
<span style="color:black">TRANGROUP:4C89                 </span><span style="color:navy">add     bx, ax          </span>; now bx points to maxs
<span style="color:black">TRANGROUP:4C8B                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4C8B </span>endp            $P_get_max_ptr
<span style="color:black">TRANGROUP:4C8B
TRANGROUP:4C8C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4C8C </span><span style="color:gray">; START OF FUNCTION CHUNK FOR sysparse
</span><span style="color:black">TRANGROUP:4C8C
TRANGROUP:4C8C </span><span style="color:gray">$P_SW_Manager</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4C8C                 </span><span style="color:navy">call    </span>$P_get_max_ptr
<span style="color:black">TRANGROUP:4C8F                 </span><span style="color:navy">mov     cl, [es:bx]
</span><span style="color:black">TRANGROUP:4C92                 </span><span style="color:navy">xor     ch, ch
</span><span style="color:black">TRANGROUP:4C94                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">$P_SW_Not_Found
</span><span style="color:black">TRANGROUP:4C96                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:4C97
TRANGROUP:4C97 </span><span style="color:gray">$P_SW_Mgr_Loop</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4C97                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:4C98                 </span><span style="color:navy">mov     bx, [es:bx]     </span>; bx points to Switch CONTROL itself
<span style="color:black">TRANGROUP:4C9B                 </span><span style="color:navy">call    </span>$P_Chk_SW_Control
<span style="color:black">TRANGROUP:4C9E                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:4C9F                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$P_Return_to_Caller </span>;
<span style="color:black">TRANGROUP:4C9F                                         </span>; if the CONTROL is for the switch, exit
<span style="color:black">TRANGROUP:4CA1                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:4CA2                 </span><span style="color:navy">inc     bx              </span>; bx points to the next CONTROL
<span style="color:black">TRANGROUP:4CA3                 </span><span style="color:navy">loop    </span><span style="color:gray">$P_SW_Mgr_Loop  </span>; loop
<span style="color:black">TRANGROUP:4CA5
TRANGROUP:4CA5 </span><span style="color:gray">$P_SW_Not_Found</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4CA5                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">3   </span>; $P_Not_In_SW
<span style="color:black">TRANGROUP:4CAC                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Return_to_Caller
</span><span style="color:black">TRANGROUP:4CAE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4CAE
TRANGROUP:4CAE </span><span style="color:gray">$P_Key_Manager</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4CAE                 </span><span style="color:navy">call    </span>$P_get_max_ptr
<span style="color:black">TRANGROUP:4CB1                 </span><span style="color:navy">mov     al, [es:bx]
</span><span style="color:black">TRANGROUP:4CB4                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:black">TRANGROUP:4CB6                 </span><span style="color:navy">shl     ax, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:4CB8                 </span><span style="color:navy">inc     ax
</span><span style="color:black">TRANGROUP:4CB9                 </span><span style="color:navy">add     bx, ax
</span><span style="color:black">TRANGROUP:4CBB                 </span><span style="color:navy">mov     cl, [es:bx]
</span><span style="color:black">TRANGROUP:4CBE                 </span><span style="color:navy">xor     ch, ch
</span><span style="color:black">TRANGROUP:4CC0                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">$P_Key_Not_Found
</span><span style="color:black">TRANGROUP:4CC2                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:4CC3
TRANGROUP:4CC3 </span><span style="color:gray">$P_Key_Mgr_Loop</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4CC3                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:4CC4                 </span><span style="color:navy">mov     bx, [es:bx]
</span><span style="color:black">TRANGROUP:4CC7                 </span><span style="color:navy">call    </span>$P_Chk_Key_Control
<span style="color:black">TRANGROUP:4CCA                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:4CCB                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$P_Return_to_Caller
</span><span style="color:black">TRANGROUP:4CCD                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:4CCE                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:4CCF                 </span><span style="color:navy">loop    </span><span style="color:gray">$P_Key_Mgr_Loop
</span><span style="color:black">TRANGROUP:4CD1
TRANGROUP:4CD1 </span><span style="color:gray">$P_Key_Not_Found</span><span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4CD1                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">4   </span>; $P_Not_In_Key
<span style="color:black">TRANGROUP:4CD8
TRANGROUP:4CD8 </span><span style="color:gray">$P_Return_to_Caller</span><span style="color:navy">:                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4CD8                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:4CD9                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:4CDA                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:4CDB                 </span><span style="color:navy">mov     cx, [cs:</span>$P_ORDINAL<span style="color:navy">] </span>; return next ordinal
<span style="color:black">TRANGROUP:4CE0                 </span><span style="color:navy">mov     ax, [cs:</span>$P_RC<span style="color:navy">]  </span>; return exit code
<span style="color:black">TRANGROUP:4CE4                 </span><span style="color:navy">mov     si, [cs:</span>$P_SI_Save<span style="color:navy">] </span>; return next operand pointer
<span style="color:black">TRANGROUP:4CE9                 </span><span style="color:navy">mov     dx, [cs:</span>$P_DX<span style="color:navy">]  </span>; return result buffer address
<span style="color:black">TRANGROUP:4CEE                 </span><span style="color:navy">mov     bl, [cs:</span>$P_Terminator<span style="color:navy">] </span>; return delimiter code found
<span style="color:black">TRANGROUP:4CF3
TRANGROUP:4CF3 </span><span style="color:gray">$P_Single_Exit</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4CF3                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:4CF4                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4CF4 </span><span style="color:gray">; END OF FUNCTION CHUNK FOR sysparse
</span><span style="color:black">TRANGROUP:4CF5
TRANGROUP:4CF5 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4CF5
TRANGROUP:4CF5
TRANGROUP:4CF5 </span>proc            $P_Chk_Pos_Control near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4CF5                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:4CF6                 </span><span style="color:navy">mov     ax, [es:bx]     </span>; [es:bx+$P_CONTROL_BLK.$P_Match_Flag]
<span style="color:black">TRANGROUP:4CF9                 </span><span style="color:navy">test    ax, </span><span style="color:green">2           </span>; $P_Repeat ; repeat allowed ?
<span style="color:black">TRANGROUP:4CFC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_CPC00  </span>; then do not increment ORDINAL
<span style="color:black">TRANGROUP:4CFE                 </span><span style="color:navy">inc     [cs:</span>$P_ORDINAL<span style="color:navy">] </span>; inc word [cs:$P_ORDINAL]
<span style="color:black">TRANGROUP:4D03
TRANGROUP:4D03 </span><span style="color:gray">$P_CPC00</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D03                 </span><span style="color:navy">cmp     [byte ptr cs:si], </span><span style="color:#ff8000">0 </span>; $P_NULL ; no data ?
<span style="color:black">TRANGROUP:4D07                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_CPC01
</span><span style="color:black">TRANGROUP:4D09                 </span><span style="color:navy">test    ax, </span><span style="color:green">1           </span>; $P_Optional
<span style="color:black">TRANGROUP:4D0C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_CPC02  </span>; optional
<span style="color:black">TRANGROUP:4D0E                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">2   </span>; $P_Op_Missing ; no, then error
<span style="color:black">TRANGROUP:4D15                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_CPC_Exit
</span><span style="color:black">TRANGROUP:4D17 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4D17
TRANGROUP:4D17 </span><span style="color:gray">$P_CPC02</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D17                 </span><span style="color:navy">push    ax              </span>; if it is optional return NULL
<span style="color:black">TRANGROUP:4D18                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FF03h      </span>; ($P_No_Tag&lt;&lt;8)+$P_String
<span style="color:black">TRANGROUP:4D1B                 </span><span style="color:navy">call    </span>$P_Fill_Result
<span style="color:black">TRANGROUP:4D1E                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:4D1F                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_CPC_Exit
</span><span style="color:black">TRANGROUP:4D21 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4D21
TRANGROUP:4D21 </span><span style="color:gray">$P_CPC01</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D21                 </span><span style="color:navy">call    </span>$P_Check_Match_Flags
<span style="color:black">TRANGROUP:4D24
TRANGROUP:4D24 </span><span style="color:gray">$P_CPC_Exit</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D24                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:4D25                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4D25 </span>endp            $P_Chk_Pos_Control
<span style="color:black">TRANGROUP:4D25
TRANGROUP:4D26
TRANGROUP:4D26 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4D26
TRANGROUP:4D26
TRANGROUP:4D26 </span>proc            $P_Chk_Key_Control near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D26                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:4D27                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4D27 </span>endp            $P_Chk_Key_Control
<span style="color:black">TRANGROUP:4D27
TRANGROUP:4D28
TRANGROUP:4D28 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4D28
TRANGROUP:4D28
TRANGROUP:4D28 </span>proc            $P_Search_KEYorSW near  <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D28                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:4D29                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:4D2A                 </span><span style="color:navy">mov     cl, [es:bx+</span><span style="color:#ff8000">8</span><span style="color:navy">]   </span>; [es:bx+$P_CONTROL_BLK.$P_nid]
<span style="color:black">TRANGROUP:4D2E                 </span><span style="color:navy">xor     ch, ch
</span><span style="color:black">TRANGROUP:4D30                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">$P_KEYorSW_Not_Found
</span><span style="color:black">TRANGROUP:4D32                 </span><span style="color:navy">lea     bp, [bx+</span><span style="color:#ff8000">9</span><span style="color:navy">]      </span>; [es:bx+$P_CONTROL_BLK.$P_KEYorSW]
<span style="color:black">TRANGROUP:4D35
TRANGROUP:4D35 </span><span style="color:gray">$P_KEYorSW_Loop</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D35                 </span><span style="color:navy">call    </span>$P_String_Comp  ; compare string in buffer with the synonym
<span style="color:black">TRANGROUP:4D38                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$P_KEYorSW_Found </span>; If match, set it to synonym pointer
<span style="color:black">TRANGROUP:4D3A                 </span><span style="color:navy">call    </span>$P_MoveBP_NUL   ; else, bp points to the next string
<span style="color:black">TRANGROUP:4D3D                 </span><span style="color:navy">loop    </span><span style="color:gray">$P_KEYorSW_Loop
</span><span style="color:black">TRANGROUP:4D3F
TRANGROUP:4D3F </span><span style="color:gray">$P_KEYorSW_Not_Found</span><span style="color:navy">:                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D3F                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:4D40                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_KEYorSW_Exit
</span><span style="color:black">TRANGROUP:4D42 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4D42
TRANGROUP:4D42 </span><span style="color:gray">$P_KEYorSW_Found</span><span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D42                 </span><span style="color:navy">mov     [cs:</span>$P_Found_SYNONYM<span style="color:navy">], bp </span>; set synonym pointer
<span style="color:black">TRANGROUP:4D47                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:4D48
TRANGROUP:4D48 </span><span style="color:gray">$P_KEYorSW_Exit</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D48                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:4D49                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:4D4A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4D4A </span>endp            $P_Search_KEYorSW
<span style="color:black">TRANGROUP:4D4A
TRANGROUP:4D4B
TRANGROUP:4D4B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4D4B
TRANGROUP:4D4B
TRANGROUP:4D4B </span>proc            $P_MoveBP_NUL near      <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D4B                 </span><span style="color:navy">cmp     [byte ptr es:bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; $P_NULL
<span style="color:black">TRANGROUP:4D50                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_MBP_Exit
</span><span style="color:black">TRANGROUP:4D52                 </span><span style="color:navy">inc     bp
</span><span style="color:black">TRANGROUP:4D53                 </span><span style="color:navy">jmp     short </span>$P_MoveBP_NUL
<span style="color:black">TRANGROUP:4D55 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4D55
TRANGROUP:4D55 </span><span style="color:gray">$P_MBP_Exit</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D55                 </span><span style="color:navy">inc     bp
</span><span style="color:black">TRANGROUP:4D56                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4D56 </span>endp            $P_MoveBP_NUL
<span style="color:black">TRANGROUP:4D56
TRANGROUP:4D57
TRANGROUP:4D57 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4D57
TRANGROUP:4D57
TRANGROUP:4D57 </span>proc            $P_Chk_SW_Control near  <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D57                 </span><span style="color:navy">or      [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">10h </span>; $P_SW_Cmp
<span style="color:black">TRANGROUP:4D5D                 </span><span style="color:navy">call    </span>$P_Search_KEYorSW
<span style="color:black">TRANGROUP:4D60                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_Chk_SW_Err0
</span><span style="color:black">TRANGROUP:4D62                 </span><span style="color:navy">and     [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">0EFh </span>; 0FFh-$P_SW_Cmp
<span style="color:black">TRANGROUP:4D68                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:4D69                 </span><span style="color:navy">mov     ax, [cs:</span>$P_KEYorSW_Ptr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4D6D                 </span><span style="color:navy">sub     ax, si
</span><span style="color:black">TRANGROUP:4D6F                 </span><span style="color:navy">add     [cs:</span>$P_SaveSI_Cmpx<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:4D74                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:4D75                 </span><span style="color:navy">mov     si, [cs:</span>$P_KEYorSW_Ptr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4D7A                 </span><span style="color:navy">cmp     [byte ptr cs:si], </span><span style="color:#ff8000">0 </span>; $P_NULL
<span style="color:black">TRANGROUP:4D7E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_CSW00
</span><span style="color:black">TRANGROUP:4D80                 </span><span style="color:navy">cmp     [byte ptr cs:si-</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039; </span>; $P_Colon
<span style="color:black">TRANGROUP:4D85                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Chk_if_data_required
</span><span style="color:black">TRANGROUP:4D87                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9   </span>; $P_Syntax
<span style="color:black">TRANGROUP:4D8E                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Chk_SW_Exit
</span><span style="color:black">TRANGROUP:4D90 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4D90
TRANGROUP:4D90 </span><span style="color:gray">$P_Chk_if_data_required</span><span style="color:navy">:                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4D90                 </span><span style="color:navy">cmp     [word ptr es:bx], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4D94                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Chk_SW_Exit
</span><span style="color:black">TRANGROUP:4D96                 </span><span style="color:navy">test    [word ptr es:bx], </span><span style="color:green">1 </span>; [es:bx+$P_CONTROL_BLK.$P_Match_Flag],$P_Optional
<span style="color:black">TRANGROUP:4D9B                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Chk_SW_Exit
</span><span style="color:black">TRANGROUP:4D9D                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">2   </span>; [cs:$P_RC],$P_Op_Missing
<span style="color:black">TRANGROUP:4DA4                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Chk_SW_Exit
</span><span style="color:black">TRANGROUP:4DA6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4DA6
TRANGROUP:4DA6 </span><span style="color:gray">$P_CSW00</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4DA6                 </span><span style="color:navy">call    </span>$P_Check_Match_Flags
<span style="color:black">TRANGROUP:4DA9                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:4DAA                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Chk_SW_Single_Exit
</span><span style="color:black">TRANGROUP:4DAC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4DAC
TRANGROUP:4DAC </span><span style="color:gray">$P_Chk_SW_Err0</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4DAC                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:4DAD                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4DAE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4DAE
TRANGROUP:4DAE </span><span style="color:gray">$P_Chk_SW_Exit</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4DAE                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:4DAF                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FF03h      </span>; ($P_No_Tag&lt;&lt;8)+$P_String
<span style="color:black">TRANGROUP:4DB2                 </span><span style="color:navy">call    </span>$P_Fill_Result
<span style="color:black">TRANGROUP:4DB5                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:4DB6                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:4DB7
TRANGROUP:4DB7 </span><span style="color:gray">$P_Chk_SW_Single_Exit</span><span style="color:navy">:                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4DB7                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4DB7 </span>endp            $P_Chk_SW_Control
<span style="color:black">TRANGROUP:4DB7
TRANGROUP:4DB8
TRANGROUP:4DB8 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4DB8
TRANGROUP:4DB8
TRANGROUP:4DB8 </span>proc            $P_Fill_Result near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4DB8                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:4DB9                 </span><span style="color:navy">mov     di, [es:bx+</span><span style="color:#ff8000">4</span><span style="color:navy">]   </span>; [es:bx+$P_CONTROL_BLK.$P_Result_Buf]
<span style="color:black">TRANGROUP:4DBD                 </span><span style="color:navy">mov     [cs:</span>$P_DX<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:4DC2                 </span><span style="color:navy">mov     [es:di], al     </span>; [es:di+$P_RESULT_BLK.$P_Type]
<span style="color:black">TRANGROUP:4DC5                 </span><span style="color:navy">mov     [es:di+</span><span style="color:#ff8000">1</span><span style="color:navy">], ah   </span>; [es:di+$P_RESULT_BLK.$P_Item_Tag]
<span style="color:black">TRANGROUP:4DC9                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:4DCA                 </span><span style="color:navy">mov     ax, [cs:</span>$P_Found_SYNONYM<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4DCE                 </span><span style="color:navy">mov     [es:di+</span><span style="color:#ff8000">2</span><span style="color:navy">], ax   </span>; [es:di+$P_RESULT_BLK.$P_SYNONYM_Ptr]
<span style="color:black">TRANGROUP:4DD2                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:4DD3                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">1           </span>; $P_Number
<span style="color:black">TRANGROUP:4DD5                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_RLT00
</span><span style="color:black">TRANGROUP:4DD7
TRANGROUP:4DD7 </span><span style="color:gray">$P_RLT02</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4DD7                 </span><span style="color:navy">mov     [es:di+</span><span style="color:#ff8000">4</span><span style="color:navy">], dx   </span>; [es:di+$P_RESULT_BLK.$P_Picked_Val]
<span style="color:black">TRANGROUP:4DDB                 </span><span style="color:navy">mov     [es:di+</span><span style="color:#ff8000">6</span><span style="color:navy">], cx   </span>; [es:di+2+$P_RESULT_BLK.$P_Picked_Val]
<span style="color:black">TRANGROUP:4DDF                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_RLT_Exit
</span><span style="color:black">TRANGROUP:4DE1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4DE1
TRANGROUP:4DE1 </span><span style="color:gray">$P_RLT00</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4DE1                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">2           </span>; $P_List_Idx
<span style="color:black">TRANGROUP:4DE3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_RLT01
</span><span style="color:black">TRANGROUP:4DE5                 </span><span style="color:navy">mov     [es:di+</span><span style="color:#ff8000">4</span><span style="color:navy">], dx   </span>; [es:di+$P_RESULT_BLK.$P_Picked_Val]
<span style="color:black">TRANGROUP:4DE9                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_RLT_Exit
</span><span style="color:black">TRANGROUP:4DEB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4DEB
TRANGROUP:4DEB </span><span style="color:gray">$P_RLT01</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4DEB                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">7           </span>; $P_Date_F
<span style="color:black">TRANGROUP:4DED                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_RLT02
</span><span style="color:black">TRANGROUP:4DEF                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">8           </span>; $P_Time_F
<span style="color:black">TRANGROUP:4DF1                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_RLT02
</span><span style="color:black">TRANGROUP:4DF3                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">6           </span>; $P_Drive
<span style="color:black">TRANGROUP:4DF5                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_RLT03
</span><span style="color:black">TRANGROUP:4DF7                 </span><span style="color:navy">mov     [es:di+</span><span style="color:#ff8000">4</span><span style="color:navy">], dl   </span>; [es:di+$P_RESULT_BLK.$P_Picked_Val]
<span style="color:black">TRANGROUP:4DFB                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_RLT_Exit
</span><span style="color:black">TRANGROUP:4DFD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4DFD
TRANGROUP:4DFD </span><span style="color:gray">$P_RLT03</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4DFD                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">4           </span>; $P_Complex
<span style="color:black">TRANGROUP:4DFF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_RLT05
</span><span style="color:black">TRANGROUP:4E01                 </span><span style="color:navy">mov     ax, [cs:</span>$P_SaveSI_Cmpx<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4E05                 </span><span style="color:navy">inc     ax
</span><span style="color:black">TRANGROUP:4E06                 </span><span style="color:navy">mov     [es:di+</span><span style="color:#ff8000">4</span><span style="color:navy">], ax   </span>; [es:di+$P_RESULT_BLK.$P_Picked_Val]
<span style="color:black">TRANGROUP:4E0A                 </span><span style="color:navy">mov     [word ptr es:di+</span><span style="color:#ff8000">6</span><span style="color:navy">], ds </span>; [es:di+2+$P_RESULT_BLK.$P_Picked_Val]
<span style="color:black">TRANGROUP:4E0E                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_RLT_Exit
</span><span style="color:black">TRANGROUP:4E10 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4E10
TRANGROUP:4E10 </span><span style="color:gray">$P_RLT05</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4E10                 </span><span style="color:navy">mov     [es:di+</span><span style="color:#ff8000">4</span><span style="color:navy">], si   </span>; [es:di+$P_RESULT_BLK.$P_Picked_Val]
<span style="color:black">TRANGROUP:4E14                 </span><span style="color:navy">mov     [word ptr es:di+</span><span style="color:#ff8000">6</span><span style="color:navy">], cs </span>; [es:di+2+$P_RESULT_BLK.$P_Picked_Val]
<span style="color:black">TRANGROUP:4E18                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:4E19                 </span><span style="color:navy">test    [byte ptr es:bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:green">1 </span>; [es:bx+$P_CONTROL_BLK.$P_Function_Flag],$P_CAP_File
<span style="color:black">TRANGROUP:4E1E                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_RLT_CAP00
</span><span style="color:black">TRANGROUP:4E20                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">4           </span>; $P_DOSTBL_File
<span style="color:black">TRANGROUP:4E22                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_RLT_CAP02
</span><span style="color:black">TRANGROUP:4E24 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4E24
TRANGROUP:4E24 </span><span style="color:gray">$P_RLT_CAP00</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4E24                 </span><span style="color:navy">test    [byte ptr es:bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:green">2 </span>; [es:bx+$P_CONTROL_BLK.$P_Function_Flag],$P_CAP_Char
<span style="color:black">TRANGROUP:4E29                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_RLT_CAP01
</span><span style="color:black">TRANGROUP:4E2B                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">2           </span>; $P_DOSTBL_Char
<span style="color:black">TRANGROUP:4E2D
TRANGROUP:4E2D </span><span style="color:gray">$P_RLT_CAP02</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4E2D                 </span><span style="color:navy">call    </span>$P_Do_CAPS_String ; process CAPS along the table
<span style="color:black">TRANGROUP:4E30
TRANGROUP:4E30 </span><span style="color:gray">$P_RLT_CAP01</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4E30                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:4E31                 </span><span style="color:navy">test    [byte ptr es:bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:green">10h </span>; [es:bx+$P_CONTROL_BLK.$P_Function_Flag],$P_Rm_Colon
<span style="color:black">TRANGROUP:4E36                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_RLT_Exit
</span><span style="color:black">TRANGROUP:4E38                 </span><span style="color:navy">call    </span>$P_Remove_Colon
<span style="color:black">TRANGROUP:4E3B
TRANGROUP:4E3B </span><span style="color:gray">$P_RLT_Exit</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4E3B                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:4E3C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4E3C </span>endp            $P_Fill_Result
<span style="color:black">TRANGROUP:4E3C
TRANGROUP:4E3D
TRANGROUP:4E3D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4E3D
TRANGROUP:4E3D
TRANGROUP:4E3D </span>proc            $P_Check_Match_Flags near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4E3D                 </span><span style="color:navy">mov     [cs:</span>$P_err_flag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; $P_NULL
<span style="color:black">TRANGROUP:4E43                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:4E44                 </span><span style="color:navy">mov     ax, [es:bx]     </span>; [es:bx+$P_CONTROL_BLK.$P_Match_Flag]
<span style="color:black">TRANGROUP:4E47                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">TRANGROUP:4E49                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Mat
</span><span style="color:black">TRANGROUP:4E4B                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:4E4C                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:4E4D                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:4E4E                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:4E4F                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9   </span>; $P_Syntax
<span style="color:black">TRANGROUP:4E56                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FF03h      </span>; ($P_No_Tag&lt;&lt;8)+$P_String
<span style="color:black">TRANGROUP:4E59                 </span><span style="color:navy">call    </span>$P_Fill_Result
<span style="color:black">TRANGROUP:4E5C                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:4E5D                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:4E5E                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:4E5F                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:4E60                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Bridge
</span><span style="color:black">TRANGROUP:4E62 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4E62
TRANGROUP:4E62 </span><span style="color:gray">$P_Mat</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4E62                 </span><span style="color:navy">test    ax, </span><span style="color:green">1000h       </span>; $P_Date_S
<span style="color:black">TRANGROUP:4E65                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Match02
</span><span style="color:black">TRANGROUP:4E67                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; $P_No_Error
<span style="color:black">TRANGROUP:4E6E                 </span><span style="color:navy">call    </span>$P_Date_Format
<span style="color:black">TRANGROUP:4E71                 </span><span style="color:navy">cmp     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9   </span>; $P_Syntax
<span style="color:black">TRANGROUP:4E77                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Bridge
</span><span style="color:black">TRANGROUP:4E79
TRANGROUP:4E79 </span><span style="color:gray">$P_Match02</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4E79                 </span><span style="color:navy">test    ax, </span><span style="color:green">800h        </span>; $P_Time_S
<span style="color:black">TRANGROUP:4E7C                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Match03
</span><span style="color:black">TRANGROUP:4E7E                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4E85                 </span><span style="color:navy">call    </span>$P_Time_Format
<span style="color:black">TRANGROUP:4E88                 </span><span style="color:navy">cmp     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:4E8E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Bridge
</span><span style="color:black">TRANGROUP:4E90                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Match03
</span><span style="color:black">TRANGROUP:4E92 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4E92
TRANGROUP:4E92 </span><span style="color:gray">$P_Bridge</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4E92                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Match_Exit
</span><span style="color:black">TRANGROUP:4E94 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4E94                 </span><span style="color:navy">nop
</span><span style="color:black">TRANGROUP:4E95
TRANGROUP:4E95 </span><span style="color:gray">$P_Match03</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4E95                 </span><span style="color:navy">test    ax, </span><span style="color:green">8000h       </span>; $P_Num_Val
<span style="color:black">TRANGROUP:4E98                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Match04
</span><span style="color:black">TRANGROUP:4E9A                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4EA1                 </span><span style="color:navy">call    </span>$P_Value
<span style="color:black">TRANGROUP:4EA4                 </span><span style="color:navy">cmp     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:4EAA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Match_Exit
</span><span style="color:black">TRANGROUP:4EAC
TRANGROUP:4EAC </span><span style="color:gray">$P_Match04</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4EAC                 </span><span style="color:navy">test    ax, </span><span style="color:green">4000h       </span>; $P_SNum_Val
<span style="color:black">TRANGROUP:4EAF                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Match05
</span><span style="color:black">TRANGROUP:4EB1                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4EB8                 </span><span style="color:navy">call    </span>$P_SValue
<span style="color:black">TRANGROUP:4EBB                 </span><span style="color:navy">cmp     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:4EC1                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Match_Exit
</span><span style="color:black">TRANGROUP:4EC3
TRANGROUP:4EC3 </span><span style="color:gray">$P_Match05</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4EC3                 </span><span style="color:navy">test    ax, </span><span style="color:green">100h        </span>; $P_Drv_Only
<span style="color:black">TRANGROUP:4EC6                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Match06
</span><span style="color:black">TRANGROUP:4EC8                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4ECF                 </span><span style="color:navy">call    </span>$P_File_Format
<span style="color:black">TRANGROUP:4ED2                 </span><span style="color:navy">call    </span>$P_Drive_Format
<span style="color:black">TRANGROUP:4ED5                 </span><span style="color:navy">cmp     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:4EDB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Match_Exit
</span><span style="color:black">TRANGROUP:4EDD
TRANGROUP:4EDD </span><span style="color:gray">$P_Match06</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4EDD                 </span><span style="color:navy">test    ax, </span><span style="color:green">200h        </span>; $P_File_Spc
<span style="color:black">TRANGROUP:4EE0                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Match07
</span><span style="color:black">TRANGROUP:4EE2                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4EE9                 </span><span style="color:navy">call    </span>$P_File_Format
<span style="color:black">TRANGROUP:4EEC                 </span><span style="color:navy">cmp     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:4EF2                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Match_Exit
</span><span style="color:black">TRANGROUP:4EF4
TRANGROUP:4EF4 </span><span style="color:gray">$P_Match07</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4EF4                 </span><span style="color:navy">test    ax, </span><span style="color:green">2000h       </span>; $P_Simple_S
<span style="color:black">TRANGROUP:4EF7                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Match_Exit
</span><span style="color:black">TRANGROUP:4EF9                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; $P_No_Error
<span style="color:black">TRANGROUP:4F00                 </span><span style="color:navy">call    </span>$P_Simple_String
<span style="color:black">TRANGROUP:4F03
TRANGROUP:4F03 </span><span style="color:gray">$P_Match_Exit</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F03                 </span><span style="color:navy">cmp     [cs:</span>$P_err_flag<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; $P_error_filespec
<span style="color:black">TRANGROUP:4F09                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Match2_Exit
</span><span style="color:black">TRANGROUP:4F0B                 </span><span style="color:navy">cmp     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">0   </span>; $P_No_Error
<span style="color:black">TRANGROUP:4F11                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Match2_Exit
</span><span style="color:black">TRANGROUP:4F13                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9   </span>; $P_Syntax
<span style="color:black">TRANGROUP:4F1A
TRANGROUP:4F1A </span><span style="color:gray">$P_Match2_Exit</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F1A                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:4F1B                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4F1B </span>endp            $P_Check_Match_Flags
<span style="color:black">TRANGROUP:4F1B
TRANGROUP:4F1C
TRANGROUP:4F1C </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4F1C
TRANGROUP:4F1C
TRANGROUP:4F1C </span>proc            $P_Remove_Colon near    <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F1C                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:4F1D                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:4F1E
TRANGROUP:4F1E </span><span style="color:gray">$P_RCOL_Loop</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F1E                 </span><span style="color:navy">mov     al, [cs:si]
</span><span style="color:black">TRANGROUP:4F21                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:4F23                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_RCOL_Exit
</span><span style="color:black">TRANGROUP:4F25                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;   </span>; $P_Colon
<span style="color:black">TRANGROUP:4F27                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_RCOL00
</span><span style="color:black">TRANGROUP:4F29                 </span><span style="color:navy">cmp     [byte ptr cs:si+</span><span style="color:#ff8000">1</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; $P_NULL
<span style="color:black">TRANGROUP:4F2E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_RCOL00
</span><span style="color:black">TRANGROUP:4F30                 </span><span style="color:navy">mov     [byte ptr cs:si], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4F34                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_RCOL_Exit
</span><span style="color:black">TRANGROUP:4F36 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4F36
TRANGROUP:4F36 </span><span style="color:gray">$P_RCOL00</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F36                 </span><span style="color:navy">call    </span>$P_Chk_DBCS
<span style="color:black">TRANGROUP:4F39                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$P_RCOL01
</span><span style="color:black">TRANGROUP:4F3B                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:4F3C
TRANGROUP:4F3C </span><span style="color:gray">$P_RCOL01</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F3C                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:4F3D                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_RCOL_Loop
</span><span style="color:black">TRANGROUP:4F3F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4F3F
TRANGROUP:4F3F </span><span style="color:gray">$P_RCOL_Exit</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F3F                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:4F40                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:4F41                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4F41 </span>endp            $P_Remove_Colon
<span style="color:black">TRANGROUP:4F41
TRANGROUP:4F42
TRANGROUP:4F42 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4F42
TRANGROUP:4F42
TRANGROUP:4F42 </span>proc            $P_Do_CAPS_String near  <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F42                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:4F43                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:4F44                 </span><span style="color:navy">mov     dl, al
</span><span style="color:black">TRANGROUP:4F46
TRANGROUP:4F46 </span><span style="color:gray">$P_DCS_Loop</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F46                 </span><span style="color:navy">mov     al, [cs:si]
</span><span style="color:black">TRANGROUP:4F49                 </span><span style="color:navy">call    </span>$P_Chk_DBCS
<span style="color:black">TRANGROUP:4F4C                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_DCS00
</span><span style="color:black">TRANGROUP:4F4E                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:4F50                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_DCS_Exit
</span><span style="color:black">TRANGROUP:4F52                 </span><span style="color:navy">call    </span>$P_Do_CAPS_Char
<span style="color:black">TRANGROUP:4F55                 </span><span style="color:navy">mov     [cs:si], al
</span><span style="color:black">TRANGROUP:4F58                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_DCS01
</span><span style="color:black">TRANGROUP:4F5A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4F5A
TRANGROUP:4F5A </span><span style="color:gray">$P_DCS00</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F5A                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:4F5B
TRANGROUP:4F5B </span><span style="color:gray">$P_DCS01</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F5B                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:4F5C                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_DCS_Loop
</span><span style="color:black">TRANGROUP:4F5E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4F5E
TRANGROUP:4F5E </span><span style="color:gray">$P_DCS_Exit</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F5E                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:4F5F                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:4F60                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4F60 </span>endp            $P_Do_CAPS_String
<span style="color:black">TRANGROUP:4F60
TRANGROUP:4F61
TRANGROUP:4F61 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4F61
TRANGROUP:4F61
TRANGROUP:4F61 </span>proc            $P_Do_CAPS_Char near    <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F61                 </span><span style="color:navy">cmp     al, </span><span style="color:green">80h         </span>; $P_ASCII80
<span style="color:black">TRANGROUP:4F63                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$P_DCC_Go
</span><span style="color:black">TRANGROUP:4F65                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">a&#039;
</span><span style="color:black">TRANGROUP:4F67                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_CAPS_Ret
</span><span style="color:black">TRANGROUP:4F69                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">z&#039;
</span><span style="color:black">TRANGROUP:4F6B                 </span><span style="color:navy">ja      short </span><span style="color:gray">$P_CAPS_Ret
</span><span style="color:black">TRANGROUP:4F6D                 </span><span style="color:navy">and     al, </span><span style="color:green">0DFh        </span>; $P_Make_Upper
<span style="color:black">TRANGROUP:4F6F                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4F70 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:4F70
TRANGROUP:4F70 </span><span style="color:gray">$P_DCC_Go</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F70                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:4F71                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:4F72                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:4F73                 </span><span style="color:navy">lea     di, [</span>$P_File_CAP_Ptr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4F77                 </span><span style="color:navy">cmp     dl, </span><span style="color:#ff8000">4           </span>; $P_DOSTBL_File
<span style="color:black">TRANGROUP:4F7A                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_DCC00
</span><span style="color:black">TRANGROUP:4F7C                 </span><span style="color:navy">lea     di, [</span>$P_Char_CAP_Ptr<span style="color:navy">]
</span><span style="color:black">TRANGROUP:4F80
TRANGROUP:4F80 </span><span style="color:gray">$P_DCC00</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F80                 </span><span style="color:navy">cmp     [cs:di], dl
</span><span style="color:black">TRANGROUP:4F83                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_DCC01
</span><span style="color:black">TRANGROUP:4F85                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:4F86                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:4F87                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:4F88                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:4F89                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:4F8A                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:4F8A                 </span><span style="color:navy">xchg    ax, dx
</span><span style="color:black">TRANGROUP:4F8B                 </span><span style="color:navy">mov     ah, </span><span style="color:green">65h         </span>; $P_DOS_Get_TBL
<span style="color:black">TRANGROUP:4F8D                 </span><span style="color:navy">mov     bx, </span><span style="color:green">0FFFFh      </span>; -1 ; $P_DOSTBL_Def
<span style="color:black">TRANGROUP:4F90                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">5           </span>; $P_DOSTBL_BL
<span style="color:black">TRANGROUP:4F93                 </span><span style="color:navy">mov     dx, bx          </span>; $P_DOSTBL_Def
<span style="color:black">TRANGROUP:4F95                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 4.x internal - COUNTRY-DEPENDENT FILENAME CAPITALIZATION
<span style="color:black">TRANGROUP:4F95                                         </span>; AL = function -
<span style="color:black">TRANGROUP:4F97                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:4F98                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:4F99                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:4F9A
TRANGROUP:4F9A </span><span style="color:gray">$P_DCC01</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4F9A                 </span><span style="color:navy">les     bx, [cs:di+</span><span style="color:#ff8000">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:4F9E                 </span>assume es:nothing
<span style="color:black">TRANGROUP:4F9E                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:4F9F                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:4FA0                 </span><span style="color:navy">sub     al, </span><span style="color:green">80h         </span>; $P_ASCII80
<span style="color:black">TRANGROUP:4FA2                 </span><span style="color:navy">xlat    [byte ptr es:bx]
</span><span style="color:black">TRANGROUP:4FA4                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:4FA5                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:4FA6                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:4FA7
TRANGROUP:4FA7 </span><span style="color:gray">$P_CAPS_Ret</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4FA7                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4FA7 </span>endp            $P_Do_CAPS_Char
<span style="color:black">TRANGROUP:4FA7
TRANGROUP:4FA8
TRANGROUP:4FA8 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4FA8
TRANGROUP:4FA8
TRANGROUP:4FA8 </span>proc            $P_SValue near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4FA8                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:4FA9                 </span><span style="color:navy">or      [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">80h </span>; $P_Signed
<span style="color:black">TRANGROUP:4FAF                 </span><span style="color:navy">and     [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">0FDh </span>; 0FFh-$P_Neg
<span style="color:black">TRANGROUP:4FB5                 </span><span style="color:navy">mov     al, [cs:si]
</span><span style="color:black">TRANGROUP:4FB8                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">+&#039;         </span>; $P_Plus
<span style="color:black">TRANGROUP:4FBA                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_SVal00
</span><span style="color:black">TRANGROUP:4FBC                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">-&#039;         </span>; $P_Plus
<span style="color:black">TRANGROUP:4FBE                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Sval01
</span><span style="color:black">TRANGROUP:4FC0                 </span><span style="color:navy">or      [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">2 </span>; $P_Neg
<span style="color:black">TRANGROUP:4FC6
TRANGROUP:4FC6 </span><span style="color:gray">$P_SVal00</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4FC6                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:4FC7
TRANGROUP:4FC7 </span><span style="color:gray">$P_Sval01</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4FC7                 </span><span style="color:navy">call    </span>$P_Value
<span style="color:black">TRANGROUP:4FCA                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:4FCB                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:4FCB </span>endp            $P_SValue
<span style="color:black">TRANGROUP:4FCB
TRANGROUP:4FCC
TRANGROUP:4FCC </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:4FCC
TRANGROUP:4FCC
TRANGROUP:4FCC </span>proc            $P_Value near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4FCC                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:4FCD                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:4FCE                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:4FCF                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:4FD0                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:4FD2                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:4FD4                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:4FD5
TRANGROUP:4FD5 </span><span style="color:gray">$P_Value_Loop</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:4FD5                 </span><span style="color:navy">mov     al, [cs:si]
</span><span style="color:black">TRANGROUP:4FD8                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:4FDA                 </span><span style="color:navy">jz      short </span>$P_Value00
<span style="color:black">TRANGROUP:4FDC                 </span><span style="color:navy">call    </span>$P_0099
<span style="color:black">TRANGROUP:4FDF                 </span><span style="color:navy">jb      short </span>$P_Value_Err0
<span style="color:black">TRANGROUP:4FE1                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:black">TRANGROUP:4FE3                 </span><span style="color:navy">mov     bp, ax
</span><span style="color:black">TRANGROUP:4FE5                 </span><span style="color:navy">call    </span>$P_Check_OVF_shl32
<span style="color:black">TRANGROUP:4FE8                 </span><span style="color:navy">mov     bx, dx
</span><span style="color:black">TRANGROUP:4FEA                 </span><span style="color:navy">mov     ax, cx
</span><span style="color:black">TRANGROUP:4FEC                 </span><span style="color:navy">call    </span>$P_Check_OVF_shl32
<span style="color:black">TRANGROUP:4FEF                 </span><span style="color:navy">call    </span>$P_Check_OVF_shl32
<span style="color:black">TRANGROUP:4FF2                 </span><span style="color:navy">add     dx, bx
</span><span style="color:black">TRANGROUP:4FF4                 </span><span style="color:navy">adc     cx, ax
</span><span style="color:black">TRANGROUP:4FF6                 </span><span style="color:navy">call    </span>$P_Check_OVF_@
<span style="color:black">TRANGROUP:4FF9                 </span><span style="color:navy">add     dx, bp
</span><span style="color:black">TRANGROUP:4FFB                 </span><span style="color:navy">adc     cx, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:4FFE                 </span><span style="color:navy">call    </span>$P_Check_OVF_@
<span style="color:black">TRANGROUP:5001                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:5002                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Value_Loop
</span><span style="color:black">TRANGROUP:5002 </span>endp            $P_Value
<span style="color:black">TRANGROUP:5002
</span><span style="color:maroon">TRANGROUP:5004 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:5004
TRANGROUP:5004 </span>$P_Check_OVF_shl32<span style="color:navy">:                     </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5004                 </span><span style="color:navy">shl     dx, </span><span style="color:green">1
</span><span style="color:maroon">TRANGROUP:5006                 </span><span style="color:navy">rcl     cx, </span><span style="color:green">1
</span><span style="color:maroon">TRANGROUP:5008
TRANGROUP:5008 </span>$P_Check_OVF_@<span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5008                 </span><span style="color:navy">call    </span>$P_Check_OVF
<span style="color:maroon">TRANGROUP:500B                 </span><span style="color:navy">jb      short </span>$P_Value_Err0_@
<span style="color:maroon">TRANGROUP:500D                 </span><span style="color:navy">retn
</span><span style="color:maroon">TRANGROUP:500E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:500E
TRANGROUP:500E </span>$P_Value_Err0_@<span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:500E                 </span><span style="color:navy">inc     sp
</span><span style="color:maroon">TRANGROUP:500F                 </span><span style="color:navy">inc     sp
</span><span style="color:maroon">TRANGROUP:5010
TRANGROUP:5010 </span>$P_Value_Err0<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5010                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">TRANGROUP:5011                 </span><span style="color:navy">jmp     </span>$P_Value_Err
<span style="color:maroon">TRANGROUP:5014 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:5014
TRANGROUP:5014 </span>$P_Value00<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5014                 </span><span style="color:navy">pop     bx
</span><span style="color:maroon">TRANGROUP:5015                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">2 </span>; $P_Neg
<span style="color:maroon">TRANGROUP:501B                 </span><span style="color:navy">jz      short </span>$P_Value01
<span style="color:maroon">TRANGROUP:501D                 </span><span style="color:navy">not     cx
</span><span style="color:maroon">TRANGROUP:501F                 </span><span style="color:navy">not     dx
</span><span style="color:maroon">TRANGROUP:5021                 </span><span style="color:navy">add     dx, </span><span style="color:#ff8000">1
</span><span style="color:maroon">TRANGROUP:5024                 </span><span style="color:navy">adc     cx, </span><span style="color:#ff8000">0
</span><span style="color:maroon">TRANGROUP:5027
TRANGROUP:5027 </span>$P_Value01<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5027                 </span><span style="color:navy">mov     si, [es:bx+</span><span style="color:#ff8000">6</span><span style="color:navy">]   </span>; [es:bx+$P_CONTROL_BLK.$P_Value_List]
<span style="color:maroon">TRANGROUP:502B                 </span><span style="color:navy">mov     al, [es:si]
</span><span style="color:maroon">TRANGROUP:502E                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0           </span>; $P_nval_None
<span style="color:maroon">TRANGROUP:5030                 </span><span style="color:navy">jnz     short </span>$P_Value02
<span style="color:maroon">TRANGROUP:5032                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FF01h      </span>; ($P_No_Tag&lt;&lt;8)+$P_Number
<span style="color:maroon">TRANGROUP:5035                 </span><span style="color:navy">jmp     short </span>$P_Value_Exit
<span style="color:maroon">TRANGROUP:5037 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:5037                 </span><span style="color:navy">nop
</span><span style="color:maroon">TRANGROUP:5038
TRANGROUP:5038 </span>$P_Value02<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5038                 </span><span style="color:navy">inc     si
</span><span style="color:maroon">TRANGROUP:5039                 </span><span style="color:navy">mov     al, [es:si]
</span><span style="color:maroon">TRANGROUP:503C                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0           </span>; $P_No_nrng
<span style="color:maroon">TRANGROUP:503E                 </span><span style="color:navy">jz      short </span>$P_Value_Err
<span style="color:maroon">TRANGROUP:5040                 </span><span style="color:navy">inc     si
</span><span style="color:maroon">TRANGROUP:5041
TRANGROUP:5041 </span>$P_Val02_Loop<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5041                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">80h </span>; $P_Signed
<span style="color:maroon">TRANGROUP:5047                 </span><span style="color:navy">jnz     short </span>$P_Val02_Sign
<span style="color:maroon">TRANGROUP:5049                 </span><span style="color:navy">cmp     cx, [es:si+</span><span style="color:#ff8000">3</span><span style="color:navy">]   </span>; [es:si+$P_VAL_LIST.$P_Val_XH]
<span style="color:maroon">TRANGROUP:504D                 </span><span style="color:navy">jb      short </span>$P_Val02_Next
<span style="color:maroon">TRANGROUP:504F                 </span><span style="color:navy">ja      short </span>$P_Val_In
<span style="color:maroon">TRANGROUP:5051                 </span><span style="color:navy">cmp     dx, [es:si+</span><span style="color:#ff8000">1</span><span style="color:navy">]   </span>; [es:si+$P_VAL_LIST.$P_Val_XL]
<span style="color:maroon">TRANGROUP:5055                 </span><span style="color:navy">jb      short </span>$P_Val02_Next
<span style="color:maroon">TRANGROUP:5057
TRANGROUP:5057 </span>$P_Val_In<span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5057                 </span><span style="color:navy">cmp     cx, [es:si+</span><span style="color:#ff8000">7</span><span style="color:navy">]   </span>; [es:si+$P_VAL_LIST.$P_Val_YH]
<span style="color:maroon">TRANGROUP:505B                 </span><span style="color:navy">ja      short </span>$P_Val02_Next
<span style="color:maroon">TRANGROUP:505D                 </span><span style="color:navy">jb      short </span>$P_Val_Found
<span style="color:maroon">TRANGROUP:505F                 </span><span style="color:navy">cmp     dx, [es:si+</span><span style="color:#ff8000">5</span><span style="color:navy">]   </span>; [es:si+$P_VAL_LIST.$P_Val_YL]
<span style="color:maroon">TRANGROUP:5063                 </span><span style="color:navy">ja      short </span>$P_Val02_Next
<span style="color:maroon">TRANGROUP:5065                 </span><span style="color:navy">jmp     short </span>$P_Val_Found
<span style="color:maroon">TRANGROUP:5067 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:5067
TRANGROUP:5067 </span>$P_Val02_Sign<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5067                 </span><span style="color:navy">cmp     cx, [es:si+</span><span style="color:#ff8000">3</span><span style="color:navy">]   </span>; [es:si+$P_VAL_LIST.$P_Val_XH]
<span style="color:maroon">TRANGROUP:506B                 </span><span style="color:navy">jl      short </span>$P_Val02_Next
<span style="color:maroon">TRANGROUP:506D                 </span><span style="color:navy">jg      short </span>$P_SVal_In
<span style="color:maroon">TRANGROUP:506F                 </span><span style="color:navy">cmp     dx, [es:si+</span><span style="color:#ff8000">1</span><span style="color:navy">]   </span>; [es:si+$P_VAL_LIST.$P_Val_XL]
<span style="color:maroon">TRANGROUP:5073                 </span><span style="color:navy">jl      short </span>$P_Val02_Next
<span style="color:maroon">TRANGROUP:5075
TRANGROUP:5075 </span>$P_SVal_In<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5075                 </span><span style="color:navy">cmp     cx, [es:si+</span><span style="color:#ff8000">7</span><span style="color:navy">]   </span>; [es:si+$P_VAL_LIST.$P_Val_YH]
<span style="color:maroon">TRANGROUP:5079                 </span><span style="color:navy">jg      short </span>$P_Val02_Next
<span style="color:maroon">TRANGROUP:507B                 </span><span style="color:navy">jl      short </span>$P_Val_Found
<span style="color:maroon">TRANGROUP:507D                 </span><span style="color:navy">cmp     dx, [es:si+</span><span style="color:#ff8000">5</span><span style="color:navy">]   </span>; [es:si+$P_VAL_LIST.$P_Val_YL]
<span style="color:maroon">TRANGROUP:5081                 </span><span style="color:navy">jg      short </span>$P_Val02_Next
<span style="color:maroon">TRANGROUP:5083                 </span><span style="color:navy">jmp     short </span>$P_Val_Found
<span style="color:maroon">TRANGROUP:5085 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:5085
TRANGROUP:5085 </span>$P_Val02_Next<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5085                 </span><span style="color:navy">add     si, </span><span style="color:#ff8000">9           </span>; $P_Len_Range
<span style="color:maroon">TRANGROUP:5088                 </span><span style="color:navy">dec     al
</span><span style="color:maroon">TRANGROUP:508A                 </span><span style="color:navy">jnz     short </span>$P_Val02_Loop
<span style="color:maroon">TRANGROUP:508C                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">6   </span>; $P_Out_Of_Range
<span style="color:maroon">TRANGROUP:5093                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FF01h      </span>; ($P_No_Tag&lt;&lt;8)+$P_Number
<span style="color:maroon">TRANGROUP:5096                 </span><span style="color:navy">jmp     short </span>$P_Value_Exit
<span style="color:maroon">TRANGROUP:5098 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:5098
TRANGROUP:5098 </span>$P_Val_Found<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5098                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">1           </span>; $P_Number
<span style="color:maroon">TRANGROUP:509A                 </span><span style="color:navy">mov     ah, [es:si]
</span><span style="color:maroon">TRANGROUP:509D                 </span><span style="color:navy">jmp     short </span>$P_Value_Exit
<span style="color:maroon">TRANGROUP:509F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:509F
TRANGROUP:509F </span>$P_Value_Err<span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:509F                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9   </span>; $P_Syntax
<span style="color:maroon">TRANGROUP:50A6                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FF03h      </span>; ($P_No_Tag&lt;&lt;8)+$P_String
<span style="color:maroon">TRANGROUP:50A9
TRANGROUP:50A9 </span>$P_Value_Exit<span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:50A9                 </span><span style="color:navy">call    </span>$P_Fill_Result
<span style="color:maroon">TRANGROUP:50AC                 </span><span style="color:navy">pop     si
</span><span style="color:maroon">TRANGROUP:50AD                 </span><span style="color:navy">pop     dx
</span><span style="color:maroon">TRANGROUP:50AE                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">TRANGROUP:50AF                 </span><span style="color:navy">pop     ax
</span><span style="color:maroon">TRANGROUP:50B0                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:50B1
TRANGROUP:50B1 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:50B1
TRANGROUP:50B1
TRANGROUP:50B1 </span>proc            $P_Check_OVF near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:50B1                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:50B2                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">2 </span>; $P_Neg ; is it negative value ?
<span style="color:black">TRANGROUP:50B8                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_COVF   </span>; if no, check overflow
<span style="color:black">TRANGROUP:50BA                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:50BB                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:50BC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:50BC
TRANGROUP:50BC </span><span style="color:gray">$P_COVF</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:50BC                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:50BD                 </span><span style="color:navy">jo      short </span><span style="color:gray">$P_COVF00 ; CY=1 means overflow
</span><span style="color:black">TRANGROUP:50BF                 </span><span style="color:navy">clc                     </span>; CY=0 means no overflow
<span style="color:black">TRANGROUP:50C0                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:50C1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:50C1
TRANGROUP:50C1 </span><span style="color:gray">$P_COVF00</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:50C1                 </span><span style="color:navy">stc                     </span>; CY=1 means overflow
<span style="color:black">TRANGROUP:50C2                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:50C2 </span>endp            $P_Check_OVF
<span style="color:black">TRANGROUP:50C2
TRANGROUP:50C3
TRANGROUP:50C3 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:50C3
TRANGROUP:50C3
TRANGROUP:50C3 </span>proc            $P_0099 near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:50C3                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">30h </span><span style="color:gray">; &#039;0&#039;   </span>; Make ASCII 0-9 to Binary 0-9
<span style="color:black">TRANGROUP:50C5                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_0099Err
</span><span style="color:black">TRANGROUP:50C7                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">39h </span><span style="color:gray">; &#039;9&#039;
</span><span style="color:black">TRANGROUP:50C9                 </span><span style="color:navy">ja      short </span><span style="color:gray">$P_0099Err
</span><span style="color:black">TRANGROUP:50CB                 </span><span style="color:navy">sub     al, </span><span style="color:#ff8000">30h </span><span style="color:gray">; &#039;0&#039;
</span><span style="color:black">TRANGROUP:50CD                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:50CE                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:50CF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:50CF
TRANGROUP:50CF </span><span style="color:gray">$P_0099Err</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:50CF                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:50D0                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:50D0 </span>endp            $P_0099
<span style="color:black">TRANGROUP:50D0
TRANGROUP:50D1
TRANGROUP:50D1 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:50D1
TRANGROUP:50D1
TRANGROUP:50D1 </span>proc            $P_Simple_String near   <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:50D1                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:50D2                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:50D3                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:50D4                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:50D5                 </span><span style="color:navy">mov     di, [es:bx+</span><span style="color:#ff8000">6</span><span style="color:navy">]   </span>; [es:bx+$P_CONTROL_BLK.$P_Value_List]
<span style="color:black">TRANGROUP:50D9                 </span><span style="color:navy">mov     al, [es:di]     </span>; get nval
<span style="color:black">TRANGROUP:50DC                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:50DE                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Sim00
</span><span style="color:black">TRANGROUP:50E0                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0FFh        </span>; $P_No_Tag
<span style="color:black">TRANGROUP:50E2                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Sim_Exit
</span><span style="color:black">TRANGROUP:50E4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:50E4
TRANGROUP:50E4 </span><span style="color:gray">$P_Sim00</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:50E4                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3           </span>; $P_nval_String
<span style="color:black">TRANGROUP:50E6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Sim01
</span><span style="color:black">TRANGROUP:50E8                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:50E9                 </span><span style="color:navy">mov     al, [es:di]
</span><span style="color:black">TRANGROUP:50EC                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">9           </span>; $P_Len_Range
<span style="color:black">TRANGROUP:50EE                 </span><span style="color:navy">mul     ah              </span>; Skip nrng field
<span style="color:black">TRANGROUP:50F0                 </span><span style="color:navy">inc     ax              </span>; ax = (nrng*9)+1
<span style="color:black">TRANGROUP:50F1                 </span><span style="color:navy">add     di, ax
</span><span style="color:black">TRANGROUP:50F3                 </span><span style="color:navy">mov     al, [es:di]     </span>; get nnval
<span style="color:black">TRANGROUP:50F6                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">5           </span>; $P_Len_Value
<span style="color:black">TRANGROUP:50F8                 </span><span style="color:navy">mul     ah              </span>; Skip nnval field
<span style="color:black">TRANGROUP:50FA                 </span><span style="color:navy">inc     ax              </span>; ax = (nnval*5)+1
<span style="color:black">TRANGROUP:50FB                 </span><span style="color:navy">add     di, ax
</span><span style="color:black">TRANGROUP:50FD                 </span><span style="color:navy">mov     al, [es:di]     </span>; get nstrval
<span style="color:black">TRANGROUP:5100                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:5101                 </span><span style="color:navy">inc     di              </span>; di points to 1st string in list
<span style="color:black">TRANGROUP:5102
TRANGROUP:5102 </span><span style="color:gray">$P_Sim_Loop</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5102                 </span><span style="color:navy">mov     bp, [es:di]
</span><span style="color:black">TRANGROUP:5105                 </span><span style="color:navy">call    </span>$P_String_Comp
<span style="color:black">TRANGROUP:5108                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$P_Sim_Found
</span><span style="color:black">TRANGROUP:510A                 </span><span style="color:navy">add     di, </span><span style="color:#ff8000">3           </span>; $P_Len_String
<span style="color:black">TRANGROUP:510D                 </span><span style="color:navy">dec     al              </span>; loop nstval times in AL
<span style="color:black">TRANGROUP:510F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Sim_Loop
</span><span style="color:black">TRANGROUP:5111                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">8   </span>; $P_Not_In_Str
<span style="color:black">TRANGROUP:5118                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0FFh        </span>; $P_No_Tag
<span style="color:black">TRANGROUP:511A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Sim_Exit
</span><span style="color:black">TRANGROUP:511C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:511C
TRANGROUP:511C </span><span style="color:gray">$P_Sim_Found</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:511C                 </span><span style="color:navy">mov     ah, [es:di-</span><span style="color:green">1</span><span style="color:navy">]   </span>; set item_tag
<span style="color:black">TRANGROUP:5120                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">2           </span>; $P_List_Idx
<span style="color:black">TRANGROUP:5122                 </span><span style="color:navy">mov     dx, [es:di]
</span><span style="color:black">TRANGROUP:5125                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Sim_Exit0
</span><span style="color:black">TRANGROUP:5127 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5127
TRANGROUP:5127 </span><span style="color:gray">$P_Sim01</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5127                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9   </span>; $P_Syntax
<span style="color:black">TRANGROUP:512E                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0FFh        </span>; $P_No_Tag
<span style="color:black">TRANGROUP:5130
TRANGROUP:5130 </span><span style="color:gray">$P_Sim_Exit</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5130                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">3           </span>; $P_String
<span style="color:black">TRANGROUP:5132
TRANGROUP:5132 </span><span style="color:gray">$P_Sim_Exit0</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5132                 </span><span style="color:navy">call    </span>$P_Fill_Result
<span style="color:black">TRANGROUP:5135                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:5136                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:5137                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:5138                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:5139                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5139 </span>endp            $P_Simple_String
<span style="color:black">TRANGROUP:5139
TRANGROUP:513A
TRANGROUP:513A </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:513A
TRANGROUP:513A
TRANGROUP:513A </span>proc            $P_String_Comp near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:513A                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:513B                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:513C                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:513D                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:513E                 </span><span style="color:navy">mov     dl, </span><span style="color:#ff8000">2           </span>; $P_DOSTBL_Char
<span style="color:black">TRANGROUP:5140
TRANGROUP:5140 </span><span style="color:gray">$P_SCOM_Loop</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5140                 </span><span style="color:navy">mov     al, [cs:si]
</span><span style="color:black">TRANGROUP:5143                 </span><span style="color:navy">call    </span>$P_Chk_DBCS
<span style="color:black">TRANGROUP:5146                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_SCOM00
</span><span style="color:black">TRANGROUP:5148                 </span><span style="color:navy">call    </span>$P_Do_CAPS_Char
<span style="color:black">TRANGROUP:514B                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">8
</span><span style="color:black">TRANGROUP:5151                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_SCOM04
</span><span style="color:black">TRANGROUP:5153                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Dh </span><span style="color:gray">; &#039;=&#039;   </span>; $P_Keyword
<span style="color:black">TRANGROUP:5155                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_SCOM03
</span><span style="color:black">TRANGROUP:5157                 </span><span style="color:navy">cmp     [byte ptr es:bp+</span><span style="color:#ff8000">1</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; $P_NULL
<span style="color:black">TRANGROUP:515C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_SCOM_Differ
</span><span style="color:black">TRANGROUP:515E                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_SCOM05
</span><span style="color:black">TRANGROUP:5160 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5160
TRANGROUP:5160 </span><span style="color:gray">$P_SCOM04</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5160                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">10h </span>; $P_SW_Cmp
<span style="color:black">TRANGROUP:5166                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_SCOM03
</span><span style="color:black">TRANGROUP:5168                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;
</span><span style="color:black">TRANGROUP:516A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_SCOM03
</span><span style="color:black">TRANGROUP:516C                 </span><span style="color:navy">cmp     [byte ptr es:bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:5171                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_SCOM_Differ
</span><span style="color:black">TRANGROUP:5173
TRANGROUP:5173 </span><span style="color:gray">$P_SCOM05</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5173                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:5174                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_SCOM_Same
</span><span style="color:black">TRANGROUP:5176 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5176
TRANGROUP:5176 </span><span style="color:gray">$P_SCOM03</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5176                 </span><span style="color:navy">cmp     al, [es:bp+</span><span style="color:#ff8000">0</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:517A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_SCOM_Differ0
</span><span style="color:black">TRANGROUP:517C                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:517E                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_SCOM_Same
</span><span style="color:black">TRANGROUP:5180                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:5181                 </span><span style="color:navy">inc     bp
</span><span style="color:black">TRANGROUP:5182                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_SCOM01
</span><span style="color:black">TRANGROUP:5184 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5184
TRANGROUP:5184 </span><span style="color:gray">$P_SCOM00</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5184                 </span><span style="color:navy">cmp     al, [es:bp+</span><span style="color:#ff8000">0</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:5188                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_SCOM_Differ
</span><span style="color:black">TRANGROUP:518A                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:518B                 </span><span style="color:navy">mov     al, [cs:si]
</span><span style="color:black">TRANGROUP:518E                 </span><span style="color:navy">inc     bp
</span><span style="color:black">TRANGROUP:518F                 </span><span style="color:navy">cmp     al, [es:bp+</span><span style="color:#ff8000">0</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:5193                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_SCOM_Differ
</span><span style="color:black">TRANGROUP:5195                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:5196                 </span><span style="color:navy">inc     bp
</span><span style="color:black">TRANGROUP:5197
TRANGROUP:5197 </span><span style="color:gray">$P_SCOM01</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5197                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_SCOM_Loop
</span><span style="color:black">TRANGROUP:5199 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5199
TRANGROUP:5199 </span><span style="color:gray">$P_SCOM_Differ0</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5199                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">40h </span>; $P_SW
<span style="color:black">TRANGROUP:519F                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_not_applicable
</span><span style="color:black">TRANGROUP:51A1                 </span><span style="color:navy">test    [word ptr es:bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:green">20h </span>; [es:bx+$P_CONTROL_BLK.$P_Function_Flag],
<span style="color:black">TRANGROUP:51A1                                         </span>; $P_colon_is_not_necessary
<span style="color:black">TRANGROUP:51A7                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_not_applicable
</span><span style="color:black">TRANGROUP:51A9                 </span><span style="color:navy">cmp     [byte ptr es:bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; $P_NULL
<span style="color:black">TRANGROUP:51AE                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_SCOM_Same
</span><span style="color:black">TRANGROUP:51B0
TRANGROUP:51B0 </span><span style="color:gray">$P_not_applicable</span><span style="color:navy">:                      </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:51B0                 </span><span style="color:navy">test    [word ptr es:bx], </span><span style="color:green">10h </span>; [es:bx+$P_CONTROL_BLK.$P_Match_Flag],
<span style="color:black">TRANGROUP:51B0                                         </span>; $P_Ig_Colon
<span style="color:black">TRANGROUP:51B5                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_SCOM_Differ
</span><span style="color:black">TRANGROUP:51B7                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039;   </span>; $P_Colon
<span style="color:black">TRANGROUP:51B9                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_SCOM02
</span><span style="color:black">TRANGROUP:51BB                 </span><span style="color:navy">cmp     [byte ptr es:bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; $P_NULL
<span style="color:black">TRANGROUP:51C0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_SCOM_Differ
</span><span style="color:black">TRANGROUP:51C2                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_SCOM_Same
</span><span style="color:black">TRANGROUP:51C4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:51C4
TRANGROUP:51C4 </span><span style="color:gray">$P_SCOM02</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:51C4                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0           </span>; $P_NULL
<span style="color:black">TRANGROUP:51C6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_SCOM_Differ
</span><span style="color:black">TRANGROUP:51C8                 </span><span style="color:navy">cmp     [byte ptr es:bp+</span><span style="color:#ff8000">0</span><span style="color:navy">], </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039; </span>; $P_Colon
<span style="color:black">TRANGROUP:51CD                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_SCOM_Same
</span><span style="color:black">TRANGROUP:51CF
TRANGROUP:51CF </span><span style="color:gray">$P_SCOM_Differ</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:51CF                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:51D0                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_SCOM_Exit
</span><span style="color:black">TRANGROUP:51D2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:51D2
TRANGROUP:51D2 </span><span style="color:gray">$P_SCOM_Same</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:51D2                 </span><span style="color:navy">mov     [cs:</span>$P_KEYorSW_Ptr<span style="color:navy">], si
</span><span style="color:black">TRANGROUP:51D7                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:51D8
TRANGROUP:51D8 </span><span style="color:gray">$P_SCOM_Exit</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:51D8                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:51D9                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:51DA                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:51DB                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:51DC                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:51DC </span>endp            $P_String_Comp
<span style="color:black">TRANGROUP:51DC
TRANGROUP:51DD
TRANGROUP:51DD </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:51DD
TRANGROUP:51DD
TRANGROUP:51DD </span>proc            $P_Date_Format near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:51DD                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:51DE                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:51DF                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:51E0                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:51E1                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:51E2                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:51E3                 </span><span style="color:navy">call    </span>$P_Set_CDI      ; set country dependent information before process
<span style="color:black">TRANGROUP:51E6                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:51E7                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:51EA                 </span><span style="color:navy">mov     [cs:</span>$P_1st_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:51EE                 </span><span style="color:navy">mov     [cs:</span>$P_2nd_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:51F2                 </span><span style="color:navy">mov     [cs:</span>$P_3rd_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:51F6                 </span><span style="color:navy">call    </span>$P_Get_DecNum
<span style="color:black">TRANGROUP:51F9                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_DateF_Err0
</span><span style="color:black">TRANGROUP:51FB                 </span><span style="color:navy">mov     [cs:</span>$P_1st_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:51FF                 </span><span style="color:navy">or      bl, bl          </span>; end of line ?
<span style="color:black">TRANGROUP:5201                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_DateF_YMD </span>; yes
<span style="color:black">TRANGROUP:5203                 </span><span style="color:navy">call    </span>$P_Get_DecNum
<span style="color:black">TRANGROUP:5206                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_DateF_Error
</span><span style="color:black">TRANGROUP:5208                 </span><span style="color:navy">mov     [cs:</span>$P_2nd_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:520C                 </span><span style="color:navy">or      bl, bl
</span><span style="color:black">TRANGROUP:520E                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_DateF_YMD
</span><span style="color:black">TRANGROUP:5210                 </span><span style="color:navy">call    </span>$P_Get_DecNum
<span style="color:black">TRANGROUP:5213
TRANGROUP:5213 </span><span style="color:gray">$P_DateF_Err0</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5213                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_DateF_Error
</span><span style="color:black">TRANGROUP:5215                 </span><span style="color:navy">mov     [cs:</span>$P_3rd_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:5219                 </span><span style="color:navy">or      bl, bl          </span>; end of line ?
<span style="color:black">TRANGROUP:521B                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_DateF_Error </span>; no, error
<span style="color:black">TRANGROUP:521D
TRANGROUP:521D </span><span style="color:gray">$P_DateF_YMD</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:521D                 </span><span style="color:navy">mov     bx, [cs:</span>$P_Country_Info<span style="color:navy">] </span>; [cs:$P_Country_Info+$P_CDI.$P_CDI_DateF]
<span style="color:black">TRANGROUP:5222                 </span><span style="color:navy">cmp     bx, </span><span style="color:#ff8000">2           </span>; $P_Date_YMD
<span style="color:black">TRANGROUP:5225                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_DateF00
</span><span style="color:black">TRANGROUP:5227                 </span><span style="color:navy">mov     ax, [cs:</span>$P_1st_Val<span style="color:navy">]
</span><span style="color:black">TRANGROUP:522B                 </span><span style="color:navy">or      ah, ah
</span><span style="color:black">TRANGROUP:522D                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_DateF_Error
</span><span style="color:black">TRANGROUP:522F                 </span><span style="color:navy">mov     cl, al
</span><span style="color:black">TRANGROUP:5231                 </span><span style="color:navy">mov     ax, [cs:</span>$P_2nd_Val<span style="color:navy">]
</span><span style="color:black">TRANGROUP:5235                 </span><span style="color:navy">or      ah, ah
</span><span style="color:black">TRANGROUP:5237                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_DateF_Error
</span><span style="color:black">TRANGROUP:5239                 </span><span style="color:navy">mov     ch, al
</span><span style="color:black">TRANGROUP:523B                 </span><span style="color:navy">mov     dx, [cs:</span>$P_3rd_Val<span style="color:navy">]
</span><span style="color:black">TRANGROUP:5240                 </span><span style="color:navy">cmp     bx, </span><span style="color:#ff8000">1           </span>; $P_Date_DMY
<span style="color:black">TRANGROUP:5243                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_DateF01
</span><span style="color:black">TRANGROUP:5245                 </span><span style="color:navy">xchg    ch, cl
</span><span style="color:black">TRANGROUP:5247
TRANGROUP:5247 </span><span style="color:gray">$P_DateF01</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5247                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_DateF02
</span><span style="color:black">TRANGROUP:5249 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5249
TRANGROUP:5249 </span><span style="color:gray">$P_DateF00</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5249                 </span><span style="color:navy">mov     dx, [cs:</span>$P_1st_Val<span style="color:navy">] </span>; set year
<span style="color:black">TRANGROUP:524E                 </span><span style="color:navy">mov     ax, [cs:</span>$P_2nd_Val<span style="color:navy">]
</span><span style="color:black">TRANGROUP:5252                 </span><span style="color:navy">or      ah, ah          </span>; if overflow, error
<span style="color:black">TRANGROUP:5254                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_DateF_Error
</span><span style="color:black">TRANGROUP:5256                 </span><span style="color:navy">mov     cl, al          </span>; set month
<span style="color:black">TRANGROUP:5258                 </span><span style="color:navy">mov     ax, [cs:</span>$P_3rd_Val<span style="color:navy">]
</span><span style="color:black">TRANGROUP:525C                 </span><span style="color:navy">or      ah, ah          </span>; if overflow, error
<span style="color:black">TRANGROUP:525E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_DateF_Error
</span><span style="color:black">TRANGROUP:5260                 </span><span style="color:navy">mov     ch, al          </span>; set date
<span style="color:black">TRANGROUP:5262
TRANGROUP:5262 </span><span style="color:gray">$P_DateF02</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5262                 </span><span style="color:navy">cmp     dx, </span><span style="color:green">100
</span><span style="color:black">TRANGROUP:5265                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$P_DateF03
</span><span style="color:black">TRANGROUP:5267                 </span><span style="color:navy">cmp     dx, </span><span style="color:green">80
</span><span style="color:black">TRANGROUP:526A                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$P_DateF02_@
</span><span style="color:black">TRANGROUP:526C                 </span><span style="color:navy">add     dx, </span><span style="color:green">100
</span><span style="color:black">TRANGROUP:526F
TRANGROUP:526F </span><span style="color:gray">$P_DateF02_@</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:526F                 </span><span style="color:navy">add     dx, </span><span style="color:green">1900
</span><span style="color:black">TRANGROUP:5273
TRANGROUP:5273 </span><span style="color:gray">$P_DateF03</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5273                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:5274                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:5275                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FF07h      </span>; ($P_No_Tag&lt;&lt;8)+$P_Date_F
<span style="color:black">TRANGROUP:5278                 </span><span style="color:navy">call    </span>$P_Fill_Result
<span style="color:black">TRANGROUP:527B                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Date_Format_Exit
</span><span style="color:black">TRANGROUP:527D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:527D
TRANGROUP:527D </span><span style="color:gray">$P_DateF_Error</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:527D                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:527E                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:527F                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FF03h      </span>; ($P_No_Tag&lt;&lt;8)+$P_String
<span style="color:black">TRANGROUP:5282                 </span><span style="color:navy">call    </span>$P_Fill_Result
<span style="color:black">TRANGROUP:5285                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9   </span>; $P_Syntax ; indicate syntax error
<span style="color:black">TRANGROUP:528C
TRANGROUP:528C </span><span style="color:gray">$P_Date_Format_Exit</span><span style="color:navy">:                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:528C                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:528D                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:528E                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:528F                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:528F </span>endp            $P_Date_Format
<span style="color:black">TRANGROUP:528F
TRANGROUP:5290
TRANGROUP:5290 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5290
TRANGROUP:5290
TRANGROUP:5290 </span>proc            $P_Set_CDI near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5290                 </span><span style="color:navy">lea     si, [</span>$P_Country_Info<span style="color:navy">]
</span><span style="color:black">TRANGROUP:5294                 </span><span style="color:navy">cmp     [word ptr cs:si], </span><span style="color:green">0FFFFh </span>; -1 ; $P_NeedToBeRead
<span style="color:black">TRANGROUP:5298                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Set_CDI_Exit
</span><span style="color:black">TRANGROUP:529A                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:529B                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:529C                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:529D                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:529E                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:529F                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:529F                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3800h       </span>; $P_DOS_Get_CDI
<span style="color:black">TRANGROUP:52A2                 </span><span style="color:navy">mov     dx, si
</span><span style="color:black">TRANGROUP:52A4                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET COUNTRY-DEPENDENT INFORMATION
<span style="color:black">TRANGROUP:52A4                                         </span>; get current-country info
<span style="color:black">TRANGROUP:52A4                                         </span>; DS:DX -&gt; buffer for returned info
<span style="color:black">TRANGROUP:52A6                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:52A7                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:52A8                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:52A9                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:52A9
TRANGROUP:52A9 </span><span style="color:gray">$P_Set_CDI_Exit</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:52A9                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:52A9 </span>endp            $P_Set_CDI
<span style="color:black">TRANGROUP:52A9
TRANGROUP:52AA
TRANGROUP:52AA </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:52AA
TRANGROUP:52AA
TRANGROUP:52AA </span>proc            $P_Get_DecNum near      <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:52AA                 </span><span style="color:navy">push    cx              </span>; Read a character code from psdata_seg:SI
<span style="color:black">TRANGROUP:52AA                                         </span>; until specified delimiter or NULL encountered.
<span style="color:black">TRANGROUP:52AA                                         </span>; And make a decimal number.
<span style="color:black">TRANGROUP:52AB                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:52AC                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:52AE
TRANGROUP:52AE </span><span style="color:gray">$P_GetNum_Loop</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:52AE                 </span><span style="color:navy">mov     al, [cs:si]
</span><span style="color:black">TRANGROUP:52B1                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:52B3                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_GetNum00
</span><span style="color:black">TRANGROUP:52B5                 </span><span style="color:navy">cmp     [cs:</span>$P_Got_Time<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:52BB                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Do_Date_Delims
</span><span style="color:black">TRANGROUP:52BD                 </span><span style="color:navy">cmp     bl, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:52C0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Do_Time_Delim1
</span><span style="color:black">TRANGROUP:52C2                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">:&#039;         </span>; $P_Colon
<span style="color:black">TRANGROUP:52C4                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_GetNum01
</span><span style="color:black">TRANGROUP:52C6
TRANGROUP:52C6 </span><span style="color:gray">$P_Do_Time_Delim1</span><span style="color:navy">:                      </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:52C6                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">.&#039;         </span>; $P_Period
<span style="color:black">TRANGROUP:52C8                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_GetNum01
</span><span style="color:black">TRANGROUP:52CA                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Neither_Delims
</span><span style="color:black">TRANGROUP:52CC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:52CC
TRANGROUP:52CC </span><span style="color:gray">$P_Do_Date_Delims</span><span style="color:navy">:                      </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:52CC                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">-&#039;         </span>; $P_Minus
<span style="color:black">TRANGROUP:52CE                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_GetNum01
</span><span style="color:black">TRANGROUP:52D0                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">/&#039;         </span>; $P_Slash
<span style="color:black">TRANGROUP:52D2                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_GetNum01
</span><span style="color:black">TRANGROUP:52D4                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">.&#039;         </span>; $P_Period
<span style="color:black">TRANGROUP:52D6                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_GetNum01
</span><span style="color:black">TRANGROUP:52D8
TRANGROUP:52D8 </span><span style="color:gray">$P_Neither_Delims</span><span style="color:navy">:                      </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:52D8                 </span><span style="color:navy">call    </span>$P_0099
<span style="color:black">TRANGROUP:52DB                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_GetNum_Exit
</span><span style="color:black">TRANGROUP:52DD                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:52DF                 </span><span style="color:navy">xchg    ax, cx
</span><span style="color:black">TRANGROUP:52E0                 </span><span style="color:navy">mov     dx, </span><span style="color:green">10
</span><span style="color:black">TRANGROUP:52E3                 </span><span style="color:navy">mul     dx              </span>; ax = ax * 10
<span style="color:black">TRANGROUP:52E5                 </span><span style="color:navy">or      dx, dx
</span><span style="color:black">TRANGROUP:52E7                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_GetNum02
</span><span style="color:black">TRANGROUP:52E9                 </span><span style="color:navy">add     ax, cx
</span><span style="color:black">TRANGROUP:52EB                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_GetNum_Exit
</span><span style="color:black">TRANGROUP:52ED                 </span><span style="color:navy">xchg    ax, cx
</span><span style="color:black">TRANGROUP:52EE                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:52EF                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_GetNum_Loop
</span><span style="color:black">TRANGROUP:52F1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:52F1
TRANGROUP:52F1 </span><span style="color:gray">$P_GetNum00</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:52F1                 </span><span style="color:navy">mov     bl, al
</span><span style="color:black">TRANGROUP:52F3
TRANGROUP:52F3 </span><span style="color:gray">$P_GetNum_Exit_clc</span><span style="color:navy">:                     </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:52F3                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:52F4                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_GetNum_Exit
</span><span style="color:black">TRANGROUP:52F6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:52F6
TRANGROUP:52F6 </span><span style="color:gray">$P_GetNum01</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:52F6                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:52F7                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_GetNum_Exit_clc
</span><span style="color:black">TRANGROUP:52F9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:52F9
TRANGROUP:52F9 </span><span style="color:gray">$P_GetNum02</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:52F9                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:52FA
TRANGROUP:52FA </span><span style="color:gray">$P_GetNum_Exit</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:52FA                 </span><span style="color:navy">xchg    ax, cx
</span><span style="color:black">TRANGROUP:52FB                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:52FC                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:52FD                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:52FD </span>endp            $P_Get_DecNum
<span style="color:black">TRANGROUP:52FD
TRANGROUP:52FE
TRANGROUP:52FE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:52FE
TRANGROUP:52FE
TRANGROUP:52FE </span>proc            $P_Time_Format near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:52FE                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:52FF                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:5300                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:5301                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:5302                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:5303                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:5304                 </span><span style="color:navy">call    </span>$P_Set_CDI
<span style="color:black">TRANGROUP:5307                 </span><span style="color:navy">test    [byte ptr cs:si+</span><span style="color:#ff8000">11h</span><span style="color:navy">], </span><span style="color:green">1 </span>; [cs:si+$P_CDI.$P_CDI_TimeF],1 ; 24 hour system ?
<span style="color:black">TRANGROUP:530C                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:530D                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_TimeF00 </span>; yes
<span style="color:black">TRANGROUP:530F                 </span><span style="color:navy">call    </span>$P_Time_2412    ; this routine handle &quot;am&quot; &quot;pm&quot;
<span style="color:black">TRANGROUP:5312
TRANGROUP:5312 </span><span style="color:gray">$P_TimeF00</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5312                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:5314                 </span><span style="color:navy">mov     [cs:</span>$P_1st_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:5318                 </span><span style="color:navy">mov     [cs:</span>$P_2nd_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:531C                 </span><span style="color:navy">mov     [cs:</span>$P_3rd_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:5320                 </span><span style="color:navy">mov     [cs:</span>$P_4th_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:5324                 </span><span style="color:navy">mov     [cs:</span>$P_Got_Time<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:532A                 </span><span style="color:navy">mov     bl, </span><span style="color:#ff8000">1           </span>; $P_colon_period ; flag, indicates use of delimiters
<span style="color:black">TRANGROUP:532A                                         </span>; between hours, minutes,seconds
<span style="color:black">TRANGROUP:532C                 </span><span style="color:navy">call    </span>$P_Get_DecNum
<span style="color:black">TRANGROUP:532F                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_TimeF_Err0
</span><span style="color:black">TRANGROUP:5331                 </span><span style="color:navy">mov     [cs:</span>$P_1st_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:5335                 </span><span style="color:navy">or      bl, bl
</span><span style="color:black">TRANGROUP:5337                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_TimeF_Rlt
</span><span style="color:black">TRANGROUP:5339                 </span><span style="color:navy">call    </span>$P_Get_DecNum
<span style="color:black">TRANGROUP:533C                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_TimeF_Err0
</span><span style="color:black">TRANGROUP:533E                 </span><span style="color:navy">mov     [cs:</span>$P_2nd_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:5342                 </span><span style="color:navy">or      bl, bl          </span>; end of line ?
<span style="color:black">TRANGROUP:5344                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_TimeF_Rlt </span>; yes
<span style="color:black">TRANGROUP:5346                 </span><span style="color:navy">mov     bl, </span><span style="color:#ff8000">2           </span>; $P_period_only ; flag, which to decimal separator
<span style="color:black">TRANGROUP:5348                 </span><span style="color:navy">call    </span>$P_Get_DecNum
<span style="color:black">TRANGROUP:534B                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_TimeF_Err0
</span><span style="color:black">TRANGROUP:534D                 </span><span style="color:navy">mov     [cs:</span>$P_3rd_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:5351                 </span><span style="color:navy">or      bl, bl          </span>; end of line ?
<span style="color:black">TRANGROUP:5353                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Time_4 </span>; no
<span style="color:black">TRANGROUP:5355                 </span><span style="color:navy">test    [cs:</span>$P_Flags<span style="color:navy">], </span><span style="color:green">2 </span>; $P_Time_Again ; has time parse been repeated?
<span style="color:black">TRANGROUP:535B                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_TimeF_Rlt </span>; yes, this is really the end of line
<span style="color:black">TRANGROUP:535D                 </span><span style="color:navy">mov     si, [cs:</span>$P_SI_Save<span style="color:navy">] </span>; get where parser quit in command line
<span style="color:black">TRANGROUP:5362                 </span><span style="color:navy">cmp     [byte ptr si-</span><span style="color:green">1</span><span style="color:navy">], &#039;</span><span style="color:green">,&#039; </span>; $P_Comma
<span style="color:black">TRANGROUP:5366                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_TimeF_Rlt
</span><span style="color:black">TRANGROUP:5368                 </span><span style="color:navy">mov     [byte ptr si-</span><span style="color:green">1</span><span style="color:navy">], &#039;</span><span style="color:green">.&#039; </span>; $P_Period
<span style="color:black">TRANGROUP:536C                 </span><span style="color:navy">mov     [word ptr cs:</span>$P_Flags<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; clear all internal flags
<span style="color:black">TRANGROUP:5373                 </span><span style="color:navy">or      [cs:</span>$P_Flags<span style="color:navy">], </span><span style="color:green">2 </span>; $P_Time_Again ; indicate TIME
<span style="color:black">TRANGROUP:5379                 </span><span style="color:navy">mov     cx, [cs:</span>$P_ORIG_ORD<span style="color:navy">] </span>; original ordinal from cx
<span style="color:black">TRANGROUP:537E                 </span><span style="color:navy">mov     sp, [cs:</span>$P_ORIG_STACK<span style="color:navy">] </span>; original value of stack from sp
<span style="color:black">TRANGROUP:5383                 </span><span style="color:navy">mov     si, [cs:</span>$P_ORIG_SI<span style="color:navy">] </span>; original start parse pointer from si
<span style="color:black">TRANGROUP:5388                 </span><span style="color:navy">jmp     </span>$P_Redo_Time    ; go try TIME again
<span style="color:black">TRANGROUP:538B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:538B
TRANGROUP:538B </span><span style="color:gray">$P_Time_4</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:538B                 </span><span style="color:navy">call    </span>$P_Get_DecNum
<span style="color:black">TRANGROUP:538E
TRANGROUP:538E </span><span style="color:gray">$P_TimeF_Err0</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:538E                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_TimeF_Error
</span><span style="color:black">TRANGROUP:5390                 </span><span style="color:navy">mov     [cs:</span>$P_4th_Val<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:5394                 </span><span style="color:navy">or      bl, bl          </span>; After hundredth, no data allowed
<span style="color:black">TRANGROUP:5396                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_TimeF_Error </span>; if some, then error
<span style="color:black">TRANGROUP:5398
TRANGROUP:5398 </span><span style="color:gray">$P_TimeF_Rlt</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5398                 </span><span style="color:navy">mov     ax, [cs:</span>$P_1st_Val<span style="color:navy">]
</span><span style="color:black">TRANGROUP:539C                 </span><span style="color:navy">or      ah, ah          </span>; if overflow then error
<span style="color:black">TRANGROUP:539E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_TimeF_Error
</span><span style="color:black">TRANGROUP:53A0                 </span><span style="color:navy">test    [cs:</span>$P_Flags<span style="color:navy">], </span><span style="color:green">1 </span>; if &quot;am&quot; specified
<span style="color:black">TRANGROUP:53A6                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Time_notAM </span>; skip if no &quot;AM&quot; specified
<span style="color:black">TRANGROUP:53A8                 </span><span style="color:navy">cmp     al, </span><span style="color:green">12
</span><span style="color:black">TRANGROUP:53AA                 </span><span style="color:navy">ja      short </span><span style="color:gray">$P_TimeF_Error </span>; error if &quot;AM&quot; on more than noon
<span style="color:black">TRANGROUP:53AC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Time_notAM
</span><span style="color:black">TRANGROUP:53AE                 </span><span style="color:navy">xor     al, al          </span>; for noon exactly, set hour to zero
<span style="color:black">TRANGROUP:53B0
TRANGROUP:53B0 </span><span style="color:gray">$P_Time_notAM</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:53B0                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">4 </span>; $P_Time12 ; if 12 hour system and &quot;PM&quot; is specified
<span style="color:black">TRANGROUP:53B6                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_TimeSkip00 </span>; then
<span style="color:black">TRANGROUP:53B8                 </span><span style="color:navy">cmp     al, </span><span style="color:green">12          </span>; if 12:00 o&#039;clock already
<span style="color:black">TRANGROUP:53BA                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_TimeSkip00
</span><span style="color:black">TRANGROUP:53BC                 </span><span style="color:navy">add     al, </span><span style="color:green">12          </span>; add 12 hours to make it afternoon
<span style="color:black">TRANGROUP:53BE                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_TimeF_Error
</span><span style="color:black">TRANGROUP:53C0                 </span><span style="color:navy">cmp     al, </span><span style="color:green">24          </span>; after adding 12, now cannot be &gt;24
<span style="color:black">TRANGROUP:53C2                 </span><span style="color:navy">ja      short </span><span style="color:gray">$P_TimeF_Error </span>; if too big, error
<span style="color:black">TRANGROUP:53C4
TRANGROUP:53C4 </span><span style="color:gray">$P_TimeSkip00</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:53C4                 </span><span style="color:navy">mov     dl, al          </span>; set hour
<span style="color:black">TRANGROUP:53C6                 </span><span style="color:navy">mov     ax, [cs:</span>$P_2nd_Val<span style="color:navy">]
</span><span style="color:black">TRANGROUP:53CA                 </span><span style="color:navy">or      ah, ah          </span>; if overflow then error
<span style="color:black">TRANGROUP:53CC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_TimeF_Error
</span><span style="color:black">TRANGROUP:53CE                 </span><span style="color:navy">mov     dh, al          </span>; set minute
<span style="color:black">TRANGROUP:53D0                 </span><span style="color:navy">mov     ax, [cs:</span>$P_3rd_Val<span style="color:navy">]
</span><span style="color:black">TRANGROUP:53D4                 </span><span style="color:navy">or      ah, ah
</span><span style="color:black">TRANGROUP:53D6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_TimeF_Error
</span><span style="color:black">TRANGROUP:53D8                 </span><span style="color:navy">mov     cl, al          </span>; set second
<span style="color:black">TRANGROUP:53DA                 </span><span style="color:navy">mov     ax, [cs:</span>$P_4th_Val<span style="color:navy">]
</span><span style="color:black">TRANGROUP:53DE                 </span><span style="color:navy">or      ah, ah
</span><span style="color:black">TRANGROUP:53E0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_TimeF_Error
</span><span style="color:black">TRANGROUP:53E2                 </span><span style="color:navy">mov     ch, al          </span>; set hundredth
<span style="color:black">TRANGROUP:53E4                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:53E5                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:53E6                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FF08h      </span>; ($P_No_Tag&lt;&lt;8)+$P_Time_F
<span style="color:black">TRANGROUP:53E9                 </span><span style="color:navy">call    </span>$P_Fill_Result
<span style="color:black">TRANGROUP:53EC                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Time_Format_Exit
</span><span style="color:black">TRANGROUP:53EE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:53EE
TRANGROUP:53EE </span><span style="color:gray">$P_TimeF_Error</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:53EE                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:53EF                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:53F0                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FF03h      </span>; ($P_No_Tag&lt;&lt;8)+$P_String
<span style="color:black">TRANGROUP:53F3                 </span><span style="color:navy">call    </span>$P_Fill_Result
<span style="color:black">TRANGROUP:53F6                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9   </span>; $P_Syntax
<span style="color:black">TRANGROUP:53FD
TRANGROUP:53FD </span><span style="color:gray">$P_Time_Format_Exit</span><span style="color:navy">:                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:53FD                 </span><span style="color:navy">mov     [cs:</span>$P_Got_Time<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:5403                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:5404                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:5405                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:5406                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5406 </span>endp            $P_Time_Format
<span style="color:black">TRANGROUP:5406
TRANGROUP:5407
TRANGROUP:5407 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5407
TRANGROUP:5407
TRANGROUP:5407 </span>proc            $P_Time_2412 near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5407                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:5408                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:5409
TRANGROUP:5409 </span><span style="color:gray">$P_T12_Loop</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5409                 </span><span style="color:navy">mov     al, [cs:si]
</span><span style="color:black">TRANGROUP:540C                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:540D                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:540F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_T12_Loop
</span><span style="color:black">TRANGROUP:5411                 </span><span style="color:navy">mov     al, [cs:si-</span><span style="color:green">2</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:5415                 </span><span style="color:navy">or      al, </span><span style="color:green">20h         </span>; $P_Make_Lower
<span style="color:black">TRANGROUP:5417                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">p&#039;         </span>; only &quot;p&quot; of &quot;pm&quot; ?
<span style="color:black">TRANGROUP:5419                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_T1200  </span>; yes
<span style="color:black">TRANGROUP:541B                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">a&#039;         </span>; only &quot;a&quot; of &quot;am&quot; ?
<span style="color:black">TRANGROUP:541D                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_T1201  </span>; yes
<span style="color:black">TRANGROUP:541F                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">m&#039;         </span>; &quot;m&quot; of &quot;am&quot; or &quot;pm&quot;
<span style="color:black">TRANGROUP:5421                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_T12_Exit
</span><span style="color:black">TRANGROUP:5423                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:5424                 </span><span style="color:navy">mov     al, [cs:si-</span><span style="color:green">2</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:5428                 </span><span style="color:navy">or      al, </span><span style="color:green">20h         </span>; $P_Make_Lower
<span style="color:black">TRANGROUP:542A                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">p&#039;         </span>; &quot;p&quot; of &quot;pm&quot; ?
<span style="color:black">TRANGROUP:542C                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_T1200  </span>; yes
<span style="color:black">TRANGROUP:542E                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">a&#039;         </span>; &quot;a&quot; of &quot;am&quot; ?
<span style="color:black">TRANGROUP:5430                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_T1201  </span>; yes
<span style="color:black">TRANGROUP:5432                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_T12_Exit
</span><span style="color:black">TRANGROUP:5434 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5434
TRANGROUP:5434 </span><span style="color:gray">$P_T1200</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5434                 </span><span style="color:navy">or      [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">4 </span>; $P_Time12 ; flag &quot;PM&quot; found
<span style="color:black">TRANGROUP:543A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Tclr_chr
</span><span style="color:black">TRANGROUP:543C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:543C
TRANGROUP:543C </span><span style="color:gray">$P_T1201</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:543C                 </span><span style="color:navy">or      [cs:</span>$P_Flags<span style="color:navy">], </span><span style="color:green">1 </span>; $P_Time12AM ; flag &quot;AM&quot; found
<span style="color:black">TRANGROUP:5442
TRANGROUP:5442 </span><span style="color:gray">$P_Tclr_chr</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5442                 </span><span style="color:navy">mov     [byte ptr cs:si-</span><span style="color:green">2</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; $P_NULL ; null out special char
<span style="color:black">TRANGROUP:5447
TRANGROUP:5447 </span><span style="color:gray">$P_T12_Exit</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5447                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:5448                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:5449                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5449 </span>endp            $P_Time_2412
<span style="color:black">TRANGROUP:5449
TRANGROUP:544A
TRANGROUP:544A </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:544A
TRANGROUP:544A
TRANGROUP:544A </span>proc            $P_File_Format near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:544A                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:544B                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:544C                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:544D                 </span><span style="color:navy">mov     di, [cs:</span>$P_SaveSI_Cmpx<span style="color:navy">] </span>; get user buffer address
<span style="color:black">TRANGROUP:5452                 </span><span style="color:navy">mov     al, [cs:si]     </span>; load character
<span style="color:black">TRANGROUP:5455                 </span><span style="color:navy">or      al, al          </span>; end of line ?
<span style="color:black">TRANGROUP:5457                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_FileF_Err </span>; if yes, error exit
<span style="color:black">TRANGROUP:5459                 </span><span style="color:navy">call    </span>$P_FileSp_Chk   ; else, check if file special character
<span style="color:black">TRANGROUP:545C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_FileF03 </span>; if yes
<span style="color:black">TRANGROUP:545E                 </span><span style="color:navy">mov     [cs:</span>$P_err_flag<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; $P_error_filespec ; bad char.
<span style="color:black">TRANGROUP:5464                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:5465                 </span><span style="color:navy">mov     [byte ptr cs:si], </span><span style="color:#ff8000">0 </span>; $P_NULL
<span style="color:black">TRANGROUP:5469                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:546A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_FileF02
</span><span style="color:black">TRANGROUP:546C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:546C
TRANGROUP:546C </span><span style="color:gray">$P_FileF_Err</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:546C                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:546D                 </span><span style="color:navy">mov     [byte ptr cs:si], </span><span style="color:#ff8000">0 </span>; $P_NULL
<span style="color:black">TRANGROUP:5471                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:5472                 </span><span style="color:navy">test    [word ptr es:bx], </span><span style="color:green">1 </span>; [es:bx+$P_CONTROL_BLK.$P_Match_Flag],$P_Optional
<span style="color:black">TRANGROUP:5477                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_FileF02 </span>; optional
<span style="color:black">TRANGROUP:5479                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">2   </span>; $P_Op_Missing
<span style="color:black">TRANGROUP:5480                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_FileF02
</span><span style="color:black">TRANGROUP:5482 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5482
TRANGROUP:5482 </span><span style="color:gray">$P_FileF03</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5482                 </span><span style="color:navy">pop     ax              </span>; discard save si
<span style="color:black">TRANGROUP:5483                 </span><span style="color:navy">push    si              </span>; save new si
<span style="color:black">TRANGROUP:5484
TRANGROUP:5484 </span><span style="color:gray">$P_FileF_Loop1</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5484                 </span><span style="color:navy">mov     al, [cs:si]     </span>; load character (not special char)
<span style="color:black">TRANGROUP:5487                 </span><span style="color:navy">or      al, al          </span>; end of line ?
<span style="color:black">TRANGROUP:5489                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_FileF_RLT </span>; yes
<span style="color:black">TRANGROUP:548B                 </span><span style="color:navy">call    </span>$P_FileSp_Chk   ; File special character ?
<span style="color:black">TRANGROUP:548E                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_FileF00
</span><span style="color:black">TRANGROUP:5490                 </span><span style="color:navy">call    </span>$P_Chk_DBCS     ; no, then DBCS ?
<span style="color:black">TRANGROUP:5493                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$P_FileF01
</span><span style="color:black">TRANGROUP:5495                 </span><span style="color:navy">inc     di              </span>; if yes, skip next byte
<span style="color:black">TRANGROUP:5496                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:5497
TRANGROUP:5497 </span><span style="color:gray">$P_FileF01</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5497                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:5498                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:5499                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_FileF_Loop1
</span><span style="color:black">TRANGROUP:549B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:549B
TRANGROUP:549B </span><span style="color:gray">$P_FileF00</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:549B                 </span><span style="color:navy">mov     [cs:</span>$P_Terminator<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:549F                 </span><span style="color:navy">mov     [byte ptr cs:si], </span><span style="color:#ff8000">0 </span>; $P_NULL ; update end of string
<span style="color:black">TRANGROUP:54A3                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:54A4                 </span><span style="color:navy">mov     [cs:</span>$P_SI_Save<span style="color:navy">], di </span>; update next pointer in command line
<span style="color:black">TRANGROUP:54A9
TRANGROUP:54A9 </span><span style="color:gray">$P_FileF_RLT</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:54A9                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:54AA                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:54AB
TRANGROUP:54AB </span><span style="color:gray">$P_FileF02</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:54AB                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:54AC                 </span><span style="color:navy">test    ax, </span><span style="color:green">200h        </span>; $P_File_Spc
<span style="color:black">TRANGROUP:54AF                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Drv_Only_Exit
</span><span style="color:black">TRANGROUP:54B1                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:54B2                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FF05h      </span>; ($P_No_Tag&lt;&lt;8)+$P_File_Spec
<span style="color:black">TRANGROUP:54B5                 </span><span style="color:navy">call    </span>$P_Fill_Result
<span style="color:black">TRANGROUP:54B8                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:54B9
TRANGROUP:54B9 </span><span style="color:gray">$P_Drv_Only_Exit</span><span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:54B9                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:54B9 </span>endp            $P_File_Format
<span style="color:black">TRANGROUP:54B9
TRANGROUP:54BA
TRANGROUP:54BA </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:54BA
TRANGROUP:54BA
TRANGROUP:54BA </span>proc            $P_FileSp_Chk near      <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:54BA                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:54BB                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:54BC                 </span><span style="color:navy">lea     bx, [</span>$P_FileSp_Char<span style="color:navy">] </span><span style="color:gray">; &quot;[]|&lt;&gt;+=;\&quot;&quot;
</span><span style="color:black">TRANGROUP:54C0                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">9           </span>; $P_FileSp_Len
<span style="color:black">TRANGROUP:54C3
TRANGROUP:54C3 </span><span style="color:gray">$P_FileSp_Loop</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:54C3                 </span><span style="color:navy">cmp     al, [cs:bx]
</span><span style="color:black">TRANGROUP:54C6                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_FileSp_Exit
</span><span style="color:black">TRANGROUP:54C8                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:54C9                 </span><span style="color:navy">loop    </span><span style="color:gray">$P_FileSp_Loop
</span><span style="color:black">TRANGROUP:54CB                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:54CC
TRANGROUP:54CC </span><span style="color:gray">$P_FileSp_Exit</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:54CC                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:54CD                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:54CE                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:54CE </span>endp            $P_FileSp_Chk
<span style="color:black">TRANGROUP:54CE
TRANGROUP:54CF
TRANGROUP:54CF </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:54CF
TRANGROUP:54CF
TRANGROUP:54CF </span>proc            $P_Drive_Format near    <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:54CF                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:54D0                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:54D1                 </span><span style="color:navy">mov     al, [cs:si]
</span><span style="color:black">TRANGROUP:54D4                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:54D6                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Drv_Exit
</span><span style="color:black">TRANGROUP:54D8                 </span><span style="color:navy">call    </span>$P_Chk_DBCS
<span style="color:black">TRANGROUP:54DB                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_Drv_Err
</span><span style="color:black">TRANGROUP:54DD                 </span><span style="color:navy">cmp     [word ptr cs:si+</span><span style="color:#ff8000">1</span><span style="color:navy">], &#039;</span><span style="color:green">:&#039; </span>; $P_Colon
<span style="color:black">TRANGROUP:54E2                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_DrvF00
</span><span style="color:black">TRANGROUP:54E4                 </span><span style="color:navy">test    [word ptr es:bx], </span><span style="color:green">10h </span>; $P_Ig_Colon
<span style="color:black">TRANGROUP:54E9                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Drv_Err
</span><span style="color:black">TRANGROUP:54EB                 </span><span style="color:navy">cmp     [byte ptr cs:si+</span><span style="color:#ff8000">1</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; $P_NULL
<span style="color:black">TRANGROUP:54F0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Drv_Err
</span><span style="color:black">TRANGROUP:54F2
TRANGROUP:54F2 </span><span style="color:gray">$P_DrvF00</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:54F2                 </span><span style="color:navy">or      al, </span><span style="color:green">20h         </span>; $P_Make_Lower
<span style="color:black">TRANGROUP:54F4                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">61h </span><span style="color:gray">; &#039;a&#039;
</span><span style="color:black">TRANGROUP:54F6                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_Drv_Err
</span><span style="color:black">TRANGROUP:54F8                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">7Ah </span><span style="color:gray">; &#039;z&#039;
</span><span style="color:black">TRANGROUP:54FA                 </span><span style="color:navy">ja      short </span><span style="color:gray">$P_Drv_Err
</span><span style="color:black">TRANGROUP:54FC                 </span><span style="color:navy">sub     al, </span><span style="color:#ff8000">60h </span><span style="color:gray">; &#039;`&#039;   </span>; &quot;a&quot;-1
<span style="color:black">TRANGROUP:54FE                 </span><span style="color:navy">mov     dl, al
</span><span style="color:black">TRANGROUP:5500                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0FFh        </span>; $P_No_Tag
<span style="color:black">TRANGROUP:5502                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">6           </span>; $P_Drive
<span style="color:black">TRANGROUP:5504                 </span><span style="color:navy">call    </span>$P_Fill_Result
<span style="color:black">TRANGROUP:5507                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Drv_Exit
</span><span style="color:black">TRANGROUP:5509 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5509
TRANGROUP:5509 </span><span style="color:gray">$P_Drv_Err</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5509                 </span><span style="color:navy">mov     [cs:</span>$P_RC<span style="color:navy">], </span><span style="color:#ff8000">9   </span>; $P_Syntax
<span style="color:black">TRANGROUP:5510
TRANGROUP:5510 </span><span style="color:gray">$P_Drv_Exit</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5510                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:5511                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:5512                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5512 </span>endp            $P_Drive_Format
<span style="color:black">TRANGROUP:5512
TRANGROUP:5513
TRANGROUP:5513 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5513
TRANGROUP:5513
TRANGROUP:5513 </span>proc            $P_Skip_Delim near      <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5513                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:5514                 </span><span style="color:navy">call    </span>$P_Chk_EOL
<span style="color:black">TRANGROUP:5517                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Skip_Delim_CY
</span><span style="color:black">TRANGROUP:5519                 </span><span style="color:navy">call    </span>$P_Chk_Delim
<span style="color:black">TRANGROUP:551C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Skip_Delim_NCY
</span><span style="color:black">TRANGROUP:551E                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">20h </span>; $P_Extra
<span style="color:black">TRANGROUP:5524                 </span><span style="color:navy">jz      short </span>$P_Skip_Delim
<span style="color:black">TRANGROUP:5526                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">41h </span>; $P_SW+$P_equ
<span style="color:black">TRANGROUP:552C                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Exit_At_Extra
</span><span style="color:black">TRANGROUP:552E                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:552F                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Exit_At_Extra
</span><span style="color:black">TRANGROUP:5531 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5531
TRANGROUP:5531 </span><span style="color:gray">$P_Skip_Delim_CY</span><span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5531                 </span><span style="color:navy">stc                     </span>; indicate EOL
<span style="color:black">TRANGROUP:5532                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Skip_Delim_Exit
</span><span style="color:black">TRANGROUP:5534 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5534
TRANGROUP:5534 </span><span style="color:gray">$P_Skip_Delim_NCY</span><span style="color:navy">:                      </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5534                 </span><span style="color:navy">clc                     </span>; indicate non delim
<span style="color:black">TRANGROUP:5535
TRANGROUP:5535 </span><span style="color:gray">$P_Skip_Delim_Exit</span><span style="color:navy">:                     </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5535                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:5536                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5537 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5537
TRANGROUP:5537 </span><span style="color:gray">$P_Exit_At_Extra</span><span style="color:navy">:                       </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5537                 </span><span style="color:navy">clc                     </span>; indicate extra delim
<span style="color:black">TRANGROUP:5538                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5538 </span>endp            $P_Skip_Delim
<span style="color:black">TRANGROUP:5538
TRANGROUP:5539
TRANGROUP:5539 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5539
TRANGROUP:5539
TRANGROUP:5539 </span>proc            $P_Chk_EOL near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5539                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:553A                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:553B                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh         </span>; $P_CR
<span style="color:black">TRANGROUP:553D                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Chk_EOL_Exit
</span><span style="color:black">TRANGROUP:553F                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0           </span>; $P_NULL
<span style="color:black">TRANGROUP:5541                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Chk_EOL_Exit
</span><span style="color:black">TRANGROUP:5543                 </span><span style="color:navy">cmp     [byte ptr es:di+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:#ff8000">2 </span>; [es:di+$P_PARMS_BLK.$P_Num_Extra],$P_I_Have_EOL
<span style="color:black">TRANGROUP:5548                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_Chk_EOL_Exit
</span><span style="color:black">TRANGROUP:554A                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:554C                 </span><span style="color:navy">mov     bl, [es:di+</span><span style="color:#ff8000">3</span><span style="color:navy">]   </span>; [es:di+$P_PARMS_BLK.$P_Len_Extra_Delim]
<span style="color:black">TRANGROUP:5550                 </span><span style="color:navy">add     bx, </span><span style="color:#ff8000">4           </span>; $P_Len_PARMS
<span style="color:black">TRANGROUP:5553                 </span><span style="color:navy">cmp     [byte ptr es:bx+di], </span><span style="color:#ff8000">0 </span>; $P_I_Use_Default
<span style="color:black">TRANGROUP:5557                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Chk_EOL_NZ
</span><span style="color:black">TRANGROUP:5559                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:555B                 </span><span style="color:navy">mov     cl, [es:bx+di]
</span><span style="color:black">TRANGROUP:555E
TRANGROUP:555E </span><span style="color:gray">$P_Chk_EOL_Loop</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:555E                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:555F                 </span><span style="color:navy">cmp     al, [es:bx+di]
</span><span style="color:black">TRANGROUP:5562                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Chk_EOL_Exit
</span><span style="color:black">TRANGROUP:5564                 </span><span style="color:navy">loop    </span><span style="color:gray">$P_Chk_EOL_Loop
</span><span style="color:black">TRANGROUP:5566
TRANGROUP:5566 </span><span style="color:gray">$P_Chk_EOL_NZ</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5566                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh         </span>; $P_CR
<span style="color:black">TRANGROUP:5568
TRANGROUP:5568 </span><span style="color:gray">$P_Chk_EOL_Exit</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5568                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:5569                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:556A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:556A </span>endp            $P_Chk_EOL
<span style="color:black">TRANGROUP:556A
TRANGROUP:556B
TRANGROUP:556B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:556B
TRANGROUP:556B
TRANGROUP:556B </span>proc            $P_Chk_Delim near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:556B                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:556C                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:556D                 </span><span style="color:navy">mov     [cs:</span>$P_Terminator<span style="color:navy">], </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039; </span>; $P_Space
<span style="color:black">TRANGROUP:5573                 </span><span style="color:navy">and     [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">0DFh </span>; 0FFh-$P_Extra
<span style="color:black">TRANGROUP:5579                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;   </span>; $P_Space
<span style="color:black">TRANGROUP:557B                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Chk_Delim_Exit
</span><span style="color:black">TRANGROUP:557D                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">9           </span>; $P_TAB
<span style="color:black">TRANGROUP:557F                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Chk_Delim_Exit
</span><span style="color:black">TRANGROUP:5581                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">2Ch </span><span style="color:gray">; &#039;,&#039;   </span>; $P_Comma
<span style="color:black">TRANGROUP:5583                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Chk_Delim_Exit0
</span><span style="color:black">TRANGROUP:5585                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;   </span>; $P_DBSP1
<span style="color:black">TRANGROUP:5587                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Chk_Delim01
</span><span style="color:black">TRANGROUP:5589                 </span><span style="color:navy">cmp     [byte ptr si], </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039; </span>; $P_DBSP2
<span style="color:black">TRANGROUP:558C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_Chk_Delim01
</span><span style="color:black">TRANGROUP:558E                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;   </span>; $P_Space
<span style="color:black">TRANGROUP:5590                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:5591                 </span><span style="color:navy">cmp     al, al
</span><span style="color:black">TRANGROUP:5593                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Chk_Delim_Exit
</span><span style="color:black">TRANGROUP:5595 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5595
TRANGROUP:5595 </span><span style="color:gray">$P_Chk_Delim01</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5595                 </span><span style="color:navy">cmp     [byte ptr es:di+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:#ff8000">1 </span>; [es:di+$P_PARMS_BLK.$P_Num_Extra],
<span style="color:black">TRANGROUP:5595                                         </span>; $P_I_Have_Delim
<span style="color:black">TRANGROUP:559A                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_Chk_Delim_Exit
</span><span style="color:black">TRANGROUP:559C                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:559E                 </span><span style="color:navy">mov     cl, [es:di+</span><span style="color:#ff8000">3</span><span style="color:navy">]   </span>; [es:di+$P_PARMS_BLK.$P_Len_Extra_Delim]
<span style="color:black">TRANGROUP:55A2                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">$P_Chk_Delim_NZ
</span><span style="color:black">TRANGROUP:55A4                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">3
</span><span style="color:black">TRANGROUP:55A7
TRANGROUP:55A7 </span><span style="color:gray">$P_Chk_Delim_Loop</span><span style="color:navy">:                      </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:55A7                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:55A8                 </span><span style="color:navy">cmp     al, [es:bx+di]
</span><span style="color:black">TRANGROUP:55AB                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_Chk_Delim_Exit0
</span><span style="color:black">TRANGROUP:55AD                 </span><span style="color:navy">loop    </span><span style="color:gray">$P_Chk_Delim_Loop
</span><span style="color:black">TRANGROUP:55AF
TRANGROUP:55AF </span><span style="color:gray">$P_Chk_Delim_NZ</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:55AF                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;   </span>; $P_Space
<span style="color:black">TRANGROUP:55B1
TRANGROUP:55B1 </span><span style="color:gray">$P_Chk_Delim_Exit</span><span style="color:navy">:                      </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:55B1                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:55B2                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:55B3                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:55B4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:55B4
TRANGROUP:55B4 </span><span style="color:gray">$P_Chk_Delim_Exit0</span><span style="color:navy">:                     </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:55B4                 </span><span style="color:navy">mov     [cs:</span>$P_Terminator<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:55B8                 </span><span style="color:navy">test    [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">1 </span>; $P_equ ; if terminating a key=
<span style="color:black">TRANGROUP:55BE                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_No_Set_Extra </span>; then do not set the EXTRA bit
<span style="color:black">TRANGROUP:55C0                 </span><span style="color:navy">or      [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">20h </span>; $P_Extra
<span style="color:black">TRANGROUP:55C0                                         </span>; flag terminated extra delimiter or comma
<span style="color:black">TRANGROUP:55C6
TRANGROUP:55C6 </span><span style="color:gray">$P_No_Set_Extra</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:55C6                 </span><span style="color:navy">cmp     al, al
</span><span style="color:black">TRANGROUP:55C8                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_Chk_Delim_Exit
</span><span style="color:black">TRANGROUP:55C8 </span>endp            $P_Chk_Delim
<span style="color:black">TRANGROUP:55C8
TRANGROUP:55CA
TRANGROUP:55CA </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:55CA
TRANGROUP:55CA
TRANGROUP:55CA </span>proc            $P_Chk_Switch near      <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:55CA                 </span><span style="color:navy">lea     bp, [</span>$P_STRING_BUF<span style="color:navy">] </span>; AL = character code
<span style="color:black">TRANGROUP:55CA                                         </span>; BX = current pointer within $P_String_Buf
<span style="color:black">TRANGROUP:55CA                                         </span>; SI = next char on command line (following the one in AL)
<span style="color:black">TRANGROUP:55CE                 </span><span style="color:navy">cmp     bx, bp
</span><span style="color:black">TRANGROUP:55D0                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_STRUC_L2
</span><span style="color:black">TRANGROUP:55D2                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">2Fh </span><span style="color:gray">; &#039;/&#039;   </span>; $P_Switch
<span style="color:black">TRANGROUP:55D4                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_STRUC_L5
</span><span style="color:black">TRANGROUP:55D6                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:55D7                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:55D8                 </span><span style="color:navy">mov     al, [cs:bx-</span><span style="color:green">1</span><span style="color:navy">]   </span>; AL=char before the current char
<span style="color:black">TRANGROUP:55DC                 </span><span style="color:navy">call    </span>$P_0099         ; return carry set if not numeric
<span style="color:black">TRANGROUP:55DF                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_STRUC_L7
</span><span style="color:black">TRANGROUP:55E1                 </span><span style="color:navy">mov     al, [si]        </span>; AL=char after the current char
<span style="color:black">TRANGROUP:55E3                 </span><span style="color:navy">call    </span>$P_0099
<span style="color:black">TRANGROUP:55E6
TRANGROUP:55E6 </span><span style="color:gray">$P_STRUC_L7</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:55E6                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:55E7                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:55E8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:55E8
TRANGROUP:55E8 </span><span style="color:gray">$P_STRUC_L5</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:55E8                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:55E9                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:55EA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:55EA
TRANGROUP:55EA </span><span style="color:gray">$P_STRUC_L2</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:55EA                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">2Fh </span><span style="color:gray">; &#039;/&#039;   </span>; $P_Switch
<span style="color:black">TRANGROUP:55EC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_STRUC_L12
</span><span style="color:black">TRANGROUP:55EE                 </span><span style="color:navy">or      [cs:</span>$P_Flags2<span style="color:navy">], </span><span style="color:green">40h </span>; $P_SW
<span style="color:black">TRANGROUP:55EE                                         </span>; could be valid switch, first char and is slash
<span style="color:black">TRANGROUP:55F4
TRANGROUP:55F4 </span><span style="color:gray">$P_STRUC_L12</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:55F4                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:55F5                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:55F5 </span>endp            $P_Chk_Switch
<span style="color:black">TRANGROUP:55F5
TRANGROUP:55F6
TRANGROUP:55F6 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:55F6
TRANGROUP:55F6
TRANGROUP:55F6 </span>proc            $P_Chk_DBCS near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:55F6                 </span><span style="color:navy">push    ds              </span>; AL = Code to be examined
<span style="color:black">TRANGROUP:55F7                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:55F8                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:55F9                 </span><span style="color:navy">cmp     [cs:</span>$P_DBCSEV_SEG<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:55FF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$P_DBCS00 </span>; ALREADY SET
<span style="color:black">TRANGROUP:5601                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:5602                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:5603                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:5604                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:5605                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:5606                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:5607                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:5608                 </span><span style="color:navy">xor     si, si
</span><span style="color:black">TRANGROUP:560A                 </span><span style="color:navy">mov     ds, si
</span><span style="color:black">TRANGROUP:560C                 </span>assume ds:RESGROUP
<span style="color:black">TRANGROUP:560C                 </span><span style="color:navy">mov     ax, </span><span style="color:green">6300h
</span><span style="color:black">TRANGROUP:560F                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3.2+ only - GET DOUBLE BYTE CHARACTER SET LEAD TABLE
<span style="color:black">TRANGROUP:5611                 </span><span style="color:navy">mov     bx, ds
</span><span style="color:black">TRANGROUP:5613                 </span><span style="color:navy">or      bx, bx
</span><span style="color:black">TRANGROUP:5615                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5616                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:5617                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:5618                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:5619                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:561A                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:561B                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:561B                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:561C                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_NON_DBCS
</span><span style="color:black">TRANGROUP:561E                 </span><span style="color:navy">mov     [cs:</span>$P_DBCSEV_OFF<span style="color:navy">], si
</span><span style="color:black">TRANGROUP:5623                 </span><span style="color:navy">mov     [cs:</span>$P_DBCSEV_SEG<span style="color:navy">], bx
</span><span style="color:black">TRANGROUP:5628
TRANGROUP:5628 </span><span style="color:gray">$P_DBCS00</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5628                 </span><span style="color:navy">lds     si, [dword ptr cs:</span>$P_DBCSEV_OFF<span style="color:navy">]
</span><span style="color:black">TRANGROUP:562D
TRANGROUP:562D </span><span style="color:gray">$P_DBCS_LOOP</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:562D                 </span><span style="color:navy">cmp     [word ptr si], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:5630                 </span><span style="color:navy">jz      short </span><span style="color:gray">$P_NON_DBCS
</span><span style="color:black">TRANGROUP:5632                 </span><span style="color:navy">cmp     al, [si]
</span><span style="color:black">TRANGROUP:5634                 </span><span style="color:navy">jb      short </span><span style="color:gray">$P_DBCS01
</span><span style="color:black">TRANGROUP:5636                 </span><span style="color:navy">cmp     al, [si+</span><span style="color:#ff8000">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:5639                 </span><span style="color:navy">ja      short </span><span style="color:gray">$P_DBCS01
</span><span style="color:black">TRANGROUP:563B                 </span><span style="color:navy">stc                     </span>; indicate DBCS
<span style="color:black">TRANGROUP:563C                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_DBCS_EXIT
</span><span style="color:black">TRANGROUP:563E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:563E
TRANGROUP:563E </span><span style="color:gray">$P_DBCS01</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:563E                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:563F                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:5640                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$P_DBCS_LOOP
</span><span style="color:black">TRANGROUP:5642 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5642
TRANGROUP:5642 </span><span style="color:gray">$P_NON_DBCS</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5642                 </span><span style="color:navy">clc                     </span>; indicate SBCS
<span style="color:black">TRANGROUP:5643
TRANGROUP:5643 </span><span style="color:gray">$P_DBCS_EXIT</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5643                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:5644                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:5645                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:5646                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5646 </span>endp            $P_Chk_DBCS
<span style="color:black">TRANGROUP:5646
TRANGROUP:5647
TRANGROUP:5647 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5647
TRANGROUP:5647
TRANGROUP:5647 </span>proc            cmd_parse near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5647                 </span><span style="color:navy">call    </span>sysparse
<span style="color:black">TRANGROUP:564A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:564A </span>endp            cmd_parse
<span style="color:black">TRANGROUP:564A
</span><span style="color:maroon">TRANGROUP:564B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:564B
TRANGROUP:564B </span>append_parse<span style="color:navy">:                           </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:564B                 </span><span style="color:navy">call    </span>sysparse
<span style="color:maroon">TRANGROUP:564E                 </span><span style="color:navy">retf
</span><span style="color:maroon">TRANGROUP:564F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:564F
TRANGROUP:564F </span>Printf_Init<span style="color:navy">:                            </span><span style="color:#8080ff">; ...
</span><span style="color:maroon">TRANGROUP:564F                 </span><span style="color:navy">call    </span>std_printf
<span style="color:maroon">TRANGROUP:5652                 </span><span style="color:navy">retf
</span><span style="color:black">TRANGROUP:5653
TRANGROUP:5653 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5653
TRANGROUP:5653
TRANGROUP:5653 </span>proc            Printf_Crlf near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5653                 </span><span style="color:navy">call    </span>std_printf
<span style="color:black">TRANGROUP:5656                 </span><span style="color:navy">call    </span>CRLF2
<span style="color:black">TRANGROUP:5659                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5659 </span>endp            Printf_Crlf
<span style="color:black">TRANGROUP:5659
TRANGROUP:565A
TRANGROUP:565A </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:565A
TRANGROUP:565A
TRANGROUP:565A </span>proc            std_eprintf near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:565A                 </span><span style="color:navy">mov     [ds:</span>PRINTF_HANDLE<span style="color:navy">], </span><span style="color:#ff8000">2
</span><span style="color:black">TRANGROUP:5660                 </span><span style="color:navy">jmp     short </span>new_printf
<span style="color:black">TRANGROUP:5660 </span>endp            std_eprintf
<span style="color:black">TRANGROUP:5660
TRANGROUP:5662
TRANGROUP:5662 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5662
TRANGROUP:5662
TRANGROUP:5662 </span>proc            std_printf near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5662                 </span><span style="color:navy">mov     [ds:</span>PRINTF_HANDLE<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; Print to STDOUT
<span style="color:black">TRANGROUP:5668
TRANGROUP:5668 </span>new_printf<span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5668                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:5669                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:566A                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:566B                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:566C                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:566D                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:566E                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:566F                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:5670                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:5671                 </span><span style="color:navy">mov     [ds:</span>print_err_flag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; word [print_err_flag]
<span style="color:black">TRANGROUP:5677                 </span><span style="color:navy">mov     si, dx
</span><span style="color:black">TRANGROUP:5679                 </span><span style="color:navy">lodsw
</span><span style="color:black">TRANGROUP:567A                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:567B                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:567C                 </span><span style="color:navy">mov     cl, al
</span><span style="color:black">TRANGROUP:567E                 </span><span style="color:navy">xor     ch, ch
</span><span style="color:black">TRANGROUP:5680                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:5681                 </span><span style="color:navy">cmp     cx, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:5684                 </span><span style="color:navy">jz      short </span><span style="color:gray">ready_to_print
</span><span style="color:black">TRANGROUP:5686                 </span><span style="color:navy">mov     di, offset </span>subst_buffer
<span style="color:black">TRANGROUP:5689                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:568A                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:568B
TRANGROUP:568B </span><span style="color:gray">move_subst</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:568B                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:568C                 </span><span style="color:navy">mov     bx, si
</span><span style="color:black">TRANGROUP:568E                 </span><span style="color:navy">mov     cx, </span><span style="color:green">11          </span>; parm_block_size
<span style="color:black">TRANGROUP:5691                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:5693                 </span><span style="color:navy">test    [byte ptr bx+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">4 </span>; [bx+$M_SUBLIST_STRUC.$M_S_FLAG],date_type
<span style="color:black">TRANGROUP:5697                 </span><span style="color:navy">jz      short </span><span style="color:gray">move_subst_cont
</span><span style="color:black">TRANGROUP:5699                 </span><span style="color:navy">mov     [word ptr bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [bx+$M_SUBLIST_STRUC.$M_S_VALUE]
<span style="color:black">TRANGROUP:569E                 </span><span style="color:navy">mov     [word ptr bx+</span><span style="color:#ff8000">4</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [bx+$M_SUBLIST_STRUC.$M_S_VALUE+2]
<span style="color:black">TRANGROUP:56A3
TRANGROUP:56A3 </span><span style="color:gray">move_subst_cont</span><span style="color:navy">:                        </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:56A3                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:56A4                 </span><span style="color:navy">loop    </span><span style="color:gray">move_subst
</span><span style="color:black">TRANGROUP:56A6                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:56A7                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:56A8                 </span><span style="color:navy">cmp     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; util_msg_class
<span style="color:black">TRANGROUP:56AD                 </span><span style="color:navy">jz      short </span><span style="color:gray">check_fix
</span><span style="color:black">TRANGROUP:56AF                 </span><span style="color:navy">mov     [ds:</span>msg_flag<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:56B4                 </span><span style="color:navy">mov     di, offset </span>extend_buf_ptr
<span style="color:black">TRANGROUP:56B7                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:56B9                 </span><span style="color:navy">stosw
</span><span style="color:black">TRANGROUP:56BA                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:56BB
TRANGROUP:56BB </span><span style="color:gray">check_fix</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:56BB                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:56BC                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:56BD                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:56BF                 </span><span style="color:navy">mov     bx, si
</span><span style="color:black">TRANGROUP:56C1                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:56C2
TRANGROUP:56C2 </span><span style="color:gray">set_subst</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:56C2                 </span><span style="color:navy">cmp     [word ptr bx+</span><span style="color:#ff8000">4</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [bx+$M_SUBLIST_STRUC.$M_S_VALUE+2]
<span style="color:black">TRANGROUP:56C6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">subst_seg_set
</span><span style="color:black">TRANGROUP:56C8                 </span><span style="color:navy">test    [byte ptr bx+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">4 </span>; [bx+$M_SUBLIST_STRUC.$M_S_FLAG],date_type
<span style="color:black">TRANGROUP:56CC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">subst_seg_set
</span><span style="color:black">TRANGROUP:56CE                 </span><span style="color:navy">mov     [word ptr bx+</span><span style="color:#ff8000">4</span><span style="color:navy">], cs
</span><span style="color:black">TRANGROUP:56D1
TRANGROUP:56D1 </span><span style="color:gray">subst_seg_set</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:56D1                 </span><span style="color:navy">add     bx, </span><span style="color:green">11          </span>; parm_block_size
<span style="color:black">TRANGROUP:56D4                 </span><span style="color:navy">loop    </span><span style="color:gray">set_subst
</span><span style="color:black">TRANGROUP:56D6                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:56D7                 </span><span style="color:navy">mov     bx, si
</span><span style="color:black">TRANGROUP:56D9                 </span><span style="color:navy">cmp     [word ptr bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], offset </span>string_ptr_2 ;
<span style="color:black">TRANGROUP:56D9                                         </span>; [bx+$M_SUBLIST_STRUC.$M_S_VALUE],string_ptr_2
<span style="color:black">TRANGROUP:56DE                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ready_to_print
</span><span style="color:black">TRANGROUP:56E0                 </span><span style="color:navy">mov     dx, [ds:</span>string_ptr_2<span style="color:navy">]
</span><span style="color:black">TRANGROUP:56E4                 </span><span style="color:navy">mov     [bx+</span><span style="color:#ff8000">2</span><span style="color:navy">], dx
</span><span style="color:black">TRANGROUP:56E7
TRANGROUP:56E7 </span><span style="color:gray">ready_to_print</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:56E7                 </span><span style="color:navy">mov     bx, [ds:</span>PRINTF_HANDLE<span style="color:navy">] </span>; get print handle
<span style="color:black">TRANGROUP:56EB                 </span><span style="color:navy">mov     dl, [ds:</span>msg_cont_flag<span style="color:navy">] </span>; set up control flag
<span style="color:black">TRANGROUP:56EF                 </span><span style="color:navy">mov     dh, [ds:</span>msg_disp_class<span style="color:navy">] </span>; set up display class
<span style="color:black">TRANGROUP:56F3                 </span><span style="color:navy">mov     [ds:</span>msg_cont_flag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; no_cont_flag ; reset flags to avoid
<span style="color:black">TRANGROUP:56F8                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; util_msg_class
<span style="color:black">TRANGROUP:56FD                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:56FE                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:56FF                 </span><span style="color:navy">call    </span>SYSDISPMSG
<span style="color:black">TRANGROUP:5702                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5703                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:5704                 </span><span style="color:navy">jnb     short </span><span style="color:gray">print_success
</span><span style="color:black">TRANGROUP:5706                 </span><span style="color:navy">mov     [ds:</span>print_err_flag<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:5709
TRANGROUP:5709 </span><span style="color:gray">print_success</span><span style="color:navy">:                          </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5709                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:570A                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:570B                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:570C                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:570D                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:570E                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:570F                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:5710                 </span><span style="color:navy">cmp     [ds:</span>print_err_flag<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; if an error occurred
<span style="color:black">TRANGROUP:5715                 </span><span style="color:navy">jnz     short </span><span style="color:gray">print_err </span>; handle it
<span style="color:black">TRANGROUP:5717                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5718 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5718
TRANGROUP:5718 </span><span style="color:gray">print_err</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5718                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:5719                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:571A                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:571A                 </span><span style="color:navy">cmp     [ds:</span>PRINTF_HANDLE<span style="color:navy">], </span><span style="color:#ff8000">2 </span>; Print to STDERR?
<span style="color:black">TRANGROUP:571F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">not_stderr </span>; no - continue
<span style="color:black">TRANGROUP:5721                 </span><span style="color:navy">jmp     </span>TCOMMAND        ; Yes - hopless - just exit
<span style="color:black">TRANGROUP:5724 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5724
TRANGROUP:5724 </span><span style="color:gray">not_stderr</span><span style="color:navy">:                             </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5724                 </span><span style="color:navy">mov     ax, [ds:</span>print_err_flag<span style="color:navy">]
</span><span style="color:black">TRANGROUP:5727                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:572B                 </span>assume es:nothing
<span style="color:black">TRANGROUP:572B                 </span><span style="color:navy">test    [es:</span>PipeFlag<span style="color:navy">], </span><span style="color:green">0FFh </span>; -1
<span style="color:black">TRANGROUP:5731                 </span><span style="color:navy">jz      short </span><span style="color:gray">_go_to_error
</span><span style="color:black">TRANGROUP:5733                 </span><span style="color:navy">call    </span>PipeOff
<span style="color:black">TRANGROUP:5736                 </span><span style="color:navy">mov     dx, offset </span>PIPEEMES_PTR
<span style="color:black">TRANGROUP:5739                 </span><span style="color:navy">jmp     short </span><span style="color:gray">print_err_exit
</span><span style="color:black">TRANGROUP:573B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:573B
TRANGROUP:573B </span><span style="color:gray">_go_to_error</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:573B                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; ext_msg_class
<span style="color:black">TRANGROUP:5740                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:black">TRANGROUP:5743                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], ax </span>; get msg num in control block
<span style="color:black">TRANGROUP:5746
TRANGROUP:5746 </span><span style="color:gray">print_err_exit</span><span style="color:navy">:                         </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5746                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:5747                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5748                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:5748                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:5748 </span>endp            std_printf
<span style="color:black">TRANGROUP:5748
TRANGROUP:574B
TRANGROUP:574B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:574B
TRANGROUP:574B
TRANGROUP:574B </span>proc            TSYSLOADMSG near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:574B                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:574C                 </span><span style="color:navy">call    </span>SYSLOADMSG
<span style="color:black">TRANGROUP:574F                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:5750                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5750 </span>endp            TSYSLOADMSG
<span style="color:black">TRANGROUP:5750
TRANGROUP:5751
TRANGROUP:5751 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5751
TRANGROUP:5751
TRANGROUP:5751 </span>proc            TSYSGETMSG near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5751                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:5752                 </span><span style="color:navy">call    </span>SYSGETMSG
<span style="color:black">TRANGROUP:5755                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:5756                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5756 </span>endp            TSYSGETMSG
<span style="color:black">TRANGROUP:5756
TRANGROUP:5757
TRANGROUP:5757 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5757
TRANGROUP:5757
TRANGROUP:5757 </span>proc            SYSLOADMSG near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5757                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:5758                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:5759                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:575A                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:575B                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:575C                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:575E                 </span><span style="color:navy">mov     es, cx
</span><span style="color:black">TRANGROUP:5760                 </span>assume es:RESGROUP
<span style="color:black">TRANGROUP:5760                 </span><span style="color:navy">xor     di, di
</span><span style="color:black">TRANGROUP:5762                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">122Eh       </span>; DOS_GET_EXT_PARSE_ADD
<span style="color:black">TRANGROUP:5765                 </span><span style="color:navy">mov     dl, </span><span style="color:#ff8000">0           </span>; DOS_GET_EXTENDED
<span style="color:black">TRANGROUP:5767                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; Multiplex - DOS 3+ internal - GET OR SET ERROR TABLE ADDRESSES
<span style="color:black">TRANGROUP:5767                                         </span>; DL = subfunction - get standard DOS error table (errors 00h-12h,50h-5Bh)
<span style="color:black">TRANGROUP:5767                                         </span>; Return: ES:DI -&gt; error table
<span style="color:black">TRANGROUP:5769                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_EXT_COMMAND<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], es </span>; [$M_RT+$M_RES_ADDRS.$M_EXT_COMMAND+2]
<span style="color:black">TRANGROUP:576D                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_EXT_COMMAND<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:5771                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">122Eh
</span><span style="color:black">TRANGROUP:5774                 </span><span style="color:navy">mov     dl, </span><span style="color:#ff8000">2           </span>; DOS_GET_PARSE
<span style="color:black">TRANGROUP:5776                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; Multiplex - DOS 3+ internal - GET OR SET ERROR TABLE ADDRESSES
<span style="color:black">TRANGROUP:5776                                         </span>; DL = subfunction - get parameter error table (errors 00h-0Ah)
<span style="color:black">TRANGROUP:5776                                         </span>; ES:DI -&gt; error table
<span style="color:black">TRANGROUP:5778                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_PARSE_COMMAND<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], es </span>; [$M_RT+$M_RES_ADDRS.$M_PARSE_COMMAND+2]
<span style="color:black">TRANGROUP:577C                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_PARSE_COMMAND<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:5780                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">122Eh
</span><span style="color:black">TRANGROUP:5783                 </span><span style="color:navy">mov     dl, </span><span style="color:#ff8000">4           </span>; DOS_GET_CRITICAL
<span style="color:black">TRANGROUP:5785                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; Multiplex - DOS 3+ internal - GET OR SET ERROR TABLE ADDRESSES
<span style="color:black">TRANGROUP:5785                                         </span>; DL = subfunction - get critical/SHARE error table (errors 13h-2Bh)
<span style="color:black">TRANGROUP:5785                                         </span>; ES:DI -&gt; error table
<span style="color:black">TRANGROUP:5787                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_CRIT_COMMAND<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], es </span>; [$M_RT+$M_RES_ADDRS.$M_CRIT_COMMAND+2]
<span style="color:black">TRANGROUP:578B                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_CRIT_COMMAND<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:578F                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">122Eh
</span><span style="color:black">TRANGROUP:5792                 </span><span style="color:navy">mov     dl, </span><span style="color:#ff8000">6           </span>; DOS_GET_FILE
<span style="color:black">TRANGROUP:5794                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; Multiplex - DOS 3+ internal - GET OR SET ERROR TABLE ADDRESSES
<span style="color:black">TRANGROUP:5794                                         </span>; DL = subfunction - get ??? error table
<span style="color:black">TRANGROUP:5794                                         </span>; ES:DI -&gt; error table
<span style="color:black">TRANGROUP:5796                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_EXT_FILE<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], es </span>; [$M_RT+$M_RES_ADDRS.$M_EXT_FILE+2]
<span style="color:black">TRANGROUP:579A                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_EXT_FILE<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:579E                 </span><span style="color:navy">call    </span>$M_MSGSERV_1    ; Get addressibility to MSGSERV CLASS 1 (EXTENDED Errors)
<span style="color:black">TRANGROUP:57A1                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_EXT_ERR_ADDRS<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], es </span>; [$M_RT+$M_RES_ADDRS.$M_EXT_ERR_ADDRS+2]
<span style="color:black">TRANGROUP:57A5                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_EXT_ERR_ADDRS<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:57A9                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_CRIT_ADDRS<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], es </span>; [$M_RT+$M_RES_ADDRS.$M_CRIT_ADDRS+2]
<span style="color:black">TRANGROUP:57AD                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_CRIT_ADDRS<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:57B1                 </span><span style="color:navy">call    </span>$M_MSGSERV_2    ; Get addressibility to MSGSERV CLASS 2 (PARSE Errors)
<span style="color:black">TRANGROUP:57B4                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_PARSE_ADDRS<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], es </span>; [$M_RT+$M_RES_ADDRS.$M_PARSE_ADDRS+2]
<span style="color:black">TRANGROUP:57B8                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_PARSE_ADDRS<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:57BC                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">122Eh
</span><span style="color:black">TRANGROUP:57BF                 </span><span style="color:navy">mov     dl, </span><span style="color:#ff8000">8           </span>; DOS_GET_ADDR
<span style="color:black">TRANGROUP:57C1                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; Multiplex - DOS 3+ internal - GET OR SET ERROR TABLE ADDRESSES
<span style="color:black">TRANGROUP:57C1                                         </span>; DL = subfunction - get ??? error table
<span style="color:black">TRANGROUP:57C1                                         </span>; Return: ES:DI -&gt; error table
<span style="color:black">TRANGROUP:57C3                 </span><span style="color:navy">mov     [word ptr ds:</span>$M_RT_$M_DISK_PROC_ADDR<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], es </span>; [$M_RT+$M_RES_ADDRS.$M_DISK_PROC_ADDR+2]
<span style="color:black">TRANGROUP:57C7                 </span><span style="color:navy">mov     [word ptr ds:</span>$M_RT_$M_DISK_PROC_ADDR<span style="color:navy">], di
</span><span style="color:black">TRANGROUP:57CB                 </span><span style="color:navy">mov     [word ptr ds:</span>$M_RT_$M_CRLF<span style="color:navy">], </span><span style="color:#ff8000">0A0Dh </span>; [$M_RT+$M_RES_ADDRS.$M_CRLF]
<span style="color:black">TRANGROUP:57D1                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_BUF_TERM<span style="color:navy">], </span><span style="color:#ff8000">24h </span><span style="color:gray">; &#039;$&#039; </span>; [$M_RT+$M_RES_ADDRS.$M_BUF_TERM]
<span style="color:black">TRANGROUP:57D6                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_MSG_NUM<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [$M_RT+$M_RES_ADDRS.$M_MSG_NUM],$M_NULL
<span style="color:black">TRANGROUP:57DC                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_DIVISOR<span style="color:navy">], </span><span style="color:green">10 </span>; [$M_RT+$M_RES_ADDRS.$M_DIVISOR],$M_BASE10
<span style="color:black">TRANGROUP:57E2                 </span><span style="color:navy">call    </span>$M_CLS_3        ; Get addressibility to class F ; Build all utility classes
<span style="color:black">TRANGROUP:57E5                 </span><span style="color:navy">mov     [word ptr ds:</span>$M_RT_$M_CLASS_ADDRS<span style="color:navy">], di </span>; [$M_RT+$M_RES_ADDRS.$M_CLASS_ADDRS]
<span style="color:black">TRANGROUP:57E9                 </span><span style="color:navy">call    </span>$M_GET_DBCS_VEC
<span style="color:black">TRANGROUP:57EC                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:57ED                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MIF20
</span><span style="color:black">TRANGROUP:57EF                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:57F0                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:57F1                 </span>assume es:nothing
<span style="color:black">TRANGROUP:57F1                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:57F2                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:57F3                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:57F4                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:57F5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:57F5
TRANGROUP:57F5 </span><span style="color:gray">$MIF20</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:57F5                 </span><span style="color:navy">add     sp, </span><span style="color:green">10
</span><span style="color:black">TRANGROUP:57F8                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:57F9                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:57F9 </span>endp            SYSLOADMSG
<span style="color:black">TRANGROUP:57F9
TRANGROUP:57FA
TRANGROUP:57FA </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:57FA
TRANGROUP:57FA
TRANGROUP:57FA </span>proc            $M_GET_DBCS_VEC near    <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:57FA                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:57FB                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:57FC                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:57FD                 </span><span style="color:navy">mov     ax, </span><span style="color:green">6300h       </span>; DOS_GET_DBCS_INFO
<span style="color:black">TRANGROUP:5800                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3.2+ only - GET DOUBLE BYTE CHARACTER SET LEAD TABLE
<span style="color:black">TRANGROUP:5802                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:5803                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5804                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:5805                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MIF23
</span><span style="color:black">TRANGROUP:5807                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_DBCS_VEC<span style="color:navy">], si </span>; [$M_RT+60]
<span style="color:black">TRANGROUP:580B                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_DBCS_VEC<span style="color:navy">+</span><span style="color:green">2</span><span style="color:navy">], es </span>; [$M_RT+62]
<span style="color:black">TRANGROUP:580F
TRANGROUP:580F </span><span style="color:gray">$MIF23</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:580F                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:5810                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:5811                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5811 </span>endp            $M_GET_DBCS_VEC
<span style="color:black">TRANGROUP:5811
TRANGROUP:5812
TRANGROUP:5812 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5812
TRANGROUP:5812
TRANGROUP:5812 </span>proc            SYSGETMSG near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5812                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:5813                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:5814                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:5815                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:5816                 </span><span style="color:navy">call    </span>$M_GET_MSG_ADDRESS
<span style="color:black">TRANGROUP:5819                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MIF31
</span><span style="color:black">TRANGROUP:581B                 </span><span style="color:navy">cmp     dh, </span><span style="color:#ff8000">0FFh        </span>; utility_msg_class
<span style="color:black">TRANGROUP:581E                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:581F                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF32
</span><span style="color:black">TRANGROUP:5821                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:5822                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:5823                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN32
</span><span style="color:black">TRANGROUP:5825 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5825
TRANGROUP:5825 </span><span style="color:gray">$MIF32</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5825                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:5826                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:5827                 </span>assume ds:TRANGROUP
<span style="color:black">TRANGROUP:5827
TRANGROUP:5827 </span><span style="color:gray">$MEN32</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5827                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:5829
TRANGROUP:5829 </span><span style="color:gray">$MIF31</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5829                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:582A                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:582B                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:582C                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:582D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:582D </span>endp            SYSGETMSG
<span style="color:black">TRANGROUP:582D
TRANGROUP:582E
TRANGROUP:582E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:582E
TRANGROUP:582E
TRANGROUP:582E </span>proc            $M_GET_MSG_ADDRESS near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:582E
TRANGROUP:582E </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:58C6 SIZE 00000007 BYTES
</span><span style="color:black">TRANGROUP:582E
TRANGROUP:582E                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:582F                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:5830                 </span><span style="color:navy">xor     si, si
</span><span style="color:black">TRANGROUP:5832                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:5834
TRANGROUP:5834 </span><span style="color:gray">$MDO36</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5834                 </span><span style="color:navy">cmp     dh, </span><span style="color:#ff8000">0FFh        </span>; utility_msg_class
<span style="color:black">TRANGROUP:5837                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF37
</span><span style="color:black">TRANGROUP:5839                 </span><span style="color:navy">mov     di, [word ptr </span>$M_RT_$M_CLASS_ADDRS<span style="color:navy">+si] </span>;
<span style="color:black">TRANGROUP:5839                                         </span>; [si+$M_RT+$M_RES_ADDRS.$M_CLASS_ADDRS]
<span style="color:black">TRANGROUP:583D                 </span><span style="color:navy">mov     bx, di
</span><span style="color:black">TRANGROUP:583F                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN37
</span><span style="color:black">TRANGROUP:5841 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5841
TRANGROUP:5841 </span><span style="color:gray">$MIF37</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5841                 </span><span style="color:navy">test    dh, </span><span style="color:green">2           </span>; parse_err_class
<span style="color:black">TRANGROUP:5844                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF39
</span><span style="color:black">TRANGROUP:5846                 </span><span style="color:navy">les     di, [dword ptr </span>$M_RT_$M_PARSE_COMMAND<span style="color:navy">+si] </span>;
<span style="color:black">TRANGROUP:5846                                         </span>; [si+$M_RT+$M_RES_ADDRS.$M_PARSE_COMMAND]
<span style="color:black">TRANGROUP:584A                 </span><span style="color:navy">mov     bx, es
</span><span style="color:black">TRANGROUP:584C                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN37
</span><span style="color:black">TRANGROUP:584E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:584E
TRANGROUP:584E </span><span style="color:gray">$MIF39</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:584E                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">19          </span>; $M_CRIT_LO
<span style="color:black">TRANGROUP:5851                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MIF41
</span><span style="color:black">TRANGROUP:5853                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">39          </span>; $M_CRIT_HI
<span style="color:black">TRANGROUP:5856                 </span><span style="color:navy">ja      short </span><span style="color:gray">$MIF41
</span><span style="color:black">TRANGROUP:5858                 </span><span style="color:navy">les     di, [dword ptr </span>$M_RT_$M_CRIT_ADDRS<span style="color:navy">+si] </span>;
<span style="color:black">TRANGROUP:5858                                         </span>; [si+$M_RT+$M_RES_ADDRS.$M_CRIT_ADDRS]
<span style="color:black">TRANGROUP:585C                 </span><span style="color:navy">mov     bx, es
</span><span style="color:black">TRANGROUP:585E                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN37
</span><span style="color:black">TRANGROUP:5860 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5860
TRANGROUP:5860 </span><span style="color:gray">$MIF41</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5860                 </span><span style="color:navy">les     di, [dword ptr </span>$M_RT_$M_EXT_ERR_ADDRS<span style="color:navy">+si] </span>;
<span style="color:black">TRANGROUP:5860                                         </span>; [si+$M_RT+$M_RES_ADDRS.$M_EXT_ERR_ADDRS]
<span style="color:black">TRANGROUP:5864                 </span><span style="color:navy">mov     bx, es
</span><span style="color:black">TRANGROUP:5866
TRANGROUP:5866 </span><span style="color:gray">$MEN37</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5866                 </span><span style="color:navy">cmp     bx, </span><span style="color:green">0FFFFh      </span>; -1 ; $M_TERMINATING_FLAG
<span style="color:black">TRANGROUP:5869                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF46
</span><span style="color:black">TRANGROUP:586B                 </span><span style="color:navy">cmp     dh, </span><span style="color:#ff8000">0FFh        </span>; utility_msg_class
<span style="color:black">TRANGROUP:586E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF47
</span><span style="color:black">TRANGROUP:5870                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:5871                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN47
</span><span style="color:black">TRANGROUP:5873 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5873
TRANGROUP:5873 </span><span style="color:gray">$MIF47</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5873                 </span><span style="color:navy">mov     [</span>$M_RT_$M_MSG_NUM<span style="color:navy">], ax </span>; [$M_RT+$M_RES_ADDRS.$M_MSG_NUM]
<span style="color:black">TRANGROUP:5876                 </span><span style="color:navy">mov     ax, </span><span style="color:green">0FFFFh      </span>; $M_SPECIAL_MSG_NUM
<span style="color:black">TRANGROUP:5879                 </span><span style="color:navy">mov     bp, </span><span style="color:#ff8000">1           </span>; $M_ONE_REPLACE
<span style="color:black">TRANGROUP:587C                 </span><span style="color:navy">xor     si, si
</span><span style="color:black">TRANGROUP:587E                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:587F
TRANGROUP:587F </span><span style="color:gray">$MEN47</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:587F                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN46
</span><span style="color:black">TRANGROUP:5881 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5881
TRANGROUP:5881 </span><span style="color:gray">$MIF46</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5881                 </span><span style="color:navy">cmp     bx, </span><span style="color:#ff8000">0           </span>; $M_CLASS_NOT_EXIST
<span style="color:black">TRANGROUP:5884                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF51
</span><span style="color:black">TRANGROUP:5886                 </span><span style="color:navy">call    </span>$M_FIND_SPECIFIED_MSG
<span style="color:black">TRANGROUP:5889
TRANGROUP:5889 </span><span style="color:gray">$MIF51</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5889                 </span><span style="color:navy">add     si, </span><span style="color:#ff8000">4           </span>; $M_ADDR_SZ_FAR
<span style="color:black">TRANGROUP:588C                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:588D
TRANGROUP:588D </span><span style="color:gray">$MEN46</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:588D                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MEN36
</span><span style="color:black">TRANGROUP:588F                 </span><span style="color:navy">or      cx, cx
</span><span style="color:black">TRANGROUP:5891                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MEN36
</span><span style="color:black">TRANGROUP:5893                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MDO36
</span><span style="color:black">TRANGROUP:5895 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5895
TRANGROUP:5895 </span><span style="color:gray">$MEN36</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5895                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:5896                 </span><span style="color:navy">cmp     dh, </span><span style="color:#ff8000">1           </span>; EXT_ERR_CLASS
<span style="color:black">TRANGROUP:5899                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF56
</span><span style="color:black">TRANGROUP:589B                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:589C                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:589D                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:589E                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:589F                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:58A0                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:58A1                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">500h        </span>; IFSFUNC_INSTALL_CHECK
<span style="color:black">TRANGROUP:58A4                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; Multiplex - DOS 3+ CRITICAL ERROR HANDLER - INSTALLATION CHECK
<span style="color:black">TRANGROUP:58A4                                         </span>; Return: AL = 00h not installed, OK to install
<span style="color:black">TRANGROUP:58A4                                         </span>; 01h not installed, can&#039;t install
<span style="color:black">TRANGROUP:58A4                                         </span>; FFh installed
<span style="color:black">TRANGROUP:58A6                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh        </span>; IFSFUNC_INSTALLED
<span style="color:black">TRANGROUP:58A8                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:58A9                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF57
</span><span style="color:black">TRANGROUP:58AB                 </span><span style="color:navy">xchg    ax, bx
</span><span style="color:black">TRANGROUP:58AC                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">502h        </span>; IFS_GET_ERR_TEXT
<span style="color:black">TRANGROUP:58AF                 </span><span style="color:navy">int     </span><span style="color:green">2Fh             </span>; Multiplex - DOS 3+ CRITICAL ERROR HANDLER -
<span style="color:black">TRANGROUP:58B1                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN57
</span><span style="color:black">TRANGROUP:58B3 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:58B3
TRANGROUP:58B3 </span><span style="color:gray">$MIF57</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:58B3                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:58B4
TRANGROUP:58B4 </span><span style="color:gray">$MEN57</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:58B4                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$MIF60
</span><span style="color:black">TRANGROUP:58B6                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:58B7                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:58B8                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:58B9                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN60
</span><span style="color:black">TRANGROUP:58BB </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:58BB
TRANGROUP:58BB </span><span style="color:gray">$MIF60</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:58BB                 </span><span style="color:navy">add     sp, </span><span style="color:green">6
</span><span style="color:black">TRANGROUP:58BE                 </span><span style="color:navy">call    </span>$M_SET_LEN_IN_CX
<span style="color:black">TRANGROUP:58C1
TRANGROUP:58C1 </span><span style="color:gray">$MEN60</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:58C1                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:58C2                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:58C3
TRANGROUP:58C3 </span><span style="color:gray">$MIF56</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:58C3                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$M_MYRET
</span><span style="color:black">TRANGROUP:58C3 </span>endp            $M_GET_MSG_ADDRESS
<span style="color:black">TRANGROUP:58C3
TRANGROUP:58C5
TRANGROUP:58C5 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:58C5
TRANGROUP:58C5
TRANGROUP:58C5 </span>proc            m_popf_iret far         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:58C5                 </span><span style="color:navy">iret
</span><span style="color:black">TRANGROUP:58C5 </span>endp            m_popf_iret
<span style="color:black">TRANGROUP:58C5
TRANGROUP:58C6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:58C6 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR $M_GET_MSG_ADDRESS
</span><span style="color:black">TRANGROUP:58C6
TRANGROUP:58C6 </span><span style="color:gray">$M_MYRET</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:58C6                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:58C7                 </span><span style="color:navy">call    near ptr </span>m_popf_iret
<span style="color:black">TRANGROUP:58CA                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:58CB                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:58CC                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:58CC </span><span style="color:gray">; END OF FUNCTION CHUNK FOR $M_GET_MSG_ADDRESS
</span><span style="color:black">TRANGROUP:58CD
TRANGROUP:58CD </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:58CD
TRANGROUP:58CD
TRANGROUP:58CD </span>proc            $M_SET_LEN_IN_CX near   <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:58CD                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:58CE                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:58CF                 </span><span style="color:navy">mov     cx, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:58D2                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:58D4                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:58D6                 </span><span style="color:navy">not     cx
</span><span style="color:black">TRANGROUP:58D8                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:58D9                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:58DA                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:58DB                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:58DB </span>endp            $M_SET_LEN_IN_CX
<span style="color:black">TRANGROUP:58DB
TRANGROUP:58DC
TRANGROUP:58DC </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:58DC
TRANGROUP:58DC
TRANGROUP:58DC </span>proc            $M_FIND_SPECIFIED_MSG near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:58DC                 </span><span style="color:navy">cmp     bx, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:58DF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF64
</span><span style="color:black">TRANGROUP:58E1                 </span><span style="color:navy">cmp     [word ptr </span>$M_RT_$M_DISK_PROC_ADDR<span style="color:navy">], </span><span style="color:green">0FFFFh </span>;
<span style="color:black">TRANGROUP:58E1                                         </span>; [$M_RT+$M_RES_ADDRS.$M_DISK_PROC_ADDR],-1
<span style="color:black">TRANGROUP:58E6                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF64
</span><span style="color:black">TRANGROUP:58E8                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh      </span>; -1
<span style="color:black">TRANGROUP:58EB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF65
</span><span style="color:black">TRANGROUP:58ED                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:58EE                 </span><span style="color:navy">mov     ax, [</span>$M_RT_$M_MSG_NUM<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_MSG_NUM]
<span style="color:black">TRANGROUP:58F1                 </span><span style="color:navy">call    [</span>$M_RT_$M_DISK_PROC_ADDR<span style="color:navy">] </span>;
<span style="color:black">TRANGROUP:58F1                                         </span>; call far [$M_RT+$M_RES_ADDRS.$M_DISK_PROC_ADDR]
<span style="color:black">TRANGROUP:58F5                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:58F6                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN65
</span><span style="color:black">TRANGROUP:58F8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:58F8
TRANGROUP:58F8 </span><span style="color:gray">$MIF65</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:58F8                 </span><span style="color:navy">call    [</span>$M_RT_$M_DISK_PROC_ADDR<span style="color:navy">] </span>;
<span style="color:black">TRANGROUP:58F8                                         </span>; call far [$M_RT+$M_RES_ADDRS.$M_DISK_PROC_ADDR]
<span style="color:black">TRANGROUP:58FC
TRANGROUP:58FC </span><span style="color:gray">$MEN65</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:58FC                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN64
</span><span style="color:black">TRANGROUP:58FE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:58FE
TRANGROUP:58FE </span><span style="color:gray">$MIF64</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:58FE                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:5900                 </span><span style="color:navy">cmp     dh, </span><span style="color:#ff8000">0FFh        </span>; utility_msg_class ; -1
<span style="color:black">TRANGROUP:5903                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF69
</span><span style="color:black">TRANGROUP:5905                 </span><span style="color:navy">mov     cl, [es:di+</span><span style="color:#ff8000">3</span><span style="color:navy">]   </span>; [es:di+$M_CLASS_ID.$M_NUM_CLS_MSG]
<span style="color:black">TRANGROUP:5909                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN69
</span><span style="color:black">TRANGROUP:590B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:590B
TRANGROUP:590B </span><span style="color:gray">$MIF69</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:590B                 </span><span style="color:navy">cmp     [cs:di], dh     </span>; [cs:di+$M_CLASS_ID.$M_CLS_ID]
<span style="color:black">TRANGROUP:590E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MEN69
</span><span style="color:black">TRANGROUP:5910                 </span><span style="color:navy">mov     cl, [cs:di+</span><span style="color:#ff8000">3</span><span style="color:navy">]   </span>; [cs:di+$M_CLASS_ID.$M_NUM_CLS_MSG]
<span style="color:black">TRANGROUP:5914
TRANGROUP:5914 </span><span style="color:gray">$MEN69</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5914                 </span><span style="color:navy">add     di, </span><span style="color:#ff8000">4           </span>; $M_CLASS_ID_SZ
<span style="color:black">TRANGROUP:5917                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:5918
TRANGROUP:5918 </span><span style="color:gray">$MEN64</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5918                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$MIF75
</span><span style="color:black">TRANGROUP:591A                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:591B
TRANGROUP:591B </span><span style="color:gray">$MDO76</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:591B                 </span><span style="color:navy">or      cx, cx
</span><span style="color:black">TRANGROUP:591D                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MEN76
</span><span style="color:black">TRANGROUP:591F                 </span><span style="color:navy">cmp     dh, </span><span style="color:#ff8000">0FFh        </span>; utility_msg_class
<span style="color:black">TRANGROUP:5922                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF78
</span><span style="color:black">TRANGROUP:5924                 </span><span style="color:navy">cmp     ax, [es:di]     </span>; [es:di+$M_ID.$M_NUM]
<span style="color:black">TRANGROUP:5927                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN78
</span><span style="color:black">TRANGROUP:5929 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5929
TRANGROUP:5929 </span><span style="color:gray">$MIF78</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5929                 </span><span style="color:navy">cmp     ax, [cs:di]     </span>; [cs:di+$M_ID.$M_NUM]
<span style="color:black">TRANGROUP:592C
TRANGROUP:592C </span><span style="color:gray">$MEN78</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:592C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF76
</span><span style="color:black">TRANGROUP:592E                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MSR76
</span><span style="color:black">TRANGROUP:5930 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5930
TRANGROUP:5930 </span><span style="color:gray">$MIF76</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5930                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:5931                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MEN76
</span><span style="color:black">TRANGROUP:5933                 </span><span style="color:navy">add     di, </span><span style="color:#ff8000">4           </span>; $M_ID_SZ
<span style="color:black">TRANGROUP:5936                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MDO76
</span><span style="color:black">TRANGROUP:5938 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5938
TRANGROUP:5938 </span><span style="color:gray">$MEN76</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5938                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:5939
TRANGROUP:5939 </span><span style="color:gray">$MSR76</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5939                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MIF75
</span><span style="color:black">TRANGROUP:593B                 </span><span style="color:navy">cmp     dh, </span><span style="color:#ff8000">0FFh        </span>; utility_msg_class
<span style="color:black">TRANGROUP:593E                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:593F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF87
</span><span style="color:black">TRANGROUP:5941                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:5942                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5943                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:5943
TRANGROUP:5943 </span><span style="color:gray">$MIF87</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5943                 </span><span style="color:navy">add     di, [es:di+</span><span style="color:#ff8000">2</span><span style="color:navy">]   </span>; [es:di+$M_ID.$M_TXT_PTR]
<span style="color:black">TRANGROUP:5947
TRANGROUP:5947 </span><span style="color:gray">$MIF75</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5947                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MIF91
</span><span style="color:black">TRANGROUP:5949                 </span><span style="color:navy">xor     ch, ch
</span><span style="color:black">TRANGROUP:594B                 </span><span style="color:navy">mov     cl, [es:di]
</span><span style="color:black">TRANGROUP:594E                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:594F
TRANGROUP:594F </span><span style="color:gray">$MIF91</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:594F                 </span><span style="color:navy">mov     [</span>$M_RT_$M_SIZE<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [$M_RT+$M_RES_ADDRS.$M_SIZE]
<span style="color:black">TRANGROUP:5954                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5954 </span>endp            $M_FIND_SPECIFIED_MSG
<span style="color:black">TRANGROUP:5954
TRANGROUP:5955
TRANGROUP:5955 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5955
TRANGROUP:5955
TRANGROUP:5955 </span>proc            SYSDISPMSG near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5955                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:5956                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:5957                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:5958                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:5959                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:595A                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:595B                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:595C                 </span><span style="color:navy">mov     bp, cx
</span><span style="color:black">TRANGROUP:595E                 </span><span style="color:navy">mov     [</span>$M_RT_$M_HANDLE<span style="color:navy">], bx </span>; [$M_RT+$M_RES_ADDRS.$M_HANDLE]
<span style="color:black">TRANGROUP:5962                 </span><span style="color:navy">mov     [</span>$M_RT_$M_CLASS<span style="color:navy">], dh </span>; [$M_RT+$M_RES_ADDRS.$M_CLASS]
<span style="color:black">TRANGROUP:5966                 </span><span style="color:navy">call    </span>$M_GET_MSG_ADDRESS
<span style="color:black">TRANGROUP:5969                 </span><span style="color:navy">or      cx, cx
</span><span style="color:black">TRANGROUP:596B                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF93
</span><span style="color:black">TRANGROUP:596D                 </span><span style="color:navy">or      bp, bp
</span><span style="color:black">TRANGROUP:596F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF94
</span><span style="color:black">TRANGROUP:5971                 </span><span style="color:navy">call    </span>$M_DISPLAY_STRING
<span style="color:black">TRANGROUP:5974                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN94
</span><span style="color:black">TRANGROUP:5976 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5976
TRANGROUP:5976 </span><span style="color:gray">$MIF94</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5976                 </span><span style="color:navy">call    </span>$M_DISPLAY_MESSAGE
<span style="color:black">TRANGROUP:5979
TRANGROUP:5979 </span><span style="color:gray">$MEN94</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5979                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MIF97
</span><span style="color:black">TRANGROUP:597B                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:597C                 </span><span style="color:navy">call    </span>$M_ADD_CRLF
<span style="color:black">TRANGROUP:597F                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5980                 </span>assume es:nothing
<span style="color:black">TRANGROUP:5980                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:5981                 </span><span style="color:navy">or      dl, dl
</span><span style="color:black">TRANGROUP:5983                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF98
</span><span style="color:black">TRANGROUP:5985                 </span><span style="color:navy">call    </span>$M_WAIT_FOR_INPUT
<span style="color:black">TRANGROUP:5988
TRANGROUP:5988 </span><span style="color:gray">$MIF98</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5988                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN97
</span><span style="color:black">TRANGROUP:598A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:598A
TRANGROUP:598A </span><span style="color:gray">$MIF97</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:598A                 </span><span style="color:navy">add     sp, </span><span style="color:green">6
</span><span style="color:black">TRANGROUP:598D                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:598E
TRANGROUP:598E </span><span style="color:gray">$MEN97</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:598E                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN93
</span><span style="color:black">TRANGROUP:5990 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5990
TRANGROUP:5990 </span><span style="color:gray">$MIF93</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5990                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5991                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:5992                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:5993                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:5994
TRANGROUP:5994 </span><span style="color:gray">$MEN93</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5994                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MIF104
</span><span style="color:black">TRANGROUP:5996                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:5997                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:5998                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:5999                 </span><span style="color:navy">add     sp, </span><span style="color:green">2
</span><span style="color:black">TRANGROUP:599C                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN104
</span><span style="color:black">TRANGROUP:599E </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:599E
TRANGROUP:599E </span><span style="color:gray">$MIF104</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:599E                 </span><span style="color:navy">add     sp, </span><span style="color:green">8
</span><span style="color:black">TRANGROUP:59A1                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:59A2
TRANGROUP:59A2 </span><span style="color:gray">$MEN104</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:59A2                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:59A2 </span>endp            SYSDISPMSG
<span style="color:black">TRANGROUP:59A2
TRANGROUP:59A3
TRANGROUP:59A3 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:59A3
TRANGROUP:59A3
TRANGROUP:59A3 </span>proc            $M_DISPLAY_STRING near  <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:59A3                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:59A4                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:59A5                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:59A6                 </span><span style="color:navy">mov     bx, [</span>$M_RT_$M_HANDLE<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_HANDLE]
<span style="color:black">TRANGROUP:59AA                 </span><span style="color:navy">cmp     bx, </span><span style="color:green">0FFFFh      </span>; $M_NO_HANDLE
<span style="color:black">TRANGROUP:59AD                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF107
</span><span style="color:black">TRANGROUP:59AF                 </span><span style="color:navy">call    </span>$M_DISPLAY_$_STRING
<span style="color:black">TRANGROUP:59B2                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN107
</span><span style="color:black">TRANGROUP:59B4 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:59B4
TRANGROUP:59B4 </span><span style="color:gray">$MIF107</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:59B4                 </span><span style="color:navy">call    </span>$M_DISPLAY_H_STRING
<span style="color:black">TRANGROUP:59B7
TRANGROUP:59B7 </span><span style="color:gray">$MEN107</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:59B7                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$MIF110
</span><span style="color:black">TRANGROUP:59B9                 </span><span style="color:navy">mov     ah, </span><span style="color:green">59h         </span>; DOS_GET_EXT_ERROR
<span style="color:black">TRANGROUP:59BB                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:59BE                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET EXTENDED ERROR CODE
<span style="color:black">TRANGROUP:59BE                                         </span>; BX = version code (0000h for DOS 3.x)
<span style="color:black">TRANGROUP:59C0                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:black">TRANGROUP:59C2                 </span><span style="color:navy">add     sp, </span><span style="color:green">6
</span><span style="color:black">TRANGROUP:59C5                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:59C6                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN110
</span><span style="color:black">TRANGROUP:59C8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:59C8
TRANGROUP:59C8 </span><span style="color:gray">$MIF110</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:59C8                 </span><span style="color:navy">cmp     bx, </span><span style="color:green">0FFFFh      </span>; $M_NO_HANDLE
<span style="color:black">TRANGROUP:59CB                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MEN110
</span><span style="color:black">TRANGROUP:59CD                 </span><span style="color:navy">cmp     ax, cx
</span><span style="color:black">TRANGROUP:59CF                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MEN110
</span><span style="color:black">TRANGROUP:59D1                 </span><span style="color:navy">call    </span>$M_GET_EXT_ERR_39
<span style="color:black">TRANGROUP:59D4                 </span><span style="color:navy">add     sp, </span><span style="color:green">6
</span><span style="color:black">TRANGROUP:59D7                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:59D8
TRANGROUP:59D8 </span><span style="color:gray">$MEN110</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:59D8                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MIF117
</span><span style="color:black">TRANGROUP:59DA                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:59DB                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:59DC                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:59DD
TRANGROUP:59DD </span><span style="color:gray">$MIF117</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:59DD                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:59DD </span>endp            $M_DISPLAY_STRING
<span style="color:black">TRANGROUP:59DD
TRANGROUP:59DE
TRANGROUP:59DE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:59DE
TRANGROUP:59DE
TRANGROUP:59DE </span>proc            $M_DISPLAY_$_STRING near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:59DE                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:59DF                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:59E0                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:59E1                 </span>assume ds:nothing
<span style="color:black">TRANGROUP:59E1                 </span><span style="color:navy">cmp     cx, </span><span style="color:#ff8000">1           </span>; $M_SINGLE_CHAR
<span style="color:black">TRANGROUP:59E4                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF119
</span><span style="color:black">TRANGROUP:59E6                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">2           </span>; DOS_DISP_CHAR
<span style="color:black">TRANGROUP:59E8                 </span><span style="color:navy">mov     dl, [es:di]
</span><span style="color:black">TRANGROUP:59EB                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - DISPLAY OUTPUT
<span style="color:black">TRANGROUP:59EB                                         </span>; DL = character to send to standard output
<span style="color:black">TRANGROUP:59ED                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:59EE                 </span><span style="color:navy">mov     al, dl
</span><span style="color:black">TRANGROUP:59F0                 </span><span style="color:navy">call    </span>$M_IS_IT_DBCS
<span style="color:black">TRANGROUP:59F3                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:59F4                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:59F5                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:59F6                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$MIF120
</span><span style="color:black">TRANGROUP:59F8                 </span><span style="color:navy">mov     dl, [es:di+</span><span style="color:#ff8000">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:59FC                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS -
<span style="color:black">TRANGROUP:59FE                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:59FF
TRANGROUP:59FF </span><span style="color:gray">$MIF120</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:59FF                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN119
</span><span style="color:black">TRANGROUP:5A01 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5A01
TRANGROUP:5A01 </span><span style="color:gray">$MIF119</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5A01                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">2           </span>; DOS_DISP_CHAR
<span style="color:black">TRANGROUP:5A03
TRANGROUP:5A03 </span><span style="color:gray">$MDO123</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5A03                 </span><span style="color:navy">or      cx, cx
</span><span style="color:black">TRANGROUP:5A05                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MEN119
</span><span style="color:black">TRANGROUP:5A07                 </span><span style="color:navy">mov     dl, [es:di]
</span><span style="color:black">TRANGROUP:5A0A                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - DISPLAY OUTPUT
<span style="color:black">TRANGROUP:5A0A                                         </span>; DL = character to send to standard output
<span style="color:black">TRANGROUP:5A0C                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:5A0D                 </span><span style="color:navy">loop    </span><span style="color:gray">$MDO123
</span><span style="color:black">TRANGROUP:5A0F
TRANGROUP:5A0F </span><span style="color:gray">$MEN119</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5A0F                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:5A10                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:5A11                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5A11 </span>endp            $M_DISPLAY_$_STRING
<span style="color:black">TRANGROUP:5A11
TRANGROUP:5A12
TRANGROUP:5A12 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5A12
TRANGROUP:5A12
TRANGROUP:5A12 </span>proc            scan_ctrlz near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5A12                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:5A13                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:5A14                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:5A15                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:5A16                 </span><span style="color:navy">mov     di, dx
</span><span style="color:black">TRANGROUP:5A18                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:5A19                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5A1A                 </span><span style="color:navy">mov     bx, cx
</span><span style="color:black">TRANGROUP:5A1C                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">1Ah         </span>; Ctrl-Z
<span style="color:black">TRANGROUP:5A1E                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:5A1F                 </span><span style="color:navy">repne scasb
</span><span style="color:black">TRANGROUP:5A21                 </span><span style="color:navy">jnz     short </span><span style="color:gray">noCtrlZ
</span><span style="color:black">TRANGROUP:5A23                 </span><span style="color:navy">sub     bx, cx
</span><span style="color:black">TRANGROUP:5A25                 </span><span style="color:navy">dec     bx
</span><span style="color:black">TRANGROUP:5A26
TRANGROUP:5A26 </span><span style="color:gray">noCtrlZ</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5A26                 </span><span style="color:navy">mov     cx, bx
</span><span style="color:black">TRANGROUP:5A28                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:5A29                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5A2A                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:5A2B                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:5A2C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5A2C </span>endp            scan_ctrlz
<span style="color:black">TRANGROUP:5A2C
TRANGROUP:5A2D
TRANGROUP:5A2D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5A2D
TRANGROUP:5A2D
TRANGROUP:5A2D </span>proc            $M_DISPLAY_H_STRING near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5A2D
TRANGROUP:5A2D </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:5A61 SIZE 00000006 BYTES
</span><span style="color:black">TRANGROUP:5A2D
TRANGROUP:5A2D                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:5A2F                 </span><span style="color:navy">or      cx, cx
</span><span style="color:black">TRANGROUP:5A31                 </span><span style="color:navy">jz      short </span>$MIF127
<span style="color:black">TRANGROUP:5A33                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:5A34                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:5A35                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:5A36                 </span><span style="color:navy">mov     ah, </span><span style="color:green">40h         </span>; DOS_WRITE_HANDLE
<span style="color:black">TRANGROUP:5A38                 </span><span style="color:navy">mov     dx, di
</span><span style="color:black">TRANGROUP:5A3A                 </span><span style="color:navy">cmp     cx, </span><span style="color:#ff8000">1           </span>; $M_SINGLE_CHAR
<span style="color:black">TRANGROUP:5A3D                 </span><span style="color:navy">jnz     short </span>$MIF128
<span style="color:black">TRANGROUP:5A3F                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - WRITE TO FILE WITH HANDLE
<span style="color:black">TRANGROUP:5A3F                                         </span>; BX = file handle, CX = number of bytes to write, DS:DX -&gt; buffer
<span style="color:black">TRANGROUP:5A41                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:5A42                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:5A43                 </span><span style="color:navy">mov     al, [es:di]
</span><span style="color:black">TRANGROUP:5A46                 </span><span style="color:navy">call    </span>$M_IS_IT_DBCS
<span style="color:black">TRANGROUP:5A49                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:5A4A                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:5A4B                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:5A4C                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:5A4D                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$MIF129
</span><span style="color:black">TRANGROUP:5A4F                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:5A50                 </span><span style="color:navy">mov     ah, </span><span style="color:green">40h
</span><span style="color:black">TRANGROUP:5A52                 </span><span style="color:navy">inc     dx
</span><span style="color:black">TRANGROUP:5A53                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - WRITE TO FILE WITH HANDLE
<span style="color:black">TRANGROUP:5A53                                         </span>; BX = file handle, CX = number of bytes to write, DS:DX -&gt; buffer
<span style="color:black">TRANGROUP:5A55
TRANGROUP:5A55 </span><span style="color:gray">$MIF129</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5A55                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:5A56                 </span><span style="color:navy">cmp     [byte ptr es:di], </span><span style="color:#ff8000">1Ah </span>; is char a Ctrl-Z?
<span style="color:black">TRANGROUP:5A5A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">m_popf_j  </span>; no, continue
<span style="color:black">TRANGROUP:5A5C                 </span><span style="color:navy">mov     ax, cx
</span><span style="color:black">TRANGROUP:5A5E
TRANGROUP:5A5E </span><span style="color:gray">m_popf_j</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5A5E                 </span><span style="color:navy">jmp     short </span><span style="color:gray">m_popf
</span><span style="color:black">TRANGROUP:5A5E </span>endp            $M_DISPLAY_H_STRING
<span style="color:black">TRANGROUP:5A5E
TRANGROUP:5A60
TRANGROUP:5A60 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5A60
TRANGROUP:5A60
TRANGROUP:5A60 </span>proc            intret far              <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5A60                 </span><span style="color:navy">iret
</span><span style="color:black">TRANGROUP:5A60 </span>endp            intret
<span style="color:black">TRANGROUP:5A60
TRANGROUP:5A61 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5A61 </span><span style="color:gray">; START OF FUNCTION CHUNK FOR $M_DISPLAY_H_STRING
</span><span style="color:black">TRANGROUP:5A61
TRANGROUP:5A61 </span><span style="color:gray">m_popf</span><span style="color:navy">:                                 </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5A61                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:5A62                 </span><span style="color:navy">call    near ptr </span>intret
<span style="color:black">TRANGROUP:5A65                 </span><span style="color:navy">jmp     short </span>$MEN128
<span style="color:black">TRANGROUP:5A65 </span><span style="color:gray">; END OF FUNCTION CHUNK FOR $M_DISPLAY_H_STRING
</span><span style="color:maroon">TRANGROUP:5A67 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:maroon">TRANGROUP:5A67
TRANGROUP:5A67 </span>$MIF128<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5A67                 </span><span style="color:navy">push    bp
</span><span style="color:maroon">TRANGROUP:5A68                 </span><span style="color:navy">push    cx
</span><span style="color:maroon">TRANGROUP:5A69                 </span><span style="color:navy">call    </span>scan_ctrlz
<span style="color:maroon">TRANGROUP:5A6C                 </span><span style="color:navy">mov     bp, cx
</span><span style="color:maroon">TRANGROUP:5A6E                 </span><span style="color:navy">pop     cx
</span><span style="color:maroon">TRANGROUP:5A6F                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS -
<span style="color:maroon">TRANGROUP:5A71                 </span><span style="color:navy">jb      short </span>m_cnt_ok
<span style="color:maroon">TRANGROUP:5A73                 </span><span style="color:navy">cmp     cx, ax
</span><span style="color:maroon">TRANGROUP:5A75                 </span><span style="color:navy">jz      short </span>m_cnt_ok
<span style="color:maroon">TRANGROUP:5A77                 </span><span style="color:navy">cmp     bp, ax
</span><span style="color:maroon">TRANGROUP:5A79                 </span><span style="color:navy">clc
</span><span style="color:maroon">TRANGROUP:5A7A                 </span><span style="color:navy">jnz     short </span>m_cnt_ok
<span style="color:maroon">TRANGROUP:5A7C                 </span><span style="color:navy">mov     ax, cx
</span><span style="color:maroon">TRANGROUP:5A7E
TRANGROUP:5A7E </span>m_cnt_ok<span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5A7E                 </span><span style="color:navy">pop     bp
</span><span style="color:maroon">TRANGROUP:5A7F
TRANGROUP:5A7F </span>$MEN128<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5A7F                 </span><span style="color:navy">pop     ds
</span><span style="color:maroon">TRANGROUP:5A80
TRANGROUP:5A80 </span>$MIF127<span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:maroon">TRANGROUP:5A80                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5A81
TRANGROUP:5A81 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5A81
TRANGROUP:5A81
TRANGROUP:5A81 </span>proc            $M_GET_EXT_ERR_39 near  <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5A81                 </span><span style="color:navy">mov     ax, </span><span style="color:green">27h         </span>; EXT_ERR_39
<span style="color:black">TRANGROUP:5A84                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">4
</span><span style="color:black">TRANGROUP:5A87                 </span><span style="color:navy">mov     ch, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:5A89                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5A89 </span>endp            $M_GET_EXT_ERR_39
<span style="color:black">TRANGROUP:5A89
TRANGROUP:5A8A
TRANGROUP:5A8A </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5A8A
TRANGROUP:5A8A
TRANGROUP:5A8A </span>proc            $M_ADD_CRLF near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5A8A                 </span><span style="color:navy">cmp     dh, </span><span style="color:#ff8000">0FFh        </span>; utility_msg_class
<span style="color:black">TRANGROUP:5A8D                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF134
</span><span style="color:black">TRANGROUP:5A8F                 </span><span style="color:navy">test    dh, </span><span style="color:green">80h         </span>; $M_NO_CRLF_MASK
<span style="color:black">TRANGROUP:5A92                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF134
</span><span style="color:black">TRANGROUP:5A94                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:5A95                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5A96                 </span><span style="color:navy">lea     di, [</span>$M_RT_$M_CRLF<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_CRLF]
<span style="color:black">TRANGROUP:5A9A                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">2           </span>; $M_CRLF_SIZE
<span style="color:black">TRANGROUP:5A9D                 </span><span style="color:navy">call    </span>$M_DISPLAY_STRING
<span style="color:black">TRANGROUP:5AA0
TRANGROUP:5AA0 </span><span style="color:gray">$MIF134</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5AA0                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5AA0 </span>endp            $M_ADD_CRLF
<span style="color:black">TRANGROUP:5AA0
TRANGROUP:5AA1
TRANGROUP:5AA1 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5AA1
TRANGROUP:5AA1
TRANGROUP:5AA1 </span>proc            $M_IS_IT_DBCS near      <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5AA1                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:5AA2                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:5AA3                 </span><span style="color:navy">les     di, [dword ptr ds:</span>$M_RT_$M_DBCS_VEC<span style="color:navy">] </span>;
<span style="color:black">TRANGROUP:5AA3                                         </span>; [$M_RT+$M_RES_ADDRS.$M_DBCS_VEC]
<span style="color:black">TRANGROUP:5AA7                 </span><span style="color:navy">or      di, di
</span><span style="color:black">TRANGROUP:5AA9                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF138
</span><span style="color:black">TRANGROUP:5AAB
TRANGROUP:5AAB </span><span style="color:gray">$MDO139</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5AAB                 </span><span style="color:navy">cmp     [word ptr es:di], </span><span style="color:#ff8000">0 </span>; $M_DBCS_TERM
<span style="color:black">TRANGROUP:5AAF                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:5AB0                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF138
</span><span style="color:black">TRANGROUP:5AB2                 </span><span style="color:navy">cmp     al, [es:di]
</span><span style="color:black">TRANGROUP:5AB5                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MIF141
</span><span style="color:black">TRANGROUP:5AB7                 </span><span style="color:navy">cmp     al, [es:di+</span><span style="color:#ff8000">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:5ABB                 </span><span style="color:navy">ja      short </span><span style="color:gray">$MIF141
</span><span style="color:black">TRANGROUP:5ABD                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:5ABE
TRANGROUP:5ABE </span><span style="color:gray">$MIF141</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5ABE                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:5ABF                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:5AC0                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MDO139
</span><span style="color:black">TRANGROUP:5AC2 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5AC2
TRANGROUP:5AC2 </span><span style="color:gray">$MIF138</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5AC2                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:5AC3                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5AC4                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5AC4 </span>endp            $M_IS_IT_DBCS
<span style="color:black">TRANGROUP:5AC4
TRANGROUP:5AC5
TRANGROUP:5AC5 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5AC5
TRANGROUP:5AC5
TRANGROUP:5AC5 </span>proc            $M_CONVERT2ASC near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5AC5                 </span><span style="color:navy">pop     [ds:</span>$M_RT_$M_RETURN_ADDR<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_RETURN_ADDR]
<span style="color:black">TRANGROUP:5AC5                                         </span>; Save Return Address
<span style="color:black">TRANGROUP:5AC9                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:5ACB                 </span><span style="color:navy">xchg    ax, bx
</span><span style="color:black">TRANGROUP:5ACC                 </span><span style="color:navy">xchg    ax, dx
</span><span style="color:black">TRANGROUP:5ACD
TRANGROUP:5ACD </span><span style="color:gray">$MDO145</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5ACD                 </span><span style="color:navy">div     [ds:</span>$M_RT_$M_DIVISOR<span style="color:navy">] </span>; word [$M_RT+$M_RES_ADDRS.$M_DIVISOR]
<span style="color:black">TRANGROUP:5AD1                 </span><span style="color:navy">xchg    ax, bx
</span><span style="color:black">TRANGROUP:5AD2                 </span><span style="color:navy">div     [ds:</span>$M_RT_$M_DIVISOR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:5AD6                 </span><span style="color:navy">cmp     dx, </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:5AD9                 </span><span style="color:navy">jbe     short </span><span style="color:gray">$MIF146
</span><span style="color:black">TRANGROUP:5ADB                 </span><span style="color:navy">add     dl, </span><span style="color:green">55
</span><span style="color:black">TRANGROUP:5ADE                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN146
</span><span style="color:black">TRANGROUP:5AE0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5AE0
TRANGROUP:5AE0 </span><span style="color:gray">$MIF146</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5AE0                 </span><span style="color:navy">add     dl, &#039;</span><span style="color:green">0&#039;
</span><span style="color:black">TRANGROUP:5AE3
TRANGROUP:5AE3 </span><span style="color:gray">$MEN146</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5AE3                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:5AE4                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5AE5                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">TRANGROUP:5AE7                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MLL149
</span><span style="color:black">TRANGROUP:5AE9                 </span><span style="color:navy">or      bx, bx
</span><span style="color:black">TRANGROUP:5AEB                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MEN145
</span><span style="color:black">TRANGROUP:5AED
TRANGROUP:5AED </span><span style="color:gray">$MLL149</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5AED                 </span><span style="color:navy">cmp     cx, </span><span style="color:#ff8000">3           </span>; $M_FIRST_THOU
<span style="color:black">TRANGROUP:5AF0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF150
</span><span style="color:black">TRANGROUP:5AF2                 </span><span style="color:navy">cmp     [byte ptr si+</span><span style="color:#ff8000">0Ah</span><span style="color:navy">], </span><span style="color:#ff8000">2Ch </span><span style="color:gray">; &#039;,&#039; </span>;
<span style="color:black">TRANGROUP:5AF2                                         </span>; [si+$M_SUBLIST_STRUC.$M_S_PAD],&#039;,&#039;
<span style="color:black">TRANGROUP:5AF6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF151
</span><span style="color:black">TRANGROUP:5AF8                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_THOU_SEPARA<span style="color:navy">] </span>; [$M_RT+$M_COUNTRY_INFO.$M_THOU_SEPARA]
<span style="color:black">TRANGROUP:5AFC                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5AFD
TRANGROUP:5AFD </span><span style="color:gray">$MIF151</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5AFD                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN150
</span><span style="color:black">TRANGROUP:5AFF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5AFF
TRANGROUP:5AFF </span><span style="color:gray">$MIF150</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5AFF                 </span><span style="color:navy">cmp     cx, </span><span style="color:#ff8000">7           </span>; $M_SECOND_THOU
<span style="color:black">TRANGROUP:5B02                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF153
</span><span style="color:black">TRANGROUP:5B04                 </span><span style="color:navy">cmp     [byte ptr si+</span><span style="color:#ff8000">0Ah</span><span style="color:navy">], </span><span style="color:#ff8000">2Ch </span><span style="color:gray">; &#039;,&#039; </span>; [si+$M_SUBLIST_STRUC.$M_S_PAD],&#039;,&#039;
<span style="color:black">TRANGROUP:5B08                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF155
</span><span style="color:black">TRANGROUP:5B0A                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_THOU_SEPARA<span style="color:navy">] </span>; [$M_RT+$M_COUNTRY_INFO.$M_THOU_SEPARA]
<span style="color:black">TRANGROUP:5B0E                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5B0F
TRANGROUP:5B0F </span><span style="color:gray">$MIF155</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B0F                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN150
</span><span style="color:black">TRANGROUP:5B11 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5B11
TRANGROUP:5B11 </span><span style="color:gray">$MIF153</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B11                 </span><span style="color:navy">cmp     cx, </span><span style="color:green">11          </span>; $M_THIRD_THOU
<span style="color:black">TRANGROUP:5B14                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MEN150
</span><span style="color:black">TRANGROUP:5B16                 </span><span style="color:navy">cmp     [byte ptr si+</span><span style="color:#ff8000">0Ah</span><span style="color:navy">], </span><span style="color:#ff8000">2Ch </span><span style="color:gray">; &#039;,&#039; </span>;
<span style="color:black">TRANGROUP:5B16                                         </span>; [si+$M_SUBLIST_STRUC.$M_S_PAD],&#039;,&#039;
<span style="color:black">TRANGROUP:5B1A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MEN150
</span><span style="color:black">TRANGROUP:5B1C                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_THOU_SEPARA<span style="color:navy">] </span>; [$M_RT+$M_COUNTRY_INFO.$M_THOU_SEPARA]
<span style="color:black">TRANGROUP:5B20                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5B21
TRANGROUP:5B21 </span><span style="color:gray">$MEN150</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B21                 </span><span style="color:navy">xchg    ax, bx
</span><span style="color:black">TRANGROUP:5B22                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:5B24                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MDO145
</span><span style="color:black">TRANGROUP:5B26 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5B26
TRANGROUP:5B26 </span><span style="color:gray">$MEN145</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B26                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:5B28                 </span><span style="color:navy">cwd
</span><span style="color:black">TRANGROUP:5B29                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_RETURN_ADDR<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_RETURN_ADDR]
<span style="color:black">TRANGROUP:5B29                                         </span>; Restore Return Address
<span style="color:black">TRANGROUP:5B2D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5B2D </span>endp            $M_CONVERT2ASC
<span style="color:black">TRANGROUP:5B2D
TRANGROUP:5B2E
TRANGROUP:5B2E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5B2E
TRANGROUP:5B2E
TRANGROUP:5B2E </span>proc            $M_DISPLAY_MESSAGE near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B2E                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:5B30                 </span><span style="color:navy">or      cx, cx
</span><span style="color:black">TRANGROUP:5B32                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MEN167
</span><span style="color:black">TRANGROUP:5B34                 </span><span style="color:navy">mov     ax, </span><span style="color:green">2500h       </span>; mov ah,&quot;%&quot; ; mov al,0
<span style="color:black">TRANGROUP:5B37
TRANGROUP:5B37 </span><span style="color:gray">$MDO167</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B37                 </span><span style="color:navy">cmp     [es:di], ah
</span><span style="color:black">TRANGROUP:5B3A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MLL168
</span><span style="color:black">TRANGROUP:5B3C                 </span><span style="color:navy">cmp     [es:di+</span><span style="color:#ff8000">1</span><span style="color:navy">], ah
</span><span style="color:black">TRANGROUP:5B40                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MLL168
</span><span style="color:black">TRANGROUP:5B42                 </span><span style="color:navy">cmp     al, ah
</span><span style="color:black">TRANGROUP:5B44                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MEN167
</span><span style="color:black">TRANGROUP:5B46
TRANGROUP:5B46 </span><span style="color:gray">$MLL168</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B46                 </span><span style="color:navy">mov     al, [es:di]
</span><span style="color:black">TRANGROUP:5B49                 </span><span style="color:navy">call    </span>$M_IS_IT_DBCS
<span style="color:black">TRANGROUP:5B4C                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$MIF169
</span><span style="color:black">TRANGROUP:5B4E                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:5B4F
TRANGROUP:5B4F </span><span style="color:gray">$MIF169</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B4F                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:5B50                 </span><span style="color:navy">inc     dx
</span><span style="color:black">TRANGROUP:5B51                 </span><span style="color:navy">loop    </span><span style="color:gray">$MDO167
</span><span style="color:black">TRANGROUP:5B53
TRANGROUP:5B53 </span><span style="color:gray">$MEN167</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B53                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:5B54                 </span><span style="color:navy">xchg    cx, dx
</span><span style="color:black">TRANGROUP:5B56                 </span><span style="color:navy">or      bp, bp
</span><span style="color:black">TRANGROUP:5B58                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF173
</span><span style="color:black">TRANGROUP:5B5A                 </span><span style="color:navy">dec     bp
</span><span style="color:black">TRANGROUP:5B5B                 </span><span style="color:navy">cmp     [ds:</span>$M_RT_$M_MSG_NUM<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [$M_RT+$M_RES_ADDRS.$M_MSG_NUM],$M_NULL
<span style="color:black">TRANGROUP:5B60                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF173
</span><span style="color:black">TRANGROUP:5B62
TRANGROUP:5B62 </span><span style="color:gray">$MDO175</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B62                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">6</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_ID]
<span style="color:black">TRANGROUP:5B65                 </span><span style="color:navy">add     al, </span><span style="color:#ff8000">30h </span><span style="color:gray">; &#039;0&#039;
</span><span style="color:black">TRANGROUP:5B67                 </span><span style="color:navy">cmp     al, [es:di+</span><span style="color:#ff8000">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:5B6B                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MSR175
</span><span style="color:black">TRANGROUP:5B6D                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MIF173
</span><span style="color:black">TRANGROUP:5B6F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5B6F
TRANGROUP:5B6F </span><span style="color:gray">$MSR175</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B6F                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">30h </span><span style="color:gray">; &#039;0&#039;   </span>; $M_SPECIAL_CASE
<span style="color:black">TRANGROUP:5B71                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MLL178
</span><span style="color:black">TRANGROUP:5B73                 </span><span style="color:navy">or      dx, dx
</span><span style="color:black">TRANGROUP:5B75                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MEN175
</span><span style="color:black">TRANGROUP:5B77
TRANGROUP:5B77 </span><span style="color:gray">$MLL178</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B77                 </span><span style="color:navy">add     si, [si]
</span><span style="color:black">TRANGROUP:5B79                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MDO175
</span><span style="color:black">TRANGROUP:5B7B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5B7B
TRANGROUP:5B7B </span><span style="color:gray">$MEN175</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B7B                 </span><span style="color:navy">cmp     [ds:</span>$M_RT_$M_CLASS<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; [$M_RT+$M_RES_ADDRS.$M_CLASS],
<span style="color:black">TRANGROUP:5B7B                                         </span>; utility_msg_class
<span style="color:black">TRANGROUP:5B80                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF180
</span><span style="color:black">TRANGROUP:5B82                 </span><span style="color:navy">inc     dx
</span><span style="color:black">TRANGROUP:5B83                 </span><span style="color:navy">inc     dx
</span><span style="color:black">TRANGROUP:5B84                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:5B85                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:5B86                 </span><span style="color:navy">dec     di
</span><span style="color:black">TRANGROUP:5B87                 </span><span style="color:navy">dec     di
</span><span style="color:black">TRANGROUP:5B88                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MIF173
</span><span style="color:black">TRANGROUP:5B8A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5B8A
TRANGROUP:5B8A </span><span style="color:gray">$MIF180</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B8A                 </span><span style="color:navy">mov     dx, </span><span style="color:green">0FFFFh      </span>; -1
<span style="color:black">TRANGROUP:5B8D
TRANGROUP:5B8D </span><span style="color:gray">$MIF173</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B8D                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:5B8E                 </span><span style="color:navy">sub     di, cx
</span><span style="color:black">TRANGROUP:5B90                 </span><span style="color:navy">call    </span>$M_DISPLAY_STRING
<span style="color:black">TRANGROUP:5B93                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:5B94                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:5B95                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$MXL3
</span><span style="color:black">TRANGROUP:5B97                 </span><span style="color:navy">jmp     </span><span style="color:gray">$MEN165
</span><span style="color:black">TRANGROUP:5B9A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5B9A
TRANGROUP:5B9A </span><span style="color:gray">$MXL3</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5B9A                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:5B9B                 </span><span style="color:navy">mov     cx, dx
</span><span style="color:black">TRANGROUP:5B9D                 </span><span style="color:navy">cmp     [byte ptr si+</span><span style="color:#ff8000">6</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [si+$M_SUBLIST_STRUC.$M_S_ID],
<span style="color:black">TRANGROUP:5B9D                                         </span>; $M_SPECIAL_CASE-30h
<span style="color:black">TRANGROUP:5BA1                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF187
</span><span style="color:black">TRANGROUP:5BA3                 </span><span style="color:navy">or      cx, cx
</span><span style="color:black">TRANGROUP:5BA5                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF188
</span><span style="color:black">TRANGROUP:5BA7                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:5BA8                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:5BA9                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:5BAA                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:5BAB                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN188
</span><span style="color:black">TRANGROUP:5BAD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5BAD
TRANGROUP:5BAD </span><span style="color:gray">$MIF188</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5BAD                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:5BAE
TRANGROUP:5BAE </span><span style="color:gray">$MEN188</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5BAE                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN187
</span><span style="color:black">TRANGROUP:5BB0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5BB0
TRANGROUP:5BB0 </span><span style="color:gray">$MIF187</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5BB0                 </span><span style="color:navy">or      cx, cx
</span><span style="color:black">TRANGROUP:5BB2                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF192
</span><span style="color:black">TRANGROUP:5BB4                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:5BB5                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN187
</span><span style="color:black">TRANGROUP:5BB7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5BB7
TRANGROUP:5BB7 </span><span style="color:gray">$MIF192</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5BB7                 </span><span style="color:navy">cmp     cx, </span><span style="color:green">0FFFFh      </span>; -1
<span style="color:black">TRANGROUP:5BBA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF194
</span><span style="color:black">TRANGROUP:5BBC                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:5BBE
TRANGROUP:5BBE </span><span style="color:gray">$MIF194</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5BBE                 </span><span style="color:navy">or      di, di
</span><span style="color:black">TRANGROUP:5BC0
TRANGROUP:5BC0 </span><span style="color:gray">$MEN187</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5BC0                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MEN165
</span><span style="color:black">TRANGROUP:5BC2                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:5BC3                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:5BC4                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:5BC5                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:5BC6                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:5BC8                 </span><span style="color:navy">cmp     [ds:</span>$M_RT_$M_MSG_NUM<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [$M_RT+$M_RES_ADDRS.$M_MSG_NUM],$M_NULL
<span style="color:black">TRANGROUP:5BCD                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF199
</span><span style="color:black">TRANGROUP:5BCF                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">0Fh </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG]
<span style="color:black">TRANGROUP:5BD3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF200
</span><span style="color:black">TRANGROUP:5BD5                 </span><span style="color:navy">les     di, [si+</span><span style="color:#ff8000">2</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_VALUE]
<span style="color:black">TRANGROUP:5BD8                 </span><span style="color:navy">call    </span>$M_CHAR_REPLACE
<span style="color:black">TRANGROUP:5BDB                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN202
</span><span style="color:black">TRANGROUP:5BDD </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5BDD
TRANGROUP:5BDD </span><span style="color:gray">$MIF200</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5BDD                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">0Dh </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG]
<span style="color:black">TRANGROUP:5BDD                                         </span>; not Sgn_Bin_Type and $M_TYPE_MASK
<span style="color:black">TRANGROUP:5BE1                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MLL202
</span><span style="color:black">TRANGROUP:5BE3                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">0Eh </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5BE3                                         </span>; NOT Unsgn_Bin_Type AND $M_TYPE_MASK
<span style="color:black">TRANGROUP:5BE7                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MLL202
</span><span style="color:black">TRANGROUP:5BE9                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">0Ch </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5BE9                                         </span>; not Bin_Hex_Type and $M_TYPE_MASK
<span style="color:black">TRANGROUP:5BED                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF202
</span><span style="color:black">TRANGROUP:5BEF
TRANGROUP:5BEF </span><span style="color:gray">$MLL202</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5BEF                 </span><span style="color:navy">les     di, [si+</span><span style="color:#ff8000">2</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_VALUE]
<span style="color:black">TRANGROUP:5BF2                 </span><span style="color:navy">call    </span>$M_BIN2ASC_REPLACE
<span style="color:black">TRANGROUP:5BF5                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN202
</span><span style="color:black">TRANGROUP:5BF7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5BF7
TRANGROUP:5BF7 </span><span style="color:gray">$MIF202</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5BF7                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">0Bh </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5BF7                                         </span>; not Date_Type and $M_TYPE_MASK
<span style="color:black">TRANGROUP:5BFB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF204
</span><span style="color:black">TRANGROUP:5BFD                 </span><span style="color:navy">call    </span>$M_DATE_REPLACE
<span style="color:black">TRANGROUP:5C00                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN202
</span><span style="color:black">TRANGROUP:5C02 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5C02
TRANGROUP:5C02 </span><span style="color:gray">$MIF204</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C02                 </span><span style="color:navy">call    </span>$M_TIME_REPLACE
<span style="color:black">TRANGROUP:5C05
TRANGROUP:5C05 </span><span style="color:gray">$MEN202</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C05                 </span><span style="color:navy">call    </span>$M_DISPLAY_REPLACE
<span style="color:black">TRANGROUP:5C08                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN199
</span><span style="color:black">TRANGROUP:5C0A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5C0A
TRANGROUP:5C0A </span><span style="color:gray">$MIF199</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C0A                 </span><span style="color:navy">call    </span>$M_EXT_PAR_REPLACE
<span style="color:black">TRANGROUP:5C0D
TRANGROUP:5C0D </span><span style="color:gray">$MEN199</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C0D                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MIF211
</span><span style="color:black">TRANGROUP:5C0F                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:5C10                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5C11                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:5C12                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:5C13                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:5C14                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN211
</span><span style="color:black">TRANGROUP:5C16 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5C16
TRANGROUP:5C16 </span><span style="color:gray">$MIF211</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C16                 </span><span style="color:navy">add     sp, </span><span style="color:green">10
</span><span style="color:black">TRANGROUP:5C19                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:5C1A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN165
</span><span style="color:black">TRANGROUP:5C1C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5C1C
TRANGROUP:5C1C </span><span style="color:gray">$MEN211</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C1C                 </span><span style="color:navy">cmp     [ds:</span>$M_RT_$M_MSG_NUM<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [$M_RT+$M_RES_ADDRS.$M_MSG_NUM],$M_NULL
<span style="color:black">TRANGROUP:5C21                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MEN165
</span><span style="color:black">TRANGROUP:5C23                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MEN165
</span><span style="color:black">TRANGROUP:5C25                 </span><span style="color:navy">jmp     </span>$M_DISPLAY_MESSAGE
<span style="color:black">TRANGROUP:5C28 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5C28
TRANGROUP:5C28 </span><span style="color:gray">$MEN165</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C28                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_MSG_NUM<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [$M_RT+$M_RES_ADDRS.$M_MSG_NUM]
<span style="color:black">TRANGROUP:5C2E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5C2E </span>endp            $M_DISPLAY_MESSAGE
<span style="color:black">TRANGROUP:5C2E
TRANGROUP:5C2F
TRANGROUP:5C2F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5C2F
TRANGROUP:5C2F
TRANGROUP:5C2F </span>proc            $M_EXT_PAR_REPLACE near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C2F                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:5C31                 </span><span style="color:navy">mov     ax, [ds:</span>$M_RT_$M_MSG_NUM<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_MSG_NUM]
<span style="color:black">TRANGROUP:5C34                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_DIVISOR<span style="color:navy">], </span><span style="color:green">10 </span>; [$M_RT+$M_RES_ADDRS.$M_DIVISOR],$M_BASE10
<span style="color:black">TRANGROUP:5C3A                 </span><span style="color:navy">call    </span>$M_CONVERT2ASC
<span style="color:black">TRANGROUP:5C3D
TRANGROUP:5C3D </span><span style="color:gray">$MDO215</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C3D                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:5C3E                 </span><span style="color:navy">mov     [byte ptr ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">+bx], al </span>;
<span style="color:black">TRANGROUP:5C3E                                         </span>; [bx+$M_RT+$M_RES_ADDRS.$M_TEMP_BUF]
<span style="color:black">TRANGROUP:5C42                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:5C43                 </span><span style="color:navy">cmp     bx, </span><span style="color:green">64          </span>; $M_TEMP_BUF_SZ
<span style="color:black">TRANGROUP:5C46                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF216
</span><span style="color:black">TRANGROUP:5C48                 </span><span style="color:navy">call    </span>$M_FLUSH_BUF
<span style="color:black">TRANGROUP:5C4B
TRANGROUP:5C4B </span><span style="color:gray">$MIF216</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C4B                 </span><span style="color:navy">dec     cl
</span><span style="color:black">TRANGROUP:5C4D                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MDO215
</span><span style="color:black">TRANGROUP:5C4F                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">0A0Dh       </span>; $M_CR_LF
<span style="color:black">TRANGROUP:5C52                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">+bx], ax </span>;
<span style="color:black">TRANGROUP:5C52                                         </span>; [bx+$M_RT+$M_RES_ADDRS.$M_TEMP_BUF]
<span style="color:black">TRANGROUP:5C56                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:5C57                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:5C58                 </span><span style="color:navy">call    </span>$M_FLUSH_BUF
<span style="color:black">TRANGROUP:5C5B                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5C5B </span>endp            $M_EXT_PAR_REPLACE
<span style="color:black">TRANGROUP:5C5B
TRANGROUP:5C5C
TRANGROUP:5C5C </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5C5C
TRANGROUP:5C5C
TRANGROUP:5C5C </span>proc            $M_DISPLAY_REPLACE near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C5C                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:5C5E                 </span><span style="color:navy">cmp     [byte ptr si+</span><span style="color:#ff8000">6</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [si+$M_SUBLIST_STRUC.$M_S_ID]
<span style="color:black">TRANGROUP:5C62                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF276
</span><span style="color:black">TRANGROUP:5C64                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">+bx], </span><span style="color:#ff8000">2D20h </span>;
<span style="color:black">TRANGROUP:5C64                                         </span>; [bx+$M_RT+$M_RES_ADDRS.$M_TEMP_BUF],$M_SPACE_HYP
<span style="color:black">TRANGROUP:5C6A                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:5C6B                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:5C6C                 </span><span style="color:navy">mov     [byte ptr ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">+bx], </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039; </span>;
<span style="color:black">TRANGROUP:5C6C                                         </span>; [bx+$M_RT+$M_RES_ADDRS.$M_TEMP_BUF],$M_SPACE
<span style="color:black">TRANGROUP:5C71                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:5C72                 </span><span style="color:navy">call    </span>$M_FLUSH_BUF
<span style="color:black">TRANGROUP:5C75
TRANGROUP:5C75 </span><span style="color:gray">$MIF276</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C75                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:5C76                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:5C78                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:5C7A                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_SIZE<span style="color:navy">], cl </span>; [$M_RT+$M_RES_ADDRS.$M_SIZE]
<span style="color:black">TRANGROUP:5C7E                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">9</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_MINW]
<span style="color:black">TRANGROUP:5C81                 </span><span style="color:navy">cmp     al, cl
</span><span style="color:black">TRANGROUP:5C83                 </span><span style="color:navy">jbe     short </span><span style="color:gray">$MIF278
</span><span style="color:black">TRANGROUP:5C85                 </span><span style="color:navy">sub     al, cl
</span><span style="color:black">TRANGROUP:5C87                 </span><span style="color:navy">mov     dh, al
</span><span style="color:black">TRANGROUP:5C89                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">80h </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG]
<span style="color:black">TRANGROUP:5C8D                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF278
</span><span style="color:black">TRANGROUP:5C8F
TRANGROUP:5C8F </span><span style="color:gray">$MDO280</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C8F                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">0Ah</span><span style="color:navy">]    </span>; [si+$M_SUBLIST_STRUC.$M_S_PAD]
<span style="color:black">TRANGROUP:5C92                 </span><span style="color:navy">mov     [byte ptr ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">+bx], al </span>;
<span style="color:black">TRANGROUP:5C92                                         </span>; [bx+$M_RT+$M_RES_ADDRS.$M_TEMP_BUF]
<span style="color:black">TRANGROUP:5C96                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:5C97                 </span><span style="color:navy">cmp     bx, </span><span style="color:green">64          </span>; $M_TEMP_BUF_SZ
<span style="color:black">TRANGROUP:5C9A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF281
</span><span style="color:black">TRANGROUP:5C9C                 </span><span style="color:navy">call    </span>$M_FLUSH_BUF
<span style="color:black">TRANGROUP:5C9F
TRANGROUP:5C9F </span><span style="color:gray">$MIF281</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5C9F                 </span><span style="color:navy">dec     dh
</span><span style="color:black">TRANGROUP:5CA1                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MDO280
</span><span style="color:black">TRANGROUP:5CA3
TRANGROUP:5CA3 </span><span style="color:gray">$MIF278</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5CA3                 </span><span style="color:navy">cmp     [byte ptr si+</span><span style="color:#ff8000">8</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [si+$M_SUBLIST_STRUC.$M_S_MAXW],$M_UNLIM_W
<span style="color:black">TRANGROUP:5CA7                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF286
</span><span style="color:black">TRANGROUP:5CA9                 </span><span style="color:navy">cmp     [si+</span><span style="color:#ff8000">8</span><span style="color:navy">], cl      </span>; [si+$M_SUBLIST_STRUC.$M_S_MAXW]
<span style="color:black">TRANGROUP:5CAC                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$MIF286
</span><span style="color:black">TRANGROUP:5CAE                 </span><span style="color:navy">sub     cl, [si+</span><span style="color:#ff8000">8</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:5CB1                 </span><span style="color:navy">mov     dl, cl
</span><span style="color:black">TRANGROUP:5CB3                 </span><span style="color:navy">mov     cl, [si+</span><span style="color:#ff8000">8</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:5CB6
TRANGROUP:5CB6 </span><span style="color:gray">$MIF286</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5CB6                 </span><span style="color:navy">or      cx, cx
</span><span style="color:black">TRANGROUP:5CB8                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF290
</span><span style="color:black">TRANGROUP:5CBA
TRANGROUP:5CBA </span><span style="color:gray">$MDO291</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5CBA                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">0Fh </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5CBA                                         </span>; not Char_Type not $M_TYPE_MASK
<span style="color:black">TRANGROUP:5CBE                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF292
</span><span style="color:black">TRANGROUP:5CC0                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">10h </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5CC0                                         </span>; Char_field_ASCIIZ and $M_SIZE_MASK
<span style="color:black">TRANGROUP:5CC4                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF292
</span><span style="color:black">TRANGROUP:5CC6                 </span><span style="color:navy">mov     al, [es:di]
</span><span style="color:black">TRANGROUP:5CC9                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:5CCA                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN292
</span><span style="color:black">TRANGROUP:5CCC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5CCC
TRANGROUP:5CCC </span><span style="color:gray">$MIF292</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5CCC                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:5CCD
TRANGROUP:5CCD </span><span style="color:gray">$MEN292</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5CCD                 </span><span style="color:navy">mov     [byte ptr ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">+bx], al </span>;
<span style="color:black">TRANGROUP:5CCD                                         </span>; [bx+$M_RT+$M_RES_ADDRS.$M_TEMP_BUF]
<span style="color:black">TRANGROUP:5CD1                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:5CD2                 </span><span style="color:navy">cmp     bx, </span><span style="color:green">64          </span>; $M_TEMP_BUF_SZ
<span style="color:black">TRANGROUP:5CD5                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF295
</span><span style="color:black">TRANGROUP:5CD7                 </span><span style="color:navy">call    </span>$M_FLUSH_BUF
<span style="color:black">TRANGROUP:5CDA
TRANGROUP:5CDA </span><span style="color:gray">$MIF295</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5CDA                 </span><span style="color:navy">dec     cl
</span><span style="color:black">TRANGROUP:5CDC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MDO291
</span><span style="color:black">TRANGROUP:5CDE
TRANGROUP:5CDE </span><span style="color:gray">$MIF290</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5CDE                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">80h </span>;
<span style="color:black">TRANGROUP:5CDE                                         </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],Right_Align
<span style="color:black">TRANGROUP:5CE2                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF299
</span><span style="color:black">TRANGROUP:5CE4                 </span><span style="color:navy">or      dh, dh
</span><span style="color:black">TRANGROUP:5CE6                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF299
</span><span style="color:black">TRANGROUP:5CE8
TRANGROUP:5CE8 </span><span style="color:gray">$MDO301</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5CE8                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">0Ah</span><span style="color:navy">]    </span>; [si+$M_SUBLIST_STRUC.$M_S_PAD]
<span style="color:black">TRANGROUP:5CEB                 </span><span style="color:navy">mov     [byte ptr ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">+bx], al </span>;
<span style="color:black">TRANGROUP:5CEB                                         </span>; [bx+$M_RT+$M_RES_ADDRS.$M_TEMP_BUF]
<span style="color:black">TRANGROUP:5CEF                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:5CF0                 </span><span style="color:navy">cmp     bx, </span><span style="color:green">64          </span>; $M_TEMP_BUF_SZ
<span style="color:black">TRANGROUP:5CF3                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF302
</span><span style="color:black">TRANGROUP:5CF5                 </span><span style="color:navy">call    </span>$M_FLUSH_BUF
<span style="color:black">TRANGROUP:5CF8
TRANGROUP:5CF8 </span><span style="color:gray">$MIF302</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5CF8                 </span><span style="color:navy">dec     dh
</span><span style="color:black">TRANGROUP:5CFA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MDO301
</span><span style="color:black">TRANGROUP:5CFC
TRANGROUP:5CFC </span><span style="color:gray">$MIF299</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5CFC                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">0Fh </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5CFC                                         </span>; not Char_Type and $M_TYPE_MASK
<span style="color:black">TRANGROUP:5D00                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF307
</span><span style="color:black">TRANGROUP:5D02                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">10h </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5D02                                         </span>; Char_field_ASCIIZ and $M_SIZE_MASK
<span style="color:black">TRANGROUP:5D06                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF307
</span><span style="color:black">TRANGROUP:5D08                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN307
</span><span style="color:black">TRANGROUP:5D0A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5D0A
TRANGROUP:5D0A </span><span style="color:gray">$MIF307</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D0A                 </span><span style="color:navy">or      dl, dl
</span><span style="color:black">TRANGROUP:5D0C                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MEN307
</span><span style="color:black">TRANGROUP:5D0E
TRANGROUP:5D0E </span><span style="color:gray">$MDO310</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D0E                 </span><span style="color:navy">pop     [ds:</span>$M_RT_$M_RETURN_ADDR<span style="color:navy">] </span>;
<span style="color:black">TRANGROUP:5D0E                                         </span>; [$M_RT+$M_RES_ADDRS.$M_RETURN_ADDR]
<span style="color:black">TRANGROUP:5D12                 </span><span style="color:navy">dec     dl
</span><span style="color:black">TRANGROUP:5D14                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MDO310
</span><span style="color:black">TRANGROUP:5D16
TRANGROUP:5D16 </span><span style="color:gray">$MEN307</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D16                 </span><span style="color:navy">call    </span>$M_FLUSH_BUF
<span style="color:black">TRANGROUP:5D19                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:5D1A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5D1A </span>endp            $M_DISPLAY_REPLACE
<span style="color:black">TRANGROUP:5D1A
TRANGROUP:5D1B
TRANGROUP:5D1B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5D1B
TRANGROUP:5D1B
TRANGROUP:5D1B </span>proc            $M_FLUSH_BUF near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D1B                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:5D1C                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:5D1D                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:5D1E                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:5D1F                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5D20                 </span><span style="color:navy">mov     cx, bx
</span><span style="color:black">TRANGROUP:5D22                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:5D24                 </span><span style="color:navy">lea     di, [</span>$M_RT_$M_TEMP_BUF<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_TEMP_BUF]
<span style="color:black">TRANGROUP:5D28                 </span><span style="color:navy">call    </span>$M_DISPLAY_STRING
<span style="color:black">TRANGROUP:5D2B                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MIF314
</span><span style="color:black">TRANGROUP:5D2D                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:5D2E                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:5D2F                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:5D30                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5D31 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5D31
TRANGROUP:5D31 </span><span style="color:gray">$MIF314</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D31                 </span><span style="color:navy">add     sp, </span><span style="color:green">6
</span><span style="color:black">TRANGROUP:5D34                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:5D35                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5D35 </span>endp            $M_FLUSH_BUF
<span style="color:black">TRANGROUP:5D35
TRANGROUP:5D36
TRANGROUP:5D36 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5D36
TRANGROUP:5D36
TRANGROUP:5D36 </span>proc            $M_CHAR_REPLACE near    <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D36                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:5D37                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">30h </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5D37                                         </span>; not Char_Field_Char and $M_SIZE_MASK
<span style="color:black">TRANGROUP:5D3B                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF317
</span><span style="color:black">TRANGROUP:5D3D                 </span><span style="color:navy">mov     al, [es:di]
</span><span style="color:black">TRANGROUP:5D40                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:5D41                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5D42                 </span><span style="color:navy">call    </span>$M_IS_IT_DBCS
<span style="color:black">TRANGROUP:5D45                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$MIF318
</span><span style="color:black">TRANGROUP:5D47                 </span><span style="color:navy">mov     al, [es:di+</span><span style="color:#ff8000">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:5D4B                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:5D4C                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:5D4D
TRANGROUP:5D4D </span><span style="color:gray">$MIF318</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D4D                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN317
</span><span style="color:black">TRANGROUP:5D4F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5D4F
TRANGROUP:5D4F </span><span style="color:gray">$MIF317</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D4F                 </span><span style="color:navy">mov     al, [es:di]
</span><span style="color:black">TRANGROUP:5D52                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:5D54                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MEN321
</span><span style="color:black">TRANGROUP:5D56                 </span><span style="color:navy">inc     di
</span><span style="color:black">TRANGROUP:5D57                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5D58                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MIF317
</span><span style="color:black">TRANGROUP:5D5A </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5D5A
TRANGROUP:5D5A </span><span style="color:gray">$MEN321</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D5A                 </span><span style="color:navy">sub     di, cx
</span><span style="color:black">TRANGROUP:5D5C
TRANGROUP:5D5C </span><span style="color:gray">$MEN317</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D5C                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:5D5D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5D5D </span>endp            $M_CHAR_REPLACE
<span style="color:black">TRANGROUP:5D5D
TRANGROUP:5D5E
TRANGROUP:5D5E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5D5E
TRANGROUP:5D5E
TRANGROUP:5D5E </span>proc            $M_BIN2ASC_REPLACE near <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D5E                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:5D5F                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:5D61                 </span><span style="color:navy">cwd
</span><span style="color:black">TRANGROUP:5D62                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_DIVISOR<span style="color:navy">], </span><span style="color:green">16 </span>; [$M_RT+$M_RES_ADDRS.$M_DIVISOR],
<span style="color:black">TRANGROUP:5D62                                         </span>; $M_BASE16
<span style="color:black">TRANGROUP:5D68                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:5D6A                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">20h </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5D6A                                         </span>; not $M_BYTE and $M_SIZE_MASK
<span style="color:black">TRANGROUP:5D6E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF325
</span><span style="color:black">TRANGROUP:5D70                 </span><span style="color:navy">mov     al, [es:di]
</span><span style="color:black">TRANGROUP:5D73                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">0Dh </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5D73                                         </span>; not Sgn_Bin_Type and $M_TYPE_MASK
<span style="color:black">TRANGROUP:5D77                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF326
</span><span style="color:black">TRANGROUP:5D79                 </span><span style="color:navy">test    al, </span><span style="color:green">80h         </span>; Is this number negative?
<span style="color:black">TRANGROUP:5D7B                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF327   </span>; No
<span style="color:black">TRANGROUP:5D7D                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:5D7E                 </span><span style="color:navy">and     al, </span><span style="color:green">7Fh         </span>; Make it positive
<span style="color:black">TRANGROUP:5D80
TRANGROUP:5D80 </span><span style="color:gray">$MIF327</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D80                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_DIVISOR<span style="color:navy">], </span><span style="color:green">10 </span>; [$M_RT+$M_RES_ADDRS.$M_DIVISOR],
<span style="color:black">TRANGROUP:5D80                                         </span>; $M_BASE10
<span style="color:black">TRANGROUP:5D86
TRANGROUP:5D86 </span><span style="color:gray">$MIF326</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D86                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">0Eh </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5D86                                         </span>; not Unsgn_Bin_Type and $M_TYPE_MASK
<span style="color:black">TRANGROUP:5D8A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF330
</span><span style="color:black">TRANGROUP:5D8C                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_DIVISOR<span style="color:navy">], </span><span style="color:green">10 </span>; [$M_RT+$M_RES_ADDRS.$M_DIVISOR],
<span style="color:black">TRANGROUP:5D8C                                         </span>; $M_BASE10
<span style="color:black">TRANGROUP:5D92
TRANGROUP:5D92 </span><span style="color:gray">$MIF330</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D92                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN333
</span><span style="color:black">TRANGROUP:5D94 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5D94
TRANGROUP:5D94 </span><span style="color:gray">$MIF325</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5D94                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">10h </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5D94                                         </span>; not $M_WORD and $M_SIZE_MASK
<span style="color:black">TRANGROUP:5D98                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF333
</span><span style="color:black">TRANGROUP:5D9A                 </span><span style="color:navy">mov     ax, [es:di]
</span><span style="color:black">TRANGROUP:5D9D                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">0Dh </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5D9D                                         </span>; not Sgn_Bin_Type and $M_TYPE_MASK
<span style="color:black">TRANGROUP:5DA1                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF334
</span><span style="color:black">TRANGROUP:5DA3                 </span><span style="color:navy">test    ah, </span><span style="color:green">80h         </span>; Is this number negative?
<span style="color:black">TRANGROUP:5DA6                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF335   </span>; No
<span style="color:black">TRANGROUP:5DA8                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:5DA9                 </span><span style="color:navy">and     ah, </span><span style="color:green">7Fh         </span>; Make it positive
<span style="color:black">TRANGROUP:5DAC
TRANGROUP:5DAC </span><span style="color:gray">$MIF335</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5DAC                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_DIVISOR<span style="color:navy">], </span><span style="color:green">10 </span>; [$M_RT+$M_RES_ADDRS.$M_DIVISOR],$M_BASE10
<span style="color:black">TRANGROUP:5DB2
TRANGROUP:5DB2 </span><span style="color:gray">$MIF334</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5DB2                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">0Eh </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5DB2                                         </span>; not Unsgn_Bin_Type and $M_TYPE_MASK
<span style="color:black">TRANGROUP:5DB6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF338
</span><span style="color:black">TRANGROUP:5DB8                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_DIVISOR<span style="color:navy">], </span><span style="color:green">10 </span>; [$M_RT+$M_RES_ADDRS.$M_DIVISOR],$M_BASE10
<span style="color:black">TRANGROUP:5DBE
TRANGROUP:5DBE </span><span style="color:gray">$MIF338</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5DBE                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN333
</span><span style="color:black">TRANGROUP:5DC0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5DC0
TRANGROUP:5DC0 </span><span style="color:gray">$MIF333</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5DC0                 </span><span style="color:navy">mov     ax, [es:di]
</span><span style="color:black">TRANGROUP:5DC3                 </span><span style="color:navy">mov     dx, [es:di+</span><span style="color:#ff8000">2</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:5DC7                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">0Dh </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5DC7                                         </span>; not Sgn_Bin_Type and $M_TYPE_MASK
<span style="color:black">TRANGROUP:5DCB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF341
</span><span style="color:black">TRANGROUP:5DCD                 </span><span style="color:navy">test    dh, </span><span style="color:green">80h         </span>; Is this number negative?
<span style="color:black">TRANGROUP:5DD0                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF342   </span>; No
<span style="color:black">TRANGROUP:5DD2                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:5DD3                 </span><span style="color:navy">and     dh, </span><span style="color:green">7Fh         </span>; Make it positive
<span style="color:black">TRANGROUP:5DD6
TRANGROUP:5DD6 </span><span style="color:gray">$MIF342</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5DD6                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_DIVISOR<span style="color:navy">], </span><span style="color:green">10 </span>; [$M_RT+$M_RES_ADDRS.$M_DIVISOR],$M_BASE10
<span style="color:black">TRANGROUP:5DDC
TRANGROUP:5DDC </span><span style="color:gray">$MIF341</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5DDC                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">0Eh </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5DDC                                         </span>; not Unsgn_Bin_Type and $M_TYPE_MASK
<span style="color:black">TRANGROUP:5DE0                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MEN333
</span><span style="color:black">TRANGROUP:5DE2                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_DIVISOR<span style="color:navy">], </span><span style="color:green">10 </span>; [$M_RT+$M_RES_ADDRS.$M_DIVISOR],$M_BASE10
<span style="color:black">TRANGROUP:5DE8
TRANGROUP:5DE8 </span><span style="color:gray">$MEN333</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5DE8                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">40h </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG]
<span style="color:black">TRANGROUP:5DE8                                         </span>; (Custom/International flag for thousand separator)
<span style="color:black">TRANGROUP:5DEC                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MEN325
</span><span style="color:black">TRANGROUP:5DEE                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:5DEF                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:5DF0                 </span><span style="color:navy">mov     ah, </span><span style="color:green">38h
</span><span style="color:black">TRANGROUP:5DF2                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:5DF4                 </span><span style="color:navy">lea     dx, [</span>$M_RT_$M_TEMP_BUF<span style="color:navy">] </span>; lea dx,[$M_RT+$M_RES_ADDRS.$M_TEMP_BUF]
<span style="color:black">TRANGROUP:5DF8                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET COUNTRY-DEPENDENT INFORMATION
<span style="color:black">TRANGROUP:5DF8                                         </span>; get current-country info
<span style="color:black">TRANGROUP:5DF8                                         </span>; DS:DX -&gt; buffer for returned info
<span style="color:black">TRANGROUP:5DFA                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$MEN341
</span><span style="color:black">TRANGROUP:5DFC                 </span><span style="color:navy">mov     [byte ptr ds:</span>$M_RT_$M_THOU_SEPARA<span style="color:navy">], </span><span style="color:#ff8000">2Ch </span><span style="color:gray">; &#039;,&#039; </span>;
<span style="color:black">TRANGROUP:5DFC                                         </span>; [$M_RT+$M_COUNTRY_INFO.$M_THOU_SEPARA],&#039;,&#039;
<span style="color:black">TRANGROUP:5E01
TRANGROUP:5E01 </span><span style="color:gray">$MEN341</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5E01                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">0Ah</span><span style="color:navy">]    </span>; [si+$M_SUBLIST_STRUC.$M_S_PAD]
<span style="color:black">TRANGROUP:5E04                 </span><span style="color:navy">mov     di, ax
</span><span style="color:black">TRANGROUP:5E06                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:5E07                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:5E08                 </span><span style="color:navy">mov     [byte ptr si+</span><span style="color:#ff8000">0Ah</span><span style="color:navy">], </span><span style="color:#ff8000">2Ch </span><span style="color:gray">; &#039;,&#039; </span>; [si+$M_SUBLIST_STRUC.$M_S_PAD],&#039;,&#039;
<span style="color:black">TRANGROUP:5E0C                 </span><span style="color:navy">call    </span>$M_CONVERT2ASC
<span style="color:black">TRANGROUP:5E0F                 </span><span style="color:navy">mov     ax, di
</span><span style="color:black">TRANGROUP:5E11                 </span><span style="color:navy">mov     [si+</span><span style="color:#ff8000">0Ah</span><span style="color:navy">], al    </span>; [si+$M_SUBLIST_STRUC.$M_S_PAD],al
<span style="color:black">TRANGROUP:5E14                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN345
</span><span style="color:black">TRANGROUP:5E16 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5E16
TRANGROUP:5E16 </span><span style="color:gray">$MEN325</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5E16                 </span><span style="color:navy">call    </span>$M_CONVERT2ASC
<span style="color:black">TRANGROUP:5E19
TRANGROUP:5E19 </span><span style="color:gray">$MEN345</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5E19                 </span><span style="color:navy">or      bx, bx
</span><span style="color:black">TRANGROUP:5E1B                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF349
</span><span style="color:black">TRANGROUP:5E1D                 </span><span style="color:navy">mov     dx, &#039;</span><span style="color:green">-&#039;         </span>; $M_NEG_SIGN
<span style="color:black">TRANGROUP:5E20                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:5E21
TRANGROUP:5E21 </span><span style="color:gray">$MIF349</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5E21                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:5E22                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5E22 </span>endp            $M_BIN2ASC_REPLACE
<span style="color:black">TRANGROUP:5E22
TRANGROUP:5E23
TRANGROUP:5E23 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5E23
TRANGROUP:5E23
TRANGROUP:5E23 </span>proc            $M_DATE_REPLACE near    <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5E23                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:5E24                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_DIVISOR<span style="color:navy">], </span><span style="color:green">10
</span><span style="color:black">TRANGROUP:5E2A                 </span><span style="color:navy">call    </span>$M_GET_DATE
<span style="color:black">TRANGROUP:5E2D                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:5E2F                 </span><span style="color:navy">cwd
</span><span style="color:black">TRANGROUP:5E30                 </span><span style="color:navy">cmp     [ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [$M_RT+$M_COUNTRY_INFO.$M_DATE_FORMAT]
<span style="color:black">TRANGROUP:5E35                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF351
</span><span style="color:black">TRANGROUP:5E37                 </span><span style="color:navy">call    </span>$M_YEAR
<span style="color:black">TRANGROUP:5E3A                 </span><span style="color:navy">call    </span>$M_CONVERTDATE
<span style="color:black">TRANGROUP:5E3D                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_DATE_SEPARA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:5E41                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5E42                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:5E44                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">5</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:5E47                 </span><span style="color:navy">call    </span>$M_CONVERTDATE
<span style="color:black">TRANGROUP:5E4A                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_DATE_SEPARA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:5E4E                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5E4F                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">4</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_VALUE+2]
<span style="color:black">TRANGROUP:5E52                 </span><span style="color:navy">call    </span>$M_CONVERTDATE
<span style="color:black">TRANGROUP:5E55
TRANGROUP:5E55 </span><span style="color:gray">$MIF351</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5E55                 </span><span style="color:navy">cmp     [ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; [$M_RT+$M_COUNTRY_INFO.$M_DATE_FORMAT]
<span style="color:black">TRANGROUP:5E5A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF353
</span><span style="color:black">TRANGROUP:5E5C                 </span><span style="color:navy">call    </span>$M_YEAR
<span style="color:black">TRANGROUP:5E5F                 </span><span style="color:navy">call    </span>$M_CONVERTDATE
<span style="color:black">TRANGROUP:5E62                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_DATE_SEPARA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:5E66                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5E67                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:5E69                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">4</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:5E6C                 </span><span style="color:navy">call    </span>$M_CONVERTDATE
<span style="color:black">TRANGROUP:5E6F                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_DATE_SEPARA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:5E73                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5E74                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">5</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_VALUE+3]
<span style="color:black">TRANGROUP:5E77                 </span><span style="color:navy">call    </span>$M_CONVERTDATE
<span style="color:black">TRANGROUP:5E7A
TRANGROUP:5E7A </span><span style="color:gray">$MIF353</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5E7A                 </span><span style="color:navy">cmp     [ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">], </span><span style="color:#ff8000">2 </span>; [$M_RT+$M_COUNTRY_INFO.$M_DATE_FORMAT]
<span style="color:black">TRANGROUP:5E7F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF355
</span><span style="color:black">TRANGROUP:5E81                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">5</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_VALUE+3]
<span style="color:black">TRANGROUP:5E84                 </span><span style="color:navy">call    </span>$M_CONVERTDATE
<span style="color:black">TRANGROUP:5E87                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_DATE_SEPARA<span style="color:navy">]
</span><span style="color:black">TRANGROUP:5E8B                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5E8C                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">4</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_VALUE+2]
<span style="color:black">TRANGROUP:5E8F                 </span><span style="color:navy">call    </span>$M_CONVERTDATE
<span style="color:black">TRANGROUP:5E92                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_DATE_SEPARA<span style="color:navy">] </span>;
<span style="color:black">TRANGROUP:5E92                                         </span>; [$M_RT+$M_COUNTRY_INFO.$M_DATE_SEPARA]
<span style="color:black">TRANGROUP:5E96                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5E97                 </span><span style="color:navy">call    </span>$M_YEAR
<span style="color:black">TRANGROUP:5E9A                 </span><span style="color:navy">call    </span>$M_CONVERTDATE
<span style="color:black">TRANGROUP:5E9D
TRANGROUP:5E9D </span><span style="color:gray">$MIF355</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5E9D                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:5E9E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5E9E </span>endp            $M_DATE_REPLACE
<span style="color:black">TRANGROUP:5E9E
TRANGROUP:5E9F
TRANGROUP:5E9F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5E9F
TRANGROUP:5E9F
TRANGROUP:5E9F </span>proc            $M_GET_DATE near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5E9F                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3800h       </span>; DOS_GET_COUNTRY*256
<span style="color:black">TRANGROUP:5EA2                 </span><span style="color:navy">lea     dx, [</span>$M_RT_$M_TEMP_BUF<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_TEMP_BUF]
<span style="color:black">TRANGROUP:5EA6                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET COUNTRY-DEPENDENT INFORMATION
<span style="color:black">TRANGROUP:5EA6                                         </span>; get current-country info
<span style="color:black">TRANGROUP:5EA6                                         </span>; DS:DX -&gt; buffer for returned info
<span style="color:black">TRANGROUP:5EA8                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$MIF357
</span><span style="color:black">TRANGROUP:5EAA                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [$M_RT+$M_COUNTRY_INFO.$M_DATE_FORMAT],0
<span style="color:black">TRANGROUP:5EB0                 </span><span style="color:navy">mov     [byte ptr ds:</span>$M_RT_$M_DATE_SEPARA<span style="color:navy">], </span><span style="color:#ff8000">2Dh </span><span style="color:gray">; &#039;-&#039; </span>;
<span style="color:black">TRANGROUP:5EB0                                         </span>; [$M_RT+$M_COUNTRY_INFO.$M_DATE_SEPARA],&#039;-&#039;
<span style="color:black">TRANGROUP:5EB5
TRANGROUP:5EB5 </span><span style="color:gray">$MIF357</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5EB5                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5EB5 </span>endp            $M_GET_DATE
<span style="color:black">TRANGROUP:5EB5
TRANGROUP:5EB6
TRANGROUP:5EB6 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5EB6
TRANGROUP:5EB6
TRANGROUP:5EB6 </span>proc            $M_YEAR near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5EB6                 </span><span style="color:navy">mov     ax, [si+</span><span style="color:#ff8000">2</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_VALUE]
<span style="color:black">TRANGROUP:5EB9                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">10h </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5EB9                                         </span>; Date_MDY_4 and $M_DATE_MASK
<span style="color:black">TRANGROUP:5EBD                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF359   </span>; not 2 digits year
<span style="color:black">TRANGROUP:5EBF                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">99
</span><span style="color:black">TRANGROUP:5EC2                 </span><span style="color:navy">jbe     short </span><span style="color:gray">$MIF359
</span><span style="color:black">TRANGROUP:5EC4                 </span><span style="color:navy">mov     ax, </span><span style="color:green">99
</span><span style="color:black">TRANGROUP:5EC7
TRANGROUP:5EC7 </span><span style="color:gray">$MIF359</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5EC7                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5EC7 </span>endp            $M_YEAR
<span style="color:black">TRANGROUP:5EC7
TRANGROUP:5EC8
TRANGROUP:5EC8 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5EC8
TRANGROUP:5EC8
TRANGROUP:5EC8 </span>proc            $M_CONVERTDATE near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5EC8                 </span><span style="color:navy">pop     [ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_TEMP_BUF]
<span style="color:black">TRANGROUP:5EC8                                         </span>; Save return address
<span style="color:black">TRANGROUP:5ECC                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_SIZE<span style="color:navy">], cl
</span><span style="color:black">TRANGROUP:5ED0                 </span><span style="color:navy">call    </span>$M_CONVERT2ASC
<span style="color:black">TRANGROUP:5ED3                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:5ED4                 </span><span style="color:navy">cmp     cl, [ds:</span>$M_RT_$M_SIZE<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_SIZE]
<span style="color:black">TRANGROUP:5ED8                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF363
</span><span style="color:black">TRANGROUP:5EDA                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">30h </span><span style="color:gray">; &#039;0&#039;   </span>; $M_TIMEDATE_PAD
<span style="color:black">TRANGROUP:5EDD                 </span><span style="color:navy">push    ax              </span>; Save pad character
<span style="color:black">TRANGROUP:5EDE                 </span><span style="color:navy">inc     cx              </span>; Count it
<span style="color:black">TRANGROUP:5EDF
TRANGROUP:5EDF </span><span style="color:gray">$MIF363</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5EDF                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5EE0                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_TEMP_BUF]
<span style="color:black">TRANGROUP:5EE0                                         </span>; Restore return address
<span style="color:black">TRANGROUP:5EE4                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5EE4 </span>endp            $M_CONVERTDATE
<span style="color:black">TRANGROUP:5EE4
TRANGROUP:5EE5
TRANGROUP:5EE5 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5EE5
TRANGROUP:5EE5
TRANGROUP:5EE5 </span>proc            $M_TIME_REPLACE near    <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5EE5                 </span><span style="color:navy">pop     bp
</span><span style="color:black">TRANGROUP:5EE6                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_DIVISOR<span style="color:navy">], </span><span style="color:green">10 </span>; [$M_RT+$M_RES_ADDRS.$M_DIVISOR],10 ; $M_BASE10
<span style="color:black">TRANGROUP:5EEC                 </span><span style="color:navy">call    </span>$M_GET_TIME
<span style="color:black">TRANGROUP:5EEF                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">1 </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5EEF                                         </span>; Time_Cty_Type and $M_TIME_MASK
<span style="color:black">TRANGROUP:5EF3                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF365
</span><span style="color:black">TRANGROUP:5EF5                 </span><span style="color:navy">cmp     [byte ptr ds:</span>$M_RT_$M_TIME_FORMAT<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; byte [$M_RT+$M_COUNTRY_INFO.$M_TIME_FORMAT]
<span style="color:black">TRANGROUP:5EFA                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF365   </span>; 24 hours time format
<span style="color:black">TRANGROUP:5EFC                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">2</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_VALUE]
<span style="color:black">TRANGROUP:5EFF                 </span><span style="color:navy">cmp     al, </span><span style="color:green">12
</span><span style="color:black">TRANGROUP:5F01                 </span><span style="color:navy">jl      short </span><span style="color:gray">$MLL367
</span><span style="color:black">TRANGROUP:5F03                 </span><span style="color:navy">cmp     al, </span><span style="color:green">23
</span><span style="color:black">TRANGROUP:5F05                 </span><span style="color:navy">jle     short </span><span style="color:gray">$MIF367
</span><span style="color:black">TRANGROUP:5F07
TRANGROUP:5F07 </span><span style="color:gray">$MLL367</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5F07                 </span><span style="color:navy">mov     al, &#039;</span><span style="color:green">a&#039;         </span>; $M_AM
<span style="color:black">TRANGROUP:5F09                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:5F0A                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5F0B                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MIF365
</span><span style="color:black">TRANGROUP:5F0D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5F0D
TRANGROUP:5F0D </span><span style="color:gray">$MIF367</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5F0D                 </span><span style="color:navy">mov     al, &#039;</span><span style="color:green">p&#039;         </span>; $M_PM
<span style="color:black">TRANGROUP:5F0F                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:5F10                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5F11
TRANGROUP:5F11 </span><span style="color:gray">$MIF365</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5F11                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:5F13                 </span><span style="color:navy">cwd                     </span>; dx = 0
<span style="color:black">TRANGROUP:5F14                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">20h </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5F14                                         </span>; Time_HHMMSSHH_Cty and $M_SIZE_MASK
<span style="color:black">TRANGROUP:5F18                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF372
</span><span style="color:black">TRANGROUP:5F1A                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">5</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_VALUE+3]
<span style="color:black">TRANGROUP:5F1D                 </span><span style="color:navy">call    </span>$M_CONVERTTIME
<span style="color:black">TRANGROUP:5F20                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_DECI_SEPARA<span style="color:navy">] </span>; [$M_RT+$M_COUNTRY_INFO.$M_DECI_SEPARA]
<span style="color:black">TRANGROUP:5F24                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5F25
TRANGROUP:5F25 </span><span style="color:gray">$MIF372</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5F25                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">20h </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5F25                                         </span>; Time_HHMMSSHH_Cty and $M_SIZE_MASK
<span style="color:black">TRANGROUP:5F29                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MLL374
</span><span style="color:black">TRANGROUP:5F2B                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">10h </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5F2B                                         </span>; Time_HHMMSS_Cty AND $M_SIZE_MASK
<span style="color:black">TRANGROUP:5F2F                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF374
</span><span style="color:black">TRANGROUP:5F31
TRANGROUP:5F31 </span><span style="color:gray">$MLL374</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5F31                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">4</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_VALUE+2]
<span style="color:black">TRANGROUP:5F34                 </span><span style="color:navy">call    </span>$M_CONVERTTIME
<span style="color:black">TRANGROUP:5F37                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_TIME_SEPARA<span style="color:navy">] </span>; [$M_RT+$M_COUNTRY_INFO.$M_TIME_SEPARA]
<span style="color:black">TRANGROUP:5F3B                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5F3C
TRANGROUP:5F3C </span><span style="color:gray">$MIF374</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5F3C                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">3</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_VALUE+1]
<span style="color:black">TRANGROUP:5F3F                 </span><span style="color:navy">call    </span>$M_CONVERTTIME
<span style="color:black">TRANGROUP:5F42                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_TIME_SEPARA<span style="color:navy">] </span>; [$M_RT+$M_COUNTRY_INFO.$M_TIME_SEPARA]
<span style="color:black">TRANGROUP:5F46                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5F47                 </span><span style="color:navy">mov     al, [si+</span><span style="color:#ff8000">2</span><span style="color:navy">]      </span>; [si+$M_SUBLIST_STRUC.$M_S_VALUE]
<span style="color:black">TRANGROUP:5F4A                 </span><span style="color:navy">test    [byte ptr si+</span><span style="color:#ff8000">7</span><span style="color:navy">], </span><span style="color:green">1 </span>; [si+$M_SUBLIST_STRUC.$M_S_FLAG],
<span style="color:black">TRANGROUP:5F4A                                         </span>; Time_Cty_Type and $M_TIME_MASK
<span style="color:black">TRANGROUP:5F4E                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF376
</span><span style="color:black">TRANGROUP:5F50                 </span><span style="color:navy">cmp     [byte ptr ds:</span>$M_RT_$M_TIME_FORMAT<span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [$M_RT+$M_COUNTRY_INFO.$M_TIME_FORMAT]
<span style="color:black">TRANGROUP:5F55                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF376
</span><span style="color:black">TRANGROUP:5F57                 </span><span style="color:navy">cmp     al, </span><span style="color:green">13          </span>; Is hour less than 12?
<span style="color:black">TRANGROUP:5F59                 </span><span style="color:navy">jl      short </span><span style="color:gray">$MIF378   </span>; no
<span style="color:black">TRANGROUP:5F5B                 </span><span style="color:navy">sub     al, </span><span style="color:green">12          </span>; Set to a 12 hour value
<span style="color:black">TRANGROUP:5F5D
TRANGROUP:5F5D </span><span style="color:gray">$MIF378</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5F5D                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:5F5F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF376
</span><span style="color:black">TRANGROUP:5F61                 </span><span style="color:navy">mov     al, </span><span style="color:green">12          </span>; Set to a 12 hour value
<span style="color:black">TRANGROUP:5F63
TRANGROUP:5F63 </span><span style="color:gray">$MIF376</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5F63                 </span><span style="color:navy">call    </span>$M_CONVERT2ASC
<span style="color:black">TRANGROUP:5F66                 </span><span style="color:navy">push    bp
</span><span style="color:black">TRANGROUP:5F67                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5F67 </span>endp            $M_TIME_REPLACE
<span style="color:black">TRANGROUP:5F67
TRANGROUP:5F68
TRANGROUP:5F68 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5F68
TRANGROUP:5F68
TRANGROUP:5F68 </span>proc            $M_GET_TIME near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5F68                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3800h       </span>; DOS_GET_COUNTRY*256
<span style="color:black">TRANGROUP:5F6B                 </span><span style="color:navy">lea     dx, [</span>$M_RT_$M_TEMP_BUF<span style="color:navy">] </span>; lea dx,[$M_RT+$M_RES_ADDRS.$M_TEMP_BUF]
<span style="color:black">TRANGROUP:5F6F                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ - GET COUNTRY-DEPENDENT INFORMATION
<span style="color:black">TRANGROUP:5F6F                                         </span>; get current-country info
<span style="color:black">TRANGROUP:5F6F                                         </span>; DS:DX -&gt; buffer for returned info
<span style="color:black">TRANGROUP:5F71                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$MIF384
</span><span style="color:black">TRANGROUP:5F73                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_TIME_FORMAT<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; [$M_RT+$M_COUNTRY_INFO.$M_TIME_FORMAT],
<span style="color:black">TRANGROUP:5F73                                         </span>; $M_DEF_TIME_FORM
<span style="color:black">TRANGROUP:5F79                 </span><span style="color:navy">mov     [byte ptr ds:</span>$M_RT_$M_TIME_SEPARA<span style="color:navy">], </span><span style="color:#ff8000">3Ah </span><span style="color:gray">; &#039;:&#039; </span>;
<span style="color:black">TRANGROUP:5F79                                         </span>; [$M_RT+$M_COUNTRY_INFO.$M_TIME_SEPARA],
<span style="color:black">TRANGROUP:5F79                                         </span>; $M_DEF_TIME_SEP
<span style="color:black">TRANGROUP:5F7E                 </span><span style="color:navy">mov     [byte ptr ds:</span>$M_RT_$M_DECI_SEPARA<span style="color:navy">], </span><span style="color:#ff8000">2Eh </span><span style="color:gray">; &#039;.&#039; </span>;
<span style="color:black">TRANGROUP:5F7E                                         </span>; [$M_RT+$M_COUNTRY_INFO.$M_DECI_SEPARA],
<span style="color:black">TRANGROUP:5F7E                                         </span>; $M_DEF_DECI_SEP
<span style="color:black">TRANGROUP:5F83
TRANGROUP:5F83 </span><span style="color:gray">$MIF384</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5F83                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5F83 </span>endp            $M_GET_TIME
<span style="color:black">TRANGROUP:5F83
TRANGROUP:5F84
TRANGROUP:5F84 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5F84
TRANGROUP:5F84
TRANGROUP:5F84 </span>proc            $M_CONVERTTIME near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5F84                 </span><span style="color:navy">pop     [ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_TEMP_BUF]
<span style="color:black">TRANGROUP:5F84                                         </span>; Save return address
<span style="color:black">TRANGROUP:5F88                 </span><span style="color:navy">mov     [ds:</span>$M_RT_$M_SIZE<span style="color:navy">], cl
</span><span style="color:black">TRANGROUP:5F8C                 </span><span style="color:navy">call    </span>$M_CONVERT2ASC
<span style="color:black">TRANGROUP:5F8F                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:5F90                 </span><span style="color:navy">cmp     cl, [ds:</span>$M_RT_$M_SIZE<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_SIZE]
<span style="color:black">TRANGROUP:5F94                 </span><span style="color:navy">jnz     short </span><span style="color:gray">$MIF386
</span><span style="color:black">TRANGROUP:5F96                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">30h </span><span style="color:gray">; &#039;0&#039;
</span><span style="color:black">TRANGROUP:5F99                 </span><span style="color:navy">push    ax              </span>; Save pas character
<span style="color:black">TRANGROUP:5F9A                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5F9B
TRANGROUP:5F9B </span><span style="color:gray">$MIF386</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5F9B                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:5F9C                 </span><span style="color:navy">push    [ds:</span>$M_RT_$M_TEMP_BUF<span style="color:navy">] </span>; [$M_RT+$M_RES_ADDRS.$M_TEMP_BUF]
<span style="color:black">TRANGROUP:5F9C                                         </span>; Restore return address
<span style="color:black">TRANGROUP:5FA0                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5FA0 </span>endp            $M_CONVERTTIME
<span style="color:black">TRANGROUP:5FA0
TRANGROUP:5FA1
TRANGROUP:5FA1 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5FA1
TRANGROUP:5FA1
TRANGROUP:5FA1 </span>proc            $M_WAIT_FOR_INPUT near  <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5FA1                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:5FA2                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:5FA3                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:5FA4                 </span><span style="color:navy">cmp     dl, </span><span style="color:green">0C0h        </span>; DOS_CLR_KEYB_BUF_MASK
<span style="color:black">TRANGROUP:5FA7                 </span><span style="color:navy">jbe     short </span><span style="color:gray">$MIF388
</span><span style="color:black">TRANGROUP:5FA9                 </span><span style="color:navy">mov     al, dl
</span><span style="color:black">TRANGROUP:5FAB                 </span><span style="color:navy">and     al, </span><span style="color:green">0Fh         </span>; LOW_NIB_MASK
<span style="color:black">TRANGROUP:5FAD                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0Ch         </span>; DOS_CLR_KEYB_BUF
<span style="color:black">TRANGROUP:5FAF                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MEN388
</span><span style="color:black">TRANGROUP:5FB1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5FB1
TRANGROUP:5FB1 </span><span style="color:gray">$MIF388</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5FB1                 </span><span style="color:navy">mov     ah, dl
</span><span style="color:black">TRANGROUP:5FB3
TRANGROUP:5FB3 </span><span style="color:gray">$MEN388</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5FB3                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:5FB4                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:5FB5                 </span><span style="color:navy">mov     dx, di
</span><span style="color:black">TRANGROUP:5FB7                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS -
<span style="color:black">TRANGROUP:5FB9                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:5FBA                 </span><span style="color:navy">cmp     dl, </span><span style="color:#ff8000">0Ah         </span>; DOS_BUF_KEYB_INP
<span style="color:black">TRANGROUP:5FBD                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:5FBE                 </span><span style="color:navy">jz      short </span><span style="color:gray">$MIF391
</span><span style="color:black">TRANGROUP:5FC0                 </span><span style="color:navy">call    </span>$M_IS_IT_DBCS   ; Is this character DBCS?
<span style="color:black">TRANGROUP:5FC3                 </span><span style="color:navy">jnb     short </span><span style="color:gray">$MIF392   </span>; no
<span style="color:black">TRANGROUP:5FC5                 </span><span style="color:navy">mov     cl, al
</span><span style="color:black">TRANGROUP:5FC7                 </span><span style="color:navy">mov     ah, dl
</span><span style="color:black">TRANGROUP:5FC9                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS -
<span style="color:black">TRANGROUP:5FCB                 </span><span style="color:navy">mov     ah, cl          </span>; Retrieve first character  AX = xxxx
<span style="color:black">TRANGROUP:5FCD                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:5FCE                 </span><span style="color:navy">jmp     short </span><span style="color:gray">$MIF391
</span><span style="color:black">TRANGROUP:5FD0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5FD0
TRANGROUP:5FD0 </span><span style="color:gray">$MIF392</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5FD0                 </span><span style="color:navy">mov     ah, </span><span style="color:#ff8000">0           </span>; AX = 00xx where xx is SBCS
<span style="color:black">TRANGROUP:5FD2
TRANGROUP:5FD2 </span><span style="color:gray">$MIF391</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5FD2                 </span><span style="color:navy">jb      short </span><span style="color:gray">$MIF396
</span><span style="color:black">TRANGROUP:5FD4                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:5FD5                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:5FD6                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5FD7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:5FD7
TRANGROUP:5FD7 </span><span style="color:gray">$MIF396</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5FD7                 </span><span style="color:navy">add     sp, </span><span style="color:green">4
</span><span style="color:black">TRANGROUP:5FDA                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:5FDB                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:5FDB </span>endp            $M_WAIT_FOR_INPUT
<span style="color:black">TRANGROUP:5FDB
TRANGROUP:5FDC
TRANGROUP:5FDC </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:5FDC
TRANGROUP:5FDC
TRANGROUP:5FDC </span>proc            InitVar near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:5FDC                 </span><span style="color:navy">push    ax              </span>; initializes all the variables used in ParseVar
<span style="color:black">TRANGROUP:5FDC                                         </span>; and HideUMBs
<span style="color:black">TRANGROUP:5FDD                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:5FDE                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:5FDF                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:5FE0                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:5FE4                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:5FE6                 </span><span style="color:navy">mov     [es:</span>fUmbTiny<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:5FEA                 </span><span style="color:navy">mov     [es:</span>fInHigh<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:5FEE                 </span><span style="color:navy">mov     [es:</span>SegLoad<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:5FF2                 </span><span style="color:navy">mov     [es:</span>UmbLoad<span style="color:navy">], </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:5FF8                 </span><span style="color:navy">mov     [es:</span>fm_argc<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:5FFC                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:5FFD                 </span><span style="color:navy">mov     cx, </span><span style="color:green">16
</span><span style="color:black">TRANGROUP:6000                 </span><span style="color:navy">mov     di, offset </span>MsgBuffer ; UmbUsed
<span style="color:black">TRANGROUP:6003                 </span><span style="color:navy">rep stosb
</span><span style="color:black">TRANGROUP:6005                 </span><span style="color:navy">mov     cx, </span><span style="color:green">16          </span>; MAXUMB
<span style="color:black">TRANGROUP:6008                 </span><span style="color:navy">mov     di, offset </span>UmbSize
<span style="color:black">TRANGROUP:600B                 </span><span style="color:navy">rep stosw
</span><span style="color:black">TRANGROUP:600D                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:600E                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:600F                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:6010                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:6011                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6011 </span>endp            InitVar
<span style="color:black">TRANGROUP:6011
TRANGROUP:6012
TRANGROUP:6012 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6012
TRANGROUP:6012
TRANGROUP:6012 </span>proc            FixMem near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6012                 </span><span style="color:navy">push    ax              </span>; scans the upper memory chain
<span style="color:black">TRANGROUP:6012                                         </span>; and concatenates adjacent free MCBs
<span style="color:black">TRANGROUP:6013                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:6014                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:6015                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:6016                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:6017                 </span><span style="color:navy">call    </span>fm_link
<span style="color:black">TRANGROUP:601A                 </span><span style="color:navy">call    </span>UmbHead
<span style="color:black">TRANGROUP:601D                 </span><span style="color:navy">jb      short </span><span style="color:gray">fmX
</span><span style="color:black">TRANGROUP:601F                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:6021                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:6023                 </span><span style="color:navy">mov     cx, dx
</span><span style="color:black">TRANGROUP:6025                 </span><span style="color:navy">inc     dx
</span><span style="color:black">TRANGROUP:6026
TRANGROUP:6026 </span><span style="color:gray">fm10</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6026                 </span><span style="color:navy">mov     al, [es:</span><span style="color:green">0</span><span style="color:navy">]      </span>; [es:arena_signature]
<span style="color:black">TRANGROUP:602A                 </span><span style="color:navy">mov     bx, [es:</span><span style="color:green">1</span><span style="color:navy">]      </span>; [es:arena_owner]
<span style="color:black">TRANGROUP:602F                 </span><span style="color:navy">or      bx, dx          </span>; dx was owner of previous MCB
<span style="color:black">TRANGROUP:6031                 </span><span style="color:navy">jnz     short </span><span style="color:gray">fm30      </span>; If not both zero, don&#039;t cat.
<span style="color:black">TRANGROUP:6033                 </span><span style="color:navy">mov     bx, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:arena_size]
<span style="color:black">TRANGROUP:6038                 </span><span style="color:navy">mov     es, cx          </span>; Go back to prev MCB&#039;s address
<span style="color:black">TRANGROUP:603A                 </span>assume es:RESGROUP
<span style="color:black">TRANGROUP:603A                 </span><span style="color:navy">mov     [es:</span><span style="color:green">0</span><span style="color:navy">], al      </span>; &amp; move the SECOND sig here
<span style="color:black">TRANGROUP:603E                 </span><span style="color:navy">add     bx, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; Size += first MCB&#039;s size
<span style="color:black">TRANGROUP:6043                 </span><span style="color:navy">add     bx, </span><span style="color:#ff8000">1           </span>; And add one for the header
<span style="color:black">TRANGROUP:6046                 </span><span style="color:navy">mov     [es:</span><span style="color:green">3</span><span style="color:navy">], bx      </span>; Write the size
<span style="color:black">TRANGROUP:604B
TRANGROUP:604B </span><span style="color:gray">fm30</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:604B                 </span><span style="color:navy">mov     cx, es
</span><span style="color:black">TRANGROUP:604D                 </span><span style="color:navy">mov     dx, [es:</span><span style="color:green">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:6052                 </span><span style="color:navy">mov     bx, es
</span><span style="color:black">TRANGROUP:6054                 </span><span style="color:navy">add     bx, [es:</span><span style="color:green">3</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:6059                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:605A                 </span><span style="color:navy">mov     es, bx
</span><span style="color:black">TRANGROUP:605C                 </span>assume es:nothing
<span style="color:black">TRANGROUP:605C                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">5Ah </span><span style="color:gray">; &#039;Z&#039;   </span>; arena_signature_end
<span style="color:black">TRANGROUP:605E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">fm10
</span><span style="color:black">TRANGROUP:6060
TRANGROUP:6060 </span><span style="color:gray">fmX</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6060                 </span><span style="color:navy">call    </span>fm_unlink
<span style="color:black">TRANGROUP:6063                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:6064                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:6065                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:6066                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:6067                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:6068                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6068 </span>endp            FixMem
<span style="color:black">TRANGROUP:6068
TRANGROUP:6069
TRANGROUP:6069 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6069
TRANGROUP:6069
TRANGROUP:6069 </span>proc            fm_link near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6069                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5802h       </span>; links UMBs not already linked in
<span style="color:black">TRANGROUP:606C                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">TRANGROUP:606C                                         </span>; AL = function code: (DOS 5beta) get UMB link state
<span style="color:black">TRANGROUP:606E                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:606F                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:6073                 </span><span style="color:navy">mov     [es:</span>fm_umb<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:6077                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:6078                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">5803h
</span><span style="color:black">TRANGROUP:607B                 </span><span style="color:navy">mov     bx, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:607E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">TRANGROUP:607E                                         </span>; AL = function code: (DOS 5beta) set UMB link state
<span style="color:black">TRANGROUP:6080                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6080 </span>endp            fm_link
<span style="color:black">TRANGROUP:6080
TRANGROUP:6081
TRANGROUP:6081 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6081
TRANGROUP:6081
TRANGROUP:6081 </span>proc            fm_unlink near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6081                 </span><span style="color:navy">xor     bx, bx          </span>; unlinks UMBs if fm_umb is set to 0
<span style="color:black">TRANGROUP:6083                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:6084                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:6088                 </span><span style="color:navy">mov     bl, [ds:</span>fm_umb<span style="color:navy">]
</span><span style="color:black">TRANGROUP:608C                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:608D                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5803h
</span><span style="color:black">TRANGROUP:6090                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">TRANGROUP:6090                                         </span>; AL = function code: (DOS 5beta) set UMB link state
<span style="color:black">TRANGROUP:6092                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6092 </span>endp            fm_unlink
<span style="color:black">TRANGROUP:6092
TRANGROUP:6093
TRANGROUP:6093 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6093
TRANGROUP:6093
TRANGROUP:6093 </span>proc            ParseVar near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6093                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:6094                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:6095                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:6096                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:6097                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:6098                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:6099
TRANGROUP:6099 </span><span style="color:gray">pv10</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6099                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:609A                 </span><span style="color:navy">call    </span>isWhite
<span style="color:black">TRANGROUP:609D                 </span><span style="color:navy">jz      short </span><span style="color:gray">pv10      </span>; ES:SI==&quot; /L...&quot;--keep eating.
<span style="color:black">TRANGROUP:609F                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">/&#039;
</span><span style="color:black">TRANGROUP:60A1                 </span><span style="color:navy">jz      short </span><span style="color:gray">pv20      </span>; ES:SI==&quot;/L...&quot;--go process a switch
<span style="color:black">TRANGROUP:60A3                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:60A4                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:60A5                 </span><span style="color:navy">jmp     short </span><span style="color:gray">pvX
</span><span style="color:black">TRANGROUP:60A7 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:60A7
TRANGROUP:60A7 </span><span style="color:gray">pv20</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:60A7                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:60A8                 </span><span style="color:navy">and     al, </span><span style="color:green">0DFh        </span>; make it uppercase
<span style="color:black">TRANGROUP:60AA                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">S&#039;
</span><span style="color:black">TRANGROUP:60AC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">pv30
</span><span style="color:black">TRANGROUP:60AE                 </span><span style="color:navy">call    </span>incArgc         ; If it&#039;s /S, it&#039;s another arg for LH to skip.
<span style="color:black">TRANGROUP:60B1                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:60B2                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:60B6                 </span><span style="color:navy">mov     [es:</span>fUmbTiny<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; /S, so ES:SI==&quot;  /L...&quot; or &quot; module opts&quot;, or
<span style="color:black">TRANGROUP:60BC                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:60BD                 </span><span style="color:navy">jmp     short </span><span style="color:gray">pv10
</span><span style="color:black">TRANGROUP:60BF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:60BF
TRANGROUP:60BF </span><span style="color:gray">pv30</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:60BF                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">L&#039;         </span>; If it&#039;s not &#039;L&#039; either, then it&#039;s a bad switch!
<span style="color:black">TRANGROUP:60C1                 </span><span style="color:navy">jnz     short </span><span style="color:gray">pvE1
</span><span style="color:black">TRANGROUP:60C3                 </span><span style="color:navy">call    </span>incArgc
<span style="color:black">TRANGROUP:60C6                 </span><span style="color:navy">call    </span>parseL
<span style="color:black">TRANGROUP:60C9                 </span><span style="color:navy">jnb     short </span><span style="color:gray">pv10      </span>; If no carry, go back and look for more
<span style="color:black">TRANGROUP:60CB                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:60CC                 </span><span style="color:navy">jmp     short </span><span style="color:gray">pvErr     </span>; AX has already been set by parseL
<span style="color:black">TRANGROUP:60CE </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:60CE
TRANGROUP:60CE </span><span style="color:gray">pvE1</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:60CE                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">3           </span>; PV_InvSwt
<span style="color:black">TRANGROUP:60D1
TRANGROUP:60D1 </span><span style="color:gray">pvErr</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:60D1                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:60D2                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:60D3                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:60D4
TRANGROUP:60D4 </span><span style="color:gray">pvX</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:60D4                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:60D5                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:60D6                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:60D7                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:60D7 </span>endp            ParseVar
<span style="color:black">TRANGROUP:60D7
TRANGROUP:60D8
TRANGROUP:60D8 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:60D8
TRANGROUP:60D8
TRANGROUP:60D8 </span>proc            parseL near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:60D8                 </span><span style="color:navy">lodsb                   </span>; parses &quot;:nnnn[,nnnn][;nnnn[,nnnn]]*&quot; for ParseVar
<span style="color:black">TRANGROUP:60D9                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">:&#039;
</span><span style="color:black">TRANGROUP:60DB                 </span><span style="color:navy">jnz     short </span><span style="color:gray">plE1
</span><span style="color:black">TRANGROUP:60DD
TRANGROUP:60DD </span><span style="color:gray">pl10</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:60DD                 </span><span style="color:navy">call    </span>GetXNum         ; After this, &#039;tis &quot;,size&quot; or &quot;;umb&quot; or &quot; mod&quot;
<span style="color:black">TRANGROUP:60E0                 </span><span style="color:navy">jb      short </span><span style="color:gray">plE2
</span><span style="color:black">TRANGROUP:60E2                 </span><span style="color:navy">call    </span>convUMB         ; Convert any address to a UMB number
<span style="color:black">TRANGROUP:60E5                 </span><span style="color:navy">mov     cl, al
</span><span style="color:black">TRANGROUP:60E7                 </span><span style="color:navy">call    </span>stowUMB         ; Mark this UMB # as used
<span style="color:black">TRANGROUP:60EA                 </span><span style="color:navy">jb      short </span><span style="color:gray">plE2
</span><span style="color:black">TRANGROUP:60EC                 </span><span style="color:navy">call    </span>incArgc         ; Each UMB number is another arg for LH to skip
<span style="color:black">TRANGROUP:60EF                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:60F0                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">;&#039;         </span>; Did &quot;umb;&quot; ?
<span style="color:black">TRANGROUP:60F2                 </span><span style="color:navy">jz      short </span><span style="color:gray">pl10      </span>; Yep: go back and get another UMB.
<span style="color:black">TRANGROUP:60F4                 </span><span style="color:navy">call    </span>isWhite         ; Did &quot;umb &quot; ?
<span style="color:black">TRANGROUP:60F7                 </span><span style="color:navy">jz      short </span><span style="color:gray">plX       </span>; Yep: return (it&#039;ll go back to whitespace)
<span style="color:black">TRANGROUP:60F9                 </span><span style="color:navy">call    </span>isEOL           ; Did &quot;umb&quot; ?
<span style="color:black">TRANGROUP:60FC                 </span><span style="color:navy">jz      short </span><span style="color:gray">plSwX     </span>; If so, backup and exit like everything&#039;s ok
<span style="color:black">TRANGROUP:60FE                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">/&#039;         </span>; Did &quot;umb/&quot; ? (as in, &quot;/L:1,100;2/S&quot;)
<span style="color:black">TRANGROUP:6100                 </span><span style="color:navy">jz      short </span><span style="color:gray">plSwX     </span>; If so, back up ES:SI one character and return
<span style="color:black">TRANGROUP:6102                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">,&#039;         </span>;  Did &quot;umb,&quot; ?
<span style="color:black">TRANGROUP:6104                 </span><span style="color:navy">jnz     short </span><span style="color:gray">plE1      </span>; Just what the heck DID they do? Return error.
<span style="color:black">TRANGROUP:6106                 </span><span style="color:navy">call    </span>GetXNum         ; Stop on &quot;size;&quot; or &quot;size &quot; or anything else
<span style="color:black">TRANGROUP:6109                 </span><span style="color:navy">jb      short </span><span style="color:gray">plE1      </span>; And error if it&#039;s a bad size.
<span style="color:black">TRANGROUP:610B                 </span><span style="color:navy">call    </span>toPara          ; Convert from bytes to paragraphs
<span style="color:black">TRANGROUP:610E                 </span><span style="color:navy">call    </span>stowSiz         ; CL still has the UMB number for this routine
<span style="color:black">TRANGROUP:6111                 </span><span style="color:navy">call    </span>incArgc         ; Each UMB size is another arg for LH to skip
<span style="color:black">TRANGROUP:6114                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:6115                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">;&#039;         </span>; They did &quot;umb,size;&quot;, so get another UMB.
<span style="color:black">TRANGROUP:6117                 </span><span style="color:navy">jz      short </span><span style="color:gray">pl10
</span><span style="color:black">TRANGROUP:6119                 </span><span style="color:navy">call    </span>isWhite         ; Did it end with whitespace?
<span style="color:black">TRANGROUP:611C                 </span><span style="color:navy">jz      short </span><span style="color:gray">plX       </span>; If so, we&#039;re done here--go back.
<span style="color:black">TRANGROUP:611E                 </span><span style="color:navy">call    </span>isEOL           ; Did they do &quot;umb,size&quot; and end??? (stupid)
<span style="color:black">TRANGROUP:6121                 </span><span style="color:navy">jz      short </span><span style="color:gray">plSwX     </span>; If so, backup and exit like everything&#039;s ok
<span style="color:black">TRANGROUP:6123                 </span><span style="color:navy">cmp     al, &#039;</span><span style="color:green">/&#039;         </span>; Did they do &quot;umb,size/&quot; ?
<span style="color:black">TRANGROUP:6125                 </span><span style="color:navy">jz      short </span><span style="color:gray">plSwX     </span>; If so, again, we&#039;re done here.
<span style="color:black">TRANGROUP:6127
TRANGROUP:6127 </span><span style="color:gray">plE1</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6127                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1           </span>; PV_InvArg
<span style="color:black">TRANGROUP:612A                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:612B                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:612C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:612D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:612D
TRANGROUP:612D </span><span style="color:gray">plE2</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:612D                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2           </span>; PV_BadUMB
<span style="color:black">TRANGROUP:6130                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:6131                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6132 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6132
TRANGROUP:6132 </span><span style="color:gray">plSwX</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6132                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:6133
TRANGROUP:6133 </span><span style="color:gray">plX</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6133                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:6134                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6134 </span>endp            parseL
<span style="color:black">TRANGROUP:6134
TRANGROUP:6135
TRANGROUP:6135 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6135
TRANGROUP:6135
TRANGROUP:6135 </span>proc            incArgc near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6135                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:6136                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:6137                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:613B                 </span><span style="color:navy">mov     al, [ds:</span>fm_argc<span style="color:navy">]
</span><span style="color:black">TRANGROUP:613E                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:613F                 </span><span style="color:navy">inc     al
</span><span style="color:black">TRANGROUP:6141                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:6142                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:6146                 </span><span style="color:navy">mov     [es:</span>fm_argc<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:614A                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:614B                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:614C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:614C </span>endp            incArgc
<span style="color:black">TRANGROUP:614C
TRANGROUP:614D
TRANGROUP:614D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:614D
TRANGROUP:614D
TRANGROUP:614D </span>proc            isEOL near              <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:614D                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:614F                 </span><span style="color:navy">jz      short </span><span style="color:gray">ieX
</span><span style="color:black">TRANGROUP:6151                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh         </span>; CR
<span style="color:black">TRANGROUP:6153                 </span><span style="color:navy">jz      short </span><span style="color:gray">ieX
</span><span style="color:black">TRANGROUP:6155                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Ah         </span>; LF
<span style="color:black">TRANGROUP:6157
TRANGROUP:6157 </span><span style="color:gray">ieX</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6157                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6157 </span>endp            isEOL
<span style="color:black">TRANGROUP:6157
TRANGROUP:6158
TRANGROUP:6158 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6158
TRANGROUP:6158
TRANGROUP:6158 </span>proc            isWhite near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6158                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:615A                 </span><span style="color:navy">jz      short </span><span style="color:gray">iwX
</span><span style="color:black">TRANGROUP:615C                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Dh </span><span style="color:gray">; &#039;=&#039;
</span><span style="color:black">TRANGROUP:615E                 </span><span style="color:navy">jz      short </span><span style="color:gray">iwX
</span><span style="color:black">TRANGROUP:6160                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">9           </span>; TAB
<span style="color:black">TRANGROUP:6162
TRANGROUP:6162 </span><span style="color:gray">iwX</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6162                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6162 </span>endp            isWhite
<span style="color:black">TRANGROUP:6162
TRANGROUP:6163
TRANGROUP:6163 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6163
TRANGROUP:6163
TRANGROUP:6163 </span>proc            unMarkUMB near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6163                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:6164                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:6165                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:6166                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:6167                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:616B                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:black">TRANGROUP:616D                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:616F                 </span><span style="color:navy">mov     [es:</span>MsgBuffer<span style="color:navy">+bx], </span><span style="color:#ff8000">0 </span>; [es:bx+UmbUsed] = [es:bx+MsgBuffer]
<span style="color:black">TRANGROUP:6175                 </span><span style="color:navy">cmp     [es:</span>UmbLoad<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:617A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">umu10
</span><span style="color:black">TRANGROUP:617C                 </span><span style="color:navy">mov     [es:</span>UmbLoad<span style="color:navy">], </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:6182
TRANGROUP:6182 </span><span style="color:gray">umu10</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6182                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:6183                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:6184                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:6185                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:6186                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6186 </span>endp            unMarkUMB
<span style="color:black">TRANGROUP:6186
TRANGROUP:6187
TRANGROUP:6187 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6187
TRANGROUP:6187
TRANGROUP:6187 </span>proc            stowUMB near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6187                 </span><span style="color:navy">cmp     al, </span><span style="color:green">16          </span>; MAXUMB
<span style="color:black">TRANGROUP:6189                 </span><span style="color:navy">jb      short </span><span style="color:gray">su10
</span><span style="color:black">TRANGROUP:618B                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:618C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:618D </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:618D
TRANGROUP:618D </span><span style="color:gray">su10</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:618D                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:618E                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:618F                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:6190                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:6191                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:6192                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:6196                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:619A                 </span><span style="color:navy">cmp     [ds:</span>UmbLoad<span style="color:navy">], </span><span style="color:#ff8000">0FFh </span>; UNSPECIFIED
<span style="color:black">TRANGROUP:619F                 </span><span style="color:navy">jnz     short </span><span style="color:gray">su20
</span><span style="color:black">TRANGROUP:61A1                 </span><span style="color:navy">mov     [ds:</span>UmbLoad<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:61A4
TRANGROUP:61A4 </span><span style="color:gray">su20</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:61A4                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:61A6                 </span><span style="color:navy">jz      short </span><span style="color:gray">su30
</span><span style="color:black">TRANGROUP:61A8                 </span><span style="color:navy">mov     bl, al
</span><span style="color:black">TRANGROUP:61AA                 </span><span style="color:navy">xor     bh, bh
</span><span style="color:black">TRANGROUP:61AC                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:61AF                 </span><span style="color:navy">xchg    al, [es:</span>MsgBuffer<span style="color:navy">+bx] </span>; [es:bx+UmbUsed] = [es:bx+MsgBuffer]
<span style="color:black">TRANGROUP:61B4                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:61B6                 </span><span style="color:navy">jz      short </span><span style="color:gray">su30
</span><span style="color:black">TRANGROUP:61B8                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:61B9
TRANGROUP:61B9 </span><span style="color:gray">su30</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:61B9                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:61BA                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:61BB                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:61BC                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:61BD                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:61BE                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:61BE </span>endp            stowUMB
<span style="color:black">TRANGROUP:61BE
TRANGROUP:61BF
TRANGROUP:61BF </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:61BF
TRANGROUP:61BF
TRANGROUP:61BF </span>proc            stowSiz near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:61BF                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:61C0                 </span><span style="color:navy">push    di
</span><span style="color:black">TRANGROUP:61C1                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:61C2                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:61C6                 </span><span style="color:navy">mov     bl, cl
</span><span style="color:black">TRANGROUP:61C8                 </span><span style="color:navy">mov     bh, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:61CA                 </span><span style="color:navy">shl     bl, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:61CC                 </span><span style="color:navy">mov     [es:</span>UmbSize<span style="color:navy">+bx], ax
</span><span style="color:black">TRANGROUP:61D1                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:61D2                 </span><span style="color:navy">pop     di
</span><span style="color:black">TRANGROUP:61D3                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:61D4                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:61D4 </span>endp            stowSiz
<span style="color:black">TRANGROUP:61D4
TRANGROUP:61D4 </span><span style="color:gray">; ---------------------------------------------------------------------------
TRANGROUP:61D5 </span>gnradix         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:black">TRANGROUP:61D7
TRANGROUP:61D7 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:61D7
TRANGROUP:61D7
TRANGROUP:61D7 </span>proc            toDigit near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:61D7                 </span><span style="color:navy">cmp     [ds:</span>gnradix<span style="color:navy">], </span><span style="color:green">16
</span><span style="color:black">TRANGROUP:61DC                 </span><span style="color:navy">jnz     short </span><span style="color:gray">td20
</span><span style="color:black">TRANGROUP:61DE                 </span><span style="color:navy">cmp     cl, &#039;</span><span style="color:green">a&#039;
</span><span style="color:black">TRANGROUP:61E1                 </span><span style="color:navy">jb      short </span><span style="color:gray">td10
</span><span style="color:black">TRANGROUP:61E3                 </span><span style="color:navy">cmp     cl, &#039;</span><span style="color:green">f&#039;
</span><span style="color:black">TRANGROUP:61E6                 </span><span style="color:navy">ja      short </span><span style="color:gray">tdE
</span><span style="color:black">TRANGROUP:61E8                 </span><span style="color:navy">sub     cl, </span><span style="color:green">57h         </span>; &#039;a&#039;-10
<span style="color:black">TRANGROUP:61EB                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:61EC </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:61EC
TRANGROUP:61EC </span><span style="color:gray">td10</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:61EC                 </span><span style="color:navy">cmp     cl, &#039;</span><span style="color:green">A&#039;
</span><span style="color:black">TRANGROUP:61EF                 </span><span style="color:navy">jb      short </span><span style="color:gray">td20
</span><span style="color:black">TRANGROUP:61F1                 </span><span style="color:navy">cmp     cl, &#039;</span><span style="color:green">F&#039;
</span><span style="color:black">TRANGROUP:61F4                 </span><span style="color:navy">ja      short </span><span style="color:gray">tdE
</span><span style="color:black">TRANGROUP:61F6                 </span><span style="color:navy">sub     cl, </span><span style="color:green">37h         </span>; &#039;A&#039;-10
<span style="color:black">TRANGROUP:61F9                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:61FA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:61FA
TRANGROUP:61FA </span><span style="color:gray">td20</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:61FA                 </span><span style="color:navy">cmp     cl, &#039;</span><span style="color:green">0&#039;
</span><span style="color:black">TRANGROUP:61FD                 </span><span style="color:navy">jb      short </span><span style="color:gray">tdE
</span><span style="color:black">TRANGROUP:61FF                 </span><span style="color:navy">cmp     cl, &#039;</span><span style="color:green">9&#039;
</span><span style="color:black">TRANGROUP:6202                 </span><span style="color:navy">ja      short </span><span style="color:gray">tdE
</span><span style="color:black">TRANGROUP:6204                 </span><span style="color:navy">sub     cl, </span><span style="color:green">30h         </span>; &#039;0&#039;
<span style="color:black">TRANGROUP:6207                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6208 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6208
TRANGROUP:6208 </span><span style="color:gray">tdE</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6208                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:6209                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6209 </span>endp            toDigit
<span style="color:black">TRANGROUP:6209
TRANGROUP:620A
TRANGROUP:620A </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:620A
TRANGROUP:620A
TRANGROUP:620A </span>proc            GetXNum near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:620A                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:620B                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:620C                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:620D                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:620E                 </span><span style="color:navy">xor     ax, ax
</span><span style="color:black">TRANGROUP:6210                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:6212                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:6214                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:6216                 </span><span style="color:navy">mov     [ds:</span>gnradix<span style="color:navy">], </span><span style="color:green">10
</span><span style="color:black">TRANGROUP:621C                 </span><span style="color:navy">mov     cl, [es:si]
</span><span style="color:black">TRANGROUP:621F                 </span><span style="color:navy">call    </span>toDigit
<span style="color:black">TRANGROUP:6222                 </span><span style="color:navy">jb      short </span><span style="color:gray">gxnE
</span><span style="color:black">TRANGROUP:6224                 </span><span style="color:navy">or      cl, cl
</span><span style="color:black">TRANGROUP:6226                 </span><span style="color:navy">jnz     short </span><span style="color:gray">gxn20
</span><span style="color:black">TRANGROUP:6228                 </span><span style="color:navy">mov     cl, [es:si+</span><span style="color:#ff8000">1</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:622C                 </span><span style="color:navy">cmp     cl, &#039;</span><span style="color:green">x&#039;
</span><span style="color:black">TRANGROUP:622F                 </span><span style="color:navy">jz      short </span><span style="color:gray">gxn10
</span><span style="color:black">TRANGROUP:6231                 </span><span style="color:navy">cmp     cl, &#039;</span><span style="color:green">X&#039;
</span><span style="color:black">TRANGROUP:6234                 </span><span style="color:navy">jnz     short </span><span style="color:gray">gxn20
</span><span style="color:black">TRANGROUP:6236
TRANGROUP:6236 </span><span style="color:gray">gxn10</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6236                 </span><span style="color:navy">mov     [ds:</span>gnradix<span style="color:navy">], </span><span style="color:green">16
</span><span style="color:black">TRANGROUP:623C                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:623D                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:623E
TRANGROUP:623E </span><span style="color:gray">gxn20</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:623E                 </span><span style="color:navy">mov     cl, [es:si]
</span><span style="color:black">TRANGROUP:6241                 </span><span style="color:navy">inc     si
</span><span style="color:black">TRANGROUP:6242                 </span><span style="color:navy">call    </span>toDigit
<span style="color:black">TRANGROUP:6245                 </span><span style="color:navy">jb      short </span><span style="color:gray">gxnQ
</span><span style="color:black">TRANGROUP:6247                 </span><span style="color:navy">call    </span>mul32
<span style="color:black">TRANGROUP:624A                 </span><span style="color:navy">jb      short </span><span style="color:gray">gxnX
</span><span style="color:black">TRANGROUP:624C                 </span><span style="color:navy">add     ax, cx
</span><span style="color:black">TRANGROUP:624E                 </span><span style="color:navy">adc     dx, bx
</span><span style="color:black">TRANGROUP:6250                 </span><span style="color:navy">jb      short </span><span style="color:gray">gxnX
</span><span style="color:black">TRANGROUP:6252                 </span><span style="color:navy">jmp     short </span><span style="color:gray">gxn20
</span><span style="color:black">TRANGROUP:6254 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6254
TRANGROUP:6254 </span><span style="color:gray">gxnE</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6254                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:6255                 </span><span style="color:navy">jmp     short </span><span style="color:gray">gxnX
</span><span style="color:black">TRANGROUP:6257 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6257
TRANGROUP:6257 </span><span style="color:gray">gxnQ</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6257                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:6258                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:6259
TRANGROUP:6259 </span><span style="color:gray">gxnX</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6259                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:625A                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:625B                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:625C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:625C </span>endp            GetXNum
<span style="color:black">TRANGROUP:625C
TRANGROUP:625D
TRANGROUP:625D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:625D
TRANGROUP:625D
TRANGROUP:625D </span>proc            mul32 near              <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:625D                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:625E                 </span><span style="color:navy">mov     ax, dx
</span><span style="color:black">TRANGROUP:6260                 </span><span style="color:navy">mul     [ds:</span>gnradix<span style="color:navy">]
</span><span style="color:black">TRANGROUP:6264                 </span><span style="color:navy">jb      short </span><span style="color:gray">m32E
</span><span style="color:black">TRANGROUP:6266                 </span><span style="color:navy">mov     dx, ax
</span><span style="color:black">TRANGROUP:6268                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:6269                 </span><span style="color:navy">xchg    dx, bx
</span><span style="color:black">TRANGROUP:626B                 </span><span style="color:navy">mul     [ds:</span>gnradix<span style="color:navy">]
</span><span style="color:black">TRANGROUP:626F                 </span><span style="color:navy">xchg    dx, bx
</span><span style="color:black">TRANGROUP:6271                 </span><span style="color:navy">add     dx, bx
</span><span style="color:black">TRANGROUP:6273                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:6275                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6276 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6276
TRANGROUP:6276 </span><span style="color:gray">m32E</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6276                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:6277                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6277 </span>endp            mul32
<span style="color:black">TRANGROUP:6277
TRANGROUP:6278
TRANGROUP:6278 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6278
TRANGROUP:6278
TRANGROUP:6278 </span>proc            toPara near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6278                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:6279                 </span><span style="color:navy">mov     cl, </span><span style="color:#ff8000">4
</span><span style="color:black">TRANGROUP:627B                 </span><span style="color:navy">shr     ax, cl
</span><span style="color:black">TRANGROUP:627D                 </span><span style="color:navy">xchg    ax, dx
</span><span style="color:black">TRANGROUP:627E                 </span><span style="color:navy">mov     cl, </span><span style="color:green">12
</span><span style="color:black">TRANGROUP:6280                 </span><span style="color:navy">shl     ax, cl
</span><span style="color:black">TRANGROUP:6282                 </span><span style="color:navy">or      ax, dx
</span><span style="color:black">TRANGROUP:6284                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:6285                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6285 </span>endp            toPara
<span style="color:black">TRANGROUP:6285
TRANGROUP:6286
TRANGROUP:6286 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6286
TRANGROUP:6286
TRANGROUP:6286 </span>proc            UmbHead near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6286                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:6287                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:6288                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:6289                 </span><span style="color:navy">mov     ah, </span><span style="color:green">52h
</span><span style="color:black">TRANGROUP:628B                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 2+ internal - GET LIST OF LISTS
<span style="color:black">TRANGROUP:628B                                         </span>; Return: ES:BX -&gt; DOS list of lists
<span style="color:black">TRANGROUP:628D                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">8Ch</span><span style="color:navy">]    </span>; [es:DOS_UMB_HEAD]
<span style="color:black">TRANGROUP:6291                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:6294                 </span><span style="color:navy">jz      short </span><span style="color:gray">uhE
</span><span style="color:black">TRANGROUP:6296                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:6297                 </span><span style="color:navy">jmp     short </span><span style="color:gray">uhX
</span><span style="color:black">TRANGROUP:6299 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6299
TRANGROUP:6299 </span><span style="color:gray">uhE</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6299                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:629A
TRANGROUP:629A </span><span style="color:gray">uhX</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:629A                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:629B                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:629C                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:629D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:629D </span>endp            UmbHead
<span style="color:black">TRANGROUP:629D
TRANGROUP:629E
TRANGROUP:629E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:629E
TRANGROUP:629E
TRANGROUP:629E </span>proc            isSysMCB near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:629E                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:629F                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">1</span><span style="color:navy">]      </span>; [es:arena_owner]
<span style="color:black">TRANGROUP:62A3                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">8
</span><span style="color:black">TRANGROUP:62A6                 </span><span style="color:navy">jz      short </span><span style="color:gray">ism10
</span><span style="color:black">TRANGROUP:62A8                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">9
</span><span style="color:black">TRANGROUP:62AB                 </span><span style="color:navy">jz      short </span><span style="color:gray">ism10
</span><span style="color:black">TRANGROUP:62AD                 </span><span style="color:navy">jmp     short </span><span style="color:gray">ismX
</span><span style="color:black">TRANGROUP:62AF </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:62AF
TRANGROUP:62AF </span><span style="color:gray">ism10</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:62AF                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">8</span><span style="color:navy">]      </span>; [es:arena_name]
<span style="color:black">TRANGROUP:62B3                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">4353h       </span>; &#039;SC&#039; (NASM syntax)
<span style="color:black">TRANGROUP:62B6
TRANGROUP:62B6 </span><span style="color:gray">ismX</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:62B6                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:62B7                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:62B7 </span>endp            isSysMCB
<span style="color:black">TRANGROUP:62B7
TRANGROUP:62B8
TRANGROUP:62B8 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:62B8
TRANGROUP:62B8
TRANGROUP:62B8 </span>proc            AddrToUmb near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:62B8                 </span><span style="color:navy">push    cx              </span>; convert segment addr to UMB number
<span style="color:black">TRANGROUP:62B9                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:62BA                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:62BB                 </span><span style="color:navy">mov     dx, ax
</span><span style="color:black">TRANGROUP:62BD                 </span><span style="color:navy">call    </span>UmbHead
<span style="color:black">TRANGROUP:62C0                 </span><span style="color:navy">jb      short </span><span style="color:gray">atuE
</span><span style="color:black">TRANGROUP:62C2                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:62C4                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:62C6
TRANGROUP:62C6 </span><span style="color:gray">atu10</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:62C6                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">TRANGROUP:62C8                 </span><span style="color:navy">cmp     ax, dx
</span><span style="color:black">TRANGROUP:62CA                 </span><span style="color:navy">jnb     short </span><span style="color:gray">atuX
</span><span style="color:black">TRANGROUP:62CC                 </span><span style="color:navy">call    </span>isSysMCB
<span style="color:black">TRANGROUP:62CF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">atu20
</span><span style="color:black">TRANGROUP:62D1                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:62D2
TRANGROUP:62D2 </span><span style="color:gray">atu20</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:62D2                 </span><span style="color:navy">mov     al, [es:</span><span style="color:green">0</span><span style="color:navy">]      </span>; [es:arena_signature]
<span style="color:black">TRANGROUP:62D6                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">5Ah </span><span style="color:gray">; &#039;Z&#039;   </span>; arena_signature_end
<span style="color:black">TRANGROUP:62D8                 </span><span style="color:navy">jz      short </span><span style="color:gray">atu30
</span><span style="color:black">TRANGROUP:62DA                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">TRANGROUP:62DC                 </span><span style="color:navy">add     ax, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:arena_size]
<span style="color:black">TRANGROUP:62E1                 </span><span style="color:navy">inc     ax
</span><span style="color:black">TRANGROUP:62E2                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:62E4                 </span><span style="color:navy">jmp     short </span><span style="color:gray">atu10
</span><span style="color:black">TRANGROUP:62E6 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:62E6
TRANGROUP:62E6 </span><span style="color:gray">atu30</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:62E6                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">TRANGROUP:62E8                 </span><span style="color:navy">add     ax, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:arena_size]
<span style="color:black">TRANGROUP:62ED                 </span><span style="color:navy">cmp     ax, dx
</span><span style="color:black">TRANGROUP:62EF                 </span><span style="color:navy">jnb     short </span><span style="color:gray">atuX
</span><span style="color:black">TRANGROUP:62F1
TRANGROUP:62F1 </span><span style="color:gray">atuE</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:62F1                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:62F3                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:62F4
TRANGROUP:62F4 </span><span style="color:gray">atuX</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:62F4                 </span><span style="color:navy">mov     ax, cx
</span><span style="color:black">TRANGROUP:62F6                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:62F7                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:62F8                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:62F9                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:62F9 </span>endp            AddrToUmb
<span style="color:black">TRANGROUP:62F9
TRANGROUP:62FA
TRANGROUP:62FA </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:62FA
TRANGROUP:62FA
TRANGROUP:62FA </span>proc            convUMB near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:62FA                 </span><span style="color:navy">cmp     [ds:</span>gnradix<span style="color:navy">], </span><span style="color:green">16
</span><span style="color:black">TRANGROUP:62FF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">cu10
</span><span style="color:black">TRANGROUP:6301                 </span><span style="color:navy">call    </span>AddrToUmb
<span style="color:black">TRANGROUP:6304                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">0FFFFh
</span><span style="color:black">TRANGROUP:6307                 </span><span style="color:navy">jnz     short </span><span style="color:gray">cu10
</span><span style="color:black">TRANGROUP:6309                 </span><span style="color:navy">inc     ax
</span><span style="color:black">TRANGROUP:630A
TRANGROUP:630A </span><span style="color:gray">cu10</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:630A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:630A </span>endp            convUMB
<span style="color:black">TRANGROUP:630A
TRANGROUP:630B
TRANGROUP:630B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:630B
TRANGROUP:630B
TRANGROUP:630B </span>proc            setUMBs near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:630B                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:630C                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:630D                 </span><span style="color:navy">call    </span>fm_link
<span style="color:black">TRANGROUP:6310                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5800h
</span><span style="color:black">TRANGROUP:6313                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">TRANGROUP:6313                                         </span>; AL = function code: get allocation strategy
<span style="color:black">TRANGROUP:6315                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:6316                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:631A                 </span><span style="color:navy">mov     [es:</span>fm_strat<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:631E                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:631F                 </span><span style="color:navy">and     ax, </span><span style="color:green">7Fh
</span><span style="color:black">TRANGROUP:6322                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:6323                 </span><span style="color:navy">call    </span>loadLow
<span style="color:black">TRANGROUP:6326                 </span><span style="color:navy">ror     al, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:6328                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:6329                 </span><span style="color:navy">or      bl, al
</span><span style="color:black">TRANGROUP:632B                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5801h
</span><span style="color:black">TRANGROUP:632E                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">TRANGROUP:632E                                         </span>; AL = function code: set allocation strategy
<span style="color:black">TRANGROUP:6330                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:6331                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:6332                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6332 </span>endp            setUMBs
<span style="color:black">TRANGROUP:6332
TRANGROUP:6333
TRANGROUP:6333 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6333
TRANGROUP:6333
TRANGROUP:6333 </span>proc            loadLow near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6333                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:6334                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:6338                 </span><span style="color:navy">mov     al, [ds:</span>UmbLoad<span style="color:navy">]
</span><span style="color:black">TRANGROUP:633B                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:633D                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ll10
</span><span style="color:black">TRANGROUP:633F                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:6341                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:6342                 </span><span style="color:navy">jmp     short </span><span style="color:gray">lly
</span><span style="color:black">TRANGROUP:6344 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6344
TRANGROUP:6344 </span><span style="color:gray">ll10</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6344                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:6346                 </span><span style="color:navy">jz      short </span><span style="color:gray">lly
</span><span style="color:black">TRANGROUP:6348                 </span><span style="color:navy">mov     al, </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:634A                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:634B
TRANGROUP:634B </span><span style="color:gray">lly</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:634B                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:634C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:634C </span>endp            loadLow
<span style="color:black">TRANGROUP:634C
TRANGROUP:634D
TRANGROUP:634D </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:634D
TRANGROUP:634D
TRANGROUP:634D </span>proc            HideUMBs near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:634D                 </span><span style="color:navy">push    ax              </span>; links UMBs and hides upper-memory as appropriate
<span style="color:black">TRANGROUP:634E                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:634F                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:6350                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:6351                 </span><span style="color:navy">call    </span>UmbTest
<span style="color:black">TRANGROUP:6354                 </span><span style="color:navy">jb      short </span><span style="color:gray">husX
</span><span style="color:black">TRANGROUP:6356                 </span><span style="color:navy">call    </span>FixMem
<span style="color:black">TRANGROUP:6359                 </span><span style="color:navy">call    </span>setUMBs
<span style="color:black">TRANGROUP:635C                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:635D                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:6361                 </span><span style="color:navy">mov     [es:</span>fInHigh<span style="color:navy">], </span><span style="color:#ff8000">1
</span><span style="color:black">TRANGROUP:6367                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:6368                 </span><span style="color:navy">call    </span>GetLoadUMB
<span style="color:black">TRANGROUP:636B                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:636D                 </span><span style="color:navy">jz      short </span><span style="color:gray">husX
</span><span style="color:black">TRANGROUP:636F                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:6371
TRANGROUP:6371 </span><span style="color:gray">hus10</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6371                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:6372                 </span><span style="color:navy">cmp     cx, </span><span style="color:green">16          </span>; MAXUMB
<span style="color:black">TRANGROUP:6375                 </span><span style="color:navy">jnb     short </span><span style="color:gray">hus20
</span><span style="color:black">TRANGROUP:6377                 </span><span style="color:navy">mov     al, cl
</span><span style="color:black">TRANGROUP:6379                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:637A                 </span><span style="color:navy">call    </span>findumb
<span style="color:black">TRANGROUP:637D                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:637E                 </span><span style="color:navy">jb      short </span><span style="color:gray">hus20
</span><span style="color:black">TRANGROUP:6380                 </span><span style="color:navy">call    </span>hideUMB?
<span style="color:black">TRANGROUP:6383                 </span><span style="color:navy">jmp     short </span><span style="color:gray">hus10
</span><span style="color:black">TRANGROUP:6385 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6385
TRANGROUP:6385 </span><span style="color:gray">hus20</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6385                 </span><span style="color:navy">call    </span>GetLoadUMB
<span style="color:black">TRANGROUP:6388                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:638A                 </span><span style="color:navy">jnz     short </span><span style="color:gray">husX
</span><span style="color:black">TRANGROUP:638C                 </span><span style="color:navy">call    </span>hl_unlink
<span style="color:black">TRANGROUP:638F
TRANGROUP:638F </span><span style="color:gray">husX</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:638F                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:6390                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:6391                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:6392                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:6393                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6393 </span>endp            HideUMBs
<span style="color:black">TRANGROUP:6393
TRANGROUP:6394
TRANGROUP:6394 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6394
TRANGROUP:6394
TRANGROUP:6394 </span>proc            GetLoadUMB near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6394                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:6395                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:6399                 </span><span style="color:navy">mov     al, [ds:</span>UmbLoad<span style="color:navy">]
</span><span style="color:black">TRANGROUP:639C                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:639D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:639D </span>endp            GetLoadUMB
<span style="color:black">TRANGROUP:639D
TRANGROUP:639E
TRANGROUP:639E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:639E
TRANGROUP:639E
TRANGROUP:639E </span>proc            GetLoadSize near
<span style="color:black">TRANGROUP:639E                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:639F                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:63A0                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:63A1                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:63A5                 </span><span style="color:navy">mov     al, [ds:</span>UmbLoad<span style="color:navy">]
</span><span style="color:black">TRANGROUP:63A8                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:black">TRANGROUP:63AA                 </span><span style="color:navy">mov     bx, offset </span>UmbSize
<span style="color:black">TRANGROUP:63AD                 </span><span style="color:navy">shl     al, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:63AF                 </span><span style="color:navy">add     ax, bx
</span><span style="color:black">TRANGROUP:63B1                 </span><span style="color:navy">mov     si, ax
</span><span style="color:black">TRANGROUP:63B3                 </span><span style="color:navy">lodsw
</span><span style="color:black">TRANGROUP:63B4                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:63B5                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:63B6                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:63B7                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:63B7 </span>endp            GetLoadSize
<span style="color:black">TRANGROUP:63B7
TRANGROUP:63B8
TRANGROUP:63B8 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:63B8
TRANGROUP:63B8
TRANGROUP:63B8 </span>proc            GetSize near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:63B8                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:63B9                 </span><span style="color:navy">push    si
</span><span style="color:black">TRANGROUP:63BA                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:63BB                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:63BF                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:black">TRANGROUP:63C1                 </span><span style="color:navy">mov     bx, offset </span>UmbSize
<span style="color:black">TRANGROUP:63C4                 </span><span style="color:navy">shl     al, </span><span style="color:green">1
</span><span style="color:black">TRANGROUP:63C6                 </span><span style="color:navy">add     ax, bx
</span><span style="color:black">TRANGROUP:63C8                 </span><span style="color:navy">mov     si, ax
</span><span style="color:black">TRANGROUP:63CA                 </span><span style="color:navy">lodsw
</span><span style="color:black">TRANGROUP:63CB                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:63CC                 </span><span style="color:navy">pop     si
</span><span style="color:black">TRANGROUP:63CD                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:63CE                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:63CE </span>endp            GetSize
<span style="color:black">TRANGROUP:63CE
TRANGROUP:63CF
TRANGROUP:63CF </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:63CF
TRANGROUP:63CF
TRANGROUP:63CF </span>proc            StoLoadUMB near
<span style="color:black">TRANGROUP:63CF                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:63D0                 </span><span style="color:navy">mov     es, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:63D4                 </span><span style="color:navy">mov     [es:</span>UmbLoad<span style="color:navy">], al
</span><span style="color:black">TRANGROUP:63D8                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:63D9                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:63D9 </span>endp            StoLoadUMB
<span style="color:black">TRANGROUP:63D9
TRANGROUP:63DA
TRANGROUP:63DA </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:63DA
TRANGROUP:63DA
TRANGROUP:63DA </span>proc            StoLoadSize near
<span style="color:black">TRANGROUP:63DA                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:63DB                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:63DC                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:63E0                 </span><span style="color:navy">mov     dl, [ds:</span>UmbLoad<span style="color:navy">]
</span><span style="color:black">TRANGROUP:63E4                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:63E5                 </span><span style="color:navy">cmp     dl, </span><span style="color:#ff8000">0FFh
</span><span style="color:black">TRANGROUP:63E8                 </span><span style="color:navy">jz      short </span>sls10
<span style="color:black">TRANGROUP:63EA                 </span><span style="color:navy">call    </span>stowSiz
<span style="color:black">TRANGROUP:63ED
TRANGROUP:63ED </span>sls10<span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:63ED                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:63EE                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:63EE </span>endp            StoLoadSize
<span style="color:black">TRANGROUP:63EE
TRANGROUP:63EF
TRANGROUP:63EF </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:63EF
TRANGROUP:63EF
TRANGROUP:63EF </span>proc            hideUMB near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:63EF                 </span><span style="color:navy">push    ax              </span>; marks as HIDDEN all FREE elements
<span style="color:black">TRANGROUP:63EF                                         </span>; in UMB passed as AL
<span style="color:black">TRANGROUP:63F0                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:63F1                 </span><span style="color:navy">call    </span>findumb
<span style="color:black">TRANGROUP:63F4                 </span><span style="color:navy">jb      short </span><span style="color:gray">huX
</span><span style="color:black">TRANGROUP:63F6
TRANGROUP:63F6 </span><span style="color:gray">hu10</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:63F6                 </span><span style="color:navy">call    </span>isSysMCB
<span style="color:black">TRANGROUP:63F9                 </span><span style="color:navy">jz      short </span><span style="color:gray">huX
</span><span style="color:black">TRANGROUP:63FB                 </span><span style="color:navy">call    </span>isFreeMCB
<span style="color:black">TRANGROUP:63FE                 </span><span style="color:navy">jnz     short </span><span style="color:gray">hu20
</span><span style="color:black">TRANGROUP:6400                 </span><span style="color:navy">call    </span>hideMCB
<span style="color:black">TRANGROUP:6403
TRANGROUP:6403 </span><span style="color:gray">hu20</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6403                 </span><span style="color:navy">mov     al, [es:</span><span style="color:green">0</span><span style="color:navy">]      </span>; [es:arena_signature]
<span style="color:black">TRANGROUP:6407                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">5Ah </span><span style="color:gray">; &#039;Z&#039;   </span>; arena_signature_end
<span style="color:black">TRANGROUP:6409                 </span><span style="color:navy">jz      short </span><span style="color:gray">huX
</span><span style="color:black">TRANGROUP:640B                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">TRANGROUP:640D                 </span><span style="color:navy">add     ax, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:arena_size]
<span style="color:black">TRANGROUP:6412                 </span><span style="color:navy">inc     ax
</span><span style="color:black">TRANGROUP:6413                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:6415                 </span><span style="color:navy">jmp     short </span><span style="color:gray">hu10
</span><span style="color:black">TRANGROUP:6417 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6417
TRANGROUP:6417 </span><span style="color:gray">huX</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6417                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:6418                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:6419                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6419 </span>endp            hideUMB
<span style="color:black">TRANGROUP:6419
TRANGROUP:641A
TRANGROUP:641A </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:641A
TRANGROUP:641A
TRANGROUP:641A </span>proc            isTiny near             <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:641A                 </span><span style="color:navy">push    ax              </span>; returns with ZF set if
<span style="color:black">TRANGROUP:641A                                         </span>; user didn&#039;t specify /S
<span style="color:black">TRANGROUP:641B                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:641C                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:6420                 </span><span style="color:navy">mov     al, [ds:</span>fUmbTiny<span style="color:navy">]
</span><span style="color:black">TRANGROUP:6423                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:6424                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:6426                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:6427                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6427 </span>endp            isTiny
<span style="color:black">TRANGROUP:6427
TRANGROUP:6428
TRANGROUP:6428 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6428
TRANGROUP:6428
TRANGROUP:6428 </span>proc            isFreeMCB near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6428                 </span><span style="color:navy">or      [word ptr es:</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:green">0 </span>; [es:arena_owner]
<span style="color:black">TRANGROUP:642E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:642E </span>endp            isFreeMCB
<span style="color:black">TRANGROUP:642E
TRANGROUP:642F
TRANGROUP:642F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:642F
TRANGROUP:642F
TRANGROUP:642F </span>proc            hideMCB near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:642F                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">8 </span>; [es:arena_owner],SystemPSPOwner
<span style="color:black">TRANGROUP:6436                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">8</span><span style="color:navy">], </span><span style="color:#ff8000">4948h </span>; &#039;HIDDEN  &#039;
<span style="color:black">TRANGROUP:6436                                         </span>; [es:arena_name+0], &#039;HI&#039;
<span style="color:black">TRANGROUP:643D                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">0Ah</span><span style="color:navy">], </span><span style="color:#ff8000">4444h </span>; [es:arena_name+2], &#039;DD
<span style="color:black">TRANGROUP:6444                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">0Ch</span><span style="color:navy">], </span><span style="color:#ff8000">4E45h </span>; [es:arena_name+4], &#039;EN&#039;
<span style="color:black">TRANGROUP:644B                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">0Eh</span><span style="color:navy">], </span><span style="color:#ff8000">2020h </span>; [es:arena_name+6], &#039;  &#039;
<span style="color:black">TRANGROUP:6452                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6452 </span>endp            hideMCB
<span style="color:black">TRANGROUP:6452
TRANGROUP:6453
TRANGROUP:6453 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6453
TRANGROUP:6453
TRANGROUP:6453 </span>proc            unHideMCB near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6453                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:6454                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [es:arena_owner],FreePSPOwner
<span style="color:black">TRANGROUP:645B                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2020h       </span>; &#039;  &#039;
<span style="color:black">TRANGROUP:645E                 </span><span style="color:navy">mov     [es:</span><span style="color:green">8</span><span style="color:navy">], ax      </span>; [es:arena_name+0]
<span style="color:black">TRANGROUP:6462                 </span><span style="color:navy">mov     [es:</span><span style="color:green">10</span><span style="color:navy">], ax     </span>; [es:arena_name+2]
<span style="color:black">TRANGROUP:6466                 </span><span style="color:navy">mov     [es:</span><span style="color:green">12</span><span style="color:navy">], ax     </span>; [es:arena_name+4]
<span style="color:black">TRANGROUP:646A                 </span><span style="color:navy">mov     [es:</span><span style="color:green">14</span><span style="color:navy">], ax     </span>; [es:arena_name+6]
<span style="color:black">TRANGROUP:646E                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:646F                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:646F </span>endp            unHideMCB
<span style="color:black">TRANGROUP:646F
TRANGROUP:6470
TRANGROUP:6470 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6470
TRANGROUP:6470
TRANGROUP:6470 </span>proc            findumb near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6470                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:6471                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:6472                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:6473                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:black">TRANGROUP:6475                 </span><span style="color:navy">mov     dx, ax
</span><span style="color:black">TRANGROUP:6477                 </span><span style="color:navy">call    </span>UmbHead
<span style="color:black">TRANGROUP:647A                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:647C                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:647E
TRANGROUP:647E </span><span style="color:gray">fu10</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:647E                 </span><span style="color:navy">cmp     cx, dx
</span><span style="color:black">TRANGROUP:6480                 </span><span style="color:navy">jz      short </span><span style="color:gray">fuX
</span><span style="color:black">TRANGROUP:6482                 </span><span style="color:navy">call    </span>isSysMCB
<span style="color:black">TRANGROUP:6485                 </span><span style="color:navy">jnz     short </span><span style="color:gray">fu20
</span><span style="color:black">TRANGROUP:6487                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:6488
TRANGROUP:6488 </span><span style="color:gray">fu20</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6488                 </span><span style="color:navy">mov     al, [es:</span><span style="color:green">0</span><span style="color:navy">]      </span>; [es:arena_signature]
<span style="color:black">TRANGROUP:648C                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">5Ah </span><span style="color:gray">; &#039;Z&#039;   </span>; arena_signature_end
<span style="color:black">TRANGROUP:648E                 </span><span style="color:navy">jz      short </span><span style="color:gray">fuE
</span><span style="color:black">TRANGROUP:6490                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">TRANGROUP:6492                 </span><span style="color:navy">add     ax, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:arena_size]
<span style="color:black">TRANGROUP:6497                 </span><span style="color:navy">inc     ax
</span><span style="color:black">TRANGROUP:6498                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:649A                 </span><span style="color:navy">jmp     short </span><span style="color:gray">fu10
</span><span style="color:black">TRANGROUP:649C </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:649C
TRANGROUP:649C </span><span style="color:gray">fuE</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:649C                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:649D
TRANGROUP:649D </span><span style="color:gray">fuX</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:649D                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:649E                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:649F                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:64A0                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:64A0 </span>endp            findumb
<span style="color:black">TRANGROUP:64A0
TRANGROUP:64A1
TRANGROUP:64A1 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:64A1
TRANGROUP:64A1
TRANGROUP:64A1 </span>proc            BigFree near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:64A1                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:64A2                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:64A3                 </span><span style="color:navy">call    </span>findumb
<span style="color:black">TRANGROUP:64A6                 </span><span style="color:navy">jb      short </span><span style="color:gray">bfX
</span><span style="color:black">TRANGROUP:64A8                 </span><span style="color:navy">xor     bx, bx
</span><span style="color:black">TRANGROUP:64AA                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:64AC
TRANGROUP:64AC </span><span style="color:gray">bf10</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:64AC                 </span><span style="color:navy">call    </span>isSysMCB
<span style="color:black">TRANGROUP:64AF                 </span><span style="color:navy">jz      short </span><span style="color:gray">bf30
</span><span style="color:black">TRANGROUP:64B1                 </span><span style="color:navy">call    </span>isFreeMCB
<span style="color:black">TRANGROUP:64B4                 </span><span style="color:navy">jnz     short </span><span style="color:gray">bf20
</span><span style="color:black">TRANGROUP:64B6                 </span><span style="color:navy">cmp     cx, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:arena_size]
<span style="color:black">TRANGROUP:64BB                 </span><span style="color:navy">jg      short </span><span style="color:gray">bf20
</span><span style="color:black">TRANGROUP:64BD                 </span><span style="color:navy">mov     bx, es
</span><span style="color:black">TRANGROUP:64BF                 </span><span style="color:navy">mov     cx, [es:</span><span style="color:green">3</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:64C4
TRANGROUP:64C4 </span><span style="color:gray">bf20</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:64C4                 </span><span style="color:navy">mov     al, [es:</span><span style="color:green">0</span><span style="color:navy">]      </span>; [es:arena_signature]
<span style="color:black">TRANGROUP:64C8                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">5Ah </span><span style="color:gray">; &#039;Z&#039;   </span>; arena_signature_end
<span style="color:black">TRANGROUP:64CA                 </span><span style="color:navy">jz      short </span><span style="color:gray">bf30
</span><span style="color:black">TRANGROUP:64CC                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">TRANGROUP:64CE                 </span><span style="color:navy">add     ax, [es:</span><span style="color:green">3</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:64D3                 </span><span style="color:navy">inc     ax
</span><span style="color:black">TRANGROUP:64D4                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:64D6                 </span><span style="color:navy">jmp     short </span><span style="color:gray">bf10
</span><span style="color:black">TRANGROUP:64D8 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:64D8
TRANGROUP:64D8 </span><span style="color:gray">bf30</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:64D8                 </span><span style="color:navy">mov     es, bx
</span><span style="color:black">TRANGROUP:64DA                 </span><span style="color:navy">mov     ax, cx
</span><span style="color:black">TRANGROUP:64DC                 </span><span style="color:navy">or      bx, bx
</span><span style="color:black">TRANGROUP:64DE                 </span><span style="color:navy">jnz     short </span><span style="color:gray">bfX
</span><span style="color:black">TRANGROUP:64E0                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:64E1
TRANGROUP:64E1 </span><span style="color:gray">bfX</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:64E1                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:64E2                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:64E3                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:64E3 </span>endp            BigFree
<span style="color:black">TRANGROUP:64E3
TRANGROUP:64E4
TRANGROUP:64E4 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:64E4
TRANGROUP:64E4
TRANGROUP:64E4 </span>proc            isSpecified near        <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:64E4                 </span><span style="color:navy">push    ax              </span>; sets ZF if UMB in AL wasn&#039;t specified
<span style="color:black">TRANGROUP:64E4                                         </span>; in DH/LH line
<span style="color:black">TRANGROUP:64E5                 </span><span style="color:navy">xor     bh, bh
</span><span style="color:black">TRANGROUP:64E7                 </span><span style="color:navy">mov     bl, al
</span><span style="color:black">TRANGROUP:64E9                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:64EA                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:64EE                 </span><span style="color:navy">mov     al, [ds:</span>MsgBuffer<span style="color:navy">+bx] </span>; [bx+UmbUsed] = [bx+MsgBuffer]
<span style="color:black">TRANGROUP:64F2                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:64F3                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:64F5                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:64F6                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:64F6 </span>endp            isSpecified
<span style="color:black">TRANGROUP:64F6
TRANGROUP:64F7
TRANGROUP:64F7 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:64F7
TRANGROUP:64F7
TRANGROUP:64F7 </span>proc            shrinkMCB near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:64F7                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:64F8                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:64F9                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:64FA                 </span><span style="color:navy">mov     bx, ax
</span><span style="color:black">TRANGROUP:64FC                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">TRANGROUP:64FE                 </span><span style="color:navy">mov     cx, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:arena_size]
<span style="color:black">TRANGROUP:6503                 </span><span style="color:navy">sub     cx, </span><span style="color:green">32          </span>; MIN_SPLIT_SIZE
<span style="color:black">TRANGROUP:6506                 </span><span style="color:navy">cmp     bx, cx
</span><span style="color:black">TRANGROUP:6508                 </span><span style="color:navy">ja      short </span><span style="color:gray">smE
</span><span style="color:black">TRANGROUP:650A                 </span><span style="color:navy">mov     dl, [es:</span><span style="color:green">0</span><span style="color:navy">]      </span>; [es:arena_signature]
<span style="color:black">TRANGROUP:650F                 </span><span style="color:navy">mov     cx, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:arena_size]
<span style="color:black">TRANGROUP:6514                 </span><span style="color:navy">mov     [es:</span><span style="color:green">3</span><span style="color:navy">], bx
</span><span style="color:black">TRANGROUP:6519                 </span><span style="color:navy">mov     [byte ptr es:</span><span style="color:green">0</span><span style="color:navy">], &#039;</span><span style="color:green">M&#039; </span>; [es:arena_signature]
<span style="color:black">TRANGROUP:651F                 </span><span style="color:navy">add     ax, bx
</span><span style="color:black">TRANGROUP:6521                 </span><span style="color:navy">inc     ax
</span><span style="color:black">TRANGROUP:6522                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:6524                 </span><span style="color:navy">mov     ax, cx
</span><span style="color:black">TRANGROUP:6526                 </span><span style="color:navy">sub     ax, bx
</span><span style="color:black">TRANGROUP:6528                 </span><span style="color:navy">dec     ax
</span><span style="color:black">TRANGROUP:6529                 </span><span style="color:navy">mov     [es:</span><span style="color:green">0</span><span style="color:navy">], dl      </span>; [es:arena_signature]
<span style="color:black">TRANGROUP:652E                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">0 </span>; [es:arena_owner]
<span style="color:black">TRANGROUP:6535                 </span><span style="color:navy">mov     [es:</span><span style="color:green">3</span><span style="color:navy">], ax      </span>; [es:arena_size]
<span style="color:black">TRANGROUP:6539                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2020h       </span>; &#039;  &#039;
<span style="color:black">TRANGROUP:653C                 </span><span style="color:navy">mov     [es:</span><span style="color:green">8</span><span style="color:navy">], ax      </span>; [es:arena_name+0]
<span style="color:black">TRANGROUP:6540                 </span><span style="color:navy">mov     [es:</span><span style="color:green">0Ah</span><span style="color:navy">], ax    </span>; [es:arena_name+2]
<span style="color:black">TRANGROUP:6544                 </span><span style="color:navy">mov     [es:</span><span style="color:green">0Ch</span><span style="color:navy">], ax    </span>; [es:arena_name+4]
<span style="color:black">TRANGROUP:6548                 </span><span style="color:navy">mov     [es:</span><span style="color:green">0Eh</span><span style="color:navy">], ax    </span>; [es:arena_name+6]
<span style="color:black">TRANGROUP:654C                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:654D                 </span><span style="color:navy">jmp     short </span><span style="color:gray">smX
</span><span style="color:black">TRANGROUP:654F </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:654F
TRANGROUP:654F </span><span style="color:gray">smE</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:654F                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:6550
TRANGROUP:6550 </span><span style="color:gray">smX</span><span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6550                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:6551                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:6552                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:6553                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6553 </span>endp            shrinkMCB
<span style="color:black">TRANGROUP:6553
TRANGROUP:6554
TRANGROUP:6554 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6554
TRANGROUP:6554
TRANGROUP:6554 </span>proc            hideUMB? near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6554                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:6555                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:6556                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:6557                 </span><span style="color:navy">mov     al, cl
</span><span style="color:black">TRANGROUP:6559                 </span><span style="color:navy">call    </span>isSpecified
<span style="color:black">TRANGROUP:655C                 </span><span style="color:navy">jz      short </span><span style="color:gray">hu?20
</span><span style="color:black">TRANGROUP:655E                 </span><span style="color:navy">mov     al, cl
</span><span style="color:black">TRANGROUP:6560                 </span><span style="color:navy">call    </span>BigFree
<span style="color:black">TRANGROUP:6563                 </span><span style="color:navy">jb      short </span><span style="color:gray">hu?20
</span><span style="color:black">TRANGROUP:6565                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:6566                 </span><span style="color:navy">mov     al, cl
</span><span style="color:black">TRANGROUP:6568                 </span><span style="color:navy">call    </span>GetSize
<span style="color:black">TRANGROUP:656B                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:656C                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">TRANGROUP:656E                 </span><span style="color:navy">jz      short </span><span style="color:gray">hu?20
</span><span style="color:black">TRANGROUP:6570                 </span><span style="color:navy">cmp     ax, bx
</span><span style="color:black">TRANGROUP:6572                 </span><span style="color:navy">jbe     short </span><span style="color:gray">hu?10
</span><span style="color:black">TRANGROUP:6574                 </span><span style="color:navy">mov     al, cl
</span><span style="color:black">TRANGROUP:6576                 </span><span style="color:navy">call    </span>unMarkUMB
<span style="color:black">TRANGROUP:6579                 </span><span style="color:navy">jmp     short </span><span style="color:gray">hu?20
</span><span style="color:black">TRANGROUP:657B </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:657B
TRANGROUP:657B </span><span style="color:gray">hu?10</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:657B                 </span><span style="color:navy">call    </span>isTiny
<span style="color:black">TRANGROUP:657E                 </span><span style="color:navy">jz      short </span><span style="color:gray">hu?20
</span><span style="color:black">TRANGROUP:6580                 </span><span style="color:navy">call    </span>shrinkMCB
<span style="color:black">TRANGROUP:6583                 </span><span style="color:navy">jb      short </span><span style="color:gray">hu?20
</span><span style="color:black">TRANGROUP:6585                 </span><span style="color:navy">mov     dx, es
</span><span style="color:black">TRANGROUP:6587                 </span><span style="color:navy">jmp     short </span><span style="color:gray">hu?30
</span><span style="color:black">TRANGROUP:6589 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6589
TRANGROUP:6589 </span><span style="color:gray">hu?20</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6589                 </span><span style="color:navy">mov     ax, cx
</span><span style="color:black">TRANGROUP:658B                 </span><span style="color:navy">call    </span>isSpecified
<span style="color:black">TRANGROUP:658E                 </span><span style="color:navy">jnz     short </span><span style="color:gray">hu?X
</span><span style="color:black">TRANGROUP:6590                 </span><span style="color:navy">xor     dx, dx
</span><span style="color:black">TRANGROUP:6592
TRANGROUP:6592 </span><span style="color:gray">hu?30</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6592                 </span><span style="color:navy">mov     al, cl
</span><span style="color:black">TRANGROUP:6594                 </span><span style="color:navy">call    </span>hideUMB
<span style="color:black">TRANGROUP:6597                 </span><span style="color:navy">or      dx, dx
</span><span style="color:black">TRANGROUP:6599                 </span><span style="color:navy">jz      short </span><span style="color:gray">hu?X
</span><span style="color:black">TRANGROUP:659B                 </span><span style="color:navy">mov     es, dx
</span><span style="color:black">TRANGROUP:659D                 </span><span style="color:navy">call    </span>unHideMCB
<span style="color:black">TRANGROUP:65A0
TRANGROUP:65A0 </span><span style="color:gray">hu?X</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:65A0                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:65A1                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:65A2                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:65A3                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:65A3 </span>endp            hideUMB?
<span style="color:black">TRANGROUP:65A3
TRANGROUP:65A4
TRANGROUP:65A4 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:65A4
TRANGROUP:65A4
TRANGROUP:65A4 </span>proc            UnFreeze near
<span style="color:black">TRANGROUP:65A4                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:65A5                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:65A6                 </span><span style="color:navy">call    </span>UmbHead
<span style="color:black">TRANGROUP:65A9                 </span><span style="color:navy">jb      short </span>ufX
<span style="color:black">TRANGROUP:65AB                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:65AD
TRANGROUP:65AD </span>uf10<span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:65AD                 </span><span style="color:navy">call    </span>isFrozMCB
<span style="color:black">TRANGROUP:65B0                 </span><span style="color:navy">jnz     short </span>uf20
<span style="color:black">TRANGROUP:65B2                 </span><span style="color:navy">call    </span>unHideMCB
<span style="color:black">TRANGROUP:65B5
TRANGROUP:65B5 </span>uf20<span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:65B5                 </span><span style="color:navy">mov     al, [es:</span><span style="color:green">0</span><span style="color:navy">]      </span>; [es:arena_signature]
<span style="color:black">TRANGROUP:65B9                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">5Ah </span><span style="color:gray">; &#039;Z&#039;   </span>; arena_signature_end
<span style="color:black">TRANGROUP:65BB                 </span><span style="color:navy">jz      short </span>ufX
<span style="color:black">TRANGROUP:65BD                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">TRANGROUP:65BF                 </span><span style="color:navy">add     ax, [es:</span><span style="color:green">3</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:65C4                 </span><span style="color:navy">inc     ax
</span><span style="color:black">TRANGROUP:65C5                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:65C7                 </span><span style="color:navy">jmp     short </span>uf10
<span style="color:black">TRANGROUP:65C9 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:65C9
TRANGROUP:65C9 </span>ufX<span style="color:navy">:                                    </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:65C9                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:65CA                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:65CB                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:65CB </span>endp            UnFreeze
<span style="color:black">TRANGROUP:65CB
TRANGROUP:65CC
TRANGROUP:65CC </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:65CC
TRANGROUP:65CC
TRANGROUP:65CC </span>proc            isFrozMCB near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:65CC                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:65CD                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">1</span><span style="color:navy">]      </span>; [es:arena_owner]
<span style="color:black">TRANGROUP:65D1                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">8
</span><span style="color:black">TRANGROUP:65D4                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ifmX
</span><span style="color:black">TRANGROUP:65D6                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">8</span><span style="color:navy">]      </span>; [es:arena_name]
<span style="color:black">TRANGROUP:65DA                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">5246h       </span>; &#039;FR&#039;
<span style="color:black">TRANGROUP:65DD                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ifmX
</span><span style="color:black">TRANGROUP:65DF                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">10</span><span style="color:navy">]     </span>; [es:arena_name+2]
<span style="color:black">TRANGROUP:65E3                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">5A4Fh       </span>; &#039;OZ&#039;
<span style="color:black">TRANGROUP:65E6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ifmX
</span><span style="color:black">TRANGROUP:65E8                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">0Ch</span><span style="color:navy">]    </span>; [es:arena_name+4]
<span style="color:black">TRANGROUP:65EC                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">4E45h       </span>; &#039;EN&#039;
<span style="color:black">TRANGROUP:65EF                 </span><span style="color:navy">jnz     short </span><span style="color:gray">ifmX
</span><span style="color:black">TRANGROUP:65F1                 </span><span style="color:navy">mov     ax, [es:</span><span style="color:green">0Eh</span><span style="color:navy">]    </span>; [es:arena_name+6]
<span style="color:black">TRANGROUP:65F5                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">2020h       </span>; &#039;  &#039;
<span style="color:black">TRANGROUP:65F8
TRANGROUP:65F8 </span><span style="color:gray">ifmX</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:65F8                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:65F9                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:65F9 </span>endp            isFrozMCB
<span style="color:black">TRANGROUP:65F9
TRANGROUP:65FA
TRANGROUP:65FA </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:65FA
TRANGROUP:65FA
TRANGROUP:65FA </span>proc            frezMCB near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:65FA                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">1</span><span style="color:navy">], </span><span style="color:#ff8000">8 </span>; [es:arena_owner],SystemPSPOwner
<span style="color:black">TRANGROUP:6601                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">8</span><span style="color:navy">], </span><span style="color:#ff8000">5246h </span>; [es:arena_name+0],&#039;FR&#039;
<span style="color:black">TRANGROUP:6608                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">0Ah</span><span style="color:navy">], </span><span style="color:#ff8000">5A4Fh </span>; [es:arena_name+2],&#039;OZ&#039;
<span style="color:black">TRANGROUP:660F                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">0Ch</span><span style="color:navy">], </span><span style="color:#ff8000">4E45h </span>; [es:arena_name+4],&#039;EN&#039;
<span style="color:black">TRANGROUP:6616                 </span><span style="color:navy">mov     [word ptr es:</span><span style="color:green">0Eh</span><span style="color:navy">], </span><span style="color:#ff8000">2020h </span>; [es:arena_name+6],&#039;  &#039;
<span style="color:black">TRANGROUP:661D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:661D </span>endp            frezMCB
<span style="color:black">TRANGROUP:661D
TRANGROUP:661E
TRANGROUP:661E </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:661E
TRANGROUP:661E
TRANGROUP:661E </span>proc            FreezeUM near
<span style="color:black">TRANGROUP:661E                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:661F                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:6620                 </span><span style="color:navy">push    dx
</span><span style="color:black">TRANGROUP:6621                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:6622                 </span><span style="color:navy">call    </span>GetLoadUMB
<span style="color:black">TRANGROUP:6625                 </span><span style="color:navy">xor     ah, ah
</span><span style="color:black">TRANGROUP:6627                 </span><span style="color:navy">mov     dx, ax
</span><span style="color:black">TRANGROUP:6629                 </span><span style="color:navy">call    </span>UmbHead
<span style="color:black">TRANGROUP:662C                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:662E                 </span><span style="color:navy">xor     cx, cx
</span><span style="color:black">TRANGROUP:6630
TRANGROUP:6630 </span><span style="color:gray">fum10</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6630                 </span><span style="color:navy">call    </span>isSysMCB
<span style="color:black">TRANGROUP:6633                 </span><span style="color:navy">jnz     short </span><span style="color:gray">fum20
</span><span style="color:black">TRANGROUP:6635                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:6636
TRANGROUP:6636 </span><span style="color:gray">fum20</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6636                 </span><span style="color:navy">cmp     cx, dx
</span><span style="color:black">TRANGROUP:6638                 </span><span style="color:navy">jz      short </span><span style="color:gray">fum30
</span><span style="color:black">TRANGROUP:663A                 </span><span style="color:navy">call    </span>isFreeMCB
<span style="color:black">TRANGROUP:663D                 </span><span style="color:navy">jnz     short </span><span style="color:gray">fum30
</span><span style="color:black">TRANGROUP:663F                 </span><span style="color:navy">call    </span>frezMCB
<span style="color:black">TRANGROUP:6642
TRANGROUP:6642 </span><span style="color:gray">fum30</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6642                 </span><span style="color:navy">mov     al, [es:</span><span style="color:green">0</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:6646                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">5Ah </span><span style="color:gray">; &#039;Z&#039;
</span><span style="color:black">TRANGROUP:6648                 </span><span style="color:navy">jz      short </span><span style="color:gray">fumX
</span><span style="color:black">TRANGROUP:664A                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">TRANGROUP:664C                 </span><span style="color:navy">add     ax, [es:</span><span style="color:green">3</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:6651                 </span><span style="color:navy">inc     ax
</span><span style="color:black">TRANGROUP:6652                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:6654                 </span><span style="color:navy">jmp     short </span><span style="color:gray">fum10
</span><span style="color:black">TRANGROUP:6656 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6656
TRANGROUP:6656 </span><span style="color:gray">fumX</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6656                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:6657                 </span><span style="color:navy">pop     dx
</span><span style="color:black">TRANGROUP:6658                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:6659                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:665A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:665A </span>endp            FreezeUM
<span style="color:black">TRANGROUP:665A
TRANGROUP:665B
TRANGROUP:665B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:665B
TRANGROUP:665B
TRANGROUP:665B </span>proc            UmbTest near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:665B                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:665C                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:665D                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:665E                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:665F                 </span><span style="color:navy">call    </span>fm_link
<span style="color:black">TRANGROUP:6662                 </span><span style="color:navy">call    </span>WalkMem
<span style="color:black">TRANGROUP:6665                 </span><span style="color:navy">pushf
</span><span style="color:black">TRANGROUP:6666                 </span><span style="color:navy">call    </span>fm_unlink
<span style="color:black">TRANGROUP:6669                 </span><span style="color:navy">popf
</span><span style="color:black">TRANGROUP:666A                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:666B                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:666C                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:666D                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:666E                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:666E </span>endp            UmbTest
<span style="color:black">TRANGROUP:666E
TRANGROUP:666F
TRANGROUP:666F </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:666F
TRANGROUP:666F
TRANGROUP:666F </span>proc            WalkMem near            <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:666F                 </span><span style="color:navy">push    ax              </span>; travels memory chain and returns carry clear
<span style="color:black">TRANGROUP:666F                                         </span>; if UMBs are linked
<span style="color:black">TRANGROUP:6670                 </span><span style="color:navy">push    bx
</span><span style="color:black">TRANGROUP:6671                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:6672                 </span><span style="color:navy">mov     ah, </span><span style="color:green">52h         </span>; DOS_GET_DOS_LISTS
<span style="color:black">TRANGROUP:6674                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS -
<span style="color:black">TRANGROUP:6676                 </span><span style="color:navy">mov     ax, [es:bx-</span><span style="color:green">2</span><span style="color:navy">]
</span><span style="color:black">TRANGROUP:667A                 </span><span style="color:navy">mov     es, ax
</span><span style="color:black">TRANGROUP:667C
TRANGROUP:667C </span><span style="color:gray">um10</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:667C                 </span><span style="color:navy">mov     al, [es:</span><span style="color:green">0</span><span style="color:navy">]      </span>; [es:arena_signature]
<span style="color:black">TRANGROUP:6680                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">5Ah </span><span style="color:gray">; &#039;Z&#039;   </span>; arena_signature_end
<span style="color:black">TRANGROUP:6682                 </span><span style="color:navy">jz      short </span><span style="color:gray">um20
</span><span style="color:black">TRANGROUP:6684                 </span><span style="color:navy">mov     bx, es
</span><span style="color:black">TRANGROUP:6686                 </span><span style="color:navy">add     bx, [es:</span><span style="color:green">3</span><span style="color:navy">]      </span>; [es:arena_size]
<span style="color:black">TRANGROUP:668B                 </span><span style="color:navy">inc     bx
</span><span style="color:black">TRANGROUP:668C                 </span><span style="color:navy">mov     es, bx
</span><span style="color:black">TRANGROUP:668E                 </span><span style="color:navy">jmp     short </span><span style="color:gray">um10
</span><span style="color:black">TRANGROUP:6690 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6690
TRANGROUP:6690 </span><span style="color:gray">um20</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6690                 </span><span style="color:navy">mov     ax, es
</span><span style="color:black">TRANGROUP:6692                 </span><span style="color:navy">cmp     ax, </span><span style="color:green">9FFFh
</span><span style="color:black">TRANGROUP:6695                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:6696                 </span><span style="color:navy">pop     bx
</span><span style="color:black">TRANGROUP:6697                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:6698                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6698 </span>endp            WalkMem
<span style="color:black">TRANGROUP:6698
TRANGROUP:6699
TRANGROUP:6699 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6699
TRANGROUP:6699
TRANGROUP:6699 </span>proc            hl_unlink near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6699                 </span><span style="color:navy">xor     bh, bh
</span><span style="color:black">TRANGROUP:669B                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:669C                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:66A0                 </span><span style="color:navy">mov     bl, [ds:</span>fm_umb<span style="color:navy">]
</span><span style="color:black">TRANGROUP:66A4                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:66A5                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5803h
</span><span style="color:black">TRANGROUP:66A8                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">TRANGROUP:66A8                                         </span>; AL = function code: (DOS 5beta) set UMB link state
<span style="color:black">TRANGROUP:66AA                 </span><span style="color:navy">xor     bh, bh
</span><span style="color:black">TRANGROUP:66AC                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:66AD                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:66B1                 </span><span style="color:navy">mov     bl, [ds:</span>fm_strat<span style="color:navy">]
</span><span style="color:black">TRANGROUP:66B5                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:66B6                 </span><span style="color:navy">mov     ax, </span><span style="color:green">5801h
</span><span style="color:black">TRANGROUP:66B9                 </span><span style="color:navy">int     </span><span style="color:green">21h             </span>; DOS - 3+ - GET/SET MEMORY ALLOCATION STRATEGY
<span style="color:black">TRANGROUP:66B9                                         </span>; AL = function code: set allocation strategy
<span style="color:black">TRANGROUP:66BB                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:66BB </span>endp            hl_unlink
<span style="color:black">TRANGROUP:66BB
TRANGROUP:66BC
TRANGROUP:66BC </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:66BC
TRANGROUP:66BC
TRANGROUP:66BC </span>proc            LoadHigh far            <span style="color:#8080ff">; ...
</span><span style="color:black">TRANGROUP:66BC
TRANGROUP:66BC </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:0554 SIZE 0000006E BYTES
</span><span style="color:black">TRANGROUP:66BC </span><span style="color:gray">; FUNCTION CHUNK AT TRANGROUP:2E33 SIZE 0000004F BYTES
</span><span style="color:black">TRANGROUP:66BC
TRANGROUP:66BC                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:66BD                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:66BE                 </span><span style="color:navy">call    </span>ParseLhCmd
<span style="color:black">TRANGROUP:66C1                 </span><span style="color:navy">jb      short </span><span style="color:gray">LhErr
</span><span style="color:black">TRANGROUP:66C3                 </span><span style="color:navy">call    </span>SetupCmdLine    ; setup pgm&#039;s command line
<span style="color:black">TRANGROUP:66C6                 </span><span style="color:navy">call    </span>SetupPath       ; setup path for file
<span style="color:black">TRANGROUP:66C9                 </span><span style="color:navy">jb      short </span><span style="color:gray">LhErr
</span><span style="color:black">TRANGROUP:66CB                 </span><span style="color:navy">call    </span>HideUMBs
<span style="color:black">TRANGROUP:66CE                 </span><span style="color:navy">jmp     </span>LH_EXECUTE
<span style="color:black">TRANGROUP:66D1 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:66D1
TRANGROUP:66D1 </span><span style="color:gray">LhErr</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:66D1                 </span><span style="color:navy">jmp     </span>cerror
<span style="color:black">TRANGROUP:66D1 </span>endp            LoadHigh
<span style="color:black">TRANGROUP:66D1
TRANGROUP:66D4
TRANGROUP:66D4 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:66D4
TRANGROUP:66D4
TRANGROUP:66D4 </span>proc            ParseLhCmd near         <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:66D4                 </span><span style="color:navy">mov     si, </span><span style="color:green">81h         </span>; iCmdLine
<span style="color:black">TRANGROUP:66D7                 </span><span style="color:navy">push    es
</span><span style="color:black">TRANGROUP:66D8                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:66D9                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:66DA                 </span><span style="color:navy">call    </span>InitVar
<span style="color:black">TRANGROUP:66DD                 </span><span style="color:navy">call    </span>ParseVar
<span style="color:black">TRANGROUP:66E0                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:66E1                 </span><span style="color:navy">jnb     short </span><span style="color:gray">plcC
</span><span style="color:black">TRANGROUP:66E3                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">2           </span>; PV_BadUMB
<span style="color:black">TRANGROUP:66E6                 </span><span style="color:navy">jnz     short </span><span style="color:gray">plc10
</span><span style="color:black">TRANGROUP:66E8                 </span><span style="color:navy">mov     dx, offset </span>LhBadUMB_Ptr
<span style="color:black">TRANGROUP:66EB                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:66EC                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:66ED </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:66ED
TRANGROUP:66ED </span><span style="color:gray">plc10</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:66ED                 </span><span style="color:navy">mov     dx, offset </span>LhInvSwt_Ptr
<span style="color:black">TRANGROUP:66F0                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">3           </span>; PV_InvSwt ; Unrecognized switch passed?
<span style="color:black">TRANGROUP:66F3                 </span><span style="color:navy">jz      short </span><span style="color:gray">plc20
</span><span style="color:black">TRANGROUP:66F5                 </span><span style="color:navy">mov     dx, offset </span>LhInvArg_Ptr
<span style="color:black">TRANGROUP:66F8
TRANGROUP:66F8 </span><span style="color:gray">plc20</span><span style="color:navy">:                                  </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:66F8                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:66F9                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:66FA </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:66FA
TRANGROUP:66FA </span><span style="color:gray">plcC</span><span style="color:navy">:                                   </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:66FA                 </span><span style="color:navy">call    </span>LhCopyFilename  ; copy filename into our buffer
<span style="color:black">TRANGROUP:66FD                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:66FD </span>endp            ParseLhCmd
<span style="color:black">TRANGROUP:66FD
TRANGROUP:66FE
TRANGROUP:66FE </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:66FE
TRANGROUP:66FE
TRANGROUP:66FE </span>proc            LhCopyFilename near     <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:66FE                 </span><span style="color:navy">mov     di, offset </span>EXECPATH
<span style="color:black">TRANGROUP:6701                 </span><span style="color:navy">mov     cx, </span><span style="color:#ff8000">0
</span><span style="color:black">TRANGROUP:6704
TRANGROUP:6704 </span><span style="color:gray">lhcpfn1</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6704                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:6705                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">2Ah </span><span style="color:gray">; &#039;*&#039;
</span><span style="color:black">TRANGROUP:6707                 </span><span style="color:navy">jz      short </span><span style="color:gray">lhfilerr
</span><span style="color:black">TRANGROUP:6709                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">3Fh </span><span style="color:gray">; &#039;?&#039;
</span><span style="color:black">TRANGROUP:670B                 </span><span style="color:navy">jz      short </span><span style="color:gray">lhfilerr
</span><span style="color:black">TRANGROUP:670D                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh
</span><span style="color:black">TRANGROUP:670F                 </span><span style="color:navy">jz      short </span><span style="color:gray">lhcpfn2
</span><span style="color:black">TRANGROUP:6711                 </span><span style="color:navy">cmp     al, [ds:</span>SWITCHAR<span style="color:navy">]
</span><span style="color:black">TRANGROUP:6715                 </span><span style="color:navy">jz      short </span><span style="color:gray">lhcpfn2
</span><span style="color:black">TRANGROUP:6717                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:6719                 </span><span style="color:navy">jz      short </span><span style="color:gray">lhcpfn2
</span><span style="color:black">TRANGROUP:671B                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">20h </span><span style="color:gray">; &#039; &#039;
</span><span style="color:black">TRANGROUP:671D                 </span><span style="color:navy">jz      short </span><span style="color:gray">lhcpfn2
</span><span style="color:black">TRANGROUP:671F                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:6721                 </span><span style="color:navy">jz      short </span><span style="color:gray">lhcpfn2
</span><span style="color:black">TRANGROUP:6723                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:6724                 </span><span style="color:navy">inc     cx
</span><span style="color:black">TRANGROUP:6725                 </span><span style="color:navy">jmp     short </span><span style="color:gray">lhcpfn1
</span><span style="color:black">TRANGROUP:6727 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6727
TRANGROUP:6727 </span><span style="color:gray">lhcpfn2</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6727                 </span><span style="color:navy">xor     al, al
</span><span style="color:black">TRANGROUP:6729                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:672A                 </span><span style="color:navy">or      cx, cx
</span><span style="color:black">TRANGROUP:672C                 </span><span style="color:navy">jz      short </span><span style="color:gray">lhmissing
</span><span style="color:black">TRANGROUP:672E                 </span><span style="color:navy">dec     si
</span><span style="color:black">TRANGROUP:672F                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:6730                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6731 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6731
TRANGROUP:6731 </span><span style="color:gray">lhfilerr</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6731                 </span><span style="color:navy">mov     dx, offset </span>LhInvFil_Ptr
<span style="color:black">TRANGROUP:6734                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:6735                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6736 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6736
TRANGROUP:6736 </span><span style="color:gray">lhmissing</span><span style="color:navy">:                              </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6736                 </span><span style="color:navy">mov     dx, offset </span>ReqParmMiss
<span style="color:black">TRANGROUP:6739                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:673A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:673A </span>endp            LhCopyFilename
<span style="color:black">TRANGROUP:673A
TRANGROUP:673B
TRANGROUP:673B </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:673B
TRANGROUP:673B
TRANGROUP:673B </span>proc            SetupCmdLine near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:673B                 </span><span style="color:navy">mov     di, </span><span style="color:green">81h         </span>; iCmdLine
<span style="color:black">TRANGROUP:673E                 </span><span style="color:navy">xor     cl, cl
</span><span style="color:black">TRANGROUP:6740                 </span><span style="color:navy">dec     cl              </span>; just CR means count = 0
<span style="color:black">TRANGROUP:6742
TRANGROUP:6742 </span><span style="color:gray">SetCmdL1</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6742                 </span><span style="color:navy">lodsb
</span><span style="color:black">TRANGROUP:6743                 </span><span style="color:navy">stosb
</span><span style="color:black">TRANGROUP:6744                 </span><span style="color:navy">inc     cl              </span>; update count
<span style="color:black">TRANGROUP:6746                 </span><span style="color:navy">or      al, al
</span><span style="color:black">TRANGROUP:6748                 </span><span style="color:navy">jz      short </span><span style="color:gray">SetCmdL2
</span><span style="color:black">TRANGROUP:674A                 </span><span style="color:navy">cmp     al, </span><span style="color:#ff8000">0Dh         </span>; carriage return?
<span style="color:black">TRANGROUP:674C                 </span><span style="color:navy">jnz     short </span><span style="color:gray">SetCmdL1  </span>; no, continue storing
<span style="color:black">TRANGROUP:674E
TRANGROUP:674E </span><span style="color:gray">SetCmdL2</span><span style="color:navy">:                               </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:674E                 </span><span style="color:navy">mov     [es:</span><span style="color:green">80h</span><span style="color:navy">], cl    </span>; store new cmd line length
<span style="color:black">TRANGROUP:6753                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:6753 </span>endp            SetupCmdLine
<span style="color:black">TRANGROUP:6753
TRANGROUP:6754
TRANGROUP:6754 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6754
TRANGROUP:6754
TRANGROUP:6754 </span>proc            LhSetupErrMsg near      <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6754                 </span><span style="color:navy">mov     [ds:</span>msg_disp_class<span style="color:navy">], </span><span style="color:#ff8000">1 </span>; [msg_disp_class],ext_msg_class
<span style="color:black">TRANGROUP:6759                 </span><span style="color:navy">mov     dx, offset </span>extend_buf_ptr
<span style="color:black">TRANGROUP:675C                 </span><span style="color:navy">mov     [ds:</span>extend_buf_ptr<span style="color:navy">], ax
</span><span style="color:black">TRANGROUP:675F                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:675F </span>endp            LhSetupErrMsg
<span style="color:black">TRANGROUP:675F
TRANGROUP:6760
TRANGROUP:6760 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:6760
TRANGROUP:6760
TRANGROUP:6760 </span>proc            SetupPath near          <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6760                 </span><span style="color:navy">mov     ax, [ds:</span>ARG_ARGVCNT<span style="color:navy">] </span>; [ARG+ARG_UNIT.argvcnt]
<span style="color:black">TRANGROUP:6763                 </span><span style="color:navy">dec     ax
</span><span style="color:black">TRANGROUP:6764                 </span><span style="color:navy">mov     bx, </span><span style="color:green">11          </span>; ARGV_ELE.SIZE
<span style="color:black">TRANGROUP:6767                 </span><span style="color:navy">mul     bx
</span><span style="color:black">TRANGROUP:6769                 </span><span style="color:navy">push    ds
</span><span style="color:black">TRANGROUP:676A                 </span><span style="color:navy">mov     ds, [ds:</span>RESSEG<span style="color:navy">]
</span><span style="color:black">TRANGROUP:676E                 </span><span style="color:navy">mov     cl, [ds:</span>fm_argc<span style="color:navy">]
</span><span style="color:black">TRANGROUP:6772                 </span><span style="color:navy">pop     ds
</span><span style="color:black">TRANGROUP:6773                 </span><span style="color:navy">inc     cl
</span><span style="color:black">TRANGROUP:6775
TRANGROUP:6775 </span><span style="color:gray">argloop</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6775                 </span><span style="color:navy">jcxz    short </span><span style="color:gray">argdone
</span><span style="color:black">TRANGROUP:6777                 </span><span style="color:navy">dec     cx
</span><span style="color:black">TRANGROUP:6778                 </span><span style="color:navy">push    ax
</span><span style="color:black">TRANGROUP:6779                 </span><span style="color:navy">push    cx
</span><span style="color:black">TRANGROUP:677A                 </span><span style="color:navy">mov     cx, ax
</span><span style="color:black">TRANGROUP:677C                 </span><span style="color:navy">mov     di, offset </span>ARG_ARGV ; mov di,[ARG+ARG_UNIT.argv] ; mov di,[ARG]
<span style="color:black">TRANGROUP:677F                 </span><span style="color:navy">mov     si, di
</span><span style="color:black">TRANGROUP:6781                 </span><span style="color:navy">add     si, </span><span style="color:green">11          </span>; ARGV_ELE.SIZE
<span style="color:black">TRANGROUP:6784                 </span><span style="color:navy">cld
</span><span style="color:black">TRANGROUP:6785                 </span><span style="color:navy">rep movsb
</span><span style="color:black">TRANGROUP:6787                 </span><span style="color:navy">dec     [ds:</span>ARG_ARGVCNT<span style="color:navy">] </span>; [ARG+ARG_UNIT.argvcnt]
<span style="color:black">TRANGROUP:678B                 </span><span style="color:navy">sub     ax, </span><span style="color:green">11          </span>; ARGV_ELE.SIZE
<span style="color:black">TRANGROUP:678E                 </span><span style="color:navy">pop     cx
</span><span style="color:black">TRANGROUP:678F                 </span><span style="color:navy">pop     ax
</span><span style="color:black">TRANGROUP:6790                 </span><span style="color:navy">jmp     short </span><span style="color:gray">argloop
</span><span style="color:black">TRANGROUP:6792 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:6792
TRANGROUP:6792 </span><span style="color:gray">argdone</span><span style="color:navy">:                                </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:6792                 </span><span style="color:navy">call    </span>path_search
<span style="color:black">TRANGROUP:6795                 </span><span style="color:navy">or      ax, ax
</span><span style="color:black">TRANGROUP:6797                 </span><span style="color:navy">jz      short </span><span style="color:gray">no_exec_file
</span><span style="color:black">TRANGROUP:6799                 </span><span style="color:navy">cmp     ax, </span><span style="color:#ff8000">4           </span>; executable file?
<span style="color:black">TRANGROUP:679C                 </span><span style="color:navy">jl      short </span><span style="color:gray">no_exec_bat </span>; no, indicate fail
<span style="color:black">TRANGROUP:679E                 </span><span style="color:navy">clc
</span><span style="color:black">TRANGROUP:679F                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:67A0 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:67A0
TRANGROUP:67A0 </span><span style="color:gray">no_exec_bat</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:67A0                 </span><span style="color:navy">mov     dx, offset </span>NoExecBat_Ptr ; offset TRANGROUP:NoExecBat_Ptr
<span style="color:black">TRANGROUP:67A3                 </span><span style="color:navy">jmp     short </span><span style="color:gray">lhsp_errret
</span><span style="color:black">TRANGROUP:67A5 </span><span style="color:gray">; ---------------------------------------------------------------------------
</span><span style="color:black">TRANGROUP:67A5
TRANGROUP:67A5 </span><span style="color:gray">no_exec_file</span><span style="color:navy">:                           </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:67A5                 </span><span style="color:navy">mov     ax, </span><span style="color:#ff8000">2           </span>; setup error message
<span style="color:black">TRANGROUP:67A8                 </span><span style="color:navy">call    </span>LhSetupErrMsg
<span style="color:black">TRANGROUP:67AB
TRANGROUP:67AB </span><span style="color:gray">lhsp_errret</span><span style="color:navy">:                            </span><span style="color:green">; ...
</span><span style="color:black">TRANGROUP:67AB                 </span><span style="color:navy">stc
</span><span style="color:black">TRANGROUP:67AC                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:67AC </span>endp            SetupPath
<span style="color:black">TRANGROUP:67AC
TRANGROUP:67AC </span><span style="color:gray">; ---------------------------------------------------------------------------
TRANGROUP:67AD </span>$M_CLASS_3_STRUC <span style="color:navy">db </span><span style="color:#008040">0FFh                </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:67AE                 </span><span style="color:navy">dw </span><span style="color:#008040">0A07h                </span>; $M_COMMAND_VER (COMMAND.COM version)
<span style="color:gray">TRANGROUP:67B0                 </span><span style="color:navy">db </span><span style="color:#008040">183
</span><span style="color:gray">TRANGROUP:67B1 </span>$M_ID_3_1       <span style="color:navy">dw </span><span style="color:#008040">1020
</span><span style="color:gray">TRANGROUP:67B3                 </span><span style="color:navy">dw </span><span style="color:#008040">732
</span><span style="color:gray">TRANGROUP:67B5 </span>$M_ID_3_2       <span style="color:navy">dw </span><span style="color:#008040">1015
</span><span style="color:gray">TRANGROUP:67B7                 </span><span style="color:navy">dw </span><span style="color:#008040">744
</span><span style="color:gray">TRANGROUP:67B9 </span>$M_ID_3_3       <span style="color:navy">dw </span><span style="color:#008040">1004</span><span style="color:navy">, </span><span style="color:#008040">776</span><span style="color:navy">,</span><span style="color:#008040">1026</span><span style="color:navy">, </span><span style="color:#008040">798</span><span style="color:navy">,</span><span style="color:#008040">1031</span><span style="color:navy">, </span><span style="color:#008040">814</span><span style="color:navy">,</span><span style="color:#008040">1035</span><span style="color:navy">, </span><span style="color:#008040">825</span><span style="color:navy">,</span><span style="color:#008040">1062</span><span style="color:navy">, </span><span style="color:#008040">836
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1028</span><span style="color:navy">, </span><span style="color:#008040">847</span><span style="color:navy">,</span><span style="color:#008040">1045</span><span style="color:navy">, </span><span style="color:#008040">877</span><span style="color:navy">,</span><span style="color:#008040">1041</span><span style="color:navy">, </span><span style="color:#008040">902</span><span style="color:navy">,</span><span style="color:#008040">1042</span><span style="color:navy">, </span><span style="color:#008040">932</span><span style="color:navy">,</span><span style="color:#008040">1043</span><span style="color:navy">, </span><span style="color:#008040">955
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1002</span><span style="color:navy">, </span><span style="color:#008040">983</span><span style="color:navy">,</span><span style="color:#008040">1003</span><span style="color:navy">,</span><span style="color:#008040">1019</span><span style="color:navy">,</span><span style="color:#008040">1007</span><span style="color:navy">,</span><span style="color:#008040">1043</span><span style="color:navy">,</span><span style="color:#008040">1008</span><span style="color:navy">,</span><span style="color:#008040">1066</span><span style="color:navy">,</span><span style="color:#008040">1009</span><span style="color:navy">,</span><span style="color:#008040">1084
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1010</span><span style="color:navy">,</span><span style="color:#008040">1101</span><span style="color:navy">,</span><span style="color:#008040">1011</span><span style="color:navy">,</span><span style="color:#008040">1129</span><span style="color:navy">,</span><span style="color:#008040">1012</span><span style="color:navy">,</span><span style="color:#008040">1152</span><span style="color:navy">,</span><span style="color:#008040">1014</span><span style="color:navy">,</span><span style="color:#008040">1177</span><span style="color:navy">,</span><span style="color:#008040">1016</span><span style="color:navy">,</span><span style="color:#008040">1190
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1017</span><span style="color:navy">,</span><span style="color:#008040">1228</span><span style="color:navy">,</span><span style="color:#008040">1018</span><span style="color:navy">,</span><span style="color:#008040">1261</span><span style="color:navy">,</span><span style="color:#008040">1019</span><span style="color:navy">,</span><span style="color:#008040">1277</span><span style="color:navy">,</span><span style="color:#008040">1021</span><span style="color:navy">,</span><span style="color:#008040">1285</span><span style="color:navy">,</span><span style="color:#008040">1022</span><span style="color:navy">,</span><span style="color:#008040">1311
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1023</span><span style="color:navy">,</span><span style="color:#008040">1346</span><span style="color:navy">,</span><span style="color:#008040">1024</span><span style="color:navy">,</span><span style="color:#008040">1386</span><span style="color:navy">,</span><span style="color:#008040">1025</span><span style="color:navy">,</span><span style="color:#008040">1405</span><span style="color:navy">,</span><span style="color:#008040">1027</span><span style="color:navy">,</span><span style="color:#008040">1425</span><span style="color:navy">,</span><span style="color:#008040">1029</span><span style="color:navy">,</span><span style="color:#008040">1454
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1030</span><span style="color:navy">,</span><span style="color:#008040">1468</span><span style="color:navy">,</span><span style="color:#008040">1032</span><span style="color:navy">,</span><span style="color:#008040">1479</span><span style="color:navy">,</span><span style="color:#008040">1033</span><span style="color:navy">,</span><span style="color:#008040">1499</span><span style="color:navy">,</span><span style="color:#008040">1034</span><span style="color:navy">,</span><span style="color:#008040">1517</span><span style="color:navy">,</span><span style="color:#008040">1036</span><span style="color:navy">,</span><span style="color:#008040">1535
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1037</span><span style="color:navy">,</span><span style="color:#008040">1552</span><span style="color:navy">,</span><span style="color:#008040">1038</span><span style="color:navy">,</span><span style="color:#008040">1565</span><span style="color:navy">,</span><span style="color:#008040">1039</span><span style="color:navy">,</span><span style="color:#008040">1580</span><span style="color:navy">,</span><span style="color:#008040">1040</span><span style="color:navy">,</span><span style="color:#008040">1637</span><span style="color:navy">,</span><span style="color:#008040">1044</span><span style="color:navy">,</span><span style="color:#008040">1652
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1046</span><span style="color:navy">,</span><span style="color:#008040">1668</span><span style="color:navy">,</span><span style="color:#008040">1047</span><span style="color:navy">,</span><span style="color:#008040">1719</span><span style="color:navy">,</span><span style="color:#008040">1048</span><span style="color:navy">,</span><span style="color:#008040">1740</span><span style="color:navy">,</span><span style="color:#008040">1049</span><span style="color:navy">,</span><span style="color:#008040">1754</span><span style="color:navy">,</span><span style="color:#008040">1050</span><span style="color:navy">,</span><span style="color:#008040">1760
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1051</span><span style="color:navy">,</span><span style="color:#008040">1787</span><span style="color:navy">,</span><span style="color:#008040">1052</span><span style="color:navy">,</span><span style="color:#008040">1800</span><span style="color:navy">,</span><span style="color:#008040">1053</span><span style="color:navy">,</span><span style="color:#008040">1819</span><span style="color:navy">,</span><span style="color:#008040">1054</span><span style="color:navy">,</span><span style="color:#008040">1853</span><span style="color:navy">,</span><span style="color:#008040">1055</span><span style="color:navy">,</span><span style="color:#008040">1888
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1056</span><span style="color:navy">,</span><span style="color:#008040">1898</span><span style="color:navy">,</span><span style="color:#008040">1057</span><span style="color:navy">,</span><span style="color:#008040">1909</span><span style="color:navy">,</span><span style="color:#008040">1059</span><span style="color:navy">,</span><span style="color:#008040">1918</span><span style="color:navy">,</span><span style="color:#008040">1060</span><span style="color:navy">,</span><span style="color:#008040">1919</span><span style="color:navy">,</span><span style="color:#008040">1061</span><span style="color:navy">,</span><span style="color:#008040">1919
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1063</span><span style="color:navy">,</span><span style="color:#008040">1941</span><span style="color:navy">,</span><span style="color:#008040">1064</span><span style="color:navy">,</span><span style="color:#008040">1940</span><span style="color:navy">,</span><span style="color:#008040">1065</span><span style="color:navy">,</span><span style="color:#008040">1939</span><span style="color:navy">,</span><span style="color:#008040">1066</span><span style="color:navy">,</span><span style="color:#008040">1938</span><span style="color:navy">,</span><span style="color:#008040">1067</span><span style="color:navy">,</span><span style="color:#008040">1937
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1068</span><span style="color:navy">,</span><span style="color:#008040">1935</span><span style="color:navy">,</span><span style="color:#008040">1069</span><span style="color:navy">,</span><span style="color:#008040">1944</span><span style="color:navy">,</span><span style="color:#008040">1070</span><span style="color:navy">,</span><span style="color:#008040">1944</span><span style="color:navy">,</span><span style="color:#008040">1071</span><span style="color:navy">,</span><span style="color:#008040">1943</span><span style="color:navy">,</span><span style="color:#008040">1072</span><span style="color:navy">,</span><span style="color:#008040">1942
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1073</span><span style="color:navy">,</span><span style="color:#008040">1948</span><span style="color:navy">,</span><span style="color:#008040">1074</span><span style="color:navy">,</span><span style="color:#008040">1954</span><span style="color:navy">,</span><span style="color:#008040">1075</span><span style="color:navy">,</span><span style="color:#008040">1960</span><span style="color:navy">,</span><span style="color:#008040">1076</span><span style="color:navy">,</span><span style="color:#008040">1962</span><span style="color:navy">,</span><span style="color:#008040">1077</span><span style="color:navy">,</span><span style="color:#008040">1961
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1078</span><span style="color:navy">,</span><span style="color:#008040">1965</span><span style="color:navy">,</span><span style="color:#008040">1079</span><span style="color:navy">,</span><span style="color:#008040">1988</span><span style="color:navy">,</span><span style="color:#008040">1080</span><span style="color:navy">,</span><span style="color:#008040">1995</span><span style="color:navy">,</span><span style="color:#008040">1081</span><span style="color:navy">,</span><span style="color:#008040">2013</span><span style="color:navy">,</span><span style="color:#008040">1082</span><span style="color:navy">,</span><span style="color:#008040">2052
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1083</span><span style="color:navy">,</span><span style="color:#008040">2060</span><span style="color:navy">,</span><span style="color:#008040">1084</span><span style="color:navy">,</span><span style="color:#008040">2059</span><span style="color:navy">,</span><span style="color:#008040">1090</span><span style="color:navy">,</span><span style="color:#008040">2071</span><span style="color:navy">,</span><span style="color:#008040">1091</span><span style="color:navy">,</span><span style="color:#008040">2081</span><span style="color:navy">,</span><span style="color:#008040">1092</span><span style="color:navy">,</span><span style="color:#008040">2091
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1093</span><span style="color:navy">,</span><span style="color:#008040">2101</span><span style="color:navy">,</span><span style="color:#008040">1094</span><span style="color:navy">,</span><span style="color:#008040">2118</span><span style="color:navy">,</span><span style="color:#008040">1095</span><span style="color:navy">,</span><span style="color:#008040">2143</span><span style="color:navy">,</span><span style="color:#008040">1096</span><span style="color:navy">,</span><span style="color:#008040">2168</span><span style="color:navy">,</span><span style="color:#008040">1097</span><span style="color:navy">,</span><span style="color:#008040">2213
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1098</span><span style="color:navy">,</span><span style="color:#008040">2238</span><span style="color:navy">,</span><span style="color:#008040">1099</span><span style="color:navy">,</span><span style="color:#008040">2263</span><span style="color:navy">,</span><span style="color:#008040">1100</span><span style="color:navy">,</span><span style="color:#008040">2281</span><span style="color:navy">,</span><span style="color:#008040">1103</span><span style="color:navy">,</span><span style="color:#008040">2315</span><span style="color:navy">,</span><span style="color:#008040">1104</span><span style="color:navy">,</span><span style="color:#008040">2338
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1105</span><span style="color:navy">,</span><span style="color:#008040">2338</span><span style="color:navy">,</span><span style="color:#008040">1106</span><span style="color:navy">,</span><span style="color:#008040">2345</span><span style="color:navy">,</span><span style="color:#008040">1200</span><span style="color:navy">,</span><span style="color:#008040">2359</span><span style="color:navy">,</span><span style="color:#008040">1300</span><span style="color:navy">,</span><span style="color:#008040">2356</span><span style="color:navy">,</span><span style="color:#008040">1320</span><span style="color:navy">,</span><span style="color:#008040">2487
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1321</span><span style="color:navy">,</span><span style="color:#008040">2547</span><span style="color:navy">,</span><span style="color:#008040">1340</span><span style="color:navy">,</span><span style="color:#008040">2656</span><span style="color:navy">,</span><span style="color:#008040">1341</span><span style="color:navy">,</span><span style="color:#008040">2744</span><span style="color:navy">,</span><span style="color:#008040">1342</span><span style="color:navy">,</span><span style="color:#008040">2839</span><span style="color:navy">,</span><span style="color:#008040">1360</span><span style="color:navy">,</span><span style="color:#008040">2981
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1400</span><span style="color:navy">,</span><span style="color:#008040">3005</span><span style="color:navy">,</span><span style="color:#008040">1401</span><span style="color:navy">,</span><span style="color:#008040">3158</span><span style="color:navy">,</span><span style="color:#008040">1402</span><span style="color:navy">,</span><span style="color:#008040">3259</span><span style="color:navy">,</span><span style="color:#008040">1403</span><span style="color:navy">,</span><span style="color:#008040">3374</span><span style="color:navy">,</span><span style="color:#008040">1404</span><span style="color:navy">,</span><span style="color:#008040">3434
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1405</span><span style="color:navy">,</span><span style="color:#008040">3547</span><span style="color:navy">,</span><span style="color:#008040">1406</span><span style="color:navy">,</span><span style="color:#008040">3658</span><span style="color:navy">,</span><span style="color:#008040">1407</span><span style="color:navy">,</span><span style="color:#008040">3721</span><span style="color:navy">,</span><span style="color:#008040">1420</span><span style="color:navy">,</span><span style="color:#008040">3853</span><span style="color:navy">,</span><span style="color:#008040">1440</span><span style="color:navy">,</span><span style="color:#008040">3988
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1441</span><span style="color:navy">,</span><span style="color:#008040">4023</span><span style="color:navy">,</span><span style="color:#008040">1460</span><span style="color:navy">,</span><span style="color:#008040">4151</span><span style="color:navy">,</span><span style="color:#008040">1461</span><span style="color:navy">,</span><span style="color:#008040">4248</span><span style="color:navy">,</span><span style="color:#008040">1462</span><span style="color:navy">,</span><span style="color:#008040">4376</span><span style="color:navy">,</span><span style="color:#008040">1480</span><span style="color:navy">,</span><span style="color:#008040">4452
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1481</span><span style="color:navy">,</span><span style="color:#008040">4608</span><span style="color:navy">,</span><span style="color:#008040">1482</span><span style="color:navy">,</span><span style="color:#008040">4682</span><span style="color:navy">,</span><span style="color:#008040">1483</span><span style="color:navy">,</span><span style="color:#008040">4770</span><span style="color:navy">,</span><span style="color:#008040">1484</span><span style="color:navy">,</span><span style="color:#008040">4893</span><span style="color:navy">,</span><span style="color:#008040">1485</span><span style="color:navy">,</span><span style="color:#008040">5014
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1486</span><span style="color:navy">,</span><span style="color:#008040">5160</span><span style="color:navy">,</span><span style="color:#008040">1487</span><span style="color:navy">,</span><span style="color:#008040">5300</span><span style="color:navy">,</span><span style="color:#008040">1488</span><span style="color:navy">,</span><span style="color:#008040">5391</span><span style="color:navy">,</span><span style="color:#008040">1489</span><span style="color:navy">,</span><span style="color:#008040">5534</span><span style="color:navy">,</span><span style="color:#008040">1500</span><span style="color:navy">,</span><span style="color:#008040">5611
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1520</span><span style="color:navy">,</span><span style="color:#008040">5670</span><span style="color:navy">,</span><span style="color:#008040">1540</span><span style="color:navy">,</span><span style="color:#008040">5728</span><span style="color:navy">,</span><span style="color:#008040">1541</span><span style="color:navy">,</span><span style="color:#008040">5818</span><span style="color:navy">,</span><span style="color:#008040">1542</span><span style="color:navy">,</span><span style="color:#008040">5922</span><span style="color:navy">,</span><span style="color:#008040">1560</span><span style="color:navy">,</span><span style="color:#008040">5978
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1561</span><span style="color:navy">,</span><span style="color:#008040">6030</span><span style="color:navy">,</span><span style="color:#008040">1562</span><span style="color:navy">,</span><span style="color:#008040">6151</span><span style="color:navy">,</span><span style="color:#008040">1563</span><span style="color:navy">,</span><span style="color:#008040">6195</span><span style="color:navy">,</span><span style="color:#008040">1564</span><span style="color:navy">,</span><span style="color:#008040">6234</span><span style="color:navy">,</span><span style="color:#008040">1565</span><span style="color:navy">,</span><span style="color:#008040">6292
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1566</span><span style="color:navy">,</span><span style="color:#008040">6341</span><span style="color:navy">,</span><span style="color:#008040">1567</span><span style="color:navy">,</span><span style="color:#008040">6382</span><span style="color:navy">,</span><span style="color:#008040">1568</span><span style="color:navy">,</span><span style="color:#008040">6500</span><span style="color:navy">,</span><span style="color:#008040">1580</span><span style="color:navy">,</span><span style="color:#008040">6573</span><span style="color:navy">,</span><span style="color:#008040">1600</span><span style="color:navy">,</span><span style="color:#008040">6641
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1601</span><span style="color:navy">,</span><span style="color:#008040">6666</span><span style="color:navy">,</span><span style="color:#008040">1602</span><span style="color:navy">,</span><span style="color:#008040">6746</span><span style="color:navy">,</span><span style="color:#008040">1620</span><span style="color:navy">,</span><span style="color:#008040">6903</span><span style="color:navy">,</span><span style="color:#008040">1621</span><span style="color:navy">,</span><span style="color:#008040">6987</span><span style="color:navy">,</span><span style="color:#008040">1622</span><span style="color:navy">,</span><span style="color:#008040">7113
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1640</span><span style="color:navy">,</span><span style="color:#008040">7185</span><span style="color:navy">,</span><span style="color:#008040">1641</span><span style="color:navy">,</span><span style="color:#008040">7234</span><span style="color:navy">,</span><span style="color:#008040">1660</span><span style="color:navy">,</span><span style="color:#008040">7362</span><span style="color:navy">,</span><span style="color:#008040">1680</span><span style="color:navy">,</span><span style="color:#008040">7429</span><span style="color:navy">,</span><span style="color:#008040">1700</span><span style="color:navy">,</span><span style="color:#008040">7463
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1720</span><span style="color:navy">,</span><span style="color:#008040">7637</span><span style="color:navy">,</span><span style="color:#008040">1740</span><span style="color:navy">,</span><span style="color:#008040">7716</span><span style="color:navy">,</span><span style="color:#008040">1741</span><span style="color:navy">,</span><span style="color:#008040">7804</span><span style="color:navy">,</span><span style="color:#008040">1760</span><span style="color:navy">,</span><span style="color:#008040">7915</span><span style="color:navy">,</span><span style="color:#008040">1780</span><span style="color:navy">,</span><span style="color:#008040">7988
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1800</span><span style="color:navy">,</span><span style="color:#008040">8092</span><span style="color:navy">,</span><span style="color:#008040">1801</span><span style="color:navy">,</span><span style="color:#008040">8166</span><span style="color:navy">,</span><span style="color:#008040">1820</span><span style="color:navy">,</span><span style="color:#008040">8250</span><span style="color:navy">,</span><span style="color:#008040">1821</span><span style="color:navy">,</span><span style="color:#008040">8318</span><span style="color:navy">,</span><span style="color:#008040">1840</span><span style="color:navy">,</span><span style="color:#008040">8453
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1860</span><span style="color:navy">,</span><span style="color:#008040">8524</span><span style="color:navy">,</span><span style="color:#008040">1861</span><span style="color:navy">,</span><span style="color:#008040">8611</span><span style="color:navy">,</span><span style="color:#008040">1862</span><span style="color:navy">,</span><span style="color:#008040">8678</span><span style="color:navy">,</span><span style="color:#008040">1863</span><span style="color:navy">,</span><span style="color:#008040">8800</span><span style="color:navy">,</span><span style="color:#008040">1864</span><span style="color:navy">,</span><span style="color:#008040">8959
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1865</span><span style="color:navy">,</span><span style="color:#008040">9058</span><span style="color:navy">,</span><span style="color:#008040">1866</span><span style="color:navy">,</span><span style="color:#008040">9161</span><span style="color:navy">,</span><span style="color:#008040">1880</span><span style="color:navy">,</span><span style="color:#008040">9261</span><span style="color:navy">,</span><span style="color:#008040">1881</span><span style="color:navy">,</span><span style="color:#008040">9377</span><span style="color:navy">,</span><span style="color:#008040">1882</span><span style="color:navy">,</span><span style="color:#008040">9499
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1883</span><span style="color:navy">,</span><span style="color:#008040">9582</span><span style="color:navy">,</span><span style="color:#008040">1900</span><span style="color:navy">,</span><span style="color:#008040">9741</span><span style="color:navy">,</span><span style="color:#008040">1920</span><span style="color:navy">,</span><span style="color:#008040">9810</span><span style="color:navy">,</span><span style="color:#008040">1921</span><span style="color:navy">,</span><span style="color:#008040">9854</span><span style="color:navy">,</span><span style="color:#008040">1922</span><span style="color:navy">,</span><span style="color:#008040">10003
</span><span style="color:gray">TRANGROUP:67B9                 </span><span style="color:navy">dw </span><span style="color:#008040">1923</span><span style="color:navy">,</span><span style="color:#008040">10182</span><span style="color:navy">,</span><span style="color:#008040">1924</span><span style="color:navy">,</span><span style="color:#008040">10312</span><span style="color:navy">,</span><span style="color:#008040">1925</span><span style="color:navy">,</span><span style="color:#008040">10432</span><span style="color:navy">,</span><span style="color:#008040">1926</span><span style="color:navy">,</span><span style="color:#008040">10431</span><span style="color:navy">,</span><span style="color:#008040">1927</span><span style="color:navy">,</span><span style="color:#008040">10515
</span><span style="color:gray">TRANGROUP:6A89 </span>$M_ID_3_183     <span style="color:navy">dw </span><span style="color:#008040">1107
</span><span style="color:gray">TRANGROUP:6A8B                 </span><span style="color:navy">dw </span><span style="color:#008040">10602
</span><span style="color:gray">TRANGROUP:6A8D </span>MSG_1020        <span style="color:navy">db </span><span style="color:#008040">15
</span><span style="color:gray">TRANGROUP:6A8E                 </span><span style="color:navy">db &#039;%1 bytes free&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6A9D </span>MSG_1015        <span style="color:navy">db </span><span style="color:#008040">35
</span><span style="color:gray">TRANGROUP:6A9E                 </span><span style="color:navy">db &#039;File cannot be copied onto itself&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6AC1 </span>MSG_1004        <span style="color:navy">db </span><span style="color:#008040">25
</span><span style="color:gray">TRANGROUP:6AC2                 </span><span style="color:navy">db &#039;Insufficient disk space&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6ADB </span>MSG_1026        <span style="color:navy">db </span><span style="color:#008040">19
</span><span style="color:gray">TRANGROUP:6ADC                 </span><span style="color:navy">db &#039;Invalid code page&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6AEF </span>MSG_1031        <span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:6AF0                 </span><span style="color:navy">db &#039;Invalid date&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6AFE </span>MSG_1035        <span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:6AFF                 </span><span style="color:navy">db &#039;Invalid time&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6B0D </span>MSG_1062        <span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:6B0E                 </span><span style="color:navy">db &#039;Invalid path&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6B1C </span>MSG_1028        <span style="color:navy">db </span><span style="color:#008040">33
</span><span style="color:gray">TRANGROUP:6B1D                 </span><span style="color:navy">db &#039;Press any key to continue . . .&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6B3E </span>MSG_1045        <span style="color:navy">db </span><span style="color:#008040">28
</span><span style="color:gray">TRANGROUP:6B3F                 </span><span style="color:navy">db &#039;Unable to create directory&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6B5B </span>MSG_1041        <span style="color:navy">db </span><span style="color:#008040">33
</span><span style="color:gray">TRANGROUP:6B5C                 </span><span style="color:navy">db &#039;Volume in drive %1 has no label&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6B7D </span>MSG_1042        <span style="color:navy">db </span><span style="color:#008040">26
</span><span style="color:gray">TRANGROUP:6B7E                 </span><span style="color:navy">db &#039;Volume in drive %1 is %2&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6B98 </span>MSG_1043        <span style="color:navy">db </span><span style="color:#008040">31
</span><span style="color:gray">TRANGROUP:6B99                 </span><span style="color:navy">db &#039;Volume Serial Number is %1-%2&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6BB8 </span>MSG_1002        <span style="color:navy">db </span><span style="color:#008040">39
</span><span style="color:gray">TRANGROUP:6BB9                 </span><span style="color:navy">db &#039;Duplicate file name or file not found&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6BE0 </span>MSG_1003        <span style="color:navy">db </span><span style="color:#008040">27
</span><span style="color:gray">TRANGROUP:6BE1                 </span><span style="color:navy">db &#039;Invalid path or file name&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6BFC </span>MSG_1007        <span style="color:navy">db </span><span style="color:#008040">26
</span><span style="color:gray">TRANGROUP:6BFD                 </span><span style="color:navy">db &#039;Out of environment space&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6C17 </span>MSG_1008        <span style="color:navy">db </span><span style="color:#008040">21
</span><span style="color:gray">TRANGROUP:6C18                 </span><span style="color:navy">db &#039;File creation error&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6C2D </span>MSG_1009        <span style="color:navy">db </span><span style="color:#008040">20
</span><span style="color:gray">TRANGROUP:6C2E                 </span><span style="color:navy">db &#039;Batch file missing&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6C42 </span>MSG_1010        <span style="color:navy">db </span><span style="color:#008040">31
</span><span style="color:gray">TRANGROUP:6C43                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:6C43                 </span><span style="color:navy">db &#039;Insert disk with batch file&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6C62 </span>MSG_1011        <span style="color:navy">db </span><span style="color:#008040">26
</span><span style="color:gray">TRANGROUP:6C63                 </span><span style="color:navy">db &#039;Bad command or file name&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6C7D </span>MSG_1012        <span style="color:navy">db </span><span style="color:#008040">28
</span><span style="color:gray">TRANGROUP:6C7E                 </span><span style="color:navy">db &#039;REXX interpreter not found&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6C9A </span>MSG_1014        <span style="color:navy">db </span><span style="color:#008040">16
</span><span style="color:gray">TRANGROUP:6C9B                 </span><span style="color:navy">db &#039;Access denied &#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6CAB </span>MSG_1016        <span style="color:navy">db </span><span style="color:#008040">41
</span><span style="color:gray">TRANGROUP:6CAC                 </span><span style="color:navy">db &#039;Content of destination lost before copy&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6CD5 </span>MSG_1017        <span style="color:navy">db </span><span style="color:#008040">36
</span><span style="color:gray">TRANGROUP:6CD6                 </span><span style="color:navy">db &#039;Invalid filename or file not found&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6CFA                 </span><span style="color:navy">db </span><span style="color:#008040">19
</span><span style="color:gray">TRANGROUP:6CFB                 </span><span style="color:navy">db &#039;%1 file(s) copied&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6D0E                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:6D0F                 </span><span style="color:navy">db &#039;%1 file(s) &#039;
</span><span style="color:gray">TRANGROUP:6D1A                 </span><span style="color:navy">db </span><span style="color:#008040">29
</span><span style="color:gray">TRANGROUP:6D1B                 </span><span style="color:navy">db &#039;Invalid drive specification&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6D38                 </span><span style="color:navy">db </span><span style="color:#008040">38
</span><span style="color:gray">TRANGROUP:6D39                 </span><span style="color:navy">db &#039;Code page %1 not prepared for system&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6D5F                 </span><span style="color:navy">db </span><span style="color:#008040">43
</span><span style="color:gray">TRANGROUP:6D60                 </span><span style="color:navy">db &#039;Code page %1 not prepared for all devices&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6D8B                 </span><span style="color:navy">db </span><span style="color:#008040">22
</span><span style="color:gray">TRANGROUP:6D8C                 </span><span style="color:navy">db &#039;Active code page: %1&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6DA2                 </span><span style="color:navy">db </span><span style="color:#008040">23
</span><span style="color:gray">TRANGROUP:6DA3                 </span><span style="color:navy">db &#039;NLSFUNC not installed&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6DBA                 </span><span style="color:navy">db </span><span style="color:#008040">32
</span><span style="color:gray">TRANGROUP:6DBB                 </span><span style="color:navy">db &#039;Current drive is no longer valid&#039;
</span><span style="color:gray">TRANGROUP:6DDB                 </span><span style="color:navy">db </span><span style="color:#008040">17
</span><span style="color:gray">TRANGROUP:6DDC                 </span><span style="color:navy">db &#039;Label not found&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6DED                 </span><span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:6DEE                 </span><span style="color:navy">db &#039;Syntax error&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6DFC                 </span><span style="color:navy">db </span><span style="color:#008040">23
</span><span style="color:gray">TRANGROUP:6DFD                 </span><span style="color:navy">db &#039;Current date is %1 %2&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6E14                 </span><span style="color:navy">db </span><span style="color:#008040">21
</span><span style="color:gray">TRANGROUP:6E15                 </span><span style="color:navy">db &#039;SunMonTueWedThuFriSat&#039;
</span><span style="color:gray">TRANGROUP:6E2A                 </span><span style="color:navy">db </span><span style="color:#008040">21
</span><span style="color:gray">TRANGROUP:6E2B                 </span><span style="color:navy">db &#039;Enter new date (%1): &#039;
</span><span style="color:gray">TRANGROUP:6E40                 </span><span style="color:navy">db </span><span style="color:#008040">20
</span><span style="color:gray">TRANGROUP:6E41                 </span><span style="color:navy">db &#039;Current time is %1&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6E55                 </span><span style="color:navy">db </span><span style="color:#008040">16
</span><span style="color:gray">TRANGROUP:6E56                 </span><span style="color:navy">db &#039;Enter new time: &#039;
</span><span style="color:gray">TRANGROUP:6E66                 </span><span style="color:navy">db </span><span style="color:#008040">18
</span><span style="color:gray">TRANGROUP:6E67                 </span><span style="color:navy">db &#039;,    Delete (Y/N)?&#039;
</span><span style="color:gray">TRANGROUP:6E79                 </span><span style="color:navy">db </span><span style="color:#008040">60
</span><span style="color:gray">TRANGROUP:6E7A                 </span><span style="color:navy">db &#039;All files in directory will be deleted!&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6E7A                 </span><span style="color:navy">db &#039;Are you sure (Y/N)?&#039;
</span><span style="color:gray">TRANGROUP:6EB6 </span>MSG_1040        <span style="color:navy">db </span><span style="color:#008040">18
</span><span style="color:gray">TRANGROUP:6EB7                 </span><span style="color:navy">db &#039;PC DOS Version 7.1&#039;
</span><span style="color:gray">TRANGROUP:6EC9                 </span><span style="color:navy">db </span><span style="color:#008040">19
</span><span style="color:gray">TRANGROUP:6ECA                 </span><span style="color:navy">db &#039;Invalid directory&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6EDD                 </span><span style="color:navy">db </span><span style="color:#008040">54
</span><span style="color:gray">TRANGROUP:6EDE                 </span><span style="color:navy">db &#039;Invalid path, not directory,&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6EDE                 </span><span style="color:navy">db &#039;or directory not empty&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6F14                 </span><span style="color:navy">db </span><span style="color:#008040">24
</span><span style="color:gray">TRANGROUP:6F15                 </span><span style="color:navy">db &#039;Must specify ON or OFF&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6F2D                 </span><span style="color:navy">db </span><span style="color:#008040">17
</span><span style="color:gray">TRANGROUP:6F2E                 </span><span style="color:navy">db &#039;Directory of %1&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6F3F                 </span><span style="color:navy">db </span><span style="color:#008040">9
</span><span style="color:gray">TRANGROUP:6F40                 </span><span style="color:navy">db &#039;No Path&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6F49                 </span><span style="color:navy">db </span><span style="color:#008040">30
</span><span style="color:gray">TRANGROUP:6F4A                 </span><span style="color:navy">db &#039;Invalid drive in search path&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6F68                 </span><span style="color:navy">db </span><span style="color:#008040">16
</span><span style="color:gray">TRANGROUP:6F69                 </span><span style="color:navy">db &#039;Invalid device&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6F79                 </span><span style="color:navy">db </span><span style="color:#008040">22
</span><span style="color:gray">TRANGROUP:6F7A                 </span><span style="color:navy">db &#039;FOR cannot be nested&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6F90                 </span><span style="color:navy">db </span><span style="color:#008040">37
</span><span style="color:gray">TRANGROUP:6F91                 </span><span style="color:navy">db &#039;Intermediate file error during pipe&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6FB6                 </span><span style="color:navy">db </span><span style="color:#008040">38
</span><span style="color:gray">TRANGROUP:6FB7                 </span><span style="color:navy">db &#039;Cannot do binary reads from a device&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6FDD </span>MSG_1055        <span style="color:navy">db </span><span style="color:#008040">13
</span><span style="color:gray">TRANGROUP:6FDE                 </span><span style="color:navy">db &#039;BREAK is %1&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6FEB                 </span><span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:6FEC                 </span><span style="color:navy">db &#039;VERIFY is %1&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:6FFA                 </span><span style="color:navy">db </span><span style="color:#008040">12
</span><span style="color:gray">TRANGROUP:6FFB                 </span><span style="color:navy">db &#039;ECHO is %1&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7007                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:7008                 </span><span style="color:navy">db &#039;off&#039;,0
</span><span style="color:gray">TRANGROUP:700C                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:700D                 </span><span style="color:navy">db &#039;on&#039;,0
</span><span style="color:gray">TRANGROUP:7010 </span>MSG_1061        <span style="color:navy">db </span><span style="color:#008040">25
</span><span style="color:gray">TRANGROUP:7011                 </span><span style="color:navy">db &#039;Error writing to device&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:702A                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:702B </span>MSG_1063        <span style="color:navy">db &#039;%1&#039;
</span><span style="color:gray">TRANGROUP:702D                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:702E                 </span><span style="color:navy">db &#039;%1&#039;
</span><span style="color:gray">TRANGROUP:7030                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:7031                 </span><span style="color:navy">db &#039;%1&#039;
</span><span style="color:gray">TRANGROUP:7033                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:7034                 </span><span style="color:navy">db &#039;%1&#039;
</span><span style="color:gray">TRANGROUP:7036 </span>MSG_1067        <span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:7037                 </span><span style="color:navy">db </span><span style="color:#008040">9
</span><span style="color:gray">TRANGROUP:7038 </span>MSG_1068        <span style="color:navy">db </span><span style="color:#008040">12
</span><span style="color:gray">TRANGROUP:7039                 </span><span style="color:navy">db &#039; &lt;DIR&gt;      &#039;
</span><span style="color:gray">TRANGROUP:7045                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:7046                 </span><span style="color:navy">db </span><span style="color:#008040">8</span><span style="color:navy">, </span><span style="color:#008040">20h</span><span style="color:navy">, </span><span style="color:#008040">8
</span><span style="color:gray">TRANGROUP:7049 </span>MSG_1070        <span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:704A                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:704C                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:704D                 </span><span style="color:navy">db &#039;%1&#039;
</span><span style="color:gray">TRANGROUP:704F </span>MSG_1072        <span style="color:navy">db </span><span style="color:#008040">9
</span><span style="color:gray">TRANGROUP:7050                 </span><span style="color:navy">db &#039;mm-dd-yy&#039;,0
</span><span style="color:gray">TRANGROUP:7059 </span>MSG_1073        <span style="color:navy">db </span><span style="color:#008040">9
</span><span style="color:gray">TRANGROUP:705A                 </span><span style="color:navy">db &#039;dd-mm-yy&#039;,0
</span><span style="color:gray">TRANGROUP:7063 </span>MSG_1074        <span style="color:navy">db </span><span style="color:#008040">9
</span><span style="color:gray">TRANGROUP:7064                 </span><span style="color:navy">db &#039;yy-mm-dd&#039;,0
</span><span style="color:gray">TRANGROUP:706D </span>MSG_1075        <span style="color:navy">db </span><span style="color:#008040">5
</span><span style="color:gray">TRANGROUP:706E                 </span><span style="color:navy">db &#039;%1 %2&#039;
</span><span style="color:gray">TRANGROUP:7073                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:7074                 </span><span style="color:navy">db &#039;%1&#039;
</span><span style="color:gray">TRANGROUP:7076                 </span><span style="color:navy">db </span><span style="color:#008040">7
</span><span style="color:gray">TRANGROUP:7077                 </span><span style="color:navy">db &#039; %1  %2&#039;
</span><span style="color:gray">TRANGROUP:707E </span>MSG_1078        <span style="color:navy">db </span><span style="color:#008040">26
</span><span style="color:gray">TRANGROUP:707F                 </span><span style="color:navy">db &#039;Directory already exists&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7099 </span>MSG_1079        <span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:709A                 </span><span style="color:navy">db &#039;%1 bytes&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:70A4 </span>MSG_1080        <span style="color:navy">db </span><span style="color:#008040">21
</span><span style="color:gray">TRANGROUP:70A5                 </span><span style="color:navy">db &#039;Total files listed:&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:70BA                 </span><span style="color:navy">db </span><span style="color:#008040">42
</span><span style="color:gray">TRANGROUP:70BB                 </span><span style="color:navy">db &#039;(Error occurred in environment variable)&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:70E5 </span>MSG_1082        <span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:70E6                 </span><span style="color:navy">db &#039; [Y,N,ESC]?&#039;
</span><span style="color:gray">TRANGROUP:70F1 </span>MSG_1083        <span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:70F2                 </span><span style="color:navy">db &#039;YN&#039;
</span><span style="color:gray">TRANGROUP:70F4 </span>MSG_1084        <span style="color:navy">db </span><span style="color:#008040">15
</span><span style="color:gray">TRANGROUP:70F5                 </span><span style="color:navy">db &#039;(continuing %1)&#039;
</span><span style="color:gray">TRANGROUP:7104                 </span><span style="color:navy">db </span><span style="color:#008040">13
</span><span style="color:gray">TRANGROUP:7105                 </span><span style="color:navy">db &#039;Revision %1&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7112                 </span><span style="color:navy">db </span><span style="color:#008040">13
</span><span style="color:gray">TRANGROUP:7113                 </span><span style="color:navy">db &#039;DOS is in ROM&#039;
</span><span style="color:gray">TRANGROUP:7120                 </span><span style="color:navy">db </span><span style="color:#008040">13
</span><span style="color:gray">TRANGROUP:7121                 </span><span style="color:navy">db &#039;DOS is in HMA&#039;
</span><span style="color:gray">TRANGROUP:712E                 </span><span style="color:navy">db </span><span style="color:#008040">20
</span><span style="color:gray">TRANGROUP:712F                 </span><span style="color:navy">db &#039;DOS is in low memory&#039;
</span><span style="color:gray">TRANGROUP:7143                 </span><span style="color:navy">db </span><span style="color:#008040">28
</span><span style="color:gray">TRANGROUP:7144                 </span><span style="color:navy">db &#039;Cannot Loadhigh batch file&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7160 </span>MSG_1095        <span style="color:navy">db </span><span style="color:#008040">28
</span><span style="color:gray">TRANGROUP:7161                 </span><span style="color:navy">db &#039;LOADHIGH: Invalid filename&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:717D                 </span><span style="color:navy">db </span><span style="color:#008040">48
</span><span style="color:gray">TRANGROUP:717E                 </span><span style="color:navy">db &#039;Cannot open specified country information file&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:71AE </span>MSG_1097        <span style="color:navy">db </span><span style="color:#008040">28
</span><span style="color:gray">TRANGROUP:71AF                 </span><span style="color:navy">db &#039;LoadHigh: Invalid argument&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:71CB </span>MSG_1098        <span style="color:navy">db </span><span style="color:#008040">28
</span><span style="color:gray">TRANGROUP:71CC                 </span><span style="color:navy">db &#039;Required parameter missing&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:71E8                 </span><span style="color:navy">db </span><span style="color:#008040">21
</span><span style="color:gray">TRANGROUP:71E9                 </span><span style="color:navy">db &#039;Unrecognized switch&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:71FE                 </span><span style="color:navy">db </span><span style="color:#008040">37
</span><span style="color:gray">TRANGROUP:71FF                 </span><span style="color:navy">db &#039;A bad UMB number has been specified&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7224 </span>MSG_1103        <span style="color:navy">db </span><span style="color:#008040">26
</span><span style="color:gray">TRANGROUP:7225                 </span><span style="color:navy">db &#039;Overwrite %1 (Yes/No/All)?&#039;
</span><span style="color:gray">TRANGROUP:723F </span>MSG_1104        <span style="color:navy">db </span><span style="color:#008040">3                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:7240 </span>_Y_es           <span style="color:navy">db &#039;</span><span style="color:green">Y&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:7241 </span>_N_o            <span style="color:navy">db &#039;</span><span style="color:green">N&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:7242 </span>_A_ll           <span style="color:navy">db &#039;</span><span style="color:green">A&#039;                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:7243 </span>MSG_1105        <span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:7244                 </span><span style="color:navy">db &#039; &lt;DIR&gt;    &#039;
</span><span style="color:gray">TRANGROUP:724E </span>MSG_1106        <span style="color:navy">db </span><span style="color:#008040">17
</span><span style="color:gray">TRANGROUP:724F                 </span><span style="color:navy">db &#039;%1 K bytes free&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7260 </span>MSG_1200        <span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:7261 </span>MSG_1300        <span style="color:navy">db </span><span style="color:#008040">134
</span><span style="color:gray">TRANGROUP:7262                 </span><span style="color:navy">db &#039;Sets or clears extended CTRL+C checking.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7262                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7262                 </span><span style="color:navy">db &#039;BREAK [ON | OFF]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7262                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7262                 </span><span style="color:navy">db &#039;Type BREAK without a parameter to display the current BREAK setti&#039;
</span><span style="color:gray">TRANGROUP:7262                 </span><span style="color:navy">db &#039;ng.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:72E8 </span>MSG_1320        <span style="color:navy">db </span><span style="color:#008040">63
</span><span style="color:gray">TRANGROUP:72E9                 </span><span style="color:navy">db &#039;Displays or sets the active code page number.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7318                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:731A                 </span><span style="color:navy">db &#039;CHCP [nnn]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7326                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7328                 </span><span style="color:navy">db </span><span style="color:#008040">112
</span><span style="color:gray">TRANGROUP:7329                 </span><span style="color:navy">db &#039;  nnn   Specifies a code page number.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7350                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7352                 </span><span style="color:navy">db &#039;Type CHCP without a parameter to display the active code page num&#039;
</span><span style="color:gray">TRANGROUP:7352                 </span><span style="color:navy">db &#039;ber.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7399 </span>MSG_1340        <span style="color:navy">db </span><span style="color:#008040">91
</span><span style="color:gray">TRANGROUP:739A                 </span><span style="color:navy">db &#039;Displays the name of or changes the current directory.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:73D2                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:73D4                 </span><span style="color:navy">db &#039;CHDIR [drive:][path]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:73D4                 </span><span style="color:navy">db &#039;CHDIR[..]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:73F5                 </span><span style="color:navy">db </span><span style="color:#008040">98
</span><span style="color:gray">TRANGROUP:73F6                 </span><span style="color:navy">db &#039;CD [drive:][path]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:73F6                 </span><span style="color:navy">db &#039;CD[..]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7411                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7413                 </span><span style="color:navy">db &#039;  ..   Specifies that you want to change to the parent directory.&#039;
</span><span style="color:gray">TRANGROUP:7413                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7456                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7458                 </span><span style="color:navy">db </span><span style="color:#008040">145
</span><span style="color:gray">TRANGROUP:7459                 </span><span style="color:navy">db &#039;Type CD drive: to display the current directory in the specified &#039;
</span><span style="color:gray">TRANGROUP:7459                 </span><span style="color:navy">db &#039;drive.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7459                 </span><span style="color:navy">db &#039;Type CD without parameters to display the current drive and direc&#039;
</span><span style="color:gray">TRANGROUP:7459                 </span><span style="color:navy">db &#039;tory.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:74EA </span>MSG_1360        <span style="color:navy">db </span><span style="color:#008040">27
</span><span style="color:gray">TRANGROUP:74EB                 </span><span style="color:navy">db &#039;Clears the screen.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:74FF                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7501                 </span><span style="color:navy">db &#039;CLS&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7506 </span>MSG_1400        <span style="color:navy">db </span><span style="color:#008040">156
</span><span style="color:gray">TRANGROUP:7507                 </span><span style="color:navy">db &#039;Copies one or more files to another location.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7536                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7538                 </span><span style="color:navy">db &#039;COPY [/A | /B] source [/A | /B] [+ source [/A | /B] [+ ...]] [des&#039;
</span><span style="color:gray">TRANGROUP:7538                 </span><span style="color:navy">db &#039;tination&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7583                 </span><span style="color:navy">db &#039;  [/A | /B]] [/V] [/Y | /-Y]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:75A1                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:75A3                 </span><span style="color:navy">db </span><span style="color:#008040">104
</span><span style="color:gray">TRANGROUP:75A4                 </span><span style="color:navy">db &#039;  source       Specifies the file or files to be copied.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:75A4                 </span><span style="color:navy">db &#039;  /A           Indicates an ASCII text file.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:760C                 </span><span style="color:navy">db </span><span style="color:#008040">118
</span><span style="color:gray">TRANGROUP:760D                 </span><span style="color:navy">db &#039;  /B           Indicates a binary file.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:760D                 </span><span style="color:navy">db &#039;  destination  Specifies the directory and/or filename for the ne&#039;
</span><span style="color:gray">TRANGROUP:760D                 </span><span style="color:navy">db &#039;w file(s).&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7683 </span>MSG_1403        <span style="color:navy">db </span><span style="color:#008040">63
</span><span style="color:gray">TRANGROUP:7684                 </span><span style="color:navy">db &#039;  /V           Verifies that new files are written correctly.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:76C3 </span>MSG_1404        <span style="color:navy">db </span><span style="color:#008040">116
</span><span style="color:gray">TRANGROUP:76C4                 </span><span style="color:navy">db &#039;  /Y           Suppresses prompting to confirm you want to overwr&#039;
</span><span style="color:gray">TRANGROUP:76C4                 </span><span style="color:navy">db &#039;ite an&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:76C4                 </span><span style="color:navy">db &#039;               existing destination file.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7738 </span>MSG_1405        <span style="color:navy">db </span><span style="color:#008040">114
</span><span style="color:gray">TRANGROUP:7739                 </span><span style="color:navy">db &#039;  /-Y          Causes prompting to confirm you want to overwrite &#039;
</span><span style="color:gray">TRANGROUP:7739                 </span><span style="color:navy">db &#039;an&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7739                 </span><span style="color:navy">db &#039;               existing destination file.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7739                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:77AB </span>MSG_1406        <span style="color:navy">db </span><span style="color:#008040">66
</span><span style="color:gray">TRANGROUP:77AC                 </span><span style="color:navy">db &#039;The switch /Y may be preset in the COPYCMD environment variable.&#039;,0Dh
</span><span style="color:gray">TRANGROUP:77AC                 </span><span style="color:navy">db </span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:77EE </span>MSG_1407        <span style="color:navy">db </span><span style="color:#008040">135
</span><span style="color:gray">TRANGROUP:77EF                 </span><span style="color:navy">db &#039;To append files, specify a single file for destination, but multi&#039; </span><span style="color:olive">; ...
</span><span style="color:gray">TRANGROUP:77EF                 </span><span style="color:navy">db &#039;ple files&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:77EF                 </span><span style="color:navy">db &#039;for source (using wildcards or file1+file2+file3 format).&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7876 </span>MSG_1420        <span style="color:navy">db </span><span style="color:#008040">138
</span><span style="color:gray">TRANGROUP:7877                 </span><span style="color:navy">db &#039;Changes the terminal device used to control your system.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:78B1                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:78B3                 </span><span style="color:navy">db &#039;CTTY device&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:78C0                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:78C2                 </span><span style="color:navy">db &#039;  device   The terminal device you want to use, such as COM1.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7901 </span>MSG_1440        <span style="color:navy">db </span><span style="color:#008040">38
</span><span style="color:gray">TRANGROUP:7902                 </span><span style="color:navy">db &#039;Displays or sets the date.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7902                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7902                 </span><span style="color:navy">db &#039;DATE&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7926                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7928                 </span><span style="color:navy">db </span><span style="color:#008040">131
</span><span style="color:gray">TRANGROUP:7929                 </span><span style="color:navy">db &#039;Type DATE without parameters to display the current date setting &#039;
</span><span style="color:gray">TRANGROUP:7929                 </span><span style="color:navy">db &#039;and&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7929                 </span><span style="color:navy">db &#039;a prompt for a new one.  Press ENTER to keep the same date.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:79AC </span>MSG_1460        <span style="color:navy">db </span><span style="color:#008040">100
</span><span style="color:gray">TRANGROUP:79AD                 </span><span style="color:navy">db &#039;Deletes one or more files.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:79AD                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:79AD                 </span><span style="color:navy">db &#039;DEL [drive:][path]filename [/P]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:79AD                 </span><span style="color:navy">db &#039;ERASE [drive:][path]filename [/P]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7A0F                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7A11                 </span><span style="color:navy">db </span><span style="color:#008040">131
</span><span style="color:gray">TRANGROUP:7A12                 </span><span style="color:navy">db &#039;  [drive:][path]filename  Specifies the file(s) to delete.  Speci&#039;
</span><span style="color:gray">TRANGROUP:7A12                 </span><span style="color:navy">db &#039;fy multiple&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7A12                 </span><span style="color:navy">db &#039;                          files by using wildcards.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7A95                 </span><span style="color:navy">db </span><span style="color:#008040">79
</span><span style="color:gray">TRANGROUP:7A96                 </span><span style="color:navy">db &#039;  /P                      Prompts for confirmation before deletin&#039;
</span><span style="color:gray">TRANGROUP:7A96                 </span><span style="color:navy">db &#039;g each file.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7AE5 </span>MSG_1480        <span style="color:navy">db </span><span style="color:#008040">159
</span><span style="color:gray">TRANGROUP:7AE6                 </span><span style="color:navy">db &#039;Displays a list of files and subdirectories in a directory.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7AE6                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7AE6                 </span><span style="color:navy">db &#039;DIR [drive:][path][filename] [/P] [/W] [/A[[:]attribs]] [/O[[:]so&#039;
</span><span style="color:gray">TRANGROUP:7AE6                 </span><span style="color:navy">db &#039;rtord]]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7AE6                 </span><span style="color:navy">db &#039;    [/S] [/B] [/L]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7AE6                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7B85 </span>MSG_1481        <span style="color:navy">db </span><span style="color:#008040">77
</span><span style="color:gray">TRANGROUP:7B86                 </span><span style="color:navy">db &#039;  [drive:][path][filename]   Specifies drive, directory, and file&#039;
</span><span style="color:gray">TRANGROUP:7B86                 </span><span style="color:navy">db &#039;s to list.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7BD3                 </span><span style="color:navy">db </span><span style="color:#008040">91
</span><span style="color:gray">TRANGROUP:7BD4                 </span><span style="color:navy">db &#039;  /P      Pauses after each full screen of information.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7BD4                 </span><span style="color:navy">db &#039;  /W      Uses wide list format.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7C2F </span>MSG_1483        <span style="color:navy">db </span><span style="color:#008040">126
</span><span style="color:gray">TRANGROUP:7C30                 </span><span style="color:navy">db &#039;  /A      Displays files with specified attributes.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7C30                 </span><span style="color:navy">db &#039;  attribs   &#039;
</span><span style="color:gray">TRANGROUP:7C71                 </span><span style="color:navy">db &#039;D  Directories   R  Read-only files         H  Hidden files&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7CAE                 </span><span style="color:navy">db </span><span style="color:#008040">124
</span><span style="color:gray">TRANGROUP:7CAF                 </span><span style="color:navy">db &#039;            S  System files  A  Files ready to archive  -  Prefix&#039;
</span><span style="color:gray">TRANGROUP:7CAF                 </span><span style="color:navy">db &#039; meaning &quot;not&quot;&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7CAF                 </span><span style="color:navy">db &#039;  /O      Lists by files in sorted order.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7D2B </span>MSG_1485        <span style="color:navy">db </span><span style="color:#008040">149
</span><span style="color:gray">TRANGROUP:7D2C                 </span><span style="color:navy">db &#039;  sortord   N  By name (alphabetic)       S  By size (smallest fi&#039;
</span><span style="color:gray">TRANGROUP:7D2C                 </span><span style="color:navy">db &#039;rst)&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7D2C                 </span><span style="color:navy">db &#039;            E  By extension (alphabetic)  D  By date &amp; time (earl&#039;
</span><span style="color:gray">TRANGROUP:7D2C                 </span><span style="color:navy">db &#039;iest first)&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7DC1 </span>MSG_1486        <span style="color:navy">db </span><span style="color:#008040">143
</span><span style="color:gray">TRANGROUP:7DC2                 </span><span style="color:navy">db &#039;            G  Group directories first    -  Prefix to reverse or&#039;
</span><span style="color:gray">TRANGROUP:7DC2                 </span><span style="color:navy">db &#039;der&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7DC2                 </span><span style="color:navy">db &#039;  /S      Displays files in specified directory and all subdirect&#039;
</span><span style="color:gray">TRANGROUP:7DC2                 </span><span style="color:navy">db &#039;ories.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7E51 </span>MSG_1487        <span style="color:navy">db </span><span style="color:#008040">94
</span><span style="color:gray">TRANGROUP:7E52                 </span><span style="color:navy">db &#039;  /B      Uses bare format (no heading information or summary).&#039;,0Dh
</span><span style="color:gray">TRANGROUP:7E52                 </span><span style="color:navy">db </span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7E52                 </span><span style="color:navy">db &#039;  /L      Uses lowercase.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7E52                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7EB0 </span>MSG_1488        <span style="color:navy">db </span><span style="color:#008040">146
</span><span style="color:gray">TRANGROUP:7EB1                 </span><span style="color:navy">db &#039;Switches may be preset in the DIRCMD environment variable.  Overr&#039;
</span><span style="color:gray">TRANGROUP:7EB1                 </span><span style="color:navy">db &#039;ide&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7EB1                 </span><span style="color:navy">db &#039;preset switches by prefixing any switch with - (hyphen)--for exam&#039;
</span><span style="color:gray">TRANGROUP:7EB1                 </span><span style="color:navy">db &#039;ple, /-W.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7F43 </span>MSG_1489        <span style="color:navy">db </span><span style="color:#008040">80
</span><span style="color:gray">TRANGROUP:7F44                 </span><span style="color:navy">db &#039;To remove the commas from the DIR output, use the NO_SEP environm&#039;
</span><span style="color:gray">TRANGROUP:7F44                 </span><span style="color:navy">db &#039;ent variable.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7F94 </span>MSG_1500        <span style="color:navy">db </span><span style="color:#008040">62
</span><span style="color:gray">TRANGROUP:7F95                 </span><span style="color:navy">db &#039;Quits the COMMAND.COM program (command interpreter).&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7F95                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7F95                 </span><span style="color:navy">db &#039;EXIT&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7FD3 </span>MSG_1520        <span style="color:navy">db </span><span style="color:#008040">61
</span><span style="color:gray">TRANGROUP:7FD4                 </span><span style="color:navy">db &#039;Creates a directory.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7FD4                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:7FD4                 </span><span style="color:navy">db &#039;MKDIR [drive:]path&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:7FD4                 </span><span style="color:navy">db &#039;MD [drive:]path&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8011 </span>MSG_1540        <span style="color:navy">db </span><span style="color:#008040">93
</span><span style="color:gray">TRANGROUP:8012                 </span><span style="color:navy">db &#039;Displays or sets a search path for executable files.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8012                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8012                 </span><span style="color:navy">db &#039;PATH [[drive:]path[;...]]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8012                 </span><span style="color:navy">db &#039;PATH ;&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8012                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:806F                 </span><span style="color:navy">db </span><span style="color:#008040">107
</span><span style="color:gray">TRANGROUP:8070                 </span><span style="color:navy">db &#039;Type PATH ; to clear all search-path settings and direct PC DOS t&#039;
</span><span style="color:gray">TRANGROUP:8070                 </span><span style="color:navy">db &#039;o search&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8070                 </span><span style="color:navy">db &#039;only in the current directory.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:80DB                 </span><span style="color:navy">db </span><span style="color:#008040">59
</span><span style="color:gray">TRANGROUP:80DC                 </span><span style="color:navy">db &#039;Type PATH without parameters to display the current path.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8117 </span>MSG_1560        <span style="color:navy">db </span><span style="color:#008040">55
</span><span style="color:gray">TRANGROUP:8118                 </span><span style="color:navy">db &#039;Changes the PC DOS command prompt.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8118                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:813E                 </span><span style="color:navy">db &#039;PROMPT [text]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:813E                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:814F </span>MSG_1561        <span style="color:navy">db </span><span style="color:#008040">124
</span><span style="color:gray">TRANGROUP:8150                 </span><span style="color:navy">db &#039;  text    Specifies a new command prompt.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8150                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8150                 </span><span style="color:navy">db &#039;Prompt can be made up of normal characters and the following spec&#039;
</span><span style="color:gray">TRANGROUP:8150                 </span><span style="color:navy">db &#039;ial codes:&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8150                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:81CC </span>MSG_1562        <span style="color:navy">db </span><span style="color:#008040">47
</span><span style="color:gray">TRANGROUP:81CD                 </span><span style="color:navy">db &#039;  $Q   = (equal sign)&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:81CD                 </span><span style="color:navy">db &#039;  $$   $ (dollar sign)&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:81FC </span>MSG_1563        <span style="color:navy">db </span><span style="color:#008040">42
</span><span style="color:gray">TRANGROUP:81FD                 </span><span style="color:navy">db &#039;  $T   Current time&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:81FD                 </span><span style="color:navy">db &#039;  $D   Current date&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8227 </span>MSG_1564        <span style="color:navy">db </span><span style="color:#008040">61
</span><span style="color:gray">TRANGROUP:8228                 </span><span style="color:navy">db &#039;  $P   Current drive and path&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8228                 </span><span style="color:navy">db &#039;  $V   PC DOS version number&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8265 </span>MSG_1565        <span style="color:navy">db </span><span style="color:#008040">52
</span><span style="color:gray">TRANGROUP:8266                 </span><span style="color:navy">db &#039;  $N   Current drive&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8266                 </span><span style="color:navy">db &#039;  $G   &gt; (greater-than sign)&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:829A </span>MSG_1566        <span style="color:navy">db </span><span style="color:#008040">44
</span><span style="color:gray">TRANGROUP:829B                 </span><span style="color:navy">db &#039;  $L   &lt; (less-than sign)&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:829B                 </span><span style="color:navy">db &#039;  $B   | (pipe)&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:82C7 </span>MSG_1567        <span style="color:navy">db </span><span style="color:#008040">121
</span><span style="color:gray">TRANGROUP:82C8                 </span><span style="color:navy">db &#039;  $H   Backspace (erases previous character)&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:82C8                 </span><span style="color:navy">db &#039;  $E   Escape code (ASCII code 27)&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:82C8                 </span><span style="color:navy">db &#039;  $_   Carriage return and linefeed&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:82C8                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8341                 </span><span style="color:navy">db </span><span style="color:#008040">76
</span><span style="color:gray">TRANGROUP:8342                 </span><span style="color:navy">db &#039;Type PROMPT without parameters to reset the prompt to the default&#039;
</span><span style="color:gray">TRANGROUP:8342                 </span><span style="color:navy">db &#039; setting.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:838E </span>MSG_1580        <span style="color:navy">db </span><span style="color:#008040">71
</span><span style="color:gray">TRANGROUP:838F                 </span><span style="color:navy">db &#039;Removes (deletes) a directory.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:838F                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:838F                 </span><span style="color:navy">db &#039;RMDIR [drive:]path&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:838F                 </span><span style="color:navy">db &#039;RD [drive:]path&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:83D6 </span>MSG_1600        <span style="color:navy">db </span><span style="color:#008040">28
</span><span style="color:gray">TRANGROUP:83D7                 </span><span style="color:navy">db &#039;Renames a file or files.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:83D7                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:83F3                 </span><span style="color:navy">db </span><span style="color:#008040">83
</span><span style="color:gray">TRANGROUP:83F4                 </span><span style="color:navy">db &#039;RENAME [drive:][path]filename1 filename2&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:83F4                 </span><span style="color:navy">db &#039;REN [drive:][path]filename1 filename2&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:83F4                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8447 </span>MSG_1602        <span style="color:navy">db </span><span style="color:#008040">160
</span><span style="color:gray">TRANGROUP:8448                 </span><span style="color:navy">db &#039;Note that you cannot specify a new drive or path for your destina&#039;
</span><span style="color:gray">TRANGROUP:8448                 </span><span style="color:navy">db &#039;tion file.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8448                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8448                 </span><span style="color:navy">db &#039;Use MOVE to move files from one directory to another, or to renam&#039;
</span><span style="color:gray">TRANGROUP:8448                 </span><span style="color:navy">db &#039;e a directory.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:84E8 </span>MSG_1620        <span style="color:navy">db </span><span style="color:#008040">87
</span><span style="color:gray">TRANGROUP:84E9                 </span><span style="color:navy">db &#039;Displays, sets, or removes PC DOS environment variables.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:84E9                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:84E9                 </span><span style="color:navy">db &#039;SET [variable=[string]]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:84E9                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8540                 </span><span style="color:navy">db </span><span style="color:#008040">129
</span><span style="color:gray">TRANGROUP:8541                 </span><span style="color:navy">db &#039;  variable  Specifies the environment-variable name.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8541                 </span><span style="color:navy">db &#039;  string    Specifies a series of characters to assign to the var&#039;
</span><span style="color:gray">TRANGROUP:8541                 </span><span style="color:navy">db &#039;iable.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8541                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:85C2 </span>MSG_1622        <span style="color:navy">db </span><span style="color:#008040">75
</span><span style="color:gray">TRANGROUP:85C3                 </span><span style="color:navy">db &#039;Type SET without parameters to display the current environment va&#039;
</span><span style="color:gray">TRANGROUP:85C3                 </span><span style="color:navy">db &#039;riables.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:860E </span>MSG_1640        <span style="color:navy">db </span><span style="color:#008040">52
</span><span style="color:gray">TRANGROUP:860F                 </span><span style="color:navy">db &#039;Displays or sets the system time.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:860F                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:860F                 </span><span style="color:navy">db &#039;TIME [time]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:860F                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8643                 </span><span style="color:navy">db </span><span style="color:#008040">131
</span><span style="color:gray">TRANGROUP:8644                 </span><span style="color:navy">db &#039;Type TIME with no parameters to display the current time setting &#039;
</span><span style="color:gray">TRANGROUP:8644                 </span><span style="color:navy">db &#039;and a prompt&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8644                 </span><span style="color:navy">db &#039;for a new one.  Press ENTER to keep the same time.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:86C7 </span>MSG_1660        <span style="color:navy">db </span><span style="color:#008040">70
</span><span style="color:gray">TRANGROUP:86C8                 </span><span style="color:navy">db &#039;Displays the contents of a text file.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:86C8                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:86C8                 </span><span style="color:navy">db &#039;TYPE [drive:][path]filename&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:870E </span>MSG_1680        <span style="color:navy">db </span><span style="color:#008040">37
</span><span style="color:gray">TRANGROUP:870F                 </span><span style="color:navy">db &#039;Displays the PC DOS Version.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:870F                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:872F                 </span><span style="color:navy">db &#039;VER&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8734 </span>MSG_1700        <span style="color:navy">db </span><span style="color:#008040">177
</span><span style="color:gray">TRANGROUP:8735                 </span><span style="color:navy">db &#039;Tells PC DOS whether to verify that your files are written correc&#039;
</span><span style="color:gray">TRANGROUP:8735                 </span><span style="color:navy">db &#039;tly to a&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8735                 </span><span style="color:navy">db &#039;disk.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8735                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8735                 </span><span style="color:navy">db &#039;VERIFY [ON | OFF]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8735                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8735                 </span><span style="color:navy">db &#039;Type VERIFY without a parameter to display the current VERIFY set&#039;
</span><span style="color:gray">TRANGROUP:8735                 </span><span style="color:navy">db &#039;ting.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:87E6 </span>MSG_1720        <span style="color:navy">db </span><span style="color:#008040">82
</span><span style="color:gray">TRANGROUP:87E7                 </span><span style="color:navy">db &#039;Displays the disk volume label and serial number, if they exist.&#039;,0Dh
</span><span style="color:gray">TRANGROUP:87E7                 </span><span style="color:navy">db </span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:87E7                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:87E7                 </span><span style="color:navy">db &#039;VOL [drive:]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8839 </span>MSG_1740        <span style="color:navy">db </span><span style="color:#008040">91
</span><span style="color:gray">TRANGROUP:883A                 </span><span style="color:navy">db &#039;Calls one batch program from another.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:883A                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:883A                 </span><span style="color:navy">db &#039;CALL [drive:][path]filename [batch-parameters]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:883A                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8895 </span>MSG_1741        <span style="color:navy">db </span><span style="color:#008040">114
</span><span style="color:gray">TRANGROUP:8896                 </span><span style="color:navy">db &#039;  batch-parameters   Specifies any command-line information requi&#039;
</span><span style="color:gray">TRANGROUP:8896                 </span><span style="color:navy">db &#039;red by the&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8896                 </span><span style="color:navy">db &#039;                     batch program.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8908 </span>MSG_1760        <span style="color:navy">db </span><span style="color:#008040">76
</span><span style="color:gray">TRANGROUP:8909                 </span><span style="color:navy">db &#039;Records comments (remarks) in a batch file or CONFIG.SYS.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8909                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8909                 </span><span style="color:navy">db &#039;REM [comment]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8955 </span>MSG_1780        <span style="color:navy">db </span><span style="color:#008040">107
</span><span style="color:gray">TRANGROUP:8956                 </span><span style="color:navy">db &#039;Suspends processing of a batch program and displays the message &quot;&#039;
</span><span style="color:gray">TRANGROUP:8956                 </span><span style="color:navy">db &#039;Press any&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8956                 </span><span style="color:navy">db &#039;key to continue....&quot;&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8956                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8956                 </span><span style="color:navy">db &#039;PAUSE&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:89C1 </span>MSG_1800        <span style="color:navy">db </span><span style="color:#008040">77
</span><span style="color:gray">TRANGROUP:89C2                 </span><span style="color:navy">db &#039;Displays messages, or turns command-echoing on or off.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:89C2                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:89C2                 </span><span style="color:navy">db &#039;  ECHO [ON | OFF]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8A0F </span>MSG_1801        <span style="color:navy">db </span><span style="color:#008040">87
</span><span style="color:gray">TRANGROUP:8A10                 </span><span style="color:navy">db &#039;  ECHO [message]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8A10                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8A10                 </span><span style="color:navy">db &#039;Type ECHO without parameters to display the current echo setting.&#039;
</span><span style="color:gray">TRANGROUP:8A10                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8A67 </span>MSG_1820        <span style="color:navy">db </span><span style="color:#008040">71
</span><span style="color:gray">TRANGROUP:8A68                 </span><span style="color:navy">db &#039;Directs PC DOS to a labelled line in a batch program.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8A68                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8A68                 </span><span style="color:navy">db &#039;GOTO label&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8A68                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8AAF                 </span><span style="color:navy">db </span><span style="color:#008040">138
</span><span style="color:gray">TRANGROUP:8AB0                 </span><span style="color:navy">db &#039;  label   Specifies a text string used in the batch program as a &#039;
</span><span style="color:gray">TRANGROUP:8AB0                 </span><span style="color:navy">db &#039;label.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8AB0                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8AB0                 </span><span style="color:navy">db &#039;You type a label on a line by itself, beginning with a colon.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8B3A </span>MSG_1840        <span style="color:navy">db </span><span style="color:#008040">74
</span><span style="color:gray">TRANGROUP:8B3B                 </span><span style="color:navy">db &#039;Changes the position of replaceable parameters in a batch file.&#039;,0Dh
</span><span style="color:gray">TRANGROUP:8B3B                 </span><span style="color:navy">db </span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8B3B                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8B3B                 </span><span style="color:navy">db &#039;SHIFT&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8B85 </span>MSG_1860        <span style="color:navy">db </span><span style="color:#008040">90
</span><span style="color:gray">TRANGROUP:8B86                 </span><span style="color:navy">db &#039;Performs conditional processing in batch programs.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8B86                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8B86                 </span><span style="color:navy">db &#039;IF [NOT] ERRORLEVEL number command&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8BE0                 </span><span style="color:navy">db </span><span style="color:#008040">70
</span><span style="color:gray">TRANGROUP:8BE1                 </span><span style="color:navy">db &#039;IF [NOT] string1==string2 command&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8BE1                 </span><span style="color:navy">db &#039;IF [NOT] EXIST filename command&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8BE1                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8C27                 </span><span style="color:navy">db </span><span style="color:#008040">125
</span><span style="color:gray">TRANGROUP:8C28                 </span><span style="color:navy">db &#039;  NOT               Specifies that PC DOS should carry out the co&#039;
</span><span style="color:gray">TRANGROUP:8C28                 </span><span style="color:navy">db &#039;mmand only&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8C28                 </span><span style="color:navy">db &#039;                    if the condition is false.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8CA5 </span>MSG_1863        <span style="color:navy">db </span><span style="color:#008040">162
</span><span style="color:gray">TRANGROUP:8CA6                 </span><span style="color:navy">db &#039;  ERRORLEVEL number Specifies a true condition if the last progra&#039;
</span><span style="color:gray">TRANGROUP:8CA6                 </span><span style="color:navy">db &#039;m run returned&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8CA6                 </span><span style="color:navy">db &#039;                    an exit code equal to or greater than the num&#039;
</span><span style="color:gray">TRANGROUP:8CA6                 </span><span style="color:navy">db &#039;ber specified.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8D48                 </span><span style="color:navy">db </span><span style="color:#008040">102
</span><span style="color:gray">TRANGROUP:8D49                 </span><span style="color:navy">db &#039;  command           Specifies the command to carry out if the con&#039;
</span><span style="color:gray">TRANGROUP:8D49                 </span><span style="color:navy">db &#039;dition is&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8D49                 </span><span style="color:navy">db &#039;                    met.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8DAF                 </span><span style="color:navy">db </span><span style="color:#008040">106
</span><span style="color:gray">TRANGROUP:8DB0                 </span><span style="color:navy">db &#039;  string1==string2  Specifies a true condition if the specified t&#039;
</span><span style="color:gray">TRANGROUP:8DB0                 </span><span style="color:navy">db &#039;ext strings&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8DB0                 </span><span style="color:navy">db &#039;                    match.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8E1A                 </span><span style="color:navy">db </span><span style="color:#008040">103
</span><span style="color:gray">TRANGROUP:8E1B                 </span><span style="color:navy">db &#039;  EXIST filename    Specifies a true condition if the specified f&#039;
</span><span style="color:gray">TRANGROUP:8E1B                 </span><span style="color:navy">db &#039;ilename&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8E1B                 </span><span style="color:navy">db &#039;                    exists.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8E82 </span>MSG_1880        <span style="color:navy">db </span><span style="color:#008040">119
</span><span style="color:gray">TRANGROUP:8E83                 </span><span style="color:navy">db &#039;Runs a specified command for each file in a set of files.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8E83                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8E83                 </span><span style="color:navy">db &#039;FOR %variable IN (set) DO command [command-parameters]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8E83                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8EFA                 </span><span style="color:navy">db </span><span style="color:#008040">125
</span><span style="color:gray">TRANGROUP:8EFB                 </span><span style="color:navy">db &#039;  %variable  Specifies a replaceable parameter.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8EFB                 </span><span style="color:navy">db &#039;  (set)      Specifies a set of one or more files.  Wildcards may&#039;
</span><span style="color:gray">TRANGROUP:8EFB                 </span><span style="color:navy">db &#039; be used.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8F78                 </span><span style="color:navy">db </span><span style="color:#008040">86
</span><span style="color:gray">TRANGROUP:8F79                 </span><span style="color:navy">db &#039;  command    Specifies the command to carry out for each file.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8F79                 </span><span style="color:navy">db &#039;  command-parameters&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8FCF </span>MSG_1883        <span style="color:navy">db </span><span style="color:#008040">162
</span><span style="color:gray">TRANGROUP:8FD0                 </span><span style="color:navy">db &#039;             Specifies parameters or switches for the specified c&#039;
</span><span style="color:gray">TRANGROUP:8FD0                 </span><span style="color:navy">db &#039;ommand.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8FD0                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:8FD0                 </span><span style="color:navy">db &#039;To use the FOR command in a batch program, specify %%variable ins&#039;
</span><span style="color:gray">TRANGROUP:8FD0                 </span><span style="color:navy">db &#039;tead of&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:8FD0                 </span><span style="color:navy">db &#039;%variable.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:9072 </span>MSG_1900        <span style="color:navy">db </span><span style="color:#008040">72
</span><span style="color:gray">TRANGROUP:9073                 </span><span style="color:navy">db &#039;Returns a fully qualified filename.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:9073                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:9073                 </span><span style="color:navy">db &#039;TRUENAME [drive:][path]filename&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:90BB </span>MSG_1920        <span style="color:navy">db </span><span style="color:#008040">47
</span><span style="color:gray">TRANGROUP:90BC                 </span><span style="color:navy">db &#039;Loads a program into the upper memory area.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:90BC                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:90EB </span>MSG_1921        <span style="color:navy">db </span><span style="color:#008040">152
</span><span style="color:gray">TRANGROUP:90EC                 </span><span style="color:navy">db &#039;LOADHIGH [drive:][path]filename [parameters]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:90EC                 </span><span style="color:navy">db &#039;LOADHIGH [/L:region1[,minsize1][;region2[,minsize2]...]]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:90EC                 </span><span style="color:navy">db &#039;         [drive:][path]filename [parameters]&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:90EC                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:9184 </span>MSG_1922        <span style="color:navy">db </span><span style="color:#008040">182
</span><span style="color:gray">TRANGROUP:9185                 </span><span style="color:navy">db &#039;/L:region1[,minsize1][;region2[,minsize2]]...&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:9185                 </span><span style="color:navy">db &#039;            Specifies the region(s) of memory into which to load&#039;,0Dh
</span><span style="color:gray">TRANGROUP:9185                 </span><span style="color:navy">db </span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:9185                 </span><span style="color:navy">db &#039;            the program.  Region1 specifies the number of the fir&#039;
</span><span style="color:gray">TRANGROUP:9185                 </span><span style="color:navy">db &#039;st&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:923B </span>MSG_1923        <span style="color:navy">db </span><span style="color:#008040">133
</span><span style="color:gray">TRANGROUP:923C                 </span><span style="color:navy">db &#039;            memory region; minsize1 specifies the minimum size, i&#039;
</span><span style="color:gray">TRANGROUP:923C                 </span><span style="color:navy">db &#039;f&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:923C                 </span><span style="color:navy">db &#039;            any, for region1.  Region2 and minsize2 specify the&#039;,0Dh
</span><span style="color:gray">TRANGROUP:923C                 </span><span style="color:navy">db </span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:92C1 </span>MSG_1924        <span style="color:navy">db </span><span style="color:#008040">123
</span><span style="color:gray">TRANGROUP:92C2                 </span><span style="color:navy">db &#039;            number and minimum size of the second region, if any.&#039;
</span><span style="color:gray">TRANGROUP:92C2                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:92C2                 </span><span style="color:navy">db &#039;            You can specify as many regions as you want.&#039;
</span><span style="color:gray">TRANGROUP:933D </span>MSG_1925        <span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:933E                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:9340 </span>MSG_1926        <span style="color:navy">db </span><span style="color:#008040">87
</span><span style="color:gray">TRANGROUP:9341                 </span><span style="color:navy">db &#039;[drive:][path]filename&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:9341                 </span><span style="color:navy">db &#039;            Specifies the location and name of the program.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:9341                 </span><span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah
</span><span style="color:gray">TRANGROUP:9398 </span>MSG_1927        <span style="color:navy">db </span><span style="color:#008040">90
</span><span style="color:gray">TRANGROUP:9399                 </span><span style="color:navy">db &#039;parameters  Specifies any command-line information required by&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:9399                 </span><span style="color:navy">db &#039;            the program.&#039;,0Dh,0Ah
</span><span style="color:gray">TRANGROUP:93F3 </span>MSG_1107        <span style="color:navy">db </span><span style="color:#008040">12
</span><span style="color:gray">TRANGROUP:93F4                 </span><span style="color:navy">db &#039;%1 K bytes&#039;,0Dh,0Ah
</span><span style="color:black">TRANGROUP:9400
TRANGROUP:9400 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:9400
TRANGROUP:9400
TRANGROUP:9400 </span>proc            $M_CLS_3 near           <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:9400                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:9401                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:9402                 </span>assume es:TRANGROUP
<span style="color:black">TRANGROUP:9402                 </span><span style="color:navy">lea     di, [</span>$M_CLASS_3_STRUC<span style="color:navy">]
</span><span style="color:black">TRANGROUP:9406                 </span><span style="color:navy">add     cx, </span><span style="color:green">11353       </span>; ADD CX,$-$M_CLASS_3_STRUC
<span style="color:black">TRANGROUP:940A                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:940A </span>endp            $M_CLS_3
<span style="color:black">TRANGROUP:940A
TRANGROUP:940A </span><span style="color:gray">; ---------------------------------------------------------------------------
TRANGROUP:940B </span>$M_CLASS_1_STRUC <span style="color:navy">db </span><span style="color:#008040">1                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:940B                                         </span>; $M_CLASS_ID
<span style="color:gray">TRANGROUP:940C                 </span><span style="color:navy">dw </span><span style="color:#008040">0A07h                </span>; EXPECTED_VERSION (COMMAND.COM version)
<span style="color:gray">TRANGROUP:940E                 </span><span style="color:navy">db </span><span style="color:#008040">4                    </span>; Class_1_MessageCount
<span style="color:gray">TRANGROUP:940F </span>$M_ID_1_1       <span style="color:navy">dw </span><span style="color:#008040">2                    </span>; Message Number = 2
<span style="color:gray">TRANGROUP:9411                 </span><span style="color:navy">dw </span><span style="color:#008040">10h                  </span>; Message offset from message number
<span style="color:gray">TRANGROUP:9413 </span>$M_ID_1_2       <span style="color:navy">dw </span><span style="color:#008040">3                    </span>; Message Number = 3
<span style="color:gray">TRANGROUP:9415                 </span><span style="color:navy">dw </span><span style="color:#008040">1Bh                  </span>; Message offset from message number
<span style="color:gray">TRANGROUP:9417 </span>$M_ID_1_3       <span style="color:navy">dw </span><span style="color:#008040">8                    </span>; Message Number = 8
<span style="color:gray">TRANGROUP:9419                 </span><span style="color:navy">dw </span><span style="color:#008040">26h                  </span>; Message offset from message number
<span style="color:gray">TRANGROUP:941B </span>$M_ID_1_4       <span style="color:navy">dw </span><span style="color:#008040">0FFFFh               </span>; Message Number = -1
<span style="color:gray">TRANGROUP:941D                 </span><span style="color:navy">dw </span><span style="color:#008040">36h                  </span>; Message offset from message number
<span style="color:gray">TRANGROUP:941F </span>EXTEND2         <span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:9420                 </span><span style="color:navy">db &#039;File not found&#039;
</span><span style="color:gray">TRANGROUP:942E </span>EXTEND3         <span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:942F                 </span><span style="color:navy">db &#039;Path not found&#039;
</span><span style="color:gray">TRANGROUP:943D </span>EXTEND8         <span style="color:navy">db </span><span style="color:#008040">19
</span><span style="color:gray">TRANGROUP:943E                 </span><span style="color:navy">db &#039;Insufficient memory&#039;
</span><span style="color:gray">TRANGROUP:9451 </span>EXTEND999       <span style="color:navy">db </span><span style="color:#008040">17
</span><span style="color:gray">TRANGROUP:9452                 </span><span style="color:navy">db &#039;Extended Error %1&#039;
</span><span style="color:black">TRANGROUP:9463
TRANGROUP:9463 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:9463
TRANGROUP:9463
TRANGROUP:9463 </span>proc            $M_MSGSERV_1 near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:9463                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:9464                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:9465                 </span><span style="color:navy">lea     di, [</span>$M_CLASS_1_STRUC<span style="color:navy">]
</span><span style="color:black">TRANGROUP:9469                 </span><span style="color:navy">add     cx, </span><span style="color:green">94          </span>; $-$M_CLASS_1_STRUC
<span style="color:black">TRANGROUP:946C                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:946C </span>endp            $M_MSGSERV_1
<span style="color:black">TRANGROUP:946C
TRANGROUP:946C </span><span style="color:gray">; ---------------------------------------------------------------------------
TRANGROUP:946D </span>$M_CLASS_2_STRUC <span style="color:navy">db </span><span style="color:#008040">2                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:946D                                         </span>; $M_CLASS_ID
<span style="color:gray">TRANGROUP:946E                 </span><span style="color:navy">dw </span><span style="color:#008040">0A07h                </span>; EXPECTED_VERSION (COMMAND.COM version)
<span style="color:gray">TRANGROUP:9470                 </span><span style="color:navy">db </span><span style="color:#008040">1                    </span>; Class_2_MessageCount
<span style="color:gray">TRANGROUP:9471 </span>$M_ID_2_1       <span style="color:navy">dw </span><span style="color:#008040">0FFFFh               </span>; Message Number = -1
<span style="color:gray">TRANGROUP:9473                 </span><span style="color:navy">dw </span><span style="color:#008040">4                    </span>; Message offset from message number
<span style="color:gray">TRANGROUP:9475 </span>PARSE999        <span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:9476                 </span><span style="color:navy">db &#039;Parse Error %1&#039;
</span><span style="color:black">TRANGROUP:9484
TRANGROUP:9484 </span><span style="color:gray">; =============== S U B R O U T I N E =======================================
</span><span style="color:black">TRANGROUP:9484
TRANGROUP:9484
TRANGROUP:9484 </span>proc            $M_MSGSERV_2 near       <span style="color:green">; ...
</span><span style="color:black">TRANGROUP:9484                 </span><span style="color:navy">push    cs
</span><span style="color:black">TRANGROUP:9485                 </span><span style="color:navy">pop     es
</span><span style="color:black">TRANGROUP:9486                 </span><span style="color:navy">lea     di, [</span>$M_CLASS_2_STRUC<span style="color:navy">]
</span><span style="color:black">TRANGROUP:948A                 </span><span style="color:navy">add     cx, </span><span style="color:green">29
</span><span style="color:black">TRANGROUP:948D                 </span><span style="color:navy">retn
</span><span style="color:black">TRANGROUP:948D </span>endp            $M_MSGSERV_2
<span style="color:black">TRANGROUP:948D
TRANGROUP:948D </span><span style="color:gray">; ---------------------------------------------------------------------------
TRANGROUP:948E </span>msg_disp_class  <span style="color:navy">db </span><span style="color:#008040">0FFh                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:948F </span>msg_cont_flag   <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9490 </span>extend_buf_ptr  <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9492 </span>extend_buf_sub  <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9493                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9494                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9495 </span>extend_buf_off  <span style="color:navy">dw offset </span>string_ptr_2
<span style="color:gray">TRANGROUP:9497 </span>extend_buf_seg  <span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9499                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:949A                 </span><span style="color:navy">db </span><span style="color:#008040">10h                  </span>; Char_field_ASCIIZ
<span style="color:gray">TRANGROUP:949B                 </span><span style="color:navy">db </span><span style="color:#008040">128
</span><span style="color:gray">TRANGROUP:949C                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:949D                 </span><span style="color:navy">db </span><span style="color:#008040">20h                  </span>; blank
<span style="color:gray">TRANGROUP:949E </span>RENERR_PTR      <span style="color:navy">dw </span><span style="color:#008040">1002                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94A0                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94A1 </span>BADCPMES_PTR    <span style="color:navy">dw </span><span style="color:#008040">1003                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94A3                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94A4 </span>NOSPACE_PTR     <span style="color:navy">dw </span><span style="color:#008040">1004                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94A6                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94A7 </span>ENVERR_PTR      <span style="color:navy">dw </span><span style="color:#008040">1007                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94A9                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94AA </span>FULLDIR_PTR     <span style="color:navy">dw </span><span style="color:#008040">1008                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94AC                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94AD </span>BADBAT_PTR      <span style="color:navy">dw </span><span style="color:#008040">1009                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94AF                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94B0 </span>NEEDBAT_PTR     <span style="color:navy">dw </span><span style="color:#008040">1010                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94B2                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94B3 </span>BADNAM_PTR      <span style="color:navy">dw </span><span style="color:#008040">1011                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94B5                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94B6 </span>REXXNOTF_PTR    <span style="color:navy">dw </span><span style="color:#008040">1012                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94B8                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94B9 </span>ACCDEN_PTR      <span style="color:navy">dw </span><span style="color:#008040">1014                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94BB                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94BC </span>OVERWR_PTR      <span style="color:navy">dw </span><span style="color:#008040">1015                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94BE                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94BF </span>LOSTERR_PTR     <span style="color:navy">dw </span><span style="color:#008040">1016                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94C1                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94C2 </span>INORNOT_PTR     <span style="color:navy">dw </span><span style="color:#008040">1017                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94C4                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94C5 </span>copied_ptr      <span style="color:navy">dw </span><span style="color:#008040">1018                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94C7                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:94C8                 </span><span style="color:navy">db </span><span style="color:#008040">11                   </span>; parm_block_size
<span style="color:gray">TRANGROUP:94C9                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94CA                 </span><span style="color:navy">dw offset </span>Copy_num
<span style="color:gray">TRANGROUP:94CC                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94CE                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:94CF                 </span><span style="color:navy">db </span><span style="color:#008040">0A1h                 </span>; Right_Align+Unsgn_Bin_Word
<span style="color:gray">TRANGROUP:94D0                 </span><span style="color:navy">db </span><span style="color:#008040">9                    </span>; maximum width
<span style="color:gray">TRANGROUP:94D1                 </span><span style="color:navy">db </span><span style="color:#008040">9                    </span>; minimum width
<span style="color:gray">TRANGROUP:94D2                 </span><span style="color:navy">db </span><span style="color:#008040">20h                  </span>; pad character
<span style="color:gray">TRANGROUP:94D3 </span>dirmes_ptr      <span style="color:navy">dw </span><span style="color:#008040">1019                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94D5                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:94D6                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:94D7                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94D8                 </span><span style="color:navy">dw offset </span>Dir_Num
<span style="color:gray">TRANGROUP:94DA                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94DC                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:94DD                 </span><span style="color:navy">db </span><span style="color:#008040">0E1h                 </span>; Right_Align+Unsgn_Bin_Word
<span style="color:gray">TRANGROUP:94DE                 </span><span style="color:navy">db </span><span style="color:#008040">9
</span><span style="color:gray">TRANGROUP:94DF                 </span><span style="color:navy">db </span><span style="color:#008040">9
</span><span style="color:gray">TRANGROUP:94E0                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:94E1 </span>dirmes_w_ptr    <span style="color:navy">dw </span><span style="color:#008040">1019                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94E3                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:94E4                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:94E5                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94E6                 </span><span style="color:navy">dw offset </span>Dir_Num
<span style="color:gray">TRANGROUP:94E8                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94EA                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:94EB                 </span><span style="color:navy">db </span><span style="color:#008040">0F1h                 </span>; long binary to decimal
<span style="color:gray">TRANGROUP:94EC                 </span><span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:94ED                 </span><span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:94EE                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:94EF </span>dirmes2_ptr     <span style="color:navy">dw </span><span style="color:#008040">1019                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94F1                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:94F2                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:94F3                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94F4                 </span><span style="color:navy">dw offset </span>Dir_Num
<span style="color:gray">TRANGROUP:94F6                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:94F8                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:94F9                 </span><span style="color:navy">db </span><span style="color:#008040">0B1h                 </span>; Right_Align+Unsgn_Bin_DWord
<span style="color:gray">TRANGROUP:94FA                 </span><span style="color:navy">db </span><span style="color:#008040">9
</span><span style="color:gray">TRANGROUP:94FB                 </span><span style="color:navy">db </span><span style="color:#008040">9
</span><span style="color:gray">TRANGROUP:94FC                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:94FD </span>bytmes1_ptr     <span style="color:navy">dw </span><span style="color:#008040">1020                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:94FF                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9500                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9501                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9502                 </span><span style="color:navy">dw offset </span>Bytes_Free
<span style="color:gray">TRANGROUP:9504                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9506                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9507                 </span><span style="color:navy">db </span><span style="color:#008040">0F1h                 </span>; long binary to decimal
<span style="color:gray">TRANGROUP:9508                 </span><span style="color:navy">db </span><span style="color:#008040">30                   </span>; maximum width
<span style="color:gray">TRANGROUP:9509                 </span><span style="color:navy">db </span><span style="color:#008040">30                   </span>; minimum width
<span style="color:gray">TRANGROUP:950A                 </span><span style="color:navy">db </span><span style="color:#008040">20h                  </span>; blank
<span style="color:gray">TRANGROUP:950B </span>bytmes2_ptr     <span style="color:navy">dw </span><span style="color:#008040">1020                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:950D                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:950E                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:950F                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9510                 </span><span style="color:navy">dw offset </span>Bytes_Free
<span style="color:gray">TRANGROUP:9512                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9514                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9515                 </span><span style="color:navy">db </span><span style="color:#008040">0F1h                 </span>; long binary to decimal
<span style="color:gray">TRANGROUP:9516                 </span><span style="color:navy">db </span><span style="color:#008040">33                   </span>; maximum width
<span style="color:gray">TRANGROUP:9517                 </span><span style="color:navy">db </span><span style="color:#008040">33                   </span>; minimum width
<span style="color:gray">TRANGROUP:9518                 </span><span style="color:navy">db </span><span style="color:#008040">20h                  </span>; pad
<span style="color:gray">TRANGROUP:9519 </span>bytmes_n_ptr    <span style="color:navy">dw </span><span style="color:#008040">1020                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:951B                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:951C                 </span><span style="color:navy">db </span><span style="color:#008040">11                   </span>; parm_block_size
<span style="color:gray">TRANGROUP:951D                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:951E                 </span><span style="color:navy">dw offset </span>Bytes_Free
<span style="color:gray">TRANGROUP:9520                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9522                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9523                 </span><span style="color:navy">db </span><span style="color:#008040">0B1h                 </span>; Right_Align+Unsgn_Bin_DWord
<span style="color:gray">TRANGROUP:9524                 </span><span style="color:navy">db </span><span style="color:#008040">28
</span><span style="color:gray">TRANGROUP:9525                 </span><span style="color:navy">db </span><span style="color:#008040">28
</span><span style="color:gray">TRANGROUP:9526                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9527 </span>baddrv_ptr      <span style="color:navy">dw </span><span style="color:#008040">1021                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9529                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:952A </span>cp_not_set_ptr  <span style="color:navy">dw </span><span style="color:#008040">1022                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:952C                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:952D                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:952E                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:952F                 </span><span style="color:navy">dw offset </span>system_cpage
<span style="color:gray">TRANGROUP:9531                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9533                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9534                 </span><span style="color:navy">db </span><span style="color:#008040">0A1h
</span><span style="color:gray">TRANGROUP:9535                 </span><span style="color:navy">db </span><span style="color:#008040">5
</span><span style="color:gray">TRANGROUP:9536                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9537                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9538 </span>cp_not_all_ptr  <span style="color:navy">dw </span><span style="color:#008040">1023                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:953A                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:953B                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:953C                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:953D                 </span><span style="color:navy">dw offset </span>system_cpage
<span style="color:gray">TRANGROUP:953F                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9541                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9542                 </span><span style="color:navy">db </span><span style="color:#008040">0A1h                 </span>; Right_Align+Unsgn_Bin_Word
<span style="color:gray">TRANGROUP:9543                 </span><span style="color:navy">db </span><span style="color:#008040">5
</span><span style="color:gray">TRANGROUP:9544                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9545                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9546 </span>cp_active_ptr   <span style="color:navy">dw </span><span style="color:#008040">1024                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9548                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9549                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:954A                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:954B                 </span><span style="color:navy">dw offset </span>system_cpage
<span style="color:gray">TRANGROUP:954D                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:954F                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9550                 </span><span style="color:navy">db </span><span style="color:#008040">0A1h
</span><span style="color:gray">TRANGROUP:9551                 </span><span style="color:navy">db </span><span style="color:#008040">5
</span><span style="color:gray">TRANGROUP:9552                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9553                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9554 </span>NLSFUNC_PTR     <span style="color:navy">dw </span><span style="color:#008040">1025                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9556                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9557 </span>INV_CODE_PAGE   <span style="color:navy">dw </span><span style="color:#008040">1026                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9559                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:955A </span>BADCURDRV       <span style="color:navy">dw </span><span style="color:#008040">1027                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:955C                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:955D </span>PAUSEMES_PTR    <span style="color:navy">dw </span><span style="color:#008040">1028                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:955F                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9560 </span>BADLAB_PTR      <span style="color:navy">dw </span><span style="color:#008040">1029                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9562                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9563 </span>SYNTMES_PTR     <span style="color:navy">dw </span><span style="color:#008040">1030                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9565                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9566 </span>BADDAT_PTR      <span style="color:navy">dw </span><span style="color:#008040">1031                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9568                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9569 </span>CurDat_Ptr      <span style="color:navy">dw </span><span style="color:#008040">1032                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:956B                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:956C                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:956D                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:956E                 </span><span style="color:navy">dw offset </span>TPBUF         ; Arg_Buf
<span style="color:gray">TRANGROUP:9570                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9572                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9573                 </span><span style="color:navy">db </span><span style="color:#008040">10h                  </span>; Char_field_ASCIIZ
<span style="color:gray">TRANGROUP:9574                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:9575                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:9576                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9577                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9578                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9579 </span>CurDat_yr       <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:957B </span>CurDat_mo_day   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:957D                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:957E                 </span><span style="color:navy">db </span><span style="color:#008040">34h                  </span>; DATE_MDY_4
<span style="color:gray">TRANGROUP:957F                 </span><span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:9580                 </span><span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:9581                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9582 </span>WeekTab         <span style="color:navy">dw </span><span style="color:#008040">1033                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9584                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9585 </span>NewDat_Ptr      <span style="color:navy">dw </span><span style="color:#008040">1034                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9587                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9588                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9589                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:958A </span>NewDat_Format   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:958C                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:958E                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:958F                 </span><span style="color:navy">db </span><span style="color:#008040">10h                  </span>; Char_field_ASCIIZ
<span style="color:gray">TRANGROUP:9590                 </span><span style="color:navy">db </span><span style="color:#008040">8
</span><span style="color:gray">TRANGROUP:9591                 </span><span style="color:navy">db </span><span style="color:#008040">8
</span><span style="color:gray">TRANGROUP:9592                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9593 </span>BadTim_Ptr      <span style="color:navy">dw </span><span style="color:#008040">1035                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9595                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9596 </span>CurTim_Ptr      <span style="color:navy">dw </span><span style="color:#008040">1036                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9598                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9599                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:959A                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:959B </span>CurTim_hr_min   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:959D </span>CurTim_Sec_hn   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:959F                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:95A0                 </span><span style="color:navy">db </span><span style="color:#008040">0A5h                 </span>; Right_Align+TIME_HHMMSSHH_Cty
<span style="color:gray">TRANGROUP:95A1                 </span><span style="color:navy">db </span><span style="color:#008040">12
</span><span style="color:gray">TRANGROUP:95A2                 </span><span style="color:navy">db </span><span style="color:#008040">12
</span><span style="color:gray">TRANGROUP:95A3                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:95A4 </span>NewTim_Ptr      <span style="color:navy">dw </span><span style="color:#008040">1037                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:95A6                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95A7 </span>Del_Y_N_Ptr     <span style="color:navy">dw </span><span style="color:#008040">1038                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:95A9                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95AA </span>SureMes_Ptr     <span style="color:navy">dw </span><span style="color:#008040">1039                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:95AC                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95AD </span>VerMes_Ptr      <span style="color:navy">dw </span><span style="color:#008040">1040                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:95AF                 </span><span style="color:navy">db </span><span style="color:#008040">0                    </span>; number of subst
<span style="color:gray">TRANGROUP:95B0                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:95B1                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95B2                 </span><span style="color:navy">dw offset </span>Major_Ver_Num
<span style="color:gray">TRANGROUP:95B4                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95B6                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:95B7                 </span><span style="color:navy">db </span><span style="color:#008040">0A1h                 </span>; Right_Align+Unsgn_Bin_Word
<span style="color:gray">TRANGROUP:95B8                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:95B9                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:95BA                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:95BB                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:95BC                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95BD                 </span><span style="color:navy">dw offset </span>Minor_Ver_Num
<span style="color:gray">TRANGROUP:95BF                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95C1                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:95C2                 </span><span style="color:navy">db </span><span style="color:#008040">0A1h                 </span>; Right_Align+Unsgn_Bin_Word
<span style="color:gray">TRANGROUP:95C3                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:95C4                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:95C5                 </span><span style="color:navy">db &#039;</span><span style="color:green">0&#039;                  </span>; 30h ; pad character
<span style="color:gray">TRANGROUP:95C6 </span>VolMes_Ptr_2    <span style="color:navy">dw </span><span style="color:#008040">1041                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:95C8                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:95C9                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:95CA                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95CB                 </span><span style="color:navy">dw offset </span>vol_drv
<span style="color:gray">TRANGROUP:95CD                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95CF                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:95D0                 </span><span style="color:navy">db </span><span style="color:#008040">0                    </span>; Char_field_Char
<span style="color:gray">TRANGROUP:95D1                 </span><span style="color:navy">db </span><span style="color:#008040">128
</span><span style="color:gray">TRANGROUP:95D2                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:95D3                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:95D4 </span>VolMes_Ptr      <span style="color:navy">dw </span><span style="color:#008040">1042                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:95D6                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:95D7                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:95D8                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95D9                 </span><span style="color:navy">dw offset </span>vol_drv
<span style="color:gray">TRANGROUP:95DB                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95DD                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:95DE                 </span><span style="color:navy">db </span><span style="color:#008040">0                    </span>; character
<span style="color:gray">TRANGROUP:95DF                 </span><span style="color:navy">db </span><span style="color:#008040">128
</span><span style="color:gray">TRANGROUP:95E0                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:95E1                 </span><span style="color:navy">db </span><span style="color:#008040">20h                  </span>; blank (space)
<span style="color:gray">TRANGROUP:95E2                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:95E3                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95E4                 </span><span style="color:navy">dw offset </span>CHARBUF
<span style="color:gray">TRANGROUP:95E6                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95E8                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:95E9                 </span><span style="color:navy">db </span><span style="color:#008040">10h                  </span>; Char_field_ASCIIZ
<span style="color:gray">TRANGROUP:95EA                 </span><span style="color:navy">db </span><span style="color:#008040">128
</span><span style="color:gray">TRANGROUP:95EB                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:95EC                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:95ED </span>VolSerMes_Ptr   <span style="color:navy">dw </span><span style="color:#008040">1043                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:95EF                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:95F0                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:95F1                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95F2                 </span><span style="color:navy">dw offset </span>vol_serial<span style="color:navy">+</span><span style="color:green">2
</span><span style="color:gray">TRANGROUP:95F4                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95F6                 </span><span style="color:navy">db </span><span style="color:#008040">1                    </span>; first subst
<span style="color:gray">TRANGROUP:95F7                 </span><span style="color:navy">db </span><span style="color:#008040">0A3h                 </span>; Right_Align+Bin_Hex_Word
<span style="color:gray">TRANGROUP:95F8                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:95F9                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:95FA                 </span><span style="color:navy">db </span><span style="color:#008040">30h                  </span>; &#039;0&#039;
<span style="color:gray">TRANGROUP:95FB                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:95FC                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:95FD                 </span><span style="color:navy">dw offset </span>vol_serial
<span style="color:gray">TRANGROUP:95FF                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9601                 </span><span style="color:navy">db </span><span style="color:#008040">2                    </span>; second subst
<span style="color:gray">TRANGROUP:9602                 </span><span style="color:navy">db </span><span style="color:#008040">0A3h                 </span>; Right_Align+Bin_Hex_Word
<span style="color:gray">TRANGROUP:9603                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:9604                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:9605                 </span><span style="color:navy">db </span><span style="color:#008040">30h
</span><span style="color:gray">TRANGROUP:9606 </span>badcd_ptr       <span style="color:navy">dw </span><span style="color:#008040">1044                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9608                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9609 </span>badmkd_ptr      <span style="color:navy">dw </span><span style="color:#008040">1045                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:960B                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:960C </span>badrmd_ptr      <span style="color:navy">dw </span><span style="color:#008040">1046                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:960E                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:960F </span>bad_on_off_ptr  <span style="color:navy">dw </span><span style="color:#008040">1047                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9611                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9612 </span>dirhead_ptr     <span style="color:navy">dw </span><span style="color:#008040">1048                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9614                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9615                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9616                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9617                 </span><span style="color:navy">dw offset </span>BWDBUF
<span style="color:gray">TRANGROUP:9619                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:961B                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:961C                 </span><span style="color:navy">db </span><span style="color:#008040">10h                  </span>; Char_field_ASCIIZ
<span style="color:gray">TRANGROUP:961D                 </span><span style="color:navy">db </span><span style="color:#008040">128
</span><span style="color:gray">TRANGROUP:961E                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:961F                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9620 </span>NULLPATH_PTR    <span style="color:navy">dw </span><span style="color:#008040">1049                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9622                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9623 </span>BADPMES_PTR     <span style="color:navy">dw </span><span style="color:#008040">1050                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9625                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9626 </span>BADDEV_PTR      <span style="color:navy">dw </span><span style="color:#008040">1051                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9628                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9629 </span>FORNESTMES_PTR  <span style="color:navy">dw </span><span style="color:#008040">1052                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:962B                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:962C </span>PIPEEMES_PTR    <span style="color:navy">dw </span><span style="color:#008040">1053                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:962E                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:962F </span>INBDEV_PTR      <span style="color:navy">dw </span><span style="color:#008040">1054                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9631                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9632 </span>CtrlcMes_Ptr    <span style="color:navy">dw </span><span style="color:#008040">1055                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9634                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9635                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9636                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9637                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9639                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:963B                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:963C                 </span><span style="color:navy">db </span><span style="color:#008040">10h
</span><span style="color:gray">TRANGROUP:963D                 </span><span style="color:navy">db </span><span style="color:#008040">128
</span><span style="color:gray">TRANGROUP:963E                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:963F                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9640 </span>VeriMes_Ptr     <span style="color:navy">dw </span><span style="color:#008040">1056                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9642                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9643                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9644                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9645                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9647                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9649                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:964A                 </span><span style="color:navy">db </span><span style="color:#008040">10h
</span><span style="color:gray">TRANGROUP:964B                 </span><span style="color:navy">db </span><span style="color:#008040">128
</span><span style="color:gray">TRANGROUP:964C                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:964D                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:964E </span>EchoMes_Ptr     <span style="color:navy">dw </span><span style="color:#008040">1057                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9650                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9651                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9652                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9653                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9655                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9657                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9658                 </span><span style="color:navy">db </span><span style="color:#008040">10h
</span><span style="color:gray">TRANGROUP:9659                 </span><span style="color:navy">db </span><span style="color:#008040">128
</span><span style="color:gray">TRANGROUP:965A                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:965B                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:965C </span>OFFMES_PTR      <span style="color:navy">dw </span><span style="color:#008040">1059                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:965E                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:965F </span>ONMES_PTR       <span style="color:navy">dw </span><span style="color:#008040">1060                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9661                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9662 </span>DEVWMES_PTR     <span style="color:navy">dw </span><span style="color:#008040">1061                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9664                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9665 </span>INVAL_PATH_PTR  <span style="color:navy">dw </span><span style="color:#008040">1062
</span><span style="color:gray">TRANGROUP:9667                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9668 </span>arg_buf_ptr     <span style="color:navy">dw </span><span style="color:#008040">1063                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:966A                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:966B                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:966C                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:966D                 </span><span style="color:navy">dw offset </span>TPBUF         ; Arg_Buf
<span style="color:gray">TRANGROUP:966F                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9671                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9672                 </span><span style="color:navy">db </span><span style="color:#008040">10h                  </span>; Char_field_ASCIIZ
<span style="color:gray">TRANGROUP:9673                 </span><span style="color:navy">db </span><span style="color:#008040">128
</span><span style="color:gray">TRANGROUP:9674                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9675                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9676 </span>file_name_ptr   <span style="color:navy">dw </span><span style="color:#008040">1064                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9678                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9679                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:967A                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:967B                 </span><span style="color:navy">dw offset </span>SrcBuf
<span style="color:gray">TRANGROUP:967D                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:967F                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9680                 </span><span style="color:navy">db </span><span style="color:#008040">10h                  </span>; Char_field_ASCIIZ
<span style="color:gray">TRANGROUP:9681                 </span><span style="color:navy">db </span><span style="color:#008040">128
</span><span style="color:gray">TRANGROUP:9682                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9683                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9684 </span>disp_file_size_ptr <span style="color:navy">dw </span><span style="color:#008040">1065              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9686                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9687                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9688                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9689                 </span><span style="color:navy">dw offset </span>File_Size_Low
<span style="color:gray">TRANGROUP:968B                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:968D                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:968E                 </span><span style="color:navy">db </span><span style="color:#008040">0F1h
</span><span style="color:gray">TRANGROUP:968F                 </span><span style="color:navy">db </span><span style="color:#008040">12
</span><span style="color:gray">TRANGROUP:9690                 </span><span style="color:navy">db </span><span style="color:#008040">12
</span><span style="color:gray">TRANGROUP:9691                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9692 </span>disp_file_size_w_ptr <span style="color:navy">dw </span><span style="color:#008040">1065            </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9694                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9695                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9696                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9697                 </span><span style="color:navy">dw offset </span>File_Size_Low
<span style="color:gray">TRANGROUP:9699                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:969B                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:969C                 </span><span style="color:navy">db </span><span style="color:#008040">0F1h                 </span>; long binary to decimal
<span style="color:gray">TRANGROUP:969D                 </span><span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:969E                 </span><span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:969F                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:96A0 </span>disp_file_size_n_ptr <span style="color:navy">dw </span><span style="color:#008040">1065            </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96A2                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:96A3                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:96A4                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96A5                 </span><span style="color:navy">dw offset </span>File_Size_Low
<span style="color:gray">TRANGROUP:96A7                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96A9                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:96AA                 </span><span style="color:navy">db </span><span style="color:#008040">0B1h                 </span>; Right_Align+Unsgn_Bin_DWord
<span style="color:gray">TRANGROUP:96AB                 </span><span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:96AC                 </span><span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:96AD                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:96AE </span>string_buf_ptr  <span style="color:navy">dw </span><span style="color:#008040">1066                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96B0                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:96B1                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:96B2                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96B3                 </span><span style="color:navy">dw offset </span>string_ptr_2
<span style="color:gray">TRANGROUP:96B5                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96B7                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:96B8                 </span><span style="color:navy">db </span><span style="color:#008040">10h                  </span>; Char_field_ASCIIZ
<span style="color:gray">TRANGROUP:96B9                 </span><span style="color:navy">db </span><span style="color:#008040">128
</span><span style="color:gray">TRANGROUP:96BA                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96BB                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:96BC                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96BD </span>tab_ptr         <span style="color:navy">dw </span><span style="color:#008040">1067                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96BF                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96C0 </span>dmes_ptr        <span style="color:navy">dw </span><span style="color:#008040">1068                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96C2                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96C3 </span>space_4_ptr     <span style="color:navy">dw </span><span style="color:#008040">1105                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96C5                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96C6 </span>dback_ptr       <span style="color:navy">dw </span><span style="color:#008040">1069                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96C8                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96C9 </span>acrlf_ptr       <span style="color:navy">dw </span><span style="color:#008040">1070                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96CB                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96CC </span>usadat_ptr      <span style="color:navy">dw </span><span style="color:#008040">1072                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96CE                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96CF </span>eurdat_ptr      <span style="color:navy">dw </span><span style="color:#008040">1073                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96D1                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96D2 </span>japdat_ptr      <span style="color:navy">dw </span><span style="color:#008040">1074                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96D4                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96D5 </span>promptdat_ptr   <span style="color:navy">dw </span><span style="color:#008040">1075                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96D7                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:96D8                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:96D9                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96DA                 </span><span style="color:navy">dw offset </span>TPBUF         ; Arg_Buf
<span style="color:gray">TRANGROUP:96DC                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96DE                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:96DF                 </span><span style="color:navy">db </span><span style="color:#008040">10h                  </span>; Char_field_ASCIIZ
<span style="color:gray">TRANGROUP:96E0                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:96E1                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:96E2                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:96E3                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:96E4                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96E5 </span>promptDat_yr    <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96E7 </span>promptDat_moday <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96E9                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:96EA                 </span><span style="color:navy">db </span><span style="color:#008040">34h                  </span>; DATE_MDY_4
<span style="color:gray">TRANGROUP:96EB                 </span><span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:96EC                 </span><span style="color:navy">db </span><span style="color:#008040">8
</span><span style="color:gray">TRANGROUP:96ED                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:96EE </span>promtim_ptr     <span style="color:navy">dw </span><span style="color:#008040">1076                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96F0                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:96F1                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:96F2                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:96F3 </span>PromTim_hr_min  <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96F5 </span>PromTim_Sec_hn  <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96F7                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:96F8                 </span><span style="color:navy">db </span><span style="color:#008040">0A6h                 </span>; Right_Align+TIME_HHMMSSHH_24
<span style="color:gray">TRANGROUP:96F9                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:96FA                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:96FB                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:96FC </span>dirdattim_ptr   <span style="color:navy">dw </span><span style="color:#008040">1077                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:96FE                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:96FF                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9700                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9701 </span>DirDat_Yr       <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9703 </span>DirDat_Mo_Day   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9705                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9706 </span>DirDat_form     <span style="color:navy">db </span><span style="color:#008040">0A4h                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9706                                         </span>; Right_Align+DATE_MDY_2
<span style="color:gray">TRANGROUP:9707 </span>DirDat_width    <span style="color:navy">db </span><span style="color:#008040">10                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9708                 </span><span style="color:navy">db </span><span style="color:#008040">8                    </span>; minimum width
<span style="color:gray">TRANGROUP:9709                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:970A                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:970B                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:970C </span>DirTim_Hr_Min   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:970E </span>DirTim_Sec_hn   <span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9710                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9711                 </span><span style="color:navy">db </span><span style="color:#008040">85h                  </span>; Right_align+TIME_HHMM_Cty
<span style="color:gray">TRANGROUP:9712                 </span><span style="color:navy">db </span><span style="color:#008040">6
</span><span style="color:gray">TRANGROUP:9713                 </span><span style="color:navy">db </span><span style="color:#008040">6
</span><span style="color:gray">TRANGROUP:9714                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9715 </span>MD_EXISTS_PTR   <span style="color:navy">dw </span><span style="color:#008040">1078                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9717                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9718 </span>bytes_ptr       <span style="color:navy">dw </span><span style="color:#008040">1079                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:971A                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:971B                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:971C                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:971D                 </span><span style="color:navy">dw offset </span>FileSiz
<span style="color:gray">TRANGROUP:971F                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9721                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9722                 </span><span style="color:navy">db </span><span style="color:#008040">0F1h
</span><span style="color:gray">TRANGROUP:9723                 </span><span style="color:navy">db </span><span style="color:#008040">12
</span><span style="color:gray">TRANGROUP:9724                 </span><span style="color:navy">db </span><span style="color:#008040">12
</span><span style="color:gray">TRANGROUP:9725                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9726 </span>bytes_w_tr      <span style="color:navy">dw </span><span style="color:#008040">1079                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9728                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9729                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:972A                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:972B                 </span><span style="color:navy">dw offset </span>FileSiz
<span style="color:gray">TRANGROUP:972D                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:972F                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9730                 </span><span style="color:navy">db </span><span style="color:#008040">0F1h
</span><span style="color:gray">TRANGROUP:9731                 </span><span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:9732                 </span><span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:9733                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9734 </span>bytes_n_ptr     <span style="color:navy">dw </span><span style="color:#008040">1079                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9736                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9737                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9738                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9739                 </span><span style="color:navy">db </span><span style="color:#008040">0B1h
</span><span style="color:gray">TRANGROUP:973A                 </span><span style="color:navy">db </span><span style="color:#008040">160
</span><span style="color:gray">TRANGROUP:973B                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:973C                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:973D                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:973E                 </span><span style="color:navy">db </span><span style="color:#008040">0B1h
</span><span style="color:gray">TRANGROUP:973F                 </span><span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:9740                 </span><span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:9741                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9742 </span>kbytes_ptr      <span style="color:navy">dw </span><span style="color:#008040">1107                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9744                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9745                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9746                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9747                 </span><span style="color:navy">db </span><span style="color:#008040">0B1h
</span><span style="color:gray">TRANGROUP:9748                 </span><span style="color:navy">db </span><span style="color:#008040">160
</span><span style="color:gray">TRANGROUP:9749                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:974A                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:974B                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:974C                 </span><span style="color:navy">db </span><span style="color:#008040">0F1h
</span><span style="color:gray">TRANGROUP:974D                 </span><span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:974E                 </span><span style="color:navy">db </span><span style="color:#008040">14
</span><span style="color:gray">TRANGROUP:974F                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9750 </span>kybytes_n_ptr   <span style="color:navy">dw </span><span style="color:#008040">1107                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9752                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9753                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:9754                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9755                 </span><span style="color:navy">dw offset </span>FileSiz
<span style="color:gray">TRANGROUP:9757                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9759                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:975A                 </span><span style="color:navy">db </span><span style="color:#008040">0B1h
</span><span style="color:gray">TRANGROUP:975B                 </span><span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:975C                 </span><span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:975D                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:975E </span>total_ptr       <span style="color:navy">dw </span><span style="color:#008040">1080                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9760                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9761 </span>errparsenv_ptr  <span style="color:navy">dw </span><span style="color:#008040">1081                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9763                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9764 </span>cox_Y_quest_ptr <span style="color:navy">dw </span><span style="color:#008040">1082                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9766                 </span><span style="color:navy">db </span><span style="color:#008040">0                    </span>; no_subst
<span style="color:gray">TRANGROUP:9767 </span>cox_Y_answ_ptr  <span style="color:navy">dw </span><span style="color:#008040">1083
</span><span style="color:gray">TRANGROUP:9769                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:976A </span>dircont_ptr     <span style="color:navy">dw </span><span style="color:#008040">1084                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:976C                 </span><span style="color:navy">db </span><span style="color:#008040">1                    </span>; number of subst
<span style="color:gray">TRANGROUP:976D                 </span><span style="color:navy">db </span><span style="color:#008040">11                   </span>; parm_block_size ; size of sublist
<span style="color:gray">TRANGROUP:976E                 </span><span style="color:navy">db </span><span style="color:#008040">0                    </span>; reserved
<span style="color:gray">TRANGROUP:976F                 </span><span style="color:navy">dw offset </span>BWDBUF        ; offset of arg
<span style="color:gray">TRANGROUP:9771                 </span><span style="color:navy">dw </span><span style="color:#008040">0                    </span>; segment of arg
<span style="color:gray">TRANGROUP:9773                 </span><span style="color:navy">db </span><span style="color:#008040">1                    </span>; first subst
<span style="color:gray">TRANGROUP:9774                 </span><span style="color:navy">db </span><span style="color:#008040">10h                  </span>; Char_field_ASCIIZ
<span style="color:gray">TRANGROUP:9775                 </span><span style="color:navy">db </span><span style="color:#008040">128                  </span>; maximum width
<span style="color:gray">TRANGROUP:9776                 </span><span style="color:navy">db </span><span style="color:#008040">0                    </span>; minimum width
<span style="color:gray">TRANGROUP:9777                 </span><span style="color:navy">db </span><span style="color:#008040">20h                  </span>; blank ; pad character
<span style="color:gray">TRANGROUP:9778 </span>dosrev_ptr      <span style="color:navy">dw </span><span style="color:#008040">1090                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:977A                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:977B                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:977C                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:977D                 </span><span style="color:navy">dw offset </span>One_Char_Val
<span style="color:gray">TRANGROUP:977F                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9781                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9782                 </span><span style="color:navy">db </span><span style="color:#008040">0                    </span>; CHAR_FIELD_CHAR
<span style="color:gray">TRANGROUP:9783                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9784                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9785                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:9786 </span>DosRom_Ptr      <span style="color:navy">dw </span><span style="color:#008040">1091                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9788                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9789 </span>DosHma_Ptr      <span style="color:navy">dw </span><span style="color:#008040">1092                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:978B                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:978C </span>DosLow_Ptr      <span style="color:navy">dw </span><span style="color:#008040">1093                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:978E                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:978F </span>NoExecBat_Ptr   <span style="color:navy">dw </span><span style="color:#008040">1094                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9791                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9792 </span>LhInvFil_Ptr    <span style="color:navy">dw </span><span style="color:#008040">1095                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9794                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9795 </span>NoCntry_Ptr     <span style="color:navy">dw </span><span style="color:#008040">1096                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9797                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9798 </span>LhInvArg_Ptr    <span style="color:navy">dw </span><span style="color:#008040">1097                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:979A                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:979B </span>ReqParmMiss     <span style="color:navy">dw </span><span style="color:#008040">1098                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:979D                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:979E </span>LhInvSwt_Ptr    <span style="color:navy">dw </span><span style="color:#008040">1099                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97A0                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:97A1 </span>LhBadUMB_Ptr    <span style="color:navy">dw </span><span style="color:#008040">1100                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97A3                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:97A4 </span>kbytesf_ptr     <span style="color:navy">dw </span><span style="color:#008040">1106                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97A6                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:97A7                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:97A8                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:97A9                 </span><span style="color:navy">dw offset </span>Bytes_Free
<span style="color:gray">TRANGROUP:97AB                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:97AD                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:97AE                 </span><span style="color:navy">db </span><span style="color:#008040">0F1h                 </span>; long binary to decimal
<span style="color:gray">TRANGROUP:97AF                 </span><span style="color:navy">db </span><span style="color:#008040">30
</span><span style="color:gray">TRANGROUP:97B0                 </span><span style="color:navy">db </span><span style="color:#008040">30
</span><span style="color:gray">TRANGROUP:97B1                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:97B2 </span>kbytesf_n_ptr   <span style="color:navy">dw </span><span style="color:#008040">1106                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97B4                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:97B5                 </span><span style="color:navy">db </span><span style="color:#008040">11
</span><span style="color:gray">TRANGROUP:97B6                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:97B7                 </span><span style="color:navy">dw offset </span>Bytes_Free
<span style="color:gray">TRANGROUP:97B9                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:97BB                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:97BC                 </span><span style="color:navy">db </span><span style="color:#008040">0B1h                 </span>; Right_Align+Unsgn_Bin_DWord
<span style="color:gray">TRANGROUP:97BD                 </span><span style="color:navy">db </span><span style="color:#008040">28
</span><span style="color:gray">TRANGROUP:97BE                 </span><span style="color:navy">db </span><span style="color:#008040">28
</span><span style="color:gray">TRANGROUP:97BF                 </span><span style="color:navy">db </span><span style="color:#008040">20h
</span><span style="color:gray">TRANGROUP:97C0 </span>PATH_TEXT       <span style="color:navy">db &#039;PATH=&#039;              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97C5 </span>PROMPT_TEXT     <span style="color:navy">db &#039;PROMPT=&#039;            </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97CC </span>COMSPECSTR      <span style="color:navy">db &#039;COMSPEC=&#039;           </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97D4 </span>DirEnvVar       <span style="color:navy">db &#039;DIRCMD=&#039;            </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97DB </span>no_sep_text     <span style="color:navy">db &#039;NO_SEP=&#039;            </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97E2 </span>BreakHelpMsgs   <span style="color:navy">dw </span><span style="color:#008040">1300                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97E4                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:97E6 </span>ChcpHelpMsgs    <span style="color:navy">dw </span><span style="color:#008040">1320                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97E8                 </span><span style="color:navy">dw </span><span style="color:#008040">1321
</span><span style="color:gray">TRANGROUP:97EA                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:97EC </span>CdHelpMsgs      <span style="color:navy">dw </span><span style="color:#008040">1340                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97EE                 </span><span style="color:navy">dw </span><span style="color:#008040">1341
</span><span style="color:gray">TRANGROUP:97F0                 </span><span style="color:navy">dw </span><span style="color:#008040">1342
</span><span style="color:gray">TRANGROUP:97F2                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:97F4 </span>ClsHelpMsgs     <span style="color:navy">dw </span><span style="color:#008040">1360                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97F6                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:97F8 </span>CopyHelpMsgs    <span style="color:navy">dw </span><span style="color:#008040">1400                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:97FA                 </span><span style="color:navy">dw </span><span style="color:#008040">1401
</span><span style="color:gray">TRANGROUP:97FC                 </span><span style="color:navy">dw </span><span style="color:#008040">1402
</span><span style="color:gray">TRANGROUP:97FE                 </span><span style="color:navy">dw </span><span style="color:#008040">1403
</span><span style="color:gray">TRANGROUP:9800                 </span><span style="color:navy">dw </span><span style="color:#008040">1404
</span><span style="color:gray">TRANGROUP:9802                 </span><span style="color:navy">dw </span><span style="color:#008040">1405
</span><span style="color:gray">TRANGROUP:9804                 </span><span style="color:navy">dw </span><span style="color:#008040">1406
</span><span style="color:gray">TRANGROUP:9806                 </span><span style="color:navy">dw </span><span style="color:#008040">1407
</span><span style="color:gray">TRANGROUP:9808                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:980A </span>CttyHelpMsgs    <span style="color:navy">dw </span><span style="color:#008040">1420                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:980C                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:980E </span>DateHelpMsgs    <span style="color:navy">dw </span><span style="color:#008040">1440                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9810                 </span><span style="color:navy">dw </span><span style="color:#008040">1441
</span><span style="color:gray">TRANGROUP:9812                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9814 </span>DelHelpMsgs     <span style="color:navy">dw </span><span style="color:#008040">1460                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9816                 </span><span style="color:navy">dw </span><span style="color:#008040">1461
</span><span style="color:gray">TRANGROUP:9818                 </span><span style="color:navy">dw </span><span style="color:#008040">1462
</span><span style="color:gray">TRANGROUP:981A                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:981C </span>DirHelpMsgs     <span style="color:navy">dw </span><span style="color:#008040">1480                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:981E                 </span><span style="color:navy">dw </span><span style="color:#008040">1481
</span><span style="color:gray">TRANGROUP:9820                 </span><span style="color:navy">dw </span><span style="color:#008040">1482
</span><span style="color:gray">TRANGROUP:9822                 </span><span style="color:navy">dw </span><span style="color:#008040">1483
</span><span style="color:gray">TRANGROUP:9824                 </span><span style="color:navy">dw </span><span style="color:#008040">1484
</span><span style="color:gray">TRANGROUP:9826                 </span><span style="color:navy">dw </span><span style="color:#008040">1485
</span><span style="color:gray">TRANGROUP:9828                 </span><span style="color:navy">dw </span><span style="color:#008040">1486
</span><span style="color:gray">TRANGROUP:982A                 </span><span style="color:navy">dw </span><span style="color:#008040">1487
</span><span style="color:gray">TRANGROUP:982C                 </span><span style="color:navy">dw </span><span style="color:#008040">1488
</span><span style="color:gray">TRANGROUP:982E                 </span><span style="color:navy">dw </span><span style="color:#008040">1489
</span><span style="color:gray">TRANGROUP:9830                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9832 </span>ExitHelpMsgs    <span style="color:navy">dw </span><span style="color:#008040">1500                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9834                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9836 </span>MdHelpMsgs      <span style="color:navy">dw </span><span style="color:#008040">1520                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9838                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:983A </span>PathHelpMsgs    <span style="color:navy">dw </span><span style="color:#008040">1540                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:983C                 </span><span style="color:navy">dw </span><span style="color:#008040">1541
</span><span style="color:gray">TRANGROUP:983E                 </span><span style="color:navy">dw </span><span style="color:#008040">1542
</span><span style="color:gray">TRANGROUP:9840                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9842 </span>PromptHelpMsgs  <span style="color:navy">dw </span><span style="color:#008040">1560                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9844                 </span><span style="color:navy">dw </span><span style="color:#008040">1561
</span><span style="color:gray">TRANGROUP:9846                 </span><span style="color:navy">dw </span><span style="color:#008040">1562
</span><span style="color:gray">TRANGROUP:9848                 </span><span style="color:navy">dw </span><span style="color:#008040">1563
</span><span style="color:gray">TRANGROUP:984A                 </span><span style="color:navy">dw </span><span style="color:#008040">1564
</span><span style="color:gray">TRANGROUP:984C                 </span><span style="color:navy">dw </span><span style="color:#008040">1565
</span><span style="color:gray">TRANGROUP:984E                 </span><span style="color:navy">dw </span><span style="color:#008040">1566
</span><span style="color:gray">TRANGROUP:9850                 </span><span style="color:navy">dw </span><span style="color:#008040">1567
</span><span style="color:gray">TRANGROUP:9852                 </span><span style="color:navy">dw </span><span style="color:#008040">1568
</span><span style="color:gray">TRANGROUP:9854                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9856 </span>RdHelpMsgs      <span style="color:navy">dw </span><span style="color:#008040">1580                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9858                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:985A </span>RenHelpMsgs     <span style="color:navy">dw </span><span style="color:#008040">1600                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:985C                 </span><span style="color:navy">dw </span><span style="color:#008040">1601
</span><span style="color:gray">TRANGROUP:985E                 </span><span style="color:navy">dw </span><span style="color:#008040">1602
</span><span style="color:gray">TRANGROUP:9860                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9862 </span>SetHelpMsgs     <span style="color:navy">dw </span><span style="color:#008040">1620                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9864                 </span><span style="color:navy">dw </span><span style="color:#008040">1621
</span><span style="color:gray">TRANGROUP:9866                 </span><span style="color:navy">dw </span><span style="color:#008040">1622
</span><span style="color:gray">TRANGROUP:9868                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:986A </span>TimeHelpMsgs    <span style="color:navy">dw </span><span style="color:#008040">1640                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:986C                 </span><span style="color:navy">dw </span><span style="color:#008040">1641
</span><span style="color:gray">TRANGROUP:986E                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9870 </span>TypeHelpMsgs    <span style="color:navy">dw </span><span style="color:#008040">1660                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9872                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9874 </span>VerHelpMsgs     <span style="color:navy">dw </span><span style="color:#008040">1680                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9876                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9878 </span>VerifyHelpMsgs  <span style="color:navy">dw </span><span style="color:#008040">1700                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:987A                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:987C </span>VolHelpMsgs     <span style="color:navy">dw </span><span style="color:#008040">1720                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:987E                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9880 </span>CallHelpMsgs    <span style="color:navy">dw </span><span style="color:#008040">1740                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9882                 </span><span style="color:navy">dw </span><span style="color:#008040">1741
</span><span style="color:gray">TRANGROUP:9884                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9886 </span>RemHelpMsgs     <span style="color:navy">dw </span><span style="color:#008040">1760                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9888                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:988A </span>PauseHelpMsgs   <span style="color:navy">dw </span><span style="color:#008040">1780                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:988C                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:988E </span>EchoHelpMsgs    <span style="color:navy">dw </span><span style="color:#008040">1800                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9890                 </span><span style="color:navy">dw </span><span style="color:#008040">1801
</span><span style="color:gray">TRANGROUP:9892                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9894 </span>GotoHelpMsgs    <span style="color:navy">dw </span><span style="color:#008040">1820                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9896                 </span><span style="color:navy">dw </span><span style="color:#008040">1821
</span><span style="color:gray">TRANGROUP:9898                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:989A </span>ShiftHelpMsgs   <span style="color:navy">dw </span><span style="color:#008040">1840                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:989C                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:989E </span>IfHelpMsg       <span style="color:navy">dw </span><span style="color:#008040">1860                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:98A0                 </span><span style="color:navy">dw </span><span style="color:#008040">1861
</span><span style="color:gray">TRANGROUP:98A2                 </span><span style="color:navy">dw </span><span style="color:#008040">1862
</span><span style="color:gray">TRANGROUP:98A4                 </span><span style="color:navy">dw </span><span style="color:#008040">1863
</span><span style="color:gray">TRANGROUP:98A6                 </span><span style="color:navy">dw </span><span style="color:#008040">1864
</span><span style="color:gray">TRANGROUP:98A8                 </span><span style="color:navy">dw </span><span style="color:#008040">1865
</span><span style="color:gray">TRANGROUP:98AA                 </span><span style="color:navy">dw </span><span style="color:#008040">1866
</span><span style="color:gray">TRANGROUP:98AC                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:98AE </span>ForHelpMsgs     <span style="color:navy">dw </span><span style="color:#008040">1880                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:98B0                 </span><span style="color:navy">dw </span><span style="color:#008040">1881
</span><span style="color:gray">TRANGROUP:98B2                 </span><span style="color:navy">dw </span><span style="color:#008040">1882
</span><span style="color:gray">TRANGROUP:98B4                 </span><span style="color:navy">dw </span><span style="color:#008040">1883
</span><span style="color:gray">TRANGROUP:98B6                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:98B8 </span>TruenameHelpMsgs <span style="color:navy">dw </span><span style="color:#008040">1900                </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:98BA                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:98BC </span>LoadhighHelpMsgs <span style="color:navy">dw </span><span style="color:#008040">1920                </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:98BE                 </span><span style="color:navy">dw </span><span style="color:#008040">1921
</span><span style="color:gray">TRANGROUP:98C0                 </span><span style="color:navy">dw </span><span style="color:#008040">1922
</span><span style="color:gray">TRANGROUP:98C2                 </span><span style="color:navy">dw </span><span style="color:#008040">1923
</span><span style="color:gray">TRANGROUP:98C4                 </span><span style="color:navy">dw </span><span style="color:#008040">1924
</span><span style="color:gray">TRANGROUP:98C6                 </span><span style="color:navy">dw </span><span style="color:#008040">1925
</span><span style="color:gray">TRANGROUP:98C8                 </span><span style="color:navy">dw </span><span style="color:#008040">1926
</span><span style="color:gray">TRANGROUP:98CA                 </span><span style="color:navy">dw </span><span style="color:#008040">1927
</span><span style="color:gray">TRANGROUP:98CC                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:98CE </span>twospacechars   <span style="color:navy">db &#039;  &#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:98D1 </span>CLSSTRING       <span style="color:navy">db </span><span style="color:#008040">4                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:98D2                 </span><span style="color:navy">db </span><span style="color:#008040">1Bh
</span><span style="color:gray">TRANGROUP:98D3 </span>PROMPT_TABLE_3  <span style="color:navy">db &#039;[2J&#039;                </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:98D6 </span>PROMPT_TABLE    <span style="color:navy">db &#039;</span><span style="color:green">B&#039;
</span><span style="color:gray">TRANGROUP:98D7                 </span><span style="color:navy">dw offset </span>Print_B
<span style="color:gray">TRANGROUP:98D9                 </span><span style="color:navy">db &#039;</span><span style="color:green">D&#039;
</span><span style="color:gray">TRANGROUP:98DA                 </span><span style="color:navy">dw offset </span>PRINT_DATE
<span style="color:gray">TRANGROUP:98DC                 </span><span style="color:navy">db &#039;</span><span style="color:green">E&#039;
</span><span style="color:gray">TRANGROUP:98DD                 </span><span style="color:navy">dw offset </span>PRINT_ESC
<span style="color:gray">TRANGROUP:98DF                 </span><span style="color:navy">db &#039;</span><span style="color:green">G&#039;
</span><span style="color:gray">TRANGROUP:98E0                 </span><span style="color:navy">dw offset </span>PRINT_G
<span style="color:gray">TRANGROUP:98E2                 </span><span style="color:navy">db &#039;</span><span style="color:green">H&#039;
</span><span style="color:gray">TRANGROUP:98E3                 </span><span style="color:navy">dw offset </span>PRINT_BACK
<span style="color:gray">TRANGROUP:98E5                 </span><span style="color:navy">db &#039;</span><span style="color:green">L&#039;
</span><span style="color:gray">TRANGROUP:98E6                 </span><span style="color:navy">dw offset </span>PRINT_L
<span style="color:gray">TRANGROUP:98E8                 </span><span style="color:navy">db &#039;</span><span style="color:green">N&#039;
</span><span style="color:gray">TRANGROUP:98E9                 </span><span style="color:navy">dw offset </span>PRINT_DRIVE
<span style="color:gray">TRANGROUP:98EB                 </span><span style="color:navy">db &#039;</span><span style="color:green">P&#039;
</span><span style="color:gray">TRANGROUP:98EC                 </span><span style="color:navy">dw offset </span>build_dir_for_prompt
<span style="color:gray">TRANGROUP:98EE                 </span><span style="color:navy">db &#039;</span><span style="color:green">Q&#039;
</span><span style="color:gray">TRANGROUP:98EF                 </span><span style="color:navy">dw offset </span>PRINT_EQ
<span style="color:gray">TRANGROUP:98F1                 </span><span style="color:navy">db &#039;</span><span style="color:green">R&#039;
</span><span style="color:gray">TRANGROUP:98F2                 </span><span style="color:navy">dw offset </span>PRINT_R       ; PRINT Return code, [Retcode]
<span style="color:gray">TRANGROUP:98F4                 </span><span style="color:navy">db &#039;</span><span style="color:green">T&#039;
</span><span style="color:gray">TRANGROUP:98F5                 </span><span style="color:navy">dw offset </span>PRINT_TIME
<span style="color:gray">TRANGROUP:98F7                 </span><span style="color:navy">db &#039;</span><span style="color:green">V&#039;
</span><span style="color:gray">TRANGROUP:98F8                 </span><span style="color:navy">dw offset </span>PRINT_VERSION
<span style="color:gray">TRANGROUP:98FA                 </span><span style="color:navy">db &#039;</span><span style="color:green">_&#039;
</span><span style="color:gray">TRANGROUP:98FB                 </span><span style="color:navy">dw offset </span>CRLF2
<span style="color:gray">TRANGROUP:98FD                 </span><span style="color:navy">db &#039;</span><span style="color:green">$&#039;
</span><span style="color:gray">TRANGROUP:98FE                 </span><span style="color:navy">dw offset </span>PRINT_CHAR
<span style="color:gray">TRANGROUP:9900                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9901 </span>IFTAB           <span style="color:navy">db </span><span style="color:green">3</span><span style="color:navy">,&#039;</span><span style="color:green">NOT&#039;              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9905                 </span><span style="color:navy">dw offset </span>IFNOT
<span style="color:gray">TRANGROUP:9907                 </span><span style="color:navy">db </span><span style="color:#008040">10
</span><span style="color:gray">TRANGROUP:9908                 </span><span style="color:navy">db &#039;ERRORLEVEL&#039;
</span><span style="color:gray">TRANGROUP:9912                 </span><span style="color:navy">dw offset </span>IFERLEV
<span style="color:gray">TRANGROUP:9914                 </span><span style="color:navy">db </span><span style="color:#008040">5
</span><span style="color:gray">TRANGROUP:9915                 </span><span style="color:navy">db &#039;EXIST&#039;
</span><span style="color:gray">TRANGROUP:991A                 </span><span style="color:navy">dw offset </span>IFEXISTS
<span style="color:gray">TRANGROUP:991C                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:991D </span>COMTAB          <span style="color:navy">db </span><span style="color:green">3</span><span style="color:navy">,&#039;</span><span style="color:green">DIR&#039;              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9921                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:9922                 </span><span style="color:navy">dw offset </span>CATALOG
<span style="color:gray">TRANGROUP:9924                 </span><span style="color:navy">dw offset </span>DirHelpMsgs
<span style="color:gray">TRANGROUP:9926                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:9927                 </span><span style="color:navy">db &#039;CALL&#039;
</span><span style="color:gray">TRANGROUP:992B                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:992C                 </span><span style="color:navy">dw offset </span>_$CALL
<span style="color:gray">TRANGROUP:992E                 </span><span style="color:navy">dw offset </span>CallHelpMsgs
<span style="color:gray">TRANGROUP:9930                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:9931                 </span><span style="color:navy">db &#039;CHCP&#039;
</span><span style="color:gray">TRANGROUP:9935                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9936                 </span><span style="color:navy">dw offset </span>CHCP
<span style="color:gray">TRANGROUP:9938                 </span><span style="color:navy">dw offset </span>ChcpHelpMsgs
<span style="color:gray">TRANGROUP:993A                 </span><span style="color:navy">db </span><span style="color:#008040">6
</span><span style="color:gray">TRANGROUP:993B                 </span><span style="color:navy">db &#039;RENAME&#039;
</span><span style="color:gray">TRANGROUP:9941                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:9942                 </span><span style="color:navy">dw offset </span>CRENAME
<span style="color:gray">TRANGROUP:9944                 </span><span style="color:navy">dw offset </span>RenHelpMsgs
<span style="color:gray">TRANGROUP:9946                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:9947                 </span><span style="color:navy">db &#039;REN&#039;
</span><span style="color:gray">TRANGROUP:994A                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:994B                 </span><span style="color:navy">dw offset </span>CRENAME
<span style="color:gray">TRANGROUP:994D                 </span><span style="color:navy">dw offset </span>RenHelpMsgs
<span style="color:gray">TRANGROUP:994F                 </span><span style="color:navy">db </span><span style="color:#008040">5
</span><span style="color:gray">TRANGROUP:9950                 </span><span style="color:navy">db &#039;ERASE&#039;
</span><span style="color:gray">TRANGROUP:9955                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:9956                 </span><span style="color:navy">dw offset </span>ERASE
<span style="color:gray">TRANGROUP:9958                 </span><span style="color:navy">dw offset </span>DelHelpMsgs
<span style="color:gray">TRANGROUP:995A                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:995B                 </span><span style="color:navy">db &#039;DEL&#039;
</span><span style="color:gray">TRANGROUP:995E                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:995F                 </span><span style="color:navy">dw offset </span>ERASE
<span style="color:gray">TRANGROUP:9961                 </span><span style="color:navy">dw offset </span>DelHelpMsgs
<span style="color:gray">TRANGROUP:9963                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:9964                 </span><span style="color:navy">db &#039;TYPE&#039;
</span><span style="color:gray">TRANGROUP:9968                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:9969                 </span><span style="color:navy">dw offset </span>TYPEFIL
<span style="color:gray">TRANGROUP:996B                 </span><span style="color:navy">dw offset </span>TypeHelpMsgs
<span style="color:gray">TRANGROUP:996D                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:996E                 </span><span style="color:navy">db &#039;REM&#039;
</span><span style="color:gray">TRANGROUP:9971                 </span><span style="color:navy">db </span><span style="color:#008040">6
</span><span style="color:gray">TRANGROUP:9972                 </span><span style="color:navy">dw offset </span>TCOMMAND
<span style="color:gray">TRANGROUP:9974                 </span><span style="color:navy">dw offset </span>RemHelpMsgs
<span style="color:gray">TRANGROUP:9976                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:9977                 </span><span style="color:navy">db &#039;COPY&#039;
</span><span style="color:gray">TRANGROUP:997B                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:997C                 </span><span style="color:navy">dw offset </span>COPY
<span style="color:gray">TRANGROUP:997E                 </span><span style="color:navy">dw offset </span>CopyHelpMsgs
<span style="color:gray">TRANGROUP:9980                 </span><span style="color:navy">db </span><span style="color:#008040">5
</span><span style="color:gray">TRANGROUP:9981                 </span><span style="color:navy">db &#039;PAUSE&#039;
</span><span style="color:gray">TRANGROUP:9986                 </span><span style="color:navy">db </span><span style="color:#008040">6
</span><span style="color:gray">TRANGROUP:9987                 </span><span style="color:navy">dw offset </span>PAUSE
<span style="color:gray">TRANGROUP:9989                 </span><span style="color:navy">dw offset </span>PauseHelpMsgs
<span style="color:gray">TRANGROUP:998B                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:998C                 </span><span style="color:navy">db &#039;DATE&#039;
</span><span style="color:gray">TRANGROUP:9990                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9991                 </span><span style="color:navy">dw offset </span>DATE
<span style="color:gray">TRANGROUP:9993                 </span><span style="color:navy">dw offset </span>DateHelpMsgs
<span style="color:gray">TRANGROUP:9995                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:9996                 </span><span style="color:navy">db &#039;TIME&#039;
</span><span style="color:gray">TRANGROUP:999A                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:999B                 </span><span style="color:navy">dw offset </span>CTIME
<span style="color:gray">TRANGROUP:999D                 </span><span style="color:navy">dw offset </span>TimeHelpMsgs
<span style="color:gray">TRANGROUP:999F                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:99A0                 </span><span style="color:navy">db &#039;VER&#039;
</span><span style="color:gray">TRANGROUP:99A3                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:99A4                 </span><span style="color:navy">dw offset </span>VERSION
<span style="color:gray">TRANGROUP:99A6                 </span><span style="color:navy">dw offset </span>VerHelpMsgs
<span style="color:gray">TRANGROUP:99A8                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:99A9                 </span><span style="color:navy">db &#039;VOL&#039;
</span><span style="color:gray">TRANGROUP:99AC                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:99AD                 </span><span style="color:navy">dw offset </span>VOLUME
<span style="color:gray">TRANGROUP:99AF                 </span><span style="color:navy">dw offset </span>VolHelpMsgs
<span style="color:gray">TRANGROUP:99B1                 </span><span style="color:navy">db </span><span style="color:green">2</span><span style="color:navy">,&#039;</span><span style="color:green">CD&#039;
</span><span style="color:gray">TRANGROUP:99B4                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:99B5                 </span><span style="color:navy">dw offset </span>_$CHDIR
<span style="color:gray">TRANGROUP:99B7                 </span><span style="color:navy">dw offset </span>CdHelpMsgs
<span style="color:gray">TRANGROUP:99B9                 </span><span style="color:navy">db </span><span style="color:#008040">5
</span><span style="color:gray">TRANGROUP:99BA                 </span><span style="color:navy">db &#039;CHDIR&#039;
</span><span style="color:gray">TRANGROUP:99BF                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:99C0                 </span><span style="color:navy">dw offset </span>_$CHDIR
<span style="color:gray">TRANGROUP:99C2                 </span><span style="color:navy">dw offset </span>CdHelpMsgs
<span style="color:gray">TRANGROUP:99C4                 </span><span style="color:navy">db </span><span style="color:green">2</span><span style="color:navy">,&#039;</span><span style="color:green">MD&#039;
</span><span style="color:gray">TRANGROUP:99C7                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:99C8                 </span><span style="color:navy">dw offset </span>_$MKDIR
<span style="color:gray">TRANGROUP:99CA                 </span><span style="color:navy">dw offset </span>MdHelpMsgs
<span style="color:gray">TRANGROUP:99CC                 </span><span style="color:navy">db </span><span style="color:#008040">5
</span><span style="color:gray">TRANGROUP:99CD                 </span><span style="color:navy">db &#039;MKDIR&#039;
</span><span style="color:gray">TRANGROUP:99D2                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:99D3                 </span><span style="color:navy">dw offset </span>_$MKDIR
<span style="color:gray">TRANGROUP:99D5                 </span><span style="color:navy">dw offset </span>MdHelpMsgs
<span style="color:gray">TRANGROUP:99D7                 </span><span style="color:navy">db </span><span style="color:green">2</span><span style="color:navy">,&#039;</span><span style="color:green">RD&#039;
</span><span style="color:gray">TRANGROUP:99DA                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:99DB                 </span><span style="color:navy">dw offset </span>_$RMDIR
<span style="color:gray">TRANGROUP:99DD                 </span><span style="color:navy">dw offset </span>RdHelpMsgs
<span style="color:gray">TRANGROUP:99DF                 </span><span style="color:navy">db </span><span style="color:#008040">5
</span><span style="color:gray">TRANGROUP:99E0                 </span><span style="color:navy">db &#039;RMDIR&#039;
</span><span style="color:gray">TRANGROUP:99E5                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:99E6                 </span><span style="color:navy">dw offset </span>_$RMDIR
<span style="color:gray">TRANGROUP:99E8                 </span><span style="color:navy">dw offset </span>RdHelpMsgs
<span style="color:gray">TRANGROUP:99EA                 </span><span style="color:navy">db </span><span style="color:#008040">5
</span><span style="color:gray">TRANGROUP:99EB                 </span><span style="color:navy">db &#039;BREAK&#039;
</span><span style="color:gray">TRANGROUP:99F0                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:99F1                 </span><span style="color:navy">dw offset </span>CNTRLC
<span style="color:gray">TRANGROUP:99F3                 </span><span style="color:navy">dw offset </span>BreakHelpMsgs
<span style="color:gray">TRANGROUP:99F5                 </span><span style="color:navy">db </span><span style="color:#008040">6
</span><span style="color:gray">TRANGROUP:99F6                 </span><span style="color:navy">db &#039;VERIFY&#039;
</span><span style="color:gray">TRANGROUP:99FC                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:99FD                 </span><span style="color:navy">dw offset </span>VERIFY
<span style="color:gray">TRANGROUP:99FF                 </span><span style="color:navy">dw offset </span>VerifyHelpMsgs
<span style="color:gray">TRANGROUP:9A01                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:9A02                 </span><span style="color:navy">db &#039;SET&#039;
</span><span style="color:gray">TRANGROUP:9A05                 </span><span style="color:navy">db </span><span style="color:#008040">6
</span><span style="color:gray">TRANGROUP:9A06                 </span><span style="color:navy">dw offset </span>ADD_NAME_TO_ENVIRONMENT
<span style="color:gray">TRANGROUP:9A08                 </span><span style="color:navy">dw offset </span>SetHelpMsgs
<span style="color:gray">TRANGROUP:9A0A                 </span><span style="color:navy">db </span><span style="color:#008040">6
</span><span style="color:gray">TRANGROUP:9A0B                 </span><span style="color:navy">db &#039;PROMPT&#039;
</span><span style="color:gray">TRANGROUP:9A11                 </span><span style="color:navy">db </span><span style="color:#008040">6
</span><span style="color:gray">TRANGROUP:9A12                 </span><span style="color:navy">dw offset </span>ADD_PROMPT
<span style="color:gray">TRANGROUP:9A14                 </span><span style="color:navy">dw offset </span>PromptHelpMsgs
<span style="color:gray">TRANGROUP:9A16                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:9A17                 </span><span style="color:navy">db &#039;PATH&#039;
</span><span style="color:gray">TRANGROUP:9A1B                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9A1C                 </span><span style="color:navy">dw offset </span>PATH
<span style="color:gray">TRANGROUP:9A1E                 </span><span style="color:navy">dw offset </span>PathHelpMsgs
<span style="color:gray">TRANGROUP:9A20                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:9A21                 </span><span style="color:navy">db &#039;EXIT&#039;
</span><span style="color:gray">TRANGROUP:9A25                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9A26                 </span><span style="color:navy">dw offset </span>_$EXIT
<span style="color:gray">TRANGROUP:9A28                 </span><span style="color:navy">dw offset </span>ExitHelpMsgs
<span style="color:gray">TRANGROUP:9A2A                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:9A2B                 </span><span style="color:navy">db &#039;CTTY&#039;
</span><span style="color:gray">TRANGROUP:9A2F                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:9A30                 </span><span style="color:navy">dw offset </span>CTTY
<span style="color:gray">TRANGROUP:9A32                 </span><span style="color:navy">dw offset </span>CttyHelpMsgs
<span style="color:gray">TRANGROUP:9A34                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:9A35                 </span><span style="color:navy">db &#039;ECHO&#039;
</span><span style="color:gray">TRANGROUP:9A39                 </span><span style="color:navy">db </span><span style="color:#008040">6
</span><span style="color:gray">TRANGROUP:9A3A                 </span><span style="color:navy">dw offset </span>_ECHO
<span style="color:gray">TRANGROUP:9A3C                 </span><span style="color:navy">dw offset </span>EchoHelpMsgs
<span style="color:gray">TRANGROUP:9A3E                 </span><span style="color:navy">db </span><span style="color:#008040">4
</span><span style="color:gray">TRANGROUP:9A3F                 </span><span style="color:navy">db &#039;GOTO&#039;
</span><span style="color:gray">TRANGROUP:9A43                 </span><span style="color:navy">db </span><span style="color:#008040">6
</span><span style="color:gray">TRANGROUP:9A44                 </span><span style="color:navy">dw offset </span>_GOTO
<span style="color:gray">TRANGROUP:9A46                 </span><span style="color:navy">dw offset </span>GotoHelpMsgs
<span style="color:gray">TRANGROUP:9A48                 </span><span style="color:navy">db </span><span style="color:#008040">5
</span><span style="color:gray">TRANGROUP:9A49                 </span><span style="color:navy">db &#039;SHIFT&#039;
</span><span style="color:gray">TRANGROUP:9A4E                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9A4F                 </span><span style="color:navy">dw offset </span>_SHIFT
<span style="color:gray">TRANGROUP:9A51                 </span><span style="color:navy">dw offset </span>ShiftHelpMsgs
<span style="color:gray">TRANGROUP:9A53                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9A54                 </span><span style="color:navy">db &#039;IF&#039;
</span><span style="color:gray">TRANGROUP:9A56                 </span><span style="color:navy">db </span><span style="color:#008040">6
</span><span style="color:gray">TRANGROUP:9A57                 </span><span style="color:navy">dw offset </span>_$IF
<span style="color:gray">TRANGROUP:9A59                 </span><span style="color:navy">dw offset </span>IfHelpMsg
<span style="color:gray">TRANGROUP:9A5B                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:9A5C                 </span><span style="color:navy">db &#039;FOR&#039;
</span><span style="color:gray">TRANGROUP:9A5F                 </span><span style="color:navy">db </span><span style="color:#008040">6
</span><span style="color:gray">TRANGROUP:9A60                 </span><span style="color:navy">dw offset </span>_$FOR
<span style="color:gray">TRANGROUP:9A62                 </span><span style="color:navy">dw offset </span>ForHelpMsgs
<span style="color:gray">TRANGROUP:9A64                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:9A65                 </span><span style="color:navy">db &#039;CLS&#039;
</span><span style="color:gray">TRANGROUP:9A68                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9A69                 </span><span style="color:navy">dw offset </span>CLS
<span style="color:gray">TRANGROUP:9A6B                 </span><span style="color:navy">dw offset </span>ClsHelpMsgs
<span style="color:gray">TRANGROUP:9A6D                 </span><span style="color:navy">db </span><span style="color:#008040">8
</span><span style="color:gray">TRANGROUP:9A6E                 </span><span style="color:navy">db &#039;TRUENAME&#039;
</span><span style="color:gray">TRANGROUP:9A76                 </span><span style="color:navy">db </span><span style="color:#008040">3
</span><span style="color:gray">TRANGROUP:9A77                 </span><span style="color:navy">dw offset </span>TRUENAME
<span style="color:gray">TRANGROUP:9A79                 </span><span style="color:navy">dw offset </span>TruenameHelpMsgs
<span style="color:gray">TRANGROUP:9A7B                 </span><span style="color:navy">db </span><span style="color:#008040">8
</span><span style="color:gray">TRANGROUP:9A7C                 </span><span style="color:navy">db &#039;LOADHIGH&#039;
</span><span style="color:gray">TRANGROUP:9A84                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9A85                 </span><span style="color:navy">dw offset </span>LoadHigh
<span style="color:gray">TRANGROUP:9A87                 </span><span style="color:navy">dw offset </span>LoadhighHelpMsgs
<span style="color:gray">TRANGROUP:9A89                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9A8A                 </span><span style="color:navy">db &#039;LH&#039;
</span><span style="color:gray">TRANGROUP:9A8C                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9A8D                 </span><span style="color:navy">dw offset </span>LoadHigh
<span style="color:gray">TRANGROUP:9A8F                 </span><span style="color:navy">dw offset </span>LoadhighHelpMsgs
<span style="color:gray">TRANGROUP:9A91                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9A92 </span>comext          <span style="color:navy">db &#039;.COM&#039;               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9A96 </span>exeext          <span style="color:navy">db &#039;.EXE&#039;               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9A9A </span>batext          <span style="color:navy">db &#039;.BAT&#039;               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9A9E </span>switch_list     <span style="color:navy">db &#039;-Y?VBAPW&#039;           </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AA6 </span>AttrLtrs        <span style="color:navy">db &#039;RHSvDA&#039;             </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AAC </span>OrderLtrs       <span style="color:navy">db &#039;NEDSG&#039;              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AB1 </span>comspec_flag    <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AB2 </span>BATBUFLEN       <span style="color:navy">dw </span><span style="color:#008040">20h                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AB4 </span>NO_VALUES       <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AB6 </span>NULL_VALUE_LIST <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AB7 </span>FILE_REQUIRED   <span style="color:navy">dw </span><span style="color:#008040">200h                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AB9                 </span><span style="color:navy">dw </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9ABB                 </span><span style="color:navy">dw offset </span>PARSE1_OUTPUT
<span style="color:gray">TRANGROUP:9ABD                 </span><span style="color:navy">dw offset </span>NO_VALUES
<span style="color:gray">TRANGROUP:9ABF                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9AC0 </span>FILE_OPTIONAL   <span style="color:navy">dw </span><span style="color:#008040">301h                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AC2                 </span><span style="color:navy">dw </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9AC4                 </span><span style="color:navy">dw offset </span>PARSE1_OUTPUT
<span style="color:gray">TRANGROUP:9AC6                 </span><span style="color:navy">dw offset </span>NO_VALUES
<span style="color:gray">TRANGROUP:9AC8                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9AC9 </span>FILE_OPTIONAL2  <span style="color:navy">dw </span><span style="color:#008040">201h                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9ACB                 </span><span style="color:navy">dw </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9ACD                 </span><span style="color:navy">dw offset </span>PARSE1_OUTPUT
<span style="color:gray">TRANGROUP:9ACF                 </span><span style="color:navy">dw offset </span>NO_VALUES
<span style="color:gray">TRANGROUP:9AD1                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9AD2 </span>SLASH_P_SWITCH  <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AD4                 </span><span style="color:navy">dw </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9AD6                 </span><span style="color:navy">dw offset </span>PARSE1_OUTPUT
<span style="color:gray">TRANGROUP:9AD8                 </span><span style="color:navy">dw offset </span>NO_VALUES
<span style="color:gray">TRANGROUP:9ADA                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9ADB </span>SLASH_P_SYN     <span style="color:navy">db &#039;/P&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9ADE </span>PARSE_BREAK     <span style="color:navy">dw offset </span>BREAK_PARMS   <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AE0                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9AE1 </span>BREAK_PARMS     <span style="color:navy">db </span><span style="color:#008040">0</span><span style="color:navy">, </span><span style="color:#008040">1                 </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AE3                 </span><span style="color:navy">dw offset </span>BREAK_CONTROL1
<span style="color:gray">TRANGROUP:9AE5                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9AE6                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9AE7 </span>BREAK_CONTROL1  <span style="color:navy">dw </span><span style="color:#008040">2001h                </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AE9                 </span><span style="color:navy">dw </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9AEB                 </span><span style="color:navy">dw offset </span>PARSE1_OUTPUT
<span style="color:gray">TRANGROUP:9AED                 </span><span style="color:navy">dw offset </span>BREAK_VALUES
<span style="color:gray">TRANGROUP:9AEF                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9AF0 </span>BREAK_VALUES    <span style="color:navy">db </span><span style="color:#008040">3                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AF1                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9AF2                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9AF3                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9AF4                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9AF5                 </span><span style="color:navy">dw offset </span>BREAK_ON      <span style="color:gray">; &quot;ON&quot;
TRANGROUP:9AF7                 </span><span style="color:navy">db &#039;</span><span style="color:green">f&#039;
</span><span style="color:gray">TRANGROUP:9AF8                 </span><span style="color:navy">dw offset </span>BREAK_OFF     <span style="color:gray">; &quot;OFF&quot;
TRANGROUP:9AFA </span>BREAK_ON        <span style="color:navy">db &#039;ON&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9AFD </span>BREAK_OFF       <span style="color:navy">db &#039;OFF&#039;,0              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B01 </span>PARSE_CHCP      <span style="color:navy">dw offset </span>CHCP_PARMS    <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B01                                         ; &quot;\x01&quot;
TRANGROUP:9B03                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B04 </span>CHCP_PARMS      <span style="color:navy">db </span><span style="color:green">0</span><span style="color:navy">,</span><span style="color:green">1                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B06                 </span><span style="color:navy">dw offset </span>CHCP_CONTROL1
<span style="color:gray">TRANGROUP:9B08                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B09                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B0A </span>CHCP_CONTROL1   <span style="color:navy">dw </span><span style="color:#008040">8001h                </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B0C                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B0E                 </span><span style="color:navy">dw offset </span>PARSE1_OUTPUT
<span style="color:gray">TRANGROUP:9B10                 </span><span style="color:navy">dw offset </span>CHCP_VALUES
<span style="color:gray">TRANGROUP:9B12                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B13 </span>CHCP_VALUES     <span style="color:navy">db </span><span style="color:#008040">1                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B14                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9B15                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9B16                 </span><span style="color:navy">dd </span><span style="color:#008040">100                  </span>; CHCP_MINVAL
<span style="color:gray">TRANGROUP:9B1A                 </span><span style="color:navy">dd </span><span style="color:#008040">999                  </span>; CHCP_MAXVAL
<span style="color:gray">TRANGROUP:9B1E                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B1F                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B20 </span>PARSE_DATE      <span style="color:navy">dw offset </span>DATE_PARMS    <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B20                                         ; &quot;\x01&quot;
TRANGROUP:9B22                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B23 </span>DATE_PARMS      <span style="color:navy">db </span><span style="color:green">0</span><span style="color:navy">,</span><span style="color:green">1                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B25                 </span><span style="color:navy">dw offset </span>DATE_CONTROL1
<span style="color:gray">TRANGROUP:9B27                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B28                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B29 </span>DATE_CONTROL1   <span style="color:navy">dw </span><span style="color:#008040">1001h                </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B2B                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B2D                 </span><span style="color:navy">dw offset </span>DATE_OUTPUT
<span style="color:gray">TRANGROUP:9B2F                 </span><span style="color:navy">dw offset </span>NO_VALUES
<span style="color:gray">TRANGROUP:9B31                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B32 </span>PARSE_TIME      <span style="color:navy">dw offset </span>TIME_PARMS    <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B34                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B35 </span>TIME_PARMS      <span style="color:navy">db </span><span style="color:#008040">0</span><span style="color:navy">, </span><span style="color:#008040">1                 </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B37                 </span><span style="color:navy">dw offset </span>TIME_CONTROL1
<span style="color:gray">TRANGROUP:9B39                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B3A                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B3B </span>TIME_CONTROL1   <span style="color:navy">dw </span><span style="color:#008040">801h                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B3D                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B3F                 </span><span style="color:navy">dw offset </span>TIME_OUTPUT
<span style="color:gray">TRANGROUP:9B41                 </span><span style="color:navy">dw offset </span>NO_VALUES
<span style="color:gray">TRANGROUP:9B43                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B44 </span>PARSE_VOL       <span style="color:navy">dw offset </span>VOL_PARMS     <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B44                                         ; &quot;\x01&quot;
TRANGROUP:9B46                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B47 </span>VOL_PARMS       <span style="color:navy">db </span><span style="color:green">0</span><span style="color:navy">,</span><span style="color:green">1                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B49                 </span><span style="color:navy">dw offset </span>DRIVE_CONTROL1
<span style="color:gray">TRANGROUP:9B4B                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B4C                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B4D </span>DRIVE_CONTROL1  <span style="color:navy">dw </span><span style="color:#008040">101h                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B4F                 </span><span style="color:navy">dw </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9B51                 </span><span style="color:navy">dw offset </span>DRIVE_OUTPUT
<span style="color:gray">TRANGROUP:9B53                 </span><span style="color:navy">dw offset </span>NO_VALUES
<span style="color:gray">TRANGROUP:9B55                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B56 </span>PARSE_MRDIR     <span style="color:navy">dw offset </span>MRDIR_PARMS   <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B56                                         ; &quot;\x01\x01&quot;
TRANGROUP:9B58                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B59 </span>MRDIR_PARMS     <span style="color:navy">db </span><span style="color:green">1</span><span style="color:navy">,</span><span style="color:green">1                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B5B                 </span><span style="color:navy">dw offset </span>FILE_REQUIRED
<span style="color:gray">TRANGROUP:9B5D                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B5E                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B5F </span>PARSE_CHDIR     <span style="color:navy">dw offset </span>CHDIR_PARMS   <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B5F                                         ; &quot;\x01&quot;
TRANGROUP:9B61                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B62 </span>CHDIR_PARMS     <span style="color:navy">db </span><span style="color:green">0</span><span style="color:navy">,</span><span style="color:green">1                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B64                 </span><span style="color:navy">dw offset </span>FILE_OPTIONAL
<span style="color:gray">TRANGROUP:9B66                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B67                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B68 </span>PARSE_ERASE     <span style="color:navy">dw offset </span>ERASE_PARMS   <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B68                                         ; &quot;\x01\x01&quot;
TRANGROUP:9B6A                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B6B </span>ERASE_PARMS     <span style="color:navy">db </span><span style="color:green">1</span><span style="color:navy">,</span><span style="color:green">1                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B6D                 </span><span style="color:navy">dw offset </span>FILE_REQUIRED
<span style="color:gray">TRANGROUP:9B6F                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9B70                 </span><span style="color:navy">dw offset </span>SLASH_P_SWITCH
<span style="color:gray">TRANGROUP:9B72                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B73 </span>PARSE_DIR       <span style="color:navy">dw offset </span>DIR_PARMS     <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B75                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B76 </span>DIR_PARMS       <span style="color:navy">db </span><span style="color:#008040">0</span><span style="color:navy">, </span><span style="color:#008040">1                 </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B78                 </span><span style="color:navy">dw offset </span>FILE_OPTIONAL2
<span style="color:gray">TRANGROUP:9B7A                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9B7B                 </span><span style="color:navy">dw offset </span>DIR_SW_VALUED
<span style="color:gray">TRANGROUP:9B7D                 </span><span style="color:navy">dw offset </span>DIR_SW_UNVALUED
<span style="color:gray">TRANGROUP:9B7F                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B80 </span>DIR_SW_VALUED   <span style="color:navy">dw </span><span style="color:#008040">2001h                </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B82                 </span><span style="color:navy">dw </span><span style="color:#008040">21h
</span><span style="color:gray">TRANGROUP:9B84                 </span><span style="color:navy">dw offset </span>PARSE1_OUTPUT
<span style="color:gray">TRANGROUP:9B86                 </span><span style="color:navy">dw offset </span>NULL_VALUE_LIST
<span style="color:gray">TRANGROUP:9B88                 </span><span style="color:navy">db </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9B89 </span>DIR_SW_A        <span style="color:navy">db &#039;/A&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B8C </span>DIR_SW_O        <span style="color:navy">db &#039;/O&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B8F </span>DIR_SW_UNVALUED <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B91                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9B93                 </span><span style="color:navy">dw offset </span>PARSE1_OUTPUT
<span style="color:gray">TRANGROUP:9B95                 </span><span style="color:navy">dw offset </span>NO_VALUES
<span style="color:gray">TRANGROUP:9B97                 </span><span style="color:navy">db </span><span style="color:#008040">16
</span><span style="color:gray">TRANGROUP:9B98 </span>DIR_SW_NEG_A    <span style="color:navy">db &#039;/-A&#039;,0              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9B9C </span>DIR_SW_NEG_O    <span style="color:navy">db &#039;/-O&#039;,0              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BA0 </span>DIR_SW_S        <span style="color:navy">db &#039;/S&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BA3 </span>DIR_SW_NEG_S    <span style="color:navy">db &#039;/-S&#039;,0              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BA7 </span>DIR_SW_B        <span style="color:navy">db &#039;/B&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BAA </span>DIR_SW_NEG_B    <span style="color:navy">db &#039;/-B&#039;,0              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BAE </span>DIR_SW_W        <span style="color:navy">db &#039;/W&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BB1 </span>DIR_SW_NEG_W    <span style="color:navy">db &#039;/-W&#039;,0              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BB5 </span>DIR_SW_P        <span style="color:navy">db &#039;/P&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BB8 </span>DIR_SW_NEG_P    <span style="color:navy">db &#039;/-P&#039;,0              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BBC </span>DIR_SW_L        <span style="color:navy">db &#039;/L&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BBF </span>DIR_SW_NEG_L    <span style="color:navy">db &#039;/-L&#039;,0              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BC3 </span>DIR_SW_Z        <span style="color:navy">db &#039;/Z&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BC6 </span>DIR_SW_NEG_Z    <span style="color:navy">db &#039;/-Z&#039;,0              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BCA </span>DIR_SW_4        <span style="color:navy">db &#039;/4&#039;,0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BCD </span>DIR_SW_NEG_4    <span style="color:navy">db &#039;/-4&#039;,0              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BD1 </span>Dir_Sw_Ptrs     <span style="color:navy">dw offset </span>DIR_SW_NEG_W  <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BD1                                         ; &quot;/-W&quot;
TRANGROUP:9BD3 </span>Dir_Sw_Ptrs_2   <span style="color:navy">dw offset </span>DIR_SW_W      <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BD3                                         ; &quot;/W&quot;
TRANGROUP:9BD5                 </span><span style="color:navy">dw offset </span>DIR_SW_NEG_P  <span style="color:gray">; &quot;/-P&quot;
TRANGROUP:9BD7                 </span><span style="color:navy">dw offset </span>DIR_SW_P      <span style="color:gray">; &quot;/P&quot;
TRANGROUP:9BD9                 </span><span style="color:navy">dw offset </span>DIR_SW_NEG_S  <span style="color:gray">; &quot;/-S&quot;
TRANGROUP:9BDB                 </span><span style="color:navy">dw offset </span>DIR_SW_S      <span style="color:gray">; &quot;/S&quot;
TRANGROUP:9BDD                 </span><span style="color:navy">dw offset </span>DIR_SW_NEG_B  <span style="color:gray">; &quot;/-B&quot;
TRANGROUP:9BDF                 </span><span style="color:navy">dw offset </span>DIR_SW_B      <span style="color:gray">; &quot;/B&quot;
TRANGROUP:9BE1                 </span><span style="color:navy">dw offset </span>DIR_SW_NEG_L  <span style="color:gray">; &quot;/-L&quot;
TRANGROUP:9BE3                 </span><span style="color:navy">dw offset </span>DIR_SW_L      <span style="color:gray">; &quot;/L&quot;
TRANGROUP:9BE5                 </span><span style="color:navy">dw offset </span>DIR_SW_NEG_Z  <span style="color:gray">; &quot;/-Z&quot;
TRANGROUP:9BE7                 </span><span style="color:navy">dw offset </span>DIR_SW_Z      <span style="color:gray">; &quot;/Z&quot;
TRANGROUP:9BE9                 </span><span style="color:navy">dw offset </span>DIR_SW_NEG_4  <span style="color:gray">; &quot;/-4&quot;
TRANGROUP:9BEB                 </span><span style="color:navy">dw offset </span>DIR_SW_4      <span style="color:gray">; &quot;/4&quot;
TRANGROUP:9BED                 </span><span style="color:navy">dw offset </span>DIR_SW_NEG_O  <span style="color:gray">; &quot;/-O&quot;
TRANGROUP:9BEF                 </span><span style="color:navy">dw offset </span>DIR_SW_O      <span style="color:gray">; &quot;/O&quot;
TRANGROUP:9BF1                 </span><span style="color:navy">dw offset </span>DIR_SW_NEG_A  <span style="color:gray">; &quot;/-A&quot;
TRANGROUP:9BF3                 </span><span style="color:navy">dw offset </span>DIR_SW_A      <span style="color:gray">; &quot;/A&quot;
TRANGROUP:9BF5 </span>PARSE_RENAME    <span style="color:navy">dw offset </span>RENAME_PARMS  <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BF7                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9BF8 </span>RENAME_PARMS    <span style="color:navy">db </span><span style="color:#008040">2</span><span style="color:navy">, </span><span style="color:#008040">2                 </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9BFA                 </span><span style="color:navy">dw offset </span>FILE_REQUIRED
<span style="color:gray">TRANGROUP:9BFC                 </span><span style="color:navy">dw offset </span>FILE_REQUIRED
<span style="color:gray">TRANGROUP:9BFE                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9BFF                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9C00 </span>PARSE_CTTY      <span style="color:navy">dw offset </span>CTTY_PARMS    <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C02                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9C03 </span>CTTY_PARMS      <span style="color:navy">db </span><span style="color:#008040">1</span><span style="color:navy">, </span><span style="color:#008040">1                 </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C05                 </span><span style="color:navy">dw offset </span>CTTY_CONTROL1
<span style="color:gray">TRANGROUP:9C07                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9C08                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9C09 </span>CTTY_CONTROL1   <span style="color:navy">dw </span><span style="color:#008040">2000h                </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C0B                 </span><span style="color:navy">dw </span><span style="color:#008040">11h
</span><span style="color:gray">TRANGROUP:9C0D                 </span><span style="color:navy">dw offset </span>PARSE1_OUTPUT
<span style="color:gray">TRANGROUP:9C0F                 </span><span style="color:navy">dw offset </span>NO_VALUES
<span style="color:gray">TRANGROUP:9C11                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9C12 </span>PARSE_VER       <span style="color:navy">dw offset </span>VER_PARMS     <span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C14                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9C15 </span>VER_PARMS       <span style="color:navy">db </span><span style="color:#008040">0</span><span style="color:navy">, </span><span style="color:#008040">0                 </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C17                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9C18                 </span><span style="color:navy">dw offset </span>SLASH_R
<span style="color:gray">TRANGROUP:9C1A                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9C1B </span>SLASH_R         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C1D                 </span><span style="color:navy">dw </span><span style="color:#008040">2
</span><span style="color:gray">TRANGROUP:9C1F                 </span><span style="color:navy">dw offset </span>PARSE1_OUTPUT
<span style="color:gray">TRANGROUP:9C21                 </span><span style="color:navy">dw offset </span>NO_VALUES
<span style="color:gray">TRANGROUP:9C23                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9C24                 </span><span style="color:navy">db &#039;/R&#039;,0
</span><span style="color:gray">TRANGROUP:9C27 </span>Parse_LoadHi    <span style="color:navy">dw offset </span>LoadHi_Parms
<span style="color:gray">TRANGROUP:9C29                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9C2A </span>LoadHi_Parms    <span style="color:navy">db </span><span style="color:#008040">1                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C2B                 </span><span style="color:navy">db </span><span style="color:#008040">1
</span><span style="color:gray">TRANGROUP:9C2C                 </span><span style="color:navy">dw offset </span>FILE_REQUIRED
<span style="color:gray">TRANGROUP:9C2E                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9C2F                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9C30 </span>TempVarName     <span style="color:navy">db &#039;TEMP=&#039;,0            </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C36 </span>copycmd         <span style="color:navy">db &#039;COPYCMD=&#039;           </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C3E </span>REXX_EXE        <span style="color:navy">db &#039;REXX.EXE&#039;,0         </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C47 </span>$P_ORDINAL      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C49 </span>$P_RC           <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C4B </span>$P_SI_Save      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C4D </span>$P_DX           <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C4F </span>$P_Terminator   <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C50 </span>$P_DBCSEV_OFF   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C52 </span>$P_DBCSEV_SEG   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C54 </span>$P_Flags        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C55 </span>$P_Flags2       <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C56 </span>$P_SaveSI_Cmpx  <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C58 </span>$P_KEYorSW_Ptr  <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C5A </span>$P_Save_EOB     <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C5C </span>$P_Found_SYNONYM <span style="color:navy">dw </span><span style="color:#008040">0                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9C5E </span>$P_STRING_BUF   <span style="color:navy">db </span><span style="color:#008040">128 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)           </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9CDE </span>$P_ORIG_ORD     <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9CE0 </span>$P_ORIG_STACK   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9CE2 </span>$P_ORIG_SI      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9CE4 </span>$P_Got_Time     <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9CE5 </span>$P_Country_Info <span style="color:navy">dw </span><span style="color:#008040">0FFFFh               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9CE7                 </span><span style="color:navy">db </span><span style="color:#008040">32 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0
TRANGROUP:9D07 </span>$P_1st_Val      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D09 </span>$P_2nd_Val      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D0B </span>$P_3rd_Val      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D0D </span>$P_4th_Val      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D0F </span>$P_Char_CAP_Ptr <span style="color:navy">db </span><span style="color:#008040">0FFh                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D10                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9D12                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9D14 </span>$P_File_CAP_Ptr <span style="color:navy">db </span><span style="color:#008040">0FFh                 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D15                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9D17                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9D19 </span>$P_FileSp_Char  <span style="color:navy">db &#039;[]|&lt;&gt;+=;&quot;&#039;          </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D22 </span>$P_err_flag     <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D23 </span>$M_RT_$M_EXT_ERR_ADDRS <span style="color:navy">dw </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D27 </span>$M_RT_$M_EXT_FILE <span style="color:navy">dw </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D2B </span>$M_RT_$M_EXT_COMMAND <span style="color:navy">dw </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D2F                 </span><span style="color:navy">dd </span><span style="color:#008040">0FFFFFFFFh
</span><span style="color:gray">TRANGROUP:9D33 </span>$M_RT_$M_PARSE_COMMAND <span style="color:navy">dw </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D37 </span>$M_RT_$M_PARSE_ADDRS <span style="color:navy">dw </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D3B                 </span><span style="color:navy">dd </span><span style="color:#008040">0FFFFFFFFh
</span><span style="color:gray">TRANGROUP:9D3F </span>$M_RT_$M_CRIT_ADDRS <span style="color:navy">dw </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D43 </span>$M_RT_$M_CRIT_COMMAND <span style="color:navy">dw </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D47                 </span><span style="color:navy">dd </span><span style="color:#008040">0FFFFFFFFh
</span><span style="color:gray">TRANGROUP:9D4B </span>$M_RT_$M_DISK_PROC_ADDR <span style="color:navy">dd </span><span style="color:#008040">0FFFFFFFFh   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D4F </span>$M_RT_$M_CLASS_ADDRS <span style="color:navy">dd </span><span style="color:#008040">0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D53                 </span><span style="color:navy">dd </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9D57                 </span><span style="color:navy">dd </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:9D5B                 </span><span style="color:navy">dd </span><span style="color:#008040">0FFFFFFFFh
</span><span style="color:gray">TRANGROUP:9D5F </span>$M_RT_$M_DBCS_VEC <span style="color:navy">dw </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D63 </span>$M_RT_$M_HANDLE <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D65 </span>$M_RT_$M_SIZE   <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D66 </span>$M_RT_$M_CRLF   <span style="color:navy">db </span><span style="color:green">0Dh</span><span style="color:navy">,</span><span style="color:green">0Ah              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D68 </span>$M_RT_$M_CLASS  <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D69 </span>$M_RT_$M_RETURN_ADDR <span style="color:navy">dw </span><span style="color:#008040">0               </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D6B </span>$M_RT_$M_MSG_NUM <span style="color:navy">dw </span><span style="color:#008040">0                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D6D </span>$M_RT_$M_DIVISOR <span style="color:navy">dw </span><span style="color:#008040">10                  </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D6F </span>$M_RT_$M_TEMP_BUF <span style="color:navy">dw </span><span style="color:#008040">2424h              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D71                 </span><span style="color:navy">db </span><span style="color:#008040">5 </span><span style="color:navy">dup(</span><span style="color:#008040">24h</span><span style="color:navy">)           </span><span style="color:gray">; 0
TRANGROUP:9D76 </span>$M_RT_$M_THOU_SEPARA <span style="color:navy">dw </span><span style="color:#008040">2424h           </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D78 </span>$M_RT_$M_DECI_SEPARA <span style="color:navy">dw </span><span style="color:#008040">2424h           </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D7A </span>$M_RT_$M_DATE_SEPARA <span style="color:navy">dw </span><span style="color:#008040">2424h           </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D7C </span>$M_RT_$M_TIME_SEPARA <span style="color:navy">dw </span><span style="color:#008040">2424h           </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D7E                 </span><span style="color:navy">db </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">24h</span><span style="color:navy">)           </span><span style="color:gray">; 0
TRANGROUP:9D80 </span>$M_RT_$M_TIME_FORMAT <span style="color:navy">dw </span><span style="color:#008040">2424h           </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9D82                 </span><span style="color:navy">db </span><span style="color:#008040">2Dh </span><span style="color:navy">dup(</span><span style="color:#008040">24h</span><span style="color:navy">)         </span><span style="color:gray">; 0
TRANGROUP:9DAF </span>$M_RT_$M_BUF_TERM <span style="color:navy">db </span><span style="color:#008040">24h                </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9DB0 </span>PRINTF_HANDLE   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9DB2 </span>SRCXNAME        <span style="color:navy">db </span><span style="color:#008040">87 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9E09 </span>TRGXNAME        <span style="color:navy">db </span><span style="color:#008040">87 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9E60 </span>UCOMBUF         <span style="color:navy">db </span><span style="color:#008040">131 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)           </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9EE3 </span>COMBUF          <span style="color:navy">db </span><span style="color:#008040">131 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)           </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9F66 </span>USERDIR1        <span style="color:navy">db </span><span style="color:#008040">70 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:9FAC </span>EXECPATH        <span style="color:navy">db </span><span style="color:#008040">131 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)           </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A02F </span>RE_INSTR        <span style="color:navy">db </span><span style="color:#008040">83 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A082 </span>HEADCALL        <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A084 </span>RESSEG          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A086 </span>TPA             <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A088 </span>SWITCHAR        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A089 </span>DIRCHAR         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A08A </span>EXEC_ADDR       <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A08E </span>RCH_ADDR        <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A092 </span>TRAN_TPA        <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A094 </span>CHKDRV          <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A095 </span>IFNOTFLAG       <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A096 </span>CURDRV          <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A097 </span>PARM1           <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A098 </span>notzerofile     <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A099 </span>PARM2           <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A09A </span>COMSW           <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A09C </span>ARG1S           <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A09E </span>DestSwitch      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0A0 </span>ARGTS           <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0A2 </span>CFLAG           <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0A3 </span>SPECDRV         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0A4 </span>BYTCNT          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0A6                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A0A8 </span>NXTADD          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0AA </span>FRSTSRCH        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0AB </span>LeftOnLine      <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0AC </span>PerLine         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0AD </span>LeftOnPage      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0AF </span>FileCnt         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0B1 </span>FileSiz         <span style="color:navy">dw </span><span style="color:#008040">4 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0B9 </span>narrow          <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0BA </span>nocommas        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0BB </span>yeardigit4      <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0BC </span>bfree_not_kilo  <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0BD </span>efs_buffer      <span style="color:navy">db </span><span style="color:#008040">44 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0E9 </span>efs_drive       <span style="color:navy">db &#039;C:\&#039;,0              </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0ED </span>FileCntTotal    <span style="color:navy">dw </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0F1 </span>FileSizTotal    <span style="color:navy">dw </span><span style="color:#008040">4 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A0F9 </span>CHARBUF         <span style="color:navy">db </span><span style="color:#008040">80 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A149 </span>IDLEN           <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A14A </span>ID              <span style="color:navy">db </span><span style="color:#008040">8 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A152 </span>COM             <span style="color:navy">db </span><span style="color:#008040">3 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0
TRANGROUP:A155 </span>DEST            <span style="color:navy">db </span><span style="color:#008040">37 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A17A </span>DESTNAME        <span style="color:navy">db </span><span style="color:#008040">11 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0
TRANGROUP:A185 </span>DESTDIR         <span style="color:navy">db </span><span style="color:#008040">67 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A1C8 </span>BWDBUF          <span style="color:navy">db </span><span style="color:#008040">70 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A20E </span>SDIRBUF         <span style="color:navy">db </span><span style="color:#008040">12 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A21A </span>_Bits           <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A21C </span>PathCnt         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A21E </span>PathPos         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A220 </span>PathSw          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A222 </span>AttrSpecified   <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A223 </span>AttrSelect      <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A224 </span>comma           <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A225 </span>plus_comma      <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A226 </span>DirFlag         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A227 </span>parse_last      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A229 </span>system_cpage    <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A22B </span>File_Size_Low   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A22D </span>File_Size_High  <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A22F </span>string_ptr_2    <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A231 </span>Copy_num        <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A233 </span>cpyflag         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A234 </span>Dir_Num         <span style="color:navy">dw </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A238 </span>Bytes_Free      <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A23C </span>Major_Ver_Num   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A23E </span>Minor_Ver_Num   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A240 </span>One_Char_Val    <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A241                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A242 </span>vol_drv         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A243 </span>ROM_CALL        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A244 </span>ROM_IP          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A246 </span>ROM_CS          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A248 </span>DestIsDir       <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A249 </span>DestSiz         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A24A </span>DestTail        <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A24C </span>DestInfo        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A24D </span>DestBuf         <span style="color:navy">db </span><span style="color:#008040">87 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A2A4 </span>EndDestBuf      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A2A6 </span>DESTISDEV       <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A2A7 </span>FIRSTDEST       <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A2A8 </span>MELCOPY         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A2A9 </span>MELSTART        <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A2AB </span>SrcIsDir        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A2AC </span>SrcSiz          <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A2AD </span>SrcTail         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A2AF </span>SrcInfo         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A2B0 </span>SrcBuf          <span style="color:navy">db </span><span style="color:#008040">87 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A307 </span>SRCHAND         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A309 </span>SRCISDEV        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A30A </span>ScanBuf         <span style="color:navy">db </span><span style="color:#008040">87 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A361 </span>SRCPT           <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A363 </span>INEXACT         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A364 </span>NOWRITE         <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A365 </span>BINARY          <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A366 </span>WRITTEN         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A368 </span>TERMREAD        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A369 </span>ASCII           <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A36A </span>PLUS            <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A36B </span>objcnt          <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A36C </span>CPDATE          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A36E </span>CPTIME          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A370 </span>OFilePtr_Lo     <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A372 </span>OFilePtr_Hi     <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A374 </span>zflag           <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A375 </span>cox_sublist_buff <span style="color:navy">db </span><span style="color:#008040">11 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A380 </span>cox_y_override  <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A381 </span>cox_dest_file   <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A382 </span>cox_src_file    <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A383 </span>BATHAND         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A385 </span>STARTEL         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A387 </span>ELCNT           <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A388 </span>ELPOS           <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A389 </span>SKPDEL          <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A38A </span>SOURCE          <span style="color:navy">db </span><span style="color:#008040">11 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0
TRANGROUP:A395 </span>ext_entered     <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A396 </span>Display_Ioctl   <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A397                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A398                 </span><span style="color:navy">dw </span><span style="color:#008040">14                   </span>; crt_ioctl_ln
<span style="color:gray">TRANGROUP:A39A                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A39C </span>display_mode    <span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A39D                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A39E                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A3A0                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A3A2                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A3A4 </span>display_width   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3A6 </span>LinPerPag       <span style="color:navy">dw </span><span style="color:#008040">25                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3A8 </span>vol_ioctl_buf   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3AA </span>vol_serial      <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3AE </span>vol_label       <span style="color:navy">db </span><span style="color:#008040">0Bh </span><span style="color:navy">dup(</span><span style="color:#008040">20h</span><span style="color:navy">)         </span><span style="color:gray">; 0
TRANGROUP:A3B9                 </span><span style="color:navy">db </span><span style="color:#008040">8 </span><span style="color:navy">dup(</span><span style="color:#008040">20h</span><span style="color:navy">)           </span><span style="color:gray">; 0
TRANGROUP:A3C1 </span>expand_star     <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3C2 </span>msg_flag        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3C3 </span>Msg_Numb        <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3C5 </span>append_exec     <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3C6 </span>print_err_flag  <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3C8 </span>subst_buffer    <span style="color:navy">db </span><span style="color:#008040">22 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3DE </span>KPARSE          <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3DF </span>ARG_ARGV        <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3E1 </span>ARGV0_ARG_FLAGS <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3E2 </span>ARGV0_ARGSTARTEL <span style="color:navy">dw </span><span style="color:#008040">0                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3E4 </span>ARGV0_ARGLEN    <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3E6 </span>ARGV0_ARGSW_WORD <span style="color:navy">dw </span><span style="color:#008040">0                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3E8 </span>ARGV0_OCOMPTR   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3EA </span>ARGV1_ARGPOINTER <span style="color:navy">dw </span><span style="color:#008040">0                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3EC                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A3EE                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A3F0                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A3F1 </span>ARGV1_ARGSW_WORD <span style="color:navy">dw </span><span style="color:#008040">0                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3F3                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A3F5 </span>ARGV2_ARGPOINTER <span style="color:navy">dw </span><span style="color:#008040">0                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3F7                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A3F9                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A3FB                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A3FC </span>ARGV2_ARGSW_WORD <span style="color:navy">dw </span><span style="color:#008040">0                   </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A3FE                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:A400                 </span><span style="color:navy">db </span><span style="color:#008040">671 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)           </span><span style="color:gray">; 0 </span>; ARGV[3] to ARGV[63]
<span style="color:gray">TRANGROUP:A69F </span>ARG_ARGVCNT     <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A6A1 </span>ARG_ARGSWINFO   <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A6A3 </span>ARG_ARGBUF      <span style="color:navy">dw </span><span style="color:#008040">128 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)           </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A6A3                                         </span>; times ARGBLEN dw 0
<span style="color:gray">TRANGROUP:A7A3 </span>ARG_ARGFORCOMBUF <span style="color:navy">db </span><span style="color:#008040">128 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)           </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A823 </span>ARGBUF_PTR      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A825 </span>TPBUF           <span style="color:navy">db </span><span style="color:#008040">128 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)           </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A8A5 </span>LASTARG         <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A8A7 </span>COMPTR          <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A8A9 </span>FBUF            <span style="color:navy">db </span><span style="color:#008040">43 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A8A9                                         </span>; times FINDBUFLEN db 0
<span style="color:gray">TRANGROUP:A8D4 </span>pathinfo        <span style="color:navy">dw </span><span style="color:#008040">0</span><span style="color:navy">, </span><span style="color:#008040">0</span><span style="color:navy">, </span><span style="color:#008040">0              </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A8DA </span>psep_char       <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A8DB </span>search_best     <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A8DC </span>search_best_buf <span style="color:navy">db </span><span style="color:#008040">13 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A8DC                                         </span>; times FNAME_MAX_LEN db 0
<span style="color:gray">TRANGROUP:A8E9 </span>search_curdir_buf <span style="color:navy">db </span><span style="color:#008040">64 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A929 </span>search_error    <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A92B </span>IF_NOT_COUNT    <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:A92D                 </span><span style="color:navy">db </span><span style="color:#008040">256 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)           </span><span style="color:gray">; 0
TRANGROUP:AA2D </span>STACK           <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA2F </span>CURRENCY_SYM    <span style="color:navy">db </span><span style="color:#008040">5 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0
TRANGROUP:AA34 </span>THOUS_SEP       <span style="color:navy">db </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0
TRANGROUP:AA36 </span>DECIMAL_SEP     <span style="color:navy">db </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0
TRANGROUP:AA38 </span>DATE_SEP        <span style="color:navy">db </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0
TRANGROUP:AA3A </span>TIME_SEP        <span style="color:navy">db </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0
TRANGROUP:AA3C </span>BIT_FIELD       <span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:AA3D </span>CURRENCY_CENTS  <span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:AA3E </span>TIME_24         <span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:AA3F </span>MAP_CALL        <span style="color:navy">dd </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:AA43 </span>DATA_SEP        <span style="color:navy">db </span><span style="color:#008040">2 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0
TRANGROUP:AA45                 </span><span style="color:navy">db </span><span style="color:#008040">8 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0
TRANGROUP:AA4D </span>CountryPtrId    <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA4E </span>CountryPtr      <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA52 </span>OldCtrlCHandler <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA56 </span>BATBUFPOS       <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA58 </span>BATBUF          <span style="color:navy">db </span><span style="color:#008040">32 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)            </span><span style="color:gray">; 0 </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA78 </span>BATBUFEND       <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA7A </span>PARSE1_OUTPUT   <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA7B </span>PARSE1_CODE     <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA7C </span>PARSE1_SYN      <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA7E </span>PARSE1_ADDR     <span style="color:navy">dd </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA82 </span>DATE_OUTPUT     <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA83                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:AA84                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:AA86 </span>DATE_YEAR       <span style="color:navy">dw </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA88 </span>DATE_MONTH      <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA89 </span>DATE_DAY        <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA8A </span>TIME_OUTPUT     <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA8B                 </span><span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:AA8C                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:AA8E </span>TIME_HOUR       <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA8F </span>TIME_MINUTES    <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA90 </span>TIME_SECONDS    <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA91 </span>TIME_FRACTION   <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA92 </span>DRIVE_OUTPUT    <span style="color:navy">db </span><span style="color:#008040">0                    </span><span style="color:#8080ff">; ...
</span><span style="color:gray">TRANGROUP:AA93 </span>DRIVE_VALUE     <span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:AA94                 </span><span style="color:navy">dw </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:AA96 </span>DRIVE_NUMBER    <span style="color:navy">db </span><span style="color:#008040">0
</span><span style="color:gray">TRANGROUP:AA97                 </span><span style="color:navy">db </span><span style="color:#008040">3 </span><span style="color:navy">dup(</span><span style="color:#008040">0</span><span style="color:navy">)             </span><span style="color:gray">; 0
TRANGROUP:AA97 </span>ends            TRANGROUP
<span style="color:gray">TRANGROUP:AA97
TRANGROUP:AA97
TRANGROUP:AA97                 </span>end start
</span></body></html>
